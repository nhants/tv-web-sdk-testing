!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("crypto")):"function"==typeof define&&define.amd?define(["exports","crypto"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TVWebSDK={},e.crypto)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t),a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return s(null==t&&n.path)}},n.exports),n.exports}function s(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var u=function(e){return e&&e.Math==Math&&e},c=u("object"==typeof globalThis&&globalThis)||u("object"==typeof window&&window)||u("object"==typeof self&&self)||u("object"==typeof a&&a)||function(){return this}()||Function("return this")(),l=function(e){try{return!!e()}catch(e){return!0}},d=!l((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),f={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,h=p&&!f.call({1:2},1),m=h?function(e){var t=p(this,e);return!!t&&t.enumerable}:f,g={f:m},v=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},y={}.toString,b=function(e){return y.call(e).slice(8,-1)},x="".split,k=l((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==b(e)?x.call(e,""):Object(e)}:Object,w=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},I=function(e){return k(w(e))},C=function(e){return"object"==typeof e?null!==e:"function"==typeof e},E=function(e,t){if(!C(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!C(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!C(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!C(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},S={}.hasOwnProperty,T=function(e,t){return S.call(e,t)},A=c.document,N=C(A)&&C(A.createElement),_=function(e){return N?A.createElement(e):{}},R=!d&&!l((function(){return 7!=Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a})),O=Object.getOwnPropertyDescriptor,F=d?O:function(e,t){if(e=I(e),t=E(t,!0),R)try{return O(e,t)}catch(e){}if(T(e,t))return v(!g.f.call(e,t),e[t])},M={f:F},D=function(e){if(!C(e))throw TypeError(String(e)+" is not an object");return e},B=Object.defineProperty,P=d?B:function(e,t,n){if(D(e),t=E(t,!0),D(n),R)try{return B(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e},L={f:P},U=d?function(e,t,n){return L.f(e,t,v(1,n))}:function(e,t,n){return e[t]=n,e},V=function(e,t){try{U(c,e,t)}catch(n){c[e]=t}return t},W="__core-js_shared__",z=c[W]||V(W,{}),j=z,H=Function.toString;"function"!=typeof j.inspectSource&&(j.inspectSource=function(e){return H.call(e)});var G,K,q,X=j.inspectSource,Q=c.WeakMap,Y="function"==typeof Q&&/native code/.test(X(Q)),$=!1,Z=i((function(e){(e.exports=function(e,t){return j[e]||(j[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),J=0,ee=Math.random(),te=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++J+ee).toString(36)},ne=Z("keys"),re=function(e){return ne[e]||(ne[e]=te(e))},ae={},oe=c.WeakMap,ie=function(e){return q(e)?K(e):G(e,{})},se=function(e){return function(t){var n;if(!C(t)||(n=K(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(Y){var ue=j.state||(j.state=new oe),ce=ue.get,le=ue.has,de=ue.set;G=function(e,t){return t.facade=e,de.call(ue,e,t),t},K=function(e){return ce.call(ue,e)||{}},q=function(e){return le.call(ue,e)}}else{var fe=re("state");ae[fe]=!0,G=function(e,t){return t.facade=e,U(e,fe,t),t},K=function(e){return T(e,fe)?e[fe]:{}},q=function(e){return T(e,fe)}}var pe,he={set:G,get:K,has:q,enforce:ie,getterFor:se},me=i((function(e){var t=he.get,n=he.enforce,r=String(String).split("String");(e.exports=function(e,t,a,o){var i,s=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof a&&("string"!=typeof t||T(a,"name")||U(a,"name",t),(i=n(a)).source||(i.source=r.join("string"==typeof t?t:""))),e!==c?(s?!l&&e[t]&&(u=!0):delete e[t],u?e[t]=a:U(e,t,a)):u?e[t]=a:V(t,a)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||X(this)}))})),ge=c,ve=function(e){return"function"==typeof e?e:void 0},ye=function(e,t){return arguments.length<2?ve(ge[e])||ve(c[e]):ge[e]&&ge[e][t]||c[e]&&c[e][t]},be=Math.ceil,xe=Math.floor,ke=function(e){return isNaN(e=+e)?0:(e>0?xe:be)(e)},we=Math.min,Ie=function(e){return e>0?we(ke(e),9007199254740991):0},Ce=Math.max,Ee=Math.min,Se=function(e,t){var n=ke(e);return n<0?Ce(n+t,0):Ee(n,t)},Te=function(e){return function(t,n,r){var a,o=I(t),i=Ie(o.length),s=Se(r,i);if(e&&n!=n){for(;i>s;)if((a=o[s++])!=a)return!0}else for(;i>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},Ae={includes:Te(!0),indexOf:Te(!1)},Ne=Ae.indexOf,_e=function(e,t){var n,r=I(e),a=0,o=[];for(n in r)!T(ae,n)&&T(r,n)&&o.push(n);for(;t.length>a;)T(r,n=t[a++])&&(~Ne(o,n)||o.push(n));return o},Re=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Oe=Re.concat("length","prototype"),Fe=Object.getOwnPropertyNames||function(e){return _e(e,Oe)},Me={f:Fe},De=Object.getOwnPropertySymbols,Be={f:De},Pe=ye("Reflect","ownKeys")||function(e){var t=Me.f(D(e)),n=Be.f;return n?t.concat(n(e)):t},Le=function(e,t){for(var n=Pe(t),r=L.f,a=M.f,o=0;o<n.length;o++){var i=n[o];T(e,i)||r(e,i,a(t,i))}},Ue=/#|\.prototype\./,Ve=function(e,t){var n=ze[We(e)];return n==He||n!=je&&("function"==typeof t?l(t):!!t)},We=Ve.normalize=function(e){return String(e).replace(Ue,".").toLowerCase()},ze=Ve.data={},je=Ve.NATIVE="N",He=Ve.POLYFILL="P",Ge=Ve,Ke=M.f,qe=function(e,t){var n,r,a,o,i,s=e.target,u=e.global,l=e.stat;if(n=u?c:l?c[s]||V(s,{}):(c[s]||{}).prototype)for(r in t){if(o=t[r],a=e.noTargetGet?(i=Ke(n,r))&&i.value:n[r],!Ge(u?r:s+(l?".":"#")+r,e.forced)&&void 0!==a){if(typeof o==typeof a)continue;Le(o,a)}(e.sham||a&&a.sham)&&U(o,"sham",!0),me(n,r,o,e)}},Xe=!!Object.getOwnPropertySymbols&&!l((function(){return!String(Symbol())})),Qe=Xe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ye=Array.isArray||function(e){return"Array"==b(e)},$e=function(e){return Object(w(e))},Ze=Object.keys||function(e){return _e(e,Re)},Je=d?Object.defineProperties:function(e,t){D(e);for(var n,r=Ze(t),a=r.length,o=0;a>o;)L.f(e,n=r[o++],t[n]);return e},et=ye("document","documentElement"),tt=">",nt="<",rt="prototype",at="script",ot=re("IE_PROTO"),it=function(){},st=function(e){return nt+at+tt+e+nt+"/"+at+tt},ut=function(e){e.write(st("")),e.close();var t=e.parentWindow.Object;return e=null,t},ct=function(){var e,t=_("iframe"),n="java"+at+":";return t.style.display="none",et.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(st("document.F=Object")),e.close(),e.F},lt=function(){try{pe=document.domain&&new ActiveXObject("htmlfile")}catch(e){}lt=pe?ut(pe):ct();for(var e=Re.length;e--;)delete lt[rt][Re[e]];return lt()};ae[ot]=!0;var dt=Object.create||function(e,t){var n;return null!==e?(it[rt]=D(e),n=new it,it[rt]=null,n[ot]=e):n=lt(),void 0===t?n:Je(n,t)},ft=Me.f,pt={}.toString,ht="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],mt=function(e){try{return ft(e)}catch(e){return ht.slice()}},gt=function(e){return ht&&"[object Window]"==pt.call(e)?mt(e):ft(I(e))},vt={f:gt},yt=Z("wks"),bt=c.Symbol,xt=Qe?bt:bt&&bt.withoutSetter||te,kt=function(e){return T(yt,e)||(Xe&&T(bt,e)?yt[e]=bt[e]:yt[e]=xt("Symbol."+e)),yt[e]},wt=kt,It={f:wt},Ct=L.f,Et=function(e){var t=ge.Symbol||(ge.Symbol={});T(t,e)||Ct(t,e,{value:It.f(e)})},St=L.f,Tt=kt("toStringTag"),At=function(e,t,n){e&&!T(e=n?e:e.prototype,Tt)&&St(e,Tt,{configurable:!0,value:t})},Nt=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},_t=function(e,t,n){if(Nt(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}},Rt=kt("species"),Ot=function(e,t){var n;return Ye(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Ye(n.prototype)?C(n)&&null===(n=n[Rt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},Ft=[].push,Mt=function(e){var t=1==e,n=2==e,r=3==e,a=4==e,o=6==e,i=7==e,s=5==e||o;return function(u,c,l,d){for(var f,p,h=$e(u),m=k(h),g=_t(c,l,3),v=Ie(m.length),y=0,b=d||Ot,x=t?b(u,v):n||i?b(u,0):void 0;v>y;y++)if((s||y in m)&&(p=g(f=m[y],y,h),e))if(t)x[y]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return y;case 2:Ft.call(x,f)}else switch(e){case 4:return!1;case 7:Ft.call(x,f)}return o?-1:r||a?a:x}},Dt={forEach:Mt(0),map:Mt(1),filter:Mt(2),some:Mt(3),every:Mt(4),find:Mt(5),findIndex:Mt(6),filterOut:Mt(7)},Bt=Dt.forEach,Pt=re("hidden"),Lt="Symbol",Ut="prototype",Vt=kt("toPrimitive"),Wt=he.set,zt=he.getterFor(Lt),jt=Object[Ut],Ht=c.Symbol,Gt=ye("JSON","stringify"),Kt=M.f,qt=L.f,Xt=vt.f,Qt=g.f,Yt=Z("symbols"),$t=Z("op-symbols"),Zt=Z("string-to-symbol-registry"),Jt=Z("symbol-to-string-registry"),en=Z("wks"),tn=c.QObject,nn=!tn||!tn[Ut]||!tn[Ut].findChild,rn=d&&l((function(){return 7!=dt(qt({},"a",{get:function(){return qt(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Kt(jt,t);r&&delete jt[t],qt(e,t,n),r&&e!==jt&&qt(jt,t,r)}:qt,an=function(e,t){var n=Yt[e]=dt(Ht[Ut]);return Wt(n,{type:Lt,tag:e,description:t}),d||(n.description=t),n},on=Qe?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Ht},sn=function(e,t,n){e===jt&&sn($t,t,n),D(e);var r=E(t,!0);return D(n),T(Yt,r)?(n.enumerable?(T(e,Pt)&&e[Pt][r]&&(e[Pt][r]=!1),n=dt(n,{enumerable:v(0,!1)})):(T(e,Pt)||qt(e,Pt,v(1,{})),e[Pt][r]=!0),rn(e,r,n)):qt(e,r,n)},un=function(e,t){D(e);var n=I(t),r=Ze(n).concat(pn(n));return Bt(r,(function(t){d&&!ln.call(n,t)||sn(e,t,n[t])})),e},cn=function(e,t){return void 0===t?dt(e):un(dt(e),t)},ln=function(e){var t=E(e,!0),n=Qt.call(this,t);return!(this===jt&&T(Yt,t)&&!T($t,t))&&(!(n||!T(this,t)||!T(Yt,t)||T(this,Pt)&&this[Pt][t])||n)},dn=function(e,t){var n=I(e),r=E(t,!0);if(n!==jt||!T(Yt,r)||T($t,r)){var a=Kt(n,r);return!a||!T(Yt,r)||T(n,Pt)&&n[Pt][r]||(a.enumerable=!0),a}},fn=function(e){var t=Xt(I(e)),n=[];return Bt(t,(function(e){T(Yt,e)||T(ae,e)||n.push(e)})),n},pn=function(e){var t=e===jt,n=Xt(t?$t:I(e)),r=[];return Bt(n,(function(e){!T(Yt,e)||t&&!T(jt,e)||r.push(Yt[e])})),r};if(Xe||(me((Ht=function(){if(this instanceof Ht)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=te(e),n=function(e){this===jt&&n.call($t,e),T(this,Pt)&&T(this[Pt],t)&&(this[Pt][t]=!1),rn(this,t,v(1,e))};return d&&nn&&rn(jt,t,{configurable:!0,set:n}),an(t,e)})[Ut],"toString",(function(){return zt(this).tag})),me(Ht,"withoutSetter",(function(e){return an(te(e),e)})),g.f=ln,L.f=sn,M.f=dn,Me.f=vt.f=fn,Be.f=pn,It.f=function(e){return an(kt(e),e)},d&&(qt(Ht[Ut],"description",{configurable:!0,get:function(){return zt(this).description}}),me(jt,"propertyIsEnumerable",ln,{unsafe:!0}))),qe({global:!0,wrap:!0,forced:!Xe,sham:!Xe},{Symbol:Ht}),Bt(Ze(en),(function(e){Et(e)})),qe({target:Lt,stat:!0,forced:!Xe},{for:function(e){var t=String(e);if(T(Zt,t))return Zt[t];var n=Ht(t);return Zt[t]=n,Jt[n]=t,n},keyFor:function(e){if(!on(e))throw TypeError(e+" is not a symbol");if(T(Jt,e))return Jt[e]},useSetter:function(){nn=!0},useSimple:function(){nn=!1}}),qe({target:"Object",stat:!0,forced:!Xe,sham:!d},{create:cn,defineProperty:sn,defineProperties:un,getOwnPropertyDescriptor:dn}),qe({target:"Object",stat:!0,forced:!Xe},{getOwnPropertyNames:fn,getOwnPropertySymbols:pn}),qe({target:"Object",stat:!0,forced:l((function(){Be.f(1)}))},{getOwnPropertySymbols:function(e){return Be.f($e(e))}}),Gt){var hn=!Xe||l((function(){var e=Ht();return"[null]"!=Gt([e])||"{}"!=Gt({a:e})||"{}"!=Gt(Object(e))}));qe({target:"JSON",stat:!0,forced:hn},{stringify:function(e,t,n){for(var r,a=[e],o=1;arguments.length>o;)a.push(arguments[o++]);if(r=t,(C(t)||void 0!==e)&&!on(e))return Ye(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!on(t))return t}),a[1]=t,Gt.apply(null,a)}})}Ht[Ut][Vt]||U(Ht[Ut],Vt,Ht[Ut].valueOf),At(Ht,Lt),ae[Pt]=!0,Et("asyncIterator");var mn=L.f,gn=c.Symbol;if(d&&"function"==typeof gn&&(!("description"in gn.prototype)||void 0!==gn().description)){var vn={},yn=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof yn?new gn(e):void 0===e?gn():gn(e);return""===e&&(vn[t]=!0),t};Le(yn,gn);var bn=yn.prototype=gn.prototype;bn.constructor=yn;var xn=bn.toString,kn="Symbol(test)"==String(gn("test")),wn=/^Symbol\((.*)\)[^)]+$/;mn(bn,"description",{configurable:!0,get:function(){var e=C(this)?this.valueOf():this,t=xn.call(e);if(T(vn,e))return"";var n=kn?t.slice(7,-1):t.replace(wn,"$1");return""===n?void 0:n}}),qe({global:!0,forced:!0},{Symbol:yn})}Et("hasInstance"),Et("isConcatSpreadable"),Et("iterator"),Et("match"),Et("matchAll"),Et("replace"),Et("search"),Et("species"),Et("split"),Et("toPrimitive"),Et("toStringTag"),Et("unscopables");var In=!l((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Cn=re("IE_PROTO"),En=Object.prototype,Sn=In?Object.getPrototypeOf:function(e){return e=$e(e),T(e,Cn)?e[Cn]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?En:null},Tn=function(e){if(!C(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e},An=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return D(n),Tn(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),Nn={},_n=kt("iterator"),Rn=Array.prototype,On=function(e){return void 0!==e&&(Nn.Array===e||Rn[_n]===e)},Fn=kt("toStringTag"),Mn={};Mn[Fn]="z";var Dn="[object z]"===String(Mn),Bn=kt("toStringTag"),Pn="Arguments"==b(function(){return arguments}()),Ln=function(e,t){try{return e[t]}catch(e){}},Un=Dn?b:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=Ln(t=Object(e),Bn))?n:Pn?b(t):"Object"==(r=b(t))&&"function"==typeof t.callee?"Arguments":r},Vn=kt("iterator"),Wn=function(e){if(null!=e)return e[Vn]||e["@@iterator"]||Nn[Un(e)]},zn=function(e){var t=e.return;if(void 0!==t)return D(t.call(e)).value},jn=function(e,t){this.stopped=e,this.result=t},Hn=function(e,t,n){var r,a,o,i,s,u,c,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),h=_t(t,l,1+d+p),m=function(e){return r&&zn(r),new jn(!0,e)},g=function(e){return d?(D(e),p?h(e[0],e[1],m):h(e[0],e[1])):p?h(e,m):h(e)};if(f)r=e;else{if("function"!=typeof(a=Wn(e)))throw TypeError("Target is not iterable");if(On(a)){for(o=0,i=Ie(e.length);i>o;o++)if((s=g(e[o]))&&s instanceof jn)return s;return new jn(!1)}r=a.call(e)}for(u=r.next;!(c=u.call(r)).done;){try{s=g(c.value)}catch(e){throw zn(r),e}if("object"==typeof s&&s&&s instanceof jn)return s}return new jn(!1)},Gn=function(e,t){var n=this;if(!(n instanceof Gn))return new Gn(e,t);An&&(n=An(new Error(void 0),Sn(n))),void 0!==t&&U(n,"message",String(t));var r=[];return Hn(e,r.push,{that:r}),U(n,"errors",r),n};Gn.prototype=dt(Error.prototype,{constructor:v(5,Gn),message:v(5,""),name:v(5,"AggregateError")}),qe({global:!0},{AggregateError:Gn});var Kn=function(e,t,n,r){try{return r?t(D(n)[0],n[1]):t(n)}catch(t){throw zn(e),t}},qn=function(e,t,n){var r=E(t);r in e?L.f(e,r,v(0,n)):e[r]=n},Xn=function(e){var t,n,r,a,o,i,s=$e(e),u="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,d=void 0!==l,f=Wn(s),p=0;if(d&&(l=_t(l,c>2?arguments[2]:void 0,2)),null==f||u==Array&&On(f))for(n=new u(t=Ie(s.length));t>p;p++)i=d?l(s[p],p):s[p],qn(n,p,i);else for(o=(a=f.call(s)).next,n=new u;!(r=o.call(a)).done;p++)i=d?Kn(a,l,[r.value,p],!0):r.value,qn(n,p,i);return n.length=p,n},Qn=kt("iterator"),Yn=!1;try{var $n=0,Zn={next:function(){return{done:!!$n++}},return:function(){Yn=!0}};Zn[Qn]=function(){return this},Array.from(Zn,(function(){throw 2}))}catch(e){}var Jn=function(e,t){if(!t&&!Yn)return!1;var n=!1;try{var r={};r[Qn]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},er=!Jn((function(e){Array.from(e)}));qe({target:"Array",stat:!0,forced:er},{from:Xn}),qe({target:"Array",stat:!0},{isArray:Ye});var tr=l((function(){function e(){}return!(Array.of.call(e)instanceof e)}));qe({target:"Array",stat:!0,forced:tr},{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)qn(n,e,arguments[e++]);return n.length=t,n}});var nr,rr,ar=ye("navigator","userAgent")||"",or=c.process,ir=or&&or.versions,sr=ir&&ir.v8;sr?rr=(nr=sr.split("."))[0]+nr[1]:ar&&(!(nr=ar.match(/Edge\/(\d+)/))||nr[1]>=74)&&(nr=ar.match(/Chrome\/(\d+)/))&&(rr=nr[1]);var ur=rr&&+rr,cr=kt("species"),lr=function(e){return ur>=51||!l((function(){var t=[];return(t.constructor={})[cr]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},dr=kt("isConcatSpreadable"),fr=9007199254740991,pr="Maximum allowed index exceeded",hr=ur>=51||!l((function(){var e=[];return e[dr]=!1,e.concat()[0]!==e})),mr=lr("concat"),gr=function(e){if(!C(e))return!1;var t=e[dr];return void 0!==t?!!t:Ye(e)},vr=!hr||!mr;qe({target:"Array",proto:!0,forced:vr},{concat:function(e){var t,n,r,a,o,i=$e(this),s=Ot(i,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(gr(o=-1===t?i:arguments[t])){if(u+(a=Ie(o.length))>fr)throw TypeError(pr);for(n=0;n<a;n++,u++)n in o&&qn(s,u,o[n])}else{if(u>=fr)throw TypeError(pr);qn(s,u++,o)}return s.length=u,s}});var yr=Math.min,br=[].copyWithin||function(e,t){var n=$e(this),r=Ie(n.length),a=Se(e,r),o=Se(t,r),i=arguments.length>2?arguments[2]:void 0,s=yr((void 0===i?r:Se(i,r))-o,r-a),u=1;for(o<a&&a<o+s&&(u=-1,o+=s-1,a+=s-1);s-- >0;)o in n?n[a]=n[o]:delete n[a],a+=u,o+=u;return n},xr=kt("unscopables"),kr=Array.prototype;null==kr[xr]&&L.f(kr,xr,{configurable:!0,value:dt(null)});var wr=function(e){kr[xr][e]=!0};qe({target:"Array",proto:!0},{copyWithin:br}),wr("copyWithin");var Ir=function(e,t){var n=[][e];return!!n&&l((function(){n.call(null,t||function(){throw 1},1)}))},Cr=Object.defineProperty,Er={},Sr=function(e){throw e},Tr=function(e,t){if(T(Er,e))return Er[e];t||(t={});var n=[][e],r=!!T(t,"ACCESSORS")&&t.ACCESSORS,a=T(t,0)?t[0]:Sr,o=T(t,1)?t[1]:void 0;return Er[e]=!!n&&!l((function(){if(r&&!d)return!0;var e={length:-1};r?Cr(e,1,{enumerable:!0,get:Sr}):e[1]=1,n.call(e,a,o)}))},Ar=Dt.every,Nr=Ir("every"),_r=Tr("every");qe({target:"Array",proto:!0,forced:!Nr||!_r},{every:function(e){return Ar(this,e,arguments.length>1?arguments[1]:void 0)}});var Rr=function(e){for(var t=$e(this),n=Ie(t.length),r=arguments.length,a=Se(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,i=void 0===o?n:Se(o,n);i>a;)t[a++]=e;return t};qe({target:"Array",proto:!0},{fill:Rr}),wr("fill");var Or=Dt.filter,Fr=lr("filter"),Mr=Tr("filter");qe({target:"Array",proto:!0,forced:!Fr||!Mr},{filter:function(e){return Or(this,e,arguments.length>1?arguments[1]:void 0)}});var Dr=Dt.find,Br="find",Pr=!0,Lr=Tr(Br);Br in[]&&Array(1)[Br]((function(){Pr=!1})),qe({target:"Array",proto:!0,forced:Pr||!Lr},{find:function(e){return Dr(this,e,arguments.length>1?arguments[1]:void 0)}}),wr(Br);var Ur=Dt.findIndex,Vr="findIndex",Wr=!0,zr=Tr(Vr);Vr in[]&&Array(1)[Vr]((function(){Wr=!1})),qe({target:"Array",proto:!0,forced:Wr||!zr},{findIndex:function(e){return Ur(this,e,arguments.length>1?arguments[1]:void 0)}}),wr(Vr);var jr=function(e,t,n,r,a,o,i,s){for(var u,c=a,l=0,d=!!i&&_t(i,s,3);l<r;){if(l in n){if(u=d?d(n[l],l,t):n[l],o>0&&Ye(u))c=jr(e,t,u,Ie(u.length),c,o-1)-1;else{if(c>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[c]=u}c++}l++}return c},Hr=jr;qe({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=$e(this),n=Ie(t.length),r=Ot(t,0);return r.length=Hr(r,t,t,n,0,void 0===e?1:ke(e)),r}}),qe({target:"Array",proto:!0},{flatMap:function(e){var t,n=$e(this),r=Ie(n.length);return Nt(e),(t=Ot(n,0)).length=Hr(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}});var Gr=Dt.forEach,Kr=Ir("forEach"),qr=Tr("forEach"),Xr=Kr&&qr?[].forEach:function(e){return Gr(this,e,arguments.length>1?arguments[1]:void 0)};qe({target:"Array",proto:!0,forced:[].forEach!=Xr},{forEach:Xr});var Qr=Ae.includes,Yr=Tr("indexOf",{ACCESSORS:!0,1:0});qe({target:"Array",proto:!0,forced:!Yr},{includes:function(e){return Qr(this,e,arguments.length>1?arguments[1]:void 0)}}),wr("includes");var $r=Ae.indexOf,Zr=[].indexOf,Jr=!!Zr&&1/[1].indexOf(1,-0)<0,ea=Ir("indexOf"),ta=Tr("indexOf",{ACCESSORS:!0,1:0});qe({target:"Array",proto:!0,forced:Jr||!ea||!ta},{indexOf:function(e){return Jr?Zr.apply(this,arguments)||0:$r(this,e,arguments.length>1?arguments[1]:void 0)}});var na=[].join,ra=k!=Object,aa=Ir("join",",");qe({target:"Array",proto:!0,forced:ra||!aa},{join:function(e){return na.call(I(this),void 0===e?",":e)}});var oa=Math.min,ia=[].lastIndexOf,sa=!!ia&&1/[1].lastIndexOf(1,-0)<0,ua=Ir("lastIndexOf"),ca=Tr("indexOf",{ACCESSORS:!0,1:0}),la=sa||!ua||!ca,da=la?function(e){if(sa)return ia.apply(this,arguments)||0;var t=I(this),n=Ie(t.length),r=n-1;for(arguments.length>1&&(r=oa(r,ke(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:ia;qe({target:"Array",proto:!0,forced:da!==[].lastIndexOf},{lastIndexOf:da});var fa=Dt.map,pa=lr("map"),ha=Tr("map");qe({target:"Array",proto:!0,forced:!pa||!ha},{map:function(e){return fa(this,e,arguments.length>1?arguments[1]:void 0)}});var ma=function(e){return function(t,n,r,a){Nt(n);var o=$e(t),i=k(o),s=Ie(o.length),u=e?s-1:0,c=e?-1:1;if(r<2)for(;;){if(u in i){a=i[u],u+=c;break}if(u+=c,e?u<0:s<=u)throw TypeError("Reduce of empty array with no initial value")}for(;e?u>=0:s>u;u+=c)u in i&&(a=n(a,i[u],u,o));return a}},ga={left:ma(!1),right:ma(!0)},va="process"==b(c.process),ya=ga.left,ba=Ir("reduce"),xa=Tr("reduce",{1:0}),ka=!va&&ur>79&&ur<83;qe({target:"Array",proto:!0,forced:!ba||!xa||ka},{reduce:function(e){return ya(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var wa=ga.right,Ia=Ir("reduceRight"),Ca=Tr("reduce",{1:0}),Ea=!va&&ur>79&&ur<83;qe({target:"Array",proto:!0,forced:!Ia||!Ca||Ea},{reduceRight:function(e){return wa(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Sa=[].reverse,Ta=[1,2];qe({target:"Array",proto:!0,forced:String(Ta)===String(Ta.reverse())},{reverse:function(){return Ye(this)&&(this.length=this.length),Sa.call(this)}});var Aa=lr("slice"),Na=Tr("slice",{ACCESSORS:!0,0:0,1:2}),_a=kt("species"),Ra=[].slice,Oa=Math.max;qe({target:"Array",proto:!0,forced:!Aa||!Na},{slice:function(e,t){var n,r,a,o=I(this),i=Ie(o.length),s=Se(e,i),u=Se(void 0===t?i:t,i);if(Ye(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Ye(n.prototype)?C(n)&&null===(n=n[_a])&&(n=void 0):n=void 0,n===Array||void 0===n))return Ra.call(o,s,u);for(r=new(void 0===n?Array:n)(Oa(u-s,0)),a=0;s<u;s++,a++)s in o&&qn(r,a,o[s]);return r.length=a,r}});var Fa=Dt.some,Ma=Ir("some"),Da=Tr("some");qe({target:"Array",proto:!0,forced:!Ma||!Da},{some:function(e){return Fa(this,e,arguments.length>1?arguments[1]:void 0)}});var Ba=[],Pa=Ba.sort,La=l((function(){Ba.sort(void 0)})),Ua=l((function(){Ba.sort(null)})),Va=Ir("sort"),Wa=La||!Ua||!Va;qe({target:"Array",proto:!0,forced:Wa},{sort:function(e){return void 0===e?Pa.call($e(this)):Pa.call($e(this),Nt(e))}});var za=lr("splice"),ja=Tr("splice",{ACCESSORS:!0,0:0,1:2}),Ha=Math.max,Ga=Math.min,Ka=9007199254740991,qa="Maximum allowed length exceeded";qe({target:"Array",proto:!0,forced:!za||!ja},{splice:function(e,t){var n,r,a,o,i,s,u=$e(this),c=Ie(u.length),l=Se(e,c),d=arguments.length;if(0===d?n=r=0:1===d?(n=0,r=c-l):(n=d-2,r=Ga(Ha(ke(t),0),c-l)),c+n-r>Ka)throw TypeError(qa);for(a=Ot(u,r),o=0;o<r;o++)(i=l+o)in u&&qn(a,o,u[i]);if(a.length=r,n<r){for(o=l;o<c-r;o++)s=o+n,(i=o+r)in u?u[s]=u[i]:delete u[s];for(o=c;o>c-r+n;o--)delete u[o-1]}else if(n>r)for(o=c-r;o>l;o--)s=o+n-1,(i=o+r-1)in u?u[s]=u[i]:delete u[s];for(o=0;o<n;o++)u[o+l]=arguments[o+2];return u.length=c-r+n,a}});var Xa=kt("species"),Qa=function(e){var t=ye(e),n=L.f;d&&t&&!t[Xa]&&n(t,Xa,{configurable:!0,get:function(){return this}})};Qa("Array"),wr("flat"),wr("flatMap");var Ya,$a,Za,Ja=kt("iterator"),eo=!1,to=function(){return this};[].keys&&("next"in(Za=[].keys())?($a=Sn(Sn(Za)))!==Object.prototype&&(Ya=$a):eo=!0),null==Ya&&(Ya={}),T(Ya,Ja)||U(Ya,Ja,to);var no={IteratorPrototype:Ya,BUGGY_SAFARI_ITERATORS:eo},ro=no.IteratorPrototype,ao=function(){return this},oo=function(e,t,n){var r=t+" Iterator";return e.prototype=dt(ro,{next:v(1,n)}),At(e,r,!1),Nn[r]=ao,e},io=no.IteratorPrototype,so=no.BUGGY_SAFARI_ITERATORS,uo=kt("iterator"),co="keys",lo="values",fo="entries",po=function(){return this},ho=function(e,t,n,r,a,o,i){oo(n,t,r);var s,u,c,l=function(e){if(e===a&&m)return m;if(!so&&e in p)return p[e];switch(e){case co:case lo:case fo:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",f=!1,p=e.prototype,h=p[uo]||p["@@iterator"]||a&&p[a],m=!so&&h||l(a),g="Array"==t&&p.entries||h;if(g&&(s=Sn(g.call(new e)),io!==Object.prototype&&s.next&&(Sn(s)!==io&&(An?An(s,io):"function"!=typeof s[uo]&&U(s,uo,po)),At(s,d,!0))),a==lo&&h&&h.name!==lo&&(f=!0,m=function(){return h.call(this)}),p[uo]!==m&&U(p,uo,m),Nn[t]=m,a)if(u={values:l(lo),keys:o?m:l(co),entries:l(fo)},i)for(c in u)(so||f||!(c in p))&&me(p,c,u[c]);else qe({target:t,proto:!0,forced:so||f},u);return u},mo="Array Iterator",go=he.set,vo=he.getterFor(mo),yo=ho(Array,"Array",(function(e,t){go(this,{type:mo,target:I(e),index:0,kind:t})}),(function(){var e=vo(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");Nn.Arguments=Nn.Array,wr("keys"),wr("values"),wr("entries");var bo=[].slice,xo={},ko=function(e,t,n){if(!(t in xo)){for(var r=[],a=0;a<t;a++)r[a]="a["+a+"]";xo[t]=Function("C,a","return new C("+r.join(",")+")")}return xo[t](e,n)},wo=Function.bind||function(e){var t=Nt(this),n=bo.call(arguments,1),r=function(){var a=n.concat(bo.call(arguments));return this instanceof r?ko(t,a.length,a):t.apply(e,a)};return C(t.prototype)&&(r.prototype=t.prototype),r};qe({target:"Function",proto:!0},{bind:wo});var Io=L.f,Co=Function.prototype,Eo=Co.toString,So=/^\s*function ([^ (]*)/,To="name";d&&!(To in Co)&&Io(Co,To,{configurable:!0,get:function(){try{return Eo.call(this).match(So)[1]}catch(e){return""}}});var Ao=kt("hasInstance"),No=Function.prototype;Ao in No||L.f(No,Ao,{value:function(e){if("function"!=typeof this||!C(e))return!1;if(!C(this.prototype))return e instanceof this;for(;e=Sn(e);)if(this.prototype===e)return!0;return!1}}),qe({global:!0},{globalThis:c});var _o=Object.assign,Ro=Object.defineProperty,Oo=!_o||l((function(){if(d&&1!==_o({b:1},_o(Ro({},"a",{enumerable:!0,get:function(){Ro(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=_o({},e)[n]||Ze(_o({},t)).join("")!=r}))?function(e,t){for(var n=$e(e),r=arguments.length,a=1,o=Be.f,i=g.f;r>a;)for(var s,u=k(arguments[a++]),c=o?Ze(u).concat(o(u)):Ze(u),l=c.length,f=0;l>f;)s=c[f++],d&&!i.call(u,s)||(n[s]=u[s]);return n}:_o;qe({target:"Object",stat:!0,forced:Object.assign!==Oo},{assign:Oo}),qe({target:"Object",stat:!0,sham:!d},{create:dt}),qe({target:"Object",stat:!0,forced:!d,sham:!d},{defineProperty:L.f}),qe({target:"Object",stat:!0,forced:!d,sham:!d},{defineProperties:Je});var Fo=g.f,Mo=function(e){return function(t){for(var n,r=I(t),a=Ze(r),o=a.length,i=0,s=[];o>i;)n=a[i++],d&&!Fo.call(r,n)||s.push(e?[n,r[n]]:r[n]);return s}},Do={entries:Mo(!0),values:Mo(!1)},Bo=Do.entries;qe({target:"Object",stat:!0},{entries:function(e){return Bo(e)}});var Po=!l((function(){return Object.isExtensible(Object.preventExtensions({}))})),Lo=i((function(e){var t=L.f,n=te("meta"),r=0,a=Object.isExtensible||function(){return!0},o=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},i=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!C(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!T(e,n)){if(!a(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!T(e,n)){if(!a(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return Po&&i.REQUIRED&&a(e)&&!T(e,n)&&o(e),e}};ae[n]=!0})),Uo=Lo.onFreeze,Vo=Object.freeze,Wo=l((function(){Vo(1)}));qe({target:"Object",stat:!0,forced:Wo,sham:!Po},{freeze:function(e){return Vo&&C(e)?Vo(Uo(e)):e}}),qe({target:"Object",stat:!0},{fromEntries:function(e){var t={};return Hn(e,(function(e,n){qn(t,e,n)}),{AS_ENTRIES:!0}),t}});var zo=M.f,jo=l((function(){zo(1)})),Ho=!d||jo;qe({target:"Object",stat:!0,forced:Ho,sham:!d},{getOwnPropertyDescriptor:function(e,t){return zo(I(e),t)}}),qe({target:"Object",stat:!0,sham:!d},{getOwnPropertyDescriptors:function(e){for(var t,n,r=I(e),a=M.f,o=Pe(r),i={},s=0;o.length>s;)void 0!==(n=a(r,t=o[s++]))&&qn(i,t,n);return i}});var Go=vt.f,Ko=l((function(){return!Object.getOwnPropertyNames(1)}));qe({target:"Object",stat:!0,forced:Ko},{getOwnPropertyNames:Go});var qo=l((function(){Sn(1)}));qe({target:"Object",stat:!0,forced:qo,sham:!In},{getPrototypeOf:function(e){return Sn($e(e))}});var Xo=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};qe({target:"Object",stat:!0},{is:Xo});var Qo=Object.isExtensible,Yo=l((function(){Qo(1)}));qe({target:"Object",stat:!0,forced:Yo},{isExtensible:function(e){return!!C(e)&&(!Qo||Qo(e))}});var $o=Object.isFrozen,Zo=l((function(){$o(1)}));qe({target:"Object",stat:!0,forced:Zo},{isFrozen:function(e){return!C(e)||!!$o&&$o(e)}});var Jo=Object.isSealed,ei=l((function(){Jo(1)}));qe({target:"Object",stat:!0,forced:ei},{isSealed:function(e){return!C(e)||!!Jo&&Jo(e)}});var ti=l((function(){Ze(1)}));qe({target:"Object",stat:!0,forced:ti},{keys:function(e){return Ze($e(e))}});var ni=Lo.onFreeze,ri=Object.preventExtensions,ai=l((function(){ri(1)}));qe({target:"Object",stat:!0,forced:ai,sham:!Po},{preventExtensions:function(e){return ri&&C(e)?ri(ni(e)):e}});var oi=Lo.onFreeze,ii=Object.seal,si=l((function(){ii(1)}));qe({target:"Object",stat:!0,forced:si,sham:!Po},{seal:function(e){return ii&&C(e)?ii(oi(e)):e}}),qe({target:"Object",stat:!0},{setPrototypeOf:An});var ui=Do.values;qe({target:"Object",stat:!0},{values:function(e){return ui(e)}});var ci=Dn?{}.toString:function(){return"[object "+Un(this)+"]"};Dn||me(Object.prototype,"toString",ci,{unsafe:!0});var li=!l((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete c[e]}));d&&qe({target:"Object",proto:!0,forced:li},{__defineGetter__:function(e,t){L.f($e(this),e,{get:Nt(t),enumerable:!0,configurable:!0})}}),d&&qe({target:"Object",proto:!0,forced:li},{__defineSetter__:function(e,t){L.f($e(this),e,{set:Nt(t),enumerable:!0,configurable:!0})}});var di=M.f;d&&qe({target:"Object",proto:!0,forced:li},{__lookupGetter__:function(e){var t,n=$e(this),r=E(e,!0);do{if(t=di(n,r))return t.get}while(n=Sn(n))}});var fi=M.f;d&&qe({target:"Object",proto:!0,forced:li},{__lookupSetter__:function(e){var t,n=$e(this),r=E(e,!0);do{if(t=fi(n,r))return t.set}while(n=Sn(n))}});var pi=String.fromCharCode,hi=String.fromCodePoint,mi=!!hi&&1!=hi.length;qe({target:"String",stat:!0,forced:mi},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],Se(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?pi(t):pi(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}}),qe({target:"String",stat:!0},{raw:function(e){for(var t=I(e.raw),n=Ie(t.length),r=arguments.length,a=[],o=0;n>o;)a.push(String(t[o++])),o<r&&a.push(String(arguments[o]));return a.join("")}});var gi=function(e){return function(t,n){var r,a,o=String(w(t)),i=ke(n),s=o.length;return i<0||i>=s?e?"":void 0:(r=o.charCodeAt(i))<55296||r>56319||i+1===s||(a=o.charCodeAt(i+1))<56320||a>57343?e?o.charAt(i):r:e?o.slice(i,i+2):a-56320+(r-55296<<10)+65536}},vi={codeAt:gi(!1),charAt:gi(!0)},yi=vi.codeAt;qe({target:"String",proto:!0},{codePointAt:function(e){return yi(this,e)}});var bi,xi=kt("match"),ki=function(e){var t;return C(e)&&(void 0!==(t=e[xi])?!!t:"RegExp"==b(e))},wi=function(e){if(ki(e))throw TypeError("The method doesn't accept regular expressions");return e},Ii=kt("match"),Ci=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Ii]=!1,"/./"[e](t)}catch(e){}}return!1},Ei=M.f,Si="".endsWith,Ti=Math.min,Ai=Ci("endsWith"),Ni=!(Ai||(bi=Ei(String.prototype,"endsWith"),!bi||bi.writable));qe({target:"String",proto:!0,forced:!Ni&&!Ai},{endsWith:function(e){var t=String(w(this));wi(e);var n=arguments.length>1?arguments[1]:void 0,r=Ie(t.length),a=void 0===n?r:Ti(Ie(n),r),o=String(e);return Si?Si.call(t,o,a):t.slice(a-o.length,a)===o}}),qe({target:"String",proto:!0,forced:!Ci("includes")},{includes:function(e){return!!~String(w(this)).indexOf(wi(e),arguments.length>1?arguments[1]:void 0)}});var _i=function(){var e=D(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function Ri(e,t){return RegExp(e,t)}var Oi=l((function(){var e=Ri("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Fi=l((function(){var e=Ri("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),Mi={UNSUPPORTED_Y:Oi,BROKEN_CARET:Fi},Di=RegExp.prototype.exec,Bi=String.prototype.replace,Pi=Di,Li=function(){var e=/a/,t=/b*/g;return Di.call(e,"a"),Di.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Ui=Mi.UNSUPPORTED_Y||Mi.BROKEN_CARET,Vi=void 0!==/()??/.exec("")[1],Wi=Li||Vi||Ui;Wi&&(Pi=function(e){var t,n,r,a,o=this,i=Ui&&o.sticky,s=_i.call(o),u=o.source,c=0,l=e;return i&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),l=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(u="(?: "+u+")",l=" "+l,c++),n=new RegExp("^(?:"+u+")",s)),Vi&&(n=new RegExp("^"+u+"$(?!\\s)",s)),Li&&(t=o.lastIndex),r=Di.call(i?n:o,l),i?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:Li&&r&&(o.lastIndex=o.global?r.index+r[0].length:t),Vi&&r&&r.length>1&&Bi.call(r[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r});var zi=Pi;qe({target:"RegExp",proto:!0,forced:/./.exec!==zi},{exec:zi});var ji=kt("species"),Hi=!l((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Gi="$0"==="a".replace(/./,"$0"),Ki=kt("replace"),qi=!!/./[Ki]&&""===/./[Ki]("a","$0"),Xi=!l((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Qi=function(e,t,n,r){var a=kt(e),o=!l((function(){var t={};return t[a]=function(){return 7},7!=""[e](t)})),i=o&&!l((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[ji]=function(){return n},n.flags="",n[a]=/./[a]),n.exec=function(){return t=!0,null},n[a](""),!t}));if(!o||!i||"replace"===e&&(!Hi||!Gi||qi)||"split"===e&&!Xi){var s=/./[a],u=n(a,""[e],(function(e,t,n,r,a){return t.exec===zi?o&&!a?{done:!0,value:s.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Gi,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:qi}),c=u[0],d=u[1];me(String.prototype,e,c),me(RegExp.prototype,a,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)})}r&&U(RegExp.prototype[a],"sham",!0)},Yi=vi.charAt,$i=function(e,t,n){return t+(n?Yi(e,t).length:1)},Zi=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==b(e))throw TypeError("RegExp#exec called on incompatible receiver");return zi.call(e,t)};Qi("match",1,(function(e,t,n){return[function(t){var n=w(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=D(e),o=String(this);if(!a.global)return Zi(a,o);var i=a.unicode;a.lastIndex=0;for(var s,u=[],c=0;null!==(s=Zi(a,o));){var l=String(s[0]);u[c]=l,""===l&&(a.lastIndex=$i(o,Ie(a.lastIndex),i)),c++}return 0===c?null:u}]}));var Ji=kt("species"),es=function(e,t){var n,r=D(e).constructor;return void 0===r||null==(n=D(r)[Ji])?t:Nt(n)},ts=kt("matchAll"),ns="RegExp String",rs=ns+" Iterator",as=he.set,os=he.getterFor(rs),is=RegExp.prototype,ss=is.exec,us="".matchAll,cs=!!us&&!l((function(){"a".matchAll(/./)})),ls=function(e,t){var n,r=e.exec;if("function"==typeof r){if("object"!=typeof(n=r.call(e,t)))throw TypeError("Incorrect exec result");return n}return ss.call(e,t)},ds=oo((function(e,t,n,r){as(this,{type:rs,regexp:e,string:t,global:n,unicode:r,done:!1})}),ns,(function(){var e=os(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,r=ls(t,n);return null===r?{value:void 0,done:e.done=!0}:e.global?(""==String(r[0])&&(t.lastIndex=$i(n,Ie(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),fs=function(e){var t,n,r,a,o,i,s=D(this),u=String(e);return t=es(s,RegExp),void 0===(n=s.flags)&&s instanceof RegExp&&!("flags"in is)&&(n=_i.call(s)),r=void 0===n?"":String(n),a=new t(t===RegExp?s.source:s,r),o=!!~r.indexOf("g"),i=!!~r.indexOf("u"),a.lastIndex=Ie(s.lastIndex),new ds(a,u,o,i)};qe({target:"String",proto:!0,forced:cs},{matchAll:function(e){var t,n,r=w(this);if(null!=e){if(ki(e)&&!~String(w("flags"in is?e.flags:_i.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(cs)return us.apply(r,arguments);if(void 0===(n=e[ts])&&$&&"RegExp"==b(e)&&(n=fs),null!=n)return Nt(n).call(e,r)}else if(cs)return us.apply(r,arguments);return t=String(r),new RegExp(e,"g")[ts](t)}}),ts in is||U(is,ts,fs);var ps="".repeat||function(e){var t=String(w(this)),n="",r=ke(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},hs=Math.ceil,ms=function(e){return function(t,n,r){var a,o,i=String(w(t)),s=i.length,u=void 0===r?" ":String(r),c=Ie(n);return c<=s||""==u?i:(a=c-s,(o=ps.call(u,hs(a/u.length))).length>a&&(o=o.slice(0,a)),e?i+o:o+i)}},gs={start:ms(!1),end:ms(!0)},vs=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(ar),ys=gs.end;qe({target:"String",proto:!0,forced:vs},{padEnd:function(e){return ys(this,e,arguments.length>1?arguments[1]:void 0)}});var bs=gs.start;qe({target:"String",proto:!0,forced:vs},{padStart:function(e){return bs(this,e,arguments.length>1?arguments[1]:void 0)}}),qe({target:"String",proto:!0},{repeat:ps});var xs=Math.max,ks=Math.min,ws=Math.floor,Is=/\$([$&'`]|\d\d?|<[^>]*>)/g,Cs=/\$([$&'`]|\d\d?)/g,Es=function(e){return void 0===e?e:String(e)};Qi("replace",2,(function(e,t,n,r){var a=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,i=a?"$":"$0";return[function(n,r){var a=w(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!a&&o||"string"==typeof r&&-1===r.indexOf(i)){var u=n(t,e,this,r);if(u.done)return u.value}var c=D(e),l=String(this),d="function"==typeof r;d||(r=String(r));var f=c.global;if(f){var p=c.unicode;c.lastIndex=0}for(var h=[];;){var m=Zi(c,l);if(null===m)break;if(h.push(m),!f)break;""===String(m[0])&&(c.lastIndex=$i(l,Ie(c.lastIndex),p))}for(var g="",v=0,y=0;y<h.length;y++){m=h[y];for(var b=String(m[0]),x=xs(ks(ke(m.index),l.length),0),k=[],w=1;w<m.length;w++)k.push(Es(m[w]));var I=m.groups;if(d){var C=[b].concat(k,x,l);void 0!==I&&C.push(I);var E=String(r.apply(void 0,C))}else E=s(b,l,x,k,I,r);x>=v&&(g+=l.slice(v,x)+E,v=x+b.length)}return g+l.slice(v)}];function s(e,n,r,a,o,i){var s=r+e.length,u=a.length,c=Cs;return void 0!==o&&(o=$e(o),c=Is),t.call(i,c,(function(t,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":c=o[i.slice(1,-1)];break;default:var l=+i;if(0===l)return t;if(l>u){var d=ws(l/10);return 0===d?t:d<=u?void 0===a[d-1]?i.charAt(1):a[d-1]+i.charAt(1):t}c=a[l-1]}return void 0===c?"":c}))}})),Qi("search",1,(function(e,t,n){return[function(t){var n=w(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=D(e),o=String(this),i=a.lastIndex;Xo(i,0)||(a.lastIndex=0);var s=Zi(a,o);return Xo(a.lastIndex,i)||(a.lastIndex=i),null===s?-1:s.index}]}));var Ss=[].push,Ts=Math.min,As=4294967295,Ns=!l((function(){return!RegExp(As,"y")}));Qi("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(w(this)),a=void 0===n?As:n>>>0;if(0===a)return[];if(void 0===e)return[r];if(!ki(e))return t.call(r,e,a);for(var o,i,s,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,d=new RegExp(e.source,c+"g");(o=zi.call(d,r))&&!((i=d.lastIndex)>l&&(u.push(r.slice(l,o.index)),o.length>1&&o.index<r.length&&Ss.apply(u,o.slice(1)),s=o[0].length,l=i,u.length>=a));)d.lastIndex===o.index&&d.lastIndex++;return l===r.length?!s&&d.test("")||u.push(""):u.push(r.slice(l)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=w(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,a,n):r.call(String(a),t,n)},function(e,a){var o=n(r,e,this,a,r!==t);if(o.done)return o.value;var i=D(e),s=String(this),u=es(i,RegExp),c=i.unicode,l=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(Ns?"y":"g"),d=new u(Ns?i:"^(?:"+i.source+")",l),f=void 0===a?As:a>>>0;if(0===f)return[];if(0===s.length)return null===Zi(d,s)?[s]:[];for(var p=0,h=0,m=[];h<s.length;){d.lastIndex=Ns?h:0;var g,v=Zi(d,Ns?s:s.slice(h));if(null===v||(g=Ts(Ie(d.lastIndex+(Ns?0:h)),s.length))===p)h=$i(s,h,c);else{if(m.push(s.slice(p,h)),m.length===f)return m;for(var y=1;y<=v.length-1;y++)if(m.push(v[y]),m.length===f)return m;h=p=g}}return m.push(s.slice(p)),m}]}),!Ns);var _s=M.f,Rs="".startsWith,Os=Math.min,Fs=Ci("startsWith"),Ms=!Fs&&!!function(){var e=_s(String.prototype,"startsWith");return e&&!e.writable}();qe({target:"String",proto:!0,forced:!Ms&&!Fs},{startsWith:function(e){var t=String(w(this));wi(e);var n=Ie(Os(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return Rs?Rs.call(t,r,n):t.slice(n,n+r.length)===r}});var Ds="\t\n\v\f\r                　\u2028\u2029\ufeff",Bs="["+Ds+"]",Ps=RegExp("^"+Bs+Bs+"*"),Ls=RegExp(Bs+Bs+"*$"),Us=function(e){return function(t){var n=String(w(t));return 1&e&&(n=n.replace(Ps,"")),2&e&&(n=n.replace(Ls,"")),n}},Vs={start:Us(1),end:Us(2),trim:Us(3)},Ws="​᠎",zs=function(e){return l((function(){return!!Ds[e]()||Ws[e]()!=Ws||Ds[e].name!==e}))},js=Vs.trim;qe({target:"String",proto:!0,forced:zs("trim")},{trim:function(){return js(this)}});var Hs=Vs.start,Gs=zs("trimStart"),Ks=Gs?function(){return Hs(this)}:"".trimStart;qe({target:"String",proto:!0,forced:Gs},{trimStart:Ks,trimLeft:Ks});var qs=Vs.end,Xs=zs("trimEnd"),Qs=Xs?function(){return qs(this)}:"".trimEnd;qe({target:"String",proto:!0,forced:Xs},{trimEnd:Qs,trimRight:Qs});var Ys=vi.charAt,$s="String Iterator",Zs=he.set,Js=he.getterFor($s);ho(String,"String",(function(e){Zs(this,{type:$s,string:String(e),index:0})}),(function(){var e,t=Js(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=Ys(n,r),t.index+=e.length,{value:e,done:!1})}));var eu=/"/g,tu=function(e,t,n,r){var a=String(w(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+String(r).replace(eu,"&quot;")+'"'),o+">"+a+"</"+t+">"},nu=function(e){return l((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))};qe({target:"String",proto:!0,forced:nu("anchor")},{anchor:function(e){return tu(this,"a","name",e)}}),qe({target:"String",proto:!0,forced:nu("big")},{big:function(){return tu(this,"big","","")}}),qe({target:"String",proto:!0,forced:nu("blink")},{blink:function(){return tu(this,"blink","","")}}),qe({target:"String",proto:!0,forced:nu("bold")},{bold:function(){return tu(this,"b","","")}}),qe({target:"String",proto:!0,forced:nu("fixed")},{fixed:function(){return tu(this,"tt","","")}}),qe({target:"String",proto:!0,forced:nu("fontcolor")},{fontcolor:function(e){return tu(this,"font","color",e)}}),qe({target:"String",proto:!0,forced:nu("fontsize")},{fontsize:function(e){return tu(this,"font","size",e)}}),qe({target:"String",proto:!0,forced:nu("italics")},{italics:function(){return tu(this,"i","","")}}),qe({target:"String",proto:!0,forced:nu("link")},{link:function(e){return tu(this,"a","href",e)}}),qe({target:"String",proto:!0,forced:nu("small")},{small:function(){return tu(this,"small","","")}}),qe({target:"String",proto:!0,forced:nu("strike")},{strike:function(){return tu(this,"strike","","")}}),qe({target:"String",proto:!0,forced:nu("sub")},{sub:function(){return tu(this,"sub","","")}}),qe({target:"String",proto:!0,forced:nu("sup")},{sup:function(){return tu(this,"sup","","")}});var ru=kt("replace"),au=RegExp.prototype;qe({target:"String",proto:!0},{replaceAll:function e(t,n){var r,a,o,i,s,u,c,l=w(this);if(null!=t){if(ki(t)&&!~String(w("flags"in au?t.flags:_i.call(t))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(r=t[ru]))return r.call(t,l,n)}if(a=String(l),""===(o=String(t)))return e.call(a,/(?:)/g,n);if(i=a.split(o),"function"!=typeof n)return i.join(String(n));for(u=(s=i[0]).length,c=1;c<i.length;c++)s+=String(n(o,u,a)),u+=o.length+i[c].length,s+=i[c];return s}});var ou=function(e,t,n){var r,a;return An&&"function"==typeof(r=t.constructor)&&r!==n&&C(a=r.prototype)&&a!==n.prototype&&An(e,a),e},iu=L.f,su=Me.f,uu=he.set,cu=kt("match"),lu=c.RegExp,du=lu.prototype,fu=/a/g,pu=/a/g,hu=new lu(fu)!==fu,mu=Mi.UNSUPPORTED_Y,gu=d&&Ge("RegExp",!hu||mu||l((function(){return pu[cu]=!1,lu(fu)!=fu||lu(pu)==pu||"/a/i"!=lu(fu,"i")})));if(gu){for(var vu=function(e,t){var n,r=this instanceof vu,a=ki(e),o=void 0===t;if(!r&&a&&e.constructor===vu&&o)return e;hu?a&&!o&&(e=e.source):e instanceof vu&&(o&&(t=_i.call(e)),e=e.source),mu&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var i=ou(hu?new lu(e,t):lu(e,t),r?this:du,vu);return mu&&n&&uu(i,{sticky:n}),i},yu=function(e){e in vu||iu(vu,e,{configurable:!0,get:function(){return lu[e]},set:function(t){lu[e]=t}})},bu=su(lu),xu=0;bu.length>xu;)yu(bu[xu++]);du.constructor=vu,vu.prototype=du,me(c,"RegExp",vu)}Qa("RegExp");var ku=Mi.UNSUPPORTED_Y;d&&("g"!=/./g.flags||ku)&&L.f(RegExp.prototype,"flags",{configurable:!0,get:_i});var wu=Mi.UNSUPPORTED_Y,Iu=L.f,Cu=he.get,Eu=RegExp.prototype;d&&wu&&Iu(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==Eu){if(this instanceof RegExp)return!!Cu(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}});var Su=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),Tu=/./.test;qe({target:"RegExp",proto:!0,forced:!Su},{test:function(e){if("function"!=typeof this.exec)return Tu.call(this,e);var t=this.exec(e);if(null!==t&&!C(t))throw new Error("RegExp exec method returned something other than an Object or null");return!!t}});var Au="toString",Nu=RegExp.prototype,_u=Nu[Au],Ru=l((function(){return"/a/b"!=_u.call({source:"a",flags:"b"})})),Ou=_u.name!=Au;(Ru||Ou)&&me(RegExp.prototype,Au,(function(){var e=D(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in Nu)?_i.call(e):n)}),{unsafe:!0});var Fu=Vs.trim,Mu=c.parseInt,Du=/^[+-]?0[Xx]/,Bu=8!==Mu(Ds+"08")||22!==Mu(Ds+"0x16"),Pu=Bu?function(e,t){var n=Fu(String(e));return Mu(n,t>>>0||(Du.test(n)?16:10))}:Mu;qe({global:!0,forced:parseInt!=Pu},{parseInt:Pu});var Lu=Vs.trim,Uu=c.parseFloat,Vu=1/Uu(Ds+"-0")!=-1/0,Wu=Vu?function(e){var t=Lu(String(e)),n=Uu(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Uu;qe({global:!0,forced:parseFloat!=Wu},{parseFloat:Wu});var zu=Me.f,ju=M.f,Hu=L.f,Gu=Vs.trim,Ku="Number",qu=c[Ku],Xu=qu.prototype,Qu=b(dt(Xu))==Ku,Yu=function(e){var t,n,r,a,o,i,s,u,c=E(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=Gu(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+c}for(i=(o=c.slice(2)).length,s=0;s<i;s++)if((u=o.charCodeAt(s))<48||u>a)return NaN;return parseInt(o,r)}return+c};if(Ge(Ku,!qu(" 0o1")||!qu("0b1")||qu("+0x1"))){for(var $u,Zu=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof Zu&&(Qu?l((function(){Xu.valueOf.call(n)})):b(n)!=Ku)?ou(new qu(Yu(t)),n,Zu):Yu(t)},Ju=d?zu(qu):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),ec=0;Ju.length>ec;ec++)T(qu,$u=Ju[ec])&&!T(Zu,$u)&&Hu(Zu,$u,ju(qu,$u));Zu.prototype=Xu,Xu.constructor=Zu,me(c,Ku,Zu)}qe({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)});var tc=c.isFinite,nc=Number.isFinite||function(e){return"number"==typeof e&&tc(e)};qe({target:"Number",stat:!0},{isFinite:nc});var rc=Math.floor,ac=function(e){return!C(e)&&isFinite(e)&&rc(e)===e};qe({target:"Number",stat:!0},{isInteger:ac}),qe({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var oc=Math.abs;qe({target:"Number",stat:!0},{isSafeInteger:function(e){return ac(e)&&oc(e)<=9007199254740991}}),qe({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),qe({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991}),qe({target:"Number",stat:!0,forced:Number.parseFloat!=Wu},{parseFloat:Wu}),qe({target:"Number",stat:!0,forced:Number.parseInt!=Pu},{parseInt:Pu});var ic=function(e){if("number"!=typeof e&&"Number"!=b(e))throw TypeError("Incorrect invocation");return+e},sc=1..toFixed,uc=Math.floor,cc=function(e,t,n){return 0===t?n:t%2==1?cc(e,t-1,n*e):cc(e*e,t/2,n)},lc=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t},dc=sc&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){sc.call({})}));qe({target:"Number",proto:!0,forced:dc},{toFixed:function(e){var t,n,r,a,o=ic(this),i=ke(e),s=[0,0,0,0,0,0],u="",c="0",l=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*s[n],s[n]=r%1e7,r=uc(r/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=s[t],s[t]=uc(n/e),n=n%e*1e7},f=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==s[e]){var n=String(s[e]);t=""===t?n:t+ps.call("0",7-n.length)+n}return t};if(i<0||i>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(u="-",o=-o),o>1e-21)if(n=(t=lc(o*cc(2,69,1))-69)<0?o*cc(2,-t,1):o/cc(2,t,1),n*=4503599627370496,(t=52-t)>0){for(l(0,n),r=i;r>=7;)l(1e7,0),r-=7;for(l(cc(10,r,1),0),r=t-1;r>=23;)d(1<<23),r-=23;d(1<<r),l(1,1),d(2),c=f()}else l(0,n),l(1<<-t,0),c=f()+ps.call("0",i);return c=i>0?u+((a=c.length)<=i?"0."+ps.call("0",i-a)+c:c.slice(0,a-i)+"."+c.slice(a-i)):u+c}});var fc=1..toPrecision,pc=l((function(){return"1"!==fc.call(1,void 0)}))||!l((function(){fc.call({})}));qe({target:"Number",proto:!0,forced:pc},{toPrecision:function(e){return void 0===e?fc.call(ic(this)):fc.call(ic(this),e)}});var hc=Math.log,mc=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:hc(1+e)},gc=Math.acosh,vc=Math.log,yc=Math.sqrt,bc=Math.LN2,xc=!gc||710!=Math.floor(gc(Number.MAX_VALUE))||gc(1/0)!=1/0;qe({target:"Math",stat:!0,forced:xc},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?vc(e)+bc:mc(e-1+yc(e-1)*yc(e+1))}});var kc=Math.asinh,wc=Math.log,Ic=Math.sqrt;function Cc(e){return isFinite(e=+e)&&0!=e?e<0?-Cc(-e):wc(e+Ic(e*e+1)):e}qe({target:"Math",stat:!0,forced:!(kc&&1/kc(0)>0)},{asinh:Cc});var Ec=Math.atanh,Sc=Math.log;qe({target:"Math",stat:!0,forced:!(Ec&&1/Ec(-0)<0)},{atanh:function(e){return 0==(e=+e)?e:Sc((1+e)/(1-e))/2}});var Tc=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1},Ac=Math.abs,Nc=Math.pow;qe({target:"Math",stat:!0},{cbrt:function(e){return Tc(e=+e)*Nc(Ac(e),1/3)}});var _c=Math.floor,Rc=Math.log,Oc=Math.LOG2E;qe({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-_c(Rc(e+.5)*Oc):32}});var Fc=Math.expm1,Mc=Math.exp,Dc=!Fc||Fc(10)>22025.465794806718||Fc(10)<22025.465794806718||-2e-17!=Fc(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Mc(e)-1}:Fc,Bc=Math.cosh,Pc=Math.abs,Lc=Math.E;qe({target:"Math",stat:!0,forced:!Bc||Bc(710)===1/0},{cosh:function(e){var t=Dc(Pc(e)-1)+1;return(t+1/(t*Lc*Lc))*(Lc/2)}}),qe({target:"Math",stat:!0,forced:Dc!=Math.expm1},{expm1:Dc});var Uc=Math.abs,Vc=Math.pow,Wc=Vc(2,-52),zc=Vc(2,-23),jc=Vc(2,127)*(2-zc),Hc=Vc(2,-126),Gc=function(e){return e+1/Wc-1/Wc},Kc=Math.fround||function(e){var t,n,r=Uc(e),a=Tc(e);return r<Hc?a*Gc(r/Hc/zc)*Hc*zc:(n=(t=(1+zc/Wc)*r)-(t-r))>jc||n!=n?a*(1/0):a*n};qe({target:"Math",stat:!0},{fround:Kc});var qc=Math.hypot,Xc=Math.abs,Qc=Math.sqrt,Yc=!!qc&&qc(1/0,NaN)!==1/0;qe({target:"Math",stat:!0,forced:Yc},{hypot:function(e,t){for(var n,r,a=0,o=0,i=arguments.length,s=0;o<i;)s<(n=Xc(arguments[o++]))?(a=a*(r=s/n)*r+1,s=n):a+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*Qc(a)}});var $c=Math.imul,Zc=l((function(){return-5!=$c(4294967295,5)||2!=$c.length}));qe({target:"Math",stat:!0,forced:Zc},{imul:function(e,t){var n=65535,r=+e,a=+t,o=n&r,i=n&a;return 0|o*i+((n&r>>>16)*i+o*(n&a>>>16)<<16>>>0)}});var Jc=Math.log,el=Math.LOG10E;qe({target:"Math",stat:!0},{log10:function(e){return Jc(e)*el}}),qe({target:"Math",stat:!0},{log1p:mc});var tl=Math.log,nl=Math.LN2;qe({target:"Math",stat:!0},{log2:function(e){return tl(e)/nl}}),qe({target:"Math",stat:!0},{sign:Tc});var rl=Math.abs,al=Math.exp,ol=Math.E,il=l((function(){return-2e-17!=Math.sinh(-2e-17)}));qe({target:"Math",stat:!0,forced:il},{sinh:function(e){return rl(e=+e)<1?(Dc(e)-Dc(-e))/2:(al(e-1)-al(-e-1))*(ol/2)}});var sl=Math.exp;qe({target:"Math",stat:!0},{tanh:function(e){var t=Dc(e=+e),n=Dc(-e);return t==1/0?1:n==1/0?-1:(t-n)/(sl(e)+sl(-e))}}),At(Math,"Math",!0);var ul=Math.ceil,cl=Math.floor;qe({target:"Math",stat:!0},{trunc:function(e){return(e>0?cl:ul)(e)}}),qe({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var ll=l((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));qe({target:"Date",proto:!0,forced:ll},{toJSON:function(e){var t=$e(this),n=E(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}});var dl=gs.start,fl=Math.abs,pl=Date.prototype,hl=pl.getTime,ml=pl.toISOString,gl=l((function(){return"0385-07-25T07:06:39.999Z"!=ml.call(new Date(-50000000000001))}))||!l((function(){ml.call(new Date(NaN))}))?function(){if(!isFinite(hl.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+dl(fl(t),r?6:4,0)+"-"+dl(e.getUTCMonth()+1,2,0)+"-"+dl(e.getUTCDate(),2,0)+"T"+dl(e.getUTCHours(),2,0)+":"+dl(e.getUTCMinutes(),2,0)+":"+dl(e.getUTCSeconds(),2,0)+"."+dl(n,3,0)+"Z"}:ml;qe({target:"Date",proto:!0,forced:Date.prototype.toISOString!==gl},{toISOString:gl});var vl=Date.prototype,yl="Invalid Date",bl="toString",xl=vl[bl],kl=vl.getTime;new Date(NaN)+""!=yl&&me(vl,bl,(function(){var e=kl.call(this);return e==e?xl.call(this):yl}));var wl=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return E(D(this),"number"!==e)},Il=kt("toPrimitive"),Cl=Date.prototype;Il in Cl||U(Cl,Il,wl);var El=ye("JSON","stringify"),Sl=/[\uD800-\uDFFF]/g,Tl=/^[\uD800-\uDBFF]$/,Al=/^[\uDC00-\uDFFF]$/,Nl=function(e,t,n){var r=n.charAt(t-1),a=n.charAt(t+1);return Tl.test(e)&&!Al.test(a)||Al.test(e)&&!Tl.test(r)?"\\u"+e.charCodeAt(0).toString(16):e},_l=l((function(){return'"\\udf06\\ud834"'!==El("\udf06\ud834")||'"\\udead"'!==El("\udead")}));El&&qe({target:"JSON",stat:!0,forced:_l},{stringify:function(e,t,n){var r=El.apply(null,arguments);return"string"==typeof r?r.replace(Sl,Nl):r}}),At(c.JSON,"JSON",!0);var Rl,Ol,Fl,Ml=c.Promise,Dl=function(e,t,n){for(var r in t)me(e,r,t[r],n);return e},Bl=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Pl=/(iphone|ipod|ipad).*applewebkit/i.test(ar),Ll=c.location,Ul=c.setImmediate,Vl=c.clearImmediate,Wl=c.process,zl=c.MessageChannel,jl=c.Dispatch,Hl=0,Gl={},Kl="onreadystatechange",ql=function(e){if(Gl.hasOwnProperty(e)){var t=Gl[e];delete Gl[e],t()}},Xl=function(e){return function(){ql(e)}},Ql=function(e){ql(e.data)},Yl=function(e){c.postMessage(e+"",Ll.protocol+"//"+Ll.host)};Ul&&Vl||(Ul=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Gl[++Hl]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},Rl(Hl),Hl},Vl=function(e){delete Gl[e]},va?Rl=function(e){Wl.nextTick(Xl(e))}:jl&&jl.now?Rl=function(e){jl.now(Xl(e))}:zl&&!Pl?(Fl=(Ol=new zl).port2,Ol.port1.onmessage=Ql,Rl=_t(Fl.postMessage,Fl,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts&&Ll&&"file:"!==Ll.protocol&&!l(Yl)?(Rl=Yl,c.addEventListener("message",Ql,!1)):Rl=Kl in _("script")?function(e){et.appendChild(_("script"))[Kl]=function(){et.removeChild(this),ql(e)}}:function(e){setTimeout(Xl(e),0)});var $l,Zl,Jl,ed,td,nd,rd,ad,od={set:Ul,clear:Vl},id=M.f,sd=od.set,ud=c.MutationObserver||c.WebKitMutationObserver,cd=c.document,ld=c.process,dd=c.Promise,fd=id(c,"queueMicrotask"),pd=fd&&fd.value;pd||($l=function(){var e,t;for(va&&(e=ld.domain)&&e.exit();Zl;){t=Zl.fn,Zl=Zl.next;try{t()}catch(e){throw Zl?ed():Jl=void 0,e}}Jl=void 0,e&&e.enter()},!Pl&&!va&&ud&&cd?(td=!0,nd=cd.createTextNode(""),new ud($l).observe(nd,{characterData:!0}),ed=function(){nd.data=td=!td}):dd&&dd.resolve?(rd=dd.resolve(void 0),ad=rd.then,ed=function(){ad.call(rd,$l)}):ed=va?function(){ld.nextTick($l)}:function(){sd.call(c,$l)});var hd,md,gd,vd,yd=pd||function(e){var t={fn:e,next:void 0};Jl&&(Jl.next=t),Zl||(Zl=t,ed()),Jl=t},bd=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Nt(t),this.reject=Nt(n)},xd=function(e){return new bd(e)},kd={f:xd},wd=function(e,t){if(D(e),C(t)&&t.constructor===e)return t;var n=kd.f(e);return(0,n.resolve)(t),n.promise},Id=function(e,t){var n=c.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))},Cd=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Ed=od.set,Sd=kt("species"),Td="Promise",Ad=he.get,Nd=he.set,_d=he.getterFor(Td),Rd=Ml,Od=c.TypeError,Fd=c.document,Md=c.process,Dd=ye("fetch"),Bd=kd.f,Pd=Bd,Ld=!!(Fd&&Fd.createEvent&&c.dispatchEvent),Ud="function"==typeof PromiseRejectionEvent,Vd="unhandledrejection",Wd="rejectionhandled",zd=0,jd=1,Hd=2,Gd=1,Kd=2,qd=Ge(Td,(function(){if(!(X(Rd)!==String(Rd))){if(66===ur)return!0;if(!va&&!Ud)return!0}if(ur>=51&&/native code/.test(Rd))return!1;var e=Rd.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[Sd]=t,!(e.then((function(){}))instanceof t)})),Xd=qd||!Jn((function(e){Rd.all(e).catch((function(){}))})),Qd=function(e){var t;return!(!C(e)||"function"!=typeof(t=e.then))&&t},Yd=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;yd((function(){for(var r=e.value,a=e.state==jd,o=0;n.length>o;){var i,s,u,c=n[o++],l=a?c.ok:c.fail,d=c.resolve,f=c.reject,p=c.domain;try{l?(a||(e.rejection===Kd&&ef(e),e.rejection=Gd),!0===l?i=r:(p&&p.enter(),i=l(r),p&&(p.exit(),u=!0)),i===c.promise?f(Od("Promise-chain cycle")):(s=Qd(i))?s.call(i,d,f):d(i)):f(r)}catch(e){p&&!u&&p.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Zd(e)}))}},$d=function(e,t,n){var r,a;Ld?((r=Fd.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},!Ud&&(a=c["on"+e])?a(r):e===Vd&&Id("Unhandled promise rejection",n)},Zd=function(e){Ed.call(c,(function(){var t,n=e.facade,r=e.value;if(Jd(e)&&(t=Cd((function(){va?Md.emit("unhandledRejection",r,n):$d(Vd,n,r)})),e.rejection=va||Jd(e)?Kd:Gd,t.error))throw t.value}))},Jd=function(e){return e.rejection!==Gd&&!e.parent},ef=function(e){Ed.call(c,(function(){var t=e.facade;va?Md.emit("rejectionHandled",t):$d(Wd,t,e.value)}))},tf=function(e,t,n){return function(r){e(t,r,n)}},nf=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=Hd,Yd(e,!0))},rf=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Od("Promise can't be resolved itself");var r=Qd(t);r?yd((function(){var n={done:!1};try{r.call(t,tf(rf,n,e),tf(nf,n,e))}catch(t){nf(n,t,e)}})):(e.value=t,e.state=jd,Yd(e,!1))}catch(t){nf({done:!1},t,e)}}};qd&&(Rd=function(e){Bl(this,Rd,Td),Nt(e),hd.call(this);var t=Ad(this);try{e(tf(rf,t),tf(nf,t))}catch(e){nf(t,e)}},(hd=function(e){Nd(this,{type:Td,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:zd,value:void 0})}).prototype=Dl(Rd.prototype,{then:function(e,t){var n=_d(this),r=Bd(es(this,Rd));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=va?Md.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=zd&&Yd(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),md=function(){var e=new hd,t=Ad(e);this.promise=e,this.resolve=tf(rf,t),this.reject=tf(nf,t)},kd.f=Bd=function(e){return e===Rd||e===gd?new md(e):Pd(e)},"function"==typeof Ml&&(vd=Ml.prototype.then,me(Ml.prototype,"then",(function(e,t){var n=this;return new Rd((function(e,t){vd.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof Dd&&qe({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return wd(Rd,Dd.apply(c,arguments))}}))),qe({global:!0,wrap:!0,forced:qd},{Promise:Rd}),At(Rd,Td,!1),Qa(Td),gd=ye(Td),qe({target:Td,stat:!0,forced:qd},{reject:function(e){var t=Bd(this);return t.reject.call(void 0,e),t.promise}}),qe({target:Td,stat:!0,forced:qd},{resolve:function(e){return wd(this,e)}}),qe({target:Td,stat:!0,forced:Xd},{all:function(e){var t=this,n=Bd(t),r=n.resolve,a=n.reject,o=Cd((function(){var n=Nt(t.resolve),o=[],i=0,s=1;Hn(e,(function(e){var u=i++,c=!1;o.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,o[u]=e,--s||r(o))}),a)})),--s||r(o)}));return o.error&&a(o.value),n.promise},race:function(e){var t=this,n=Bd(t),r=n.reject,a=Cd((function(){var a=Nt(t.resolve);Hn(e,(function(e){a.call(t,e).then(n.resolve,r)}))}));return a.error&&r(a.value),n.promise}}),qe({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=kd.f(t),r=n.resolve,a=n.reject,o=Cd((function(){var n=Nt(t.resolve),a=[],o=0,i=1;Hn(e,(function(e){var s=o++,u=!1;a.push(void 0),i++,n.call(t,e).then((function(e){u||(u=!0,a[s]={status:"fulfilled",value:e},--i||r(a))}),(function(e){u||(u=!0,a[s]={status:"rejected",reason:e},--i||r(a))}))})),--i||r(a)}));return o.error&&a(o.value),n.promise}});var af="No one promise resolved";qe({target:"Promise",stat:!0},{any:function(e){var t=this,n=kd.f(t),r=n.resolve,a=n.reject,o=Cd((function(){var n=Nt(t.resolve),o=[],i=0,s=1,u=!1;Hn(e,(function(e){var c=i++,l=!1;o.push(void 0),s++,n.call(t,e).then((function(e){l||u||(u=!0,r(e))}),(function(e){l||u||(l=!0,o[c]=e,--s||a(new(ye("AggregateError"))(o,af)))}))})),--s||a(new(ye("AggregateError"))(o,af))}));return o.error&&a(o.value),n.promise}});var of=!!Ml&&l((function(){Ml.prototype.finally.call({then:function(){}},(function(){}))}));qe({target:"Promise",proto:!0,real:!0,forced:of},{finally:function(e){var t=es(this,ye("Promise")),n="function"==typeof e;return this.then(n?function(n){return wd(t,e()).then((function(){return n}))}:e,n?function(n){return wd(t,e()).then((function(){throw n}))}:e)}}),"function"!=typeof Ml||Ml.prototype.finally||me(Ml.prototype,"finally",ye("Promise").prototype.finally);var sf=function(e,t,n){var r=-1!==e.indexOf("Map"),a=-1!==e.indexOf("Weak"),o=r?"set":"add",i=c[e],s=i&&i.prototype,u=i,d={},f=function(e){var t=s[e];me(s,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(a&&!C(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return a&&!C(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(a&&!C(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Ge(e,"function"!=typeof i||!(a||s.forEach&&!l((function(){(new i).entries().next()})))))u=n.getConstructor(t,e,r,o),Lo.REQUIRED=!0;else if(Ge(e,!0)){var p=new u,h=p[o](a?{}:-0,1)!=p,m=l((function(){p.has(1)})),g=Jn((function(e){new i(e)})),v=!a&&l((function(){for(var e=new i,t=5;t--;)e[o](t,t);return!e.has(-0)}));g||((u=t((function(t,n){Bl(t,u,e);var a=ou(new i,t,u);return null!=n&&Hn(n,a[o],{that:a,AS_ENTRIES:r}),a}))).prototype=s,s.constructor=u),(m||v)&&(f("delete"),f("has"),r&&f("get")),(v||h)&&f(o),a&&s.clear&&delete s.clear}return d[e]=u,qe({global:!0,forced:u!=i},d),At(u,e),a||n.setStrong(u,e,r),u},uf=L.f,cf=Lo.fastKey,lf=he.set,df=he.getterFor,ff={getConstructor:function(e,t,n,r){var a=e((function(e,o){Bl(e,a,t),lf(e,{type:t,index:dt(null),first:void 0,last:void 0,size:0}),d||(e.size=0),null!=o&&Hn(o,e[r],{that:e,AS_ENTRIES:n})})),o=df(t),i=function(e,t,n){var r,a,i=o(e),u=s(e,t);return u?u.value=n:(i.last=u={index:a=cf(t,!0),key:t,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=u),r&&(r.next=u),d?i.size++:e.size++,"F"!==a&&(i.index[a]=u)),e},s=function(e,t){var n,r=o(e),a=cf(t);if("F"!==a)return r.index[a];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Dl(a.prototype,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,d?e.size=0:this.size=0},delete:function(e){var t=this,n=o(t),r=s(t,e);if(r){var a=r.next,i=r.previous;delete n.index[r.index],r.removed=!0,i&&(i.next=a),a&&(a.previous=i),n.first==r&&(n.first=a),n.last==r&&(n.last=i),d?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=o(this),r=_t(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),Dl(a.prototype,n?{get:function(e){var t=s(this,e);return t&&t.value},set:function(e,t){return i(this,0===e?0:e,t)}}:{add:function(e){return i(this,e=0===e?0:e,e)}}),d&&uf(a.prototype,"size",{get:function(){return o(this).size}}),a},setStrong:function(e,t,n){var r=t+" Iterator",a=df(t),o=df(r);ho(e,t,(function(e,t){lf(this,{type:r,target:e,state:a(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Qa(t)}},pf=(sf("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),ff),sf("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),ff),Lo.getWeakData),hf=he.set,mf=he.getterFor,gf=Dt.find,vf=Dt.findIndex,yf=0,bf=function(e){return e.frozen||(e.frozen=new xf)},xf=function(){this.entries=[]},kf=function(e,t){return gf(e.entries,(function(e){return e[0]===t}))};xf.prototype={get:function(e){var t=kf(this,e);if(t)return t[1]},has:function(e){return!!kf(this,e)},set:function(e,t){var n=kf(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=vf(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}};var wf={getConstructor:function(e,t,n,r){var a=e((function(e,o){Bl(e,a,t),hf(e,{type:t,id:yf++,frozen:void 0}),null!=o&&Hn(o,e[r],{that:e,AS_ENTRIES:n})})),o=mf(t),i=function(e,t,n){var r=o(e),a=pf(D(t),!0);return!0===a?bf(r).set(t,n):a[r.id]=n,e};return Dl(a.prototype,{delete:function(e){var t=o(this);if(!C(e))return!1;var n=pf(e);return!0===n?bf(t).delete(e):n&&T(n,t.id)&&delete n[t.id]},has:function(e){var t=o(this);if(!C(e))return!1;var n=pf(e);return!0===n?bf(t).has(e):n&&T(n,t.id)}}),Dl(a.prototype,n?{get:function(e){var t=o(this);if(C(e)){var n=pf(e);return!0===n?bf(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return i(this,e,t)}}:{add:function(e){return i(this,e,!0)}}),a}};i((function(e){var t,n=he.enforce,r=!c.ActiveXObject&&"ActiveXObject"in c,a=Object.isExtensible,o=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},i=e.exports=sf("WeakMap",o,wf);if(Y&&r){t=wf.getConstructor(o,"WeakMap",!0),Lo.REQUIRED=!0;var s=i.prototype,u=s.delete,l=s.has,d=s.get,f=s.set;Dl(s,{delete:function(e){if(C(e)&&!a(e)){var r=n(this);return r.frozen||(r.frozen=new t),u.call(this,e)||r.frozen.delete(e)}return u.call(this,e)},has:function(e){if(C(e)&&!a(e)){var r=n(this);return r.frozen||(r.frozen=new t),l.call(this,e)||r.frozen.has(e)}return l.call(this,e)},get:function(e){if(C(e)&&!a(e)){var r=n(this);return r.frozen||(r.frozen=new t),l.call(this,e)?d.call(this,e):r.frozen.get(e)}return d.call(this,e)},set:function(e,r){if(C(e)&&!a(e)){var o=n(this);o.frozen||(o.frozen=new t),l.call(this,e)?f.call(this,e,r):o.frozen.set(e,r)}else f.call(this,e,r);return this}})}}));sf("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),wf);var If="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Cf=function(e){if(void 0===e)return 0;var t=ke(e),n=Ie(t);if(t!==n)throw RangeError("Wrong length or index");return n},Ef=1/0,Sf=Math.abs,Tf=Math.pow,Af=Math.floor,Nf=Math.log,_f=Math.LN2,Rf=function(e,t,n){var r,a,o,i=new Array(n),s=8*n-t-1,u=(1<<s)-1,c=u>>1,l=23===t?Tf(2,-24)-Tf(2,-77):0,d=e<0||0===e&&1/e<0?1:0,f=0;for((e=Sf(e))!=e||e===Ef?(a=e!=e?1:0,r=u):(r=Af(Nf(e)/_f),e*(o=Tf(2,-r))<1&&(r--,o*=2),(e+=r+c>=1?l/o:l*Tf(2,1-c))*o>=2&&(r++,o/=2),r+c>=u?(a=0,r=u):r+c>=1?(a=(e*o-1)*Tf(2,t),r+=c):(a=e*Tf(2,c-1)*Tf(2,t),r=0));t>=8;i[f++]=255&a,a/=256,t-=8);for(r=r<<t|a,s+=t;s>0;i[f++]=255&r,r/=256,s-=8);return i[--f]|=128*d,i},Of=function(e,t){var n,r=e.length,a=8*r-t-1,o=(1<<a)-1,i=o>>1,s=a-7,u=r-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;n=256*n+e[u],u--,s-=8);if(0===l)l=1-i;else{if(l===o)return n?NaN:c?-Ef:Ef;n+=Tf(2,t),l-=i}return(c?-1:1)*n*Tf(2,l-t)},Ff={pack:Rf,unpack:Of},Mf=Me.f,Df=L.f,Bf=he.get,Pf=he.set,Lf="ArrayBuffer",Uf="DataView",Vf="prototype",Wf="Wrong length",zf="Wrong index",jf=c[Lf],Hf=jf,Gf=c[Uf],Kf=Gf&&Gf[Vf],qf=Object.prototype,Xf=c.RangeError,Qf=Ff.pack,Yf=Ff.unpack,$f=function(e){return[255&e]},Zf=function(e){return[255&e,e>>8&255]},Jf=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},ep=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},tp=function(e){return Qf(e,23,4)},np=function(e){return Qf(e,52,8)},rp=function(e,t){Df(e[Vf],t,{get:function(){return Bf(this)[t]}})},ap=function(e,t,n,r){var a=Cf(n),o=Bf(e);if(a+t>o.byteLength)throw Xf(zf);var i=Bf(o.buffer).bytes,s=a+o.byteOffset,u=i.slice(s,s+t);return r?u:u.reverse()},op=function(e,t,n,r,a,o){var i=Cf(n),s=Bf(e);if(i+t>s.byteLength)throw Xf(zf);for(var u=Bf(s.buffer).bytes,c=i+s.byteOffset,l=r(+a),d=0;d<t;d++)u[c+d]=l[o?d:t-d-1]};if(If){if(!l((function(){jf(1)}))||!l((function(){new jf(-1)}))||l((function(){return new jf,new jf(1.5),new jf(NaN),jf.name!=Lf}))){for(var ip,sp=(Hf=function(e){return Bl(this,Hf),new jf(Cf(e))})[Vf]=jf[Vf],up=Mf(jf),cp=0;up.length>cp;)(ip=up[cp++])in Hf||U(Hf,ip,jf[ip]);sp.constructor=Hf}An&&Sn(Kf)!==qf&&An(Kf,qf);var lp=new Gf(new Hf(2)),dp=Kf.setInt8;lp.setInt8(0,2147483648),lp.setInt8(1,2147483649),!lp.getInt8(0)&&lp.getInt8(1)||Dl(Kf,{setInt8:function(e,t){dp.call(this,e,t<<24>>24)},setUint8:function(e,t){dp.call(this,e,t<<24>>24)}},{unsafe:!0})}else Hf=function(e){Bl(this,Hf,Lf);var t=Cf(e);Pf(this,{bytes:Rr.call(new Array(t),0),byteLength:t}),d||(this.byteLength=t)},Gf=function(e,t,n){Bl(this,Gf,Uf),Bl(e,Hf,Uf);var r=Bf(e).byteLength,a=ke(t);if(a<0||a>r)throw Xf("Wrong offset");if(a+(n=void 0===n?r-a:Ie(n))>r)throw Xf(Wf);Pf(this,{buffer:e,byteLength:n,byteOffset:a}),d||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},d&&(rp(Hf,"byteLength"),rp(Gf,"buffer"),rp(Gf,"byteLength"),rp(Gf,"byteOffset")),Dl(Gf[Vf],{getInt8:function(e){return ap(this,1,e)[0]<<24>>24},getUint8:function(e){return ap(this,1,e)[0]},getInt16:function(e){var t=ap(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=ap(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return ep(ap(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return ep(ap(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return Yf(ap(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return Yf(ap(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){op(this,1,e,$f,t)},setUint8:function(e,t){op(this,1,e,$f,t)},setInt16:function(e,t){op(this,2,e,Zf,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){op(this,2,e,Zf,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){op(this,4,e,Jf,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){op(this,4,e,Jf,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){op(this,4,e,tp,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){op(this,8,e,np,t,arguments.length>2?arguments[2]:void 0)}});At(Hf,Lf),At(Gf,Uf);var fp={ArrayBuffer:Hf,DataView:Gf},pp="ArrayBuffer",hp=fp[pp],mp=c[pp];qe({global:!0,forced:mp!==hp},{ArrayBuffer:hp}),Qa(pp);var gp,vp=L.f,yp=c.Int8Array,bp=yp&&yp.prototype,xp=c.Uint8ClampedArray,kp=xp&&xp.prototype,wp=yp&&Sn(yp),Ip=bp&&Sn(bp),Cp=Object.prototype,Ep=Cp.isPrototypeOf,Sp=kt("toStringTag"),Tp=te("TYPED_ARRAY_TAG"),Ap=If&&!!An&&"Opera"!==Un(c.opera),Np=!1,_p={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Rp={BigInt64Array:8,BigUint64Array:8},Op=function(e){if(!C(e))return!1;var t=Un(e);return"DataView"===t||T(_p,t)||T(Rp,t)},Fp=function(e){if(!C(e))return!1;var t=Un(e);return T(_p,t)||T(Rp,t)},Mp=function(e){if(Fp(e))return e;throw TypeError("Target is not a typed array")},Dp=function(e){if(An){if(Ep.call(wp,e))return e}else for(var t in _p)if(T(_p,gp)){var n=c[t];if(n&&(e===n||Ep.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},Bp=function(e,t,n){if(d){if(n)for(var r in _p){var a=c[r];a&&T(a.prototype,e)&&delete a.prototype[e]}Ip[e]&&!n||me(Ip,e,n?t:Ap&&bp[e]||t)}},Pp=function(e,t,n){var r,a;if(d){if(An){if(n)for(r in _p)(a=c[r])&&T(a,e)&&delete a[e];if(wp[e]&&!n)return;try{return me(wp,e,n?t:Ap&&yp[e]||t)}catch(e){}}for(r in _p)!(a=c[r])||a[e]&&!n||me(a,e,t)}};for(gp in _p)c[gp]||(Ap=!1);if((!Ap||"function"!=typeof wp||wp===Function.prototype)&&(wp=function(){throw TypeError("Incorrect invocation")},Ap))for(gp in _p)c[gp]&&An(c[gp],wp);if((!Ap||!Ip||Ip===Cp)&&(Ip=wp.prototype,Ap))for(gp in _p)c[gp]&&An(c[gp].prototype,Ip);if(Ap&&Sn(kp)!==Ip&&An(kp,Ip),d&&!T(Ip,Sp))for(gp in Np=!0,vp(Ip,Sp,{get:function(){return C(this)?this[Tp]:void 0}}),_p)c[gp]&&U(c[gp],Tp,gp);var Lp={NATIVE_ARRAY_BUFFER_VIEWS:Ap,TYPED_ARRAY_TAG:Np&&Tp,aTypedArray:Mp,aTypedArrayConstructor:Dp,exportTypedArrayMethod:Bp,exportTypedArrayStaticMethod:Pp,isView:Op,isTypedArray:Fp,TypedArray:wp,TypedArrayPrototype:Ip},Up=Lp.NATIVE_ARRAY_BUFFER_VIEWS;qe({target:"ArrayBuffer",stat:!0,forced:!Up},{isView:Lp.isView});var Vp=fp.ArrayBuffer,Wp=fp.DataView,zp=Vp.prototype.slice,jp=l((function(){return!new Vp(2).slice(1,void 0).byteLength}));qe({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:jp},{slice:function(e,t){if(void 0!==zp&&void 0===t)return zp.call(D(this),e);for(var n=D(this).byteLength,r=Se(e,n),a=Se(void 0===t?n:t,n),o=new(es(this,Vp))(Ie(a-r)),i=new Wp(this),s=new Wp(o),u=0;r<a;)s.setUint8(u++,i.getUint8(r++));return o}}),qe({global:!0,forced:!If},{DataView:fp.DataView});var Hp=Lp.NATIVE_ARRAY_BUFFER_VIEWS,Gp=c.ArrayBuffer,Kp=c.Int8Array,qp=!Hp||!l((function(){Kp(1)}))||!l((function(){new Kp(-1)}))||!Jn((function(e){new Kp,new Kp(null),new Kp(1.5),new Kp(e)}),!0)||l((function(){return 1!==new Kp(new Gp(2),1,void 0).length})),Xp=function(e){var t=ke(e);if(t<0)throw RangeError("The argument can't be less than 0");return t},Qp=function(e,t){var n=Xp(e);if(n%t)throw RangeError("Wrong offset");return n},Yp=Lp.aTypedArrayConstructor,$p=function(e){var t,n,r,a,o,i,s=$e(e),u=arguments.length,c=u>1?arguments[1]:void 0,l=void 0!==c,d=Wn(s);if(null!=d&&!On(d))for(i=(o=d.call(s)).next,s=[];!(a=i.call(o)).done;)s.push(a.value);for(l&&u>2&&(c=_t(c,arguments[2],2)),n=Ie(s.length),r=new(Yp(this))(n),t=0;n>t;t++)r[t]=l?c(s[t],t):s[t];return r},Zp=i((function(e){var t=Me.f,n=Dt.forEach,r=he.get,a=he.set,o=L.f,i=M.f,s=Math.round,u=c.RangeError,l=fp.ArrayBuffer,f=fp.DataView,p=Lp.NATIVE_ARRAY_BUFFER_VIEWS,h=Lp.TYPED_ARRAY_TAG,m=Lp.TypedArray,g=Lp.TypedArrayPrototype,y=Lp.aTypedArrayConstructor,b=Lp.isTypedArray,x="BYTES_PER_ELEMENT",k="Wrong length",w=function(e,t){for(var n=0,r=t.length,a=new(y(e))(r);r>n;)a[n]=t[n++];return a},I=function(e,t){o(e,t,{get:function(){return r(this)[t]}})},S=function(e){var t;return e instanceof l||"ArrayBuffer"==(t=Un(e))||"SharedArrayBuffer"==t},A=function(e,t){return b(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},N=function(e,t){return A(e,t=E(t,!0))?v(2,e[t]):i(e,t)},_=function(e,t,n){return!(A(e,t=E(t,!0))&&C(n)&&T(n,"value"))||T(n,"get")||T(n,"set")||n.configurable||T(n,"writable")&&!n.writable||T(n,"enumerable")&&!n.enumerable?o(e,t,n):(e[t]=n.value,e)};d?(p||(M.f=N,L.f=_,I(g,"buffer"),I(g,"byteOffset"),I(g,"byteLength"),I(g,"length")),qe({target:"Object",stat:!0,forced:!p},{getOwnPropertyDescriptor:N,defineProperty:_}),e.exports=function(e,i,d){var v=e.match(/\d+$/)[0]/8,y=e+(d?"Clamped":"")+"Array",I="get"+e,E="set"+e,T=c[y],A=T,N=A&&A.prototype,_={},R=function(e,t){o(e,t,{get:function(){return function(e,t){var n=r(e);return n.view[I](t*v+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var a=r(e);d&&(n=(n=s(n))<0?0:n>255?255:255&n),a.view[E](t*v+a.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};p?qp&&(A=i((function(e,t,n,r){return Bl(e,A,y),ou(C(t)?S(t)?void 0!==r?new T(t,Qp(n,v),r):void 0!==n?new T(t,Qp(n,v)):new T(t):b(t)?w(A,t):$p.call(A,t):new T(Cf(t)),e,A)})),An&&An(A,m),n(t(T),(function(e){e in A||U(A,e,T[e])})),A.prototype=N):(A=i((function(e,t,n,r){Bl(e,A,y);var o,i,s,c=0,d=0;if(C(t)){if(!S(t))return b(t)?w(A,t):$p.call(A,t);o=t,d=Qp(n,v);var p=t.byteLength;if(void 0===r){if(p%v)throw u(k);if((i=p-d)<0)throw u(k)}else if((i=Ie(r)*v)+d>p)throw u(k);s=i/v}else s=Cf(t),o=new l(i=s*v);for(a(e,{buffer:o,byteOffset:d,byteLength:i,length:s,view:new f(o)});c<s;)R(e,c++)})),An&&An(A,m),N=A.prototype=dt(g)),N.constructor!==A&&U(N,"constructor",A),h&&U(N,h,y),_[y]=A,qe({global:!0,forced:A!=T,sham:!p},_),x in A||U(A,x,v),x in N||U(N,x,v),Qa(y)}):e.exports=function(){}}));Zp("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zp("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zp("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0),Zp("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zp("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zp("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zp("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zp("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zp("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var Jp=Lp.exportTypedArrayStaticMethod;Jp("from",$p,qp);var eh=Lp.aTypedArrayConstructor,th=Lp.exportTypedArrayStaticMethod;th("of",(function(){for(var e=0,t=arguments.length,n=new(eh(this))(t);t>e;)n[e]=arguments[e++];return n}),qp);var nh=Lp.aTypedArray,rh=Lp.exportTypedArrayMethod;rh("copyWithin",(function(e,t){return br.call(nh(this),e,t,arguments.length>2?arguments[2]:void 0)}));var ah=Dt.every,oh=Lp.aTypedArray,ih=Lp.exportTypedArrayMethod;ih("every",(function(e){return ah(oh(this),e,arguments.length>1?arguments[1]:void 0)}));var sh=Lp.aTypedArray,uh=Lp.exportTypedArrayMethod;uh("fill",(function(e){return Rr.apply(sh(this),arguments)}));var ch=Dt.filter,lh=Lp.aTypedArray,dh=Lp.aTypedArrayConstructor,fh=Lp.exportTypedArrayMethod;fh("filter",(function(e){for(var t=ch(lh(this),e,arguments.length>1?arguments[1]:void 0),n=es(this,this.constructor),r=0,a=t.length,o=new(dh(n))(a);a>r;)o[r]=t[r++];return o}));var ph=Dt.find,hh=Lp.aTypedArray,mh=Lp.exportTypedArrayMethod;mh("find",(function(e){return ph(hh(this),e,arguments.length>1?arguments[1]:void 0)}));var gh=Dt.findIndex,vh=Lp.aTypedArray,yh=Lp.exportTypedArrayMethod;yh("findIndex",(function(e){return gh(vh(this),e,arguments.length>1?arguments[1]:void 0)}));var bh=Dt.forEach,xh=Lp.aTypedArray,kh=Lp.exportTypedArrayMethod;kh("forEach",(function(e){bh(xh(this),e,arguments.length>1?arguments[1]:void 0)}));var wh=Ae.includes,Ih=Lp.aTypedArray,Ch=Lp.exportTypedArrayMethod;Ch("includes",(function(e){return wh(Ih(this),e,arguments.length>1?arguments[1]:void 0)}));var Eh=Ae.indexOf,Sh=Lp.aTypedArray,Th=Lp.exportTypedArrayMethod;Th("indexOf",(function(e){return Eh(Sh(this),e,arguments.length>1?arguments[1]:void 0)}));var Ah=kt("iterator"),Nh=c.Uint8Array,_h=yo.values,Rh=yo.keys,Oh=yo.entries,Fh=Lp.aTypedArray,Mh=Lp.exportTypedArrayMethod,Dh=Nh&&Nh.prototype[Ah],Bh=!!Dh&&("values"==Dh.name||null==Dh.name),Ph=function(){return _h.call(Fh(this))};Mh("entries",(function(){return Oh.call(Fh(this))})),Mh("keys",(function(){return Rh.call(Fh(this))})),Mh("values",Ph,!Bh),Mh(Ah,Ph,!Bh);var Lh=Lp.aTypedArray,Uh=Lp.exportTypedArrayMethod,Vh=[].join;Uh("join",(function(e){return Vh.apply(Lh(this),arguments)}));var Wh=Lp.aTypedArray,zh=Lp.exportTypedArrayMethod;zh("lastIndexOf",(function(e){return da.apply(Wh(this),arguments)}));var jh=Dt.map,Hh=Lp.aTypedArray,Gh=Lp.aTypedArrayConstructor,Kh=Lp.exportTypedArrayMethod;Kh("map",(function(e){return jh(Hh(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(Gh(es(e,e.constructor)))(t)}))}));var qh=ga.left,Xh=Lp.aTypedArray,Qh=Lp.exportTypedArrayMethod;Qh("reduce",(function(e){return qh(Xh(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Yh=ga.right,$h=Lp.aTypedArray,Zh=Lp.exportTypedArrayMethod;Zh("reduceRight",(function(e){return Yh($h(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Jh=Lp.aTypedArray,em=Lp.exportTypedArrayMethod,tm=Math.floor;em("reverse",(function(){for(var e,t=this,n=Jh(t).length,r=tm(n/2),a=0;a<r;)e=t[a],t[a++]=t[--n],t[n]=e;return t}));var nm=Lp.aTypedArray,rm=Lp.exportTypedArrayMethod,am=l((function(){new Int8Array(1).set({})}));rm("set",(function(e){nm(this);var t=Qp(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=$e(e),a=Ie(r.length),o=0;if(a+t>n)throw RangeError("Wrong length");for(;o<a;)this[t+o]=r[o++]}),am);var om=Lp.aTypedArray,im=Lp.aTypedArrayConstructor,sm=Lp.exportTypedArrayMethod,um=[].slice,cm=l((function(){new Int8Array(1).slice()}));sm("slice",(function(e,t){for(var n=um.call(om(this),e,t),r=es(this,this.constructor),a=0,o=n.length,i=new(im(r))(o);o>a;)i[a]=n[a++];return i}),cm);var lm=Dt.some,dm=Lp.aTypedArray,fm=Lp.exportTypedArrayMethod;fm("some",(function(e){return lm(dm(this),e,arguments.length>1?arguments[1]:void 0)}));var pm=Lp.aTypedArray,hm=Lp.exportTypedArrayMethod,mm=[].sort;hm("sort",(function(e){return mm.call(pm(this),e)}));var gm=Lp.aTypedArray,vm=Lp.exportTypedArrayMethod;vm("subarray",(function(e,t){var n=gm(this),r=n.length,a=Se(e,r);return new(es(n,n.constructor))(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,Ie((void 0===t?r:Se(t,r))-a))}));var ym=c.Int8Array,bm=Lp.aTypedArray,xm=Lp.exportTypedArrayMethod,km=[].toLocaleString,wm=[].slice,Im=!!ym&&l((function(){km.call(new ym(1))})),Cm=l((function(){return[1,2].toLocaleString()!=new ym([1,2]).toLocaleString()}))||!l((function(){ym.prototype.toLocaleString.call([1,2])}));xm("toLocaleString",(function(){return km.apply(Im?wm.call(bm(this)):bm(this),arguments)}),Cm);var Em=Lp.exportTypedArrayMethod,Sm=c.Uint8Array,Tm=Sm&&Sm.prototype||{},Am=[].toString,Nm=[].join;l((function(){Am.call({})}))&&(Am=function(){return Nm.call(this)});var _m=Tm.toString!=Am;Em("toString",Am,_m);var Rm=ye("Reflect","apply"),Om=Function.apply,Fm=!l((function(){Rm((function(){}))}));qe({target:"Reflect",stat:!0,forced:Fm},{apply:function(e,t,n){return Nt(e),D(n),Rm?Rm(e,t,n):Om.call(e,t,n)}});var Mm=ye("Reflect","construct"),Dm=l((function(){function e(){}return!(Mm((function(){}),[],e)instanceof e)})),Bm=!l((function(){Mm((function(){}))})),Pm=Dm||Bm;qe({target:"Reflect",stat:!0,forced:Pm,sham:Pm},{construct:function(e,t){Nt(e),D(t);var n=arguments.length<3?e:Nt(arguments[2]);if(Bm&&!Dm)return Mm(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(wo.apply(e,r))}var a=n.prototype,o=dt(C(a)?a:Object.prototype),i=Function.apply.call(e,o,t);return C(i)?i:o}});var Lm=l((function(){Reflect.defineProperty(L.f({},1,{value:1}),1,{value:2})}));qe({target:"Reflect",stat:!0,forced:Lm,sham:!d},{defineProperty:function(e,t,n){D(e);var r=E(t,!0);D(n);try{return L.f(e,r,n),!0}catch(e){return!1}}});var Um=M.f;function Vm(e,t){var n,r,a=arguments.length<3?e:arguments[2];return D(e)===a?e[t]:(n=M.f(e,t))?T(n,"value")?n.value:void 0===n.get?void 0:n.get.call(a):C(r=Sn(e))?Vm(r,t,a):void 0}qe({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=Um(D(e),t);return!(n&&!n.configurable)&&delete e[t]}}),qe({target:"Reflect",stat:!0},{get:Vm}),qe({target:"Reflect",stat:!0,sham:!d},{getOwnPropertyDescriptor:function(e,t){return M.f(D(e),t)}}),qe({target:"Reflect",stat:!0,sham:!In},{getPrototypeOf:function(e){return Sn(D(e))}}),qe({target:"Reflect",stat:!0},{has:function(e,t){return t in e}});var Wm=Object.isExtensible;function zm(e,t,n){var r,a,o=arguments.length<4?e:arguments[3],i=M.f(D(e),t);if(!i){if(C(a=Sn(e)))return zm(a,t,n,o);i=v(0)}if(T(i,"value")){if(!1===i.writable||!C(o))return!1;if(r=M.f(o,t)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,L.f(o,t,r)}else L.f(o,t,v(0,n));return!0}return void 0!==i.set&&(i.set.call(o,n),!0)}qe({target:"Reflect",stat:!0},{isExtensible:function(e){return D(e),!Wm||Wm(e)}}),qe({target:"Reflect",stat:!0},{ownKeys:Pe}),qe({target:"Reflect",stat:!0,sham:!Po},{preventExtensions:function(e){D(e);try{var t=ye("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}});var jm=l((function(){var e=function(){},t=L.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}));qe({target:"Reflect",stat:!0,forced:jm},{set:zm}),An&&qe({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){D(e),Tn(t);try{return An(e,t),!0}catch(e){return!1}}}),qe({global:!0},{Reflect:{}}),At(c.Reflect,"Reflect",!0);var Hm={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Gm in Hm){var Km=c[Gm],qm=Km&&Km.prototype;if(qm&&qm.forEach!==Xr)try{U(qm,"forEach",Xr)}catch(e){qm.forEach=Xr}}var Xm=kt("iterator"),Qm=kt("toStringTag"),Ym=yo.values;for(var $m in Hm){var Zm=c[$m],Jm=Zm&&Zm.prototype;if(Jm){if(Jm[Xm]!==Ym)try{U(Jm,Xm,Ym)}catch(e){Jm[Xm]=Ym}if(Jm[Qm]||U(Jm,Qm,$m),Hm[$m])for(var eg in yo)if(Jm[eg]!==yo[eg])try{U(Jm,eg,yo[eg])}catch(e){Jm[eg]=yo[eg]}}}var tg=!c.setImmediate||!c.clearImmediate;qe({global:!0,bind:!0,enumerable:!0,forced:tg},{setImmediate:od.set,clearImmediate:od.clear});var ng=c.process;qe({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=va&&ng.domain;yd(t?t.bind(e):e)}});var rg=[].slice,ag=/MSIE .\./.test(ar),og=function(e){return function(t,n){var r=arguments.length>2,a=r?rg.call(arguments,2):void 0;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,a)}:t,n)}};qe({global:!0,bind:!0,forced:ag},{setTimeout:og(c.setTimeout),setInterval:og(c.setInterval)});var ig=kt("iterator"),sg=!l((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),$&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[ig]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),ug=2147483647,cg=36,lg=1,dg=26,fg=38,pg=700,hg=72,mg=128,gg="-",vg=/[^\0-\u007E]/,yg=/[.\u3002\uFF0E\uFF61]/g,bg="Overflow: input needs wider integers to process",xg=cg-lg,kg=Math.floor,wg=String.fromCharCode,Ig=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&a)<<10)+(1023&o)+65536):(t.push(a),n--)}else t.push(a)}return t},Cg=function(e){return e+22+75*(e<26)},Eg=function(e,t,n){var r=0;for(e=n?kg(e/pg):e>>1,e+=kg(e/t);e>xg*dg>>1;r+=cg)e=kg(e/xg);return kg(r+(xg+1)*e/(e+fg))},Sg=function(e){var t,n,r=[],a=(e=Ig(e)).length,o=mg,i=0,s=hg;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(wg(n));var u=r.length,c=u;for(u&&r.push(gg);c<a;){var l=ug;for(t=0;t<e.length;t++)(n=e[t])>=o&&n<l&&(l=n);var d=c+1;if(l-o>kg((ug-i)/d))throw RangeError(bg);for(i+=(l-o)*d,o=l,t=0;t<e.length;t++){if((n=e[t])<o&&++i>ug)throw RangeError(bg);if(n==o){for(var f=i,p=cg;;p+=cg){var h=p<=s?lg:p>=s+dg?dg:p-s;if(f<h)break;var m=f-h,g=cg-h;r.push(wg(Cg(h+m%g))),f=kg(m/g)}r.push(wg(Cg(f))),s=Eg(i,d,c==u),i=0,++c}}++i,++o}return r.join("")},Tg=function(e){var t,n,r=[],a=e.toLowerCase().replace(yg,".").split(".");for(t=0;t<a.length;t++)n=a[t],r.push(vg.test(n)?"xn--"+Sg(n):n);return r.join(".")},Ag=function(e){var t=Wn(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return D(t.call(e))},Ng=ye("fetch"),_g=ye("Headers"),Rg=kt("iterator"),Og="URLSearchParams",Fg=Og+"Iterator",Mg=he.set,Dg=he.getterFor(Og),Bg=he.getterFor(Fg),Pg=/\+/g,Lg=Array(4),Ug=function(e){return Lg[e-1]||(Lg[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},Vg=function(e){try{return decodeURIComponent(e)}catch(t){return e}},Wg=function(e){var t=e.replace(Pg," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(Ug(n--),Vg);return t}},zg=/[!'()~]|%20/g,jg={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Hg=function(e){return jg[e]},Gg=function(e){return encodeURIComponent(e).replace(zg,Hg)},Kg=function(e,t){if(t)for(var n,r,a=t.split("&"),o=0;o<a.length;)(n=a[o++]).length&&(r=n.split("="),e.push({key:Wg(r.shift()),value:Wg(r.join("="))}))},qg=function(e){this.entries.length=0,Kg(this.entries,e)},Xg=function(e,t){if(e<t)throw TypeError("Not enough arguments")},Qg=oo((function(e,t){Mg(this,{type:Fg,iterator:Ag(Dg(e).entries),kind:t})}),"Iterator",(function(){var e=Bg(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),Yg=function(){Bl(this,Yg,Og);var e,t,n,r,a,o,i,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(Mg(l,{type:Og,entries:d,updateURL:function(){},updateSearchParams:qg}),void 0!==c)if(C(c))if("function"==typeof(e=Wn(c)))for(n=(t=e.call(c)).next;!(r=n.call(t)).done;){if((i=(o=(a=Ag(D(r.value))).next).call(a)).done||(s=o.call(a)).done||!o.call(a).done)throw TypeError("Expected sequence with length 2");d.push({key:i.value+"",value:s.value+""})}else for(u in c)T(c,u)&&d.push({key:u,value:c[u]+""});else Kg(d,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},$g=Yg.prototype;Dl($g,{append:function(e,t){Xg(arguments.length,2);var n=Dg(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){Xg(arguments.length,1);for(var t=Dg(this),n=t.entries,r=e+"",a=0;a<n.length;)n[a].key===r?n.splice(a,1):a++;t.updateURL()},get:function(e){Xg(arguments.length,1);for(var t=Dg(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Xg(arguments.length,1);for(var t=Dg(this).entries,n=e+"",r=[],a=0;a<t.length;a++)t[a].key===n&&r.push(t[a].value);return r},has:function(e){Xg(arguments.length,1);for(var t=Dg(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Xg(arguments.length,1);for(var n,r=Dg(this),a=r.entries,o=!1,i=e+"",s=t+"",u=0;u<a.length;u++)(n=a[u]).key===i&&(o?a.splice(u--,1):(o=!0,n.value=s));o||a.push({key:i,value:s}),r.updateURL()},sort:function(){var e,t,n,r=Dg(this),a=r.entries,o=a.slice();for(a.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(a[t].key>e.key){a.splice(t,0,e);break}t===n&&a.push(e)}r.updateURL()},forEach:function(e){for(var t,n=Dg(this).entries,r=_t(e,arguments.length>1?arguments[1]:void 0,3),a=0;a<n.length;)r((t=n[a++]).value,t.key,this)},keys:function(){return new Qg(this,"keys")},values:function(){return new Qg(this,"values")},entries:function(){return new Qg(this,"entries")}},{enumerable:!0}),me($g,Rg,$g.entries),me($g,"toString",(function(){for(var e,t=Dg(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(Gg(e.key)+"="+Gg(e.value));return n.join("&")}),{enumerable:!0}),At(Yg,Og),qe({global:!0,forced:!sg},{URLSearchParams:Yg}),sg||"function"!=typeof Ng||"function"!=typeof _g||qe({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,a=[e];return arguments.length>1&&(C(t=arguments[1])&&(n=t.body,Un(n)===Og&&((r=t.headers?new _g(t.headers):new _g).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=dt(t,{body:v(0,String(n)),headers:v(0,r)}))),a.push(t)),Ng.apply(this,a)}});var Zg,Jg={URLSearchParams:Yg,getState:Dg},ev=vi.codeAt,tv=c.URL,nv=Jg.URLSearchParams,rv=Jg.getState,av=he.set,ov=he.getterFor("URL"),iv=Math.floor,sv=Math.pow,uv="Invalid authority",cv="Invalid scheme",lv="Invalid host",dv="Invalid port",fv=/[A-Za-z]/,pv=/[\d+-.A-Za-z]/,hv=/\d/,mv=/^(0x|0X)/,gv=/^[0-7]+$/,vv=/^\d+$/,yv=/^[\dA-Fa-f]+$/,bv=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,xv=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,kv=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,wv=/[\u0009\u000A\u000D]/g,Iv=function(e,t){var n,r,a;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return lv;if(!(n=Ev(t.slice(1,-1))))return lv;e.host=n}else if(Mv(e)){if(t=Tg(t),bv.test(t))return lv;if(null===(n=Cv(t)))return lv;e.host=n}else{if(xv.test(t))return lv;for(n="",r=Xn(t),a=0;a<r.length;a++)n+=Ov(r[a],Av);e.host=n}},Cv=function(e){var t,n,r,a,o,i,s,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(a=u[r]))return e;if(o=10,a.length>1&&"0"==a.charAt(0)&&(o=mv.test(a)?16:8,a=a.slice(8==o?1:2)),""===a)i=0;else{if(!(10==o?vv:8==o?gv:yv).test(a))return e;i=parseInt(a,o)}n.push(i)}for(r=0;r<t;r++)if(i=n[r],r==t-1){if(i>=sv(256,5-t))return null}else if(i>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*sv(256,3-r);return s},Ev=function(e){var t,n,r,a,o,i,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,d=0,f=function(){return e.charAt(d)};if(":"==f()){if(":"!=e.charAt(1))return;d+=2,l=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=n=0;n<4&&yv.test(f());)t=16*t+parseInt(f(),16),d++,n++;if("."==f()){if(0==n)return;if(d-=n,c>6)return;for(r=0;f();){if(a=null,r>0){if(!("."==f()&&r<4))return;d++}if(!hv.test(f()))return;for(;hv.test(f());){if(o=parseInt(f(),10),null===a)a=o;else{if(0==a)return;a=10*a+o}if(a>255)return;d++}u[c]=256*u[c]+a,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(d++,!f())return}else if(f())return;u[c++]=t}else{if(null!==l)return;d++,l=++c}}if(null!==l)for(i=c-l,c=7;0!=c&&i>0;)s=u[c],u[c--]=u[l+i-1],u[l+--i]=s;else if(8!=c)return;return u},Sv=function(e){for(var t=null,n=1,r=null,a=0,o=0;o<8;o++)0!==e[o]?(a>n&&(t=r,n=a),r=null,a=0):(null===r&&(r=o),++a);return a>n&&(t=r,n=a),t},Tv=function(e){var t,n,r,a;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=iv(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=Sv(e),n=0;n<8;n++)a&&0===e[n]||(a&&(a=!1),r===n?(t+=n?":":"::",a=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},Av={},Nv=Oo({},Av,{" ":1,'"':1,"<":1,">":1,"`":1}),_v=Oo({},Nv,{"#":1,"?":1,"{":1,"}":1}),Rv=Oo({},_v,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ov=function(e,t){var n=ev(e,0);return n>32&&n<127&&!T(t,e)?e:encodeURIComponent(e)},Fv={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Mv=function(e){return T(Fv,e.scheme)},Dv=function(e){return""!=e.username||""!=e.password},Bv=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Pv=function(e,t){var n;return 2==e.length&&fv.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},Lv=function(e){var t;return e.length>1&&Pv(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Uv=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Pv(t[0],!0)||t.pop()},Vv=function(e){return"."===e||"%2e"===e.toLowerCase()},Wv=function(e){return".."===(e=e.toLowerCase())||"%2e."===e||".%2e"===e||"%2e%2e"===e},zv={},jv={},Hv={},Gv={},Kv={},qv={},Xv={},Qv={},Yv={},$v={},Zv={},Jv={},ey={},ty={},ny={},ry={},ay={},oy={},iy={},sy={},uy={},cy=function(e,t,n,r){var a,o,i,s,u=n||zv,c=0,l="",d=!1,f=!1,p=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(kv,"")),t=t.replace(wv,""),a=Xn(t);c<=a.length;){switch(o=a[c],u){case zv:if(!o||!fv.test(o)){if(n)return cv;u=Hv;continue}l+=o.toLowerCase(),u=jv;break;case jv:if(o&&(pv.test(o)||"+"==o||"-"==o||"."==o))l+=o.toLowerCase();else{if(":"!=o){if(n)return cv;l="",u=Hv,c=0;continue}if(n&&(Mv(e)!=T(Fv,l)||"file"==l&&(Dv(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=l,n)return void(Mv(e)&&Fv[e.scheme]==e.port&&(e.port=null));l="","file"==e.scheme?u=ty:Mv(e)&&r&&r.scheme==e.scheme?u=Gv:Mv(e)?u=Qv:"/"==a[c+1]?(u=Kv,c++):(e.cannotBeABaseURL=!0,e.path.push(""),u=iy)}break;case Hv:if(!r||r.cannotBeABaseURL&&"#"!=o)return cv;if(r.cannotBeABaseURL&&"#"==o){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,u=uy;break}u="file"==r.scheme?ty:qv;continue;case Gv:if("/"!=o||"/"!=a[c+1]){u=qv;continue}u=Yv,c++;break;case Kv:if("/"==o){u=$v;break}u=oy;continue;case qv:if(e.scheme=r.scheme,o==Zg)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==o||"\\"==o&&Mv(e))u=Xv;else if("?"==o)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",u=sy;else{if("#"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),u=oy;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",u=uy}break;case Xv:if(!Mv(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,u=oy;continue}u=$v}else u=Yv;break;case Qv:if(u=Yv,"/"!=o||"/"!=l.charAt(c+1))continue;c++;break;case Yv:if("/"!=o&&"\\"!=o){u=$v;continue}break;case $v:if("@"==o){d&&(l="%40"+l),d=!0,i=Xn(l);for(var h=0;h<i.length;h++){var m=i[h];if(":"!=m||p){var g=Ov(m,Rv);p?e.password+=g:e.username+=g}else p=!0}l=""}else if(o==Zg||"/"==o||"?"==o||"#"==o||"\\"==o&&Mv(e)){if(d&&""==l)return uv;c-=Xn(l).length+1,l="",u=Zv}else l+=o;break;case Zv:case Jv:if(n&&"file"==e.scheme){u=ry;continue}if(":"!=o||f){if(o==Zg||"/"==o||"?"==o||"#"==o||"\\"==o&&Mv(e)){if(Mv(e)&&""==l)return lv;if(n&&""==l&&(Dv(e)||null!==e.port))return;if(s=Iv(e,l))return s;if(l="",u=ay,n)return;continue}"["==o?f=!0:"]"==o&&(f=!1),l+=o}else{if(""==l)return lv;if(s=Iv(e,l))return s;if(l="",u=ey,n==Jv)return}break;case ey:if(!hv.test(o)){if(o==Zg||"/"==o||"?"==o||"#"==o||"\\"==o&&Mv(e)||n){if(""!=l){var v=parseInt(l,10);if(v>65535)return dv;e.port=Mv(e)&&v===Fv[e.scheme]?null:v,l=""}if(n)return;u=ay;continue}return dv}l+=o;break;case ty:if(e.scheme="file","/"==o||"\\"==o)u=ny;else{if(!r||"file"!=r.scheme){u=oy;continue}if(o==Zg)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==o)e.host=r.host,e.path=r.path.slice(),e.query="",u=sy;else{if("#"!=o){Lv(a.slice(c).join(""))||(e.host=r.host,e.path=r.path.slice(),Uv(e)),u=oy;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",u=uy}}break;case ny:if("/"==o||"\\"==o){u=ry;break}r&&"file"==r.scheme&&!Lv(a.slice(c).join(""))&&(Pv(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),u=oy;continue;case ry:if(o==Zg||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&Pv(l))u=oy;else if(""==l){if(e.host="",n)return;u=ay}else{if(s=Iv(e,l))return s;if("localhost"==e.host&&(e.host=""),n)return;l="",u=ay}continue}l+=o;break;case ay:if(Mv(e)){if(u=oy,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=Zg&&(u=oy,"/"!=o))continue}else e.fragment="",u=uy;else e.query="",u=sy;break;case oy:if(o==Zg||"/"==o||"\\"==o&&Mv(e)||!n&&("?"==o||"#"==o)){if(Wv(l)?(Uv(e),"/"==o||"\\"==o&&Mv(e)||e.path.push("")):Vv(l)?"/"==o||"\\"==o&&Mv(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Pv(l)&&(e.host&&(e.host=""),l=l.charAt(0)+":"),e.path.push(l)),l="","file"==e.scheme&&(o==Zg||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",u=sy):"#"==o&&(e.fragment="",u=uy)}else l+=Ov(o,_v);break;case iy:"?"==o?(e.query="",u=sy):"#"==o?(e.fragment="",u=uy):o!=Zg&&(e.path[0]+=Ov(o,Av));break;case sy:n||"#"!=o?o!=Zg&&("'"==o&&Mv(e)?e.query+="%27":e.query+="#"==o?"%23":Ov(o,Av)):(e.fragment="",u=uy);break;case uy:o!=Zg&&(e.fragment+=Ov(o,Nv))}c++}},ly=function(e){var t,n,r=Bl(this,ly,"URL"),a=arguments.length>1?arguments[1]:void 0,o=String(e),i=av(r,{type:"URL"});if(void 0!==a)if(a instanceof ly)t=ov(a);else if(n=cy(t={},String(a)))throw TypeError(n);if(n=cy(i,o,null,t))throw TypeError(n);var s=i.searchParams=new nv,u=rv(s);u.updateSearchParams(i.query),u.updateURL=function(){i.query=String(s)||null},d||(r.href=fy.call(r),r.origin=py.call(r),r.protocol=hy.call(r),r.username=my.call(r),r.password=gy.call(r),r.host=vy.call(r),r.hostname=yy.call(r),r.port=by.call(r),r.pathname=xy.call(r),r.search=ky.call(r),r.searchParams=wy.call(r),r.hash=Iy.call(r))},dy=ly.prototype,fy=function(){var e=ov(this),t=e.scheme,n=e.username,r=e.password,a=e.host,o=e.port,i=e.path,s=e.query,u=e.fragment,c=t+":";return null!==a?(c+="//",Dv(e)&&(c+=n+(r?":"+r:"")+"@"),c+=Tv(a),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?i[0]:i.length?"/"+i.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},py=function(){var e=ov(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Mv(e)?t+"://"+Tv(e.host)+(null!==n?":"+n:""):"null"},hy=function(){return ov(this).scheme+":"},my=function(){return ov(this).username},gy=function(){return ov(this).password},vy=function(){var e=ov(this),t=e.host,n=e.port;return null===t?"":null===n?Tv(t):Tv(t)+":"+n},yy=function(){var e=ov(this).host;return null===e?"":Tv(e)},by=function(){var e=ov(this).port;return null===e?"":String(e)},xy=function(){var e=ov(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},ky=function(){var e=ov(this).query;return e?"?"+e:""},wy=function(){return ov(this).searchParams},Iy=function(){var e=ov(this).fragment;return e?"#"+e:""},Cy=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(d&&Je(dy,{href:Cy(fy,(function(e){var t=ov(this),n=String(e),r=cy(t,n);if(r)throw TypeError(r);rv(t.searchParams).updateSearchParams(t.query)})),origin:Cy(py),protocol:Cy(hy,(function(e){var t=ov(this);cy(t,String(e)+":",zv)})),username:Cy(my,(function(e){var t=ov(this),n=Xn(String(e));if(!Bv(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=Ov(n[r],Rv)}})),password:Cy(gy,(function(e){var t=ov(this),n=Xn(String(e));if(!Bv(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=Ov(n[r],Rv)}})),host:Cy(vy,(function(e){var t=ov(this);t.cannotBeABaseURL||cy(t,String(e),Zv)})),hostname:Cy(yy,(function(e){var t=ov(this);t.cannotBeABaseURL||cy(t,String(e),Jv)})),port:Cy(by,(function(e){var t=ov(this);Bv(t)||(""==(e=String(e))?t.port=null:cy(t,e,ey))})),pathname:Cy(xy,(function(e){var t=ov(this);t.cannotBeABaseURL||(t.path=[],cy(t,e+"",ay))})),search:Cy(ky,(function(e){var t=ov(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",cy(t,e,sy)),rv(t.searchParams).updateSearchParams(t.query)})),searchParams:Cy(wy),hash:Cy(Iy,(function(e){var t=ov(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",cy(t,e,uy)):t.fragment=null}))}),me(dy,"toJSON",(function(){return fy.call(this)}),{enumerable:!0}),me(dy,"toString",(function(){return fy.call(this)}),{enumerable:!0}),tv){var Ey=tv.createObjectURL,Sy=tv.revokeObjectURL;Ey&&me(ly,"createObjectURL",(function(e){return Ey.apply(tv,arguments)})),Sy&&me(ly,"revokeObjectURL",(function(e){return Sy.apply(tv,arguments)}))}At(ly,"URL"),qe({global:!0,forced:!sg,sham:!d},{URL:ly}),qe({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});i((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),i=new A(r||[]);return o._invoke=function(e,t,n){var r=d;return function(a,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw o;return _()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=E(i,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,i),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",m={};function g(){}function v(){}function y(){}var b={};b[o]=function(){return this};var x=Object.getPrototypeOf,k=x&&x(x(N([])));k&&k!==n&&r.call(k,o)&&(b=k);var w=y.prototype=g.prototype=Object.create(b);function I(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(a,o,i,s){var u=l(e[a],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(d).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,s)}))}s(u.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:_}}function _(){return{value:t,done:!0}}return v.prototype=w.constructor=y,y.constructor=v,v.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},I(C.prototype),C.prototype[i]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new C(c(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},I(w),u(w,s,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function Ty(e){return(Ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ay(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function Ny(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ay(o,r,a,i,s,"next",e)}function s(e){Ay(o,r,a,i,s,"throw",e)}i(void 0)}))}}function _y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ry(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oy(e,t,n){return t&&Ry(e.prototype,t),n&&Ry(e,n),e}function Fy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function My(){return(My=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dy(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Py(e,t)}function By(e){return(By=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Py(e,t){return(Py=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ly(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Uy(e,t,n){return(Uy=Ly()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Py(a,n.prototype),a}).apply(null,arguments)}function Vy(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Wy(e,t){if(null==e)return{};var n,r,a=Vy(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function zy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jy(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?zy(e):t}function Hy(e){var t=Ly();return function(){var n,r=By(e);if(t){var a=By(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return jy(this,n)}}function Gy(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=By(e)););return e}function Ky(e,t,n){return(Ky="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Gy(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function qy(e,t){return Yy(e)||Zy(e,t)||Jy(e,t)||nb()}function Xy(e){return Qy(e)||$y(e)||Jy(e)||tb()}function Qy(e){if(Array.isArray(e))return eb(e)}function Yy(e){if(Array.isArray(e))return e}function $y(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Zy(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}function Jy(e,t){if(e){if("string"==typeof e)return eb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eb(e,t):void 0}}function eb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rb(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Jy(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}
/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/var ab=Object.getOwnPropertySymbols,ob=Object.prototype.hasOwnProperty,ib=Object.prototype.propertyIsEnumerable;function sb(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function ub(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}var cb=ub()?Object.assign:function(e,t){for(var n,r,a=sb(e),o=1;o<arguments.length;o++){for(var i in n=Object(arguments[o]))ob.call(n,i)&&(a[i]=n[i]);if(ab){r=ab(n);for(var s=0;s<r.length;s++)ib.call(n,r[s])&&(a[r[s]]=n[r[s]])}}return a},lb="function"==typeof Symbol&&Symbol.for,db=lb?Symbol.for("react.element"):60103,fb=lb?Symbol.for("react.portal"):60106,pb=lb?Symbol.for("react.fragment"):60107,hb=lb?Symbol.for("react.strict_mode"):60108,mb=lb?Symbol.for("react.profiler"):60114,gb=lb?Symbol.for("react.provider"):60109,vb=lb?Symbol.for("react.context"):60110,yb=lb?Symbol.for("react.forward_ref"):60112,bb=lb?Symbol.for("react.suspense"):60113,xb=lb?Symbol.for("react.memo"):60115,kb=lb?Symbol.for("react.lazy"):60116,wb="function"==typeof Symbol&&Symbol.iterator;function Ib(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Eb={};function Sb(e,t,n){this.props=e,this.context=t,this.refs=Eb,this.updater=n||Cb}function Tb(){}function Ab(e,t,n){this.props=e,this.context=t,this.refs=Eb,this.updater=n||Cb}Sb.prototype.isReactComponent={},Sb.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(Ib(85));this.updater.enqueueSetState(this,e,t,"setState")},Sb.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},Tb.prototype=Sb.prototype;var Nb=Ab.prototype=new Tb;Nb.constructor=Ab,cb(Nb,Sb.prototype),Nb.isPureReactComponent=!0;var _b={current:null},Rb=Object.prototype.hasOwnProperty,Ob={key:!0,ref:!0,__self:!0,__source:!0};function Fb(e,t,n){var r,a={},o=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(o=""+t.key),t)Rb.call(t,r)&&!Ob.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:db,type:e,key:o,ref:i,props:a,_owner:_b.current}}function Mb(e,t){return{$$typeof:db,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Db(e){return"object"==typeof e&&null!==e&&e.$$typeof===db}function Bb(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}var Pb=/\/+/g,Lb=[];function Ub(e,t,n,r){if(Lb.length){var a=Lb.pop();return a.result=e,a.keyPrefix=t,a.func=n,a.context=r,a.count=0,a}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function Vb(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>Lb.length&&Lb.push(e)}function Wb(e,t,n,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var o=!1;if(null===e)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case db:case fb:o=!0}}if(o)return n(r,e,""===t?"."+jb(e,0):t),1;if(o=0,t=""===t?".":t+":",Array.isArray(e))for(var i=0;i<e.length;i++){var s=t+jb(a=e[i],i);o+=Wb(a,s,n,r)}else if(null===e||"object"!=typeof e?s=null:s="function"==typeof(s=wb&&e[wb]||e["@@iterator"])?s:null,"function"==typeof s)for(e=s.call(e),i=0;!(a=e.next()).done;)o+=Wb(a=a.value,s=t+jb(a,i++),n,r);else if("object"===a)throw n=""+e,Error(Ib(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return o}function zb(e,t,n){return null==e?0:Wb(e,"",t,n)}function jb(e,t){return"object"==typeof e&&null!==e&&null!=e.key?Bb(e.key):t.toString(36)}function Hb(e,t){e.func.call(e.context,t,e.count++)}function Gb(e,t,n){var r=e.result,a=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?Kb(e,r,n,(function(e){return e})):null!=e&&(Db(e)&&(e=Mb(e,a+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(Pb,"$&/")+"/")+n)),r.push(e))}function Kb(e,t,n,r,a){var o="";null!=n&&(o=(""+n).replace(Pb,"$&/")+"/"),zb(e,Gb,t=Ub(t,o,r,a)),Vb(t)}var qb={current:null};function Xb(){var e=qb.current;if(null===e)throw Error(Ib(321));return e}var Qb={ReactCurrentDispatcher:qb,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:_b,IsSomeRendererActing:{current:!1},assign:cb},Yb={map:function(e,t,n){if(null==e)return e;var r=[];return Kb(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;zb(e,Hb,t=Ub(null,null,t,n)),Vb(t)},count:function(e){return zb(e,(function(){return null}),null)},toArray:function(e){var t=[];return Kb(e,t,null,(function(e){return e})),t},only:function(e){if(!Db(e))throw Error(Ib(143));return e}},$b=Sb,Zb=pb,Jb=mb,ex=Ab,tx=hb,nx=bb,rx=Qb,ax=function(e,t,n){if(null==e)throw Error(Ib(267,e));var r=cb({},e.props),a=e.key,o=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,i=_b.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)Rb.call(t,u)&&!Ob.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var c=0;c<u;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:db,type:e.type,key:a,ref:o,props:r,_owner:i}},ox=function(e,t){return void 0===t&&(t=null),(e={$$typeof:vb,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:gb,_context:e},e.Consumer=e},ix=Fb,sx=function(e){var t=Fb.bind(null,e);return t.type=e,t},ux=function(){return{current:null}},cx=function(e){return{$$typeof:yb,render:e}},lx=Db,dx=function(e){return{$$typeof:kb,_ctor:e,_status:-1,_result:null}},fx=function(e,t){return{$$typeof:xb,type:e,compare:void 0===t?null:t}},px=function(e,t){return Xb().useCallback(e,t)},hx=function(e,t){return Xb().useContext(e,t)},mx=function(){},gx=function(e,t){return Xb().useEffect(e,t)},vx=function(e,t,n){return Xb().useImperativeHandle(e,t,n)},yx=function(e,t){return Xb().useLayoutEffect(e,t)},bx=function(e,t){return Xb().useMemo(e,t)},xx=function(e,t,n){return Xb().useReducer(e,t,n)},kx=function(e){return Xb().useRef(e)},wx=function(e){return Xb().useState(e)},Ix="16.14.0",Cx={Children:Yb,Component:$b,Fragment:Zb,Profiler:Jb,PureComponent:ex,StrictMode:tx,Suspense:nx,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:rx,cloneElement:ax,createContext:ox,createElement:ix,createFactory:sx,createRef:ux,forwardRef:cx,isValidElement:lx,lazy:dx,memo:fx,useCallback:px,useContext:hx,useDebugValue:mx,useEffect:gx,useImperativeHandle:vx,useLayoutEffect:yx,useMemo:bx,useReducer:xx,useRef:kx,useState:wx,version:Ix},Ex="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Sx=Ex,Tx=(i((function(e,t){})),i((function(e){e.exports=Cx}))),Ax="function"==typeof Symbol&&Symbol.for,Nx=Ax?Symbol.for("react.element"):60103,_x=Ax?Symbol.for("react.portal"):60106,Rx=Ax?Symbol.for("react.fragment"):60107,Ox=Ax?Symbol.for("react.strict_mode"):60108,Fx=Ax?Symbol.for("react.profiler"):60114,Mx=Ax?Symbol.for("react.provider"):60109,Dx=Ax?Symbol.for("react.context"):60110,Bx=Ax?Symbol.for("react.async_mode"):60111,Px=Ax?Symbol.for("react.concurrent_mode"):60111,Lx=Ax?Symbol.for("react.forward_ref"):60112,Ux=Ax?Symbol.for("react.suspense"):60113,Vx=Ax?Symbol.for("react.suspense_list"):60120,Wx=Ax?Symbol.for("react.memo"):60115,zx=Ax?Symbol.for("react.lazy"):60116,jx=Ax?Symbol.for("react.block"):60121,Hx=Ax?Symbol.for("react.fundamental"):60117,Gx=Ax?Symbol.for("react.responder"):60118,Kx=Ax?Symbol.for("react.scope"):60119;function qx(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Nx:switch(e=e.type){case Bx:case Px:case Rx:case Fx:case Ox:case Ux:return e;default:switch(e=e&&e.$$typeof){case Dx:case Lx:case zx:case Wx:case Mx:return e;default:return t}}case _x:return t}}}function Xx(e){return qx(e)===Px}var Qx=Bx,Yx=Px,$x=Dx,Zx=Mx,Jx=Nx,ek=Lx,tk=Rx,nk=zx,rk=Wx,ak=_x,ok=Fx,ik=Ox,sk=Ux,uk=function(e){return Xx(e)||qx(e)===Bx},ck=Xx,lk=function(e){return qx(e)===Dx},dk=function(e){return qx(e)===Mx},fk=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Nx},pk=function(e){return qx(e)===Lx},hk=function(e){return qx(e)===Rx},mk=function(e){return qx(e)===zx},gk=function(e){return qx(e)===Wx},vk=function(e){return qx(e)===_x},yk=function(e){return qx(e)===Fx},bk=function(e){return qx(e)===Ox},xk=function(e){return qx(e)===Ux},kk=function(e){return"string"==typeof e||"function"==typeof e||e===Rx||e===Px||e===Fx||e===Ox||e===Ux||e===Vx||"object"==typeof e&&null!==e&&(e.$$typeof===zx||e.$$typeof===Wx||e.$$typeof===Mx||e.$$typeof===Dx||e.$$typeof===Lx||e.$$typeof===Hx||e.$$typeof===Gx||e.$$typeof===Kx||e.$$typeof===jx)},wk=qx,Ik={AsyncMode:Qx,ConcurrentMode:Yx,ContextConsumer:$x,ContextProvider:Zx,Element:Jx,ForwardRef:ek,Fragment:tk,Lazy:nk,Memo:rk,Portal:ak,Profiler:ok,StrictMode:ik,Suspense:sk,isAsyncMode:uk,isConcurrentMode:ck,isContextConsumer:lk,isContextProvider:dk,isElement:fk,isForwardRef:pk,isFragment:hk,isLazy:mk,isMemo:gk,isPortal:vk,isProfiler:yk,isStrictMode:bk,isSuspense:xk,isValidElementType:kk,typeOf:wk};i((function(e,t){})),i((function(e){e.exports=Ik})),Function.call.bind(Object.prototype.hasOwnProperty);function Ck(){}function Ek(){}Ek.resetWarningCache=Ck;var Sk=function(){function e(e,t,n,r,a,o){if(o!==Sx){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ek,resetWarningCache:Ck};return n.PropTypes=n,n},Tk=i((function(e){e.exports=Sk()})),Ak={not_supported:{code:"not_supported",msg:{en:"Camera is not well-supported on this device/browser. Please try another one.",vi:"Camera không được hỗ trợ. Vui lòng thử trình duyệt hoặc thiết bị khác."}},wrong_orientation:{code:"wrong_orientation",msg:{en:"You are using landscape mode. Please rotate screen to portrait mode and retry.",vi:"Bạn đang sử dụng chế độ màn hình xoay ngang. Vui lòng quay màn hình theo chiều dọc và thực hiện lại."}},unable_to_load_model:{code:"unable_to_load_model",msg:{en:"Unable to load model on this device/browser. Please try another one.",vi:"Không thể load model. Vui lòng thử trình duyệt hoặc thiết bị khác."}},no_permission:{code:"no_permission",msg:{en:"Please grant the permission to access the camera.",vi:"Vui lòng cấp quyền để truy cập camera."}},no_face:{code:"no_face",msg:{en:"Face not found",vi:"Không tìm thấy khuôn mặt"}},partial_face:{code:"partial_face",msg:{en:"Face out of the box",vi:"Không tìm thấy toàn bộ khuôn mặt"}},multiple_faces:{code:"multiple_faces",msg:{en:"Too many faces",vi:"Quá nhiều khuôn mặt"}},face_too_small:{code:"face_too_small",msg:{en:"Face too small",vi:"Khuôn mặt quá nhỏ"}},face_too_large:{code:"face_too_large",msg:{en:"Face too large",vi:"Khuôn mặt quá to"}},face_out_of_box:{code:"face_out_of_box",msg:{en:"Face is out of box",vi:"Khuôn mặt không nằm trọn vẹn trong khung ảnh"}},liveness_too_fast:{code:"liveness_too_fast",msg:{en:"Please turn your face SLOWLY",vi:"Vui lòng quay CHẬM lại"}},liveness_terminated:{code:"liveness_terminated",msg:{en:"Please try again.",vi:"Vui lòng thực hiện lại."}},liveness_terminated_face_tracking:{code:"liveness_terminated_face_tracking",msg:{en:"You need to turn your face SLOWLY.\nPlease try again.",vi:"Bạn cần quay CHẬM lại.\nVui lòng thực hiện lại."}},liveness_terminated_no_face:{code:"liveness_terminated_no_face",msg:{en:"Your face was missing for too long.\nPlease try again.",vi:"Khuôn mặt không nằm trong khung hình.\nXin vui lòng thử lại."}},liveness_terminated_time_out:{code:"liveness_terminated_time_out",msg:{en:"You need to complete gestures as instructed within <%= x %> seconds.\nPlease try again.",vi:"Bạn cần hoàn thành động tác theo chỉ dẫn trong <%= x %> giây.\nXin vui lòng thử lại."}},card_sanity_not_good:{code:"card_sanity_not_good",msg:{en:"Card sanity not good",vi:"Card sanity chưa đạt"}},api_call_error:{code:"api_call_error",msg:{en:"Api call error",vi:"Lỗi call api"}},upload_error:{code:"upload_error",msg:{en:"Upload error",vi:"Lỗi upload"}},sanity_check_error:{code:"sanity_check_error",msg:{en:"Sanity check error",vi:"Lỗi check sanity"}},read_id_card_error:{code:"read_id_card_error",msg:{en:"Read id card error",vi:"Lỗi read id card"}},detect_id_tampering_error:{code:"detect_id_tampering_error",msg:{en:"Detect id tampering error",vi:"Lỗi detect id tampering"}},missing_front_id_card:{code:"missing_front_id_card",msg:{en:"Missing front id",vi:"Không tìm thấy front id"}},server_error:{code:"server_error",msg:"Server error"},client_web_setting_not_found:{code:"client_web_setting_not_found",msg:"Client Web Setting Not Found"},id_detector_validate_angle_error:{code:"id_detector_validate_angle_error",msg:{en:"Please place ID card straight, not tilted",vi:"Vui lòng đặt giấy tờ thẳng, không bị nghiêng khi chụp"}},id_detector_no_cards:{code:"id_detector_no_cards",msg:{en:"Please capture the <%= side %> side of ID card\n (occupy 50-80% of the frame)",vi:"Vui lòng chụp mặt <%= side %> của giấy tờ\n (chiếm 50-80% khung hình)"}},id_detector_card_too_small:{code:"id_detector_card_too_small",msg:{en:"Please move ID card CLOSER\n (occupy 50-80% of the frame)",vi:"Vui lòng đưa giấy tờ lại GẦN hơn\n (chiếm 50-80% khung hình)"}},id_detector_error_incomplete:{code:"id_detector_error_incomplete",msg:{en:"Please move ID card FARTHER\n (occupy 50-80% of the frame)",vi:"Vui lòng đưa giấy tờ ra XA hơn\n (chiếm 50-80% khung hình)"}},glare_detected:{code:"glare_detected",msg:{en:"Glare is detected. Please adjust the shooting angle",vi:"Ảnh bị chói / lóa. Vui lòng điều chỉnh góc chụp."}},id_detector_error_front_side_no_faces:{code:"id_detector_error_front_side_no_faces",msg:{en:"Please capture the front side of ID card",vi:"Vui lòng chụp mặt trước của giấy tờ"}},id_detector_error_front_side_multiple_faces:{code:"id_detector_error_front_side_multiple_faces",msg:{en:"Please capture the front side of one ID card only (remove other items out of the frame)",vi:"Vui lòng chụp mặt trước 1 giấy tờ duy nhất"}},id_detector_error_back_side_has_faces:{code:"id_detector_error_back_side_has_faces",msg:{en:"Please capture the back side of ID card",vi:"Vui lòng chụp mặt sau của giấy tờ"}},id_detector_error_blur:{code:"id_detector_error_blur",msg:{en:"Blurry photo detected. Please capture again for a clearer image",vi:"Ảnh bị mờ. Vui lòng chụp lại để có ảnh rõ nét hơn"}}},Nk={FRONTAL:"frontal",LEFT:"left",RIGHT:"right",UP:"up",DOWN:"down"},_k=Object.freeze({__proto__:null,ErrorDuration:{SHORT:500,LONG:1500,TERMINATE:3e3},Errors:Ak,FaceDirection:Nk,Mode:{ACTIVE:"active",PASSIVE:"passive"},Messages:{REMAIN_TIME:{en:"Remaining time: <%= x %> seconds",vi:"Thời gian còn lại: <%= x %> giây"}},IDCardSide:{FRONT:"front",BACK:"back"},IDCardType:{VN:"vn.national_id"},IDCardMessage:{REMAINING_TIME:{en:"Remaining time: <%= x %> seconds",vi:"Thời gian còn lại: <%= x %> giây"},TIMEOUT_INSTRUCTION:{en:"You need to take the picture within <%= x %> seconds.\nPlease try again.",vi:"Bạn cần hoàn thành việc chụp giấy tờ trong <%= x %> giây.\nVui lòng thử lại."}}}),Rk=Tx.createContext();function Ok(e){var t=e.value,n=e.children;return Tx.createElement(Rk.Provider,{value:t},n)}function Fk(){var e=Tx.useContext(Rk);if(void 0===e)throw new Error("useSDKSettings must be used within a SDKSettingsProvider");return e}Ok.propTypes={value:Tk.shape({lang:Tk.string,assetRoot:Tk.string,apiClient:Tk.shape({})}).isRequired,children:Tk.node.isRequired};var Mk=Object.freeze({__proto__:null,SDKSettingsProvider:Ok,useSDKSettings:Fk});function Dk(e,t){return e&&!e.endsWith("/")?[e,"/",t].join(""):[e,t].join("")}function Bk(){var e=Fk();return null==e?void 0:e.assetRoot}var Pk=Object.freeze({__proto__:null,getAsset:Dk,useAssetRoot:Bk,useAsset:function(e){return Dk(Bk(),e)}}),Lk=Object.freeze({__proto__:null,sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))}});function Uk(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function Vk(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Uk(o,r,a,i,s,"next",e)}function s(e){Uk(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Wk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zk(Object(n),!0).forEach((function(t){Wk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||Kk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gk(e){return function(e){if(Array.isArray(e))return qk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Kk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kk(e,t){if(e){if("string"==typeof e)return qk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qk(e,t):void 0}}function qk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xk(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Kk(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}var Qk=Symbol("Comlink.proxy"),Yk=Symbol("Comlink.endpoint"),$k=Symbol("Comlink.releaseProxy"),Zk=Symbol("Comlink.thrown"),Jk=function(e){return"object"==Ty(e)&&null!==e||"function"==typeof e},ew=new Map([["proxy",{canHandle:function(e){return Jk(e)&&e[Qk]},serialize:function(e){var t=new MessageChannel,n=t.port1,r=t.port2;return tw(e,n),[r,[r]]},deserialize:function(e){return e.start(),rw(e)}}],["throw",{canHandle:function(e){return Jk(e)&&Zk in e},serialize:function(e){var t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function tw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;t.addEventListener("message",(function n(r){if(r&&r.data){var a,o=Object.assign({path:[]},r.data),i=o.id,s=o.type,u=o.path,c=(r.data.argumentList||[]).map(cw);try{var l=u.slice(0,-1).reduce((function(e,t){return e[t]}),e),d=u.reduce((function(e,t){return e[t]}),e);switch(s){case"GET":a=d;break;case"SET":l[u.slice(-1)[0]]=cw(r.data.value),a=!0;break;case"APPLY":a=d.apply(l,c);break;case"CONSTRUCT":a=function(e){return Object.assign(e,Fy({},Qk,!0))}(Uy(d,Xy(c)));break;case"ENDPOINT":var f=new MessageChannel,p=f.port1,h=f.port2;tw(e,h),a=function(e,t){return sw.set(e,t),e}(p,[p]);break;case"RELEASE":a=void 0;break;default:return}}catch(e){a=Fy({value:e},Zk,0)}Promise.resolve(a).catch((function(e){return Fy({value:e},Zk,0)})).then((function(e){var r=qy(uw(e),2),a=r[0],o=r[1];t.postMessage(Object.assign(Object.assign({},a),{id:i}),o),"RELEASE"===s&&(t.removeEventListener("message",n),nw(t))}))}})),t.start&&t.start()}function nw(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function rw(e,t){return ow(e,[],t)}function aw(e){if(e)throw new Error("Proxy has been released and is not useable")}function ow(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=!1,a=new Proxy(n,{get:function(n,o){if(aw(r),o===$k)return function(){return lw(e,{type:"RELEASE",path:t.map((function(e){return e.toString()}))}).then((function(){nw(e),r=!0}))};if("then"===o){if(0===t.length)return{then:function(){return a}};var i=lw(e,{type:"GET",path:t.map((function(e){return e.toString()}))}).then(cw);return i.then.bind(i)}return ow(e,[].concat(Xy(t),[o]))},set:function(n,a,o){aw(r);var i=qy(uw(o),2),s=i[0],u=i[1];return lw(e,{type:"SET",path:[].concat(Xy(t),[a]).map((function(e){return e.toString()})),value:s},u).then(cw)},apply:function(n,a,o){aw(r);var i=t[t.length-1];if(i===Yk)return lw(e,{type:"ENDPOINT"}).then(cw);if("bind"===i)return ow(e,t.slice(0,-1));var s=qy(iw(o),2),u=s[0],c=s[1];return lw(e,{type:"APPLY",path:t.map((function(e){return e.toString()})),argumentList:u},c).then(cw)},construct:function(n,a){aw(r);var o=qy(iw(a),2),i=o[0],s=o[1];return lw(e,{type:"CONSTRUCT",path:t.map((function(e){return e.toString()})),argumentList:i},s).then(cw)}});return a}function iw(e){var t,n=e.map(uw);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var sw=new WeakMap;function uw(e){var t,n=rb(ew);try{for(n.s();!(t=n.n()).done;){var r=qy(t.value,2),a=r[0],o=r[1];if(o.canHandle(e)){var i=qy(o.serialize(e),2);return[{type:"HANDLER",name:a,value:i[0]},i[1]]}}}catch(e){n.e(e)}finally{n.f()}return[{type:"RAW",value:e},sw.get(e)||[]]}function cw(e){switch(e.type){case"HANDLER":return ew.get(e.name).deserialize(e.value);case"RAW":return e.value}}function lw(e,t,n){return new Promise((function(r){var a=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)}))}var dw=function(){if(!window.Worker)return null;var e=new Blob(['const t=Symbol("Comlink.proxy"),e=Symbol("Comlink.endpoint"),r=Symbol("Comlink.releaseProxy"),n=Symbol("Comlink.thrown"),a=t=>"object"==typeof t&&null!==t||"function"==typeof t,o=new Map([["proxy",{canHandle:e=>a(e)&&e[t],serialize(t){const{port1:e,port2:r}=new MessageChannel;return i(t,e),[r,[r]]},deserialize(t){return t.start(),s(t,[],e);var e}}],["throw",{canHandle:t=>a(t)&&n in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function i(e,r=self){r.addEventListener("message",(function a(o){if(!o||!o.data)return;const{id:c,type:s,path:l}=Object.assign({path:[]},o.data),p=(o.data.argumentList||[]).map(m);let g;try{const r=l.slice(0,-1).reduce(((t,e)=>t[e]),e),n=l.reduce(((t,e)=>t[e]),e);switch(s){case"GET":g=n;break;case"SET":r[l.slice(-1)[0]]=m(o.data.value),g=!0;break;case"APPLY":g=n.apply(r,p);break;case"CONSTRUCT":g=function(e){return Object.assign(e,{[t]:!0})}(new n(...p));break;case"ENDPOINT":{const{port1:t,port2:r}=new MessageChannel;i(e,r),g=function(t,e){return f.set(t,e),t}(t,[t])}break;case"RELEASE":g=void 0;break;default:return}}catch(t){g={value:t,[n]:0}}Promise.resolve(g).catch((t=>({value:t,[n]:0}))).then((t=>{const[e,n]=h(t);r.postMessage(Object.assign(Object.assign({},e),{id:c}),n),"RELEASE"===s&&(r.removeEventListener("message",a),u(r))}))})),r.start&&r.start()}function u(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function c(t){if(t)throw new Error("Proxy has been released and is not useable")}function s(t,n=[],a=function(){}){let o=!1;const i=new Proxy(a,{get(e,a){if(c(o),a===r)return()=>p(t,{type:"RELEASE",path:n.map((t=>t.toString()))}).then((()=>{u(t),o=!0}));if("then"===a){if(0===n.length)return{then:()=>i};const e=p(t,{type:"GET",path:n.map((t=>t.toString()))}).then(m);return e.then.bind(e)}return s(t,[...n,a])},set(e,r,a){c(o);const[i,u]=h(a);return p(t,{type:"SET",path:[...n,r].map((t=>t.toString())),value:i},u).then(m)},apply(r,a,i){c(o);const u=n[n.length-1];if(u===e)return p(t,{type:"ENDPOINT"}).then(m);if("bind"===u)return s(t,n.slice(0,-1));const[f,h]=l(i);return p(t,{type:"APPLY",path:n.map((t=>t.toString())),argumentList:f},h).then(m)},construct(e,r){c(o);const[a,i]=l(r);return p(t,{type:"CONSTRUCT",path:n.map((t=>t.toString())),argumentList:a},i).then(m)}});return i}function l(t){const e=t.map(h);return[e.map((t=>t[0])),(r=e.map((t=>t[1])),Array.prototype.concat.apply([],r))];var r}const f=new WeakMap;function h(t){for(const[e,r]of o)if(r.canHandle(t)){const[n,a]=r.serialize(t);return[{type:"HANDLER",name:e,value:n},a]}return[{type:"RAW",value:t},f.get(t)||[]]}function m(t){switch(t.type){case"HANDLER":return o.get(t.name).deserialize(t.value);case"RAW":return t.value}}function p(t,e,r){return new Promise((n=>{const a=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function e(r){r.data&&r.data.id&&r.data.id===a&&(t.removeEventListener("message",e),n(r.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:a},e),r)}))}var g=[[0,1,0],[1,-4,1],[0,1,0]];function d(t,e,r,n){return t[4*(r*e+n)]}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance. In order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var E="frontal",S="left",w="right",M="up",k="down",A=0,_=1,R=2;function L(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t,2),a=n[0],o=n[1],i=b(e,2),u=i[0],c=i[1],s=[a[0],o[0]],l=[a[1],o[1]];return s[0]+r<=u[0]&&c[0]<=s[1]-r&&l[0]+r<=u[1]&&c[1]<=l[1]-.8*r?R:s[0]<=u[0]||c[0]<=s[1]||l[0]<=u[1]||c[1]<=l[1]?_:A}var N={code:"no_face",msg:{en:"Face not found",vi:"Không tìm thấy khuôn mặt"}},P={code:"partial_face",msg:{en:"Face out of the box",vi:"Không tìm thấy toàn bộ khuôn mặt"}},O={code:"multiple_faces",msg:{en:"Too many faces",vi:"Quá nhiều khuôn mặt"}},j={code:"face_too_small",msg:{en:"Face too small",vi:"Khuôn mặt quá nhỏ"}},T={code:"face_too_large",msg:{en:"Face too large",vi:"Khuôn mặt quá to"}},C={code:"face_out_of_box",msg:{en:"Face is out of box",vi:"Khuôn mặt không nằm trọn vẹn trong khung ảnh"}};function F(t){return Math.pow(Math.pow(t[0],2)+Math.pow(t[1],2),.5)}function x(t,e){return[t[0]-e[0],t[1]-e[1]]}function I(t,e,r,n){var a=r*(4*e)+4*n;return{r:t[a],g:t[a+1],b:t[a+2]}}i({calculateBlurScoreFunc:function(t){for(var e=t.data,r=t.reducedWidth,n=t.reducedHeight,a=0;a<e.length;a+=4){var o=(e[a]+e[a+1]+e[a+2])/3;e[a]=o}for(var i=0,u=0,c=n-1,s=r-1,l=1;l<c;l++)for(var f=1;f<s;f++){var h=g[0][0]*d(e,r,f-1,l-1)+g[0][1]*d(e,r,f,l-1)+g[0][2]*d(e,r,f+1,l-1)+g[1][0]*d(e,r,f-1,l)+g[1][1]*d(e,r,f,l)+g[1][2]*d(e,r,f+1,l)+g[2][0]*d(e,r,f-1,l+1)+g[2][1]*d(e,r,f,l+1)+g[2][2]*d(e,r,f+1,l+1);(h=Math.abs(h))>25&&i++,h>15&&h<25&&u++}var m=0;return i+u!==0&&(m=i/(i+u)),m},calculateFaceDirectionFunc:function(t){var e=t.landmarks,r=t.getPerfectFrontal,n=function(t){var e,r,n,a,o,i,u,c=b(t,4),s=c[0],l=c[1],f=c[2],h=c[3],m=x(l,s),p=F(m),g=(a=l,e=[(n=s)[0]+a[0],n[1]+a[1]],r=2,[e[0]/r,e[1]/r]),d=x(f,g),v=F(x(h,f)),y=x(h,g),E=F(y),S=(d[0]*y[0]+d[1]*y[1])/E,w=v/E;if(p>.5*E)o=(d[0]*m[0]+d[1]*m[1])/p/p;else{var M=F(x(d,function(t,e){return[t[0]*e,t[1]*e]}(y,S/E)));u=y,o=((i=d)[0]*u[1]-u[0]*i[1]>=0?1:-1)*M/p}return{left_right_score:o,up_down_score:w}}(e),a=n.left_right_score,o=n.up_down_score,i=b(e,3),u=i[0],c=i[1],s=i[2],l=c[0]-s[0],f=u[0]-s[0],h=r?.1:.3,m=o>.7,p=o<.42,g=a>=.35&&a<=.6,d=a<=-.35&&a>=-.6;return o>=.42&&o<=.7&&a>-h&&a<h&&l*f<0?{gesture:E,leftRightScore:a}:m&&!d&&!g?{gesture:M,leftRightScore:a}:p&&!d&&!g?{gesture:k,leftRightScore:a}:g&&!m&&!p?{gesture:w,leftRightScore:a}:d&&!m&&!p?{gesture:S,leftRightScore:a}:null},validatePredictionsFunc:function(t){var e,r,n,a,o,i,u,c,s,l,f,h,m,p,g,d,y,E,S,w,M,k,F,x,I,z,H,D,K,G,W,q,U=t.predictions,B=t.width,Y=[[0,0],[B,t.height]],Q=U.reduce((function(t,e){var r=e.topLeft,n=e.bottomRight,a=e.probability,o=e.landmarks;a<.9||o.length<6||function(t){var e=t.small,r=e.coords,n=e.area,a=t.big,o=a.coords,i=a.area,u=n;if(!u){var c=b(r,2),s=c[0],l=c[1];u=(l[0]-s[0])*(l[1]-s[1])}var f=i;if(!f){var h=b(o,2),m=h[0],p=h[1];f=(p[0]-m[0])*(p[1]-m[1])}return u/f}({small:{coords:[r,n]},big:{coords:Y}})<=.025?t[A].push(e):t[L(Y,[r,n])].push(e);return t}),(v(e={},_,[]),v(e,R,[]),v(e,A,[]),e)),X=Q[R].length,$=Q[_].length;if(0===X)r=$>0?P:N;else if(X+$>1)r=O;else{var J=n=Q[R][0],V=J.topLeft,Z=J.bottomRight,tt=(F=Y,x=b([V,Z],2),I=x[0],z=x[1],H=b(F,2),D=H[0],K=H[1],G=z[0]-I[0],W=z[1]-I[1],q=K[0]-D[0],G/q<W/q?G/q:W/q);tt<.4&&(r=j),tt>.61&&(r=T),L(Y,(a=n.landmarks,u=a[0],c=a[1],s=a[2],l=a[3],f=a[4],h=a[5],m=.5*(u[1]+c[1]),p=m+1.5*(m-l[1]),g=l[1]-1.2*(s[1]-l[1]),d=[u[0],c[0],s[0],l[0],f[0],h[0]],y=Math.min.apply(Math,d),E=Math.min(p,g),S=Math.max.apply(Math,d),w=Math.max(p,g),M=Math.abs(l[0]-f[0])/Math.abs(l[0]-h[0]),k=l[0]-f[0]<0&&h[0]-l[0]>.05*(S-y),l[0]-f[0]>0&&h[0]-l[0]<-.05*(S-y)?(o=.2,i=.1):k?(o=.1,i=.2):M>2||M<.5?(o=.15,i=.15):(o=.05,i=.05),[[y-o*(S-y),E],[S+i*(S-y),w]]),.05*B)!==R&&(r=C)}return{error:r,fullFace:n}},checkCardBlur:function(t){var e=t.data,r=t.width,n=t.height,a=function(t,e,r){for(var n=0,a=[],o=1;o<r-1;o++)for(var i=1;i<e-1;i++){var u=t[o-1][i-1],c=t[o][i-1],s=t[o+1][i-1],l=t[o-1][i],f=t[o][i],h=t[o+1][i],m=t[o-1][i+1],p=t[o][i+1],g=t[o+1][i+1],d=Number.parseInt(0*u+1*c+0*s,10),v=Number.parseInt(1*l+-4*f+1*h,10),b=Number.parseInt(0*m+1*p+0*g,10),y=Number.parseInt(Math.abs(d+v+b),10);a.push(y),n+=y}var E=a.length,S=n/E,w=0;a.forEach((function(t){w+=(t-S)*(t-S)}));var M=Math.sqrt(w/E);return{lapAvg:S,lapStd:M}}(function(t,e,r){for(var n=[],a=0;a<r+2;a++)for(var o=0;o<e+2;o++){n[a]||(n[a]=[]),0!==o&&0!==a&&o!==e+1&&a!==r+1||(n[a][o]=1);var i=I(t,e,a-1,o-1),u=i.r,c=i.g,s=i.b,l=Number.parseInt(Math.round(.299*u+.587*c+.114*s),10);n[a][o]=l}n[0]=n[2],n[r+1]=n[r-1];for(var f=0;f<r+2;f++)n[f][0]=n[f][2],n[f][e+1]=n[f][e-1];return n}(e,r,n),r+2,n+2);return function(t,e){return e<=18.553622245788574?e<=11.523502826690674?t<=-.05309182405471802?1:.5:t<=.2395537868142128?.29069767441860467:.8333333333333334:e<=23.69584369659424?e<=23.6335506439209?.10606060606060606:1:e<=33.88881301879883?.03896103896103896:0}(a.lapAvg,a.lapStd)},detectGlare:function(t,e,r){return function(t,e,r){for(var n=0,a=r[1],o=r[3],i=r[0],u=r[2],c=a;c<o;c++)for(var s=i;s<u;s++){var l=I(t,e,c,s),f=l.r,h=l.g,m=l.b;f>=245&&m>=245&&h>245&&(n+=1)}return n}(t,e,function(t,e){var r=Math.floor(.025*t),n=t-r,a=Math.floor(.025*e);return[r,a,n,e-a]}(e,r))/(e*r)>=.001}});']),t=URL.createObjectURL(e);return rw(new Worker(t))}(),fw=[[0,1,0],[1,-4,1],[0,1,0]];function pw(e,t,n,r){return e[4*(n*t+r)]}function hw(e){for(var t=e.data,n=e.reducedWidth,r=e.reducedHeight,a=0;a<t.length;a+=4){var o=(t[a]+t[a+1]+t[a+2])/3;t[a]=o}for(var i=0,s=0,u=r-1,c=n-1,l=1;l<u;l++)for(var d=1;d<c;d++){var f=fw[0][0]*pw(t,n,d-1,l-1)+fw[0][1]*pw(t,n,d,l-1)+fw[0][2]*pw(t,n,d+1,l-1)+fw[1][0]*pw(t,n,d-1,l)+fw[1][1]*pw(t,n,d,l)+fw[1][2]*pw(t,n,d+1,l)+fw[2][0]*pw(t,n,d-1,l+1)+fw[2][1]*pw(t,n,d,l+1)+fw[2][2]*pw(t,n,d+1,l+1);(f=Math.abs(f))>25&&i++,f>15&&f<25&&s++}var p=0;return i+s!==0&&(p=i/(i+s)),p}function mw(e,t,n,r){var a=n*(4*t)+4*r;return{r:e[a],g:e[a+1],b:e[a+2]}}function gw(e){var t=e.data,n=e.width,r=e.height,a=function(e,t,n){for(var r=0,a=[],o=1;o<n-1;o++)for(var i=1;i<t-1;i++){var s=e[o-1][i-1],u=e[o][i-1],c=e[o+1][i-1],l=e[o-1][i],d=e[o][i],f=e[o+1][i],p=e[o-1][i+1],h=e[o][i+1],m=e[o+1][i+1],g=Number.parseInt(0*s+1*u+0*c,10),v=Number.parseInt(1*l+-4*d+1*f,10),y=Number.parseInt(0*p+1*h+0*m,10),b=Number.parseInt(Math.abs(g+v+y),10);a.push(b),r+=b}var x=a.length,k=r/x,w=0;a.forEach((function(e){w+=(e-k)*(e-k)}));var I=Math.sqrt(w/x);return{lapAvg:k,lapStd:I}}(function(e,t,n){for(var r=[],a=0;a<n+2;a++)for(var o=0;o<t+2;o++){r[a]||(r[a]=[]),0!==o&&0!==a&&o!==t+1&&a!==n+1||(r[a][o]=1);var i=mw(e,t,a-1,o-1),s=i.r,u=i.g,c=i.b,l=Number.parseInt(Math.round(.299*s+.587*u+.114*c),10);r[a][o]=l}r[0]=r[2],r[n+1]=r[n-1];for(var d=0;d<n+2;d++)r[d][0]=r[d][2],r[d][t+1]=r[d][t-1];return r}(t,n,r),n+2,r+2);return function(e,t){return t<=18.553622245788574?t<=11.523502826690674?e<=-.05309182405471802?1:.5:e<=.2395537868142128?.29069767441860467:.8333333333333334:t<=23.69584369659424?t<=23.6335506439209?.10606060606060606:1:t<=33.88881301879883?.03896103896103896:0}(a.lapAvg,a.lapStd)}function vw(e){var t=e.width,n=e.height,r=e.getContext("2d"),a=Math.floor(t/2.8),o=Math.floor(n/2.8),i=t-a,s=n-o;return{data:r.getImageData(Math.floor(a/2),Math.floor(o/2),i,s).data,reducedWidth:i,reducedHeight:s}}function yw(){return(yw=Vk(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=vw(t),dw){e.next=3;break}return e.abrupt("return",hw(n));case 3:return e.abrupt("return",dw.calculateBlurScoreFunc(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bw(e){var t=document.createElement("canvas"),n=200,r=e.width*(n/e.width);t.width=r,t.height=n;var a=t.getContext("2d");return a.drawImage(e,0,0,r,n),{data:a.getImageData(0,0,r,n).data,width:r,height:n}}function xw(){return(xw=Vk(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=bw(t),dw){e.next=3;break}return e.abrupt("return",gw(n));case 3:return e.abrupt("return",dw.checkCardBlur(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kw=Object.freeze({__proto__:null,BLUR_CARD_THRESHOLD:.29069767441860467,calculateBlurScore:function(e){return yw.apply(this,arguments)},hasBetterBlurScore:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return null===t||e-t>n},calculateCardBlurScore:function(e){return xw.apply(this,arguments)}});function ww(e){var t,n,r,a,o,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=s.x,l=s.y,d=s.width,f=s.height,p=e.videoWidth,h=e.videoHeight,m=window.innerWidth,g=window.innerHeight,v=m/g,y=p/h;v<y?(o=c*(r=p/m),i=(l-(t=(g-m/y)/2))*(a=h/(g-2*t))):(o=(c-(n=(m-g*y)/2))*(r=p/(m-2*n)),i=l*(a=h/g));var b=d*r,x=f*a,k=Math.max(b,x)*u;return{lostX:n,lostY:t,cropWidth:b=Math.floor(Math.min(p,b+2*k)),cropHeight:x=Math.floor(Math.min(h,x+2*k)),cropX:o=Math.floor(Math.max(0,o-k)),cropY:i=Math.floor(Math.max(0,i-k))}}var Iw=Object.freeze({__proto__:null,analyzeVideoAndWindowSizes:ww,takePicture:function(e){var t,n=e.canvas,r=e.video,a=e.cropArea;if(n)t=n;else{var o=ww(r,a),i=o.cropWidth,s=o.cropHeight,u=o.cropX,c=o.cropY,l=(t=document.createElement("canvas")).getContext("2d");t.width=i,t.height=s,l.drawImage(r,u,c,i,s,0,0,i,s)}return new Promise((function(e){t.toBlob(e,"image/jpeg",1)}))}}),Cw=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e},Ew=Object.freeze({__proto__:null,shuffleArray:Cw}),Sw={NONE:0,PARTIAL:1,FULL:2};function Tw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Hk(e,2),a=r[0],o=r[1],i=Hk(t,2),s=i[0],u=i[1],c=[a[0],o[0]],l=[a[1],o[1]];return c[0]+n<=s[0]&&u[0]<=c[1]-n&&l[0]+n<=s[1]&&u[1]<=l[1]-.8*n?Sw.FULL:c[0]<=s[0]||u[0]<=c[1]||l[0]<=s[1]||u[1]<=l[1]?Sw.PARTIAL:Sw.NONE}function Aw(e){var t=e.small,n=t.coords,r=t.area,a=e.big,o=a.coords,i=a.area,s=r;if(!s){var u=Hk(n,2),c=u[0],l=u[1];s=(l[0]-c[0])*(l[1]-c[1])}var d=i;if(!d){var f=Hk(o,2),p=f[0],h=f[1];d=(h[0]-p[0])*(h[1]-p[1])}return s/d}function Nw(e,t){var n=Hk(e,2),r=n[0],a=n[1],o=Hk(t,2),i=o[0],s=o[1],u=a[0]-r[0],c=a[1]-r[1],l=s[0]-i[0];return u/l<c/l?u/l:c/l}var _w=Object.freeze({__proto__:null,ContainMode:Sw,rectContains:Tw,rectAreaRatio:Aw,rectEdgeRatio:Nw,isFaceCenter:function(e,t){var n=Hk(e,2),r=n[0],a=n[1],o=Hk(t,2),i=o[0],s=o[1],u=a[0]-r[0],c=a[1]-r[1],l=s[0]-i[0],d=Math.abs(r[0]-(l-u)/2)/l<.2,f=Math.abs(r[1]-(l-c)/2)/l<.2;return!(!d||!f)}});function Rw(e){return Math.pow(Math.pow(e[0],2)+Math.pow(e[1],2),.5)}function Ow(e,t){return[e[0]-t[0],e[1]-t[1]]}function Fw(e){var t=e.landmarks,n=e.getPerfectFrontal,r=function(e){var t,n,r,a,o,i,s=Hk(e,4),u=s[0],c=s[1],l=s[2],d=s[3],f=Ow(c,u),p=Rw(f),h=(r=c,2,[(t=[(n=u)[0]+r[0],n[1]+r[1]])[0]/2,t[1]/2]),m=Ow(l,h),g=Rw(Ow(d,l)),v=Ow(d,h),y=Rw(v),b=(m[0]*v[0]+m[1]*v[1])/y,x=g/y;if(p>.5*y)a=(m[0]*f[0]+m[1]*f[1])/p/p;else{var k=Rw(Ow(m,function(e,t){return[e[0]*t,e[1]*t]}(v,b/y)));i=v,a=((o=m)[0]*i[1]-i[0]*o[1]>=0?1:-1)*k/p}return{left_right_score:a,up_down_score:x}}(t),a=r.left_right_score,o=r.up_down_score,i=Hk(t,3),s=i[0],u=i[1],c=i[2],l=u[0]-c[0],d=s[0]-c[0],f=n?.1:.3,p=o>.7,h=o<.42,m=a>=.35&&a<=.6,g=a<=-.35&&a>=-.6;return o>=.42&&o<=.7&&a>-f&&a<f&&l*d<0?{gesture:Nk.FRONTAL,leftRightScore:a}:!p||g||m?!h||g||m?!m||p||h?!g||p||h?null:{gesture:Nk.LEFT,leftRightScore:a}:{gesture:Nk.RIGHT,leftRightScore:a}:{gesture:Nk.DOWN,leftRightScore:a}:{gesture:Nk.UP,leftRightScore:a}}function Mw(e){var t,n,r,a,o,i,s,u,c,l,d,f,p,h,m,g,v,y,b,x,k,w,I=e.predictions,C=e.width,E=[[0,0],[C,e.height]],S=I.reduce((function(e,t){var n=t.topLeft,r=t.bottomRight,a=t.probability,o=t.landmarks;return a<.9||o.length<6||Aw({small:{coords:[n,r]},big:{coords:E}})<=.025?e[Sw.NONE].push(t):e[Tw(E,[n,r])].push(t),e}),(Wk(t={},Sw.PARTIAL,[]),Wk(t,Sw.FULL,[]),Wk(t,Sw.NONE,[]),t)),T=S[Sw.FULL].length,A=S[Sw.PARTIAL].length;if(0===T)n=A>0?Ak.partial_face:Ak.no_face;else if(T+A>1)n=Ak.multiple_faces;else{var N=r=S[Sw.FULL][0],_=Nw([N.topLeft,N.bottomRight],E);_<.4&&(n=Ak.face_too_small),_>.61&&(n=Ak.face_too_large),Tw(E,(s=(a=r.landmarks)[0],u=a[1],c=a[2],l=a[3],d=a[4],f=a[5],h=(p=.5*(s[1]+u[1]))+1.5*(p-l[1]),m=l[1]-1.2*(c[1]-l[1]),g=[s[0],u[0],c[0],l[0],d[0],f[0]],v=Math.min.apply(Math,g),y=Math.min(h,m),b=Math.max.apply(Math,g),x=Math.max(h,m),k=Math.abs(l[0]-d[0])/Math.abs(l[0]-f[0]),w=l[0]-d[0]<0&&f[0]-l[0]>.05*(b-v),l[0]-d[0]>0&&f[0]-l[0]<-.05*(b-v)?(o=.2,i=.1):w?(o=.1,i=.2):k>2||k<.5?(o=.15,i=.15):(o=.05,i=.05),[[v-o*(b-v),y],[b+i*(b-v),x]]),.05*C)!==Sw.FULL&&(n=Ak.face_out_of_box)}return{error:n,fullFace:r}}function Dw(e,t){var n=t.customInstructions,r=t.customIcon,a=t.customDirectionIcon,o=t.customStepTimeConstraints,i={};return null!=n&&n[e]&&(i.instructions=n[e]),null!=r&&r[e]&&(i.icon=r[e]),null!=a&&a[e]&&(i.directionIcon=a[e]),null!=o&&o[e]&&(i.stepTimeConstraints=o[e]),i}function Bw(){return(Bw=Vk(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dw){e.next=2;break}return e.abrupt("return",Mw(t));case 2:return e.abrupt("return",dw.validatePredictionsFunc(t));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pw(){return(Pw=Vk(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dw){e.next=2;break}return e.abrupt("return",Fw(t));case 2:return e.abrupt("return",dw.calculateFaceDirectionFunc(t));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lw=Object.freeze({__proto__:null,initFaceVerificationData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.assetRoot,n=void 0===t?"/":t,r=e.customInstructions,a=e.customIcon,o=e.customDirectionIcon,i=e.customStepTimeConstraints;return{curStepIndex:0,steps:[].concat(Gk(Cw([jk({name:Nk.LEFT,instructions:{en:"Turn your face to the left",vi:"Quay mặt chậm qua trái"},image:{blob:null,imageId:null,objUrl:null,blurScore:null,leftRightScore:null},frontalFaceImage:{blob:null,imageId:null,blurScore:null,leftRightScore:null},icon:Dk(n,"ic_face_left.svg"),directionIcon:Dk(n,"arrow_left.svg"),directionIconAnimation:"slide-horizontal",firstFrameSpottedAt:null,stepTimeConstraints:{delayTime:null}},Dw(Nk.LEFT,{customInstructions:r,customIcon:a,customDirectionIcon:o,customStepTimeConstraints:i})),jk({name:Nk.RIGHT,instructions:{en:"Turn your face to the right",vi:"Quay mặt chậm qua phải"},image:{blob:null,imageId:null,objUrl:null,blurScore:null,leftRightScore:null},frontalFaceImage:{blob:null,imageId:null,blurScore:null,leftRightScore:null},icon:Dk(n,"ic_face_right.svg"),directionIcon:Dk(n,"arrow_right.svg"),directionIconAnimation:"slide-horizontal",firstFrameSpottedAt:null,stepTimeConstraints:{delayTime:null}},Dw(Nk.RIGHT,{customInstructions:r,customIcon:a,customDirectionIcon:o,customStepTimeConstraints:i})),jk({name:Nk.UP,instructions:{en:"Turn your face up",vi:"Ngước mặt chậm lên trên"},image:{blob:null,imageId:null,objUrl:null,blurScore:null,leftRightScore:null},frontalFaceImage:{blob:null,imageId:null,blurScore:null,leftRightScore:null},icon:Dk(n,"ic_face_up.svg"),directionIcon:Dk(n,"arrow_up.svg"),directionIconAnimation:"slide-vertical",firstFrameSpottedAt:null,stepTimeConstraints:{delayTime:null}},Dw(Nk.UP,{customInstructions:r,customIcon:a,customDirectionIcon:o,customStepTimeConstraints:i}))])),[jk({name:Nk.FRONTAL,instructions:{en:"Look straight into the camera",vi:"Nhìn thẳng camera"},image:{blob:null,imageId:null,objUrl:null,blurScore:null,leftRightScore:null},frontalFaceImage:{blob:null,imageId:null,blurScore:null,leftRightScore:null},icon:Dk(n,"ic_face_frontal.svg"),directionIcon:Dk(n,"frontal.svg"),directionIconAnimation:"blink",firstFrameSpottedAt:null,stepTimeConstraints:{delayTime:null}},Dw(Nk.FRONTAL,{customInstructions:r,customIcon:a,customDirectionIcon:o,customStepTimeConstraints:i}))])}},validatePredictions:function(e){return Bw.apply(this,arguments)},calculateFaceDirection:function(e){return Pw.apply(this,arguments)},faceTracker:function(){var e=[],t=[],n=[],r=[],a=[],o=0,i=0;function s(){i=o,n=Gk(e),r=Gk(t)}return function(u,c){var l=u.topLeft,d=u.bottomRight,f=u.landmarks,p=[],h=Hk(l,2);p[0]=h[0],p[1]=h[1];var m=Hk(d,2);p[2]=m[0],p[3]=m[1];var g=[],v=[];f.forEach((function(e,t){var n=Hk(e,2);g[t]=n[0],v[t]=n[1]})),o=Date.now();var y=p[2]-p[0];if(e=[].concat(g),t=[].concat(v),!n.length&&!r.length||c)return s(),{score:0,time:o};for(var b=0;b<6;b++)a[b]=Math.sqrt((e[b]-n[b])*(e[b]-n[b])+(t[b]-r[b])*(t[b]-r[b]));for(var x=0;x<6;x++)a[x]/=(o-i)*y;for(var k=0,w=0;w<6;w++)k+=a[w];return k/=6,s(),{score:k,time:o}}}}),Uw=document.createElement("canvas"),Vw=Uw.getContext("2d");Uw.width=128,Uw.height=128;var Ww=function(){var e=Vk(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.model,r=t.sCanvas,Vw.drawImage(r,0,0,Uw.width,Uw.height),e.abrupt("return",n.estimateFaces(Uw,!1,!1,!0));case 3:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),zw=Object.freeze({__proto__:null,SIZE:128,getModelPredictions:Ww}),jw=Object.getOwnPropertySymbols,Hw=Object.prototype.hasOwnProperty,Gw=Object.prototype.propertyIsEnumerable;function Kw(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var qw=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,a=Kw(e),o=1;o<arguments.length;o++){for(var i in n=Object(arguments[o]))Hw.call(n,i)&&(a[i]=n[i]);if(jw){r=jw(n);for(var s=0;s<r.length;s++)Gw.call(n,r[s])&&(a[r[s]]=n[r[s]])}}return a},Xw=arguments[3],Qw=arguments[4],Yw=arguments[5],$w=JSON.stringify,Zw=function(e,t){for(var n,r=Object.keys(Yw),a=0,o=r.length;a<o;a++){var i=r[a],s=Yw[i].exports;if(s===e||s&&s.default===e){n=i;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var u={};for(a=0,o=r.length;a<o;a++)u[i=r[a]]=i;Qw[n]=["function(require,module,exports){"+e+"(self); }",u]}var c=Math.floor(Math.pow(16,8)*Math.random()).toString(16),l={};l[n]=n,Qw[c]=["function(require,module,exports){var f = require("+$w(n)+");(f.default ? f.default : f)(self);}",l];var d={};!function e(t){for(var n in d[t]=!0,Qw[t][1]){var r=Qw[t][1][n];d[r]||e(r)}}(c);var f="("+Xw+")({"+Object.keys(d).map((function(e){return $w(e)+":["+Qw[e][0]+","+$w(Qw[e][1])+"]"})).join(",")+"},{},["+$w(c)+"])",p=window.URL||window.webkitURL||window.mozURL||window.msURL,h=new Blob([f],{type:"text/javascript"});if(t&&t.bare)return h;var m=p.createObjectURL(h),g=new Worker(m);return g.objectURL=m,g},Jw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function eI(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}function tI(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var nI,rI=eI((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}})),aI={js:!0,wasm:!0};function oI(e){if(!(this instanceof oI))return new oI(e);var t=qw({},aI,e||{});if(this.options=t,this.__cache={},this.__init_promise=null,this.__modules=t.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}oI.prototype.has_wasm=function(){if(void 0!==nI)return nI;if(nI=!1,"undefined"==typeof WebAssembly)return nI;try{var e=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),t=new WebAssembly.Module(e);return 0!==new WebAssembly.Instance(t,{}).exports.test(4)&&(nI=!0),nI}catch(e){}return nI},oI.prototype.use=function(e){return this.__modules[e.name]=e,this.options.wasm&&this.has_wasm()&&e.wasm_fn?this[e.name]=e.wasm_fn:this[e.name]=e.fn,this},oI.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error('mathlib: only "wasm" was enabled, but it\'s not supported'));var e=this;return this.__init_promise=Promise.all(Object.keys(e.__modules).map((function(t){var n=e.__modules[t];return e.options.wasm&&e.has_wasm()&&n.wasm_fn?e.__wasm[t]?null:WebAssembly.compile(e.__base64decode(n.wasm_src)).then((function(n){e.__wasm[t]=n})):null}))).then((function(){return e})),this.__init_promise},oI.prototype.__base64decode=function(e){for(var t=e.replace(/[\r\n=]/g,""),n=t.length,r=new Uint8Array(3*n>>2),a=0,o=0,i=0;i<n;i++)i%4==0&&i&&(r[o++]=a>>16&255,r[o++]=a>>8&255,r[o++]=255&a),a=a<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t.charAt(i));var s=n%4*6;return 0===s?(r[o++]=a>>16&255,r[o++]=a>>8&255,r[o++]=255&a):18===s?(r[o++]=a>>10&255,r[o++]=a>>2&255):12===s&&(r[o++]=a>>4&255),r},oI.prototype.__reallocate=function(e){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(e/65536)}),this.__memory;var t=this.__memory.buffer.byteLength;return t<e&&this.__memory.grow(Math.ceil((e-t)/65536)),this.__memory},oI.prototype.__instance=function(e,t,n){if(t&&this.__reallocate(t),!this.__wasm[e]){var r=this.__modules[e];this.__wasm[e]=new WebAssembly.Module(this.__base64decode(r.wasm_src))}if(!this.__cache[e]){var a={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[e]=new WebAssembly.Instance(this.__wasm[e],{env:qw(a,n||{})})}return this.__cache[e]},oI.prototype.__align=function(e,t){var n=e%(t=t||8);return e+(n?t-n:0)};var iI,sI,uI,cI,lI,dI,fI=oI;function pI(e,t,n,r,a,o){var i,s,u,c,l,d,f,p,h,m,g,v,y,b;for(h=0;h<o;h++){for(f=h,p=0,c=l=(i=e[d=h*a])*r[6],g=r[0],v=r[1],y=r[4],b=r[5],m=0;m<a;m++)u=(s=e[d])*g+i*v+c*y+l*b,l=c,c=u,i=s,n[p]=c,p++,d++;for(p--,f+=o*(a-1),c=l=(i=e[--d])*r[7],s=i,g=r[2],v=r[3],m=a-1;m>=0;m--)u=s*g+i*v+c*y+l*b,l=c,c=u,i=s,s=e[d],t[f]=n[p]+c,d--,p--,f-=o}}var hI=function(e,t,n,r){if(r){var a=new Uint16Array(e.length),o=new Float32Array(Math.max(t,n)),i=function(e){e<.5&&(e=.5);var t=Math.exp(.527076)/e,n=Math.exp(-t),r=Math.exp(-2*t),a=(1-n)*(1-n)/(1+2*t*n-r);return iI=a,sI=a*(t-1)*n,uI=a*(t+1)*n,cI=-a*r,lI=2*n,dI=-r,new Float32Array([iI,sI,uI,cI,lI,dI,(iI+sI)/(1-lI-dI),(uI+cI)/(1-lI-dI)])}(r);pI(e,a,o,i,t,n),pI(a,e,o,i,n,t)}},mI={name:"unsharp_mask",fn:function(e,t,n,r,a,o){var i,s,u,c,l,d,f,p,h,m,g,v,y;if(!(0===r||a<.5)){a>2&&(a=2);var b=function(e,t,n){for(var r,a,o,i,s,u=t*n,c=new Uint16Array(u),l=0;l<u;l++)r=e[4*l],a=e[4*l+1],o=e[4*l+2],s=r>=a&&r>=o?r:a>=o&&a>=r?a:o,i=r<=a&&r<=o?r:a<=o&&a<=r?a:o,c[l]=257*(s+i)>>1;return c}(e,t,n),x=new Uint16Array(b);hI(x,t,n,a);for(var k=r/100*4096+.5|0,w=257*o|0,I=t*n,C=0;C<I;C++)v=2*(b[C]-x[C]),Math.abs(v)>=w&&(i=e[y=4*C],s=e[y+1],u=e[y+2],d=257*((p=i>=s&&i>=u?i:s>=i&&s>=u?s:u)+(f=i<=s&&i<=u?i:s<=i&&s<=u?s:u))>>1,f===p?c=l=0:(l=d<=32767?4095*(p-f)/(p+f)|0:4095*(p-f)/(510-p-f)|0,c=i===p?65535*(s-u)/(6*(p-f))|0:s===p?21845+(65535*(u-i)/(6*(p-f))|0):43690+(65535*(i-s)/(6*(p-f))|0)),(d+=k*v+2048>>12)>65535?d=65535:d<0&&(d=0),0===l?i=s=u=d>>8:(h=2*d-(m=d<=32767?d*(4096+l)+2048>>12:d+((65535-d)*l+2048>>12))>>8,m>>=8,i=(g=c+21845&65535)>=43690?h:g>=32767?h+(6*(m-h)*(43690-g)+32768>>16):g>=10922?m:h+(6*(m-h)*g+32768>>16),s=(g=65535&c)>=43690?h:g>=32767?h+(6*(m-h)*(43690-g)+32768>>16):g>=10922?m:h+(6*(m-h)*g+32768>>16),u=(g=c-21845&65535)>=43690?h:g>=32767?h+(6*(m-h)*(43690-g)+32768>>16):g>=10922?m:h+(6*(m-h)*g+32768>>16)),e[y]=i,e[y+1]=s,e[y+2]=u)}},wasm_fn:function(e,t,n,r,a,o){if(!(0===r||a<.5)){a>2&&(a=2);var i=t*n,s=4*i,u=2*i,c=2*i,l=4*Math.max(t,n),d=s,f=d+u,p=f+c,h=p+c,m=h+l,g=this.__instance("unsharp_mask",s+u+2*c+l+32,{exp:Math.exp}),v=new Uint32Array(e.buffer);new Uint32Array(this.__memory.buffer).set(v);var y=g.exports.hsl_l16||g.exports._hsl_l16;y(0,d,t,n),(y=g.exports.blurMono16||g.exports._blurMono16)(d,f,p,h,m,t,n,a),(y=g.exports.unsharp||g.exports._unsharp)(0,0,d,f,t,n,r,o),v.set(new Uint32Array(this.__memory.buffer,0,i))}},wasm_src:"AGFzbQEAAAABMQZgAXwBfGACfX8AYAZ/f39/f38AYAh/f39/f39/fQBgBH9/f38AYAh/f39/f39/fwACGQIDZW52A2V4cAAAA2VudgZtZW1vcnkCAAEDBgUBAgMEBQQEAXAAAAdMBRZfX2J1aWxkX2dhdXNzaWFuX2NvZWZzAAEOX19nYXVzczE2X2xpbmUAAgpibHVyTW9ubzE2AAMHaHNsX2wxNgAEB3Vuc2hhcnAABQkBAAqJEAXZAQEGfAJAIAFE24a6Q4Ia+z8gALujIgOaEAAiBCAEoCIGtjgCECABIANEAAAAAAAAAMCiEAAiBbaMOAIUIAFEAAAAAAAA8D8gBKEiAiACoiAEIAMgA6CiRAAAAAAAAPA/oCAFoaMiArY4AgAgASAEIANEAAAAAAAA8L+gIAKioiIHtjgCBCABIAQgA0QAAAAAAADwP6AgAqKiIgO2OAIIIAEgBSACoiIEtow4AgwgASACIAegIAVEAAAAAAAA8D8gBqGgIgKjtjgCGCABIAMgBKEgAqO2OAIcCwu3AwMDfwR9CHwCQCADKgIUIQkgAyoCECEKIAMqAgwhCyADKgIIIQwCQCAEQX9qIgdBAEgiCA0AIAIgAC8BALgiDSADKgIYu6IiDiAJuyIQoiAOIAq7IhGiIA0gAyoCBLsiEqIgAyoCALsiEyANoqCgoCIPtjgCACACQQRqIQIgAEECaiEAIAdFDQAgBCEGA0AgAiAOIBCiIA8iDiARoiANIBKiIBMgAC8BALgiDaKgoKAiD7Y4AgAgAkEEaiECIABBAmohACAGQX9qIgZBAUoNAAsLAkAgCA0AIAEgByAFbEEBdGogAEF+ai8BACIIuCINIAu7IhGiIA0gDLsiEqKgIA0gAyoCHLuiIg4gCrsiE6KgIA4gCbsiFKKgIg8gAkF8aioCALugqzsBACAHRQ0AIAJBeGohAiAAQXxqIQBBACAFQQF0ayEHIAEgBSAEQQF0QXxqbGohBgNAIAghAyAALwEAIQggBiANIBGiIAO4Ig0gEqKgIA8iECAToqAgDiAUoqAiDyACKgIAu6CrOwEAIAYgB2ohBiAAQX5qIQAgAkF8aiECIBAhDiAEQX9qIgRBAUoNAAsLCwvfAgIDfwZ8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIgyaEAAiDSANoCIPtjgCECAEIAxEAAAAAAAAAMCiEAAiDraMOAIUIAREAAAAAAAA8D8gDaEiCyALoiANIAwgDKCiRAAAAAAAAPA/oCAOoaMiC7Y4AgAgBCANIAxEAAAAAAAA8L+gIAuioiIQtjgCBCAEIA0gDEQAAAAAAADwP6AgC6KiIgy2OAIIIAQgDiALoiINtow4AgwgBCALIBCgIA5EAAAAAAAA8D8gD6GgIgujtjgCGCAEIAwgDaEgC6O2OAIcIAYEQCAFQQF0IQogBiEJIAIhCANAIAAgCCADIAQgBSAGEAIgACAKaiEAIAhBAmohCCAJQX9qIgkNAAsLIAVFDQAgBkEBdCEIIAUhAANAIAIgASADIAQgBiAFEAIgAiAIaiECIAFBAmohASAAQX9qIgANAAsLC7wBAQV/IAMgAmwiAwRAQQAgA2shBgNAIAAoAgAiBEEIdiIHQf8BcSECAn8gBEH/AXEiAyAEQRB2IgRB/wFxIgVPBEAgAyIIIAMgAk8NARoLIAQgBCAHIAIgA0kbIAIgBUkbQf8BcQshCAJAIAMgAk0EQCADIAVNDQELIAQgByAEIAMgAk8bIAIgBUsbQf8BcSEDCyAAQQRqIQAgASADIAhqQYECbEEBdjsBACABQQJqIQEgBkEBaiIGDQALCwvTBgEKfwJAIAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6CqIQ0gBSAEbCILBEAgB0GBAmwhDgNAQQAgAi8BACADLwEAayIGQQF0IgdrIAcgBkEASBsgDk8EQCAAQQJqLQAAIQUCfyAALQAAIgYgAEEBai0AACIESSIJRQRAIAYiCCAGIAVPDQEaCyAFIAUgBCAEIAVJGyAGIARLGwshCAJ/IAYgBE0EQCAGIgogBiAFTQ0BGgsgBSAFIAQgBCAFSxsgCRsLIgogCGoiD0GBAmwiEEEBdiERQQAhDAJ/QQAiCSAIIApGDQAaIAggCmsiCUH/H2wgD0H+AyAIayAKayAQQYCABEkbbSEMIAYgCEYEQCAEIAVrQf//A2wgCUEGbG0MAQsgBSAGayAGIARrIAQgCEYiBhtB//8DbCAJQQZsbUHVqgFBqtUCIAYbagshCSARIAcgDWxBgBBqQQx1aiIGQQAgBkEAShsiBkH//wMgBkH//wNIGyEGAkACfwJAIAxB//8DcSIFBEAgBkH//wFKDQEgBUGAIGogBmxBgBBqQQx2DAILIAZBCHYiBiEFIAYhBAwCCyAFIAZB//8Dc2xBgBBqQQx2IAZqCyIFQQh2IQcgBkEBdCAFa0EIdiIGIQQCQCAJQdWqAWpB//8DcSIFQanVAksNACAFQf//AU8EQEGq1QIgBWsgByAGa2xBBmxBgIACakEQdiAGaiEEDAELIAchBCAFQanVAEsNACAFIAcgBmtsQQZsQYCAAmpBEHYgBmohBAsCfyAGIgUgCUH//wNxIghBqdUCSw0AGkGq1QIgCGsgByAGa2xBBmxBgIACakEQdiAGaiAIQf//AU8NABogByIFIAhBqdUASw0AGiAIIAcgBmtsQQZsQYCAAmpBEHYgBmoLIQUgCUGr1QJqQf//A3EiCEGp1QJLDQAgCEH//wFPBEBBqtUCIAhrIAcgBmtsQQZsQYCAAmpBEHYgBmohBgwBCyAIQanVAEsEQCAHIQYMAQsgCCAHIAZrbEEGbEGAgAJqQRB2IAZqIQYLIAEgBDoAACABQQFqIAU6AAAgAUECaiAGOgAACyADQQJqIQMgAkECaiECIABBBGohACABQQRqIQEgC0F/aiILDQALCwsL"},gI=[{win:.5,filter:function(e){return e>=-.5&&e<.5?1:0}},{win:1,filter:function(e){if(e<=-1||e>=1)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},{win:2,filter:function(e){if(e<=-2||e>=2)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},{win:3,filter:function(e){if(e<=-3||e>=3)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}}];function vI(e){return Math.round(16383*e)}var yI=function(e,t,n,r,a){var o,i,s,u,c,l,d,f,p,h,m,g,v,y,b,x,k,w=gI[e].filter,I=1/r,C=Math.min(1,r),E=gI[e].win/C,S=Math.floor(2*(E+1)),T=new Int16Array((S+2)*n),A=0,N=!T.subarray||!T.set;for(o=0;o<n;o++){for(i=(o+.5)*I+a,s=Math.max(0,Math.floor(i-E)),c=(u=Math.min(t-1,Math.ceil(i+E)))-s+1,l=new Float32Array(c),d=new Int16Array(c),f=0,p=s,h=0;p<=u;p++,h++)f+=m=w((p+.5-i)*C),l[h]=m;for(g=0,h=0;h<l.length;h++)g+=v=l[h]/f,d[h]=vI(v);for(d[n>>1]+=vI(1-g),y=0;y<d.length&&0===d[y];)y++;if(y<d.length){for(b=d.length-1;b>0&&0===d[b];)b--;if(x=s+y,k=b-y+1,T[A++]=x,T[A++]=k,N)for(h=y;h<=b;h++)T[A++]=d[h];else T.set(d.subarray(y,b+1),A),A+=k}else T[A++]=0,T[A++]=0}return T};function bI(e){return e<0?0:e>255?255:e}var xI=function(e,t,n,r,a,o){var i,s,u,c,l,d,f,p,h,m,g,v=0,y=0;for(h=0;h<r;h++){for(l=0,m=0;m<a;m++){for(d=o[l++],f=o[l++],p=v+4*d|0,i=s=u=c=0;f>0;f--)c=c+(g=o[l++])*e[p+3]|0,u=u+g*e[p+2]|0,s=s+g*e[p+1]|0,i=i+g*e[p]|0,p=p+4|0;t[y+3]=bI(c+8192>>14),t[y+2]=bI(u+8192>>14),t[y+1]=bI(s+8192>>14),t[y]=bI(i+8192>>14),y=y+4*r|0}y=4*(h+1)|0,v=(h+1)*n*4|0}},kI=function(e,t,n,r,a,o){var i,s,u,c,l,d,f,p,h,m,g,v=0,y=0;for(h=0;h<r;h++){for(l=0,m=0;m<a;m++){for(d=o[l++],f=o[l++],p=v+4*d|0,i=s=u=c=0;f>0;f--)c=c+(g=o[l++])*e[p+3]|0,u=u+g*e[p+2]|0,s=s+g*e[p+1]|0,i=i+g*e[p]|0,p=p+4|0;t[y+3]=bI(c+8192>>14),t[y+2]=bI(u+8192>>14),t[y+1]=bI(s+8192>>14),t[y]=bI(i+8192>>14),y=y+4*r|0}y=4*(h+1)|0,v=(h+1)*n*4|0}},wI=!0;try{wI=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(Rx){}function II(e,t,n){if(wI)t.set(function(e){return new Uint8Array(e.buffer,0,e.byteLength)}(e),n);else for(var r=n,a=0;a<e.length;a++){var o=e[a];t[r++]=255&o,t[r++]=o>>8&255}}var CI={name:"resize",fn:function(e){var t=e.src,n=e.width,r=e.height,a=e.toWidth,o=e.toHeight,i=e.scaleX||e.toWidth/e.width,s=e.scaleY||e.toHeight/e.height,u=e.offsetX||0,c=e.offsetY||0,l=e.dest||new Uint8Array(a*o*4),d=void 0===e.quality?3:e.quality,f=e.alpha||!1,p=yI(d,n,a,i,u),h=yI(d,r,o,s,c),m=new Uint8Array(a*r*4);return xI(t,m,n,r,a,p),kI(m,l,r,a,o,h),f||function(e,t,n){for(var r=3,a=t*n*4|0;r<a;)e[r]=255,r=r+4|0}(l,a,o),l},wasm_fn:function(e){var t=e.src,n=e.width,r=e.height,a=e.toWidth,o=e.toHeight,i=e.scaleX||e.toWidth/e.width,s=e.scaleY||e.toHeight/e.height,u=e.offsetX||0,c=e.offsetY||0,l=e.dest||new Uint8Array(a*o*4),d=void 0===e.quality?3:e.quality,f=e.alpha||!1,p=yI(d,n,a,i,u),h=yI(d,r,o,s,c),m=this.__align(0+Math.max(t.byteLength,l.byteLength)),g=this.__align(m+r*a*4),v=this.__align(g+p.byteLength),y=v+h.byteLength,b=this.__instance("resize",y),x=new Uint8Array(this.__memory.buffer),k=new Uint32Array(this.__memory.buffer),w=new Uint32Array(t.buffer);return k.set(w),II(p,x,g),II(h,x,v),(b.exports.convolveHV||b.exports._convolveHV)(g,v,m,n,r,a,o),new Uint32Array(l.buffer).set(new Uint32Array(this.__memory.buffer,0,o*a)),f||function(e,t,n){for(var r=3,a=t*n*4|0;r<a;)e[r]=255,r=r+4|0}(l,a,o),l},wasm_src:"AGFzbQEAAAABFAJgBn9/f39/fwBgB39/f39/f38AAg8BA2VudgZtZW1vcnkCAAEDAwIAAQQEAXAAAAcZAghjb252b2x2ZQAACmNvbnZvbHZlSFYAAQkBAArmAwLBAwEQfwJAIANFDQAgBEUNACAFQQRqIRVBACEMQQAhDQNAIA0hDkEAIRFBACEHA0AgB0ECaiESAn8gBSAHQQF0IgdqIgZBAmouAQAiEwRAQQAhCEEAIBNrIRQgFSAHaiEPIAAgDCAGLgEAakECdGohEEEAIQlBACEKQQAhCwNAIBAoAgAiB0EYdiAPLgEAIgZsIAtqIQsgB0H/AXEgBmwgCGohCCAHQRB2Qf8BcSAGbCAKaiEKIAdBCHZB/wFxIAZsIAlqIQkgD0ECaiEPIBBBBGohECAUQQFqIhQNAAsgEiATagwBC0EAIQtBACEKQQAhCUEAIQggEgshByABIA5BAnRqIApBgMAAakEOdSIGQf8BIAZB/wFIG0EQdEGAgPwHcUEAIAZBAEobIAtBgMAAakEOdSIGQf8BIAZB/wFIG0EYdEEAIAZBAEobciAJQYDAAGpBDnUiBkH/ASAGQf8BSBtBCHRBgP4DcUEAIAZBAEobciAIQYDAAGpBDnUiBkH/ASAGQf8BSBtB/wFxQQAgBkEAShtyNgIAIA4gA2ohDiARQQFqIhEgBEcNAAsgDCACaiEMIA1BAWoiDSADRw0ACwsLIQACQEEAIAIgAyAEIAUgABAAIAJBACAEIAUgBiABEAALCw=="};function EI(e){var t=e||[],n={js:t.indexOf("js")>=0,wasm:t.indexOf("wasm")>=0};fI.call(this,n),this.features={js:n.js,wasm:n.wasm&&this.has_wasm()},this.use(mI),this.use(CI)}rI(EI,fI),EI.prototype.resizeAndUnsharp=function(e,t){var n=this.resize(e,t);return e.unsharpAmount&&this.unsharp_mask(n,e.toWidth,e.toHeight,e.unsharpAmount,e.unsharpRadius,e.unsharpThreshold),n};var SI=EI;function TI(e,t){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=t||2e3}TI.prototype.acquire=function(){var e,t=this;return 0!==this.available.length?e=this.available.pop():((e=this.create()).id=this.lastId++,e.release=function(){return t.release(e)}),this.acquired[e.id]=e,e},TI.prototype.release=function(e){var t=this;delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout((function(){return t.gc()}),100))},TI.prototype.gc=function(){var e=this,t=Date.now();this.available=this.available.filter((function(n){return!(t-n.lastUsed>e.idle&&(n.destroy(),1))})),0!==this.available.length?this.timeoutId=setTimeout((function(){return e.gc()}),100):this.timeoutId=0};var AI=TI;function NI(e){return Object.prototype.toString.call(e)}var _I=function(e){var t=NI(e);return"[object HTMLCanvasElement]"===t||"[object OffscreenCanvas]"===t||"[object Canvas]"===t},RI=function(e){return"[object HTMLImageElement]"===NI(e)},OI=function(e){return"[object ImageBitmap]"===NI(e)},FI=function(e){var t=0,n=[];function r(){t<e&&n.length&&(t++,n.shift()())}return function(e){return new Promise((function(a,o){n.push((function(){e().then((function(e){a(e),t--,r()}),(function(e){o(e),t--,r()}))})),r()}))}},MI=function(e){switch(e){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},DI=function(e){return Promise.resolve().then((function(){if("undefined"==typeof createImageBitmap)return!1;var t=e(100,100);return createImageBitmap(t,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then((function(e){var n=10===e.width;return e.close(),t=null,n}))})).catch((function(){return!1}))},BI=function(){var e,t=SI;onmessage=function(n){var r=n.data.opts;e||(e=new t(n.data.features));var a=e.resizeAndUnsharp(r);postMessage({result:a},[a.buffer])}};function PI(e){var t=Math.round(e);return Math.abs(e-t)<1e-5?t:Math.floor(e)}function LI(e){var t=Math.round(e);return Math.abs(e-t)<1e-5?t:Math.ceil(e)}var UI={},VI=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(VI=navigator.userAgent.indexOf("Safari")>=0)}catch(Rx){}var WI=1;"undefined"!=typeof navigator&&(WI=Math.min(navigator.hardwareConcurrency||1,4));var zI,jI,HI={tile:1024,concurrency:WI,features:["js","wasm","ww"],idle:2e3,createCanvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}},GI={quality:3,alpha:!1,unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0};function KI(){return{value:Zw(BI),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;e&&e.revokeObjectURL&&this.value.objectURL&&e.revokeObjectURL(this.value.objectURL)}}}}function qI(e){if(!(this instanceof qI))return new qI(e);this.options=qw({},HI,e||{});var t="lk_".concat(this.options.concurrency);this.__limit=UI[t]||FI(this.options.concurrency),UI[t]||(UI[t]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}qI.prototype.init=function(){var e=this;if(this.__initPromise)return this.__initPromise;if(!1!==zI&&!0!==zI&&(zI=!1,"undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray))try{new ImageData(new Uint8ClampedArray(400),10,10),zI=!0}catch(t){}!1!==jI&&!0!==jI&&(jI=!1,"undefined"!=typeof ImageBitmap&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?jI=!0:this.debug("ImageBitmap does not support .close(), disabled")));var t=this.options.features.slice();if(t.indexOf("all")>=0&&(t=["cib","wasm","js","ww"]),this.__requested_features=t,this.__mathlib=new SI(t),t.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)try{Zw((function(){})).terminate(),this.features.ww=!0;var n="wp_".concat(JSON.stringify(this.options));UI[n]?this.__workersPool=UI[n]:(this.__workersPool=new AI(KI,this.options.idle),UI[n]=this.__workersPool)}catch(t){}var r,a=this.__mathlib.init().then((function(t){qw(e.features,t.features)}));return r=jI?DI(this.options.createCanvas).then((function(n){e.features.cib&&t.indexOf("cib")<0?e.debug("createImageBitmap() resize supported, but disabled by config"):t.indexOf("cib")>=0&&(e.features.cib=n)})):Promise.resolve(!1),this.__initPromise=Promise.all([a,r]).then((function(){return e})),this.__initPromise},qI.prototype.resize=function(e,t,n){var r=this;this.debug("Start resize...");var a=qw({},GI);if(isNaN(n)?n&&(a=qw(a,n)):a=qw(a,{quality:n}),a.toWidth=t.width,a.toHeight=t.height,a.width=e.naturalWidth||e.width,a.height=e.naturalHeight||e.height,0===t.width||0===t.height)return Promise.reject(new Error("Invalid output size: ".concat(t.width,"x").concat(t.height)));a.unsharpRadius>2&&(a.unsharpRadius=2);var o=!1,i=null;a.cancelToken&&(i=a.cancelToken.then((function(e){throw o=!0,e}),(function(e){throw o=!0,e})));var s=Math.ceil(Math.max(3,2.5*a.unsharpRadius|0));return this.init().then((function(){if(o)return i;if(r.features.cib){var n=t.getContext("2d",{alpha:Boolean(a.alpha)});return r.debug("Resize via createImageBitmap()"),createImageBitmap(e,{resizeWidth:a.toWidth,resizeHeight:a.toHeight,resizeQuality:MI(a.quality)}).then((function(e){if(o)return i;if(!a.unsharpAmount)return n.drawImage(e,0,0),e.close(),n=null,r.debug("Finished!"),t;r.debug("Unsharp result");var s=r.options.createCanvas(a.toWidth,a.toHeight),u=s.getContext("2d",{alpha:Boolean(a.alpha)});u.drawImage(e,0,0),e.close();var c=u.getImageData(0,0,a.toWidth,a.toHeight);return r.__mathlib.unsharp_mask(c.data,a.toWidth,a.toHeight,a.unsharpAmount,a.unsharpRadius,a.unsharpThreshold),n.putImageData(c,0,0),s.width=s.height=0,c=u=s=n=null,r.debug("Finished!"),t}))}var u={},c=function(e){return Promise.resolve().then((function(){return r.features.ww?new Promise((function(t,n){var a=r.__workersPool.acquire();i&&i.catch((function(e){return n(e)})),a.value.onmessage=function(e){a.release(),e.data.err?n(e.data.err):t(e.data.result)},a.value.postMessage({opts:e,features:r.__requested_features,preload:{wasm_nodule:r.__mathlib.__}},[e.src.buffer])})):r.__mathlib.resizeAndUnsharp(e,u)}))},l=function(e,t,n){var a,u,l,d=!1,f=function(t){return r.__limit((function(){if(o)return i;var s;if(_I(e))r.debug("Get tile pixel data"),s=a.getImageData(t.x,t.y,t.width,t.height);else{r.debug("Draw tile imageBitmap/image to temporary canvas");var d=r.options.createCanvas(t.width,t.height),f=d.getContext("2d",{alpha:Boolean(n.alpha)});f.globalCompositeOperation="copy",f.drawImage(u||e,t.x,t.y,t.width,t.height,0,0,t.width,t.height),r.debug("Get tile pixel data"),s=f.getImageData(0,0,t.width,t.height),d.width=d.height=0,f=d=null}var p={src:s.data,width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};return r.debug("Invoke resize math"),Promise.resolve().then((function(){return c(p)})).then((function(e){if(o)return i;var n;if(s=null,r.debug("Convert raw rgba tile result to ImageData"),zI)n=new ImageData(new Uint8ClampedArray(e),t.toWidth,t.toHeight);else if((n=l.createImageData(t.toWidth,t.toHeight)).data.set)n.data.set(e);else for(var a=n.data.length-1;a>=0;a--)n.data[a]=e[a];return r.debug("Draw tile"),VI?l.putImageData(n,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth+1e-5,t.toInnerHeight+1e-5):l.putImageData(n,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),null}))}))};return Promise.resolve().then((function(){if(l=t.getContext("2d",{alpha:Boolean(n.alpha)}),_I(e))return a=e.getContext("2d",{alpha:Boolean(n.alpha)}),null;if(OI(e))return u=e,d=!0,null;if(RI(e))return jI?(r.debug("Decode image via createImageBitmap"),createImageBitmap(e).then((function(e){u=e})).catch((function(e){return null}))):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')})).then((function(){if(o)return i;r.debug("Calculate tiles");var e=function(e){var t,n,r,a,o,i,s=e.toWidth/e.width,u=e.toHeight/e.height,c=PI(e.srcTileSize*s)-2*e.destTileBorder,l=PI(e.srcTileSize*u)-2*e.destTileBorder;if(c<1||l<1)throw new Error("Internal error in pica: target tile width/height is too small.");var d,f=[];for(a=0;a<e.toHeight;a+=l)for(r=0;r<e.toWidth;r+=c)(t=r-e.destTileBorder)<0&&(t=0),t+(o=r+c+e.destTileBorder-t)>=e.toWidth&&(o=e.toWidth-t),(n=a-e.destTileBorder)<0&&(n=0),n+(i=a+l+e.destTileBorder-n)>=e.toHeight&&(i=e.toHeight-n),d={toX:t,toY:n,toWidth:o,toHeight:i,toInnerX:r,toInnerY:a,toInnerWidth:c,toInnerHeight:l,offsetX:t/s-PI(t/s),offsetY:n/u-PI(n/u),scaleX:s,scaleY:u,x:PI(t/s),y:PI(n/u),width:LI(o/s),height:LI(i/u)},f.push(d);return f}({width:n.width,height:n.height,srcTileSize:r.options.tile,toWidth:n.toWidth,toHeight:n.toHeight,destTileBorder:s}).map((function(e){return f(e)}));function a(){u&&(d||u.close(),u=null)}return r.debug("Process tiles"),Promise.all(e).then((function(){return r.debug("Finished!"),a(),t}),(function(e){throw a(),e}))}))};return function e(t,n,a,s){if(o)return i;var u,c=qy(t.shift(),2),d=c[0],f=c[1],p=0===t.length;return s=qw({},s,{toWidth:d,toHeight:f,quality:p?s.quality:Math.min(1,s.quality)}),p||(u=r.options.createCanvas(d,f)),l(n,p?a:u,s).then((function(){return p?a:(s.width=d,s.height=f,e(t,u,a,s))})).then((function(e){return u&&(u.width=u.height=0),e}))}(function(e,t,n,r,a,o){var i=n/e,s=r/t,u=(2*o+2+1)/a;if(u>.5)return[[n,r]];var c=Math.ceil(Math.log(Math.min(i,s))/Math.log(u));if(c<=1)return[[n,r]];for(var l=[],d=0;d<c;d++){var f=Math.round(Math.pow(Math.pow(e,c-d-1)*Math.pow(n,d+1),1/c)),p=Math.round(Math.pow(Math.pow(t,c-d-1)*Math.pow(r,d+1),1/c));l.push([f,p])}return l}(a.width,a.height,a.toWidth,a.toHeight,r.options.tile,s),e,t,a)}))},qI.prototype.resizeBuffer=function(e){var t=this,n=qw({},GI,e);return this.init().then((function(){return t.__mathlib.resizeAndUnsharp(n)}))},qI.prototype.toBlob=function(e,t,n){return t=t||"image/png",new Promise((function(r){if(e.toBlob)e.toBlob((function(e){return r(e)}),t,n);else if(e.convertToBlob)r(e.convertToBlob({type:t,quality:n}));else{for(var a=atob(e.toDataURL(t,n).split(",")[1]),o=a.length,i=new Uint8Array(o),s=0;s<o;s++)i[s]=a.charCodeAt(s);r(new Blob([i],{type:t}))}}))},qI.prototype.debug=function(){};var XI=new qI,QI=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.minSize,a=void 0===r?720:r,o=e/t;return e>t?{desW:Math.floor(a*o),desH:a}:{desW:a,desH:Math.floor(a/o)}},YI=Object.freeze({__proto__:null,scaleImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minSize,r=void 0===n?720:n;return new Promise((function(t){var n=URL.createObjectURL(e),a=new Image;a.src=n;var o=document.createElement("canvas");a.onload=function(){if(a.width&&a.height&&(a.width<r||a.height<r)){var e=QI(a.width,a.height,{minSize:r}),n=e.desW,i=e.desH;o.width=n,o.height=i,XI.resize(a,o).then((function(e){return XI.toBlob(e,"image/jpeg",1)})).then((function(e){return t(e)}))}else t(null)}}))},createResizer:function(e){var t=e.width,n=e.height,r=document.createElement("canvas"),a=r.getContext("2d");return r.width=t,r.height=n,{resize:function(e){var t=e.srcCanvas;return a.drawImage(t,0,0,r.width,r.height),r}}}});function $I(e,t,n){return function(e,t,n){for(var r=0,a=n[1],o=n[3],i=n[0],s=n[2],u=a;u<o;u++)for(var c=i;c<s;c++){var l=mw(e,t,u,c),d=l.r,f=l.g,p=l.b;d>=245&&p>=245&&f>245&&(r+=1)}return r}(e,t,function(e,t){var n=Math.floor(.025*e),r=e-n,a=Math.floor(.025*t);return[n,a,r,t-a]}(t,n))/(t*n)>=.001}function ZI(){return(ZI=Vk(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getContext("2d"),r=n.getImageData(0,0,t.width,t.height),a=r.data,dw){e.next=5;break}return e.abrupt("return",$I(a,r.width,r.height));case 5:return e.abrupt("return",dw.detectGlare(a,r.width,r.height));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var JI=Object.freeze({__proto__:null,isCardGlare:function(e){return ZI.apply(this,arguments)}}),eC=eI((function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){e.exports={BROWSER_TYPES:{CHROME:"Chrome",FIREFOX:"Firefox",OPERA:"Opera",YANDEX:"Yandex",SAFARI:"Safari",INTERNET_EXPLORER:"Internet Explorer",EDGE:"Edge",CHROMIUM:"Chromium",IE:"IE",MOBILE_SAFARI:"Mobile Safari",EDGE_CHROMIUM:"Edge Chromium"},DEVICE_TYPES:{MOBILE:"mobile",TABLET:"tablet",SMART_TV:"smarttv",CONSOLE:"console",WEARABLE:"wearable",BROWSER:void 0},OS_TYPES:{IOS:"iOS",ANDROID:"Android",WINDOWS_PHONE:"Windows Phone",WINDOWS:"Windows",MAC_OS:"Mac OS"},defaultData:{isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1}}},function(e,t,n){var r,a=n(2),o=n(0),i=o.BROWSER_TYPES,s=o.OS_TYPES,u=o.DEVICE_TYPES,c=n(4),l=c.checkType,d=c.broPayload,f=c.mobilePayload,p=c.wearPayload,h=c.consolePayload,m=c.stvPayload,g=c.getNavigatorInstance,v=c.isIOS13Check,y=new a,b=y.getBrowser(),x=y.getDevice(),k=y.getEngine(),w=y.getOS(),I=y.getUA(),C=i.CHROME,E=i.CHROMIUM,S=i.IE,T=i.INTERNET_EXPLORER,A=i.OPERA,N=i.FIREFOX,_=i.SAFARI,R=i.EDGE,O=i.YANDEX,F=i.MOBILE_SAFARI,M=u.MOBILE,D=u.TABLET,B=u.SMART_TV,P=u.BROWSER,L=u.WEARABLE,U=u.CONSOLE,V=s.ANDROID,W=s.WINDOWS_PHONE,z=s.IOS,j=s.WINDOWS,H=s.MAC_OS,G=function(){return w.name===s.WINDOWS&&"10"===w.version&&"string"==typeof I&&-1!==I.indexOf("Edg/")},K=function(){return b.name===R},q=function(){return v("iPad")},X=x.type===B,Q=x.type===U,Y=x.type===L,$=b.name===F||q(),Z=b.name===E,J=function(){switch(x.type){case M:case D:return!0;default:return!1}}()||q(),ee=x.type===M,te=x.type===D||q(),ne=x.type===P,re=w.name===V,ae=w.name===W,oe=w.name===z||q(),ie=b.name===C,se=b.name===N,ue=b.name===_||b.name===F,ce=b.name===A,le=b.name===T||b.name===S,de=w.version?w.version:"none",fe=w.name?w.name:"none",pe=b.major,he=b.version,me=b.name,ge=x.vendor?x.vendor:"none",ve=x.model?x.model:"none",ye=k.name,be=k.version,xe=I,ke=K()||G(),we=b.name===O,Ie=x.type,Ce=(r=g())&&(/iPad|iPhone|iPod/.test(r.platform)||"MacIntel"===r.platform&&r.maxTouchPoints>1)&&!window.MSStream,Ee=q(),Se=v("iPhone"),Te=v("iPod"),Ae=function(){var e=g(),t=e&&e.userAgent.toLowerCase();return"string"==typeof t&&/electron/.test(t)}(),Ne=G(),_e=K(),Re=w.name===j,Oe=w.name===H,Fe=l(x.type);e.exports={deviceDetect:function(){var e=Fe.isBrowser,t=Fe.isMobile,n=Fe.isTablet,r=Fe.isSmartTV,a=Fe.isConsole,o=Fe.isWearable;return e?d(e,b,k,w,I):r?m(r,k,w,I):a?h(a,k,w,I):t||n?f(Fe,x,w,I):o?p(o,k,w,I):void 0},isSmartTV:X,isConsole:Q,isWearable:Y,isMobileSafari:$,isChromium:Z,isMobile:J,isMobileOnly:ee,isTablet:te,isBrowser:ne,isAndroid:re,isWinPhone:ae,isIOS:oe,isChrome:ie,isFirefox:se,isSafari:ue,isOpera:ce,isIE:le,osVersion:de,osName:fe,fullBrowserVersion:pe,browserVersion:he,browserName:me,mobileVendor:ge,mobileModel:ve,engineName:ye,engineVersion:be,getUA:xe,isEdge:ke,isYandex:we,deviceType:Ie,isIOS13:Ce,isIPad13:Ee,isIPhone13:Se,isIPod13:Te,isElectron:Ae,isEdgeChromium:Ne,isLegacyEdge:_e,isWindows:Re,isMacOs:Oe}},function(e,t,n){var r;
/*!
	     * UAParser.js v0.7.18
	     * Lightweight JavaScript-based User-Agent string parser
	     * https://github.com/faisalman/ua-parser-js
	     *
	     * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
	     * Dual licensed under GPLv2 or MIT
	     */!function(a,o){var i="function",s="undefined",u="object",c="model",l="name",d="type",f="vendor",p="version",h="architecture",m="console",g="mobile",v="tablet",y="smarttv",b="wearable",x={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},k={rgx:function(e,t){for(var n,r,a,s,c,l,d=0;d<t.length&&!c;){var f=t[d],p=t[d+1];for(n=r=0;n<f.length&&!c;)if(c=f[n++].exec(e))for(a=0;a<p.length;a++)l=c[++r],Ty(s=p[a])===u&&s.length>0?2==s.length?Ty(s[1])==i?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3==s.length?Ty(s[1])!==i||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):o:this[s[0]]=l?s[1].call(this,l,s[2]):o:4==s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):o):this[s]=l||o;d+=2}},str:function(e,t){for(var n in t)if(Ty(t[n])===u&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(x.has(t[n][r],e))return"?"===n?o:n}else if(x.has(t[n],e))return"?"===n?o:n;return e}},w={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},I={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[l,p],[/(opios)[\/\s]+([\w\.]+)/i],[[l,"Opera Mini"],p],[/\s(opr)\/([\w\.]+)/i],[[l,"Opera"],p],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[l,p],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[l,"IE"],p],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[l,"Edge"],p],[/(yabrowser)\/([\w\.]+)/i],[[l,"Yandex"],p],[/(puffin)\/([\w\.]+)/i],[[l,"Puffin"],p],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[l,"UCBrowser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],p],[/(micromessenger)\/([\w\.]+)/i],[[l,"WeChat"],p],[/(qqbrowserlite)\/([\w\.]+)/i],[l,p],[/(QQ)\/([\d\.]+)/i],[l,p],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[l,p],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[l,p],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[l,p],[/(MetaSr)[\/\s]?([\w\.]+)/i],[l],[/(LBBROWSER)/i],[l],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[p,[l,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[p,[l,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[l,/(.+)/,"$1 WebView"],p],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[l,/(.+(?:g|us))(.+)/,"$1 $2"],p],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[p,[l,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[l,p],[/(dolfin)\/([\w\.]+)/i],[[l,"Dolphin"],p],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[l,"Chrome"],p],[/(coast)\/([\w\.]+)/i],[[l,"Opera Coast"],p],[/fxios\/([\w\.-]+)/i],[p,[l,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[p,l],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[l,"GSA"],p],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[l,[p,k.str,w.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[l,"Netscape"],p],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[l,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,x.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[h,/ower/,"",x.lowerize]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[h,x.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[c,f,[d,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[c,[f,"Apple"],[d,v]],[/(apple\s{0,1}tv)/i],[[c,"Apple TV"],[f,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[f,c,[d,v]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[c,[f,"Amazon"],[d,v]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[c,k.str,w.device.amazon.model],[f,"Amazon"],[d,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[c,f,[d,g]],[/\((ip[honed|\s\w*]+);/i],[c,[f,"Apple"],[d,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[f,c,[d,g]],[/\(bb10;\s(\w+)/i],[c,[f,"BlackBerry"],[d,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[c,[f,"Asus"],[d,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[f,"Sony"],[c,"Xperia Tablet"],[d,v]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[c,[f,"Sony"],[d,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[f,c,[d,m]],[/android.+;\s(shield)\sbuild/i],[c,[f,"Nvidia"],[d,m]],[/(playstation\s[34portablevi]+)/i],[c,[f,"Sony"],[d,m]],[/(sprint\s(\w+))/i],[[f,k.str,w.device.sprint.vendor],[c,k.str,w.device.sprint.model],[d,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[f,c,[d,v]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[f,[c,/_/g," "],[d,g]],[/(nexus\s9)/i],[c,[f,"HTC"],[d,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[c,[f,"Huawei"],[d,g]],[/(microsoft);\s(lumia[\s\w]+)/i],[f,c,[d,g]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[c,[f,"Microsoft"],[d,m]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[f,"Microsoft"],[d,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[c,[f,"Motorola"],[d,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[c,[f,"Motorola"],[d,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[f,x.trim],[c,x.trim],[d,y]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[f,"Samsung"],[d,y]],[/\(dtv[\);].+(aquos)/i],[c,[f,"Sharp"],[d,y]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[f,"Samsung"],c,[d,v]],[/smart-tv.+(samsung)/i],[f,[d,y],c],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[f,"Samsung"],c,[d,g]],[/sie-(\w*)/i],[c,[f,"Siemens"],[d,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[f,"Nokia"],c,[d,g]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[c,[f,"Acer"],[d,v]],[/android.+([vl]k\-?\d{3})\s+build/i],[c,[f,"LG"],[d,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[f,"LG"],c,[d,v]],[/(lg) netcast\.tv/i],[f,c,[d,y]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[c,[f,"LG"],[d,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[c,[f,"Lenovo"],[d,v]],[/linux;.+((jolla));/i],[f,c,[d,g]],[/((pebble))app\/[\d\.]+\s/i],[f,c,[d,b]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[f,c,[d,g]],[/crkey/i],[[c,"Chromecast"],[f,"Google"]],[/android.+;\s(glass)\s\d/i],[c,[f,"Google"],[d,b]],[/android.+;\s(pixel c)\s/i],[c,[f,"Google"],[d,v]],[/android.+;\s(pixel xl|pixel)\s/i],[c,[f,"Google"],[d,g]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[c,/_/g," "],[f,"Xiaomi"],[d,g]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[c,/_/g," "],[f,"Xiaomi"],[d,v]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[c,[f,"Meizu"],[d,v]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[c,[f,"OnePlus"],[d,g]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[c,[f,"RCA"],[d,v]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[c,[f,"Dell"],[d,v]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[c,[f,"Verizon"],[d,v]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[f,"Barnes & Noble"],c,[d,v]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[c,[f,"NuVision"],[d,v]],[/android.+;\s(k88)\sbuild/i],[c,[f,"ZTE"],[d,v]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[c,[f,"Swiss"],[d,g]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[c,[f,"Swiss"],[d,v]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[c,[f,"Zeki"],[d,v]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[f,"Dragon Touch"],c,[d,v]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[c,[f,"Insignia"],[d,v]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[c,[f,"NextBook"],[d,v]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[f,"Voice"],c,[d,g]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[f,"LvTel"],c,[d,g]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[c,[f,"Envizen"],[d,v]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[f,c,[d,v]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[c,[f,"MachSpeed"],[d,v]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[f,c,[d,v]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[c,[f,"Rotor"],[d,v]],[/android.+(KS(.+))\s+build/i],[c,[f,"Amazon"],[d,v]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[f,c,[d,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[d,x.lowerize],f,c],[/(android[\w\.\s\-]{0,9});.+build/i],[c,[f,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[l,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,p],[/rv\:([\w\.]{1,9}).+(gecko)/i],[p,l]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[l,[p,k.str,w.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[p,k.str,w.os.windows.version]],[/\((bb)(10);/i],[[l,"BlackBerry"],p],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[l,p],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[l,"Symbian"],p],[/\((series40);/i],[l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"],p],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[l,p],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],p],[/(sunos)\s?([\w\.\d]*)/i],[[l,"Solaris"],p],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[l,p],[/(haiku)\s(\w+)/i],[l,p],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[p,/_/g,"."],[l,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[l,"Mac OS"],[p,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[l,p]]},C=function e(t,n){if("object"==Ty(t)&&(n=t,t=o),!(this instanceof e))return new e(t,n).getResult();var r=t||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),i=n?x.extend(I,n):I;return this.getBrowser=function(){var e={name:o,version:o};return k.rgx.call(e,r,i.browser),e.major=x.major(e.version),e},this.getCPU=function(){var e={architecture:o};return k.rgx.call(e,r,i.cpu),e},this.getDevice=function(){var e={vendor:o,model:o,type:o};return k.rgx.call(e,r,i.device),e},this.getEngine=function(){var e={name:o,version:o};return k.rgx.call(e,r,i.engine),e},this.getOS=function(){var e={name:o,version:o};return k.rgx.call(e,r,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};C.VERSION="0.7.18",C.BROWSER={NAME:l,MAJOR:"major",VERSION:p},C.CPU={ARCHITECTURE:h},C.DEVICE={MODEL:c,VENDOR:f,TYPE:d,CONSOLE:m,MOBILE:g,SMARTTV:y,TABLET:v,WEARABLE:b,EMBEDDED:"embedded"},C.ENGINE={NAME:l,VERSION:p},C.OS={NAME:l,VERSION:p},Ty(t)!==s?(Ty(e)!==s&&e.exports&&(t=e.exports=C),t.UAParser=C):n(3)?(r=function(){return C}.call(t,n,t,e))===o||(e.exports=r):a&&(a.UAParser=C);var E=a&&(a.jQuery||a.Zepto);if(Ty(E)!==s){var S=new C;E.ua=S.getResult(),E.ua.get=function(){return S.getUA()},E.ua.set=function(e){S.setUA(e);var t=S.getResult();for(var n in t)E.ua[n]=t[n]}}}("object"==("undefined"==typeof window?"undefined":Ty(window))?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),o=a.DEVICE_TYPES,i=a.defaultData,s=t.getNavigatorInstance=function(){return!("undefined"==typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},u=t.isIOS13Check=function(e){var t=s();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)};e.exports={checkType:function(e){switch(e){case o.MOBILE:return{isMobile:!0};case o.TABLET:return{isTablet:!0};case o.SMART_TV:return{isSmartTV:!0};case o.CONSOLE:return{isConsole:!0};case o.WEARABLE:return{isWearable:!0};case o.BROWSER:return{isBrowser:!0};default:return i}},broPayload:function(e,t,n,r,a){return{isBrowser:e,browserMajorVersion:t.major,browserFullVersion:t.version,browserName:t.name,engineName:n.name||!1,engineVersion:n.version,osName:r.name,osVersion:r.version,userAgent:a}},mobilePayload:function(e,t,n,a){return r({},e,{vendor:t.vendor,model:t.model,os:n.name,osVersion:n.version,ua:a})},stvPayload:function(e,t,n,r){return{isSmartTV:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},consolePayload:function(e,t,n,r){return{isConsole:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},wearPayload:function(e,t,n,r){return{isWearable:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},getNavigatorInstance:s,isIOS13Check:u}}])})),tC=Object.freeze({__proto__:null,getUAMetadata:function(){return{"X-TV-Device-Model":"".concat(eC.browserName," ").concat(eC.browserVersion),"X-TV-OS-Version":"".concat(eC.osName," ").concat(eC.osVersion),"X-TV-OS-Platform":eC.isMobile?"".concat(eC.osName.toLowerCase(),"_web"):"web"}}}),nC=Object.freeze({__proto__:null,loadExternalScript:function(e){var t=e.url;return new Promise((function(e){var n=document.createElement("script");n.onload=e,n.src=t,document.head.appendChild(n)}))}}),rC=function(){function e(t,n){_y(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return Oy(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),aC=function(){function e(){_y(this,e)}return Oy(e,[{key:"refCount",value:function(e){return oC("refCount")}},{key:"incRef",value:function(e){return oC("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return oC("time")}},{key:"read",value:function(e){return oC("read")}},{key:"readSync",value:function(e){return oC("readSync")}},{key:"numDataIds",value:function(){return oC("numDataIds")}},{key:"disposeData",value:function(e,t){return oC("disposeData")}},{key:"write",value:function(e,t,n){return oC("write")}},{key:"move",value:function(e,t,n,r,a){return oC("move")}},{key:"memory",value:function(){return oC("memory")}},{key:"floatPrecision",value:function(){return oC("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return oC("dispose")}}]),e}();function oC(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen"))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function iC(e,t,n){return Math.max(e,Math.min(t,n))}function sC(e){return e%2==0?e:e+1}function uC(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function cC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";uC(fC(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function lC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||IC(e)&&!n)for(var r=0;r<e.length;++r)lC(e[r],t,n);else t.push(e);return t}function dC(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function fC(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function pC(e){return e%1==0}function hC(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function mC(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function gC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var o=0;!function i(){if(e())r();else{o++;var s=t(o);null!=n&&o>=n?a():setTimeout(i,s)}}()}))}function vC(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when there are 0 elements"));if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got ".concat(t," / ").concat(n));var o=e.slice();return o[r]=t/n,o}function yC(e,t){var n=t.length;return uC((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but got axis ").concat(e)})),uC(e.every((function(e){return pC(e)})),(function(){return"All values in axis param must be integers but got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function bC(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:yC(t,e).sort(),i=0,s=0;s<e.length;++s){if(null!=o){if(o[i]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==o[i]||o[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function xC(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function kC(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function wC(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function IC(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function CC(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function EC(e){return"string"==typeof e||e instanceof String}function SC(e){return Array.isArray(e)?SC(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":"number"==typeof e?"float32":EC(e)?"string":function(e){return"boolean"==typeof e}(e)?"bool":"float32"}function TC(e){return!!(e&&e.constructor&&e.call&&e.apply)}function AC(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function NC(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function _C(e,t,n){var r=new Array;if(1===t.length)for(var a=t[0],o=0;o<a;o++)r[o]=n[e+o];else for(var i=t[0],s=t.slice(1),u=s.reduce((function(e,t){return e*t})),c=0;c<i;c++)r[c]=_C(e+c*u,s,n);return r}function RC(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length,"."));return _C(0,e,t)}function OC(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function FC(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return RC(e,new Float32Array(n));if("int32"===t)return RC(e,new Int32Array(n));if("bool"===t)return RC(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function MC(e){e.forEach((function(t){uC(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape [".concat(e,"].")}))}))}function DC(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function BC(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function PC(e){return e&&e.then&&"function"==typeof e.then}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var LC=function(){function e(t){_y(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}var t;return Oy(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&console.warn("Platform ".concat(this.platformName," has already been set. Overwriting the platform with ").concat(t,".")),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:(t=Ny(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t in this.flags,e.t0){e.next=5;break}return e.next=4,this.evaluateFlag(t);case 4:this.flags[t]=e.sent;case 5:return e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(PC(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. Please use getAsync() instead."));return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t=function(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}(this.global.location.search);"tfjsflags"in t&&t.tfjsflags.split(",").forEach((function(t){var n=qy(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}},{key:"features",get:function(){return this.flags}}]),e}();function UC(){return WC}var VC,WC=null;function zC(){if(null==VC){var e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof global)e=global;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}VC=e}return VC}function jC(e,t){var n=function(){var e=zC();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var HC=jC("kernelRegistry",(function(){return new Map})),GC=jC("gradRegistry",(function(){return new Map}));function KC(e,t){var n=YC(e,t);return HC.get(n)}function qC(e){return GC.get(e)}function XC(e){for(var t=HC.entries(),n=[];;){var r=t.next(),a=r.done,o=r.value;if(a)break;var i=qy(o,2),s=i[0],u=i[1];qy(s.split("_"),1)[0]===e&&n.push(u)}return n}function QC(e){var t=e.kernelName,n=e.backendName,r=YC(t,n);HC.has(r)&&console.warn("The kernel '".concat(t,"' for backend '").concat(n,"' is already registered")),HC.set(r,e)}function YC(e,t){return"".concat(t,"_").concat(e)}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function $C(e,t){return"string"===t?eE(e):ZC([e],t)}function ZC(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=lC(e)),UC().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function JC(){return UC().platform.now()}function eE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",UC().platform.encode(e,t)}function tE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",UC().platform.decode(e,t)
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var nE=function(){function e(t,n){_y(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new aE)}return Oy(e,[{key:"profileKernel",value:function(e,t,n){var r,a,o=function(){r=n()},i=JC();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();var s,u=rb(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(e){u.e(e)}finally{u.f()}a=Promise.resolve({kernelMs:JC()-i})}if(UC().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(t){var n=r[t];n.data().then((function(t){rE(t,n.dtype,e)}))},l=0;l<r.length;l++)c(l);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,o=e.inputs,i=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,i]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],o,r[2])}))}))}}]),e}();function rE(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}return!1}var aE=function(){function e(){_y(this,e)}return Oy(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,o){var i="number"==typeof r?mC("".concat(r,"ms"),9):r.error,s=mC(e,25),u=t.rank,c=t.size,l=mC(t.shape.toString(),14),d="";for(var f in a){var p=a[f];if(null!=p){var h=p.shape||t.shape,m=h.length;d+="".concat(f,": ").concat(m,"D ").concat(m>0?h:""," ")}}console.log("%c".concat(s,"\t%c").concat(i,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function oE(e,t,n,r){var a=NC(t),o=function(e,t,n,r){var a=dC(t),o=r[r.length-1],i=new Array(o).fill(0),s=t.length,u="complex64"===n?cE(e):e;if(s>1)for(var c=0;c<a/o;c++)for(var l=c*o,d=0;d<o;d++)i[d]=Math.max(i[d],iE(u[l+d],0,n).length);return i}(e,t,n,a),i=t.length,s=uE(e,t,n,a,o),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(i)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function iE(e,t,n){return mC(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ").concat(parseFloat(e[1].toFixed(7)),"j"):EC(e)?"'".concat(e,"'"):"bool"===n?sE(e):parseFloat(e.toFixed(7)).toString(),t)}function sE(e){return 0===e?"false":"true"}function uE(e,t,n,r,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i="complex64"===n?2:1,s=t[0],u=t.length;if(0===u)return"complex64"===n?[iE(cE(e)[0],0,n)]:"bool"===n?[sE(e[0])]:[e[0].toString()];if(1===u){if(s>20){var c=3*i,l=Array.from(e.slice(0,c)),d=Array.from(e.slice((s-3)*i,s*i));return"complex64"===n&&(l=cE(l),d=cE(d)),["["+l.map((function(e,t){return iE(e,a[t],n)})).join(", ")+", ..., "+d.map((function(e,t){return iE(e,a[s-3+t],n)})).join(", ")+"]"]}return["["+("complex64"===n?cE(e):Array.from(e)).map((function(e,t){return iE(e,a[t],n)})).join(", ")+"]"]}var f=t.slice(1),p=r.slice(1),h=r[0]*i,m=[];if(s>20){for(var g=0;g<3;g++){var v=g*h,y=v+h;m.push.apply(m,Xy(uE(e.slice(v,y),f,n,p,a,!1)))}m.push("...");for(var b=s-3;b<s;b++){var x=b*h,k=x+h;m.push.apply(m,Xy(uE(e.slice(x,k),f,n,p,a,b===s-1)))}}else for(var w=0;w<s;w++){var I=w*h,C=I+h;m.push.apply(m,Xy(uE(e.slice(I,C),f,n,p,a,w===s-1)))}var E=2===u?",":"";m[0]="["+m[0]+E;for(var S=1;S<m.length-1;S++)m[S]=" "+m[S]+E;for(var T=",\n",A=2;A<u;A++)T+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(o?"":T),m}function cE(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var lE=function(){function e(t,n,r){var a=this;if(_y(this,e),this.dtype=n,this.shape=t.slice(),this.size=dC(t),null!=r){var o=r.length;uC(o===this.size,(function(){return"Length of values '".concat(o,"' does not match the size inferred by the shape '").concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||kC(n,this.size),this.strides=NC(t)}return Oy(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),uC(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must match the rank (").concat(t.rank,")")}));var o=this.locToIndex(r);this.values[o]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,o=t;a<o.length;a++){var i=o[a];if(i<0||i>=this.shape[r]){var s="Requested out of range element at ".concat(t,".   Buffer shape=").concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"toTensor",value:function(){return dE().makeTensor(this.values,this.shape,this.dtype)}},{key:"rank",get:function(){return this.shape.length}}]),e}(),dE=null,fE=null,pE=function(){function e(t,n,r,a){_y(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=dC(t),this.strides=NC(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}var t,n,r,a;return Oy(e,[{key:"buffer",value:(a=Ny(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",fE.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"bufferSync",value:function(){return fE.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:(r=Ny(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",RC(this.shape,t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"arraySync",value:function(){return RC(this.shape,this.dataSync())}},{key:"data",value:(n=Ny(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=dE().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return tE(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])}))),function(){return n.apply(this,arguments)})},{key:"dataSync",value:function(){this.throwIfDisposed();var e=dE().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return tE(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:(t=Ny(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,dE().read(this.dataId);case 3:return t=e.sent,e.abrupt("return","string"===this.dtype?t:new Uint8Array(t.buffer));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dispose",value:function(){this.isDisposed||(dE().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return fE.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),fE.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return oE(this.dataSync(),this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),fE.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),dE().makeVariable(this,e,t,n)}},{key:"rank",get:function(){return this.shape.length}},{key:"isDisposed",get:function(){return this.isDisposedInternal}}]),e}();Object.defineProperty(pE,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),jC("Tensor",(function(){return pE}));var hE,mE,gE,vE,yE,bE=function(e){Dy(n,e);var t=Hy(n);function n(e,r,a,o){var i;return _y(this,n),(i=t.call(this,e.shape,e.dtype,e.dataId,o)).trainable=r,i.name=a,i}return Oy(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and previous value (").concat(this.dtype,") must match"));if(!fC(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and previous value (").concat(this.shape,") must match"));dE().disposeTensor(this),this.dataId=e.dataId,dE().incRef(this,null)}},{key:"dispose",value:function(){dE().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(pE);
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */Object.defineProperty(bE,Symbol.hasInstance,{value:function(e){return e instanceof pE&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(hE||(hE={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(mE||(mE={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(gE||(gE={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(vE||(vE={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(yE||(yE={}));var xE={float32:vE,int32:mE,bool:gE,complex64:yE};function kE(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return xE[e][t]}function wE(e){return kE(e,"int32")}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function IE(e){var t=[];return CE(e,t,new Set),t}function CE(e,t,n){if(null!=e)if(e instanceof pE)t.push(e);else if(r=e,Array.isArray(r)||"object"==Ty(r)){var r,a=e;
/**
	   * @license
	   * Copyright 2018 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */for(var o in a){var i=a[o];n.has(i)||(n.add(i),CE(i,t,n))}}}function EE(e){return null!=e.kernelName}var SE=function(){function e(){_y(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return Oy(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),TE=function(){function e(t){_y(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new SE}var t,n,r,a;return Oy(e,[{key:"ready",value:(a=Ny(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=17;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=14;break}return e.next=13,this.setBackend(r);case 13:return e.abrupt("return",void e.sent);case 14:n++,e.next=6;break;case 17:throw new Error("Could not initialize any backends, all backend initializations failed.");case 18:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(console.warn("".concat(e," backend was already registered. Reusing existing backend factory.")),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:(r=Ny(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=14;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=11;break}return e.next=8,r;case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=r;case 12:if(e.t0){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",(this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new nE(this.backendInstance),!0));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setupRegisteredKernels",value:function(){var e=this;XC(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;XC(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof aC||"function"!=typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,o=r.then((function(n){return!(a<t.pendingBackendInitId||(t.registry[e]=n,t.pendingBackendInit=null,0))})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend ".concat(e," failed")),console.warn(n.stack||n.message)),!1}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}catch(n){return console.warn("Initialization of backend ".concat(e," failed")),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,o=r.asyncInit;if(o||a)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=NE.runKernel("Identity",{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e};return NE.runKernel("Cast",t,{dtype:"float32"})}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==KC(e,this.backendName))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-o;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak (").concat(i," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,o=[],i=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=EE(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(EE(e)){var l=e.kernelName,d=e.inputs,f=e.attrs;null==this.backendName&&this.backend;var p=KC(l,this.backendName);uC(null!=p,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=p.kernelFunc({inputs:d,attrs:f,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(i){var s=a.getTensorsForGradient(l,d,n);o=a.saveTensorsForBackwardMode(s)}return n}}else{var h=e.forwardFunc,m=function(e){i&&(o=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return h(a.backend,m)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var g,v=e.inputs,y=e.attrs,b=EE(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(g=a.profiler.profileKernel(c,v,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(g),t=g.outputs):t=n()})),i&&this.addTapeNode(c,v,t,b,o,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(v).map((function(e){return null!=v[e]?v[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=qC(e);if(null!=r){var a,o=r.inputsToSave||[],i=r.outputsToSave||[];r.saveAllInputs?(uC(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=o.map((function(e){return t[e]}));var s=n.filter((function(e,t){return i[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&EC(e[0])&&(a=e.map((function(e){return eE(e)})));var o=r.write(a,t,n),i=new pE(t,n,o,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){var s=this.state.tensorInfo.get(o),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return i}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a=new pE(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new bE(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*CC(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof bE||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*CC(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:(n=Ny(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=5,t();case 5:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Xy(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=rb(this.state.activeProfile.kernels),e.prev=11,a.s();case 13:if((o=a.n()).done){e.next=23;break}return i=o.value,e.next=17,i.kernelTimeMs;case 17:return i.kernelTimeMs=e.sent,e.next=20,i.extraInfo;case 20:i.extraInfo=e.sent;case 21:e.next=13;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(11),a.e(e.t0);case 28:return e.prev=28,a.f(),e.finish(28);case 31:return e.abrupt("return",this.state.activeProfile);case 32:case"end":return e.stop()}}),e,this,[[11,25,28,31]])}))),function(e){return n.apply(this,arguments)})},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,o){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=qC(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=OC(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,o)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=IE(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||r.has(o.id)||o.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(uC(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));uC(o instanceof pE,(function(){return"The result y returned by f() must be a tensor."}));var i=function(e,t,n){for(var r={},a={},o=0;o<t.length;o++)r[t[o].id]=!0;for(var i=0;i<e.length;i++){var s=e[i],u=s.inputs;for(var c in u){for(var l=u[c],d=!1,f=0;f<t.length;f++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var p={};p[n.id]=!0;for(var h={},m=e.length-1;m>=0;m--)for(var g=e[m],v=g.inputs,y=0;y<g.outputs.length;y++)if(p[g.outputs[y].id]){for(var b in v)p[v[b].id]=!0,h[g.id]=!0;break}for(var x=[],k=0;k<e.length;k++){var w=e[k];if(a[w.id]&&h[w.id]){var I={};for(var C in w.inputs){var E=w.inputs[C];r[E.id]&&(I[C]=E)}var S=Object.assign({},w);S.inputs=I,S.outputs=w.outputs,x.push(S)}}return x}(this.state.activeTape,t,o);if(!a&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?function(e){var t=function(e,t){for(var n=OC(e,"float32"),r=0;r<n.length;r++)n[r]=1;return n}(dC(e));return NE.makeTensor(t,e,"float32")}(o.shape):n,function(e,t,n,a){for(var o=function(n){var o=t[n],i=[];if(o.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for ".concat(o.kernelName,"."));var s=o.gradient(i),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". Available gradients found: ").concat(Object.keys(s),"."));var n=function(e){return r.tidy(e)}((function(){return s[t]()}));if("float32"!==n.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ").concat(t," must have 'float32' dtype, but has '").concat(n.dtype,"'"));var i=o.inputs[t];if(!fC(n.shape,i.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input '").concat(t,"' has shape '").concat(n.shape,"', which does not match the shape of the input '").concat(i.shape,"'"));if(null==e[i.id])e[i.id]=n;else{var u=e[i.id];e[i.id]=a(u,n),u.dispose()}};for(var c in o.inputs)u(c)},i=t.length-1;i>=0;i--)o(i)}
/**
	         * @license
	         * Copyright 2018 Google LLC. All Rights Reserved.
	         * Licensed under the Apache License, Version 2.0 (the "License");
	         * you may not use this file except in compliance with the License.
	         * You may obtain a copy of the License at
	         *
	         * http://www.apache.org/licenses/LICENSE-2.0
	         *
	         * Unless required by applicable law or agreed to in writing, software
	         * distributed under the License is distributed on an "AS IS" BASIS,
	         * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	         * See the License for the specific language governing permissions and
	         * limitations under the License.
	         * =============================================================================
	         */(e,i,0,_E);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=rb(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(e){n.e(e)}finally{n.f()}})),r.state.activeTape=null),{value:o,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return uC(TC(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o;uC(r.every((function(e){return e instanceof pE})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};return r.forEach((function(e,t){i[t]=e})),t.runKernelFunc({forwardFunc:function(t,n){return uC((o=e.apply(void 0,r.concat([n]))).value instanceof pE,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),uC(TC(o.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),o.value},backwardsFunc:function(e,t){var n=o.gradFunc(e,t),a=Array.isArray(n)?n:[n];uC(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),uC(a.every((function(e){return e instanceof pE})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return a.forEach((function(e,t){i[t]=function(){return e}})),i},inputs:i})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"time",value:(t=Ny(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JC(),e.next=3,this.backend.time(t);case 3:return r=e.sent,e.abrupt("return",(r.wallMs=JC()-n,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new SE,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));this.setBackend(t)}return this.backendInstance}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}}]),e}();function AE(){var e,t=zC();if(null==t._tfengine){var n=new LC(t);t._tfengine=new TE(n)}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
return e=t._tfengine.ENV,WC=e,dE=function(){return t._tfengine},t._tfengine}TE.nextTensorId=0,TE.nextVariableId=0;var NE=AE();function _E(e,t){var n={a:e,b:t};return NE.runKernel("Add",n)}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function RE(){if("undefined"!=typeof navigator&&null!=navigator){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function OE(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var FE=UC();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function ME(e,t){var n=e;if(IC(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||IC(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&UC().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&DE(e,r,[]),r}function DE(e,t,n){if(n=n||[],Array.isArray(e)||IC(e)){uC(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, but is an array of ").concat(e.length," elements")})),uC(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," elements, but has ").concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)DE(e[a],r,n.concat(a))}else uC(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, but should be an array/TypedArray of ").concat(t[0]," elements")}))}function BE(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must be ").concat(e," tensor, but got ").concat(t," tensor"))}}function PE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof pE)return BE(r,e.dtype,t,n),e;var a=SC(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),BE(r,a,t,n),null==e||!IC(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var o=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a Tensor or TensorLike, but got '").concat(o,"'"))}var i=ME(e,a);IC(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?ZC(e,a):lC(e,[],!0);return NE.makeTensor(s,i,a)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function LE(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with ".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var a=function(){NE.startScope(n);try{var e=r.apply(void 0,arguments);return PC(e)&&console.error("Cannot return a Promise inside of tidy."),NE.endScope(e),e}catch(e){throw NE.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}FE.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),FE.registerFlag("IS_BROWSER",(function(){return OE()})),FE.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),FE.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),FE.registerFlag("PROD",(function(){return!1})),FE.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return FE.getBool("DEBUG")})),FE.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),FE.registerFlag("IS_TEST",(function(){return!1})),FE.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),FE.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1}));var UE=LE({complex_:function(e,t){var n=PE(e,"real","complex"),r=PE(t,"imag","complex");cC(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", must match in call to tf.complex()."));var a={real:n,imag:r};return NE.runKernel("Complex",a)}}),VE="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function WE(e){return VE?Buffer.byteLength(e):new Blob([e]).size}function zE(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:WE(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:WE(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var jE=function(){function e(){_y(this,e),this.saveRouters=[],this.loadRouters=[]}return Oy(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function HE(){if(!UC().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function GE(e){var t=e.result;t.createObjectStore("models_store",{keyPath:"modelPath"}),t.createObjectStore("model_info_store",{keyPath:"modelPath"})}var KE=function(){function e(t){if(_y(this,e),this.indexedDB=HE(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}var t,n;return Oy(e,[{key:"save",value:(n=Ny(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=Ny(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return GE(a)},a.onsuccess=function(){var o=a.result;if(null==t){var i=o.transaction("models_store","readonly"),s=i.objectStore("models_store").get(n.modelPath);s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' in IndexedDB.")));e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},i.oncomplete=function(){return o.close()}}else{var u,c=zE(t),l=o.transaction("model_info_store","readwrite"),d=l.objectStore("model_info_store"),f=d.put({modelPath:n.modelPath,modelArtifactsInfo:c});f.onsuccess=function(){var a=(u=o.transaction("models_store","readwrite")).objectStore("models_store").put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(d=l.objectStore("model_info_store")).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(a.error)},t.onerror=function(e){return o.close(),r(a.error)}}},f.onerror=function(e){return o.close(),r(f.error)},l.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();KE.URL_SCHEME="indexeddb://";var qE=function(e){return UC().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(KE.URL_SCHEME)?(t=e.slice(KE.URL_SCHEME.length),new KE(t)):null;var t};jE.registerSaveRouter(qE),jE.registerLoadRouter(qE);var XE=function(){function e(){_y(this,e),this.indexedDB=HE()}var t,n;return Oy(e,[{key:"listModels",value:(n=Ny(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return GE(r)},r.onsuccess=function(){var t=r.result,a=t.transaction("model_info_store","readonly"),o=a.objectStore("model_info_store").getAll();o.onsuccess=function(){var t,n={},r=rb(o.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(e){r.e(e)}finally{r.f()}e(n)},o.onerror=function(e){return t.close(),n(o.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"removeModel",value:(t=Ny(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(t=(n=t).startsWith(KE.URL_SCHEME)?n.slice(KE.URL_SCHEME.length):n,new Promise((function(e,n){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return GE(a)},a.onsuccess=function(){var r,o=a.result,i=o.transaction("model_info_store","readwrite"),s=i.objectStore("model_info_store"),u=s.get(t);u.onsuccess=function(){if(null==u.result)return o.close(),n(new Error("Cannot find model with path '".concat(t,"' in IndexedDB.")));var a=s.delete(t),i=function(){var a=(r=o.transaction("models_store","readwrite")).objectStore("models_store").delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return n(u.error)}};a.onsuccess=i,a.onerror=function(e){return i(),o.close(),n(u.error)}},u.onerror=function(e){return o.close(),n(u.error)},i.oncomplete=function(){null==r?o.close():r.oncomplete=function(){return o.close()}}},a.onerror=function(e){return n(a.error)}}))));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),QE="tensorflowjs_models",YE="info",$E="model_topology",ZE="weight_specs",JE="weight_data",eS="model_metadata";
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function tS(e){return{info:[QE,e,YE].join("/"),topology:[QE,e,$E].join("/"),weightSpecs:[QE,e,ZE].join("/"),weightData:[QE,e,JE].join("/"),modelMetadata:[QE,e,eS].join("/")}}function nS(e){var t=e.split("/");if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join("/")}var rS=function(){function e(t){if(_y(this,e),!UC().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=tS(this.modelPath)}var t,n;return Oy(e,[{key:"save",value:(n=Ny(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=zE(t),e.prev=3,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(VE)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(t.weightData)),o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},e.abrupt("return",(null!=t.signature&&(o.signature=t.signature),null!=t.userDefinedMetadata&&(o.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(o.modelInitializer=t.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:a}));case 9:throw e.prev=9,e.t0=e.catch(3),this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=").concat(a.modelTopologyBytes,", weightSpecsBytes=").concat(a.weightSpecsBytes,", weightDataBytes=").concat(a.weightDataBytes,"."));case 12:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=Ny(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=8;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' is missing."));case 8:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=12;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' are missing."));case 12:if(n.weightSpecs=a,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(o),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,null!=i.signature&&(n.signature=i.signature),null!=i.userDefinedMetadata&&(n.userDefinedMetadata=i.userDefinedMetadata),null!=i.modelInitializer&&(n.modelInitializer=i.modelInitializer)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=18;break}throw new Error("In local storage, the binary weight values of model '".concat(this.modelPath,"' are missing."));case 18:return e.abrupt("return",(n.weightData=function(e){if(VE){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(s),n));case 19:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();rS.URL_SCHEME="localstorage://";var aS=function(e){return UC().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(rS.URL_SCHEME)?(t=e.slice(rS.URL_SCHEME.length),new rS(t)):null;var t};jE.registerSaveRouter(aS),jE.registerLoadRouter(aS);var oS=function(){function e(){_y(this,e),uC(UC().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),uC("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}var t,n;return Oy(e,[{key:"listModels",value:(n=Ny(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=QE+"/",r="/"+YE,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(n)&&o.endsWith(r)&&(t[nS(o)]=JSON.parse(this.LS.getItem(o)));return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"removeModel",value:(t=Ny(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=tS(t=(n=t).startsWith(rS.URL_SCHEME)?n.slice(rS.URL_SCHEME.length):n),null!=this.LS.getItem(r.info)){e.next=3;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 3:return a=JSON.parse(this.LS.getItem(r.info)),e.abrupt("return",(this.LS.removeItem(r.info),this.LS.removeItem(r.topology),this.LS.removeItem(r.weightSpecs),this.LS.removeItem(r.weightData),a));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),iS=function(){function e(){_y(this,e),this.managers={}}return Oy(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){uC(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith("://")&&(t=t.slice(0,t.indexOf("://"))),uC(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();uC(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}(),sS=function(){function e(){_y(this,e)}return Oy(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */if(UC().get("IS_BROWSER")){UC().setPlatform("browser",new sS);try{iS.registerManager(rS.URL_SCHEME,new oS)}catch(Rx){}try{iS.registerManager(KE.URL_SCHEME,new XE)}catch(Rx){}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var uS,cS=function(){return require("node-fetch")},lS=function(){function e(){_y(this,e),this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return Oy(e,[{key:"fetch",value:function(e,t){return null!=UC().global.fetch?UC().global.fetch(e,t):(null==uS&&(uS=cS()),uS(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function dS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",MC(e),new lE(e,t,n)
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}UC().get("IS_NODE")&&UC().setPlatform("node",new lS);var fS=LE({cast_:function(e,t){var n=PE(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return NE.runKernel("Cast",r,a)}}),pS=LE({clone_:function(e){var t={x:PE(e,"x","clone","string_or_numeric")};return NE.runKernel("Identity",t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function hS(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: ".concat(t.shape[r-1]," vs. ").concat(n));if(0===dC(e.shape))throw new Error("Requested more than 0 entries, but input is empty. Input shape: ".concat(e.shape,"."));for(var a=t.shape,o=a[a.length-1],i=1,s=0;s<a.length-1;++s)i*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,d=o;d<n;++d)l*=u[d],c.push(u[d]);var f=[].concat(Xy(NC(e.shape).map((function(e){return e/l}))),[1]).slice(0,o);return[c,i,l,f]}function mS(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ".concat(n.shape,", indices.shape: ").concat(t.shape,", shape: ").concat(e,", sliceDim: ").concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(o+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(o+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+" update.rank != "+(a+e.length-r));for(var i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(t.shape[i],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(o+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function gS(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,o=n.length,i=1,s=a;s<o;++s)i*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:dC(t.shape)/u,sliceSize:i,strides:[].concat(Xy(NC(n.slice(0,a))),[1]),outputSize:dC(n)}}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function vS(e,t,n){var r=e.shape.length;uC(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must match the rank of the array (").concat(r,").")})),uC(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must match the rank of the array (").concat(r,").")}));for(var a=function(a){uC(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] (").concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},o=0;o<r;++o)a(o)}function yS(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function bS(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function xS(e,t,n,r){for(var a=Xy(e),o=a.length;o<r.length;o++)a.push(1);for(var i=0;i<n;i++)0===i?a[t]=1:(a.splice(t,0,1),a.pop());return a}function kS(e,t,n){return n<=e?n:n-(t-1)}function wS(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function IS(e,t,n,r,a,o,i,s,u){var c=e.length,l=new Array(c),d=new Array(c),f=new Array(c);if(t.length&&n>0){var p=t[0],h=n+1;l=CS(i,p,h,r,e),d=ES(s,p,h,a,e),f=xS(o,p,h,e)}else for(var m=0;m<c;m++)l[m]=TS(i,r,o,e,m,u),d[m]=AS(s,a,o,e,m,u),f[m]=SS(o,m,u);return{begin:l,end:d,strides:f}}function CS(e,t,n,r,a){for(var o=Xy(a),i=wS(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=0;else{var u=kS(t,n,s),c=r[u];e&1<<u&&(c=0),o[s]=c}return o}function ES(e,t,n,r,a){for(var o=Xy(a),i=wS(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{var u=kS(t,n,s),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),o[s]=c}for(var l=0;l<o.length;l++){var d=a[l];o[l]<0&&(o[l]+=d),o[l]=iC(0,o[l],a[l])}return o}function SS(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function TS(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=iC(0,i,u-1)}function AS(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=s>0?iC(0,i,u):iC(-1,i,u-1)}function NS(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function _S(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function RS(e,t,n){var r,a,o=e.shape.length;return(r="number"==typeof t?[t].concat(Xy(new Array(o-1).fill(0))):t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice()).forEach((function(e){uC(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(o).fill(-1):"number"==typeof n?[n].concat(Xy(new Array(o-1).fill(-1))):n.length<o?n.concat(new Array(o-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(uC(-1===t,(function(){return"Negative size values should be exactly -1 but got ".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function OS(e,t,n,r,a,o,i,s,u){var c=t.slice(),l=n.slice(),d=r;null==r&&(d=new Array(c.length));var f=yS(i);if(f.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==i&&0!==s)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==i&&0!==u)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var p=e.length-c.length,h=yS(s),m=e.slice();h.forEach((function(e){c[e]=0,l[e]=1,m.splice(e,0,1)}));var g=IS(m,f,p,c,l,d,a,o,i),v=g.begin,y=g.end,b=g.strides;c=v,l=y,d=b;var x=yS(u);x.forEach((function(e){l[e]=c[e]+1,d[e]=1}));var k=bS(c,l,d),w=k.filter((function(e,t){return-1===x.indexOf(t)}));return{nonStrided:d.every((function(e){return 1===e})),$begin:c,$end:l,$strides:d,size:k,newShape:m,outShape:w}}
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
AE(),fE={buffer:dS,cast:fS,clone:pS,print:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};var FS=Object.freeze({__proto__:null,assertParamsValid:vS,maskToAxes:yS,computeOutShape:bS,stridesWithElidedDims:xS,getNormalizedAxes:IS,startIndicesWithElidedDims:CS,stopIndicesWithElidedDims:ES,stridesForAxis:SS,startForAxis:TS,stopForAxis:AS,isSliceContinous:NS,computeFlatOffset:_S,parseSliceParams:RS,sliceInfo:OS});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function MS(){UC().set("PROD",!0)}function DS(){return NE}function BS(e){return NE.setBackend(e)}function PS(){return NE.ready()}function LS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return NE.registerBackend(e,t,n)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var US=LE({mul_:function(e,t){var n=PE(e,"a","mul"),r=PE(t,"b","mul"),a=qy(function(e,t){if(e.dtype===t.dtype)return[e,t];var n=kE(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}(n,r),2),o={a:n=a[0],b:r=a[1]};return NE.runKernel("Multiply",o)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function VS(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0;return jS(e,[].concat(Xy(t),[e[3]]),n,o,r,null,null,ZS(a))}function WS(e,t,n,r,a,o){var i,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=KS(t),c=qy(u,2),l=c[0],d=c[1];if("channelsLast"===s)i=[l,d,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));i=[l,d,e[1],e[1]]}return jS(e,i,n,r,a,o,!1,s)}function zS(e,t,n,r,a,o){var i,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=qS(t),l=qy(c,3),d=l[0],f=l[1],p=l[2];if("NDHWC"===u)s="channelsLast",i=[d,f,p,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",i=[d,f,p,e[1],e[1]]}return HS(e,i,n,r,a,!1,s,o)}function jS(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,d=-1;if("channelsLast"===s){var f=qy(e,4);u=f[0],c=f[1],l=f[2],d=f[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var p=qy(e,4);u=p[0],d=p[1],c=p[2],l=p[3]}var h,m=qy(t,4),g=m[0],v=m[1],y=m[3],b=KS(n),x=qy(b,2),k=x[0],w=x[1],I=KS(r),C=qy(I,2),E=C[0],S=C[1],T=XS(g,E),A=XS(v,S),N=function(e,t,n,r,a,o,i,s,u){var c,l,d;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=GS(e,t,n));var o=e[1];return[QS((e[0]-t+2*r)/n+1,a),QS((o-t+2*r)/n+1,a)]}([t,n],o,r,e,s);l=f[0],d=f[1]}else if("same"===e){l=Math.ceil(t/r),d=Math.ceil(n/a);var p=Math.max(0,(l-1)*r+o-t),h=Math.max(0,(d-1)*a+i-n),m=Math.floor(p/2),g=p-m,v=Math.floor(h/2);c={top:m,bottom:g,left:v,right:h-v,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-o+1)/r),d=Math.ceil((n-i+1)/a);else{if("object"!=Ty(e))throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],k="channelsLast"===u?e[2][1]:e[3][1];c={top:y,bottom:b,left:x,right:k,type:0===y&&0===b&&0===x&&0===k?"VALID":"EXPLICIT"},l=QS((t-o+y+b)/r+1,s),d=QS((n-i+x+k)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:d}}(a,c,l,k,w,T,A,o,s),_=N.padInfo,R=N.outHeight,O=N.outWidth,F=i?y*d:y;return"channelsFirst"===s?h=[u,F,R,O]:"channelsLast"===s&&(h=[u,R,O,F]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:d,outHeight:R,outWidth:O,outChannels:F,padInfo:_,strideHeight:k,strideWidth:w,filterHeight:g,filterWidth:v,effectiveFilterHeight:T,effectiveFilterWidth:A,dilationHeight:E,dilationWidth:S,inShape:e,outShape:h,filterShape:t}}function HS(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,d=-1,f=-1;if("channelsLast"===i){var p=qy(e,5);u=p[0],c=p[1],l=p[2],d=p[3],f=p[4]}else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));var h=qy(e,5);u=h[0],f=h[1],c=h[2],l=h[3],d=h[4]}var m,g=qy(t,5),v=g[0],y=g[1],b=g[2],x=g[4],k=qS(n),w=qy(k,3),I=w[0],C=w[1],E=w[2],S=qS(r),T=qy(S,3),A=T[0],N=T[1],_=T[2],R=XS(v,A),O=XS(y,N),F=XS(b,_),M=function(e,t,n,r,a,o,i,s,u,c,l){var d,f,p,h;if("number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,o){null==a&&(a=GS(e,t,r));var i=e[1],s=e[2];return[QS((e[0]-t+2*a)/r+1,o),QS((i-t+2*a)/r+1,o),QS((s-t+2*a)/r+1,o),1]}([t,n,r,1],s,0,a,e,l);f=m[0],p=m[1],h=m[2]}else if("same"===e){var g=((f=Math.ceil(t/a))-1)*a+s-t,v=((p=Math.ceil(n/o))-1)*o+u-n,y=((h=Math.ceil(r/i))-1)*i+c-r,b=Math.floor(g/2),x=g-b,k=Math.floor(v/2),w=v-k,I=Math.floor(y/2);d={top:k,bottom:w,left:I,right:y-I,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/a),p=Math.ceil((n-u+1)/o),h=Math.ceil((r-c+1)/i)}return{padInfo:d,outDepth:f,outHeight:p,outWidth:h}}(a,c,l,d,I,C,E,R,O,F,s),D=M.padInfo,B=M.outDepth,P=M.outHeight,L=M.outWidth,U=o?x*f:x;return"channelsFirst"===i?m=[u,U,B,P,L]:"channelsLast"===i&&(m=[u,B,P,L,U]),{batchSize:u,dataFormat:i,inDepth:c,inHeight:l,inWidth:d,inChannels:f,outDepth:B,outHeight:P,outWidth:L,outChannels:U,padInfo:D,strideDepth:I,strideHeight:C,strideWidth:E,filterDepth:v,filterHeight:y,filterWidth:b,effectiveFilterDepth:R,effectiveFilterHeight:O,effectiveFilterWidth:F,dilationDepth:A,dilationHeight:N,dilationWidth:_,inShape:e,outShape:m,filterShape:t}}function GS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=XS(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function KS(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function qS(e){return"number"==typeof e?[e,e,e]:e}function XS(e,t){return t<=1?e:e+(e-1)*(t-1)}function QS(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function YS(e){var t=qy(KS(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function $S(e,t){return YS(e)||YS(t)}function ZS(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var JS=LE({reshape_:function(e,t){var n={x:PE(e,"x","reshape","string_or_numeric")},r={shape:t};return NE.runKernel("Reshape",n,r)}});
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function eT(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}function tT(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function nT(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var o=e[e.length-a-1];null==o&&(o=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===o)n.unshift(i);else if(1===i)n.unshift(o);else{if(o!==i)throw Error("Operands could not be broadcast together with shapes ".concat(e," and ").concat(t,"."));n.unshift(o)}}return n}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var rT=LE({elu_:function(e){var t={x:PE(e,"x","elu")};return NE.runKernel("Elu",t)}}),aT=LE({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:PE(e,"x","leakyRelu")},r={alpha:t};return NE.runKernel("LeakyRelu",n,r)}}),oT=LE({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=PE(e,"x","sum");"bool"===r.dtype&&(r=fS(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return NE.runKernel("Sum",a,o)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function iT(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function sT(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[o++]):a.push(t[i++]);return a}function uT(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function cT(e,t){return sT(e,t.map((function(e){return 1})),t)}function lT(e,t,n){uC(iT(t,n),(function(){return"".concat(e," supports only inner-most axes for now. Got axes ").concat(t," and rank-").concat(n," input.")}))}function dT(e,t){if(iT(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function fT(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function pT(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function hT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=hT(e,"float32"),r=hT(e,"float32");return UE(n,r)}var a=OC(dC(e),t);return NE.makeTensor(a,e,t)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var mT=LE({prelu_:function(e,t){var n={x:PE(e,"x","prelu"),alpha:PE(t,"alpha","prelu")};return NE.runKernel("Prelu",n)}}),gT=eI((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new r(e),o=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.alea=o}(0,e)})),vT=eI((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xor128=o}(0,e)})),yT=eI((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xorwow=o}(0,e)})),bT=eI((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&(o.x&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xorshift7=o}(0,e)})),xT=eI((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=s[127&o]^=r+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&(o.X&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xor4096=o}(0,e)})),kT=eI((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.tychei=o}(0,e)})),wT=tI(Object.freeze({__proto__:null,default:{}})),IT=eI((function(e){!function(t,n){var r,a=this,o=256,i=n.pow(o,6),s=n.pow(2,52),u=2*s,c=255;function l(e,c,l){var g=[],v=h(p((c=1==c?{entropy:!0}:c||{}).entropy?[e,m(t)]:null==e?function(){try{var e;return r&&(e=r.randomBytes)?e=e(o):(e=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(e)),m(e)}catch(e){var n=a.navigator,i=n&&n.plugins;return[+new Date,a,i,a.screen,m(t)]}}():e,3),g),y=new d(g),b=function(){for(var e=y.g(6),t=i,n=0;e<s;)e=(e+n)*o,t*=o,n=y.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,h(m(y.S),t),(c.pass||l||function(e,t,r,a){return a&&(a.S&&f(a,y),e.state=function(){return f(y,{})}),r?(n.random=e,t):e})(b,v,"global"in c?c.global:this==n,c.state)}function d(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<o;)s[a]=a++;for(a=0;a<o;a++)s[a]=s[i=c&i+e[a%n]+(t=s[a])],s[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,s=r.S;e--;)t=s[a=c&a+1],n=n*o+s[c&(s[a]=s[i=c&i+t])+(s[i]=t)];return r.i=a,r.j=i,n})(o)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){var n,r=[],a=Ty(e);if(t&&"object"==a)for(n in e)try{r.push(p(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\0"}function h(e,t){for(var n,r=e+"",a=0;a<r.length;)t[c&a]=c&(n^=19*t[c&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(n.seedrandom=l,h(n.random(),t),e.exports){e.exports=l;try{r=wT}catch(e){}}}([],Math)}));IT.alea=gT,IT.xor128=vT,IT.xorwow=yT,IT.xorshift7=bT,IT.xor4096=xT,IT.tychei=kT;var CT=IT,ET=LE({relu_:function(e){var t={x:PE(e,"x","relu")};return NE.runKernel("Relu",t)}}),ST=LE({relu6_:function(e){var t={x:PE(e,"x","relu6")};return NE.runKernel("Relu6",t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function TT(e,t){if((IC(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&IC(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return function(e,t,n,r){if(null==r&&(r=SC(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!IC(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){MC(t);var a=dC(t),o=dC(n);uC(a===o,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ").concat(a," values but has ").concat(o)}));for(var i=0;i<n.length;++i){var s=i!==n.length-1||n[i]!==dC(t.slice(i));uC(n[i]===t[i]||!s,(function(){return"Error creating a new Tensor. Inferred shape (".concat(n,") does not match the provided shape (").concat(t,"). ")}))}}return IC(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?ZC(e,r):lC(e,[],!0),NE.makeTensor(e,t,r)}(e,[],[],t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var AT=LE({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:PE(e,"x","step")},r={alpha:t};return NE.runKernel("Step",n,r)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function NT(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=dS(e,"int32"),o=dS([n.length,e.length],"int32"),i=0;i<n.length;i++){var s=a.indexToLoc(n[i]),u=i*e.length;o.values.set(s,u)}return o.toTensor()}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function _T(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,o=0,i=!1;r<a;){var s=n(t,e[o=r+(a-r>>>1)]);s>0?r=o+1:(a=o,i=!s)}return i?r:-r-1}
/**
	     * @license
	     * Copyright 2020 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(e,t,n||RT)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function RT(e,t){return e>t?1:e<t?-1:0}function OT(e,t,n,r,a){return DT(e,t,n,r,a,0)}function FT(e,t,n,r,a,o){return DT(e,t,n,r,a,0,!1,o,!0)}function MT(e,t,n,r,a,o){return DT(e,t,n,r,a,o,!0)}function DT(e,t,n,r,a,o){for(var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(LT);for(var d=o>0?-.5/o:0,f=[],p=[];f.length<n&&c.length>0;){var h=c.pop(),m=h.score,g=h.boxIndex,v=h.suppressBeginIndex;if(m<a)break;for(var y=!1,b=f.length-1;b>=v;--b){var x=BT(e,g,f[b]);if(x>=r){y=!0;break}if(h.score=h.score*PT(r,d,x),h.score<=a)break}h.suppressBeginIndex=f.length,y||(h.score===m?(f.push(g),p.push(h.score)):h.score>a&&_T(c,h,LT))}var k=f.length,w=n-k;s&&w>0&&(f.push.apply(f,Xy(new Array(w).fill(0))),p.push.apply(p,Xy(new Array(w).fill(0))));var I={selectedIndices:f};return i&&(I.selectedScores=p),u&&(I.validOutputs=k),I}function BT(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),p=(s-o)*(u-i),h=(d-c)*(f-l);if(p<=0||h<=0)return 0;var m=Math.max(o,c),g=Math.max(i,l),v=Math.min(s,d),y=Math.min(u,f),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(p+h-b)}function PT(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function LT(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function UT(e,t){var n=e[0].length;e.forEach((function(e,t){uC(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same as the rank of the rest (").concat(n,")")}))})),uC(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var o=0;o<n;o++)uC(o===t||e[o]===r[o],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") does not match the shape of the rest (").concat(r,") along the non-concatenated axis ").concat(a,".")}))}))}function VT(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function WT(e){return e<=30?e:AC(e,Math.floor(Math.sqrt(e)))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function zT(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function jT(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var o=t.length,i=0;i<o;++i)a=a.concat([e[i+1]/t[i],t[i]]);a=a.concat(e.slice(o+1))}return a}function HT(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var o=[],i=[],s=1;s<e;++s)s>=2*t+1||s%2==1?i.push(s):o.push(s);r.push.apply(r,o),r.push(0),r.push.apply(r,i)}return r}function GT(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function KT(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function qT(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function XT(){var e;UC().getBool("IS_TEST")||(e=console).warn.apply(e,arguments)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function QT(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function YT(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function $T(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function ZT(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function JT(e,t){return{real:e[2*t],imag:e[2*t+1]}}function eA(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function tA(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}function nA(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function rA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"==typeof t)uC(e.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{uC(t.reduce((function(e,t){return-1===t&&(e+=1),e}),0)<=1,(function(){return"There should be only one negative value in split array."}));var a=t.indexOf(-1);if(-1!==a){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[a]=e.shape[n]-o}uC(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function aA(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=AC(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=AC(e,n+1);return n}function oA(e,t,n){for(var r=[],a=e.length,o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}function iA(e,t,n,r){var a=t.shape.length,o=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>o)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(o,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var i=0;i<r;++i)if(e.shape[i]!==t.shape[i])throw new Error("x.shape[".concat(i,"]: ").concat(e.shape[i]," should be equal to indices.shape[").concat(i,"]: ").concat(t.shape[i],"."));for(var s=e.shape[n],u=[],c=1,l=1,d=1,f=0;f<r;++f)u.push(e.shape[f]),c*=e.shape[f];for(var p=r;p<n;p++)u.push(e.shape[p]),l*=e.shape[p];for(var h=r;h<a;h++)u.push(t.shape[h]);for(var m=n+1;m<o;m++)u.push(e.shape[m]),d*=e.shape[m];return{batchSize:c,sliceSize:d,outerSize:l,dimSize:s,outputShape:u}}var sA=Object.freeze({__proto__:null,segOpComputeOptimalWindowSize:aA,computeOutShape:oA,collectGatherOpShapeInfo:iA});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function uA(e){try{return e.map((function(e){return tE(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(e))}}function cA(e){return e.map((function(e){return eE(e)}))}var lA,dA,fA,pA=Object.freeze({__proto__:null,slice_util:FS,segment_util:sA,fromUint8ToStringArray:uA,fromStringArrayToUint8:cA,upcastType:kE,axesAreInnerMostDims:iT,combineLocations:sT,computeOutAndReduceShapes:uT,expandShapeToKeepDim:cT,assertAxesAreInnerMostDims:lT,getAxesPermutation:dT,getUndoAxesPermutation:fT,getInnerMostAxes:pT,getBroadcastDims:eT,getReductionAxes:tT,assertAndGetBroadcastShape:nT,assertParamsConsistent:UT,computeOutShape:VT,computeDilation2DInfo:VS,computePool2DInfo:WS,computePool3DInfo:zS,computeConv2DInfo:jS,computeConv3DInfo:HS,computeDefaultPad:GS,tupleValuesAreOne:YS,eitherStridesOrDilationsAreOne:$S,convertConv2DDataFormat:ZS,getFusedDyActivation:function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return US(e,AT(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))},getFusedBiasGradient:function(e,t){var n=t,r=tT(e.shape,t.shape);return r.length>0&&(n=oT(n,r)),JS(n,e.shape)},applyActivation:function(e,t,n,r){if("linear"===t)return e;if("relu"===t)return ET(e);if("elu"===t)return rT(e);if("relu6"===t)return ST(e);if("prelu"===t)return mT(e,n);if("leakyrelu"===t)return aT(e,r);throw new Error("Unknown fused activation ".concat(t,"."))},shouldFuse:function(e,t){return!(e>0)||"linear"===t},PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:WT,getImageCenter:zT,getReshaped:jT,getPermuted:HT,getReshapedPermuted:GT,getSliceBeginCoords:KT,getSliceSize:qT,prepareAndValidate:hS,validateUpdateShape:mS,validateInput:function(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}mS(n,t,e)},calculateShapes:gS,SELU_SCALEALPHA:1.7580993408473768,SELU_SCALE:1.0507009873554805,ERF_P:.3275911,ERF_A1:.254829592,ERF_A2:-.284496736,ERF_A3:1.421413741,ERF_A4:-1.453152027,ERF_A5:1.061405429,warn:XT,log:function(){var e;UC().getBool("IS_TEST")||(e=console).log.apply(e,arguments)},mergeRealAndImagArrays:QT,splitRealAndImagArrays:YT,complexWithEvenIndex:$T,complexWithOddIndex:ZT,getComplexWithIndex:JT,assignToTypedArray:eA,exponents:tA,exponent:nA,prepareSplitSize:rA}),hA={},mA={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function gA(e){if(!(e in hA)){var t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete hA[e]}),!1),1===e?t.getContext("webgl",mA)||t.getContext("experimental-webgl",mA):t.getContext("webgl2",mA)}
/**
	     * @license
	     * Copyright 2017 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;hA[e]=t}var n=hA[e];return n.isContextLost()?(delete hA[e],gA(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),hA[e])}function vA(e,t){return[t,e]}function yA(e){var t=dC(e);return hC(Math.ceil(t/4))}function bA(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function xA(e,t){var n,r,a,o,i,s,u,c,l,d=e;return 2===UC().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,o=d.RGBA32F,i=d.RED,s=4,u=1,c=d.HALF_FLOAT,l=d.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,o=d.RGBA,i=e.RGBA,s=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:l}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function kA(e,t){var n=t();return UC().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}function wA(e){return!!(UC().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function IA(e,t){return MA(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function CA(e,t){var n=MA(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(kA(e,(function(){return e.shaderSource(n,t)})),kA(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=TA.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map((function(e,t){return mC((t+1).toString(),o)+e})),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var c=i.slice(0,r-1),l=i.slice(r-1,r),d=i.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(mC(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(lA||(lA={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(dA||(dA={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(fA||(fA={}));var EA,SA,TA=/ERROR: [0-9]+:([0-9]+):/g;function AA(e,t){if(kA(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function NA(e,t,n,r,a,o,i){var s=e.getAttribLocation(t,n);return-1!==s&&(kA(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),kA(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,o,i)})),kA(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function _A(e,t,n){!function(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in ".concat("[gl.TEXTURE0, gl.TEXTURE".concat(n,"]"),"."))}(e,n),kA(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),kA(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}function RA(e,t,n){kA(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),kA(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function OA(e,t){kA(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),kA(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function FA(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function MA(e,t,n){var r=kA(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function DA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return dC(e.slice(0,e.length-t))}function BA(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function PA(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[DA(e)].concat(Xy(BA(e)))),t}function LA(e){return e%2==0}function UA(e,t){if(fC(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(LA(n)&&LA(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&LA(e[0])&&LA(t[0])}function VA(e,t){return null!=e.getExtension(t)}function WA(e){try{if(null!=gA(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function zA(e){if(0===e)return!1;var t=gA(e);if(1!==e){if(VA(t,"EXT_color_buffer_float"))return jA(t);var n="EXT_color_buffer_half_float";if(VA(t,n)){var r=t.getExtension(n);return function(e,t){var n=xA(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),o}(t,r)}return!1}return!!VA(t,"OES_texture_float")&&(!!VA(t,"WEBGL_color_buffer_float")&&jA(t))}function jA(e){var t=xA(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function HA(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&uC("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the WebGL backend.")}))}))
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var GA=UC();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function KA(){var e,t,n,r,a,o,i,s,u,c;return 2===UC().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function qA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=NC(t);return r.map((function(t,a){return"".concat("int ".concat(e[a]," = ").concat(n," / ").concat(t),"; ",a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t),";")})).join("")}function XA(e){var t=NC(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}GA.registerFlag("HAS_WEBGL",(function(){return GA.getNumber("WEBGL_VERSION")>0})),GA.registerFlag("WEBGL_VERSION",(function(){return WA(2)?2:WA(1)?1:0})),GA.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),GA.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===GA.get("WEBGL_VERSION")})),GA.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),GA.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),GA.registerFlag("WEBGL_PACK",(function(){return GA.getBool("HAS_WEBGL")})),GA.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return GA.getBool("WEBGL_PACK")})),GA.registerFlag("WEBGL_PACK_CLIP",(function(){return GA.getBool("WEBGL_PACK")})),GA.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),GA.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return GA.getBool("WEBGL_PACK")})),GA.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return GA.getBool("WEBGL_PACK")})),GA.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return GA.getBool("WEBGL_PACK")})),GA.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return GA.getBool("WEBGL_PACK")})),GA.registerFlag("WEBGL_PACK_REDUCE",(function(){return GA.getBool("WEBGL_PACK")})),GA.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return GA.getBool("WEBGL_PACK")})),GA.registerFlag("WEBGL_CONV_IM2COL",(function(){return GA.getBool("WEBGL_PACK")})),GA.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==EA){var t=gA(e);EA=t.getParameter(t.MAX_TEXTURE_SIZE)}return EA}(GA.getNumber("WEBGL_VERSION"))})),GA.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==SA){var t=gA(e);SA=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,SA)}(GA.getNumber("WEBGL_VERSION"))})),GA.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=GA.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=gA(e);return VA(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:VA(t,"EXT_disjoint_timer_query")?1:0}(e)})),GA.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return GA.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!RE()})),GA.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=gA(e);if(1===e){if(!VA(t,"OES_texture_float"))return!1}else if(!VA(t,"EXT_color_buffer_float"))return!1;return jA(t)}(GA.getNumber("WEBGL_VERSION"))})),GA.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!GA.getBool("WEBGL_FORCE_F16_TEXTURES")&&GA.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),GA.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return zA(GA.getNumber("WEBGL_VERSION"))})),GA.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=GA.getNumber("WEBGL_VERSION"))&&null!=gA(e).fenceSync;var e})),GA.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return GA.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),GA.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ".concat(e,"."))})),GA.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return RE()&&GA.getBool("IS_CHROME")?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ".concat(e,"."))}));var QA="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",YA=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=lA.DENSE;var n=yA(t),r=KA();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(qA(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},$A=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=lA.DENSE;var n=yA(t),r=KA();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(qA(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},ZA=function e(t){_y(this,e),this.variableNames=["A"],this.outTexUsage=dA.DOWNLOAD;var n=KA();this.outputShape=t,this.userCode="\n      ".concat(QA,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},JA=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=dA.DOWNLOAD;var n=KA();this.outputShape=t,this.userCode="\n      ".concat(QA,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},eN=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_y(this,e),this.variableNames=["A"];var a=KA(),o=qy(n,2),i=o[0],s=o[1];this.outputShape=t;var u="result";r&&(u="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(XA(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ").concat(s,";\n        int c = imod(flatIndex, ").concat(s,");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n        vec4 values = ").concat(a.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(a.output," = vec4(").concat(u,", 0., 0., 0.);\n      }\n    ")},tN=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var a=KA(),o=qy(n,2),i=o[0],s=o[1];this.outputShape=t;var u="",c="result";r&&(c="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var d=0;d<=1;d++){var f=2*l+d;u+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(d," < ").concat(t[2],") {\n            localCoords[2] += ").concat(d,";\n            if(localCoords[1] + ").concat(l," < ").concat(t[1],") {\n              localCoords[1] += ").concat(l,";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ").concat(s,";\n              c = imod(flatIndex, ").concat(s,");\n              uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n              values = ").concat(a.texture2D,"(A, uv);\n\n              if(offset == 0) {\n                result[").concat(f,"] = values[0];\n              } else if(offset == 1) {\n                result[").concat(f,"] = values[1];\n              } else if(offset == 2) {\n                result[").concat(f,"] = values[2];\n              } else {\n                result[").concat(f,"] = values[3];\n              }\n            }\n          }\n        ")}this.userCode="\n      ".concat(XA(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ").concat(u,"\n\n        ").concat(a.output," = ").concat(c,";\n      }\n    ")};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function nN(e){var t=KA();return function(e,t){var n=MA(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(kA(e,(function(){return e.shaderSource(n,t)})),kA(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function rN(e){return function(e,t){var n=MA(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return kA(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),kA(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function aN(e){return function(e,t){var n=MA(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return kA(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),kA(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function oN(e,t,n,r,a,o){!function(e,t){var n=UC().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error("Requested texture size [".concat(e,"x").concat(t,"] is invalid."));if(e>n||t>n)throw new Error("Requested texture size [".concat(e,"x").concat(t,"] greater than WebGL maximum on this browser / GPU [").concat(n,"x").concat(n,"]."))}(t,n);var i=function(e){return MA(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return kA(e,(function(){return e.bindTexture(s,i)})),kA(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),kA(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),kA(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),kA(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),kA(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,o,null)})),kA(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),i}function iN(e){return e.internalFormatFloat}function sN(e){return e.internalFormatHalfFloat}function uN(e){return e.downloadTextureFormat}function cN(e){return e.internalFormatPackedFloat}function lN(e){return e.internalFormatPackedHalfFloat}function dN(e,t,n,r,a,o,i,s){var u=e,c=new Float32Array(function(e,t){var n=qy(bA(e,t),2);return n[0]*n[1]*4}(o,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var fN=function(){function e(t){_y(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=UC().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){hA[e]=t}(n,t)):this.gl=gA(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(1===UC().getNumber("WEBGL_VERSION")){var o="OES_texture_half_float";if(this.textureFloatExtension=IA(this.gl,"OES_texture_float"),VA(this.gl,o))this.textureHalfFloatExtension=IA(this.gl,o);else if(UC().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),VA(this.gl,a))this.colorBufferHalfFloatExtension=IA(this.gl,a);else if(UC().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",VA(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!VA(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=rN(this.gl),this.indexBuffer=aN(this.gl),this.framebuffer=function(e){return MA(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=xA(this.gl,this.textureHalfFloatExtension)}var t;return Oy(e,[{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;kA(t,(function(){return t.finish()})),kA(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),kA(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),kA(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),kA(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),kA(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=qy(vA(t,n),2);return oN(e,a[0],a[1],iN(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=qy(vA(t,n),2);return oN(e,a[0],a[1],sN(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=qy(vA(t,n),2);return oN(e,a[0],a[1],uN(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){kA(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?kA(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):kA(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),kA(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,o){var i,s,u;kA(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,u=o.internalFormatPackedFloat),i.set(a),kA(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,i)})),kA(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=qy(bA(t,n),2);return oN(e,a[0],a[1],lN(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=qy(bA(t,n),2);return oN(e,a[0],a[1],cN(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(OA(this.gl,this.framebuffer),this.outputTexture=null),kA(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=qy(vA(t,n),2),o=a[0],i=a[1],s=new Uint8Array(t*n*4);return kA(e,(function(){return e.readPixels(0,0,o,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,o){return dN(this.gl,e,0,0,0,a,o,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();kA(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var o=16*t*n;return kA(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),kA(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),kA(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(UC().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(o,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=o}else UC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,UC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return kA(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){this.throwIfDisposed();var t=this.gl,n=CA(t,e),r=nN(t),a=function(e){return MA(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(t);return kA(t,(function(){return t.attachShader(a,r)})),kA(t,(function(){return t.attachShader(a,n)})),function(e,t){if(kA(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,a),this.debug&&AA(t,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=function(e,t,n){return kA(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),NA(e,t,"clipSpacePos",n,3,20,0)&&NA(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),a}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&kA(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&AA(this.gl,this.program),kA(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return MA(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),kA(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),function(e,t,n,r){kA(e,(function(){return _A(e,t,r)})),kA(e,(function(){return e.uniform1i(n,r)}))}(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=qy(bA(t,n),2),a=r[0],o=r[1];this.setOutputMatrixTextureDriver(e,a,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&AA(this.gl,this.program),FA(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),kA(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),kA(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=IA(this.gl,2===UC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===UC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==UC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:(t=Ny(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gC((function(){return n.disposed||n.isQueryAvailable(t,UC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,UC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}
/**
	       * @license
	       * Copyright 2017 Google LLC. All Rights Reserved.
	       * Licensed under the Apache License, Version 2.0 (the "License");
	       * you may not use this file except in compliance with the License.
	       * You may obtain a copy of the License at
	       *
	       * http://www.apache.org/licenses/LICENSE-2.0
	       *
	       * Unless required by applicable law or agreed to in writing, software
	       * distributed under the License is distributed on an "AS IS" BASIS,
	       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	       * See the License for the specific language governing permissions and
	       * limitations under the License.
	       * =============================================================================
	       */(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||gC((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),RA(this.gl,e,this.framebuffer),this.debug&&FA(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(RA(this.gl,this.outputTexture,this.framebuffer),this.debug&&FA(this.gl)):OA(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;RA(r,e,this.framebuffer),this.debug&&FA(r),this.outputTexture=e,kA(r,(function(){return r.viewport(0,0,t,n)})),kA(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),kA(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}},{key:"debug",get:function(){return UC().getBool("DEBUG")}}]),e}(),pN=pA.getBroadcastDims;function hN(e,t,n,r){var a=[];e.forEach((function(e){var t=dC(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?a.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(a.push("uniform sampler2D ".concat(e.name,";")),a.push("uniform int offset".concat(e.name,";")))}));var o,i,s=a.join("\n"),u=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="";r+=n?gN(e):mN(e);var a=e.shapeInfo.logicalShape,o=t.logicalShape;return a.length<=o.length&&(r+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),o="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=pN(e.shapeInfo.logicalShape,t.logicalShape),c=IN(s),l=s-i,d=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(d[e+l]," = 0;")})).join("\n");var f;f=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+l])})).join(", ");var p="return outputValue;",h=1===dC(e.shapeInfo.logicalShape),m=1===dC(t.logicalShape);if(1!==i||h||m){if(h&&!m)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=i-2,v=i-1;u.indexOf(g)>-1&&u.indexOf(v)>-1?p="return vec4(outputValue.x);":u.indexOf(g)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(v)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(f,");\n      ").concat(p,"\n    }\n  ")}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&fC(i,o))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=IN(u),d=pN(e.shapeInfo.logicalShape,t.logicalShape),f=u-s,p=["x","y","z","w","u","v"];c=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(p[e+f]," = 0;")})).join("\n");var h;return h=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+f])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(h,");\n    }\n  ")}(e,t)),r}(e,t,r)})).join("\n"),c=t.texShape,l=KA(),d=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(l),f=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(vN,"\n    ").concat(yN,"\n    ").concat(bN,"\n  ")}(l);return t.isPacked?(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(n[1],".0);\n      }\n    "):1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(n[0],".0);\n      }\n    "):"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      return 2 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n    }\n  ")}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(fC(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(n[0],", ").concat(n[1],"));\n      }\n    ");var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),a=r*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t);default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),o=a,i="",s="b, r, c",u=2;u<e.length-1;u++)o*=e[e.length-u-1],i="\n      int b".concat(u," = index / ").concat(o,";\n      index -= b").concat(u," * ").concat(o,";\n    ")+i,s="b".concat(u,", ")+s;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      ").concat(i,"\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec").concat(e.length,"(").concat(s,");\n    }\n  ")}(e,t)}}(t.logicalShape,c),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(l)):(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    "):1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    "):"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t);case 2:return function(e,t){return fC(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    "):1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    "):1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    "):"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=qA(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t);case 4:return function(e,t){var n=qA(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t);case 5:return function(e,t){var n=qA(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=qA(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,c),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(l)),r&&(f+=xN),[f,d,i,s,o,u,n].join("\n")}function mN(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(n,"() {return ").concat(t,";}");var r=qy(e.shapeInfo.texShape,2),a=r[0],o=r[1];if(1===a&&1===o)return"\n      float ".concat(n,"() {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var i=qy(e.shapeInfo.texShape,2),s=i[0],u=i[1],c=kN(t);return"\n    float ".concat(n,"() {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(u,", ").concat(c,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(n,"(int index) {\n        ").concat(wN(e),"\n      }\n    ");var r=e.shapeInfo.texShape,a=r[0],o=r[1];if(1===o&&1===a)return"\n      float ".concat(n,"(int index) {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var i=kN(t);return 1===o?"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(i,") + 0.5) / ").concat(a,".0);\n        return sampleTexture(").concat(t,", uv);\n      }\n    "):1===a?"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(i,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(t,", uv);\n      }\n    "):"\n    float ".concat(n,"(int index) {\n      vec2 uv = uvFromFlat(").concat(a,", ").concat(o,", index + ").concat(i,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&fC(t,a)){var o=a[0];return"\n    float ".concat(r,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a[1],".0, ").concat(o,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}var i=bC(t),s=i.newShape,u=i.keptDims,c=s;if(c.length<t.length){return"\n      ".concat(mN(CN(e,c)),"\n      float ").concat(r,"(int row, int col) {\n        return ").concat(r,"(").concat(EN(["row","col"],u),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(t[1],", 1)));\n        ").concat(wN(e),"\n      }\n    ");var l=a[0],d=a[1],f=kN(n);return 1===d?"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(t[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(l,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):1===l?"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(t[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(d,".0, 0.5);\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n  float ".concat(r,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(t[1]," + col + ").concat(f,";\n    vec2 uv = uvFromFlat(").concat(l,", ").concat(d,", index);\n    return sampleTexture(").concat(n,", uv);\n  }\n")}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],o=t[2],i=bC(t),s=i.newShape,u=i.keptDims,c=s;if(c.length<t.length){return"\n        ".concat(mN(CN(e,c)),"\n        float ").concat(r,"(int row, int col, int depth) {\n          return ").concat(r,"(").concat(EN(["row","col","depth"],u),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(a,", ").concat(o,", 1)));\n        ").concat(wN(e),"\n      }\n    ");var l=e.shapeInfo.texShape,d=l[0],f=l[1],p=e.shapeInfo.flatOffset;if(f===a&&null==p)return"\n        float ".concat(r,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(f,".0, ").concat(d,".0);\n          return sampleTexture(").concat(n,", uv);\n        }\n      ");if(f===o&&null==p)return"\n    float ".concat(r,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(t[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(f,".0, ").concat(d,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var h=kN(n);return"\n      float ".concat(r,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(a," + col * ").concat(o," + depth + ").concat(h,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(f,", index);\n        return sampleTexture(").concat(n,", uv);\n      }\n  ")}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],o=t[2]*a,i=t[1]*o,s=bC(t),u=s.newShape,c=s.keptDims;if(u.length<t.length){return"\n      ".concat(mN(CN(e,u)),"\n      float ").concat(r,"(int row, int col, int depth, int depth2) {\n        return ").concat(r,"(").concat(EN(["row","col","depth","depth2"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(i,", ").concat(o,", ").concat(a,", 1)));\n        ").concat(wN(e),"\n      }\n    ");var l=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],p=d[1];if(p===i&&null==l)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===a&&null==l)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(t[1]*t[2],", ").concat(t[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var h=kN(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(i," + col * ").concat(o," +\n          depth * ").concat(a," + depth2;\n      vec2 uv = uvFromFlat(").concat(f,", ").concat(p,", index + ").concat(h,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,i=t[2]*o,s=t[1]*i,u=bC(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){return"\n      ".concat(mN(CN(e,c)),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(EN(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(i,", ").concat(o,", ").concat(a,")) +\n          depth3;\n        ").concat(wN(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,p=f[0],h=f[1];if(h===s&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(o,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(h,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(h===a&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(h,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=kN(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(o," +\n          depth2 * ").concat(a," + depth3 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=bC(t),o=a.newShape,i=a.keptDims;if(o.length<t.length){return"\n      ".concat(mN(CN(e,o)),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(EN(["row","col","depth","depth2","depth3","depth4"],i),");\n      }\n    ")}var s=t[5],u=t[4]*s,c=t[3]*u,l=t[2]*c,d=t[1]*l;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(d,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(s,", 1)));\n        ").concat(wN(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],m=p[1];if(m===d&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(l,", ").concat(c,", ").concat(u,", ").concat(s,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===s&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=kN(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(d," + col * ").concat(l," + depth * ").concat(c," +\n          depth2 * ").concat(u," + depth3 * ").concat(s," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(t.length,"-D input sampling is not yet supported"))}}function gN(e){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=KA();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=KA();return"\n    vec4 ".concat(n,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(a[0],", ").concat(a[1],", index);\n      return ").concat(o.texture2D,"(").concat(t,", uv);\n    }\n  ")}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=a[0],i=a[1],s=KA();if(null!=a&&fC(t,a))return"\n      vec4 ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(i,".0, ").concat(o,".0);\n\n        return ").concat(s.texture2D,"(").concat(n,", uv);\n      }\n    ");var u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=Math.ceil(t[1]/2);return"\n    vec4 ".concat(r,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(c,", ").concat(u[0],", ").concat(u[1],", row, col);\n      return ").concat(s.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0]){return"\n        ".concat(gN(CN(e,t.slice(1))),"\n        vec4 ").concat(r,"(int b, int row, int col) {\n          return ").concat(r,"(").concat(EN(["b","row","col"],[1,2]),");\n        }\n      ")}var i=o[0],s=o[1],u=Math.ceil(t[2]/2),c=u*Math.ceil(t[1]/2),l=KA();return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(i,", ").concat(s,", ").concat(c,", ").concat(u,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],s=i[0],u=i[1],c=Math.ceil(t[n-1]/2),l=c*Math.ceil(t[n-2]/2),d="int b, int row, int col",f="b * ".concat(l," + (row / 2) * ").concat(c," + (col / 2)"),p=2;p<n-1;p++)d="int b".concat(p,", ")+d,l*=t[n-p-1],f="b".concat(p," * ").concat(l," + ")+f;var h=KA();return"\n    vec4 ".concat(a,"(").concat(d,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(s,");\n      return ").concat(h.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e)}}var vN="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",yN="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",bN="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",xN="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function kN(e){return"offset".concat(e)}function wN(e){var t=e.name,n=dC(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function IN(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function CN(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function EN(e,t){return t.map((function(t){return e[t]})).join(", ")}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function SN(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but was executed with ").concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],o=a.shape;if(!fC(r,o))throw Error("Binary was compiled with different shapes than the current args. Shapes ".concat(r," and ").concat(o," must match"));if(!e.isUniform||!a.isUniform){var i=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!fC(i,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape ".concat(i," and ").concat(s," must match"))}}))}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function TN(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&uC("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function AN(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var NN={kernelName:"Abs",backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;TN(t,"abs");var r=new Float32Array(dC(t.shape));return r=AN(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function _N(e){return function(t,n,r,a,o){var i=nT(t,n),s=i.length,u=NC(i),c=xC(o,dC(i)),l=t.length,d=n.length,f=NC(t),p=NC(n),h=eT(t,i),m=eT(n,i);if(h.length+m.length===0)for(var g=0;g<c.length;++g)c[g]=e(r[g%r.length],a[g%a.length]);else for(var v=function(t){var n=BC(t,s,u),o=n.slice(-l);h.forEach((function(e){return o[e]=0}));var i=DC(o,l,f),g=n.slice(-d);m.forEach((function(e){return g[e]=0}));var v=DC(g,d,p);c[t]=e(r[i],a[v])},y=0;y<c.length;++y)v(y);return[c,i]}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function RN(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(a.shape,"float32",i)},s}var ON={kernelName:"Complex",backendName:"cpu",kernelFunc:RN};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function FN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n)return RN({inputs:{real:FN(e,t,"float32"),imag:FN(e,t,"float32")},backend:e});var r=OC(dC(t),n);return e.makeTensorInfo(t,n,r)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function MN(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var DN={kernelName:"Identity",backendName:"cpu",kernelFunc:MN};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function BN(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var PN={kernelName:"Real",backendName:"cpu",kernelFunc:BN};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function LN(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dtype;if("complex64"===o){if("complex64"===a.dtype)return MN({inputs:{x:a},backend:n});var i=FN(n,a.shape,a.dtype),s=LN({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=RN({inputs:{real:s,imag:i},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var c=BN({inputs:{input:a},backend:n}),l=LN({inputs:{x:c},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(c),l}if(!wC(a.dtype,o)){var d=MN({inputs:{x:a},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:o}}if("int32"===o){var f=n.data.get(a.dataId).values,p=Int32Array.from(f);return n.makeTensorInfo(a.shape,"int32",p)}if("bool"===o){var h=n.data.get(a.dataId).values,m=ZC([0],a.dtype),g=qy(_N((function(e,t){return e!==t?1:0}))(a.shape,[],h,m,"bool"),2),v=g[0],y=g[1];return n.makeTensorInfo(y,"bool",v)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(o))}var UN={kernelName:"Cast",backendName:"cpu",kernelFunc:LN};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function VN(e,t,n,r){return null==n?function(n){var a=n.inputs,o=n.backend,i=a.a,s=a.b,u=o;TN([i,s],e);var c=u.data.get(i.dataId).values,l=u.data.get(s.dataId).values,d=r||i.dtype,f=qy(t(i.shape,s.shape,c,l,d),2),p=f[0],h=f[1];return u.makeTensorInfo(h,d,p)}:function(e){var a=e.inputs,o=e.backend,i=a.a,s=a.b,u=o;if("complex64"===i.dtype||"complex64"===s.dtype){var c=LN({inputs:{x:i},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),d=l.complexTensorInfos.real,f=l.complexTensorInfos.imag,p=u.data.get(d.dataId).values,h=u.data.get(f.dataId).values,m=LN({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),g=u.data.get(m.dataId),v=g.complexTensorInfos.real,y=g.complexTensorInfos.imag,b=u.data.get(v.dataId).values,x=u.data.get(y.dataId).values,k=qy(n(i.shape,s.shape,p,h,b,x),3),w=k[0],I=k[1],C=k[2],E=u.makeTensorInfo(C,"float32",w),S=u.makeTensorInfo(C,"float32",I),T=RN({inputs:{real:E,imag:S},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(E),u.disposeIntermediateTensorInfo(S),T}var A=u.data.get(i.dataId).values,N=u.data.get(s.dataId).values,_=r||i.dtype,R=qy(t(i.shape,s.shape,A,N,_),2),O=R[0],F=R[1];return u.makeTensorInfo(F,_,O)}}function WN(e){return function(t,n,r,a,o,i){var s=nT(t,n),u=dC(s),c=s.length,l=NC(s),d=xC("float32",u),f=xC("float32",u),p=eT(t,s),h=eT(n,s),m=QT(r,a),g=QT(o,i),v=t.length,y=NC(t),b=n.length,x=NC(n);if(p.length+h.length===0)for(var k=0;k<d.length;k++){var w=k%m.length,I=k%g.length,C=e(m[2*w],m[2*w+1],g[2*I],g[2*I+1]);d[k]=C.real,f[k]=C.imag}else for(var E=function(t){var n=BC(t,c,l),r=n.slice(-v);p.forEach((function(e){return r[e]=0}));var a=DC(r,v,y),o=n.slice(-b);h.forEach((function(e){return o[e]=0}));var i=DC(o,b,x),s=e(m[2*a],m[2*a+1],g[2*i],g[2*i+1]);d[t]=s.real,f[t]=s.imag},S=0;S<d.length;S++)E(S);return[d,f,s]}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var zN=_N((function(e,t){return e+t})),jN=VN("Add",zN,WN((function(e,t,n,r){return{real:e+n,imag:t+r}}))),HN={kernelName:"Add",backendName:"cpu",kernelFunc:jN};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function GN(e,t,n,r,a){for(var o=dC(r),i=OC(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(i[u]+=o>0?t[s]:1)}return i}function KN(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],o=e.shape[1],i=dS([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<o;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?i.set(1,s,c):t.size>0?i.set(i.get(s,c)+t.get(s,u),s,c):i.set(i.get(s,c)+1,s,c))}return i}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function qN(e){return function(t,n,r){for(var a=xC(n,t.length),o=0;o<t.length;++o)a[o]=e(t[o],r);return a}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function XN(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(TN(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=i,c=u.data.get(s.dataId).values,l=dC(s.shape),d=n||s.dtype,f=kC(d,l),p=0;p<l;++p)f[p]=t(c[p],o);return u.makeTensorInfo(s.shape,d,f)}}function QN(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(TN(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=i,c=u.data.get(s.dataId).values,l=n||s.dtype,d=t(c,l,o);return u.makeTensorInfo(s.shape,l,d)}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var YN=qN((function(e){return Math.ceil(e)})),$N={kernelName:"Ceil",backendName:"cpu",kernelFunc:QN("Ceil",YN)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function ZN(e,t,n,r){var a=kC(n,dC(t));if(r&&"string"!==n){var o=0;e.forEach((function(e){var t=dC(e.shape);a.set(e.vals,o),o+=t}))}else{var i=0;e.forEach((function(e){for(var r="string"===n?uA(e.vals):e.vals,o=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+i,c=0;c<e.shape[1];++c)a[u+c]=r[o++];i+=e.shape[1]}))}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var JN=qN((function(e){return Math.exp(e)})),e_=QN("Exp",JN),t_={kernelName:"Exp",backendName:"cpu",kernelFunc:e_},n_=qN((function(e){return Math.expm1(e)})),r_={kernelName:"Expm1",backendName:"cpu",kernelFunc:QN("Expm1",n_)},a_=qN((function(e){return Math.floor(e)})),o_={kernelName:"Floor",backendName:"cpu",kernelFunc:QN("Floor",a_)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function i_(e,t,n){for(var r=dS(n,e.dtype),a=0;a<r.size;++a){var o=r.indexToLoc(a).slice(),i=o[0],s=o[2],u=t.locToIndex([i,s]);o[2]=t.values[u];var c=e.locToIndex(o);r.values[a]=e.values[c]}return r}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var s_=_N((function(e,t){return e>t?1:0})),u_={kernelName:"Greater",backendName:"cpu",kernelFunc:VN("Greater",s_,null,"bool")},c_=_N((function(e,t){return e<t?1:0})),l_={kernelName:"Less",backendName:"cpu",kernelFunc:VN("Less",c_,null,"bool")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function d_(e,t,n){var r=(t-e)/(n-1),a=OC(n,"float32");a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var f_=qN((function(e){return Math.log(e)})),p_={kernelName:"Log",backendName:"cpu",kernelFunc:QN("Log",f_)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function h_(e,t,n,r){for(var a=xC(r,dC(n)),o=0;o<a.length;++o){for(var i=o*t,s=e[i],u=0;u<t;++u){var c=e[i+u];c>s&&(s=c)}a[o]=s}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var m_=_N((function(e,t){return Math.max(e,t)})),g_={kernelName:"Maximum",backendName:"cpu",kernelFunc:VN("Maximum",m_)},v_=_N((function(e,t){return Math.min(e,t)})),y_={kernelName:"Minimum",backendName:"cpu",kernelFunc:VN("Minimum",v_)},b_=_N((function(e,t){return e*t})),x_=WN((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),k_=VN("Multiply",b_,x_),w_={kernelName:"Multiply",backendName:"cpu",kernelFunc:k_};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function I_(e,t,n){var r=$C(-1,n);return b_([],t,r,e,n)}var C_={kernelName:"Neg",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;TN(r,"neg");var a=qy(I_(n.data.get(r.dataId).values,r.shape,r.dtype),2),o=a[0],i=a[1];return n.makeTensorInfo(i,r.dtype,o)}},E_=_N((function(e,t){return e!==t?1:0})),S_={kernelName:"NotEqual",backendName:"cpu",kernelFunc:VN("NotEqual",E_,null,"bool")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function T_(e,t,n,r,a){for(var o=t.length,i=dC(t),s=NC(t),u=NC(a),c=xC(n,dC(a)),l=0;l<i;++l){for(var d=BC(l,o,s),f=new Array(d.length),p=0;p<f.length;p++)f[p]=d[r[p]];c[DC(f,o,u)]=e[l]}return c}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function A_(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.perm;TN(a,"transpose");for(var i=a.shape.length,s=new Array(i),u=0;u<s.length;u++)s[u]=a.shape[o[u]];var c=T_(r.data.get(a.dataId).values,a.shape,a.dtype,o,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var N_={kernelName:"Transpose",backendName:"cpu",kernelFunc:A_};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function __(e,t,n,r){for(var a=qy(uT(e,r),2),o=a[0],i=a[1],s=kE(t,"int32"),u=OC(dC(o),s),c=dC(i),l=0;l<u.length;++l){for(var d=l*c,f=1,p=0;p<c;++p)f*=n[d+p];u[l]=f}return{outVals:u,outShape:o,outDtype:s}}var R_={kernelName:"Prod",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;TN(a,"prod");var s=a.shape.length,u=yC(o,a.shape),c=dT(u,s),l=u,d=a,f=[];null!=c&&(d=A_({inputs:{x:a},backend:n,attrs:{perm:c}}),f.push(d),l=pT(l.length,s));var p=n.data.get(d.dataId).values,h=__(d.shape,d.dtype,p,l),m=h.outVals,g=h.outShape,v=h.outDtype,y=g;return i&&(y=cT(g,u)),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,v,m)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function O_(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return OC(0,r);var a=OC(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+n;return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var F_=qN((function(e){return 1/Math.sqrt(e)})),M_={kernelName:"Rsqrt",backendName:"cpu",kernelFunc:QN("Rsqrt",F_)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function D_(e,t,n,r,a){var o=NS(r,t,n),i=dC(n),s=NC(r);if(o){var u=_S(t,s);return"string"===a?e.slice(u,u+i):e.subarray(u,u+i)}for(var c=dS(r,a,"string"===a?uA(e):e),l=dS(n,a),d=0;d<l.size;++d){var f=l.indexToLoc(d),p=f.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,Xy(p))].concat(Xy(f)))}return"string"===a?cA(l.values):l.values}function B_(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.size;TN(a,"slice");var s=qy(RS(a,o,i),2),u=s[0],c=s[1];vS(a,u,c);var l=D_(n.data.get(a.dataId).values,u,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,l)}var P_={kernelName:"Slice",backendName:"cpu",kernelFunc:B_},L_=_N((function(e,t){var n=e-t;return n*n})),U_={kernelName:"SquaredDifference",backendName:"cpu",kernelFunc:VN("SquaredDifference",L_)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function V_(e,t,n,r){for(var a=dS(e,t.dtype),o=0;o<a.size;o++){for(var i=a.indexToLoc(o),s=new Array(i.length),u=0;u<s.length;u++)s[u]=i[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat(Xy(i)))}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var W_=_N((function(e,t){return e-t})),z_=VN("Sub",W_,WN((function(e,t,n,r){return{real:e-n,imag:t-r}}))),j_={kernelName:"Sub",backendName:"cpu",kernelFunc:z_};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function H_(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=dS(n,e.dtype),o=0;o<a.values.length;++o){for(var i=a.indexToLoc(o),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=i[u]%e.shape[u];var c=e.locToIndex(s);a.values[o]=e.values[c]}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function G_(e,t,n,r,a){for(var o=t[t.length-1],i=e.length/o,s=o,u=xC(n,i*r),c=xC("int32",i*r),l=0;l<i;l++){for(var d=l*s,f=e.subarray(d,d+s),p=[],h=0;h<f.length;h++)p.push({value:f[h],index:h});p.sort((function(e,t){return t.value-e.value}));for(var m=l*r,g=u.subarray(m,m+r),v=c.subarray(m,m+r),y=0;y<r;y++)g[y]=p[y].value,v[y]=p[y].index}var b=t.slice();return b[b.length-1]=r,[dS(b,n,u),dS(b,"int32",c)]
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function K_(e,t,n,r){for(var a=yC(t,n)[0],o=[1,n[0],1],i=0;i<a;i++)o[0]*=n[i];o[1]=n[a];for(var s=a+1;s<n.length;s++)o[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new lE(o,r,e),d=[],f=1===o[0]&&1===o[2],p=0;p<n[a];p++){var h=void 0;if(f)h=e[p].toString();else{for(var m=[],g=0;g<o[0];g++)for(var v=0;v<o[2];v++)m.push(l.get(g,p,v));h=m.join(",")}if(void 0!==u[h])c[p]=u[h];else{var y=Object.keys(u).length;u[h]=y,c[p]=y,d.push(p)}}var b=o.slice();b[1]=Object.keys(u).length;var x=new lE(b,r);d.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)x.set(l.get(n,e,r),n,t,r)}));var k=n.slice();return k[a]=b[1],{outputValues:x.values,outputShape:k,indices:c}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var q_=Object.freeze({__proto__:null,simpleAbsImpl:AN,addImpl:zN,bincountImpl:GN,bincountReduceImpl:KN,ceilImpl:YN,concatImpl:ZN,expImpl:JN,expm1Impl:n_,floorImpl:a_,gatherV2Impl:i_,greaterImpl:s_,lessImpl:c_,linSpaceImpl:d_,logImpl:f_,maxImpl:h_,maximumImpl:m_,minimumImpl:v_,multiplyImpl:b_,negImpl:I_,notEqualImpl:E_,prodImpl:__,rangeImpl:O_,rsqrtImpl:F_,sliceImpl:D_,squaredDifferenceImpl:L_,stridedSliceImpl:V_,subImpl:W_,tileImpl:H_,topKImpl:G_,transposeImpl:T_,uniqueImpl:K_}),X_=q_.addImpl,Q_=q_.bincountImpl,Y_=q_.bincountReduceImpl,$_=q_.ceilImpl,Z_=q_.concatImpl,J_=q_.expImpl,eR=q_.expm1Impl,tR=q_.floorImpl,nR=q_.gatherV2Impl,rR=q_.greaterImpl,aR=q_.lessImpl,oR=q_.linSpaceImpl,iR=q_.logImpl,sR=q_.maxImpl,uR=q_.maximumImpl,cR=q_.minimumImpl,lR=q_.multiplyImpl,dR=q_.negImpl,fR=q_.prodImpl,pR=q_.rangeImpl,hR=q_.rsqrtImpl,mR=q_.simpleAbsImpl,gR=q_.sliceImpl,vR=q_.stridedSliceImpl,yR=q_.subImpl,bR=q_.tileImpl,xR=q_.topKImpl,kR=q_.transposeImpl,wR=q_.uniqueImpl;
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function IR(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function CR(e,t){return 1===t?[e]:IR(e,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ER=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(0===n)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var r=CR("rc",n),a=IN(n),o=function(e,t,n){if(1===e)return"rc > ".concat(t[0]);for(var r="",a=e-2;a<e;a++)r+="".concat(n[a]," >= ").concat(t[a]),a<e-1&&(r+="||");return r}(n,t,r),i=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = ".concat(a[0],";\n    int c = ").concat(a[1],";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ").concat(t,";\n    bool rEdge = rp1 >= ").concat(n,";\n  ")}(n,t[t.length-1],t[t.length-2],r),s=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var o="".concat(0===r?"r":"rp1",", ").concat(0===a?"c":"cp1"),i=2;i<e;i++)o="".concat(t[t.length-1-i],",")+o;n.push(o)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= ".concat(e[0]," ? 0. : getA(rc + 1),\n            0, 0"):"getA(".concat(r[0],"),\n          cEdge ? 0. : getA(").concat(r[1],"),\n          rEdge ? 0. : getA(").concat(r[2],"),\n          rEdge || cEdge ? 0. : getA(").concat(r[3],")")}
/**
	     * @license
	     * Copyright 2018 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(t,r);this.userCode="\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n\n          if(").concat(o,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(s,"));\n          }\n        }\n      ")}},SR=function e(t,n){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r,a="",o=0;o<4;o++){var i="thisRC = rc;";o%2==1&&(i+="thisRC.z += 1;"),o>1&&(i+="thisRC.y += 1;"),a+="\n        ".concat(i,"\n        ").concat(o>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(o,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(o>0?"}":"","\n      ")}
/**
	   * @license
	   * Copyright 2017 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
this.userCode="\n      ".concat((r=n,"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(qA(["r","c","d"],r),"\n      return ivec3(r, c, d);\n    }\n  ")),"\n      ").concat(XA(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(t[1],";\n        int cols = ").concat(t[2],";\n\n        ").concat(a,"\n\n        setOutput(result);\n      }\n    ")},TR=function(){function e(t){_y(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return Oy(e,[{key:"acquireTexture",value:function(e,t,n){var r=NR(t,n),a=_R(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var o,i=AR(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===fA.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===fA.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===fA.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===fA.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===fA.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=NR(n,r),o=_R(t,a,r);o in this.freeTextures||(this.freeTextures[o]=[]);var i=AR(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=UC().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=i):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;var u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}}]),e}();function AR(e,t,n,r,a){var o,i=function(e,t){switch(e){case fA.PACKED_2X2_FLOAT32:return cN(t);case fA.PACKED_2X2_FLOAT16:return lN(t);case fA.UNPACKED_FLOAT32:return iN(t);case fA.UNPACKED_FLOAT16:return sN(t);case fA.PACKED_4X1_UNSIGNED_BYTE:return uN(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=qy(bA(e[0],e[1]),2);o=s[0]*s[1]}else{var u=qy(vA(e[0],e[1]),2);o=u[0]*u[1]}return o*function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;throw new Error("Unknown internal format ".concat(t))}(n,i)}function NR(e,t){if(e===dA.UPLOAD)return fA.PACKED_2X2_FLOAT32;if(e===dA.RENDER||null==e)return function(e){return UC().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?fA.PACKED_2X2_FLOAT32:fA.UNPACKED_FLOAT32:e?fA.PACKED_2X2_FLOAT16:fA.UNPACKED_FLOAT16}(t);if(e===dA.DOWNLOAD||e===dA.PIXELS)return fA.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function _R(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var RR=function e(t,n){_y(this,e),this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},OR="return abs(x);",FR="return x;",MR=function e(t,n){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},DR=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,r=CR("rc",n),a=IN(n),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),i=r.slice(-2),s=n<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(o,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")},BR=NT,PR={},LR=function(e){Dy(o,e);var t,n,r,a=Hy(o);function o(e){var t,n;if(_y(this,o),(t=a.call(this)).pendingRead=new WeakMap,t.pendingDisposal=new WeakSet,t.dataRefCount=new WeakMap,t.numBytesInGPU=0,t.uploadWaitMs=0,t.downloadWaitMs=0,t.lastGlFlushTime=0,t.warnedAboutMemory=!1,t.warnedAboutCPUBackend=!1,t.pendingDeletes=0,t.disposed=!1,!UC().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var r=gA(UC().getNumber("WEBGL_VERSION"));t.binaryCache=((n=UC().getNumber("WEBGL_VERSION"))in PR||(PR[n]={}),PR[n]),t.gpgpu=new fN(r),t.canvas=r.canvas,t.gpgpuCreatedLocally=!0}else t.gpgpu=e,t.binaryCache={},t.gpgpuCreatedLocally=!1,t.canvas=e.gl.canvas;return t.textureManager=new TR(t.gpgpu),t.numMBBeforeWarning=null==UC().global.screen?1024:UC().global.screen.height*UC().global.screen.width*window.devicePixelRatio*600/1024/1024,t.texData=new rC(zy(t),DS()),jy(t)}return Oy(o,[{key:"nextDataId",value:function(){return o.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((UC().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||UC().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:dA.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(UC().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:dA.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,o=t.slice,i=t.shape,s=t.isPacked;if(null!=o){var u;u=s?new MR(i,FR):new RR(i,FR);var c=this.runWebGLProgram(u,[{dataId:e,shape:i,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,f,p=null!=this.activeTimers;return p&&(d=JC()),f="complex64"===r?QT(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.getValuesFromTexture(e),p&&(this.downloadWaitMs+=JC()-d),this.convertAndCacheOnCPU(e,f)}},{key:"read",value:(r=Ny(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,f,p,h,m,g,v,y,b,x,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,o=r.shape,i=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==i){e.next=8;break}return l=c?new MR(o,FR):new RR(o,FR),d=this.runWebGLProgram(l,[{dataId:t,shape:o,dtype:s}],s),f=this.read(d.dataId),e.abrupt("return",(this.disposeIntermediateTensorInfo(d),f));case 8:if(null==a){e.next=10;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 10:if(UC().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==UC().getNumber("WEBGL_VERSION")){e.next=12;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 12:if(m=null,"complex64"!==s&&UC().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),v=this.texData.get(p.dataId),m=(g=this.gpgpu).createBufferFromTexture.apply(g,[v.texture].concat(Xy(yA(o))))),this.pendingRead.set(t,[]),e.t0="complex64"!==s,!e.t0){e.next=19;break}return e.next=19,this.gpgpu.createAndWaitForFence();case 19:if("complex64"!==s){e.next=26;break}return e.next=22,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 22:y=e.sent,h=QT(y[0],y[1]),e.next=27;break;case 26:null==m?h=this.getValuesFromTexture(t):(b=dC(o),h=this.gpgpu.downloadFloat32MatrixFromBuffer(m,b));case 27:return null!=p&&this.disposeIntermediateTensorInfo(p),x=this.convertAndCacheOnCPU(t,h),k=this.pendingRead.get(t),e.abrupt("return",(this.pendingRead.delete(t),k.forEach((function(e){return e(x)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&DS().removeDataId(t,this),this.pendingDeletes--),x));case 30:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return tE(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return dS(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!wA(n)){if(UC().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"));throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,o=dC(n);if(UC().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var i,s=this.decode(e),u=this.texData.get(s.dataId),c=(i=this.gpgpu).downloadMatrixFromPackedTexture.apply(i,[u.texture].concat(Xy(yA(n)))).subarray(0,o);return this.disposeIntermediateTensorInfo(s),c}var l=UC().getBool("WEBGL_PACK")&&!0===a,d=l?PA(n):n,f=l?new JA(d):new ZA(d),p=this.runWebGLProgram(f,[{shape:d,dtype:r,dataId:e}],"float32"),h=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture,h.texShape[0],h.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(p),m}},{key:"timerAvailable",value:function(){return UC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:(n=Ny(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.activeTimers,r=[],a=!1,null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,t(),o=lC(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=lC(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=n,a&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},!(UC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=13;break}return e.next=9,Promise.all(o);case 9:u=e.sent,s.kernelMs=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}(u),s.getExtraProfileInfo=function(){return u.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=14;break;case 13:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 14:return e.abrupt("return",(this.uploadWaitMs=0,this.downloadWaitMs=0,s));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return UC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:JC(),endMs:null}}},{key:"endTimer",value:function(e){return UC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=JC(),e)}},{key:"getQueryTime",value:(t=Ny(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(UC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,o=t.usage,i=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,o,i)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"getCPUBackend",value:function(){return UC().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=DS().findBackend("cpu")),this.cpuBackend):null}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,r=this.getCPUBackend();return UC().getBool("IS_TEST")||this.warnedAboutCPUBackend||null!=r||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=r&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&dC(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){XT("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return BR(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new MR(e.shape,t),a=this.compileAndRun(r,[e],n);return DS().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=mR(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(UC().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,OR,e.dtype);var n=new RR(e.shape,OR),r=this.compileAndRun(n,[e]);return DS().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&EC(n[0])){var a=n.map((function(e){return eE(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return DS().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new DR(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new ER(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[DA(e.shape)].concat(Xy(BA(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[DA(t)].concat(Xy(BA(t))),o=new SR(a,n),i=this.runWebGLProgram(o,[r],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}},{key:"decode",value:function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,o=n.dtype,i=PA(a);return t=r?new $A(i):new YA(i),{dtype:o,shape:a,dataId:this.runWebGLProgram(t,[{shape:i,dtype:o,dataId:e}],o,null,!0).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(i.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===lA.DENSE){var u=yA(e.outputShape);s.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===dC(i.shape))return s.values=xC(i.dtype,0),i;var c=[],l=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&dC(t.shape)<=UC().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!UA(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=a.packedReshape(t,o),c.push(t),n=a.texData.get(t.dataId),r.shape=o}return a.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);var d,f={shape:i.shape,texData:s,isUniform:!1},p=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+="".concat(e.shape,"_").concat(n,"_").concat(t)}));var a=e.userCode,o=e.constructor.name;return o+="_"+r+"_"+a}(e,l,f),h=this.getAndSaveBinary(p,(function(){return function(e,t,n,r){var a=t.userCode,o=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=o.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=hN(o,s,a,t.packedInputs),c=e.createProgram(u),l=null,d=e.getUniformLocation(c,"NAN",!1);1===UC().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1));for(var f={},p=0;p<t.variableNames.length;p++){var h=t.variableNames[p];f[h]=e.getUniformLocation(c,h,false),f["offset".concat(h)]=e.getUniformLocation(c,"offset".concat(h),false)}return{program:t,source:u,webGLProgram:c,uniformLocations:f,inShapeInfos:i,outShapeInfo:s,infLoc:l,nanLoc:d}}(a.gpgpu,e,l,f)})),m=null!=this.activeTimers;m&&(d=this.startTimer()),function(e,t,n,r,a){SN(t.inShapeInfos,n),SN([t.outShapeInfo],[r]);var o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o,i[0],i[1]):e.setOutputMatrixTexture(o,i[0],i[1]),e.setProgram(t.webGLProgram),1===UC().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],o=t.uniformLocations[a],i=t.uniformLocations["offset".concat(a)];if(null!=o)if(n.isUniform)if(dC(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(o,s)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,r)})),null!=a&&a(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,h,l,f,r),c.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),m&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)}));var g=UC().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var v=JC();v-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!UC().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){var y=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),y}return i}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;this.disposed||(UC().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}},{key:"floatPrecision",value:function(){var e,t=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(e=function(){if(!UC().get("WEBGL_RENDER_FLOAT32_ENABLED")){var e=UC().getBool("DEBUG");UC().set("DEBUG",!1);var n=t.abs(TT(1e-8)).dataSync()[0];if(UC().set("DEBUG",e),n>0)return 32}return 16},NE.tidy(e,undefined))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,o=t.texture,i=t.usage,s=t.isPacked;if(null==o){var u,c=null!=this.activeTimers;c&&(u=JC());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=UC().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?sC(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=bC(e);e=r.newShape}var a=dC(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var o,i=DA(e),s=2,u=2;return e.length&&(s=(o=qy(BA(e),2))[0],u=o[1]),hC(a=i*(s/2)*(u/2)).map((function(e){return 2*e}))}return hC(a)}(n,s),t.texShape=l),null!=a){var d,f,p=PA(n),h=l[1],m=l[0],g=a instanceof Uint8Array;s?(h=(d=qy(bA(l[0],l[1]),2))[0],m=d[1],f=new tN(p,[m,h],g)):f=new eN(p,[m,h],g);var v=this.makeTensorInfo([m,h],r);this.texData.get(v.dataId).usage=g?dA.PIXELS:dA.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),h,m,a);var y=this.runWebGLProgram(f,[v],r,null,!0),b=this.texData.get(y.dataId);t.texture=b.texture,t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,this.disposeIntermediateTensorInfo(v),this.texData.delete(y.dataId),t.values=null,c&&(this.uploadWaitMs+=JC()-u)}else{var x=this.acquireTexture(l,i,r,s);t.texture=x}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}
/**
	       * @license
	       * Copyright 2020 Google Inc. All Rights Reserved.
	       * Licensed under the Apache License, Version 2.0 (the "License");
	       * you may not use this file except in compliance with the License.
	       * You may obtain a copy of the License at
	       *
	       * http://www.apache.org/licenses/LICENSE-2.0
	       *
	       * Unless required by applicable law or agreed to in writing, software
	       * distributed under the License is distributed on an "AS IS" BASIS,
	       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	       * See the License for the specific language governing permissions and
	       * limitations under the License.
	       * =============================================================================
	       */(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, most likely due to a memory leak"))}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*CC(t)}}]),o}(aC);LR.nextDataId=0,OE()&&LS("webgl",(function(){return new LR}),2)
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */;var UR=function e(t,n,r){_y(this,e),this.variableNames=["A","B"],this.outputShape=nT(n,r),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")},VR=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_y(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=nT(n,r);var o=this.outputShape.length,i="";if(a)if(0===o||1===dC(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          ".concat(IN(o)," coords = getOutputCoords();\n        "),1===o)i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var s=CR("coords",o);i+="\n            bool nextRowOutOfBounds =\n              (".concat(s[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(s[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function WR(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var zR={kernelName:"Identity",backendName:"webgl",kernelFunc:WR};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function jR(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),s=WR({inputs:{x:r},backend:n}),u=WR({inputs:{x:a},backend:n});return i.complexTensorInfos={real:s,imag:u},o}var HR={kernelName:"Complex",backendName:"webgl",kernelFunc:jR},GR="return (a < 0.) ? b * a : a;",KR="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",qR={kernelName:"LeakyRelu",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha,i=n.makeTensorInfo([],"float32",$C(o,"float32")),s=UC().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new VR(KR,a.shape,i.shape):new UR(GR,a.shape,i.shape),u=n.runWebGLProgram(s,[a,i],a.dtype);return n.disposeIntermediateTensorInfo(i),u}},XR="return (a < 0.) ? b * a : a;",QR="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",YR={kernelName:"Prelu",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=UC().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new VR(QR,r.shape,a.shape):new UR(XR,r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function $R(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var o,i=e.inputs,s=e.backend,u=i.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var d=c.texData.get(u.dataId),f=r(d.values,l);return c.makeTensorInfo(u.shape,l,f)}return o=UC().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new MR(u.shape,n):new RR(u.shape,t),c.runWebGLProgram(o,[u],l)}}function ZR(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,o=e.supportsComplex,i=void 0!==o&&o,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,o=e.backend,c=r.a,l=r.b,d=o;if(i&&"complex64"===c.dtype){var f=d.texData.get(c.dataId),p=d.texData.get(l.dataId),h=[[f.complexTensorInfos.real,p.complexTensorInfos.real],[f.complexTensorInfos.imag,p.complexTensorInfos.imag]].map((function(e){var n=qy(e,2),r=n[0],a=n[1],o={dataId:r.dataId,dtype:r.dtype,shape:c.shape},i={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new UR(t,c.shape,l.shape);return d.runWebGLProgram(s,[o,i],kE(r.dtype,a.dtype))})),m=qy(h,2),g=m[0],v=m[1],y=jR({inputs:{real:g,imag:v},backend:d});return d.disposeIntermediateTensorInfo(g),d.disposeIntermediateTensorInfo(v),y}var b,x=u||kE(c.dtype,l.dtype);if(d.shouldExecuteOnCPU([c,l])&&null!=s){var k=d.texData.get(c.dataId),w=d.texData.get(l.dataId),I=qy(s(c.shape,l.shape,k.values,w.values,x),2),C=I[0],E=I[1],S=d.makeTensorInfo(E,x);return d.texData.get(S.dataId).values=C,S}return b=UC().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new VR(n,c.shape,l.shape,a):new UR(t,c.shape,l.shape),d.runWebGLProgram(b,[c,l],x)}}function JR(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return t?QR:XR;if("leakyrelu"===e)return t?KR:GR;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var eO=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];_y(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;var l=a?t[1]:t[2],d=Math.ceil(l/2),f=a?"i * 2, rc.y":"rc.y, i * 2",p=o?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",v="";s&&(g=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),v="result = activation(result);");var y=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(g,"\n\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(d,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(f,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(m[0],");\n          result += (").concat(h[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(v,"\n\n        setOutput(result);\n      }\n    ")},tO="return areal * breal - aimag * bimag;",nO="return areal * bimag + aimag * breal;",rO=function e(t,n,r){_y(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=nT(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")},aO="return a * b;";
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function oO(e){var t,n=e.inputs,r=e.backend,a=n.a,o=n.b,i=kE(a.dtype,o.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(o.dataId),c=new rO(tO,a.shape,o.shape),l=new rO(nO,a.shape,o.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:o.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:o.shape}],f=r.runWebGLProgram(c,d,"float32"),p=r.runWebGLProgram(l,d,"float32"),h=jR({inputs:{real:f,imag:p},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(p),h}if(r.shouldExecuteOnCPU([a,o])){var m=r.texData.get(a.dataId),g=r.texData.get(o.dataId),v=qy(lR(a.shape,o.shape,m.values,g.values,i),2),y=v[0],b=v[1],x=r.makeTensorInfo(b,i);return r.texData.get(x.dataId).values=y,x}return t=UC().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new VR(aO,a.shape,o.shape):new UR(aO,a.shape,o.shape),r.runWebGLProgram(t,[a,o],i)}var iO={kernelName:"Multiply",backendName:"webgl",kernelFunc:oO};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function sO(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=n,s=dC(a.shape),u=vC(o,s),c=dC(u);uC(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old shape (").concat(a.shape,") has ").concat(s," elements. The new shape and old shape must have the same number of elements.")}));var l=i.texData.get(a.dataId);return!l.isPacked||UA(a.shape,u)||null!==l.texture&&UA(l.shape,u)?(i.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[DA(e.shape)].concat(Xy(BA(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},o=[DA(t)].concat(Xy(BA(t))),i=new SR(o,r),s=n.runWebGLProgram(i,[a],e.dtype,null,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}(a,u,i)}var uO={kernelName:"Reshape",backendName:"webgl",kernelFunc:sO},cO=function e(t,n){_y(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(pC(l)?l.toPrecision(2):l,", ones);")}var d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")},lO=function e(t,n){_y(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),d=r%4,f="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n      }\n    "),p="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var h="";o%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(f,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(2===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(3===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(f,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function dO(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=WT(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),o=e,i=0;i<a.length;i++){var s,u,c=a[i],l=c.inSize,d=c.windowSize,f=c.outSize;s="mean"===n?0===i?new cO({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:f},l):new cO({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:f}):new lO({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:f},n),u=o,o=r.runWebGLProgram(s,[o],t),u.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(u)}return o}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var fO=function e(t,n){_y(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var o=IN(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}
/**
	   * @license
	   * Copyright 2019 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(n);this.userCode="\n    void main() {\n      ".concat(o," resRC = getOutputCoords();\n      setOutput(getA(").concat(i,"));\n    }\n    ")},pO=function e(t,n){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var o=IN(this.rank),i=IR("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=i[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(i[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(o," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(l,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(i[this.rank-1],";\n      if(++").concat(i[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(l,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function hO(e,t,n){var r=UC().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new pO(e.shape,t):new fO(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function mO(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,o=e.shape.length,i=yC(a,e.shape),s=i,u=dT(s,o),c=null!=u,l=e;c&&(l=hO(e,u,r),s=pT(s.length,o)),lT("sum",s,o);var d=qy(uT(l.shape,s),2),f=d[0],p=d[1],h=f;n&&(h=cT(f,i));var m=dC(p),g=sO({inputs:{x:l},attrs:{shape:[dC(e.shape)/m,m]},backend:r}),v=dO(g,wE(e.dtype),"sum",r),y=sO({inputs:{x:v},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(v),c&&r.disposeIntermediateTensorInfo(l),y}(t.x,r.axis,r.keepDims,n)}var gO={kernelName:"Sum",backendName:"webgl",kernelFunc:mO};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function vO(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.perm,s=r,u=o.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=o.shape[i[l]];if(s.shouldExecuteOnCPU([o])){var d=s.texData.get(o.dataId).values,f=kR(d,o.shape,o.dtype,i,c);t=s.makeTensorInfo(c,o.dtype),s.texData.get(t.dataId).values=f}else t=hO(o,i,s);return t}var yO={kernelName:"Transpose",backendName:"webgl",kernelFunc:vO};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function bO(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,p=void 0===f?null:f,h=t.shape.length,m=n.shape.length,g=r?t.shape[h-2]:t.shape[h-1],v=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[h-1]:t.shape[h-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),k=n.shape.slice(0,-2),w=dC(x),I=dC(k);uC(h>=2&&m>=2&&(w===I||1===w||1===I),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (".concat(x,") and (").concat(k,").")}));var C=(w>I?t.shape.slice(0,-2):n.shape.slice(0,-2)).concat([y,b]);uC(g===v,(function(){return"Error in matMul: inner shapes (".concat(g,") and (").concat(v,") of Tensors with shapes ").concat(t.shape," and ").concat(n.shape," and transposeA=").concat(r," and transposeB=").concat(a," must match.")}));var E,S=r?[w,g,y]:[w,y,g],T=a?[I,b,v]:[I,v,b],A=sO({inputs:{x:t},backend:o,attrs:{shape:S}}),N=sO({inputs:{x:n},backend:o,attrs:{shape:T}}),_=[A,N],R=Math.max(w,I),O=r?A.shape[1]:A.shape[2],F=null!=s,M=null!=c,D="leakyrelu"===p,B=null!=p?JR(p,!0):null;if((1===y||1===b)&&O>1e3&&!1===(F||M||D||null!=B)){var P=A,L=N;r&&(P=vO({inputs:{x:A},backend:o,attrs:{perm:[0,2,1]}}),_.push(P)),a&&(L=vO({inputs:{x:N},backend:o,attrs:{perm:[0,2,1]}}),_.push(L));var U=1===b,V=P;1!==b&&(V=sO({inputs:{x:P},backend:o,attrs:{shape:[R,O,1]}}),_.push(V));var W=1===b?2:1,z=L;U&&(z=sO({inputs:{x:L},backend:o,attrs:{shape:[R,1,O]}}),_.push(z));var j=oO({inputs:{a:V,b:z},backend:o});E=mO({inputs:{x:j},backend:o,attrs:{axis:W,keepDims:!0}}),_.push(j)}else{var H=kE(t.dtype,n.dtype),G=new eO(S,T,[R,y,b],r,a,F,B,M,D),K=[A,N];if(null!=s&&K.push(s),M&&K.push(c),D){var q=o.makeTensorInfo([],"float32",$C(d,"float32"));K.push(q),_.push(q)}E=o.runWebGLProgram(G,K,H)}var X=sO({inputs:{x:E},backend:o,attrs:{shape:C}});_.push(E);for(var Q=0,Y=_;Q<Y.length;Q++){var $=Y[Q];o.disposeIntermediateTensorInfo($)}return X}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var xO={kernelName:"_FusedMatMul",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return bO({a:a,b:o,transposeA:u,transposeB:c,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},kO={kernelName:"Abs",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var o=r.texData.get(a.dataId),i=mR(o.values);return r.makeTensorInfo(a.shape,a.dtype,i)}return t=UC().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new MR(a.shape,"return abs(x);"):new RR(a.shape,"return abs(x);"),r.runWebGLProgram(t,[a],a.dtype)}},wO={kernelName:"Acos",backendName:"webgl",kernelFunc:$R({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"})},IO={kernelName:"Acosh",backendName:"webgl",kernelFunc:$R({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"})},CO="return a + b;",EO={kernelName:"Add",backendName:"webgl",kernelFunc:ZR({opSnippet:CO,packedOpSnippet:CO,supportsComplex:!0,cpuKernelImpl:X_})},SO=function e(t,n){_y(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},TO=function e(t,n){_y(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},AO={kernelName:"AddN",backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return WR({inputs:{x:a[0]},backend:r});if(a.length>UC().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(a.length/2),i=e({inputs:a.slice(0,o),backend:r}),s=e({inputs:a.slice(o),backend:r});return e({inputs:[i,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return kE(e,t)})),c=a.map((function(e){return e.shape})),l=UC().getBool("WEBGL_PACK")?new TO(a[0].shape,c):new SO(a[0].shape,c);return r.runWebGLProgram(l,a,u)}},NO={kernelName:"All",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=yC(o,a.shape),c=u,l=dT(c,s),d=a;null!=l&&(d=vO({inputs:{x:a},backend:n,attrs:{perm:l}}),c=pT(c.length,s)),lT("all",c,s);var f,p=qy(uT(d.shape,c),2),h=p[0],m=sO({inputs:{x:d},backend:n,attrs:{shape:[-1,dC(p[1])]}}),g=dO(m,m.dtype,"all",n);return f=sO(i?{inputs:{x:g},backend:n,attrs:{shape:cT(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),f}},_O={kernelName:"Any",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=yC(o,a.shape),c=u,l=dT(c,s),d=a;null!=l&&(d=vO({inputs:{x:a},backend:n,attrs:{perm:l}}),c=pT(c.length,s)),lT("any",c,s);var f,p=qy(uT(d.shape,c),2),h=p[0],m=sO({inputs:{x:d},backend:n,attrs:{shape:[-1,dC(p[1])]}}),g=dO(m,m.dtype,"any",n);return f=sO(i?{inputs:{x:g},backend:n,attrs:{shape:cT(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),f}},RO=function e(t,n,r){_y(this,e),this.variableNames=["A"];var a=t.windowSize,o=t.batchSize,i=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")},OO=function e(t,n,r,a){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,uC(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var o=t[t.length-1],i=Math.ceil(o/n);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,d=IN(l),f=CR("coords",l);if(1===i){var p=IN(u=l+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(f.join(),", 0);\n        ++").concat(f[l-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(f.join(),", 0);\n        ++").concat(f[l-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(f.join(),", 0);\n        --").concat(f[l-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(f.join(),", 0);\n        --").concat(f[l-2],";")}else u=l,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(f[l-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(f[l-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(f[l-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(f[l-2],";");var h=["x","y","z","w","u","v"].slice(0,u),m="."+h[u-1],g=h.map((function(e){return"int "+e})),v=CR("sourceLocR",u-1).concat("inIdx.r"),y=CR("sourceLocG",u-1).concat("inIdx.g"),b=CR("sourceLocB",u-1).concat("inIdx.b"),x=CR("sourceLocA",u-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(v.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),I="vec4(\n            getAChannel(".concat(v.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),C=a?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(C,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(f[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(f[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(I,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(I,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function FO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],o=t.shape[1];null!=r&&(a=r.shape[0],o=r.shape[1]);var i=WT(o),s={windowSize:i,inSize:o,batchSize:a,outSize:Math.ceil(o/i)},u=new RO(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var d=FO(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}function MO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,o=WT(a[a.length-1]),i=new OO(a,o,n,null==r),s=null==r?[t]:[t,r],u=e.runWebGLProgram(i,s,"int32");if(u.shape.length===t.shape.length){var c=MO(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}return u}function DO(e,t,n,r){var a=[n];if(lT("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!UC().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var o=[],i=qy(uT(t.shape,a),2),s=i[0],u=dC(i[1]),c=sO({inputs:{x:t},backend:e,attrs:{shape:[-1,u]}});o.push(c);var l=FO(e,c,r);o.push(l);var d=sO({inputs:{x:l},backend:e,attrs:{shape:s}});return o.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),d}return MO(e,t,r)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var BO={kernelName:"ArgMax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=yC(r.axis,a.shape),i=dT(o,a.shape.length),s=a,u=[];null!=i&&(s=vO({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(s),o=pT(o.length,s.shape.length)),lT("argMax",[o[0]],s.shape.length);var c=DO(n,s,o[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},PO={kernelName:"ArgMin",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=yC(r.axis,a.shape),i=dT(o,a.shape.length),s=a,u=[];null!=i&&(s=vO({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(s),o=pT(o.length,s.shape.length)),lT("argMin",[o[0]],s.shape.length);var c=DO(n,s,o[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},LO={kernelName:"Asin",backendName:"webgl",kernelFunc:$R({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"})},UO={kernelName:"Asinh",backendName:"webgl",kernelFunc:$R({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"})},VO={kernelName:"Atan",backendName:"webgl",kernelFunc:$R({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"})},WO={kernelName:"Atan2",backendName:"webgl",kernelFunc:ZR({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},zO={kernelName:"Atanh",backendName:"webgl",kernelFunc:$R({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"})},jO=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_y(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,g="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),v="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(m||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?o?g:v:"wR * ".concat(f," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(x="avgValue / count");var k=4*Math.floor(i/4),w=i%4,I="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(I,"\n          }\n\n          int xC = xCCorner + ").concat(k,";\n          if (").concat(1===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(2===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(3===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(I,"\n          }\n        }\n        setOutput(").concat(x,");\n      }\n    ")}},HO=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_y(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,p=t.effectiveFilterDepth,h=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,v=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(v,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(f,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?o?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(h," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(w="avgValue / count");var I=4*Math.floor(i/4),C=i%4,E="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(v,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(I,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(f,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(f,", ch)\n              );\n\n              ").concat(E,"\n            }\n\n            int xC = xCCorner + ").concat(I,";\n            if (").concat(1===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(2===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(3===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                initializationValue\n              );\n\n              ").concat(E,"\n            }\n          }\n          setOutput(").concat(w,");\n        }\n      }\n    ")}},GO={kernelName:"AvgPool",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;HA(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;uC($S(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c=WS(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&fC(c.inShape,c.outShape))return WR({inputs:{x:a},backend:n});var l=new jO(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}},KO={kernelName:"AvgPool3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=zS(a.shape,o,i,[1,1,1],s,u,c),d=new HO(l,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}},qO=function e(t){_y(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,d=c-1-t.padInfo.left,f=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(d,");\n      const float avgMultiplier = float(").concat(f,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},XO=function e(t){_y(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,p=t.effectiveFilterWidth,h=d-1-t.padInfo.front,m=f-1-t.padInfo.top,g=p-1-t.padInfo.left,v=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(m,", ").concat(g,");\n      const float avgMultiplier = float(").concat(v,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},QO={kernelName:"AvgPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=zS(o.shape,i,s,[1,1,1],u,c),d=new XO(l);return n.runWebGLProgram(d,[a],o.dtype)}},YO={kernelName:"AvgPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;HA([a,o],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=WS(i.shape,s,u,1,c),d=new qO(l);return n.runWebGLProgram(d,[a],i.dtype)}},$O={kernelName:"BatchMatMul",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return bO({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},ZO=function e(t,n,r,a,o,i){_y(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],nT(t,n),nT(t,r);var s="0.0";null!=a&&(nT(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=o&&(nT(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")},JO=function e(t,n,r,a,o,i){_y(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],nT(t,n),nT(t,r);var s="vec4(0.0)";null!=a&&(nT(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=o&&(nT(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")},eF={kernelName:"FusedBatchNorm",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.mean,i=t.variance,s=t.offset,u=t.scale;uC(o.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),uC(null==s||o.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),uC(null==u||o.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,o,i],d=null;null!=s&&(d=s.shape,l.push(s));var f=null;null!=u&&(f=u.shape,l.push(u));var p=UC().getBool("WEBGL_PACK_NORMALIZATION")?new JO(a.shape,o.shape,i.shape,d,f,c):new ZO(a.shape,o.shape,i.shape,d,f,c);return n.runWebGLProgram(p,l,l[0].dtype)}},tF=function(){function e(t){_y(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=IN(this.rank),a="uniform int start[".concat(this.rank,"];"),o=function(e){if(1===e)return"sourceLoc";if(e<=6)return nF.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}
/**
	     * @license
	     * Copyright 2019 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(this.rank);n="\n        ".concat(r," sourceLoc;\n        ").concat(r," coords = getOutputCoords();\n        ").concat(t.map((function(e,t){return"sourceLoc.".concat(nF[t]," = start[").concat(t,"] + coords.").concat(nF[t],";")})).join("\n"),"\n      "),this.userCode="\n      ".concat(a,"\n      void main() {\n        ").concat(n,"\n        setOutput(getSource(").concat(o,"));\n      }\n    ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;if(e.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the length of start (").concat(e.length,")"));return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}}}]),e}(),nF=["x","y","z","w","u","v"],rF=function(){function e(t){_y(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=IN(this.rank),r=CR("coords",this.rank),a=CR("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),i="getChannel(getSource(".concat(a.join(),"), ").concat(o,")"),s="\n      result.x = ".concat(i,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      uniform int start[".concat(this.rank,"];\n      void main() {\n        ").concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;if(e.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the length of start (").concat(e.length,")"));return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}}}]),e}();
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function aF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=qy(RS(a,r.begin,r.size),2),i=o[0],s=o[1];if(vS(a,i,s),0===dC(s))return n.makeTensorInfo(s,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var u=n.texData.get(a.dataId),c=gR(u.values,i,s,a.shape,a.dtype);return n.makeTensorInfo(s,a.dtype,c)}var l=n.texData.get(a.dataId).isPacked,d=NS(a.shape,i,s);if(l||!d){var f=UC().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rF(s):new tF(s),p=f.getCustomSetupFunc(i);return n.runWebGLProgram(f,[a],a.dtype,p)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),i=r.texData.get(o.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;var s=_S(t,NC(e.shape));a.slice&&(s+=a.slice.flatOffset),i.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),o}(a,i,s,n)}var oF={kernelName:"Slice",backendName:"webgl",kernelFunc:aF},iF={kernelName:"BatchToSpaceND",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;uC(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=jT(a.shape,o,s),c=HT(u.length,o.length),l=GT(a.shape,o,s),d=KT(i,o.length),f=qT(l,i,o.length),p=[],h=sO({inputs:{x:a},backend:n,attrs:{shape:u}}),m=vO({inputs:{x:h},backend:n,attrs:{perm:c}}),g=sO({inputs:{x:m},backend:n,attrs:{shape:l}}),v=aF({inputs:{x:g},backend:n,attrs:{begin:d,size:f}});return p.push(h),p.push(m),p.push(g),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},sF={kernelName:"Bincount",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=Q_(s,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}},uF=ZR({opSnippet:"return float(a != b);",dtype:"bool"}),cF={kernelName:"NotEqual",backendName:"webgl",kernelFunc:uF};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function lF(e){var t=e.inputs,n=e.backend,r=t.input;return WR({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var dF={kernelName:"Real",backendName:"webgl",kernelFunc:lF},fF={kernelName:"Cast",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function e(t){var n=t.inputs,r=t.backend,a=t.attrs,o=n.x,i=a.dtype;if("complex64"===i){if("complex64"===o.dtype)return WR({inputs:{x:o},backend:r});var s=hT(o.shape),u=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),c=jR({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===o.dtype){var l=lF({inputs:{input:o},backend:r}),d=e({inputs:{x:l},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(l),d}if(!wC(o.dtype,i)){var f=WR({inputs:{x:o},backend:r});return{dataId:f.dataId,shape:f.shape,dtype:i}}if("int32"===i)return function(e,t){var n=new RR(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===i){var p=r.makeTensorInfo([],"bool",xC("bool",1)),h=uF({inputs:{a:o,b:p},backend:r});return r.disposeIntermediateTensorInfo(p),h}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(i))}},pF="return ceil(x);",hF={kernelName:"Ceil",backendName:"webgl",kernelFunc:$R({opSnippet:pF,packedOpSnippet:pF,cpuKernelImpl:$_})},mF=function(){function e(t){_y(this,e),this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return Oy(e,[{key:"getCustomSetupFunc",value:function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}}}]),e}(),gF=function(){function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return Oy(e,[{key:"getCustomSetupFunc",value:function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}}}]),e}(),vF={kernelName:"ClipByValue",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.clipValueMin,s=a.clipValueMax,u=(t=UC().getBool("WEBGL_PACK_CLIP")?new gF(o.shape):new mF(o.shape)).getCustomSetupFunc(i,s);return r.runWebGLProgram(t,[o],o.dtype,u)}},yF=function e(t){_y(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function bF(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var xF={kernelName:"ComplexAbs",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),o=new yF(r.shape),i=[bF(r,a.complexTensorInfos.real),bF(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}},kF=function e(t){_y(this,e),this.outputShape=[],this.outputShape=VT(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],o=1;o<n.length;o++){var i=n[o-1];a.push("else if (yC < ".concat(n[o],") setOutput(getT").concat(o,"(yR, yC-").concat(i,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")},wF=function e(t,n){_y(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=VT(t,n);var r=this.outputShape,a=r.length,o=IN(a),i=CR("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],d=s.slice(-2),f=s.join(),p="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(f,"), vec2(").concat(d.join(),"));\n        }"),h=1;h<u.length;h++){var m=u[h-1];p+="\n        if (".concat(l," < ").concat(u[h],"  && ").concat(l," >= ").concat(u[h-1],") {\n          return getChannel(\n            getT").concat(h,"(").concat(IF(s,l,m),"),\n            vec2(").concat(IF(d,l,m),"));\n        }")}var g=u.length,v=u[u.length-1];p+="\n        return getChannel(\n          getT".concat(g,"(").concat(IF(s,l,v),"),\n          vec2(").concat(IF(d,l,v),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," + 1;\n        if (").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-2]," = ").concat(i[a-2]," + 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," - 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2]," &&\n            ").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function IF(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function CF(e){var t=e.inputs,n=e.backend,r=t.input;return WR({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var EF={kernelName:"Imag",backendName:"webgl",kernelFunc:CF};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function SF(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return lF({inputs:{input:e},backend:n})})),o=e.map((function(e){return CF({inputs:{input:e},backend:n})})),i=SF(a,t,n),s=SF(o,t,n),u=jR({inputs:{real:i,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}if("string"===r){var c=TF(e,t,n),l=c.tensors2D,d=c.outShape,f=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),p=1===l[0].shape[0],h=Z_(f,d,r,p),m=VT(e.map((function(e){return e.shape})),t),g=n.makeTensorInfo(m,r,h);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}if(e.length>UC().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var v=Math.floor(e.length/2),y=SF(e.slice(0,v),t,n),b=SF(e.slice(v),t,n),x=SF([y,b],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}if(UC().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var k=new wF(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(k,e,r)}var w=TF(e,t,n),I=w.tensors2D,C=w.outShape,E=new kF(I.map((function(e){return e.shape}))),S=n.runWebGLProgram(E,I,r);I.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var T=sO({inputs:{x:S},attrs:{shape:C},backend:n});return n.disposeIntermediateTensorInfo(S),T}function TF(e,t,n){var r=VT(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return sO({inputs:{x:e},attrs:{shape:[-1,dC(e.shape.slice(t))]},backend:n})})),outShape:r}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function AF(e){var t=e.inputs,n=e.backend,r=yC(e.attrs.axis,t[0].shape)[0],a=VT(t.map((function(e){return e.shape})),r);if(0===dC(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return dC(e.shape)>0}));return 1===o.length?WR({inputs:{x:o[0]},backend:n}):(UT(o.map((function(e){return e.shape})),r),SF(o,r,n))}var NF={kernelName:"Concat",backendName:"webgl",kernelFunc:AF},_F=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4,g="channelsLast"===t.dataFormat,v=g?1:2,y=g?2:3,b=g?3:1,x="",k="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(v,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(f,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")},RF=function e(t){_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(i,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},OF=function e(t,n,r){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var a=r.filterWidth,o=r.inChannels,i=r.strideWidth,s=r.strideHeight,u=r.padInfo,c=r.outWidth,l=r.dilationWidth,d=r.dilationHeight,f=r.dataFormat,p=u.left,h=u.top,m=o*a,g=KA(),v="channelsLast"===f,y=v?0:1,b=v?1:2,x="",k=0;k<=1;k++)for(var w=0;w<=1;w++)x+="\n          blockIndex = rc.y + ".concat(w,";\n          pos = rc.x + ").concat(k,";\n\n          if(blockIndex < ").concat(t[1]," && pos < ").concat(t[0],") {\n            offsetY = int(blockIndex / (").concat(c,")) * ").concat(s," - ").concat(h,";\n            d0 = offsetY + ").concat(d," * (pos / ").concat(m,");\n\n            if(d0 < ").concat(n[y]," && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ").concat(c,".) * ").concat(i,". - ").concat(p,".);\n              d1 = offsetX + ").concat(l," * (int(mod(float(pos), ").concat(m,".) / ").concat(o,".));\n\n              if(d1 < ").concat(n[b]," && d1 >= 0) {\n\n                ch = int(mod(float(pos), ").concat(o,".));\n\n                if (").concat(v,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*k+w,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*k+w,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(x,"\n\n        ").concat(g.output," = result;\n      }\n    ")};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function FF(e){var t,n=e.x,r=e.filter,a=e.convInfo,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,p=void 0===f?null:f,h=n.shape,m=o.texData.get(n.dataId),g=a.inChannels,v=h[0]*h[1]*h[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[],k=(1===v||1===y)&&g>1e3,w=h[2]%2!=0&&!!m.isPacked;if(!k&&UC().getBool("WEBGL_LAZILY_UNPACK")&&UC().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&w){var I=b?h[0]*h[1]*(h[2]+1):h[0]*h[2]*(h[3]+1),C={dataId:n.dataId,shape:[1,I,a.inChannels],dtype:n.dtype},E=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,uC(UA(m.shape,C.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(C.shape," isn't free")}));var S=sO({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(S);var T=bO({a:C,b:S,backend:o,transposeA:!1,transposeB:!1,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:d}),A=o.texData.get(T.dataId);uC(A.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=E,A.shape=a.outShape,(t=WR({inputs:{x:T},backend:o})).shape=a.outShape,x.push(T)}else{var N=sO({inputs:{x:n},backend:o,attrs:{shape:[1,b?h[0]*h[1]*h[2]:h[0]*h[2]*h[3],a.inChannels]}}),_=sO({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}}),R=bO({a:N,b:_,transposeA:!1,transposeB:!1,backend:o,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:d});t=sO({inputs:{x:R},backend:o,attrs:{shape:a.outShape}}),x.push(N),x.push(_),x.push(R)}for(var O=0,F=x;O<F.length;O++){var M=F[O];o.disposeIntermediateTensorInfo(M)}return t}function MF(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,o=e.bias,i=void 0===o?null:o,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,d=e.activation,f=void 0===d?null:d,p=r.filterWidth,h=r.filterHeight,m=r.inChannels,g=r.outWidth,v=r.outHeight,y="channelsLast"===r.dataFormat,b=p*h*m,x=v*g,k=[b,x],w=[],I=sO({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),C=sO({inputs:{x:n},backend:a,attrs:{shape:[1,b,dC(n.shape)/b]}});w.push(I),w.push(C);var E=new OF(k,I.shape,r),S=a.runWebGLProgram(E,[I],"float32"),T=sO({inputs:{x:S},backend:a,attrs:{shape:[1,k[0],k[1]]}});w.push(S),w.push(T);var A=null!=i,N=null!=u,_="leakyrelu"===f,R=f?JR(f,!0):null,O=new eO(T.shape,C.shape,[1,x,r.outChannels],!0,!1,A,R,N,_),F=[T,C];if(i&&F.push(i),N&&F.push(u),_){var M=a.makeTensorInfo([],"float32",$C(l,"float32"));F.push(M),w.push(M)}var D=a.runWebGLProgram(O,F,"float32"),B=sO({inputs:{x:D},backend:a,attrs:{shape:y?[1,v,g,r.outChannels]:[1,r.outChannels,v,g]}});w.push(D);for(var P=0,L=w;P<L.length;P++){var U=L[P];a.disposeIntermediateTensorInfo(U)}return B}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var DF={kernelName:"Conv2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,d=a.dimRoundingMode,f=ZS(c),p=jS(o.shape,i.shape,s,l,u,d,!1,f);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(UC().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=MF({x:o,filter:i,convInfo:p,backend:r});else{var h=new _F(p);t=r.runWebGLProgram(h,[o,i],"float32")}else t=FF({x:o,filter:i,convInfo:p,backend:r});var m=sO({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),m}},BF=function e(t){_y(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(i,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},PF=function e(t){_y(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=i?1:2,l=i?2:3,d=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},LF=function e(t){_y(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.padInfo.front,i=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},UF=function e(t){_y(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},VF={kernelName:"Conv2DBackpropFilter",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,d=ZS(u),f=jS(a.shape,l,i,1,s,c,!1,d),p=new BF(f);return n.runWebGLProgram(p,[a,o],"float32")}},WF={kernelName:"Conv2DBackpropInput",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=ZS(c),f=jS(i,o.shape,s,1,u,l,!1,d),p=new PF(f);return n.runWebGLProgram(p,[a,o],"float32")}},zF={kernelName:"Conv3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=HS(a.shape,o.shape,i,u,s),l=new RF(c);return n.runWebGLProgram(l,[a,o],"float32")}},jF={kernelName:"Conv3DBackpropFilterV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.filterShape,c=HS(a.shape,u,i,1,s),l=new LF(c);return n.runWebGLProgram(l,[a,o],"float32")}},HF={kernelName:"Conv3DBackpropInputV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,u=HS(r.inputShape,o.shape,s,1,i),c=new UF(u);return n.runWebGLProgram(c,[a,o],"float32")}},GF={kernelName:"Cos",backendName:"webgl",kernelFunc:$R({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"})},KF={kernelName:"Cosh",backendName:"webgl",kernelFunc:$R({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"})},qF=function e(t,n,r,a,o){_y(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=qy(t,4),s=i[0],u=i[1],c=i[2],l=i[3],d=qy(n,1)[0],f=qy(r,2),p=f[0],h=f[1];this.outputShape=[d,p,h,l];var m="bilinear"===a?1:0,g=u-1+".0",v=c-1+".0",y=qy(p>1?[""+(u-1)/(p-1),"(y2-y1) * height_ratio","y1*".concat(g," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(g)],3),b=y[0],x=y[1],k=y[2],w=qy(h>1?[""+(c-1)/(h-1),"(x2-x1) * width_ratio","x1*".concat(v," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(v)],3),I=w[0],C=w[1],E=w[2];this.userCode="\n      const float height_ratio = float(".concat(b,");\n      const float width_ratio = float(").concat(I,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(x,";\n        float width_scale = ").concat(C,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(g," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n        float in_x = ").concat(E,";\n        if( in_x < 0.0 || in_x > ").concat(v," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")},XF={kernelName:"CropAndResize",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new qF(a.shape,o.shape,s,u,c);return n.runWebGLProgram(l,[a,o,i],"float32")}},QF=function(){function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=t;var a=t.length,o=n?"0.0":"getX(".concat(YF(a,"coords"),")"),i=t[t.length-1],s="",u="";n?(s=r?"end != "+(i-1):"end != 0",u=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(i):"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode="\n      uniform float index;\n      void main() {\n        ".concat(IN(a)," coords = getOutputCoords();\n        int end = ").concat($F(a,"coords"),";\n        float val = ").concat(o,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(u,";\n          ").concat($F(a,"coords")," = idx;\n          val += getX(").concat(YF(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.index&&(t.index=n.getUniformLocation(r,"index")),n.gl.uniform1f(t.index,e)}}}]),e}();
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function YF(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function $F(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ZF={kernelName:"Cumsum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse,u=a.shape.length,c=dT([o],u),l=a;null!=c&&(l=vO({inputs:{x:a},backend:n,attrs:{perm:c}}));var d=pT(1,u)[0];if(d!==u-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," but got axis=").concat(o));for(var f=l.shape[d],p=WR({inputs:{x:l},backend:n}),h=0;h<=Math.ceil(Math.log2(f))-1;h++){var m=new QF(l.shape,!1,s),g=m.getCustomSetupFunc(h),v=p;p=n.runWebGLProgram(m,[p],p.dtype,g),n.disposeIntermediateTensorInfo(v)}if(i){var y=new QF(l.shape,i,s),b=p;p=n.runWebGLProgram(y,[p],p.dtype),n.disposeIntermediateTensorInfo(b)}if(null!=c){var x=vO({inputs:{x:p},backend:n,attrs:{perm:fT(c)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(l),x}return p}},JF={kernelName:"DenseBincount",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=Q_(u,c,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,l)}if(2===a.shape.length){var d=n.bufferSync(a),f=n.bufferSync(o),p=Y_(d,f,i,s);return n.makeTensorInfo(p.shape,o.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}},eM=function(){function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return Oy(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}(),tM={kernelName:"DepthToSpace",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;uC(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));var s=a.shape[0],u="NHWC"===i?a.shape[1]:a.shape[2],c="NHWC"===i?a.shape[2]:a.shape[3],l="NHWC"===i?a.shape[3]:a.shape[1],d=u*o,f=c*o,p=l/(o*o),h=new eM("NHWC"===i?[s,d,f,p]:[s,p,d,f],o,i);return n.runWebGLProgram(h,[a],a.dtype)}},nM=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,s=t.inWidth,u=t.padInfo.top,c=t.padInfo.left,l=t.strideHeight,d=t.strideWidth,f=t.dilationHeight,p=t.dilationWidth,h=t.filterHeight,m=t.filterWidth,g=t.outChannels/t.inChannels,v="",y="";r&&(v=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),y="result = activation(result);");var b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(v,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(d,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(g,";\n        int q = d2 - d1 * ").concat(g,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(f,";\n\n          if (xR < 0 || xR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(m,"; wC++) {\n            int xC = xCCorner + wC * ").concat(p,";\n\n            if (xC < 0 || xC >= ").concat(s,") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(b,"\n        ").concat(y,"\n        setOutput(result);\n      }\n    ")},rM=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_y(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.inHeight,s=t.inWidth,u=t.padInfo.top,c=t.padInfo.left,l=t.strideHeight,d=t.strideWidth,f=t.dilationHeight,p=t.dilationWidth,h=t.filterHeight,m=t.filterWidth,g=m,v="int xR; int xC; int xCOffset;",y=0;y<h;y++)for(var b=0;b<m;b++)v+="\n          vec4 xTexelR".concat(y,"C").concat(2*b," = vec4(0.);\n          vec4 wR").concat(y,"C").concat(b," = vec4(0.);\n          vec4 xR").concat(y,"C").concat(b," = vec4(0.);");for(var x=0;x<h;x++)for(var k=0;k<g;k++){var w=2*k;if(v+="\n          xR = xRCorner + ".concat(x*f,";\n          xC = xCCorner + ").concat(w*p,";\n        "),1===d){if(w<m&&(v+=c%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ".concat(i," && xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(x,"C").concat(w," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(s,") {\n                    xTexelR").concat(x,"C").concat(w,".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR").concat(x,"C").concat(w," = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ").concat(i," && xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(s,") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR").concat(x,"C").concat(w," = vec4(previous.zw, xTexelR").concat(x,"C").concat(w,".xy);\n                } else {\n                  xR").concat(x,"C").concat(w," = vec4(0, 0, xTexelR").concat(x,"C").concat(w,".xy);\n                }\n              "):"\n                if(xR >= 0 && xR < ".concat(i," && xC >= 0 && xC < ").concat(s,") {\n                  xTexelR").concat(x,"C").concat(w," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(w," = vec4(0.);\n                }\n\n                xR").concat(x,"C").concat(w," = xTexelR").concat(x,"C").concat(w,";\n              "),w+1<m)){var I=c%2==0?sC(p):p;p%2==0&&c%2==1||p%2!=0&&c%2!=1?(v+="\n                  xCOffset = xC + ".concat(c%2," + ").concat(I,";\n\n                  if(xR >= 0 && xR < ").concat(i," &&\n                    xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    xTexelR").concat(x,"C").concat(w+2," = getX(batch, xR, xCOffset, d1);\n                  }\n                "),p>1&&(v+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ".concat(i," &&\n                      xCOffset >= 0 && xCOffset < ").concat(s,") {\n                      xTexelR").concat(x,"C").concat(w," = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR").concat(x,"C").concat(w," = vec4(0.);\n                    }\n                  ")),v+="\n                  xR".concat(x,"C").concat(w+1," = vec4(\n                    xTexelR").concat(x,"C").concat(w,".zw, xTexelR").concat(x,"C").concat(w+2,".xy);\n                ")):v+="\n                  xCOffset = xC + ".concat(I,";\n\n                  if(xR >= 0 && xR < ").concat(i," &&\n                    xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    xTexelR").concat(x,"C").concat(w+2," = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR").concat(x,"C").concat(w+1," = xTexelR").concat(x,"C").concat(w+2,";\n                ")}}else w<m&&(v+="\n              if(xR >= 0 && xR < ".concat(i,") {\n            "),c%2==1?(v+="\n                xCOffset = xC + 1 - ".concat(d,";\n                if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(x,"C").concat(w," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(w," = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ").concat(s,") {\n                  xTexelR").concat(x,"C").concat(w+2," = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(w+2," = vec4(0.);\n                }\n\n                xR").concat(x,"C").concat(w," = vec4(\n                  xTexelR").concat(x,"C").concat(w,".zw, xTexelR").concat(x,"C").concat(w+2,".zw);\n              "),w+1<m&&(v+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ".concat(d,";\n                  if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR").concat(x,"C").concat(w+1," = vec4(xTexelR").concat(x,"C").concat(w+2,".xy, final.xy);\n                "))):(v+="\n                if(xC >= 0 && xC < ".concat(s,") {\n                  xTexelR").concat(x,"C").concat(w," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(w," = vec4(0.);\n                }\n\n                xCOffset = xC + ").concat(d,";\n                if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(x,"C").concat(w+2," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(w+2," = vec4(0.);\n                }\n\n                xR").concat(x,"C").concat(w," = vec4(\n                  xTexelR").concat(x,"C").concat(w,".xy, xTexelR").concat(x,"C").concat(w+2,".xy);\n              "),w+1<m&&(v+="\n                  xR".concat(x,"C").concat(w+1," = vec4(\n                    xTexelR").concat(x,"C").concat(w,".zw, xTexelR").concat(x,"C").concat(w+2,".zw);\n                "))),v+="}");w<m&&(v+="\n            vec4 wTexelR".concat(x,"C").concat(w," = getW(").concat(x,", ").concat(w,", d1, q);\n            wR").concat(x,"C").concat(w," = vec4(wTexelR").concat(x,"C").concat(w,".xz, wTexelR").concat(x,"C").concat(w,".xz);\n          "),w+1<m&&(v+="\n              vec4 wTexelR".concat(x,"C").concat(w+1," = getW(").concat(x,", ").concat(w+1,", d1, q);\n              wR").concat(x,"C").concat(w+1," =\n                vec4(wTexelR").concat(x,"C").concat(w+1,".xz, wTexelR").concat(x,"C").concat(w+1,".xz);")))}for(var C=0;C<h;C++)for(var E=0;E<m;E++)v+="dotProd += xR".concat(C,"C").concat(E," * wR").concat(C,"C").concat(E,";");var S="",T="";r&&(S=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),T="result = activation(result);");var A=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(S,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(d,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(c,");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ").concat(v,"\n\n        vec4 result = dotProd;\n        ").concat(A,"\n        ").concat(T,"\n        setOutput(result);\n      }\n    ")},aM={kernelName:"DepthwiseConv2dNative",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),uC($S(i,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(l,"'")}));var d,f=jS(a.shape,o.shape,i,l,s,c,!0);return d=UC().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels==1?new rM(f):new nM(f),n.runWebGLProgram(d,[a,o],"float32")}},oM=function e(t){_y(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},iM=function e(t){_y(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},sM={kernelName:"DepthwiseConv2dNativeBackpropFilter",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,d=jS(a.shape,l,i,s,u,c,!0),f=new oM(d);return n.runWebGLProgram(f,[a,o],"float32")}},uM={kernelName:"DepthwiseConv2dNativeBackpropInput",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=jS(r.inputShape,o.shape,i,s,u,c,!0),d=new iM(l);return n.runWebGLProgram(d,[a,o],"float32")}},cM=function e(t){_y(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},lM={kernelName:"Diag",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat(Xy(r.shape),Xy(r.shape)),o=dC(r.shape),i=sO({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new cM(o),u=n.runWebGLProgram(s,[i],i.dtype),c=sO({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),c}},dM=function e(t){_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,o=t.strideHeight,i=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,d=a.top,f=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(f,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")},fM={kernelName:"Dilation2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=VS(o.shape,i.shape,s,u,"NHWC",c),d=new dM(l),f=sO({inputs:{x:t=r.runWebGLProgram(d,[o,i],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),f}},pM={kernelName:"Elu",backendName:"webgl",kernelFunc:$R({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"})},hM={kernelName:"EluGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,o=UC().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new VR("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new UR("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}},mM={kernelName:"Equal",backendName:"webgl",kernelFunc:ZR({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool"})},gM={kernelName:"Erf",backendName:"webgl",kernelFunc:$R({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n'})},vM="return exp(x);",yM=$R({opSnippet:vM,packedOpSnippet:vM,cpuKernelImpl:J_}),bM={kernelName:"Exp",backendName:"webgl",kernelFunc:yM};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function xM(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,o=t.input,i=o.shape.length,s=o.shape.slice(),u=a;return a<0&&(uC(-(i+1)<=a,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+a+1),s.splice(u,0,1),sO({inputs:{x:o},backend:r,attrs:{shape:s}})}var kM={kernelName:"ExpandDims",backendName:"webgl",kernelFunc:xM},wM="return exp(x) - 1.0;",IM={kernelName:"Expm1",backendName:"webgl",kernelFunc:$R({opSnippet:wM,packedOpSnippet:wM,cpuKernelImpl:eR})},CM=function e(t,n,r){_y(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var o,i=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)o="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));o="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(o,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function EM(e,t,n){var r=n.texData.get(e.dataId),a=dC(e.shape),o=e.shape[e.shape.length-1],i=sO({inputs:{x:e},backend:n,attrs:{shape:[a/o,o]}}),s=i.shape,u=new CM("real",s,t),c=new CM("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(u,l,"float32"),f=n.runWebGLProgram(c,l,"float32"),p=jR({inputs:{real:d,imag:f},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f);var h=sO({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),h
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var SM={kernelName:"FFT",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return EM(t.input,!1,n)}},TM=function(){function e(t,n){_y(this,e),this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}}}]),e}();
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function AM(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype;if("string"===(o=o||SC(a))){var i=kC(o,dC(r));return i.fill(a),t.makeTensorInfo(r,o,i)}var s=new TM(r,a),u=s.getCustomSetupFunc(a);return t.runWebGLProgram(s,[],o,u)}var NM,_M={kernelName:"Fill",backendName:"webgl",kernelFunc:AM},RM=function e(t){_y(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},OM={kernelName:"FlipLeftRight",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,o=new RM(r.shape);return a.runWebGLProgram(o,[r],r.dtype)}},FM="return floor(x);",MM={kernelName:"Floor",backendName:"webgl",kernelFunc:$R({opSnippet:FM,packedOpSnippet:FM,cpuKernelImpl:tR})},DM={kernelName:"FloorDiv",backendName:"webgl",kernelFunc:ZR({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"})},BM=function e(t){_y(this,e),this.variableNames=["A"];var n=KA(),r=qy(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(o,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")},PM=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=KA(),r=qy(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(o,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},LM={kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,o=r.numChannels,i="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,u=qy(i?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),c=u[0],l=u[1],d=[l,c],f=[l,c,o];(s||i)&&(null==NM&&(NM=document.createElement("canvas").getContext("2d")),NM.canvas.width=c,NM.canvas.height=l,NM.drawImage(a,0,0,c,l),a=NM.canvas);var p=n.makeTensorInfo(d,"int32");n.texData.get(p.dataId).usage=dA.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);var h=UC().getBool("WEBGL_PACK")?new PM(f):new BM(f),m=n.runWebGLProgram(h,[p],"int32");return n.disposeData(p.dataId),m
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */}},UM={kernelName:"FusedConv2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,d=a.dataFormat,f=a.dilations,p=a.dimRoundingMode,h=a.activation,m=a.leakyreluAlpha,g=ZS(d),v=jS(o.shape,i.shape,c,f,l,p,!1,g),y=[];if(1!==v.filterHeight||1!==v.filterWidth||1!==v.dilationHeight||1!==v.dilationWidth||1!==v.strideHeight||1!==v.strideWidth||"SAME"!==v.padInfo.type&&"VALID"!==v.padInfo.type)if(UC().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=MF({x:o,filter:i,convInfo:v,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});else{var b=null!=s,x=null!=u,k="leakyrelu"===h,w=h?JR(h,!1):null,I=new _F(v,b,w,x,k),C=[o,i];if(s&&C.push(s),u&&C.push(u),k){var E=r.makeTensorInfo([],"float32",$C(m,"float32"));C.push(E),y.push(E)}t=r.runWebGLProgram(I,C,"float32")}else t=FF({x:o,filter:i,convInfo:v,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});var S=sO({inputs:{x:t},backend:r,attrs:{shape:v.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),S}},VM={kernelName:"FusedDepthwiseConv2D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,d=r.dimRoundingMode,f=r.activation,p=r.leakyreluAlpha,h=[],m=l;null==m&&(m=[1,1]),uC($S(u,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(u," and dilations '").concat(m,"'")}));var g,v=jS(a.shape,o.shape,u,m,c,d,!0),y=UC().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels==1,b=f?JR(f,y):null,x=[a,o],k=null!=i,w=null!=s,I="leakyrelu"===f;if(k&&x.push(i),w&&x.push(s),I){var C=n.makeTensorInfo([],"float32",$C(p,"float32"));x.push(C),h.push(C)}g=y?new rM(v,k,b,w,I):new nM(v,k,b,w,I);var E=n.runWebGLProgram(g,x,"float32");return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),E}},WM=function e(t,n,r){_y(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=IN(n.length),o=IN(r.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(i,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")},zM={kernelName:"GatherNd",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=a.shape,i=o[o.length-1],s=qy(hS(r,a),4),u=s[0],c=s[1],l=s[2],d=s[3],f=sO({inputs:{x:a},backend:n,attrs:{shape:[c,i]}}),p=sO({inputs:{x:r},backend:n,attrs:{shape:[dC(r.shape)/l,l]}}),h=new WM(i,d,[c,l]),m=n.runWebGLProgram(h,[p,f],p.dtype),g=sO({inputs:{x:m},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}},jM=function e(t,n){_y(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=IN(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("int(getIndices(resRC.x, resRC.z))"):r.push("".concat(n[a]));return r.join()}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")},HM={kernelName:"GatherV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims,u=iA(a,o,yC(i,a.shape)[0],s),c=dC(o.shape),l=[],d=sO({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),f=sO({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});l.push(d),l.push(f);var p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){var h=n.bufferSync(f),m=n.bufferSync(d),g=nR(m,h,p);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(u.outputShape,g.dtype,g.values)}var v=new jM(d.shape,p),y=n.runWebGLProgram(v,[d,f],d.dtype);l.push(y);var b=sO({inputs:{x:y},backend:n,attrs:{shape:u.outputShape}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}},GM={kernelName:"Greater",backendName:"webgl",kernelFunc:ZR({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:rR,dtype:"bool"})},KM={kernelName:"GreaterEqual",backendName:"webgl",kernelFunc:ZR({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool"})},qM={kernelName:"IFFT",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend;return EM(t.input,!0,n)}},XM={kernelName:"IsFinite",backendName:"webgl",kernelFunc:$R({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"})},QM={kernelName:"IsInf",backendName:"webgl",kernelFunc:$R({opSnippet:"return float(isinf(x));",dtype:"bool"})},YM={kernelName:"IsNan",backendName:"webgl",kernelFunc:$R({opSnippet:"return float(isnan(x));",dtype:"bool"})},$M={kernelName:"Less",backendName:"webgl",kernelFunc:ZR({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:aR,dtype:"bool"})},ZM={kernelName:"LessEqual",backendName:"webgl",kernelFunc:ZR({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",dtype:"bool"})},JM={kernelName:"LinSpace",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.num,i=oR(r,a,o);return t.makeTensorInfo([i.length],"float32",i)}},eD={kernelName:"Log",backendName:"webgl",kernelFunc:$R({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:iR})},tD={kernelName:"Log1p",backendName:"webgl",kernelFunc:$R({opSnippet:"return log(1.0 + x);"})},nD={kernelName:"LogicalAnd",backendName:"webgl",kernelFunc:ZR({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"})},rD={kernelName:"LogicalNot",backendName:"webgl",kernelFunc:$R({opSnippet:"return float(!(x >= 1.0));"})},aD={kernelName:"LogicalOr",backendName:"webgl",kernelFunc:ZR({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"})},oD=function e(t,n,r,a,o){_y(this,e),this.variableNames=["x"],this.outputShape=[];var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(i,";\n        setOutput(val);\n      }\n    ")},iD=function e(t,n,r,a,o){_y(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(i,";\n        setOutput(result);\n      }\n    ")},sD={kernelName:"LRN",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta,c=UC().getBool("WEBGL_PACK_NORMALIZATION")?new iD(a.shape,o,i,s,u):new oD(a.shape,o,i,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},uD=function e(t,n,r,a,o){_y(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(o,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")},cD={kernelName:"LRNGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,d=new uD(a.shape,s,u,c,l);return n.runWebGLProgram(d,[a,o,i],a.dtype)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function lD(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,i=r.keepDims,s=a.shape.length,u=yC(o,a.shape),c=u,l=dT(c,s),d=null!=l,f=n.shouldExecuteOnCPU([a]),p=a;if(d){if(f){for(var h=n.texData.get(p.dataId).values,m=new Array(s),g=0;g<m.length;g++)m[g]=a.shape[l[g]];var v=kR(h,a.shape,a.dtype,l,m);p=n.makeTensorInfo(m,a.dtype),n.texData.get(p.dataId).values=v}else p=hO(a,l,n);c=pT(c.length,s)}lT("max",c,s);var y,b=qy(uT(p.shape,c),2),x=b[0],k=b[1],w=x;if(i&&(w=cT(x,u)),f){var I=n.texData.get(p.dataId).values,C=sR(I,dC(k),w,a.dtype);y=n.makeTensorInfo(w,a.dtype),n.texData.get(y.dataId).values=C}else y=
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e,t,n,r){var a=dC(t),o=sO({inputs:{x:e},attrs:{shape:[dC(e.shape)/a,a]},backend:r}),i=dO(o,e.dtype,"max",r),s=sO({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(p,k,w,n);return d&&n.disposeIntermediateTensorInfo(p),y}var dD={kernelName:"Max",backendName:"webgl",kernelFunc:lD},fD={kernelName:"Maximum",backendName:"webgl",kernelFunc:ZR({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:uR})},pD={kernelName:"MaxPool",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;HA(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;uC($S(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c=WS(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&fC(c.inShape,c.outShape))return WR({inputs:{x:a},backend:n});var l=new jO(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}},hD={kernelName:"MaxPool3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=zS(a.shape,o,i,[1,1,1],s,c,u),d=new HO(l,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}},mD=function e(t){_y(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,o=t.effectiveFilterHeight,i=t.effectiveFilterWidth,s=o-1-t.padInfo.top,u=i-1-t.padInfo.left,c=o*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},gD=function e(t){_y(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=u-1-t.padInfo.front,f=c-1-t.padInfo.top,p=l-1-t.padInfo.left,h=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(f,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},vD={kernelName:"MaxPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=zS(o.shape,i,s,[1,1,1],u,c),d=new HO(l,"max",!0),f=n.runWebGLProgram(d,[o],o.dtype),p=new gD(l),h=n.runWebGLProgram(p,[a,f],o.dtype);return n.disposeIntermediateTensorInfo(f),h}},yD={kernelName:"MaxPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;HA([o,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=WS(i.shape,s,u,1,c,l),f=new jO(d,"max",!0),p=n.runWebGLProgram(f,[i],i.dtype),h=new mD(d),m=n.runWebGLProgram(h,[a,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}},bD={kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,i=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;uC(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];uC($S(i,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(l,"'")}));var d=WS(a.shape,o,i,l,s),f=qy(function(e,t,n,r){var a=new jO(n,"max",!1),o=r.runWebGLProgram(a,[e],"float32");return a=new jO(n,"max",!0,!0,t),[o,r.runWebGLProgram(a,[e],"float32")]}(a,u,d,c),2);return[f[0],f[1]]}},xD={kernelName:"Mean",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.keepDims,i=n.axis,s=r,u=a.shape.length,c=yC(i,a.shape),l=c,d=dT(l,u),f=null!=d,p=s.shouldExecuteOnCPU([a]),h=[],m=a;if(f){if(p){for(var g=s.texData.get(m.dataId).values,v=new Array(u),y=0;y<v.length;y++)v[y]=a.shape[d[y]];var b=kR(g,a.shape,a.dtype,d,v);m=s.makeTensorInfo(v,a.dtype),s.texData.get(m.dataId).values=b}else m=hO(a,d,s);h.push(m),l=pT(l.length,u)}lT("sum",l,u);var x=qy(uT(m.shape,l),2),k=x[0],w=x[1],I=k;o&&(I=cT(k,c));for(var C=function(e,t,n,r){var a=dC(t),o=sO({inputs:{x:e},attrs:{shape:[dC(e.shape)/a,a]},backend:r}),i=dO(o,"float32","mean",r),s=sO({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(m,w,I,s),E=0,S=h;E<S.length;E++){var T=S[E];s.disposeIntermediateTensorInfo(T)}return C}},kD={kernelName:"Min",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=yC(o,a.shape),c=u,l=dT(c,s),d=a;null!=l&&(d=vO({inputs:{x:a},backend:n,attrs:{perm:l}}),c=pT(c.length,a.shape.length)),lT("min",c,s);var f,p=qy(uT(d.shape,c),2),h=p[0],m=sO({inputs:{x:d},backend:n,attrs:{shape:[-1,dC(p[1])]}}),g=dO(m,m.dtype,"min",n);return f=sO(i?{inputs:{x:g},backend:n,attrs:{shape:cT(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),f}},wD={kernelName:"Minimum",backendName:"webgl",kernelFunc:ZR({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:cR})},ID=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=IN(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(o," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")},CD=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=IN(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=CR("rc",a),c=CR("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f="reflect"===r?0:1,p="";if(1===a){var h="\n        ".concat(o," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(f,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(f,";\n        }\n        source -= start;\n      ");p="\n        ".concat(o," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ")}else{var m="\n        ".concat(o," source = rc;\n        ").concat(o," lt = ").concat(o,"(lessThan(source, start));\n        ").concat(o," gte = ").concat(o,"(greaterThanEqual(source, end));\n        ").concat(o," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(f,") +\n                gte * ((end - 1) * 2 - source + ").concat(f,");\n        source -= start;\n      ");p="\n        ".concat(o," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")},ED={kernelName:"MirrorPad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode,s=UC().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new CD(a.shape,o,i):new ID(a.shape,o,i);return n.runWebGLProgram(s,[a],a.dtype)}},SD={kernelName:"Mod",backendName:"webgl",kernelFunc:ZR({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},TD=function(){function e(t,n,r){_y(this,e),this.variableNames=["probs"],this.outputShape=[t,r],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}}}]),e}(),AD=ZR({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),ND={kernelName:"RealDiv",backendName:"webgl",kernelFunc:AD},_D="return a - b;",RD=ZR({opSnippet:_D,packedOpSnippet:_D,supportsComplex:!0,cpuKernelImpl:yR}),OD={kernelName:"Sub",backendName:"webgl",kernelFunc:RD};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function FD(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=yC([r.dim],a.shape),i=lD({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),s=cT(i.shape,o),u=sO({inputs:{x:i},backend:n,attrs:{shape:s}}),c=RD({inputs:{a:a,b:u},backend:n}),l=yM({inputs:{x:c},backend:n}),d=mO({inputs:{x:l},backend:n,attrs:{axis:o,keepDims:!1}}),f=sO({inputs:{x:d},backend:n,attrs:{shape:s}}),p=AD({inputs:{a:l,b:f},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),p}var MD={kernelName:"Softmax",backendName:"webgl",kernelFunc:FD},DD={kernelName:"Multinomial",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized,u=s?a:FD({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],d=new TD(c,l,o),f=d.getCustomSetupFunc(i),p=n.runWebGLProgram(d,[u],"int32",f);return s||n.disposeIntermediateTensorInfo(u),p}},BD="return -x;",PD={kernelName:"Neg",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var o=r.texData.get(a.dataId),i=qy(dR(o.values,a.shape,a.dtype),2),s=i[0],u=i[1];return r.makeTensorInfo(u,a.dtype,s)}return t=UC().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new MR(a.shape,BD):new RR(a.shape,BD),r.runWebGLProgram(t,[a],a.dtype)}},LD=OT,UD={kernelName:"NonMaxSuppressionV3",backendName:"webgl",kernelFunc:function(e){XT("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(o.dataId),d=LD(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},VD=FT,WD={kernelName:"NonMaxSuppressionV4",backendName:"webgl",kernelFunc:function(e){XT("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),d=n.readSync(o.dataId),f=VD(l,d,i,s,u,c),p=f.selectedIndices,h=f.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},zD=MT,jD={kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){XT("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),d=n.readSync(o.dataId),f=zD(l,d,i,s,u,c),p=f.selectedIndices,h=f.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},HD=function e(t,n,r,a){_y(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")},GD={kernelName:"OneHot",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue,u=dC(a.shape),c=new HD(u,o,i,s),l=sO({inputs:{x:a},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(c,[l],a.dtype);n.disposeIntermediateTensorInfo(l);var f=sO({inputs:{x:d},backend:n,attrs:{shape:[].concat(Xy(a.shape),[o])}});return n.disposeIntermediateTensorInfo(d),f}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function KD(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=lF({inputs:{input:r},backend:n}),o=KD({inputs:{x:a},backend:n}),i=CF({inputs:{input:r},backend:n}),s=KD({inputs:{x:i},backend:n}),u=jR({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return AM({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var qD={kernelName:"ZerosLike",backendName:"webgl",kernelFunc:KD},XD={kernelName:"OnesLike",backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var o=lF({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=CF({inputs:{input:a},backend:r}),u=KD({inputs:{x:s},backend:r}),c=jR({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return AM({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}},QD={kernelName:"Pack",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return xM({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){cC(a,e.shape,"All tensors passed to stack must have matching shapes"),uC(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=AF({inputs:t.map((function(e){var t=xM({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},YD=function(){function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=IN(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n      uniform float value;\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(o," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n        uniform float value;\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}}}]),e}(),$D=function(){function e(t,n,r){_y(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,o=IN(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=CR("rc",a),c=CR("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f=["".concat(o," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",m=0,g=1===a?2:4;m<g;m++)h+="\n        ".concat(f[m],"\n        if (").concat(p,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(o," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ");h+=1===a?"} ":"}}",this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n      uniform float value;\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}}}]),e}(),ZD=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue,s=UC().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $D(a.shape,o,i):new YD(a.shape,o,i),u=s.getCustomSetupFunc(i);return n.runWebGLProgram(s,[a],a.dtype,u)},JD={kernelName:"PadV2",backendName:"webgl",kernelFunc:ZD},eB={kernelName:"Pow",backendName:"webgl",kernelFunc:ZR({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},tB={kernelName:"Prod",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.axis,s=a.keepDims,u=o.shape.length,c=[],l=yC(i,o.shape),d=l,f=dT(d,u),p=o;if(null!=f&&(p=vO({inputs:{x:o},backend:r,attrs:{perm:f}}),d=pT(d.length,u),c.push(p)),lT("prod",d,u),r.shouldExecuteOnCPU([p])){var h=r.texData.get(p.dataId).values,m=fR(p.shape,p.dtype,h,d),g=m.outVals,v=m.outShape,y=m.outDtype;t=r.makeTensorInfo(v,y,g)}else{var b=qy(uT(p.shape,d),2),x=b[0],k=dC(b[1]),w=sO({inputs:{x:p},backend:r,attrs:{shape:[-1,k]}}),I=dO(w,wE(o.dtype),"prod",r);t=sO({inputs:{x:I},backend:r,attrs:{shape:x}}),c.push(w),c.push(I)}if(s){c.push(t);var C=cT(t.shape,l);t=sO({inputs:{x:t},backend:r,attrs:{shape:C}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},nB=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,s=pR(r,a,o,i);return t.makeTensorInfo([s.length],i,s)},rB={kernelName:"Range",backendName:"webgl",kernelFunc:nB},aB={kernelName:"Reciprocal",backendName:"webgl",kernelFunc:$R({opSnippet:"return 1.0 / x;"})},oB={kernelName:"Relu",backendName:"webgl",kernelFunc:$R({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"})},iB={kernelName:"Relu6",backendName:"webgl",kernelFunc:$R({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"})},sB=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.outputShape=[];var i=qy(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")},uB=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=qy(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],",\n          ").concat(f[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")},cB={kernelName:"ResizeBilinear",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=qy(r.size,2),u=s[0],c=s[1],l=UC().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new uB(a.shape,u,c,o,i):new sB(a.shape,u,c,o,i);return n.runWebGLProgram(l,[a],"float32")}},lB=function e(t,n,r){_y(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=qy(n,3),o=a[1],i=a[2],s=qy(t,3),u=s[1],c=s[2],l=[r&&u>1?o-1:o,r&&c>1?i-1:i],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/d[0],p=l[1]/d[1],h=1/f,m=1/p,g=2*Math.ceil(h)+2,v=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(v,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(o-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(i-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")},dB={kernelName:"ResizeBilinearGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new lB(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},fB=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.outputShape=[];var i=qy(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";d=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")},pB={kernelName:"ResizeNearestNeighbor",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=qy(r.size,2),u=s[0],c=s[1],l=new fB(a.shape,u,c,o,i);return n.runWebGLProgram(l,[a],a.dtype)}},hB=function e(t,n,r){_y(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=qy(n,3),o=a[1],i=a[2],s=qy(t,3),u=s[1],c=s[2],l=[r&&u>1?o-1:o,r&&c>1?i-1:i],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/d[0],p=l[1]/d[1],h=1/f,m=1/p,g=2*Math.ceil(h)+2,v=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(v,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")},mB={kernelName:"ResizeNearestNeighborGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new hB(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},gB=function e(t,n){_y(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),o=IN(r);this.userCode="\n      void main() {\n        ".concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")},vB=function e(t,n){_y(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=CR("rc",r),o="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),i="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=IN(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)}));return"getChannel(getX(".concat(r.join(","),"), vec2(").concat(r.slice(-2).join(","),"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")},yB={kernelName:"Reverse",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims,i=a.shape.length,s=yC(o,a.shape);if(0===i)return WR({inputs:{x:a},backend:n});var u=UC().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new vB(a.shape,s):new gB(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},bB=function(){function e(t,n){_y(this,e),this.variableNames=["Image"],this.outputShape=[];var r=t[1],a=t[2];this.outputShape=t;var o;o="number"==typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        uniform vec4 params;\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e,t,n,r){var a=this;return function(o,i){null==a.paramsLoc&&(a.paramsLoc=o.getUniformLocationNoThrow(i,"params")),o.gl.uniform4f(a.paramsLoc,e,t,n,r)}}}]),e}(),xB={kernelName:"RotateWithOffset",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,i=n.fillValue,s=n.center,u=r,c=new bB(a.shape,i),l=qy(zT(s,a.shape[1],a.shape[2]),2),d=l[0],f=l[1],p=c.getCustomSetupFunc(d,f,Math.sin(o),Math.cos(o));return u.runWebGLProgram(c,[a],a.dtype,p)}},kB={kernelName:"Round",backendName:"webgl",kernelFunc:$R({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"})},wB={kernelName:"Rsqrt",backendName:"webgl",kernelFunc:$R({opSnippet:"return inversesqrt(x);",cpuKernelImpl:hR})},IB=function e(t,n,r,a,o,i){_y(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=IN(o.length),u=IN(i.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var f="getUpdates(".concat(d,")"),p=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(p,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(f,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")},CB={kernelName:"ScatterNd",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=gS(0,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,p=[f/l,l];if(0===f)return n.makeTensorInfo(i,a.dtype);var h=sO({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=sO({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),v=new IB(c,u,h.shape.length,m.shape.length,d,p),y=n.runWebGLProgram(v,[m,h,g],m.dtype),b=sO({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),b}},EB=function e(t,n,r){var a,o;if(_y(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)o="resRC",a="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(i[c])),c<t&&s.push("".concat(i[c]));a=s.join(),o=u.join()}var l=IN(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(o,"));\n        } else {\n          setOutput(getB(").concat(o,"));\n        }\n      }\n    ")},SB={kernelName:"Select",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=new EB(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,o],kE(a.dtype,o.dtype))}},TB={kernelName:"Selu",backendName:"webgl",kernelFunc:$R({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n"})},AB={kernelName:"Sigmoid",backendName:"webgl",kernelFunc:$R({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"})},NB={kernelName:"Sign",backendName:"webgl",kernelFunc:$R({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"})},_B={kernelName:"Sin",backendName:"webgl",kernelFunc:$R({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"})},RB={kernelName:"Sinh",backendName:"webgl",kernelFunc:$R({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"})},OB={kernelName:"Softplus",backendName:"webgl",kernelFunc:$R({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"})},FB={kernelName:"SpaceToBatchND",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;uC(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,Xy(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=[],d=ZD({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=jT(d.shape,o,s,!1),p=HT(f.length,o.length,!1),h=GT(d.shape,o,s,!1),m=sO({inputs:{x:d},backend:n,attrs:{shape:f}}),g=vO({inputs:{x:m},backend:n,attrs:{perm:p}}),v=sO({inputs:{x:g},backend:n,attrs:{shape:h}});return l.push(d),l.push(m),l.push(g),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},MB={kernelName:"SparseToDense",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,u=gS(0,a,s),c=u.sliceRank,l=u.numUpdates,d=u.strides,f=u.outputSize,p=new IB(l,c,a.shape.length,o.shape.length,d,[f,1],!1),h=n.runWebGLProgram(p,[o,a,i],o.dtype),m=sO({inputs:{x:h},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),m}},DB={kernelName:"SplitV",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=yC(r.axis,a.shape)[0],s=rA(a,o,i),u=a.shape.length,c=new Array(u).fill(0),l=a.shape.slice();return s.map((function(e){var t=Xy(l);t[i]=e;var r=aF({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[i]+=e,r}))}},BB={kernelName:"Sqrt",backendName:"webgl",kernelFunc:$R({opSnippet:"return sqrt(x);"})},PB={kernelName:"Square",backendName:"webgl",kernelFunc:$R({opSnippet:"return x * x;"})},LB={kernelName:"SquaredDifference",backendName:"webgl",kernelFunc:ZR({opSnippet:"return (a - b) * (a - b);",packedOpSnippet:"return (a - b) * (a - b);"})},UB={kernelName:"Step",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o="if (isnan(x)) return x;\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new RR(a.shape,o);return r.runWebGLProgram(i,[a],a.dtype)}},VB=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,o=IN(r.length),i=IN(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(o," begin = ").concat(o,"(").concat(t,");\n      ").concat(o," strides = ").concat(o,"(").concat(n,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")},WB={kernelName:"StridedSlice",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,f=a.newAxisMask,p=a.shrinkAxisMask,h=OS(o.shape,i,s,u,c,l,d,f,p),m=h.nonStrided,g=h.$begin,v=h.$strides,y=h.size,b=h.newShape,x=h.outShape,k=sO({inputs:{x:o},backend:r,attrs:{shape:b}});if(m){var w=aF({inputs:{x:k},backend:r,attrs:{begin:g,size:y}});t=sO({inputs:{x:w},backend:r,attrs:{shape:x}}),r.disposeIntermediateTensorInfo(w)}else if(x.some((function(e){return 0===e})))t=r.makeTensorInfo(x,o.dtype,[]);else if(r.shouldExecuteOnCPU([k])){var I=r.texData.get(k.dataId).values,C=dS(k.shape,k.dtype,I),E=vR(x,C,v,g);t=r.makeTensorInfo(x,k.dtype,E.values)}else{var S=new VB(g,v,x);t=r.runWebGLProgram(S,[k],k.dtype)}var T=sO({inputs:{x:t},backend:r,attrs:{shape:x}});return r.disposeIntermediateTensorInfo(k),r.disposeIntermediateTensorInfo(t),T}},zB={kernelName:"Tan",backendName:"webgl",kernelFunc:$R({opSnippet:"return tan(x);"})},jB={kernelName:"Tanh",backendName:"webgl",kernelFunc:$R({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"})},HB=function e(t,n){_y(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var o=IN(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(t);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        setOutput(getA(").concat(i,"));\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function GB(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;if("string"===a.dtype){var i=n.readSync(a.dataId).map((function(e){return tE(e)})),s=dS(a.shape,a.dtype,i),u=bR(s,o);return n.makeTensorInfo(u.shape,u.dtype,u.values)}var c=new HB(a.shape,o);return n.runWebGLProgram(c,[a],a.dtype)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
for(var KB={kernelName:"Tile",backendName:"webgl",kernelFunc:GB},qB={kernelName:"TopK",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted,s=n.readSync(a.dataId),u=qy(xR(s,a.shape,a.dtype,o,i),2),c=u[0],l=u[1];return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}},XB=function e(t,n,r,a,o,i){_y(this,e),this.variableNames=["Image","Transforms"],this.outputShape=i;var s,u="nearest"===r?1:2;switch(a){case"constant":s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4;break;default:s=1}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")},QB={kernelName:"Transform",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.transforms,i=r.interpolation,s=r.fillMode,u=r.fillValue,c=r.outputShape,l=qy(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],m=qy(null!=c?c:[f,p],2),g=m[0],v=m[1],y=new XB(f,p,i,s,u,[d,g,v,h]);return n.runWebGLProgram(y,[a,o],"float32")}},YB={kernelName:"Unique",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;HA(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var i=r.readSync(o.dataId),s=wR(i,a,o.shape,o.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,o.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}},$B={kernelName:"Unpack",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a,s=i.shape.length,u=a.shape[o],c=new Array(s-1),l=0,d=0;d<s;d++)d!==o&&(c[l++]=i.shape[d]);var f=[],p=new Array(s).fill(0),h=i.shape.slice();h[o]=1;for(var m=new Array(u),g=0;g<m.length;g++){p[o]=g;var v=aF({inputs:{x:i},backend:n,attrs:{begin:p,size:h}}),y=sO({inputs:{x:v},backend:n,attrs:{shape:c}});m[g]=y,f.push(v)}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},ZB=function e(t,n){_y(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.numSegments,s=i*Math.ceil(o/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));var f="";o%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(f,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")},JB=[sD,cD,xO,kO,wO,IO,EO,AO,NO,_O,BO,PO,LO,UO,WO,VO,zO,KO,GO,QO,YO,$O,eF,iF,sF,fF,hF,vF,xF,HR,NF,VF,WF,DF,jF,HF,zF,GF,KF,XF,ZF,JF,tM,sM,uM,aM,lM,fM,pM,hM,mM,gM,bM,kM,IM,SM,_M,OM,MM,DM,LM,UM,VM,zM,HM,GM,KM,zR,qM,EF,XM,QM,YM,qR,$M,ZM,JM,tD,eD,nD,rD,aD,dD,hD,pD,vD,yD,bD,fD,xD,kD,wD,ED,SD,DD,iO,PD,UD,WD,jD,cF,GD,XD,QD,JD,eB,YR,tB,rB,dF,ND,aB,iB,oB,uO,cB,dB,pB,mB,yB,xB,kB,wB,CB,SB,TB,AB,NB,_B,RB,oF,MD,OB,FB,MB,DB,BB,PB,LB,UB,WB,OD,gO,zB,jB,KB,qB,QB,yO,YB,$B,{kernelName:"UnsortedSegmentSum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments,s=a.shape.length,u=[],c=0,l=dT([c],s),d=a;null!=l&&(d=vO({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(d),c=pT(1,s)[0]);var f=oA(d.shape,c,i),p=dC([d.shape[c]]),h=sO({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});u.push(h);var m=sO({inputs:{x:function e(t,r,a,o,i){var s=t.shape[0],c=t.shape[1],l=aA(c,i),d=new ZB({windowSize:l,inSize:c,batchSize:s,numSegments:i},r),f=n.compileAndRun(d,[t,a],o);if(u.push(f),f.shape[1]===i)return f;var p=nB({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),h=GB({inputs:{x:p},backend:n,attrs:{reps:[c/l]}});return u.push(p),u.push(h),e(f,r,h,o,i)}(h,"unsortedSegmentSum",o,wE(a.dtype),i)},backend:n,attrs:{shape:f}}),g=m;if(null!=l){u.push(m);var v=fT(l);g=vO({inputs:{x:g},backend:n,attrs:{perm:v}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},qD],eP=0,tP=JB
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */;eP<tP.length;eP++){var nP=tP[eP];QC(nP)}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var rP=NT,aP=function(e){Dy(a,e);var t,n,r=Hy(a);function a(){var e;return _y(this,a),(e=r.call(this)).blockSize=48,e.firstUse=!0,e.data=new rC(zy(e),DS()),e}return Oy(a,[{key:"nextDataId",value:function(){return a.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,UC().get("IS_NODE")&&XT("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&EC(n[0])){var a=n.map((function(e){return eE(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:(n=Ny(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?QT(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return tE(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return dS(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return DS().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:(t=Ny(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JC(),t(),e.abrupt("return",{kernelMs:JC()-n});case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){TN([e],"where");var t=this.readSync(e.dataId);return rP(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return Ky(By(a.prototype),"epsilon",this).call(this)}}]),a}(aC);aP.nextDataId=0,
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
LS("cpu",(function(){return new aP}),1);
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var oP=XN("Elu",(function(e){return e>=0?e:Math.exp(e)-1})),iP={kernelName:"Elu",backendName:"cpu",kernelFunc:oP};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function sP(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha;TN([a],"leakyRelu");for(var i=dC(a.shape),s=n.data.get(a.dataId).values,u=xC("float32",i),c=0;c<s.length;c++)u[c]=s[c]<0?o*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var uP={kernelName:"LeakyRelu",backendName:"cpu",kernelFunc:sP},cP=_N((function(e,t){return e<0?t*e:e}));
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function lP(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;TN([r,a],"prelu");var o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=qy(cP(r.shape,a.shape,o,i,r.dtype),2),u=s[0],c=s[1];return n.makeTensorInfo(c,r.dtype,u)}var dP={kernelName:"Prelu",backendName:"cpu",kernelFunc:lP},fP=XN("Relu",(function(e){return Math.max(0,e)})),pP={kernelName:"Relu",backendName:"cpu",kernelFunc:fP},hP=XN("Relu6",(function(e){return Math.min(Math.max(0,e),6)})),mP={kernelName:"Relu6",backendName:"cpu",kernelFunc:hP};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function gP(e,t,n,r,a){if("linear"===n)return MN({inputs:{x:t},backend:e});if("relu"===n)return fP({inputs:{x:t},backend:e});if("elu"===n)return oP({inputs:{x:t},backend:e});if("relu6"===n)return hP({inputs:{x:t},backend:e});if("prelu"===n)return lP({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return sP({inputs:{x:t},backend:e,attrs:{alpha:a}});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function vP(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=dC(a.shape),s=vC(o,i),u=dC(s);uC(i===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old shape (").concat(a.shape,") has ").concat(i," elements. The new shape and old shape must have the same number of elements.")})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;l.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var yP={kernelName:"Reshape",backendName:"cpu",kernelFunc:vP};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function bP(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=r.transposeA,s=r.transposeB;TN([a,o],"matMul");var u=a.shape.length,c=o.shape.length,l=i?a.shape[u-2]:a.shape[u-1],d=s?o.shape[c-1]:o.shape[c-2],f=i?a.shape[u-1]:a.shape[u-2],p=s?o.shape[c-2]:o.shape[c-1],h=a.shape.slice(0,-2),m=o.shape.slice(0,-2),g=dC(h),v=dC(m);uC(u>=2&&c>=2&&(g===v||1===g||1===v),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (".concat(h,") and (").concat(m,").")}));var y=(g>v?a.shape.slice(0,-2):o.shape.slice(0,-2)).concat([f,p]);uC(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (").concat(d,") of Tensors with shapes ").concat(a.shape," and ").concat(o.shape," and transposeA=").concat(i," and transposeB=").concat(s," must match.")}));for(var b=s?[v,p,d]:[v,d,p],x=vP({inputs:{x:a},backend:n,attrs:{shape:i?[g,l,f]:[g,f,l]}}),k=vP({inputs:{x:o},backend:n,attrs:{shape:b}}),w=i?x.shape[1]:x.shape[2],I=i?x.shape[2]:x.shape[1],C=s?k.shape[1]:k.shape[2],E=Math.max(g,v),S=n.data.get(x.dataId).values,T=n.data.get(k.dataId).values,A=NC(x.shape),N=NC(k.shape),_=qy(i?[A[0],1,A[1]]:[A[0],A[1],1],3),R=_[0],O=_[1],F=_[2],M=qy(s?[1,N[1],N[0]]:[N[1],1,N[0]],3),D=M[0],B=M[1],P=M[2],L=I*C,U=dS([E,I,C],x.dtype),V=U.values,W=n.blockSize,z=0;z<E;z++)for(var j=0;j<I;j+=W)for(var H=0;H<C;H+=W)for(var G=0;G<w;G+=W)for(var K=Math.min(j+W,I),q=Math.min(H+W,C),X=Math.min(G+W,w),Q=j;Q<K;Q++)for(var Y=H;Y<q;Y++){for(var $=0,Z=G;Z<X;Z++){var J=Math.min(z,g-1)*R,ee=Math.min(z,v-1)*P;$+=S[J+Q*O+Z*F]*T[Z*D+Y*B+ee]}V[z*L+(Q*C+Y)]+=$}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(y,U.dtype,U.values)}var xP={kernelName:"BatchMatMul",backendName:"cpu",kernelFunc:bP},kP={kernelName:"_FusedMatMul",backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,o=e.backend,i=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,d=i.transposeA,f=i.transposeB,p=i.activation,h=i.leakyreluAlpha,m=[];t=bP({inputs:{a:s,b:u},attrs:{transposeA:d,transposeB:f},backend:o}),c&&(n=jN({inputs:{a:t,b:c},backend:o}),m.push(t),t=n),p&&(r=gP(o,t,p,l,h),m.push(t),t=r);for(var g=0,v=m;g<v.length;g++){var y=v[g];o.disposeIntermediateTensorInfo(y)}return t}},wP={kernelName:"Acos",backendName:"cpu",kernelFunc:XN("Acos",(function(e){return Math.acos(e)}))},IP={kernelName:"Acosh",backendName:"cpu",kernelFunc:XN("Acosh",(function(e){return Math.acosh(e)}))},CP={kernelName:"AddN",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=t;TN(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),o=dS(r[0].shape,r[0].dtype),i=o.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<i.length;c++)i[c]+=u[c];return n.makeTensorInfo(o.shape,o.dtype,o.values)}},EP={kernelName:"All",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;TN(a,"all");var s=yC(o,a.shape),u=s,c=dT(u,a.shape.length),l=a;null!=c&&(l=A_({inputs:{x:a},backend:n,attrs:{perm:c}}),u=pT(u.length,a.shape.length)),lT("all",u,l.shape.length);for(var d=qy(uT(l.shape,u),2),f=d[0],p=dC(d[1]),h=OC(dC(f),l.dtype),m=n.data.get(l.dataId).values,g=0;g<h.length;++g){for(var v=g*p,y=m[v],b=0;b<p;++b){var x=m[v+b];y=y&&x}h[g]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(f,l.dtype,h);if(i){var w=vP({inputs:{x:k},backend:n,attrs:{shape:cT(f,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},SP={kernelName:"Any",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;TN(a,"any");var s=yC(o,a.shape),u=s,c=dT(u,a.shape.length),l=a;null!=c&&(l=A_({inputs:{x:a},backend:n,attrs:{perm:c}}),u=pT(u.length,a.shape.length)),lT("any",u,l.shape.length);for(var d=qy(uT(l.shape,u),2),f=d[0],p=dC(d[1]),h=OC(dC(f),l.dtype),m=n.data.get(l.dataId).values,g=0;g<h.length;++g){for(var v=g*p,y=m[v],b=0;b<p;++b){var x=m[v+b];y=y||x}h[g]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(f,l.dtype,h);if(i){var w=vP({inputs:{x:k},backend:n,attrs:{shape:cT(f,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},TP={kernelName:"ArgMax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;TN(a,"argMax");var i=yC(o,a.shape),s=dT(i,a.shape.length),u=a,c=[];null!=s&&(u=A_({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=pT(i.length,u.shape.length)),lT("argMax",i=[i[0]],u.shape.length);for(var l=qy(uT(u.shape,i),2),d=l[0],f=l[1],p=OC(dC(d),"int32"),h=dC(f),m=n.data.get(u.dataId).values,g=0;g<p.length;++g){for(var v=g*h,y=m[v],b=0,x=0;x<h;++x){var k=m[v+x];k>y&&(y=k,b=x)}p[g]=b}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",p)}},AP={kernelName:"ArgMin",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;TN(a,"argMin");var i=yC(o,a.shape),s=dT(i,a.shape.length),u=a,c=[];null!=s&&(u=A_({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=pT(i.length,u.shape.length)),lT("argMin",i=[i[0]],u.shape.length);for(var l=qy(uT(u.shape,i),2),d=l[0],f=l[1],p=OC(dC(d),"int32"),h=dC(f),m=n.data.get(u.dataId).values,g=0;g<p.length;++g){for(var v=g*h,y=m[v],b=0,x=0;x<h;++x){var k=m[v+x];k<y&&(y=k,b=x)}p[g]=b}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",p)}},NP={kernelName:"Asin",backendName:"cpu",kernelFunc:XN("Asin",(function(e){return Math.asin(e)}))},_P={kernelName:"Asinh",backendName:"cpu",kernelFunc:XN("Asinh",(function(e){return Math.asinh(e)}))},RP={kernelName:"Atan",backendName:"cpu",kernelFunc:XN("Atan",(function(e){return Math.atan(e)}))},OP={kernelName:"Atan2",backendName:"cpu",kernelFunc:VN("Atan2",_N((function(e,t){return Math.atan2(e,t)})))},FP={kernelName:"Atanh",backendName:"cpu",kernelFunc:XN("Atanh",(function(e){return Math.atanh(e)}))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function MP(e,t,n,r,a,o){for(var i=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,d=a.effectiveFilterWidth,f=a.padInfo.top,p=a.padInfo.left,h="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=dS(a.outShape,n),g=m.values,v=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var k=x*v,w=x*r[0],I=0;I<a.inChannels;++I)for(var C=0;C<a.outHeight;++C)for(var E=C*i-f,S=Math.max(0,E),T=Math.min(a.inHeight,l+E),A=k+C*y,N=0;N<a.outWidth;++N){for(var _=N*s-p,R=Math.max(0,_),O=Math.min(a.inWidth,d+_),F=h,M=0,D=0,B=S;B<T;B+=u){for(var P=w+B*r[1],L=R;L<O;L+=c){var U=e[P+L*r[2]+I];"max"===o&&U>F?F=U:"avg"===o&&(M+=U,D++)}if(isNaN(F))break}g[A+N*b+I]="avg"===o?M/D:F}return m}function DP(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=dS(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,m=dS(t,n,e),g=0;g<r.batchSize;++g)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.outHeight;++y){for(var b=y*s-p,x=b;x<0;)x+=c;for(var k=Math.min(r.inHeight,d+b),w=0;w<r.outWidth;++w){for(var I=w*u-h,C=I;C<0;)C+=l;for(var E=Math.min(r.inWidth,f+I),S=Number.NEGATIVE_INFINITY,T=-1,A=x;A<k;A+=c)for(var N=A-b,_=C;_<E;_+=l){var R=_-I,O=m.get(g,A,_,v);O>S&&(S=O,T=a?o?((g*r.inHeight+A)*r.inWidth+_)*r.inChannels+v:(A*r.inWidth+_)*r.inChannels+v:N*f+R)}i.set(T,g,y,w,v)}}return i}function BP(e,t,n,r,a,o){for(var i=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,d=a.dilationWidth,f=a.effectiveFilterDepth,p=a.effectiveFilterHeight,h=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,v=a.padInfo.left,y="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=dS(a.outShape,n),x=b.values,k=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],I=a.outShape[3]*a.outShape[4],C=a.outShape[4],E=0;E<a.batchSize;++E)for(var S=E*k,T=E*r[0],A=0;A<a.inChannels;++A)for(var N=0;N<a.outDepth;++N){for(var _=N*i-m,R=_;R<0;)R+=c;for(var O=Math.min(a.inDepth,f+_),F=S+N*w,M=0;M<a.outHeight;++M){for(var D=M*s-g,B=D;B<0;)B+=l;for(var P=Math.min(a.inHeight,p+D),L=F+M*I,U=0;U<a.outWidth;++U){for(var V=U*u-v,W=V;W<0;)W+=d;for(var z=Math.min(a.inWidth,h+V),j=L+U*C,H=y,G=0,K=0,q=R;q<O;q+=c){for(var X=T+q*r[1],Q=B;Q<P;Q+=l){for(var Y=X+Q*r[2],$=W;$<z;$+=d){var Z=e[Y+$*r[3]+A];if("max"===o&&Z>H?H=Z:"avg"===o&&(G+=Z,K++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}x[j+A]="avg"===o?G/K:H}}}return b}var PP={kernelName:"AvgPool",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;TN(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;uC($S(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c,l=WS(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&fC(l.inShape,l.outShape))c=MN({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=NC(a.shape),p=MP(d,a.shape,a.dtype,f,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return c}},LP={kernelName:"AvgPool3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;TN(a,"avgPool3d");var l=zS(a.shape,o,i,1,s,u,c),d=BP(n.data.get(a.dataId).values,a.shape,a.dtype,NC(a.shape),l,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}},UP={kernelName:"AvgPool3DGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;TN([a,o],"avgPool3DGrad");for(var l=zS(o.shape,i,s,1,u,c),d=l.strideDepth,f=l.strideHeight,p=l.strideWidth,h=l.filterDepth,m=l.filterHeight,g=l.filterWidth,v=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,k=l.effectiveFilterHeight,w=l.effectiveFilterWidth,I=x-1-l.padInfo.front,C=w-1-l.padInfo.left,E=k-1-l.padInfo.top,S=dS(o.shape,"float32"),T=1/(h*m*g),A=n.bufferSync(a),N=0;N<l.batchSize;++N)for(var _=0;_<l.inChannels;++_)for(var R=0;R<l.inDepth;++R)for(var O=0;O<l.inHeight;++O)for(var F=0;F<l.inWidth;++F){for(var M=R-I,D=O-E,B=F-C,P=0,L=0;L<x;L+=v){var U=(M+L)/d;if(!(U<0||U>=l.outDepth||Math.floor(U)!==U))for(var V=0;V<k;V+=y){var W=(D+V)/f;if(!(W<0||W>=l.outHeight||Math.floor(W)!==W))for(var z=0;z<w;z+=b){var j=(B+z)/p;j<0||j>=l.outWidth||Math.floor(j)!==j||(P+=A.get(N,U,W,j,_))}}}S.set(P*T,N,R,O,F,_)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}},VP={kernelName:"AvgPoolGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;TN([a,o],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=WS(i.shape,s,u,1,c),d=l.strideHeight,f=l.strideWidth,p=l.filterHeight,h=l.filterWidth,m=l.dilationHeight,g=l.dilationWidth,v=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,x=v-1-l.padInfo.top,k=dS(i.shape,"float32"),w=1/(p*h),I=n.data.get(a.dataId).values,C=dS(a.shape,"float32",I),E=0;E<l.batchSize;++E)for(var S=0;S<l.inChannels;++S)for(var T=0;T<l.inHeight;++T)for(var A=0;A<l.inWidth;++A){for(var N=T-x,_=A-b,R=0,O=0;O<v;O+=m){var F=(N+O)/d;if(!(F<0||F>=l.outHeight||Math.floor(F)!==F))for(var M=0;M<y;M+=g){var D=(_+M)/f;D<0||D>=l.outWidth||Math.floor(D)!==D||(R+=C.get(E,F,D,S))}}k.set(R*w,E,T,A,S)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}},WP={kernelName:"FusedBatchNorm",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.scale,i=t.offset,s=t.mean,u=t.variance;uC(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),uC(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),uC(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),TN([a,s,u,o,i],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,f=n.data.get(u.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),h=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(l.length),g=h.length,v=p.length,y=f.length,b=d.length,x=0,k=0,w=0,I=0,C=0;C<l.length;++C)m[C]=h[x++]+(l[C]-d[k++])*p[w++]/Math.sqrt(f[I++]+c),x>=g&&(x=0),k>=b&&(k=0),w>=v&&(w=0),I>=y&&(I=0);return n.makeTensorInfo(a.shape,a.dtype,m)}},zP={kernelName:"BatchToSpaceND",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;TN([a],"batchToSpaceND");var s=o.reduce((function(e,t){return e*t})),u=jT(a.shape,o,s),c=HT(u.length,o.length),l=GT(a.shape,o,s),d=KT(i,o.length),f=qT(l,i,o.length),p=vP({inputs:{x:a},backend:n,attrs:{shape:u}}),h=A_({inputs:{x:p},backend:n,attrs:{perm:c}}),m=vP({inputs:{x:h},backend:n,attrs:{shape:l}}),g=B_({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}},jP={kernelName:"Bincount",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=GN(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,s)}},HP={kernelName:"ClipByValue",backendName:"cpu",kernelFunc:XN("ClipByValue",(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}))},GP={kernelName:"ComplexAbs",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(dC(t.shape)),a=n.data.get(t.dataId),o=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,s=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=0;c<s.length;c++){var l=s[c],d=u[c];r[c]=Math.hypot(l,d)}return n.makeOutput(r,t.shape,"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function KP(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var qP={kernelName:"Imag",backendName:"cpu",kernelFunc:KP};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function XP(e){var t=e.inputs,n=e.backend,r=yC(e.attrs.axis,t[0].shape)[0],a=VT(t.map((function(e){return e.shape})),r);if(0===dC(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return dC(e.shape)>0}));if(1===o.length)return MN({inputs:{x:o[0]},backend:n});if(UT(o.map((function(e){return e.shape})),r),"complex64"===o[0].dtype){var i=o.map((function(e){return BN({inputs:{input:e},backend:n})})),s=o.map((function(e){return KP({inputs:{input:e},backend:n})})),u=XP({inputs:i,backend:n,attrs:{axis:r}}),c=XP({inputs:s,backend:n,attrs:{axis:r}}),l=RN({inputs:{real:u,imag:c},backend:n});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),l}var d=o.map((function(e){var t=dC(e.shape.slice(r));return vP({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),f=d.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=VT(d.map((function(e){return e.shape})),1);var p=1===d[0].shape[0],h=ZN(f,a,t[0].dtype,p),m=VT(o.map((function(e){return e.shape})),r),g=n.makeTensorInfo(m,t[0].dtype,h);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}var QP={kernelName:"Concat",backendName:"cpu",kernelFunc:XP};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function YP(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;TN([a,o],"conv2d");for(var d=ZS(u),f=jS(a.shape,o.shape,i,c,s,l,!1,d),p=f.filterHeight,h=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,v=f.padInfo.left,y=f.padInfo.top,b="channelsLast"===f.dataFormat,x=new lE(f.outShape,a.dtype),k=NC(a.shape),w=NC(o.shape),I=k[0],C=b?k[1]:k[2],E=b?k[2]:1,S=b?1:k[1],T=x.strides[0],A=b?x.strides[1]:x.strides[2],N=b?x.strides[2]:1,_=b?1:x.strides[1],R=n.data.get(a.dataId).values,O=n.data.get(o.dataId).values,F=x.values,M=0;M<f.batchSize;++M)for(var D=M*I,B=M*T,P=0;P<f.outHeight;++P)for(var L=B+P*A,U=P*f.strideHeight-y,V=0;V<p;++V){var W=U+V*m;if(!(W<0||W>=f.inHeight))for(var z=V*w[0],j=D+W*C,H=0;H<f.outWidth;++H)for(var G=L+H*N,K=H*f.strideWidth-v,q=0;q<h;++q){var X=K+q*g;if(!(X<0||X>=f.inWidth))for(var Q=j+X*E,Y=z+q*w[1],$=0;$<f.inChannels;++$){for(var Z=R[Q+$*S],J=0;J<f.outChannels;++J)F[G+J*_]+=Z*O[Y+J];Y+=f.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,F)}var $P={kernelName:"Conv2D",backendName:"cpu",kernelFunc:YP},ZP={kernelName:"Conv2DBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;TN([a,o],"conv2dBackpropFilter");for(var d=ZS(u),f=jS(a.shape,l,i,1,s,c,!1,d),p=f.strideHeight,h=f.strideWidth,m=f.filterHeight,g=f.filterWidth,v="channelsLast"===f.dataFormat,y=new lE(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,k=n.data.get(a.dataId).values,w=n.data.get(o.dataId).values,I=new lE(a.shape,a.dtype,k),C=new lE(o.shape,o.dtype,w),E=0;E<m;++E)for(var S=Math.max(0,Math.ceil((x-E)/p)),T=Math.min(f.outHeight,(f.inHeight+x-E)/p),A=0;A<g;++A)for(var N=Math.max(0,Math.ceil((b-A)/h)),_=Math.min(f.outWidth,(f.inWidth+b-A)/h),R=0;R<f.inChannels;++R)for(var O=0;O<f.outChannels;++O){for(var F=0,M=0;M<f.batchSize;++M)for(var D=S;D<T;++D)for(var B=E+D*p-x,P=N;P<_;++P){var L=A+P*h-b;F+=v?I.get(M,B,L,R)*C.get(M,D,P,O):I.get(M,R,B,L)*C.get(M,O,D,P)}y.set(F,E,A,R,O)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},JP={kernelName:"Conv2DBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode;TN([a,o],"conv2dBackpropInput");var d=NC(o.shape),f=NC(a.shape),p=ZS(c),h=jS(i,o.shape,s,1,u,l,!1,p),m=new lE(h.inShape,"float32"),g=m.values,v=n.data.get(a.dataId).values,y=n.data.get(o.dataId).values,b=qy(d,3),x=b[0],k=b[1],w=b[2],I=h.batchSize,C=h.filterHeight,E=h.filterWidth,S=h.inChannels,T=h.inHeight,A=h.inWidth,N=h.outChannels,_=h.outHeight,R=h.outWidth,O=h.strideHeight,F=h.strideWidth;p=h.dataFormat;for(var M=C-1-h.padInfo.top,D=E-1-h.padInfo.left,B="channelsLast"===p,P=m.strides[0],L=B?m.strides[1]:m.strides[2],U=B?m.strides[2]:1,V=B?1:m.strides[1],W=f[0],z=B?f[1]:f[2],j=B?f[2]:1,H=B?1:f[1],G=0;G<I;++G)for(var K=0;K<S;++K)for(var q=0;q<T;++q)for(var X=q-M,Q=Math.max(0,Math.ceil(X/O)),Y=Math.min(_,(C+X)/O),$=0;$<A;++$){for(var Z=$-D,J=Math.max(0,Math.ceil(Z/F)),ee=Math.min(R,(E+Z)/F),te=0,ne=Q;ne<Y;++ne)for(var re=ne*O-X,ae=J;ae<ee;++ae)for(var oe=W*G+z*ne+j*ae,ie=x*(C-1-re)+k*(E-1-(ae*F-Z))+w*K,se=0;se<N;++se)te+=v[oe+H*se]*y[ie+se];g[P*G+L*q+U*$+V*K]=te}return n.makeTensorInfo(m.shape,m.dtype,m.values)}},eL={kernelName:"Conv3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations;TN([a,o],"conv3d");for(var c=HS(a.shape,o.shape,i,u,s),l=c.filterDepth,d=c.filterHeight,f=c.filterWidth,p=c.dilationDepth,h=c.dilationHeight,m=c.dilationWidth,g=c.padInfo,v=g.front,y=g.left,b=g.top,x=new lE(c.outShape,a.dtype),k=n.data.get(a.dataId).values,w=n.data.get(o.dataId).values,I=x.values,C=NC(a.shape),E=NC(o.shape),S=0;S<c.batchSize;++S)for(var T=S*C[0],A=S*x.strides[0],N=0;N<c.outDepth;++N)for(var _=A+N*x.strides[1],R=N*c.strideDepth-v,O=0;O<l;++O){var F=R+O*p;if(!(F<0||F>=c.inDepth))for(var M=O*E[0],D=T+F*C[1],B=0;B<c.outHeight;++B)for(var P=_+B*x.strides[2],L=B*c.strideHeight-b,U=0;U<d;++U){var V=L+U*h;if(!(V<0||V>=c.inHeight))for(var W=M+U*E[1],z=D+V*C[2],j=0;j<c.outWidth;++j)for(var H=P+j*c.outChannels,G=j*c.strideWidth-y,K=0;K<f;++K){var q=G+K*m;if(!(q<0||q>=c.inWidth))for(var X=W+K*E[2],Q=z+q*c.inChannels,Y=X,$=0;$<c.inChannels;++$){for(var Z=k[Q+$],J=0;J<c.outChannels;++J)I[H+J]+=Z*w[Y+J];Y+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}},tL={kernelName:"Conv3DBackpropFilterV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.filterShape;TN([a,o],"conv3dBackpropFilterV2");for(var c=NC(a.shape),l=NC(o.shape),d=HS(a.shape,u,i,1,s),f=d.strideDepth,p=d.strideHeight,h=d.strideWidth,m=d.filterDepth,g=d.filterHeight,v=d.filterWidth,y=new lE(d.filterShape,"float32"),b=y.values,x=qy(y.strides,4),k=x[0],w=x[1],I=x[2],C=x[3],E=n.data.get(o.dataId).values,S=qy(l,4),T=S[0],A=S[1],N=S[2],_=S[3],R=n.data.get(a.dataId).values,O=qy(c,4),F=O[0],M=O[1],D=O[2],B=O[3],P=d.padInfo.front,L=d.padInfo.left,U=d.padInfo.top,V=0;V<m;++V)for(var W=Math.max(0,Math.ceil((P-V)/f)),z=Math.min(d.outDepth,(d.inDepth+P-V)/f),j=V*k,H=0;H<g;++H)for(var G=Math.max(0,Math.ceil((U-H)/p)),K=Math.min(d.outHeight,(d.inHeight+U-H)/p),q=H*w+j,X=0;X<v;++X)for(var Q=Math.max(0,Math.ceil((L-X)/h)),Y=Math.min(d.outWidth,(d.inWidth+L-X)/h),$=X*I+q,Z=0;Z<d.inChannels;++Z)for(var J=Z*C+$,ee=0;ee<d.outChannels;++ee){for(var te=0,ne=0;ne<d.batchSize;++ne)for(var re=ne*F,ae=ne*T,oe=W;oe<z;++oe)for(var ie=(V+oe*f-P)*M+re,se=oe*A+ae,ue=G;ue<K;++ue)for(var ce=(H+ue*p-U)*D+ie,le=ue*N+se,de=Q;de<Y;++de){var fe=de*_+le;te+=R[(X+de*h-L)*B+ce+Z]*E[fe+ee]}b[J+ee]=te}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},nL={kernelName:"Conv3DBackpropInputV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,u=r.inputShape;TN([a],"conv3dBackpropInputV2");for(var c=NC(a.shape),l=NC(o.shape),d=HS(u,o.shape,s,1,i),f=new lE(d.inShape,"float32"),p=f.values,h=qy(f.strides,4),m=h[0],g=h[1],v=h[2],y=h[3],b=n.data.get(a.dataId).values,x=qy(c,4),k=x[0],w=x[1],I=x[2],C=x[3],E=n.data.get(o.dataId).values,S=qy(l,4),T=S[0],A=S[1],N=S[2],_=S[3],R=d.batchSize,O=d.filterDepth,F=d.filterHeight,M=d.filterWidth,D=d.inChannels,B=d.inDepth,P=d.inHeight,L=d.inWidth,U=d.outChannels,V=d.outDepth,W=d.outHeight,z=d.outWidth,j=d.strideDepth,H=d.strideHeight,G=d.strideWidth,K=O-1-d.padInfo.front,q=F-1-d.padInfo.top,X=M-1-d.padInfo.left,Q=0;Q<R;++Q)for(var Y=0;Y<D;++Y)for(var $=0;$<B;++$)for(var Z=$-K,J=Math.max(0,Math.ceil(Z/j)),ee=Math.min(V,(O+Z)/j),te=0;te<P;++te)for(var ne=te-q,re=Math.max(0,Math.ceil(ne/H)),ae=Math.min(W,(F+ne)/H),oe=0;oe<L;++oe){for(var ie=oe-X,se=Math.max(0,Math.ceil(ie/G)),ue=Math.min(z,(M+ie)/G),ce=0,le=J;le<ee;++le)for(var de=le*j-Z,fe=re;fe<ae;++fe)for(var pe=fe*H-ne,he=se;he<ue;++he)for(var me=k*Q+w*le+I*fe+C*he,ge=T*(O-1-de)+A*(F-1-pe)+N*(M-1-(he*G-ie))+_*Y,ve=0;ve<U;++ve)ce+=b[me+ve]*E[ge+ve];p[m*Q+g*$+v*te+y*oe+Y]=ce}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},rL={kernelName:"Cos",backendName:"cpu",kernelFunc:XN("Cos",(function(e){return Math.cos(e)}))},aL={kernelName:"Cosh",backendName:"cpu",kernelFunc:XN("Cosh",(function(e){return Math.cosh(e)}))},oL={kernelName:"CropAndResize",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=qy(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],m=o.shape[0],g=qy(s,2),v=g[0],y=g[1],b=dS([m,v,y,h],"float32"),x=n.data.get(o.dataId).values,k=n.data.get(i.dataId).values,w=n.data.get(a.dataId).values,I=NC(a.shape),C=NC(b.shape),E=0;E<m;E++){var S=4*E,T=x[S],A=x[S+1],N=x[S+2],_=x[S+3],R=k[E];if(!(R>=d))for(var O=v>1?(N-T)*(f-1)/(v-1):0,F=y>1?(_-A)*(p-1)/(y-1):0,M=0;M<v;M++){var D=v>1?T*(f-1)+M*O:.5*(T+N)*(f-1);if(D<0||D>f-1)for(var B=0;B<y;B++)for(var P=0;P<h;P++){var L=P+B*C[2]+M*C[1]+E*C[0];b.values[L]=c}else if("bilinear"===u)for(var U=Math.floor(D),V=Math.ceil(D),W=D-U,z=0;z<y;z++){var j=y>1?A*(p-1)+z*F:.5*(A+_)*(p-1);if(j<0||j>p-1)for(var H=0;H<h;H++){var G=H+z*C[2]+M*C[1]+E*C[0];b.values[G]=c}else for(var K=Math.floor(j),q=Math.ceil(j),X=j-K,Q=0;Q<h;Q++){var Y=Q+K*I[2]+U*I[1]+R*I[0],$=w[Y],Z=w[Y=Q+q*I[2]+U*I[1]+R*I[0]],J=w[Y=Q+K*I[2]+V*I[1]+R*I[0]],ee=$+(Z-$)*X,te=J+(w[Y=Q+q*I[2]+V*I[1]+R*I[0]]-J)*X;Y=Q+z*C[2]+M*C[1]+E*C[0],b.values[Y]=ee+(te-ee)*W}}else for(var ne=0;ne<y;++ne){var re=y>1?A*(p-1)+ne*F:.5*(A+_)*(p-1);if(re<0||re>p-1)for(var ae=0;ae<h;ae++){var oe=ae+ne*C[2]+M*C[1]+E*C[0];b.values[oe]=c}else for(var ie=Math.round(re),se=Math.round(D),ue=0;ue<h;ue++){var ce=ue+ie*I[2]+se*I[1]+R*I[0],le=ue+ne*C[2]+M*C[1]+E*C[0];b.values[le]=w[ce]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},iL={kernelName:"Cumsum",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;TN(a,"cumsum");var u=dT([o],a.shape.length),c=a;null!=u&&(c=A_({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=pT(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=kE(c.dtype,"int32"),f=OC(dC(c.shape),d),p=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},g=0;g<p.length;g+=h)for(var v=0;v<h;v++){var y=m(g,v);if(0===v)f[y]=i?0:p[y];else{var b=m(g,v-1);f[y]=i?p[b]+f[b]:p[y]+f[b]}}var x=n.makeTensorInfo(c.shape,d,f);if(null!=u){var k=A_({inputs:{x:x},backend:n,attrs:{perm:fT(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),k}return x}},sL={kernelName:"DenseBincount",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=GN(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}if(2===a.shape.length){var c=KN(n.bufferSync(a),n.bufferSync(o),i,s);return n.makeTensorInfo(c.shape,o.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}},uL={kernelName:"DepthToSpace",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;uC("NHWC"===i,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i)})),uC(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],d=u*o,f=c*o,p=l/(o*o),h=n.data.get(a.dataId).values,m=new Float32Array(s*d*f*p),g=0,v=0;v<s;++v)for(var y=0;y<d;++y)for(var b=Math.floor(y/o),x=y%o,k=0;k<f;++k)for(var w=Math.floor(k/o),I=(x*o+k%o)*p,C=0;C<p;++C){var E=C+I+l*(w+c*(b+u*v));m[g++]=h[E]}return n.makeTensorInfo([s,d,f,p],a.dtype,m)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function cL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;TN([a,o],"depthwiseConv2DNative");var l=NC(a.shape),d=NC(o.shape),f=u;null==f&&(f=[1,1]),uC($S(i,f),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(f,"'")}));for(var p=jS(a.shape,o.shape,i,f,s,c,!0),h=p.filterHeight,m=p.filterWidth,g=p.dilationHeight,v=p.dilationWidth,y=p.padInfo,b=y.left,x=y.top,k=p.outChannels/p.inChannels,w=new lE(p.outShape,a.dtype),I=n.data.get(a.dataId).values,C=n.data.get(o.dataId).values,E=w.values,S=0;S<p.batchSize;++S)for(var T=S*l[0],A=S*w.strides[0],N=0;N<p.outHeight;++N)for(var _=A+N*w.strides[1],R=N*p.strideHeight-b,O=0;O<h;++O){var F=R+O*g;if(!(F<0||F>=p.inHeight))for(var M=O*d[0],D=T+F*l[1],B=0;B<p.outWidth;++B)for(var P=_+B*w.strides[2],L=B*p.strideWidth-x,U=0;U<m;++U){var V=L+U*v;if(!(V<0||V>=p.inWidth))for(var W=M+U*d[1],z=D+V*p.inChannels,j=P,H=W,G=0;G<p.inChannels;++G){for(var K=I[z+G],q=0;q<k;++q)E[j+q]+=K*C[H+q];j+=k,H+=k}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var lL={kernelName:"DepthwiseConv2dNative",backendName:"cpu",kernelFunc:cL},dL={kernelName:"DepthwiseConv2dNativeBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;TN([a,o],"depthwiseConv2dNativeBackpropFilter");for(var d=jS(a.shape,l,i,s,u,c,!0),f=d.strideHeight,p=d.strideWidth,h=d.filterHeight,m=d.filterWidth,g=new lE(d.filterShape,"float32"),v=d.padInfo.left,y=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(a.dataId).values,k=new lE(a.shape,a.dtype,x),w=n.data.get(o.dataId).values,I=new lE(o.shape,o.dtype,w),C=0;C<h;++C)for(var E=Math.max(0,Math.ceil((y-C)/f)),S=Math.min(d.outHeight,(d.inHeight+y-C)/f),T=0;T<m;++T)for(var A=Math.max(0,Math.ceil((v-T)/p)),N=Math.min(d.outWidth,(d.inWidth+v-T)/p),_=0;_<d.outChannels;++_){for(var R=Math.trunc(_/b),O=_%b,F=0,M=0;M<d.batchSize;++M)for(var D=E;D<S;++D)for(var B=C+D*f-y,P=A;P<N;++P){var L=T+P*p-v;F+=k.get(M,B,L,R)*I.get(M,D,P,_)}g.set(F,C,T,R,O)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}},fL={kernelName:"DepthwiseConv2dNativeBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape;TN([a,o],"depthwiseConv2DNativeBackpropInput");for(var d=NC(a.shape),f=NC(o.shape),p=jS(l,o.shape,i,s,u,c,!0),h=new lE(p.inShape,"float32"),m=h.values,g=qy(h.strides,3),v=g[0],y=g[1],b=g[2],x=n.data.get(a.dataId).values,k=qy(d,3),w=k[0],I=k[1],C=k[2],E=n.data.get(o.dataId).values,S=qy(f,3),T=S[0],A=S[1],N=S[2],_=p.batchSize,R=p.filterHeight,O=p.filterWidth,F=p.inChannels,M=p.inHeight,D=p.inWidth,B=p.outChannels,P=p.outHeight,L=p.outWidth,U=p.strideHeight,V=p.strideWidth,W=R-1-p.padInfo.top,z=O-1-p.padInfo.left,j=B/F,H=0;H<_;++H)for(var G=0;G<F;++G)for(var K=0;K<M;++K)for(var q=K-W,X=Math.max(0,Math.ceil(q/U)),Q=Math.min(P,(R+q)/U),Y=0;Y<D;++Y){for(var $=Y-z,Z=Math.max(0,Math.ceil($/V)),J=Math.min(L,(O+$)/V),ee=0,te=X;te<Q;++te)for(var ne=te*U-q,re=Z;re<J;++re)for(var ae=w*H+I*te+C*re,oe=T*(R-1-ne)+A*(O-1-(re*V-$))+N*G,ie=0;ie<j;++ie)ee+=x[ae+(G*j+ie)]*E[oe+ie];m[v*H+y*K+b*Y+G]=ee}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},pL={kernelName:"Diag",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=dC(r.shape),o=n.data.get(r.dataId).values,i=dS([a,a],r.dtype),s=i.values,u=0;u<o.length;u++)s[u*a+u]=o[u];var c=[].concat(Xy(r.shape),Xy(r.shape));return n.makeTensorInfo(c,i.dtype,i.values)}},hL={kernelName:"Dilation2D",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,d=a.shape.length,f=c.data.get(o.dataId).values,p=o.shape.length,h=VS(a.shape,o.shape,i,s,"NHWC",u),m=h.batchSize,g=h.inHeight,v=h.inWidth,y=h.inChannels,b=h.outHeight,x=h.outWidth,k=h.padInfo,w=h.strideHeight,I=h.strideWidth,C=h.filterHeight,E=h.filterWidth,S=h.dilationHeight,T=h.dilationWidth,A=h.outShape,N=dC(A),_=A.length,R=kC(a.dtype,N),O=0;O<m;++O)for(var F=0;F<b;++F)for(var M=F*w-k.top,D=0;D<x;++D)for(var B=D*I-k.left,P=0;P<y;++P){for(var L=Number.MIN_SAFE_INTEGER,U=0;U<C;++U){var V=M+U*S;if(V>=0&&V<g)for(var W=0;W<E;++W){var z=B+W*T;if(z>=0&&z<v){var j=DC([O,V,z,P],d,NC(a.shape)),H=DC([U,W,P],p,NC(o.shape)),G=l[j]+f[H];G>L&&(L=G)}}}R[DC([O,F,D,P],_,NC(A))]=L}return{dataId:c.write(ZC(R,a.dtype),A,a.dtype),shape:A,dtype:a.dtype}}},mL={kernelName:"Dilation2DBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=RC(a.shape,l.data.get(a.dataId).values),f=RC(o.shape,l.data.get(o.dataId).values),p=VS(a.shape,o.shape,s,u,"NHWC",c),h=p.batchSize,m=p.inHeight,g=p.inWidth,v=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,k=p.strideHeight,w=p.strideWidth,I=p.filterHeight,C=p.filterWidth,E=p.dilationHeight,S=p.dilationWidth,T=p.outShape;uC(i.rank===T.length,(function(){return"Error in Dilation2DBackpropFilter, dy must have the same rank as output ".concat(T.length,", but got ").concat(i.rank)}));for(var A=RC(T,l.data.get(i.dataId).values),N=FC(o.shape,o.dtype),_=0;_<h;++_)for(var R=0;R<y;++R)for(var O=R*k-x.top,F=0;F<b;++F)for(var M=F*w-x.left,D=0;D<v;++D){for(var B=Number.MIN_SAFE_INTEGER,P=0,L=0,U=0;U<I;++U){var V=O+U*E;if(V>=0&&V<m)for(var W=0;W<C;++W){var z=M+W*S;if(z>=0&&z<g){var j=d[_][V][z][D]+f[U][W][D];j>B&&(B=j,P=U,L=W)}}}N[P][L][D]+=A[_][R][F][D]}return{dataId:l.write(ZC(N,a.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},gL={kernelName:"Dilation2DBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=RC(a.shape,l.data.get(a.dataId).values),f=RC(o.shape,l.data.get(o.dataId).values),p=VS(a.shape,o.shape,s,u,"NHWC",c),h=p.batchSize,m=p.inHeight,g=p.inWidth,v=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,k=p.strideHeight,w=p.strideWidth,I=p.filterHeight,C=p.filterWidth,E=p.dilationHeight,S=p.dilationWidth,T=p.outShape;uC(i.rank===T.length,(function(){return"Error in Dilation2DBackpropInput, dy must have the same rank as output ".concat(T.length,", but got ").concat(i.rank)}));for(var A=RC(T,l.data.get(i.dataId).values),N=FC(a.shape,a.dtype),_=0;_<h;++_)for(var R=0;R<y;++R)for(var O=R*k-x.top,F=0;F<b;++F)for(var M=F*w-x.left,D=0;D<v;++D){for(var B=Number.MIN_SAFE_INTEGER,P=O<0?0:O,L=M<0?0:M,U=0;U<I;++U){var V=O+U*E;if(V>=0&&V<m)for(var W=0;W<C;++W){var z=M+W*S;if(z>=0&&z<g){var j=d[_][V][z][D]+f[U][W][D];j>B&&(B=j,P=V,L=z)}}}N[_][P][L][D]+=A[_][R][F][D]}return{dataId:l.write(ZC(N,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},vL={kernelName:"EluGrad",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;TN([r,a],"eluGrad");for(var o=new Float32Array(dC(a.shape)),i=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<i.length;++u){var c=i[u];o[u]=c>=1?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",o)}},yL=VN("Equal",_N((function(e,t){return e===t?1:0})),null,"bool"),bL={kernelName:"Equal",backendName:"cpu",kernelFunc:yL},xL={kernelName:"Erf",backendName:"cpu",kernelFunc:XN("Erf",(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))}))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function kL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,o=r.dim,i=a.shape.length,s=a.shape.slice(),u=o;return o<0&&(uC(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+o+1),s.splice(u,0,1),vP({inputs:{x:a},backend:n,attrs:{shape:s}})}var wL={kernelName:"ExpandDims",backendName:"cpu",kernelFunc:kL},IL=VN("RealDiv",_N((function(e,t){return e/t}))),CL={kernelName:"RealDiv",backendName:"cpu",kernelFunc:IL};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function EL(e,t,n){for(var r=e.shape,a=r[0],o=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,c=[a,o],l=dC(c),d=xC("float32",l),f=xC("float32",l),p=0;p<a;p++){for(var h=B_({inputs:{x:s},backend:n,attrs:{begin:[p,0],size:[1,o]}}),m=B_({inputs:{x:u},backend:n,attrs:{begin:[p,0],size:[1,o]}}),g=RN({inputs:{real:h,imag:m},backend:n}),v=SL(g,t,n),y=QT(v.real,v.imag),b=0;b<o;b++){var x=JT(y,b);d[p*o+b]=x.real,f[p*o+b]=x.imag}n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g)}var k=n.makeTensorInfo(c,"float32",d),w=n.makeTensorInfo(c,"float32",f),I=RN({inputs:{real:k,imag:w},backend:n});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(w),I}function SL(e,t,n){var r,a=dC(e.shape),o=n.data.get(e.dataId),i=n.data.get(o.complexTensorInfos.real.dataId).values,s=n.data.get(o.complexTensorInfos.imag.dataId).values;if(0==((r=a)&r-1)){var u=TL(i,s,a,t,n),c=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(c,"float32",u.real),d=n.makeTensorInfo(c,"float32",u.imag),f=n.makeTensorInfo([],"float32",$C(a,"float32")),p=MN({inputs:{x:f},backend:n}),h=CL.kernelFunc({inputs:{a:l,b:f},backend:n}),m=CL.kernelFunc({inputs:{a:d,b:p},backend:n}),g=n.data.get(h.dataId).values,v=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),{real:g,imag:v}}return u}return YT(function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var o=0,i=0,s=0;s<t;s++){var u=nA(a*s,t,n),c=JT(e,s);o+=c.real*u.real-c.imag*u.imag,i+=c.real*u.imag+c.imag*u.real}n&&(o/=t,i/=t),eA(r,o,i,a)}return r}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(QT(i,s),a,t))}function TL(e,t,n,r,a){if(1===n)return{real:e,imag:t};var o=QT(e,t),i=n/2,s=$T(o),u=s.real,c=s.imag,l=[u.length],d=a.makeTensorInfo(l,"float32",u),f=a.makeTensorInfo(l,"float32",c),p=RN({inputs:{real:d,imag:f},backend:a}),h=ZT(o),m=h.real,g=h.imag,v=[m.length],y=a.makeTensorInfo(v,"float32",m),b=a.makeTensorInfo(v,"float32",g),x=RN({inputs:{real:y,imag:b},backend:a}),k=TL(u,c,i,r,a),w=k.real,I=k.imag,C=[w.length],E=a.makeTensorInfo(C,"float32",w),S=a.makeTensorInfo(C,"float32",I),T=RN({inputs:{real:E,imag:S},backend:a}),A=TL(m,g,i,r,a),N=A.real,_=A.imag,R=[N.length],O=a.makeTensorInfo(R,"float32",N),F=a.makeTensorInfo(R,"float32",_),M=RN({inputs:{real:O,imag:F},backend:a}),D=tA(n,r),B=[D.real.length],P=a.makeTensorInfo(B,"float32",D.real),L=a.makeTensorInfo(B,"float32",D.imag),U=RN({inputs:{real:P,imag:L},backend:a}),V=k_({inputs:{a:U,b:M},backend:a}),W=jN({inputs:{a:T,b:V},backend:a}),z=z_({inputs:{a:T,b:V},backend:a}),j=BN({inputs:{input:W},backend:a}),H=BN({inputs:{input:z},backend:a}),G=KP({inputs:{input:W},backend:a}),K=KP({inputs:{input:z},backend:a}),q=XP({inputs:[j,H],backend:a,attrs:{axis:0}}),X=XP({inputs:[G,K],backend:a,attrs:{axis:0}}),Q=a.data.get(q.dataId).values,Y=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(X),{real:Q,imag:Y}}var AL={kernelName:"FFT",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=dC(r.shape),o=r.shape[r.shape.length-1],i=vP({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=EL(i,!1,n),u=vP({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function NL(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype||SC(a),i=kC(o,dC(r));return function(e,t,n){e.fill(t)}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(i,a),t.makeTensorInfo(r,o,i)}var _L={kernelName:"Fill",backendName:"cpu",kernelFunc:NL},RL={kernelName:"FlipLeftRight",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,o=xC(r.dtype,dC(r.shape)),i=qy(r.shape,4),s=i[0],u=i[1],c=i[2],l=i[3],d=a.data.get(r.dataId).values,f=0;f<s;f++)for(var p=f*c*u*l,h=0;h<u;h++)for(var m=h*(c*l),g=0;g<c;g++)for(var v=g*l,y=0;y<l;y++){var b=[s,h,g,y][2],x=Math.round(c-b),k=p+m+v+y,w=d[k];x>=0&&x<c&&(w=d[p+m+x*l+y]),o[k]=w}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},OL={kernelName:"FloorDiv",backendName:"cpu",kernelFunc:VN("FloorDiv",_N((function(e,t){return Math.floor(e/t)})),null,"int32")},FL={kernelName:"FusedConv2D",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=YP({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(i){var g=m;m=jN({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(p){var v=m;m=gP(n,m,p,s,h),n.disposeIntermediateTensorInfo(v)}return m}},ML={kernelName:"FusedDepthwiseConv2D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=cL({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(i){var g=m;m=jN({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(p){var v=m;m=gP(n,m,p,s,h),n.disposeIntermediateTensorInfo(v)}return m}},DL={kernelName:"GatherNd",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=dC(r.shape),i=a.shape,s=i[i.length-1],u=qy(hS(r,a),4),c=u[0],l=u[1],d=u[2],f=u[3];if(0===l)return n.makeTensorInfo(c,r.dtype,[]);for(var p=dS([l,d],r.dtype),h=n.data.get(a.dataId).values,m=n.data.get(r.dataId).values,g=0;g<l;g++){for(var v=[],y=0,b=0;b<s;b++){var x=h[g*s+b];y+=x*f[b],v.push(x)}if(y<0||y>=o/d)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(r.shape));for(var k=0;k<d;k++)p.values[g*d+k]=m[y*d+k]}return n.makeTensorInfo(c,p.dtype,p.values)}},BL={kernelName:"GatherV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims;TN([a,o],"gatherV2");var u=s;null==s&&(u=0);var c=dC(o.shape),l=iA(a,o,yC(i,a.shape)[0],u),d=vP({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),f=vP({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}}),p=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize],h=n.bufferSync(f),m=i_(n.bufferSync(d),h,p);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.makeTensorInfo(l.outputShape,m.dtype,m.values)}},PL={kernelName:"GreaterEqual",backendName:"cpu",kernelFunc:VN("GreaterEqual",_N((function(e,t){return e>=t?1:0})),null,"bool")},LL={kernelName:"IFFT",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=t.input,a=dC(r.shape),o=r.shape[r.shape.length-1],i=vP({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=EL(i,!0,n),u=vP({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}},UL={kernelName:"IsFinite",backendName:"cpu",kernelFunc:XN("IsFinite",(function(e){return Number.isFinite(e)?1:0}),"bool")},VL={kernelName:"IsInf",backendName:"cpu",kernelFunc:XN("IsInf",(function(e){return Math.abs(e)===1/0?1:0}),"bool")},WL={kernelName:"IsNan",backendName:"cpu",kernelFunc:XN("IsNan",(function(e){return Number.isNaN(e)?1:0}),"bool")},zL={kernelName:"LessEqual",backendName:"cpu",kernelFunc:VN("LessEqual",_N((function(e,t){return e<=t?1:0})),null,"bool")},jL={kernelName:"LinSpace",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.backend,n=e.attrs,r=d_(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},HL={kernelName:"Log1p",backendName:"cpu",kernelFunc:XN("Log1p",(function(e){return Math.log1p(e)}))},GL={kernelName:"LogicalAnd",backendName:"cpu",kernelFunc:VN("LogicalAnd",_N((function(e,t){return e&&t})),null,"bool")},KL={kernelName:"LogicalNot",backendName:"cpu",kernelFunc:XN("LogicalNot",(function(e){return e?0:1}),"bool")},qL={kernelName:"LogicalOr",backendName:"cpu",kernelFunc:VN("LogicalOr",_N((function(e,t){return e||t})),null,"bool")},XL={kernelName:"LRN",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta;TN(a,"LRN");var c=a.shape[3],l=c-1,d=n.data.get(a.dataId).values,f=dC(a.shape),p=new Float32Array(f);function h(e){for(var t=e%c,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,l),a=0;n<=r;n++){var i=d[n];a+=i*i}return a}for(var m=0;m<f;m++){var g=h(m),v=d[m]*Math.pow(i+s*g,-u);p[m]=v}return n.makeTensorInfo(a.shape,a.dtype,p)}},QL={kernelName:"LRNGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;TN(i,"LRNGrad");for(var d=dC(i.shape),f=i.shape[3],p=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,m=n.data.get(o.dataId).values,g=new Float32Array(d),v=d,y=0;y<v;y++){for(var b=y%f,x=y-b+Math.max(0,b-s),k=y-b+Math.min(f,b+s+1),w=0,I=x;I<k;I++)w+=Math.pow(h[I],2);w=c*w+u;for(var C=x;C<k;C++){var E=-2*c*l*h[C]*m[y]/w;y===C&&(E+=Math.pow(w,-l)),E*=p[y],g[C]+=E}}return n.makeTensorInfo(i.shape,a.dtype,g)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function YL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,i=r.keepDims,s=n,u=a.shape,c=u.length,l=yC(o,u),d=l,f=dT(d,c),p=s.data.get(a.dataId).values;if(null!=f){for(var h=new Array(c),m=0;m<h.length;m++)h[m]=u[f[m]];p=T_(p,u,a.dtype,f,h),d=pT(d.length,c),u=h}TN(a,"max"),lT("max",d,c);var g=qy(uT(u,d),2),v=g[0],y=h_(p,dC(g[1]),v,a.dtype),b=s.write(y,v,a.dtype),x=v;return i&&(x=cT(v,l)),{dataId:b,shape:x,dtype:a.dtype}}var $L={kernelName:"Max",backendName:"cpu",kernelFunc:YL},ZL={kernelName:"MaxPool",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;TN(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;uC($S(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c,l=WS(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&fC(l.inShape,l.outShape))c=MN({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=NC(a.shape),p=MP(d,a.shape,a.dtype,f,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return c}},JL={kernelName:"MaxPool3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;TN(a,"maxPool3d");var l=zS(a.shape,o,i,1,s,u,c),d=BP(n.data.get(a.dataId).values,a.shape,a.dtype,NC(a.shape),l,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}},eU={kernelName:"MaxPool3DGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;TN([a,o],"maxPool3DGrad");for(var l=zS(o.shape,i,s,1,u,c),d=function(e,t){for(var n=dS(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var v=0;v<t.outDepth;++v){for(var y=v*r-f,b=y;b<0;)b+=i;for(var x=Math.min(t.inDepth,c+y),k=0;k<t.outHeight;++k){for(var w=k*a-p,I=w;I<0;)I+=s;for(var C=Math.min(t.inHeight,l+w),E=0;E<t.outWidth;++E){for(var S=E*o-h,T=S;T<0;)T+=u;for(var A=Math.min(t.inWidth,d+S),N=Number.NEGATIVE_INFINITY,_=-1,R=b;R<x;R+=i)for(var O=R-y,F=I;F<C;F+=s)for(var M=F-w,D=T;D<A;D+=u){var B=D-S,P=e.get(m,R,F,D,g);P>=N&&(N=P,_=O*l*d+M*l+B)}n.set(_,m,v,k,E,g)}}}return n}(n.bufferSync(o),l),f=l.strideDepth,p=l.strideHeight,h=l.strideWidth,m=l.dilationDepth,g=l.dilationHeight,v=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,k=y-1-l.padInfo.front,w=x-1-l.padInfo.left,I=b-1-l.padInfo.top,C=dS(o.shape,"float32"),E=n.bufferSync(a),S=0;S<l.batchSize;++S)for(var T=0;T<l.inChannels;++T)for(var A=0;A<l.inDepth;++A)for(var N=0;N<l.inHeight;++N)for(var _=0;_<l.inWidth;++_){for(var R=A-k,O=N-I,F=_-w,M=0,D=0;D<y;D+=m){var B=(R+D)/f;if(!(B<0||B>=l.outDepth||Math.floor(B)!==B))for(var P=0;P<b;P+=g){var L=(O+P)/p;if(!(L<0||L>=l.outHeight||Math.floor(L)!==L))for(var U=0;U<x;U+=v){var V=(F+U)/h;if(!(V<0||V>=l.outWidth||Math.floor(V)!==V)){var W=y*b*x-1-d.get(S,B,L,V,T)===D*b*x+P*x+U?1:0;0!==W&&(M+=E.get(S,B,L,V,T)*W)}}}}C.set(M,S,A,N,_,T)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}},tU={kernelName:"MaxPoolGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;TN([o,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=WS(i.shape,s,u,1,c,l),f=n.data.get(i.dataId).values,p=dS(d.outShape,i.dtype,DP(f,i.shape,i.dtype,d).values),h=d.strideHeight,m=d.strideWidth,g=d.dilationHeight,v=d.dilationWidth,y=d.effectiveFilterHeight,b=d.effectiveFilterWidth,x=b-1-d.padInfo.left,k=y-1-d.padInfo.top,w=dS(i.shape,"float32"),I=n.data.get(a.dataId).values,C=dS(a.shape,"float32",I),E=0;E<d.batchSize;++E)for(var S=0;S<d.inChannels;++S)for(var T=0;T<d.inHeight;++T)for(var A=0;A<d.inWidth;++A){for(var N=T-k,_=A-x,R=0,O=0;O<y;O+=g){var F=(N+O)/h;if(!(F<0||F>=d.outHeight||Math.floor(F)!==F))for(var M=0;M<b;M+=v){var D=(_+M)/m;if(!(D<0||D>=d.outWidth||Math.floor(D)!==D)){var B=y*b-1-p.get(E,F,D,S)===O*b+M?1:0;0!==B&&(R+=C.get(E,F,D,S)*B)}}}w.set(R,E,T,A,S)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},nU={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,i=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;TN(a,"MaxPoolWithArgmax");var l=c.data.get(a.dataId).values,d=WS(a.shape,o,i,[1,1],s),f=qy(function(e,t,n,r,a){var o=MP(e,0,n,NC(t),a,"max"),i=DP(e,t,n,a,!0,r);return[o.values,i.values]}(l,a.shape,a.dtype,u,d),2),p=f[0],h=f[1],m=c.write(p,d.outShape,a.dtype),g=c.write(h,d.outShape,a.dtype);return[{dataId:m,shape:d.outShape,dtype:a.dtype},{dataId:g,shape:d.outShape,dtype:"int32"}]}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function rU(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.axis,s=a.keepDims;TN(o,"sum");var u=(t="bool"===o.dtype?LN({inputs:{x:o},backend:r,attrs:{dtype:"int32"}}):MN({inputs:{x:o},backend:r})).shape.length,c=yC(i,t.shape),l=dT(c,u),d=c,f=t;null!=l&&(f=A_({inputs:{x:t},backend:r,attrs:{perm:l}}),d=pT(d.length,u)),lT("sum",d,f.shape.length);for(var p=qy(uT(f.shape,d),2),h=p[0],m=p[1],g=FN(r,h,kE(f.dtype,"int32")),v=dC(m),y=r.data.get(g.dataId).values,b=r.data.get(f.dataId).values,x=0;x<y.length;++x){for(var k=x*v,w=0,I=0;I<v;++I)w+=b[k+I];y[x]=w}if(s){var C=g;g=vP({inputs:{x:g},backend:r,attrs:{shape:cT(g.shape,c)}}),r.disposeIntermediateTensorInfo(C)}return r.disposeIntermediateTensorInfo(t),null!=l&&r.disposeIntermediateTensorInfo(f),g}var aU={kernelName:"Sum",backendName:"cpu",kernelFunc:rU},oU={kernelName:"Mean",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=yC(o,a.shape),u=dC(uT(a.shape,s)[1]),c=[],l=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(l);var d=LN({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(d);var f=IL({inputs:{a:d,b:l},backend:n});c.push(f);var p=rU({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:i}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),p}},iU={kernelName:"Min",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;TN(a,"min");var s=yC(o,a.shape),u=s,c=dT(u,a.shape.length),l=a;null!=c&&(l=A_({inputs:{x:a},backend:n,attrs:{perm:c}}),u=pT(u.length,a.shape.length)),lT("min",u,l.shape.length);for(var d=qy(uT(l.shape,u),2),f=d[0],p=dC(d[1]),h=OC(dC(f),l.dtype),m=n.data.get(l.dataId).values,g=0;g<h.length;++g){for(var v=g*p,y=m[v],b=0;b<p;++b){var x=m[v+b];x<y&&(y=x)}h[g]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(f,l.dtype,h);if(i){var w=vP({inputs:{x:k},backend:n,attrs:{shape:cT(f,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},sU={kernelName:"MirrorPad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode;TN(a,"mirrorPad");for(var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=o.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===i?0:1,d=n.data.get(a.dataId).values,f=a.shape.length,p=NC(a.shape),h=dC(s),m=s.length,g=NC(s),v=xC(a.dtype,h),y=0;y<h;y++){for(var b=BC(y,m,g),x=0;x<m;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);var k=DC(b=b.map((function(e,t){return e-u[t]})),f,p);v[y]=d[k]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},uU={kernelName:"Mod",backendName:"cpu",kernelFunc:VN("Mod",_N((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function cU(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.dim,i=a.shape.length,s=o;if(-1===s&&(s=i-1),s!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(i," and dim was ").concat(s));var u=yC([s],a.shape),c=YL({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=cT(c.shape,u),d=vP({inputs:{x:c},backend:n,attrs:{shape:l}}),f=z_({inputs:{a:a,b:d},backend:n}),p=e_({inputs:{x:f},backend:n}),h=rU({inputs:{x:p},backend:n,attrs:{axis:u,keepDims:!1}}),m=vP({inputs:{x:h},backend:n,attrs:{shape:l}}),g=IL({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}var lU={kernelName:"Softmax",backendName:"cpu",kernelFunc:cU},dU={kernelName:"Multinomial",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized;TN(a,"multinomial");for(var u=s?a:cU({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],d=n.data.get(u.dataId).values,f=[c,o],p=OC(dC(f),"int32"),h=0;h<c;++h){var m=h*l,g=new Float32Array(l-1);g[0]=d[m];for(var v=1;v<g.length;++v)g[v]=g[v-1]+d[m+v];for(var y=CT.alea(i.toString()),b=h*o,x=0;x<o;++x){var k=y();p[b+x]=g.length;for(var w=0;w<g.length;w++)if(k<g[w]){p[b+x]=w;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(f,"int32",p)}},fU=OT,pU={kernelName:"NonMaxSuppressionV3",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;TN(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,d=fU(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},hU=FT,mU={kernelName:"NonMaxSuppressionV4",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;TN(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,f=hU(l,d,i,s,u,c),p=f.selectedIndices,h=f.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},gU=MT,vU={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;TN(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,f=gU(l,d,i,s,u,c),p=f.selectedIndices,h=f.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},yU={kernelName:"OneHot",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue;TN(a,"oneHot");var u=dC(a.shape),c=new Float32Array(u*o);c.fill(s);for(var l=n.data.get(a.dataId).values,d=0;d<u;++d)l[d]>=0&&l[d]<o&&(c[d*o+l[d]]=i);return n.makeTensorInfo([].concat(Xy(a.shape),[o]),"int32",c)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function bU(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=BN({inputs:{input:r},backend:n}),o=bU({inputs:{x:a},backend:n}),i=KP({inputs:{input:r},backend:n}),s=bU({inputs:{x:i},backend:n}),u=RN({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return NL({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var xU={kernelName:"ZerosLike",backendName:"cpu",kernelFunc:bU},kU={kernelName:"OnesLike",backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var o=BN({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=KP({inputs:{input:a},backend:r}),u=bU({inputs:{x:s},backend:r}),c=RN({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return NL({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function wU(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return kL({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){cC(a,e.shape,"All tensors passed to stack must have matching shapes"),uC(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=XP({inputs:t.map((function(e){var t=kL({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var IU={kernelName:"Pack",backendName:"cpu",kernelFunc:wU},CU={kernelName:"PadV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;TN(a,"pad");var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=dC(a.shape),d=a.shape.length,f=NC(a.shape),p=dC(s),h=s.length,m=NC(s),g=xC(a.dtype,p);0!==i&&g.fill(i);for(var v=0;v<l;v++)g[DC(BC(v,d,f).map((function(e,t){return e+u[t]})),h,m)]=c[v];return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},EU={kernelName:"Pow",backendName:"cpu",kernelFunc:VN("Pow",_N((function(e,t){return Math.pow(e,t)})))},SU={kernelName:"Range",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.dtype,i=O_(r,a,n.step,o);return t.makeTensorInfo([i.length],o,i)}},TU={kernelName:"Reciprocal",backendName:"cpu",kernelFunc:XN("Reciprocal",(function(e){return 1/e}))},AU={kernelName:"ResizeBilinear",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size;TN(a,"resizeBilinear");for(var u=NC(a.shape),c=qy(s,2),l=c[0],d=c[1],f=qy(a.shape,4),p=f[0],h=f[1],m=f[2],g=f[3],v=n.data.get(a.dataId).values,y=new Float32Array(dC([p,l,d,g])),b=[o&&l>1?h-1:h,o&&d>1?m-1:m],x=[o&&l>1?l-1:l,o&&d>1?d-1:d],k=0,w=b[0]/x[0],I=b[1]/x[1],C=0;C<p;C++)for(var E=0;E<l;E++){var S;S=i?w*(E+.5)-.5:w*E;for(var T=Math.max(0,Math.floor(S)),A=S-T,N=Math.min(h-1,Math.ceil(S)),_=C*u[0]+T*u[1],R=C*u[0]+N*u[1],O=0;O<d;O++){var F;F=i?I*(O+.5)-.5:I*O;for(var M=Math.max(0,Math.floor(F)),D=F-M,B=Math.min(m-1,Math.ceil(F)),P=_+M*u[2],L=R+M*u[2],U=_+B*u[2],V=R+B*u[2],W=0;W<g;W++){var z=v[P+W],j=v[L+W],H=z+(v[U+W]-z)*D,G=H+(j+(v[V+W]-j)*D-H)*A;y[k++]=G}}}return n.makeTensorInfo([p,l,d,g],"float32",y)}},NU={kernelName:"ResizeBilinearGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners;TN([o,a],"resizeBilinearGrad");for(var s=NC(a.shape),u=qy(a.shape,4),c=u[0],l=u[1],d=u[2],f=u[3],p=qy(o.shape,3),h=p[1],m=p[2],g=new Float32Array(c*l*d*f),v=[i&&h>1?l-1:l,i&&m>1?d-1:d],y=[i&&h>1?h-1:h,i&&m>1?m-1:m],b=v[0]/y[0],x=v[1]/y[1],k=n.data.get(o.dataId).values,w=0,I=0;I<c;I++)for(var C=I*s[0],E=0;E<h;E++)for(var S=E*b,T=Math.floor(S),A=Math.min(Math.ceil(S),l-1),N=C+T*s[1],_=C+A*s[1],R=S-T,O=1-R,F=0;F<m;F++)for(var M=F*x,D=Math.floor(M),B=Math.min(Math.ceil(M),d-1),P=M-D,L=1-P,U=N+D*s[2],V=N+B*s[2],W=_+D*s[2],z=_+B*s[2],j=O*L,H=O*P,G=R*L,K=R*P,q=0;q<f;q++){var X=k[w++];g[U+q]+=X*j,g[V+q]+=X*H,g[W+q]+=X*G,g[z+q]+=X*K}return n.makeTensorInfo([c,d,l,f],"float32",g)}},_U={kernelName:"ResizeNearestNeighbor",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size;TN(a,"resizeNearestNeighbor");for(var u=NC(a.shape),c=qy(s,2),l=c[0],d=c[1],f=qy(a.shape,4),p=f[0],h=f[1],m=f[2],g=f[3],v=n.data.get(a.dataId).values,y=new Float32Array(p*l*d*g),b=[o&&l>1?h-1:h,o&&d>1?m-1:m],x=[o&&l>1?l-1:l,o&&d>1?d-1:d],k=b[0]/x[0],w=b[1]/x[1],I=0,C=0;C<p;C++)for(var E=C*u[0],S=0;S<l;S++){var T=i?k*(S+.5):k*S,A=Math.min(h-1,o?Math.round(T):Math.floor(T));i&&(A=Math.max(0,A));for(var N=E+A*u[1],_=0;_<d;_++){var R=i?w*(_+.5):w*_,O=Math.min(m-1,o?Math.round(R):Math.floor(R));i&&(O=Math.max(0,O));for(var F=N+O*u[2],M=0;M<g;M++){var D=v[F+M];y[I++]=D}}}return n.makeTensorInfo([p,l,d,g],a.dtype,y)}},RU={kernelName:"ResizeNearestNeighborGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners;TN([o,a],"resizeNearestNeighborGrad");for(var s=NC(a.shape),u=NC(o.shape),c=qy(a.shape,4),l=c[0],d=c[1],f=c[2],p=c[3],h=qy(o.shape,3),m=h[1],g=h[2],v=new Float32Array(l*d*f*p),y=n.data.get(o.dataId).values,b=[i&&m>1?d-1:d,i&&g>1?f-1:f],x=[i&&m>1?m-1:m,i&&g>1?g-1:g],k=b[0]/x[0],w=b[1]/x[1],I=1/k,C=1/w,E=2*Math.ceil(I)+2,S=2*Math.ceil(C)+2,T=0;T<l;T++)for(var A=T*s[0],N=0;N<d;N++)for(var _=A+N*s[1],R=Math.floor(N*I),O=Math.floor(R-E/2),F=0;F<f;F++)for(var M=_+F*s[2],D=Math.floor(F*C),B=Math.floor(D-S/2),P=0;P<p;P++){for(var L=0,U=0;U<E;U++){var V=U+O;if(!(V<0||V>=m)){var W=A+V*u[1],z=V*k;if(N===Math.min(d-1,i?Math.round(z):Math.floor(z)))for(var j=0;j<S;j++){var H=j+B;if(!(H<0||H>=g)){var G=W+H*u[2],K=H*w;F===Math.min(f-1,i?Math.round(K):Math.floor(K))&&(L+=y[G+P])}}}}v[M+P]=L}return n.makeTensorInfo(a.shape,a.dtype,v)}},OU={kernelName:"Reverse",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims;TN(a,"reverse");var i=a.shape.length,s=yC(o,a.shape);if(0===i)return MN({inputs:{x:a},backend:n});for(var u=new lE(a.shape,a.dtype),c=n.bufferSync(a),l=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[c.get.apply(c,Xy(n))].concat(Xy(t)))},d=0;d<u.size;d++)l(d);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},FU={kernelName:"RotateWithOffset",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,i=n.fillValue,s=n.center,u=r,c=xC(a.dtype,dC(a.shape)),l=qy(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],m=qy(zT(s,f,p),2),g=m[0],v=m[1],y=Math.sin(o),b=Math.cos(o),x=u.data.get(a.dataId).values,k=0;k<d;k++)for(var w=k*p*f*h,I=0;I<f;I++)for(var C=I*(p*h),E=0;E<p;E++)for(var S=E*h,T=0;T<h;T++){var A=[d,I,E,T],N=A[2],_=A[1],R=(N-g)*b-(_-v)*y,O=(N-g)*y+(_-v)*b;R=Math.round(R+g),O=Math.round(O+v);var F=i;"number"!=typeof i&&(F=3===T?255:i[T]),R>=0&&R<p&&O>=0&&O<f&&(F=x[w+O*(p*h)+R*h+T]),c[w+C+S+T]=F}return{dataId:u.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},MU={kernelName:"Round",backendName:"cpu",kernelFunc:XN("Round",(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1}))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function DU(e,t,n,r,a,o,i,s,u,c){var l=[r/a,a],d=e.values,f=t.values;if(0===r)return dS(n,t.dtype);var p=dS(l,t.dtype);p.values.fill(u);for(var h=0;h<o;h++){for(var m=[],g=0,v=0;v<i;v++){var y=d[h*i+v];m.push(y),g+=y*s[v]}if(g<0||g>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var b=0;b<a;b++)c?p.values[g*a+b]+=f[h*a+b]:p.values[g*a+b]=0===t.rank?f[0]:f[h*a+b]}return p}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var BU={kernelName:"ScatterNd",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=gS(0,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,p=DU(n.bufferSync(a),n.bufferSync(o),i,f,l,c,u,d,0,!0);return n.makeTensorInfo(i,p.dtype,p.values)}},PU={kernelName:"Select",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e;TN([r,a,o],"select");for(var i=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=kE(a.dtype,o.dtype),d=OC(dC(a.shape),l),f=0,p=0===i||i>1||1===a.shape.length?1:dC(a.shape.slice(1)),h=0;h<s.length;h++)for(var m=0;m<p;m++)1===s[h]?d[f++]=u[h]:d[f++]=c[h];return n.makeTensorInfo(a.shape,l,d)}},LU={kernelName:"Selu",backendName:"cpu",kernelFunc:XN("Selu",(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)}))},UU={kernelName:"Sigmoid",backendName:"cpu",kernelFunc:XN("Sigmoid",(function(e){return 1/(1+Math.exp(-e))}))},VU={kernelName:"Sign",backendName:"cpu",kernelFunc:XN("Sign",(function(e){return e<0?-1:e>0?1:0}))},WU={kernelName:"Sin",backendName:"cpu",kernelFunc:XN("Sin",(function(e){return Math.sin(e)}))},zU={kernelName:"Sinh",backendName:"cpu",kernelFunc:XN("Sinh",(function(e){return Math.sinh(e)}))},jU=Math.log(1.1920928955078125e-7)+2,HU={kernelName:"Softplus",backendName:"cpu",kernelFunc:XN("Softplus",(function(e){var t=e>-jU,n=e<jU,r=Math.exp(e);return n?r:t?e:Math.log(1+r)}))},GU={kernelName:"SpaceToBatchND",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;TN([a],"spaceToBatchND");var s=dC(o),u=[[0,0]];u.push.apply(u,Xy(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=CU.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=jT(l.shape,o,s,!1),f=HT(d.length,o.length,!1),p=GT(l.shape,o,s,!1),h=vP({inputs:{x:l},backend:n,attrs:{shape:d}}),m=A_({inputs:{x:h},backend:n,attrs:{perm:f}}),g=vP({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}},KU={kernelName:"SparseToDense",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,u=gS(0,a,s),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,f=u.strides,p=u.outputSize,h=DU(n.bufferSync(a),n.bufferSync(o),s,p,d,l,c,f,n.data.get(i.dataId).values[0],!1);return n.makeTensorInfo(s,h.dtype,h.values)}},qU={kernelName:"SplitV",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=yC(r.axis,a.shape)[0],s=rA(a,o,i),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=Xy(c);t[i]=e;var r=B_({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[i]+=e,r}))}},XU={kernelName:"Sqrt",backendName:"cpu",kernelFunc:XN("Sqrt",(function(e){return Math.sqrt(e)}))},QU={kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;TN(r,"square");for(var o=a.data.get(r.dataId).values,i=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];i[s]=u*u}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},YU={kernelName:"Step",backendName:"cpu",kernelFunc:XN("Step",(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha}))},$U={kernelName:"StridedSlice",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,d=r.newAxisMask,f=r.shrinkAxisMask;TN(a,"stridedSlice");var p,h=OS(a.shape,o,i,s,u,c,l,d,f),m=h.nonStrided,g=h.$begin,v=h.$strides,y=h.size,b=h.newShape,x=h.outShape,k=vP({inputs:{x:a},backend:n,attrs:{shape:b}});if(m){var w=B_({inputs:{x:k},backend:n,attrs:{begin:g,size:y}});p=vP({inputs:{x:w},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(w)}else if(x.some((function(e){return 0===e})))p=n.makeTensorInfo(x,a.dtype,[]);else{var I=V_(x,n.bufferSync(k),v,g);p=n.makeTensorInfo(I.shape,I.dtype,I.values)}var C=vP({inputs:{x:p},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(p),C}},ZU={kernelName:"Tan",backendName:"cpu",kernelFunc:XN("Tan",(function(e){return Math.tan(e)}))},JU=XN("Tanh",(function(e){return Math.tanh(e)}));
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function eV(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return iC(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return iC(0,n,t-1)}(e,t);case"nearest":return function(e,t){return iC(0,e,t-1)}(e,t);case"constant":default:return function(e,t){return e}(e)}}function tV(e,t,n,r,a,o,i,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[i*r+s*a+u*o+c]:l}function nV(e,t,n,r,a,o,i,s,u,c,l){return tV(e,t,n,r,a,o,i,Math.round(s),Math.round(u),c,l)}function rV(e,t,n,r,a,o,i,s,u,c,l){var d=Math.floor(s),f=Math.floor(u),p=d+1,h=f+1;return(p-s)*((h-u)*tV(e,t,n,r,a,o,i,d,f,c,l)+(u-f)*tV(e,t,n,r,a,o,i,d,h,c,l))+(s-d)*((h-u)*tV(e,t,n,r,a,o,i,p,f,c,l)+(u-f)*tV(e,t,n,r,a,o,i,p,h,c,l))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
for(var aV,oV,iV,sV=[kP,NN,wP,IP,HN,CP,EP,SP,TP,AP,NP,_P,RP,OP,FP,PP,LP,UP,VP,xP,WP,zP,jP,UN,$N,HP,ON,GP,QP,ZP,JP,$P,tL,nL,eL,rL,aL,oL,iL,sL,uL,lL,dL,fL,pL,hL,gL,mL,CL,iP,vL,bL,xL,t_,wL,r_,AL,_L,RL,o_,OL,FL,ML,DL,BL,u_,PL,DN,LL,qP,UL,VL,WL,uP,l_,zL,jL,p_,HL,GL,KL,qL,XL,QL,g_,ZL,JL,eU,tU,nU,$L,oU,iU,y_,sU,uU,dU,w_,C_,pU,mU,vU,S_,yU,kU,IU,CU,EU,dP,R_,SU,PN,TU,pP,mP,yP,AU,NU,_U,RU,OU,FU,MU,M_,BU,PU,LU,UU,VU,WU,zU,P_,lU,HU,GU,KU,qU,XU,QU,U_,YU,$U,j_,aU,ZU,{kernelName:"Tanh",backendName:"cpu",kernelFunc:JU},{kernelName:"Tile",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;TN(a,"tile");var i=H_(n.bufferSync(a),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},{kernelName:"TopK",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k;r.sorted;TN(a,"topk");var i=qy(G_(n.data.get(a.dataId).values,a.shape,a.dtype,o),2),s=i[0],u=i[1];return[n.makeTensorInfo(s.shape,s.dtype,s.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}},N_,{kernelName:"Transform",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2021 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=t.transforms,i=n.interpolation,s=n.fillMode,u=n.fillValue,c=n.outputShape,l=qy(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],m=qy(null!=c?c:[f,p],2),g=m[0],v=m[1],y=[d,g,v,h],b=NC(a.shape),x=b[0],k=b[1],w=b[2],I=xC(a.dtype,dC(y));I.fill(u);for(var C=r.data.get(a.dataId).values,E=r.data.get(o.dataId).values,S=0;S<d;++S){for(var T=1===o.shape[0]?E:E.subarray(8*S,8*S+8),A=0;A<g;++A)for(var N=0;N<v;++N)for(var _=0;_<h;++_){var R=void 0,O=T[6]*N+T[7]*A+1;if(0!==O){var F=(T[0]*N+T[1]*A+T[2])/O,M=(T[3]*N+T[4]*A+T[5])/O,D=eV(F,p,s),B=eV(M,f,s);switch(i){case"nearest":R=nV(C,f,p,x,k,w,S,B,D,_,u);break;case"bilinear":R=rV(C,f,p,x,k,w,S,B,D,_,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got ".concat(i))}I[S*x+A*k+N*w+_]=R}}return r.makeTensorInfo(y,a.dtype,I)}return{dataId:r.write(I,y,a.dtype),shape:a.shape,dtype:a.dtype}}},{kernelName:"Unique",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;TN(o,"unique");var i=K_(r.data.get(o.dataId).values,a,o.shape,o.dtype),s=i.outputValues,u=i.outputShape,c=i.indices;return[r.makeTensorInfo(u,o.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}},{kernelName:"Unpack",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape.length,s=a.shape[o],u=new Array(i-1),c=0,l=0;l<i;l++)l!==o&&(u[c++]=a.shape[l]);var d=new Array(i).fill(0),f=a.shape.slice();f[o]=1;for(var p=new Array(s),h=0;h<p.length;h++){d[o]=h;var m=B_({inputs:{x:a},backend:n,attrs:{begin:d,size:f}});p[h]=vP({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return p}},{kernelName:"UnsortedSegmentSum",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments;TN(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-o.shape.length,l=o,d=0;d<c;++d){var f=kL({inputs:{input:l},backend:n,attrs:{dim:d+1}});l=f,u.push(f)}for(var p=0;p<i;++p){var h=$C(p,"int32"),m=n.makeTensorInfo([],"int32",h),g=yL({inputs:{a:m,b:l},backend:n}),v=LN({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),y=k_({inputs:{a:v,b:a},backend:n}),b=rU({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(m),u.push(g),u.push(v),u.push(y),u.push(b)}var x=wU({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},xU],uV=0,cV=sV;uV<cV.length;uV++){var lV=cV[uV];QC(lV)}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(aV||(aV={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu"}(oV||(oV={}));var dV={kernelName:"_FusedMatMul",backendName:"wasm",setupFunc:function(e){iV=e.wasm.cwrap("_FusedMatMul",null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,s=t.preluActivationWeights;if("float32"!==a.dtype||"float32"!==o.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var u=r.transposeA,c=r.transposeB,l=r.activation,d=r.leakyreluAlpha,f=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(o.dataId).id,h=0;if(null!=i){var m=n.dataIdMap.get(i.dataId);if(1!==m.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got rank ".concat(m.shape.length,"."));h=m.id}var g=null==s?0:n.dataIdMap.get(s.dataId).id,v=oV[l];if(null==v)throw new Error("".concat(l," activation not yet supported for FusedConv2D in the wasm backend."));var y=u?a.shape[2]:a.shape[1],b=c?o.shape[1]:o.shape[2],x=a.shape[0],k=n.makeOutput([x,y,b],a.dtype),w=n.dataIdMap.get(k.dataId).id,I=new Uint8Array(new Int32Array(a.shape).buffer),C=new Uint8Array(new Int32Array(o.shape).buffer);return iV(f,I,a.shape.length,p,C,o.shape.length,u,c,v,h,g,d||0,w),k}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function fV(e){var t;return{kernelName:e,backendName:"wasm",setupFunc:function(n){t=n.wasm.cwrap(e,null,["number","number"])},kernelFunc:function(e){var n=e.backend,r=e.inputs.x,a=n.dataIdMap.get(r.dataId).id,o=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(o.dataId).id;return 0===dC(o.shape)||t(a,i),o}}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var pV=fV("Abs");
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function hV(e,t,n){var r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(a){var o=a.backend,i=a.inputs,s=i.a,u=i.b,c=o.dataIdMap.get(s.dataId).id,l=o.dataIdMap.get(u.dataId).id,d=null!=n?n:s.dtype,f=nT(s.shape,u.shape),p=o.makeOutput(f,d);if(0===dC(f))return p;var h=new Uint8Array(new Int32Array(s.shape).buffer),m=new Uint8Array(new Int32Array(u.shape).buffer),g=o.dataIdMap.get(p.dataId).id,v=function(){return r(c,h,s.shape.length,l,m,u.shape.length,aV[s.dtype],g)};if(t&&"float32"===s.dtype)return v(),p;var y=eT(s.shape,f),b=eT(u.shape,f),x=y.every((function(e,t){return e===t})),k=b.every((function(e,t){return e===t}));if(x&&k)return v(),p;throw new Error("Broadcasting along outer dims is not yet supported for ".concat(s.dtype," ").concat(e,"."))}}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var mV,gV=hV("Add",!0),vV={kernelName:"AddN",backendName:"wasm",setupFunc:function(e){mV=e.wasm.cwrap("AddN",null,["array","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===dC(r.shape))return r;var a=t.map((function(e){return n.dataIdMap.get(e.dataId).id})),o=new Uint8Array(new Int32Array(a).buffer),i=n.dataIdMap.get(r.dataId).id;return mV(o,a.length,aV[r.dtype],i),r}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function yV(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var bV,xV={kernelName:"Identity",backendName:"wasm",kernelFunc:yV};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function kV(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=qy(function(e,t){for(var n=[],r=[],a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(var o=0;o<r.length;++o){for(var i=-1,s=0;s<r.length;++s)r[s]>=o&&(-1===i||r[i]>r[s])&&(i=s);r[i]=o}return[n,r]}(t.x.shape,r.perm),2),o=a[0],i=a[1],s=!0,u=0;u<i.length;u++)i[u]!==u&&(s=!1);var c=function(e,t){for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),l={dataId:t.x.dataId,shape:o,dtype:t.x.dtype};if(s){var d=yV({inputs:t,backend:n});return d.shape=c,d}var f=n.makeOutput(c,l.dtype),p=n.dataIdMap.get(l.dataId).id,h=n.dataIdMap.get(f.dataId).id,m=new Uint8Array(new Int32Array(i).buffer),g=new Uint8Array(new Int32Array(l.shape).buffer);return bV(p,g,l.shape.length,aV[l.dtype],h,m,i.length),f}var wV,IV={kernelName:"Transpose",backendName:"wasm",kernelFunc:kV,setupFunc:function(e){bV=e.wasm.cwrap("Transpose",null,["number","array","number","number","number","array","number"])}};
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function CV(e,t,n){var r=e.shape,a=e.shape.length,o=yC(t,r),i=o,s=dT(i,a),u=null,c=!1;if(null!=s){for(var l=new Array(a),d=0;d<l.length;d++)l[d]=r[s[d]];i=pT(i.length,a),u=kV({inputs:{x:e},attrs:{perm:s},backend:n});var f=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(u.dataId).id!==f&&(c=!0)}return{transposed:u,originalAxes:o,axes:i,inputWasTransposed:c}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var EV,SV={kernelName:"ArgMax",backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.axis,a=n.x,o=t.dataIdMap.get(a.dataId).id,i=o,s=a,u=CV(a,r,t),c=u.transposed,l=u.axes,d=u.inputWasTransposed;if(d){var f=t.dataIdMap.get(c.dataId).id;f!==o&&(s=c,i=f)}var p=s.shape.slice(0,-1),h=t.makeOutput(p,"int32"),m=t.dataIdMap.get(h.dataId).id,g=dC(h.shape),v=s.shape[l[0]];return wV(i,aV[s.dtype],g,v,m),d&&t.disposeData(c.dataId),h},setupFunc:function(e){wV=e.wasm.cwrap("ArgMax",null,["number","number","number","number","number"])}},TV={kernelName:"AvgPool",backendName:"wasm",setupFunc:function(e){EV=e.wasm.cwrap("AvgPool",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=r.dataIdMap.get(a.dataId).id,i=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=WS(a.shape,i,s,1,u,c),d=l.filterHeight,f=l.filterWidth,p=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,g=l.padInfo.left,v=l.strideHeight,y=l.strideWidth,b=l.inChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(l.dataFormat,"'. Please use 'channelsLast'."));if(1!==l.dilationWidth||1!==l.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], got [".concat(l.dilationHeight,", ").concat(l.dilationWidth,"]."));var x=r.makeOutput(l.outShape,"float32"),k=r.dataIdMap.get(x.dataId).id;return EV(o,a.shape[0],a.shape[1],a.shape[2],d,f,p,h,m,g,v,y,b,k),x}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function AV(e){var t=e.inputs,n=e.attrs,r=t.x,a=n.shape,o=dC(r.shape),i=vC(a,o);return uC(o===dC(i),(function(){return"new shape: ".concat(i,", old shape: ").concat(r.shape,". New shape and old shape must have the same number of elements.")})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:i,dtype:r.dtype}}var NV,_V={kernelName:"Reshape",backendName:"wasm",kernelFunc:AV},RV={kernelName:"BatchMatMul",backendName:"wasm",setupFunc:function(e){NV=e.wasm.cwrap("BatchMatMul",null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=r.transposeA,s=r.transposeB;if("float32"!==a.dtype||"float32"!==o.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");var u=a.shape.length,c=o.shape.length,l=i?a.shape[u-2]:a.shape[u-1],d=s?o.shape[c-1]:o.shape[c-2],f=i?a.shape[u-1]:a.shape[u-2],p=s?o.shape[c-2]:o.shape[c-1],h=a.shape.slice(0,-2),m=o.shape.slice(0,-2),g=dC(h),v=dC(m);uC(u>=2&&c>=2&&(g===v||1===g||1===v),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (".concat(h,") and (").concat(m,").")}));var y=(g>v?a.shape.slice(0,-2):o.shape.slice(0,-2)).concat([f,p]);uC(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (").concat(d,") of Tensors with shapes ").concat(a.shape," and ").concat(o.shape," and transposeA=").concat(i," and transposeB=").concat(s," must match.")}));var b=s?[v,p,d]:[v,d,p],x=AV({inputs:{x:a},backend:n,attrs:{shape:i?[g,l,f]:[g,f,l]}}),k=AV({inputs:{x:o},backend:n,attrs:{shape:b}}),w=n.dataIdMap.get(x.dataId).id,I=n.dataIdMap.get(k.dataId).id,C=i?x.shape[2]:x.shape[1],E=s?k.shape[1]:k.shape[2],S=Math.max(g,v),T=n.makeOutput([S,C,E],x.dtype),A=n.dataIdMap.get(T.dataId).id,N=new Uint8Array(new Int32Array(x.shape).buffer),_=new Uint8Array(new Int32Array(k.shape).buffer);return NV(w,N,x.shape.length,I,_,k.shape.length,i,s,A),n.disposeData(x.dataId),n.disposeData(k.dataId),T.shape=y,T}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function OV(e){var t=e.inputs.x,n=e.attrs.dtype,r=e.backend,a=r.makeOutput(t.shape,n),o=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(o),a}var FV,MV={kernelName:"Cast",backendName:"wasm",kernelFunc:OV},DV=fV("Ceil"),BV={kernelName:"ClipByValue",backendName:"wasm",setupFunc:function(e){FV=e.wasm.cwrap("ClipByValue",null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.clipValueMin,i=r.clipValueMax,s=n.dataIdMap.get(a.dataId).id,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(u.dataId).id;return FV(s,o,i,c),u}};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function PV(e){var t=e.inputs,n=e.backend,r=yC(e.attrs.axis,t[0].shape)[0],a=VT(t.map((function(e){return e.shape})),r),o=t.filter((function(e){return dC(e.shape)>0}));if(1===o.length)return yV({inputs:{x:o[0]},backend:n});var i=n.makeOutput(a,t[0].dtype);if(0===dC(a))return i;if(UT(o.map((function(e){return e.shape})),r),"string"===o[0].dtype){var s=o.map((function(e){var t=dC(e.shape.slice(r));return AV({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),u=s.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}}));a=VT(s.map((function(e){return e.shape})),1);var c=1===s[0].shape[0],l=ZN(u,a,t[0].dtype,c),d=VT(o.map((function(e){return e.shape})),r);return i.shape=d,n.dataIdMap.get(i.dataId).stringBytes=cA(l),s.forEach((function(e){return n.disposeData(e.dataId)})),i}for(var f=dC(o[0].shape.slice(0,r)),p=0,h=o.map((function(e){var t=dC(e.shape.slice(r));return p+=t,t})),m=o.map((function(e){return n.typedArrayFromHeap(e)})),g=n.typedArrayFromHeap(i),v=0;v<f;v++)for(var y=v*p,b=0;b<m.length;b++){var x=h[b],k=v*x,w=m[b].subarray(k,k+x);g.set(w,y),y+=x}return i}var LV,UV,VV,WV,zV={kernelName:"Concat",backendName:"wasm",kernelFunc:PV},jV={kernelName:"Conv2D",backendName:"wasm",setupFunc:function(e){LV=e.wasm.cwrap("Conv2D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(o.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,f=ZS(n.dataFormat),p=jS(a.shape,o.shape,u,c,l,d,!1,f),h=p.filterHeight,m=p.filterWidth,g=p.padInfo.top,v=p.padInfo.right,y=p.padInfo.bottom,b=p.padInfo.left,x=p.dilationHeight,k=p.dilationWidth,w=p.strideHeight,I=p.strideWidth,C=p.inChannels,E=p.outChannels,S="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'".concat(p.dataFormat,"'. Please use 'channelsLast'."));var T=r.makeOutput(p.outShape,"float32"),A=r.dataIdMap.get(T.dataId).id;return LV(i,a.shape[0],a.shape[1],a.shape[2],s,h,m,g,v,y,b,S,x,k,w,I,C,E,A),T}},HV={kernelName:"Conv2DBackpropInput",backendName:"wasm",setupFunc:function(e){UV=e.wasm.cwrap("Conv2DBackpropInput",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.dy,o=n.filter,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.inputShape,d=ZS(u),f=jS(l,o.shape,i,1,s,c,!1,d),p=f.batchSize,h=f.filterHeight,m=f.filterWidth,g=f.inChannels,v=f.inHeight,y=f.inWidth,b=f.outChannels,x=f.outHeight,k=f.outWidth,w=f.strideHeight,I=f.strideWidth,C=h-1-f.padInfo.top,E=m-1-f.padInfo.left,S="channelsLast"===f.dataFormat,T=NC(f.inShape),A=NC(a.shape),N=qy(NC(o.shape),3),_=N[0],R=N[1],O=N[2],F=T[0],M=S?T[1]:T[2],D=S?T[2]:1,B=S?1:T[1],P=A[0],L=S?A[1]:A[2],U=S?A[2]:1,V=S?1:A[1],W=t.makeOutput(f.inShape,"float32"),z=t.dataIdMap.get(W.dataId).id,j=t.dataIdMap.get(a.dataId).id,H=t.dataIdMap.get(o.dataId).id;return UV(j,H,p,h,m,v,y,g,x,k,b,w,I,C,E,_,R,O,F,M,D,B,P,L,U,V,z),W}},GV=fV("Cos");
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(VV||(VV={}));var KV,qV,XV,QV={kernelName:"CropAndResize",backendName:"wasm",setupFunc:function(e){WV=e.wasm.cwrap("CropAndResize",null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,o=a.method,i=a.extrapolationValue,s=a.cropSize,u=r.image,c=r.boxes,l=r.boxInd,d=c.shape[0],f=qy(s,2),p=f[0],h=f[1],m=[d,p,h,u.shape[3]],g=n.dataIdMap.get(u.dataId);"float32"!==u.dtype&&(t=OV({backend:n,inputs:{x:u},attrs:{dtype:"float32"}}),g=n.dataIdMap.get(t.dataId));var v=g.id,y=n.dataIdMap.get(c.dataId).id,b=n.dataIdMap.get(l.dataId).id,x=n.makeOutput(m,"float32"),k=n.dataIdMap.get(x.dataId).id,w=new Uint8Array(new Int32Array(u.shape).buffer);return WV(v,y,b,d,w,p,h,VV[o],i,k),null!=t&&n.disposeData(t.dataId),x}},YV={kernelName:"Cumsum",backendName:"wasm",setupFunc:function(e){KV=e.wasm.cwrap("Cumsum",null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse,u=a.shape.length;uC("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumsum does not support ".concat(a.dtype," tensors in the WASM backend")}));var c=dT([o],u),l=a;null!==c&&(l=kV({inputs:{x:a},attrs:{perm:c},backend:n}));var d=pT(1,u)[0];lT("cumsum",[d],u);var f=n.makeOutput(l.shape,l.dtype),p=l.shape[d],h=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(f.dataId).id;KV(h,i?1:0,s?1:0,p,m,aV[a.dtype]);var g=f;return null!==c&&(g=kV({inputs:{x:f},attrs:{perm:fT(c)},backend:n}),n.disposeData(l.dataId),n.disposeData(f.dataId)),g}},$V={kernelName:"DepthToSpace",backendName:"wasm",setupFunc:function(e){qV=e.wasm.cwrap("DepthToSpace",null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,o=r.blockSize,i=r.dataFormat;uC(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));var s=a.shape[0],u="NHWC"===i?a.shape[1]:a.shape[2],c="NHWC"===i?a.shape[2]:a.shape[3],l="NHWC"===i?a.shape[3]:a.shape[1],d=u*o,f=c*o,p=l/(o*o),h="NHWC"===i?[s,d,f,p]:[s,p,d,f],m=t.makeOutput(h,"float32"),g=t.dataIdMap.get(a.dataId).id,v=new Uint8Array(new Int32Array(NC(a.shape)).buffer),y=new Uint8Array(new Int32Array(h).buffer),b=new Uint8Array(new Int32Array(NC(h)).buffer),x=t.dataIdMap.get(m.dataId).id;return qV(g,o,"NHWC"===i?1:0,v,a.shape.length-1,y,b,h.length,x),m}},ZV={kernelName:"DepthwiseConv2dNative",backendName:"wasm",setupFunc:function(e){XV=e.wasm.cwrap("DepthwiseConv2dNative",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(o.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,f=null==c?[1,1]:c,p=jS(a.shape,o.shape,u,f,l,d,!0),h=p.filterHeight,m=p.filterWidth,g=p.padInfo.top,v=p.padInfo.right,y=p.padInfo.bottom,b=p.padInfo.left,x=p.dilationHeight,k=p.dilationWidth,w=p.strideHeight,I=p.strideWidth,C=p.inChannels,E=p.outChannels,S="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'".concat(p.dataFormat,"'. Please use 'channelsLast'."));var T=r.makeOutput(p.outShape,"float32"),A=r.dataIdMap.get(T.dataId).id;return XV(i,a.shape[0],a.shape[1],a.shape[2],s,h,m,g,v,y,b,S,x,k,w,I,C,E,A),T}},JV=hV("Equal",!1,"bool"),eW=fV("Exp");
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function tW(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.input,o=n.dim,i=a.shape.length,s=a.shape.slice(),u=o;return o<0&&(uC(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+o+1),s.splice(u,0,1),AV({inputs:{x:a},backend:r,attrs:{shape:s}})}var nW,rW,aW,oW,iW,sW,uW,cW,lW,dW,fW,pW,hW={kernelName:"ExpandDims",backendName:"wasm",kernelFunc:tW},mW={kernelName:"Fill",backendName:"wasm",kernelFunc:function(e){var t=e.attrs,n=t.shape,r=t.value,a=t.dtype,o=e.backend,i=o.makeOutput(n,a);return o.typedArrayFromHeap(i).fill(r),i}},gW={kernelName:"FlipLeftRight",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n.makeOutput(r.shape,r.dtype),o=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(a.dataId).id,s=qy(r.shape,4),u=s[0],c=s[1],l=s[2],d=s[3];return nW(o,u,c,l,d,i),a},setupFunc:function(e){nW=e.wasm.cwrap("FlipLeftRight",null,["number","number","number","number","number","number"])}},vW=fV("Floor"),yW=hV("FloorDiv",!1),bW={kernelName:"FusedBatchNorm",backendName:"wasm",setupFunc:function(e){rW=e.wasm.cwrap("FusedBatchNorm",null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.varianceEpsilon,a=n.x,o=n.mean,i=n.variance,s=n.offset,u=n.scale,c=t.dataIdMap.get(a.dataId).id,l=t.dataIdMap.get(o.dataId).id,d=t.dataIdMap.get(i.dataId).id,f=null!=s?t.dataIdMap.get(s.dataId).id:0,p=null!=u?t.dataIdMap.get(u.dataId).id:0,h=t.makeOutput(a.shape,a.dtype);if(0===dC(a.shape))return h;var m=t.dataIdMap.get(h.dataId).id;return rW(c,l,d,f,p,r,m),h}},xW={kernelName:"FusedConv2D",backendName:"wasm",setupFunc:function(e){aW=e.wasm.cwrap("FusedConv2D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,f=n.dimRoundingMode,p=n.activation,h=n.leakyreluAlpha,m=jS(a.shape,o.shape,u,l,c,f),g=oV[p];if(null==g)throw new Error("".concat(p," activation not yet supported for FusedConv2D in the wasm backend."));var v=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(o.dataId).id,b=m.outChannels,x=0;if(null!=i){var k=r.dataIdMap.get(i.dataId);if(1!==k.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got rank ".concat(k.shape.length,"."));if(k.shape[0]!==b)throw new Error("FusedConv2D bias shape (".concat(k.shape,") does not match the number of output channels (").concat(b,")"));x=k.id}var w=m.filterHeight,I=m.filterWidth,C=m.padInfo.top,E=m.padInfo.right,S=m.padInfo.bottom,T=m.padInfo.left,A=m.dilationHeight,N=m.dilationWidth,_=m.strideHeight,R=m.strideWidth,O=m.inChannels,F="SAME"===m.padInfo.type?1:0,M=m.batchSize,D=m.inHeight,B=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));var P=r.makeOutput(m.outShape,"float32"),L=r.dataIdMap.get(P.dataId).id,U=null==s?0:r.dataIdMap.get(s.dataId).id;return aW(v,M,D,B,y,w,I,x,C,E,S,T,F,A,N,_,R,O,b,g,U,h||0,L),P}},kW={kernelName:"FusedDepthwiseConv2D",backendName:"wasm",setupFunc:function(e){oW=e.wasm.cwrap("FusedDepthwiseConv2D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,f=n.dimRoundingMode,p=n.activation,h=n.leakyreluAlpha,m=jS(a.shape,o.shape,u,l,c,f,!0),g=oV[p];if(null==g)throw new Error("".concat(p," activation not yet supported for FusedDepthwiseConv2D in the wasm backend."));var v=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(o.dataId).id,b=m.outChannels,x=0;if(null!=i){var k=r.dataIdMap.get(i.dataId);if(1!==k.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got rank ".concat(k.shape.length,"."));if(k.shape[0]!==b)throw new Error("FusedDepthwiseConv2D bias shape (".concat(k.shape,") does not match the number of output channels (").concat(b,")"));x=k.id}var w=m.filterHeight,I=m.filterWidth,C=m.padInfo.top,E=m.padInfo.right,S=m.padInfo.bottom,T=m.padInfo.left,A=m.dilationHeight,N=m.dilationWidth,_=m.strideHeight,R=m.strideWidth,O=m.inChannels,F="SAME"===m.padInfo.type?1:0,M=m.batchSize,D=m.inHeight,B=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));var P=r.makeOutput(m.outShape,"float32"),L=r.dataIdMap.get(P.dataId).id,U=null==s?0:r.dataIdMap.get(s.dataId).id;return oW(v,M,D,B,y,w,I,x,C,E,S,T,F,A,N,_,R,O,b,g,U,h||0,L),P}},wW={kernelName:"GatherNd",backendName:"wasm",setupFunc:function(e){iW=e.wasm.cwrap("GatherNd",null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.params,a=n.indices,o=qy(hS(r,a),4),i=o[0],s=o[1],u=o[2],c=o[3],l=t.makeOutput(i,r.dtype);if(0===s)return l;var d=a.shape,f=d[d.length-1],p=t.dataIdMap.get(r.dataId).id,h=t.dataIdMap.get(a.dataId).id,m=new Uint8Array(new Int32Array(c).buffer),g=t.dataIdMap.get(l.dataId).id;return iW(p,aV[r.dtype],h,s,f,u,m,g),l}},IW={kernelName:"GatherV2",backendName:"wasm",setupFunc:function(e){sW=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,o=n.indices,i=r.axis,s=r.batchDims,u=iA(a,o,yC(i,a.shape)[0],s),c=AV({inputs:{x:a},attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]},backend:t}),l=dC(o.shape),d=AV({inputs:{x:o},attrs:{shape:[u.batchSize,l/u.batchSize]},backend:t}),f=[u.batchSize,u.outerSize,l/u.batchSize,u.sliceSize],p=t.makeOutput(f,a.dtype);if(0===dC(a.shape))return p;var h=c.shape.length-1,m=t.dataIdMap.get(c.dataId).id,g=t.dataIdMap.get(d.dataId).id,v=t.dataIdMap.get(p.dataId).id,y=new Uint8Array(new Int32Array(NC(c.shape)).buffer),b=new Uint8Array(new Int32Array(NC(f)).buffer);return sW(m,aV[a.dtype],y,h,g,u.batchSize,b,v),t.disposeData(c.dataId),t.disposeData(d.dataId),p.shape=u.outputShape,p}},CW=hV("Greater",!1,"bool"),EW=hV("GreaterEqual",!1,"bool"),SW={kernelName:"LeakyRelu",backendName:"wasm",setupFunc:function(e){uW=e.wasm.cwrap("LeakyRelu",null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs.x,n=e.attrs.alpha,r=e.backend,a=r.dataIdMap.get(t.dataId).id,o=r.makeOutput(t.shape,t.dtype);if(0!==dC(t.shape)){var i=r.dataIdMap.get(o.dataId).id;uW(a,n,i)}return o}},TW=hV("Less",!1,"bool"),AW=hV("LessEqual",!1,"bool"),NW=fV("Log"),_W=hV("LogicalAnd",!1,"bool"),RW={kernelName:"Max",backendName:"wasm",setupFunc:function(e){cW=e.wasm.cwrap("Max",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.reductionIndices,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=i,c=CV(i,a,t),l=c.transposed,d=c.axes,f=c.originalAxes,p=c.inputWasTransposed;p&&(u=l,s=t.dataIdMap.get(l.dataId).id),lT("max",d,u.shape.length);var h=qy(uT(u.shape,d),2),m=h[0],g=dC(h[1]),v=t.makeOutput(m,i.dtype);if(0!==dC(u.shape)){var y=t.dataIdMap.get(v.dataId).id;cW(s,g,y)}if(p&&t.disposeData(l.dataId),o){var b=cT(v.shape,f);v.shape=b}return v}},OW=hV("Maximum",!1),FW={kernelName:"MaxPool",backendName:"wasm",setupFunc:function(e){lW=e.wasm.cwrap("MaxPool",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=r.dataIdMap.get(a.dataId).id,i=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=WS(a.shape,i,s,1,u,c),d=l.filterHeight,f=l.filterWidth,p=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,g=l.padInfo.left,v=l.dilationHeight,y=l.dilationWidth,b=l.strideHeight,x=l.strideWidth,k=l.inChannels,w=l.outChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(l.dataFormat,"'. Please use 'channelsLast'."));var I=r.makeOutput(l.outShape,"float32"),C=r.dataIdMap.get(I.dataId).id;return lW(o,a.shape[0],a.shape[1],a.shape[2],d,f,p,h,m,g,v,y,b,x,k,w,C),I}},MW={kernelName:"Mean",backendName:"wasm",setupFunc:function(e){dW=e.wasm.cwrap("Mean",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=CV(i,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed,m=f;if(h){var g=t.dataIdMap.get(d.dataId).id;g!==s&&(c=d,u=g,m=pT(m.length,c.shape.length))}lT("mean",m,c.shape.length);var v=qy(uT(c.shape,m),2),y=v[0],b=dC(v[1]),x=c;"float32"!==c.dtype&&(x=OV({backend:t,inputs:{x:c},attrs:{dtype:"float32"}}),u=t.dataIdMap.get(x.dataId).id);var k=t.makeOutput(y,"float32");if(0!==dC(c.shape)){var w=t.dataIdMap.get(k.dataId).id;dW(u,b,w)}if(h&&t.disposeData(d.dataId),o){var I=cT(k.shape,p);k.shape=I}return"float32"!==c.dtype&&t.disposeData(x.dataId),k}},DW={kernelName:"Min",backendName:"wasm",setupFunc:function(e){fW=e.wasm.cwrap("Min",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=CV(i,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed;if(h){var m=t.dataIdMap.get(d.dataId).id;m!==s&&(c=d,u=m)}lT("min",f,c.shape.length);var g=qy(uT(c.shape,f),2),v=g[0],y=dC(g[1]),b=t.makeOutput(v,c.dtype);if(0!==dC(c.shape)){var x=t.dataIdMap.get(b.dataId).id;fW(u,y,x)}if(h&&t.disposeData(d.dataId),o){var k=cT(b.shape,p);b.shape=k}return b}},BW=hV("Minimum",!1),PW=hV("Multiply",!0),LW=fV("Neg");
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function UW(e,t){var n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],o=n[2],i=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:o,pValidOutputs:i}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var VW,WW,zW,jW,HW,GW,KW,qW,XW,QW,YW,$W,ZW,JW,ez,tz,nz,rz,az={kernelName:"NonMaxSuppressionV3",backendName:"wasm",setupFunc:function(e){pW=e.wasm.cwrap("NonMaxSuppressionV3","number",["number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,o=r.maxOutputSize,i=r.scoreThreshold,s=n.boxes,u=n.scores,c=t.dataIdMap.get(s.dataId).id,l=t.dataIdMap.get(u.dataId).id,d=UW(t,pW(c,l,o,a,i)),f=d.pSelectedIndices,p=d.selectedSize,h=d.pSelectedScores,m=d.pValidOutputs;return t.wasm._free(h),t.wasm._free(m),t.makeOutput([p],"int32",f)}},oz={kernelName:"NonMaxSuppressionV4",backendName:"wasm",setupFunc:function(e){VW=e.wasm.cwrap("NonMaxSuppressionV4","number",["number","number","number","number","number","bool"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,o=r.maxOutputSize,i=r.scoreThreshold,s=r.padToMaxOutputSize,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,f=UW(t,VW(l,d,o,a,i,s)),p=f.pSelectedIndices,h=f.selectedSize,m=f.pSelectedScores,g=f.pValidOutputs;return t.wasm._free(m),[t.makeOutput([h],"int32",p),t.makeOutput([],"int32",g)]}},iz={kernelName:"NonMaxSuppressionV5",backendName:"wasm",setupFunc:function(e){WW=e.wasm.cwrap("NonMaxSuppressionV5","number",["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,o=r.maxOutputSize,i=r.scoreThreshold,s=r.softNmsSigma,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,f=UW(t,WW(l,d,o,a,i,s)),p=f.pSelectedIndices,h=f.selectedSize,m=f.pSelectedScores,g=f.pValidOutputs;return t.wasm._free(g),[t.makeOutput([h],"int32",p),t.makeOutput([h],"float32",m)]}},sz=hV("NotEqual",!1,"bool"),uz={kernelName:"OneHot",backendName:"wasm",setupFunc:function(e){zW=e.wasm.cwrap("OneHot",null,["number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue,u=n.makeOutput([].concat(Xy(a.shape),[o]),"int32"),c=n.dataIdMap.get(u.dataId).id,l=n.dataIdMap.get(a.dataId).id;return zW(l,o,i,s,c),u}},cz={kernelName:"OnesLike",backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}},lz={kernelName:"Pack",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return tW({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){cC(a,e.shape,"All tensors passed to stack must have matching shapes"),uC(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=PV({inputs:t.map((function(e){var t=tW({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeData(e.dataId)})),s}},dz={kernelName:"PadV2",backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,o=r.constantValue,i=a.map((function(e,n){return e[0]+t.shape[n]+e[1]})),s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(i,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),f=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(f).buffer);return jW(s,l,t.shape.length,aV[t.dtype],p,h,o,c),u},setupFunc:function(e){jW=e.wasm.cwrap("PadV2",null,["number","array","number","number","array","array","number","number"])}},fz=hV("Pow",!1),pz={kernelName:"Prelu",backendName:"wasm",setupFunc:function(e){HW=e.wasm.cwrap("Prelu",null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(a.dataId).id,s=n.makeOutput(r.shape,"float32"),u=n.dataIdMap.get(s.dataId).id;return HW(o,i,u),s}},hz={kernelName:"Prod",backendName:"wasm",setupFunc:function(e){GW=e.wasm.cwrap("Prod",null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=CV(i,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed,m=f;if(h){var g=t.dataIdMap.get(d.dataId).id;g!==s&&(c=d,u=g,m=pT(m.length,c.shape.length))}lT("prod",m,c.shape.length);var v=qy(uT(c.shape,m),2),y=v[0],b=dC(v[1]),x=t.makeOutput(y,c.dtype);if(0!==dC(c.shape)){var k=t.dataIdMap.get(x.dataId).id;GW(u,b,aV[x.dtype],k)}if(h&&t.disposeData(d.dataId),o){var w=cT(x.shape,p);x.shape=w}return x}},mz={kernelName:"Range",backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,s=O_(r,a,o,i),u=t.makeOutput([s.length],i);return t.typedArrayFromHeap(u).set(s),u}},gz=hV("RealDiv",!0),vz=fV("Relu"),yz=fV("Relu6"),bz={kernelName:"ResizeBilinear",backendName:"wasm",setupFunc:function(e){KW=e.wasm.cwrap("ResizeBilinear",null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,o=r.images,i=a.alignCorners,s=a.halfPixelCenters,u=qy(a.size,2),c=u[0],l=u[1],d=qy(o.shape,4),f=d[0],p=d[1],h=d[2],m=d[3],g=[f,c,l,m],v=n.dataIdMap.get(o.dataId);"float32"!==v.dtype&&(t=OV({backend:n,inputs:{x:o},attrs:{dtype:"float32"}}),v=n.dataIdMap.get(t.dataId));var y=v.id,b=n.makeOutput(g,"float32");if(0===dC(o.shape))return b;var x=n.dataIdMap.get(b.dataId).id;return KW(y,f,p,h,m,c,l,i?1:0,s?1:0,x),null!=t&&n.disposeData(t.dataId),b}},xz={kernelName:"Reverse",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=yC(r.dims,a.shape);if(0===a.shape.length)return yV({inputs:{x:a},backend:n});var i=n.makeOutput(a.shape,a.dtype),s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(i.dataId).id,c=new Uint8Array(new Int32Array(o).buffer),l=new Uint8Array(new Int32Array(a.shape).buffer);qW(s,c,o.length,l,a.shape.length,u);var d=AV({inputs:{x:i},attrs:{shape:a.shape},backend:n});return n.disposeData(i.dataId),d},setupFunc:function(e){qW=e.wasm.cwrap("Reverse",null,["number","array","number","array","number","number"])}},kz={kernelName:"RotateWithOffset",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=r.radians,i=r.fillValue,s=r.center,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(a.dataId).id,l=n.dataIdMap.get(u.dataId).id,d=qy(a.shape,4),f=d[0],p=d[1],h=d[2],m=d[3],g=qy(zT(s,p,h),2),v=g[0],y=g[1],b="number"==typeof i?[i,i,i,0===i?0:255]:[].concat(Xy(i),[255]),x=new Uint8Array(new Int32Array(b).buffer);return XW(c,f,p,h,m,o,v,y,x,b.length,l),u},setupFunc:function(e){XW=e.wasm.cwrap("RotateWithOffset",null,["number","number","number","number","number","number","number","number","array","number","number"])}},wz=fV("Round");
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Iz(e){var t=e.inputs.x,n=e.attrs,r=n.begin,a=n.size,o=e.backend,i=qy(RS(t,r,a),2),s=i[0],u=i[1],c=NS(t.shape,s,u),l=o.readSync(t.dataId),d=o.makeOutput(u,t.dtype),f=NC(t.shape),p=o.dataIdMap.get(d.dataId);if(c){var h=_S(s,f);return"string"===t.dtype?p.stringBytes=l.slice(h,h+dC(u)):o.typedArrayFromHeap(d).set(l.subarray(h,h+dC(u))),d}if("string"===t.dtype){var m=D_(l,s,u,t.shape,t.dtype);return p.stringBytes=m,d}var g=o.typedArrayFromHeap(d),v=t.shape.length;if(2===v)!function(e,t,n,r,a){for(var o=0,i=r[0],s=r[1],u=i+a[0],c=i;c<u;c++){var l=c*t+s;n.set(e.subarray(l,l+a[1]),o),o+=a[1]}}(l,f[0],g,s,u);else if(3===v)!function(e,t,n,r,a,o){for(var i=0,s=a[0],u=a[1],c=a[2],l=s+o[0],d=u+o[1],f=s;f<l;f++)for(var p=u;p<d;p++){var h=f*t+p*n+c;r.set(e.subarray(h,h+o[2]),i),i+=o[2]}}(l,f[0],f[1],g,s,u);else if(4===v)!function(e,t,n,r,a,o,i){for(var s=0,u=o[0],c=o[1],l=o[2],d=u+i[0],f=c+i[1],p=l+i[2],h=o[3],m=u;m<d;m++)for(var g=c;g<f;g++)for(var v=l;v<p;v++){var y=m*t+g*n+v*r+h;a.set(e.subarray(y,y+i[3]),s),s+=i[3]}}(l,f[0],f[1],f[2],g,s,u);else{var y=D_(l,s,u,t.shape,t.dtype);g.set(y)}return d}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
for(var Cz=[pV,gV,vV,SV,TV,RV,MV,DV,BV,zV,jV,HV,GV,QV,YV,$V,ZV,JV,eW,hW,mW,gW,vW,yW,dV,bW,xW,kW,wW,IW,CW,EW,xV,SW,TW,AW,NW,_W,RW,OW,FW,MW,DW,BW,PW,LW,az,oz,iz,sz,uz,cz,lz,dz,fz,pz,hz,mz,gz,vz,yz,_V,bz,xz,kz,fV("Rsqrt"),wz,{kernelName:"ScatterNd",backendName:"wasm",setupFunc:function(e){QW=e.wasm.cwrap("ScatterNd",null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.indices,o=n.updates,i=r.shape,s=t.makeOutput(i,o.dtype);if(0===dC(i))return s;var u=gS(0,a,i),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,f=u.strides,p=u.outputSize,h=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(o.dataId).id,g=new Uint8Array(new Int32Array(f).buffer),v=t.dataIdMap.get(s.dataId).id;return QW(h,m,aV[o.dtype],c,l,d,g,p,v),s}},{kernelName:"Select",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(o.dataId).id,c=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(c.dataId).id,d=r.shape.length,f=a.shape.length,p=0===d||d>1||1===f?1:dC(a.shape.slice(1));return YW(i,s,u,p,l),c},setupFunc:function(e){YW=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},{kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){$W=e.wasm.cwrap("Sigmoid",null,["number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.x,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),o=t.dataIdMap.get(a.dataId).id;return 0===dC(a.shape)||$W(r,o),a}},fV("Sin"),{kernelName:"Slice",backendName:"wasm",kernelFunc:Iz},{kernelName:"Softmax",backendName:"wasm",setupFunc:function(e){ZW=e.wasm.cwrap("Softmax",null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.logits,r=e.attrs.dim,a=t.dataIdMap.get(n.dataId).id,o=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(o.dataId).id,s=n.shape[r],u=dC(n.shape)/s;return 0===dC(o.shape)||ZW(a,i,s,u),o}},{kernelName:"SplitV",backendName:"wasm",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.numOrSizeSplits,i=yC(n.axis,a.shape)[0],s=rA(a,o,i),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=Xy(c);t[i]=e;var n=Iz({inputs:{x:a},attrs:{begin:u,size:t},backend:r});return u[i]+=e,n}))}},fV("Sqrt"),fV("Square"),hV("SquaredDifference",!0),{kernelName:"Step",backendName:"wasm",setupFunc:function(e){JW=e.wasm.cwrap("Step",null,["number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.alpha,a=n.x,o=t.dataIdMap.get(a.dataId).id,i=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(i.dataId).id;return JW(o,r,s),i}},{kernelName:"StridedSlice",backendName:"wasm",setupFunc:function(e){ez=e.wasm.cwrap("StridedSlice",null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,o=r.begin,i=r.end,s=r.strides;null==s&&(s=new Array(o.length));var u=r.beginMask,c=r.endMask,l=r.ellipsisMask,d=r.newAxisMask,f=r.shrinkAxisMask,p=yS(l);if(p.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==l&&0!==d)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==l&&0!==f)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var h=a.shape.length-o.length,m=yS(d),g=a.shape.slice();m.forEach((function(e){o[e]=0,i[e]=1,g.splice(e,0,1)}));var v=AV({inputs:{x:a},attrs:{shape:g},backend:t}),y=IS(v.shape,p,h,o,i,s,u,c,l),b=y.begin,x=y.end,k=y.strides;o=b,i=x,s=k;var w=yS(f);w.forEach((function(e){i[e]=o[e]+1,s[e]=1}));var I=bS(o,i,s),C=I.filter((function(e,t){return-1===w.indexOf(t)}));if(s.every((function(e){return 1===e}))){var E=Iz({inputs:{x:v},attrs:{begin:o,size:I},backend:t});t.disposeData(v.dataId);var S=AV({inputs:{x:E},attrs:{shape:C},backend:t});return t.disposeData(E.dataId),S}var T=t.makeOutput(C,"float32");if(!C.some((function(e){return 0===e}))){var A=t.dataIdMap.get(v.dataId).id,N=new Uint8Array(new Int32Array(NC(v.shape)).buffer),_=new Uint8Array(new Int32Array(o).buffer),R=new Uint8Array(new Int32Array(i).buffer),O=new Uint8Array(new Int32Array(s).buffer),F=new Uint8Array(new Int32Array(C).buffer),M=new Uint8Array(new Int32Array(NC(C)).buffer),D=t.dataIdMap.get(T.dataId).id;ez(A,N,v.shape.length,_,R,O,F,M,C.length,D)}t.disposeData(v.dataId);var B=AV({inputs:{x:T},attrs:{shape:C},backend:t});return t.disposeData(T.dataId),B}},hV("Sub",!0),{kernelName:"Sum",backendName:"wasm",setupFunc:function(e){tz=e.wasm.cwrap("Sum",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=CV(i,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed,m=f;if(h){var g=t.dataIdMap.get(d.dataId).id;g!==s&&(c=d,u=g,m=pT(m.length,c.shape.length))}lT("sum",m,c.shape.length);var v=qy(uT(c.shape,m),2),y=v[0],b=dC(v[1]),x=t.makeOutput(y,c.dtype);if(0!==dC(c.shape)){var k=t.dataIdMap.get(x.dataId).id;tz(u,b,k)}if(h&&t.disposeData(d.dataId),o){var w=cT(x.shape,p);x.shape=w}return x}},fV("Tanh"),{kernelName:"Tile",backendName:"wasm",setupFunc:function(e){nz=e.wasm.cwrap("Tile",null,["number","array","number","array","number","number"])},kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=n.dataIdMap.get(a.dataId).id,i=r.reps,s=new Array(a.shape.length),u=0;u<s.length;u++)s[u]=a.shape[u]*i[u];var c=new Uint8Array(new Int32Array(a.shape).buffer),l=new Uint8Array(new Int32Array(s).buffer),d=n.makeOutput(s,a.dtype),f=n.dataIdMap.get(d.dataId).id;return nz(o,c,a.shape.length,l,s.length,aV[d.dtype],f),d}},{kernelName:"TopK",backendName:"wasm",setupFunc:function(e){rz=e.wasm.cwrap("TopK",null,["number","array","number","number","number","bool","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted,s=n.dataIdMap.get(a.dataId).id,u=new Uint8Array(new Int32Array(a.shape).buffer),c=a.shape.slice();c[c.length-1]=o;var l=n.makeOutput(c,a.dtype),d=n.dataIdMap.get(l.dataId).id,f=n.makeOutput(c,"int32"),p=n.dataIdMap.get(f.dataId).id;return rz(s,u,a.shape.length,aV[a.dtype],o,i,d,p),[l,f]}},IV,{kernelName:"Unpack",backendName:"wasm",kernelFunc:
/**
	   * @license
	   * Copyright 2019 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape[o],s=a.shape.length,u=new Array(s-1),c=0,l=0;l<s;l++)l!==o&&(u[c++]=a.shape[l]);var d=new Array(i),f=new Array(s).fill(0),p=a.shape.slice();p[o]=1;for(var h=0;h<d.length;h++)f[o]=h,d[h]=Iz({inputs:{x:a},attrs:{begin:f,size:p},backend:n});return d.map((function(e){return{dataId:e.dataId,dtype:e.dtype,shape:u}}))}},{kernelName:"ZerosLike",backendName:"wasm",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}}],Ez=0,Sz=Cz;Ez<Sz.length;Ez++){var Tz=Sz[Ez];QC(Tz)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Az=UC();function Nz(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}Az.registerFlag("WASM_HAS_SIMD_SUPPORT",Ny(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])));case 1:case"end":return e.stop()}}),e)})))),Az.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",Ny(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Az.get("IS_NODE")){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.abrupt("return",((new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))));case 6:return e.prev=6,e.t0=e.catch(2),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[2,6]])}))));var _z=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Rz=function(e){return _z.exec(e).slice(1)};function Oz(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,t="/"===r.charAt(0))}return(t?"/":"")+(e=Nz(Wz(e.split("/"),(function(e){return!!e})),!t).join("/"))||"."}function Fz(e){var t=Mz(e),n="/"===jz(e,-1);return(e=Nz(Wz(e.split("/"),(function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function Mz(e){return"/"===e.charAt(0)}function Dz(){var e=Array.prototype.slice.call(arguments,0);return Fz(Wz(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))}function Bz(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=Oz(e).substr(1),t=Oz(t).substr(1);for(var r=n(e.split("/")),a=n(t.split("/")),o=Math.min(r.length,a.length),i=o,s=0;s<o;s++)if(r[s]!==a[s]){i=s;break}var u=[];for(s=i;s<r.length;s++)u.push("..");return(u=u.concat(a.slice(i))).join("/")}function Pz(e){var t=Rz(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."}function Lz(e,t){var n=Rz(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}function Uz(e){return Rz(e)[3]}var Vz={extname:Uz,basename:Lz,dirname:Pz,sep:"/",delimiter:":",relative:Bz,join:Dz,isAbsolute:Mz,normalize:Fz,resolve:Oz};function Wz(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var zz,jz="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)},Hz=Object.freeze({__proto__:null,resolve:Oz,normalize:Fz,isAbsolute:Mz,join:Dz,relative:Bz,sep:"/",delimiter:":",dirname:Pz,basename:Lz,extname:Uz,default:Vz}),Gz=Object.freeze({__proto__:null,default:{}});function Kz(){if(void 0===zz){var e=new ArrayBuffer(2),t=new Uint8Array(e),n=new Uint16Array(e);if(t[0]=1,t[1]=2,258===n[0])zz="BE";else{if(513!==n[0])throw new Error("unable to figure out endianess");zz="LE"}}return zz}function qz(){return void 0!==global.location?global.location.hostname:""}function Xz(){return[]}function Qz(){return 0}function Yz(){return Number.MAX_VALUE}function $z(){return Number.MAX_VALUE}function Zz(){return[]}function Jz(){return"Browser"}function ej(){return void 0!==global.navigator?global.navigator.appVersion:""}function tj(){}function nj(){}function rj(){return"/tmp"}var aj=rj,oj={EOL:"\n",tmpdir:aj,tmpDir:rj,networkInterfaces:tj,getNetworkInterfaces:nj,release:ej,type:Jz,cpus:Zz,totalmem:$z,freemem:Yz,uptime:Qz,loadavg:Xz,hostname:qz,endianness:Kz},ij=Object.freeze({__proto__:null,endianness:Kz,hostname:qz,loadavg:Xz,uptime:Qz,freemem:Yz,totalmem:$z,cpus:Zz,type:Jz,release:ej,networkInterfaces:tj,getNetworkInterfaces:nj,arch:function(){return"javascript"},platform:function(){return"browser"},tmpDir:rj,tmpdir:aj,EOL:"\n",default:oj}),sj=tI(Hz),uj=tI(Gz),cj=tI(ij),lj=eI((function(e,t){var n,r=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(n=n||__filename),function(e){function t(){return N.buffer!=O&&q(N.buffer),F}function r(){return N.buffer!=O&&q(N.buffer),M}function a(){return N.buffer!=O&&q(N.buffer),D}function o(){return N.buffer!=O&&q(N.buffer),B}function i(){return N.buffer!=O&&q(N.buffer),P}var s,u,c=void 0!==(e=e||{})?e:{};c.ready=new Promise((function(e,t){s=e,u=t}));var l,d={};for(l in c)c.hasOwnProperty(l)&&(d[l]=c[l]);var f,p,h,m,g=function(e,t){throw t};f="object"==("undefined"==typeof window?"undefined":Ty(window)),p="function"==typeof importScripts,h="object"==("undefined"==typeof process?"undefined":Ty(process))&&"object"==Ty(process.versions)&&"string"==typeof process.versions.node,m=!f&&!h&&!p;var v=c.ENVIRONMENT_IS_PTHREAD||!1;v&&(O=c.buffer);var y,b,x,k,w,I="";function C(e){return c.locateFile?c.locateFile(e,I):I+e}if(h){var E;I=p?sj.dirname(I)+"/":__dirname+"/",y=function(e,t){return k||(k=wT),w||(w=sj),e=w.normalize(e),k.readFileSync(e,t?null:"utf8")},x=function(e){var t=y(e,!0);return t.buffer||(t=new Uint8Array(t)),U(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ct))throw e})),process.on("unhandledRejection",ae),g=function(e){process.exit(e)},c.inspect=function(){return"[Emscripten Module object]"};try{E=uj}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}Jw.Worker=E.Worker}else m?("undefined"!=typeof read&&(y=function(e){return read(e)}),x=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(U("object"==Ty(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"function"==typeof quit&&(g=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(f||p)&&(p?I=self.location.href:"undefined"!=typeof document&&document.currentScript&&(I=document.currentScript.src),void 0!==n&&n&&(I=n),I=0!==I.indexOf("blob:")?I.substr(0,I.lastIndexOf("/")+1):"",h?(y=function(e,t){return k||(k=wT),w||(w=sj),e=w.normalize(e),k.readFileSync(e,t?null:"utf8")},x=function(e){var t=y(e,!0);return t.buffer||(t=new Uint8Array(t)),U(t.buffer),t}):(y=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},p&&(x=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),b=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}));h&&"undefined"==typeof performance&&(Jw.performance=uj.performance);var S,T=c.print||console.log.bind(console),A=c.printErr||console.warn.bind(console);for(l in d)d.hasOwnProperty(l)&&(c[l]=d[l]);d=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&(g=c.quit),c.wasmBinary&&(S=c.wasmBinary);var N,_,R=c.noExitRuntime||!0;"object"!=("undefined"==typeof WebAssembly?"undefined":Ty(WebAssembly))&&ae("no native wasm support detected");var O,F,M,D,B,P,L=!1;function U(e,t){e||ae("Assertion failed: "+t)}function V(e){var t=c["_"+e];return U(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function W(e,t,n,r,a){var o={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);H(e,t=at(n),n)}return t},array:function(e){var t=at(e.length);return G(e,t),t}},i=V(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=o[n[c]];l?(0===u&&(u=nt()),s[c]=l(r[c])):s[c]=r[c]}var d=i.apply(null,s);return d=function(e){return"string"===t?j(e):"boolean"===t?Boolean(e):e}(d),0!==u&&rt(u),d}function z(e,t,n){for(var r=t+n,a="";!(t>=r);){var o=e[t++];if(!o)return a;if(128&o){var i=63&e[t++];if(192!=(224&o)){var s=63&e[t++];if((o=224==(240&o)?(15&o)<<12|i<<6|s:(7&o)<<18|i<<12|s<<6|63&e[t++])<65536)a+=String.fromCharCode(o);else{var u=o-65536;a+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else a+=String.fromCharCode((31&o)<<6|i)}else a+=String.fromCharCode(o)}return a}function j(e,t){return e?z(r(),e,t):""}function H(e,t,n){return function(e,t,n,r){if(!(r>0))return 0;for(var a=n,o=n+r-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-a}(e,r(),t,n)}function G(e,n){t().set(e,n)}function K(e,t){return e%t>0&&(e+=t-e%t),e}function q(e){O=e,c.HEAP8=F=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=D=new Int32Array(e),c.HEAPU8=M=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=B=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=P=new Float64Array(e)}var X,Q=c.INITIAL_MEMORY||16777216;if(v)N=c.wasmMemory,O=c.buffer;else if(c.wasmMemory)N=c.wasmMemory;else if(!((N=new WebAssembly.Memory({initial:Q/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw A("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),h&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");N&&(O=N.buffer),Q=O.byteLength,q(O);var Y=[],$=[],Z=[],J=[];function ee(e){Y.unshift(e)}function te(e){J.unshift(e)}v||$.push({func:function(){ze()}});var ne=0,re=null;function ae(e){c.onAbort&&c.onAbort(e),v&&console.error("Pthread aborting at "+(new Error).stack),A(e+=""),L=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw u(t),t}function oe(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}c.preloadedImages={},c.preloadedAudios={};function ie(e){return oe(e,"data:application/octet-stream;base64,")}function se(e){return oe(e,"file://")}var ue="tfjs-backend-wasm-threaded-simd.wasm";function ce(e){try{if(e==ue&&S)return new Uint8Array(S);if(x)return x(e);throw"both async and sync fetching of the wasm failed"}catch(e){ae(e)}}ie(ue)||(ue=C(ue));var le={8991:function(e,t){setTimeout((function(){$e(e,t)}),0)}};function de(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?X.get(n)():X.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(c)}}function fe(e,n){if(e<=0||e>t().length||!0&e||n<0)return-28;if(0==n)return 0;n>=2147483647&&(n=1/0);var r=Atomics.load(a(),ut>>2),o=0;if(r==e&&Atomics.compareExchange(a(),ut>>2,r,0)==r&&(o=1,--n<=0))return 1;var i=Atomics.notify(a(),e>>2,n);if(i>=0)return i+o;throw"Atomics.notify returned an unexpected value "+i}function pe(e){if(v)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in killThread!";a()[e+12>>2]=0;var t=ge.pthreads[e];t.worker.terminate(),ge.freeThreadData(t),ge.runningWorkers.splice(ge.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}function he(e){if(v)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";a()[e+12>>2]=0;var t=ge.pthreads[e];if(t){var n=t.worker;ge.returnWorkerToPool(n)}}c._emscripten_futex_wake=fe;var me,ge={unusedWorkers:[],runningWorkers:[],initMainThreadBlock:function(){for(var e=0;e<8;++e)ge.allocateUnusedWorker()},initRuntime:function(){for(var e=je(228),t=0;t<57;++t)o()[e/4+t]=0;a()[e+12>>2]=e;var n=e+152;a()[n>>2]=n;var r=je(512);for(t=0;t<128;++t)o()[r/4+t]=0;Atomics.store(o(),e+100>>2,r),Atomics.store(o(),e+40>>2,e),tt(e,!p,1),Ye(e)},initWorker:function(){},pthreads:{},threadExitHandlers:[],setThreadStatus:function(){},runExitHandlers:function(){for(;ge.threadExitHandlers.length>0;)ge.threadExitHandlers.pop()();v&&qe()&&Xe()},threadExit:function(e){var t=qe();t&&(Atomics.store(o(),t+4>>2,e),Atomics.store(o(),t+0>>2,1),Atomics.store(o(),t+56>>2,1),Atomics.store(o(),t+60>>2,0),ge.runExitHandlers(),fe(t+0,2147483647),tt(0,0,0),v&&postMessage({cmd:"exit"}))},threadCancel:function(){ge.runExitHandlers();var e=qe();Atomics.store(o(),e+4>>2,-1),Atomics.store(o(),e+0>>2,1),fe(e+0,2147483647),tt(0,0,0),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in ge.pthreads)(r=ge.pthreads[e])&&r.worker&&ge.returnWorkerToPool(r.worker);ge.pthreads={};for(var t=0;t<ge.unusedWorkers.length;++t)(n=ge.unusedWorkers[t]).terminate();for(ge.unusedWorkers=[],t=0;t<ge.runningWorkers.length;++t){var n,r=(n=ge.runningWorkers[t]).pthread;ge.freeThreadData(r),n.terminate()}ge.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var t=a()[e.threadInfoStruct+100>>2];a()[e.threadInfoStruct+100>>2]=0,He(t),He(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&He(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){ge.runWithoutMainThreadQueuedCalls((function(){delete ge.pthreads[e.pthread.threadInfoStruct],ge.unusedWorkers.push(e),ge.runningWorkers.splice(ge.runningWorkers.indexOf(e),1),ge.freeThreadData(e.pthread),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){a()[st>>2]=0;try{e()}finally{a()[st>>2]=1}},receiveObjectTransfer:function(e){},loadWasmModuleToWorker:function(e,t){e.onmessage=function(n){var r=n.data,a=r.cmd;if(e.pthread&&(ge.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),r.targetThread&&r.targetThread!=qe()){var i=ge.pthreads[r.targetThread];return i?i.worker.postMessage(n.data,r.transferList):console.error('Internal error! Worker sent a message "'+a+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(ge.currentProxiedOperationCallerThread=void 0)}if("processQueuedMainThreadWork"===a)Qe();else if("spawnThread"===a)Pe(n.data);else if("cleanupThread"===a)he(r.thread);else if("killThread"===a)pe(r.thread);else if("cancelThread"===a)!function(e){if(v)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cancelThread!";ge.pthreads[e].worker.postMessage({cmd:"cancel"})}(r.thread);else if("loaded"===a)e.loaded=!0,t&&t(e),e.runPthread&&(e.runPthread(),delete e.runPthread);else if("print"===a)T("Thread "+r.threadId+": "+r.text);else if("printErr"===a)A("Thread "+r.threadId+": "+r.text);else if("alert"===a)alert("Thread "+r.threadId+": "+r.text);else if("exit"===a)e.pthread&&Atomics.load(o(),e.pthread.threadInfoStruct+64>>2)&&ge.returnWorkerToPool(e);else if("exitProcess"===a)try{!function(e,t){if(!t||!R||0!==e){if(!t&&v)throw postMessage({cmd:"exitProcess",returnCode:e}),new ct(e);R||(ge.terminateAllThreads(),c.onExit&&c.onExit(e),L=!0),g(e,new ct(e))}}(r.returnCode)}catch(n){if(n instanceof ct)return;throw n}else"cancelDone"===a?ge.returnWorkerToPool(e):"objectTransfer"===a?ge.receiveObjectTransfer(n.data):"setimmediate"===n.data.target?e.postMessage(n.data):A("worker sent an unknown command "+a);ge.currentProxiedOperationCallerThread=void 0},e.onerror=function(e){A("pthread sent an error! "+e.filename+":"+e.lineno+": "+e.message)},h&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("exit",(function(e){}))),e.postMessage({cmd:"load",urlOrBlob:c.mainScriptUrlOrBlob||n,wasmMemory:N,wasmModule:_})},allocateUnusedWorker:function(){var e=C("tfjs-backend-wasm-threaded-simd.worker.js");ge.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==ge.unusedWorkers.length&&(ge.allocateUnusedWorker(),ge.loadWasmModuleToWorker(ge.unusedWorkers[0])),ge.unusedWorkers.length>0?ge.unusedWorkers.pop():null},busySpinWait:function(e){for(var t=performance.now()+e;performance.now()<t;);}};function ve(e,t){for(var n=arguments.length-2,r=nt(),a=n,o=at(8*a),s=o>>3,u=0;u<n;u++){var c=arguments[2+u];i()[s+u]=c}var l=Je(e,a,o,t);return rt(r),l}c.establishStackSpace=function(e,t){ot(e,t),rt(e)},c.getNoExitRuntime=function(){return R},c.invokeEntryPoint=function(e,t){return X.get(e)(t)},me=h?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:v?function(){return performance.now()-c.__performance_now_clock_drift}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var ye=[],be=[];function xe(e,t){var n;for(be.length=0,t>>=2;n=r()[e++];){var o=n<105;o&&1&t&&t++,be.push(o?i()[t++>>1]:a()[t]),++t}return be}function ke(){return r().length}function we(e){try{return N.grow(e-O.byteLength+65535>>>16),q(N.buffer),1}catch(e){}}var Ie={inEventHandler:0,removeAllEventListeners:function(){for(var e=Ie.eventHandlers.length-1;e>=0;--e)Ie._removeHandler(e);Ie.eventHandlers=[],Ie.deferredCalls=[]},registerRemoveEventListeners:function(){Ie.removeEventListenersRegistered||(Ie.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var a in Ie.deferredCalls){var o=Ie.deferredCalls[a];if(o.targetFunction==e&&r(o.argsList,n))return}Ie.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),Ie.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<Ie.deferredCalls.length;++t)Ie.deferredCalls[t].targetFunction==e&&(Ie.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return Ie.inEventHandler&&Ie.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Ie.canPerformEventHandlerRequests())for(var e=0;e<Ie.deferredCalls.length;++e){var t=Ie.deferredCalls[e];Ie.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<Ie.eventHandlers.length;++n)Ie.eventHandlers[n].target!=e||t&&t!=Ie.eventHandlers[n].eventTypeString||Ie._removeHandler(n--)},_removeHandler:function(e){var t=Ie.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),Ie.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){++Ie.inEventHandler,Ie.currentEventHandler=e,Ie.runDeferredCalls(),e.handlerFunc(t),Ie.runDeferredCalls(),--Ie.inEventHandler}));if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),Ie.eventHandlers.push(e),Ie.registerRemoveEventListeners();else for(var n=0;n<Ie.eventHandlers.length;++n)Ie.eventHandlers[n].target==e.target&&Ie.eventHandlers[n].eventTypeString==e.eventTypeString&&Ie._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,t,n,r,o){var i=nt(),s=at(12);a()[s>>2]=n,a()[s+4>>2]=r,a()[s+8>>2]=o,et(0,e,637534208,t,r,s),rt(i)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return ge.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Ce(e,t,n,r){var o=nt(),i=at(12),s=0;t&&(s=function(e){var t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(e)+1,n=je(t);return H(e,n,t),n}(t)),a()[i>>2]=s,a()[i+4>>2]=n,a()[i+8>>2]=r,et(0,e,657457152,0,s,i),rt(o)}var Ee=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function Se(e){return e=function(e){return e>2?j(e):e}(e),Ee[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function Te(e){return Se(e)}function Ae(e,t,n){var r=Te(e);if(!r)return-4;if(r.canvasSharedPtr&&(a()[r.canvasSharedPtr>>2]=t,a()[r.canvasSharedPtr+4>>2]=n),!r.offscreenCanvas&&r.controlTransferredOffscreen)return r.canvasSharedPtr?(function(e,t,n,r){Ce(e,t=t?j(t):"",n,r)}(a()[r.canvasSharedPtr+8>>2],e,t,n),1):-4;r.offscreenCanvas&&(r=r.offscreenCanvas);var o=!1;if(r.GLctxObject&&r.GLctxObject.GLctx){var i=r.GLctxObject.GLctx.getParameter(2978);o=0===i[0]&&0===i[1]&&i[2]===r.width&&i[3]===r.height}return r.width=t,r.height=n,o&&r.GLctxObject.GLctx.viewport(0,0,t,n),0}function Ne(e,t,n){return v?ve(2,1,e,t,n):Ae(e,t,n)}var _e={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){_e.lastError||(_e.lastError=e)},getNewId:function(e){for(var t=_e.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,r){for(var o="",i=0;i<t;++i){var s=r?a()[r+4*i>>2]:-1;o+=j(a()[n+4*i>>2],s<0?void 0:s)}return o},createContext:function(e,t){var n=e.getContext("webgl",t);return n?_e.registerContext(n,t):0},registerContext:function(e,t){var n=je(8);a()[n+4>>2]=qe();var r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),_e.contexts[n]=r,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&_e.initExtensions(r),n},makeContextCurrent:function(e){return _e.currentContext=_e.contexts[e],c.ctx=Oe=_e.currentContext&&_e.currentContext.GLctx,!(e&&!Oe)},getContext:function(e){return _e.contexts[e]},deleteContext:function(e){_e.currentContext===_e.contexts[e]&&(_e.currentContext=null),"object"==Ty(Ie)&&Ie.removeAllHandlersOnTarget(_e.contexts[e].GLctx.canvas),_e.contexts[e]&&_e.contexts[e].GLctx.canvas&&(_e.contexts[e].GLctx.canvas.GLctxObject=void 0),He(_e.contexts[e].handle),_e.contexts[e]=null},initExtensions:function(e){if(e||(e=_e.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;(function(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,a){t.drawArraysInstancedANGLE(e,n,r,a)},e.drawElementsInstanced=function(e,n,r,a,o){t.drawElementsInstancedANGLE(e,n,r,a,o)}})(t),function(e){var t=e.getExtension("OES_vertex_array_object");if(t)e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)}}(t),function(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)}}(t),t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query"),function(e){e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")}(t),(t.getSupportedExtensions()||[]).forEach((function(e){e.indexOf("lose_context")<0&&e.indexOf("debug")<0&&t.getExtension(e)}))}},populateUniformTable:function(e){for(var t=_e.programs[e],n=_e.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},r=n.uniforms,a=Oe.getProgramParameter(t,35718),o=0;o<a;++o){var i=Oe.getActiveUniform(t,o),s=i.name;n.maxUniformLength=Math.max(n.maxUniformLength,s.length+1),"]"==s.slice(-1)&&(s=s.slice(0,s.lastIndexOf("[")));var u=Oe.getUniformLocation(t,s);if(u){var c=_e.getNewId(_e.uniforms);r[s]=[i.size,c],_e.uniforms[c]=u;for(var l=1;l<i.size;++l){var d=s+"["+l+"]";u=Oe.getUniformLocation(t,d),c=_e.getNewId(_e.uniforms),_e.uniforms[c]=u}}}}},Re=["default","low-power","high-performance"];var Oe,Fe={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Fe.buffers[e];0===t||10===t?((1===e?T:A)(z(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return Fe.varargs+=4,a()[Fe.varargs-4>>2]},getStr:function(e){return j(e)},get64:function(e,t){return e}};function Me(e){return v?ve(3,1,e):0}function De(e,t,n,r,a){if(v)return ve(4,1,e,t,n,r,a)}function Be(e,t,n,o){if(v)return ve(5,1,e,t,n,o);for(var i=0,s=0;s<n;s++){for(var u=a()[t+8*s>>2],c=a()[t+(8*s+4)>>2],l=0;l<c;l++)Fe.printChar(e,r()[u+l]);i+=c}return a()[o>>2]=i,0}function Pe(e){if(v)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var t=ge.getNewWorker();if(void 0!==t.pthread)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";ge.runningWorkers.push(t);for(var n=je(512),r=0;r<128;++r)a()[n+4*r>>2]=0;var i=e.stackBase+e.stackSize,s=ge.pthreads[e.pthread_ptr]={worker:t,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,threadInfoStruct:e.pthread_ptr},u=s.threadInfoStruct>>2;Atomics.store(o(),u+16,e.detached),Atomics.store(o(),u+25,n),Atomics.store(o(),u+10,s.threadInfoStruct),Atomics.store(o(),u+20,e.stackSize),Atomics.store(o(),u+19,i),Atomics.store(o(),u+26,e.stackSize),Atomics.store(o(),u+28,i),Atomics.store(o(),u+29,e.detached);var c=Ke()+40;Atomics.store(o(),u+43,c),t.pthread=s;var l={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};t.runPthread=function(){l.time=performance.now(),t.postMessage(l,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread)}function Le(e){if(v)return ve(6,1,e);switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==("undefined"==typeof navigator?"undefined":Ty(navigator))&&navigator.hardwareConcurrency||1}return function(e){a()[Ge()>>2]=e}(28),-1}v||ge.initMainThreadBlock();var Ue,Ve=[null,function(e,t){if(v)return ve(1,1,e,t)},Ne,Me,De,Be,Le],We={e:function(e,t,n,r){ae("Assertion failed: "+j(e)+", at: "+[t?j(t):"unknown filename",n,r?j(r):"unknown function"])},r:function(e,t){_main(e,t)},x:function(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(v)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=ge.pthreads[e],r=n&&n.worker;if(!r)return;r.postMessage({cmd:"processThreadQueue"})}return 1},b:function(){ae()},y:function(e,t,n){var r=xe(t,n);return le[e].apply(null,r)},j:function(e,t){},c:function(e,n,r){if(e<=0||e>t().length||!0&e)return-28;if(f){if(Atomics.load(a(),e>>2)!=n)return-6;var o=performance.now(),i=o+r;for(Atomics.exchange(a(),ut>>2,e);;){if((o=performance.now())>i)return Atomics.exchange(a(),ut>>2,0),-73;if(0==Atomics.exchange(a(),ut>>2,0))break;if(Qe(),Atomics.load(a(),e>>2)!=n)return-6;Atomics.exchange(a(),ut>>2,e)}return 0}var s=Atomics.wait(a(),e>>2,n,r);if("timed-out"===s)return-73;if("not-equal"===s)return-6;if("ok"===s)return 0;throw"Atomics.wait returned an unexpected value "+s},d:fe,f:me,p:function(e,t,n){r().copyWithin(e,t,t+n)},z:function(){return h?cj.cpus().length:navigator.hardwareConcurrency},u:function(e,t,n){ye.length=t;for(var r=n>>3,a=0;a<t;a++)ye[a]=i()[r+a];return(e<0?le[-e-1]:Ve[e]).apply(null,ye)},q:function(e){var t=ke();if(e<=t)return!1;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),we(Math.min(n,K(Math.max(e,a),65536))))return!0}return!1},v:function(e,t,n){return Te(e)?Ae(e,t,n):Ne(e,t,n)},i:function(e){},t:function(e,t){},w:function(e,t){return function(e,t){var n=t>>2,r=a()[n+6],o={alpha:!!a()[n+0],depth:!!a()[n+1],stencil:!!a()[n+2],antialias:!!a()[n+3],premultipliedAlpha:!!a()[n+4],preserveDrawingBuffer:!!a()[n+5],powerPreference:Re[r],failIfMajorPerformanceCaveat:!!a()[n+7],majorVersion:a()[n+8],minorVersion:a()[n+9],enableExtensionsByDefault:a()[n+10],explicitSwapControl:a()[n+11],proxyContextToMainThread:a()[n+12],renderViaOffscreenBackBuffer:a()[n+13]},i=Te(e);return i?o.explicitSwapControl?0:_e.createContext(i,o):0}(e,t)},m:Me,n:De,g:Be,o:function(){ge.initRuntime()},a:N||c.wasmMemory,k:function(e){var t=ge.threadExitHandlers.pop();e&&t()},l:function(e,t){ge.threadExitHandlers.push((function(){X.get(e)(t)}))},h:function(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return A("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!e)return A("pthread_create called with a null thread pointer!"),28;var i=[];if(v&&0===i.length)return Ze(687865856,e,t,n,r);var s=0,u=0,c=0;t&&-1!=t?(s=a()[t>>2],s+=81920,u=a()[t+8>>2],c=0!==a()[t+12>>2]):s=2097152;var l=0==u;l?u=it(16,s):U((u-=s)>0);for(var d=je(228),f=0;f<57;++f)o()[(d>>2)+f]=0;a()[e>>2]=d,a()[d+12>>2]=d;var p=d+152;a()[p>>2]=p;var h={stackBase:u,stackSize:s,allocatedOwnStack:l,detached:c,startRoutine:n,pthread_ptr:d,arg:r,transferList:i};return v?(h.cmd="spawnThread",postMessage(h,i)):Pe(h),0},s:Le},ze=(function(){var e={a:We};function t(e,t){var n=e.exports;if(c.asm=n,X=c.asm.F,_=t,!v){var r=ge.unusedWorkers.length;ge.unusedWorkers.forEach((function(e){ge.loadWasmModuleToWorker(e,(function(){--r||function(e){if(ne--,c.monitorRunDependencies&&c.monitorRunDependencies(ne),0==ne&&re){var t=re;re=null,t()}}()}))}))}}function n(e){t(e.instance,e.module)}function r(t){return function(){if(!S&&(f||p)){if("function"==typeof fetch&&!se(ue))return fetch(ue,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ue+"'";return e.arrayBuffer()})).catch((function(){return ce(ue)}));if(b)return new Promise((function(e,t){b(ue,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return ce(ue)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){A("failed to asynchronously prepare wasm: "+e),ae(e)}))}if(v||(U(!v,"addRunDependency cannot be used in a pthread worker"),ne++,c.monitorRunDependencies&&c.monitorRunDependencies(ne)),c.instantiateWasm)try{return c.instantiateWasm(e,t)}catch(e){return A("Module.instantiateWasm callback failed with error: "+e),!1}(S||"function"!=typeof WebAssembly.instantiateStreaming||ie(ue)||se(ue)||"function"!=typeof fetch?r(n):fetch(ue,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return A("wasm streaming compile failed: "+e),A("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(u)}(),c.___wasm_call_ctors=function(){return(ze=c.___wasm_call_ctors=c.asm.A).apply(null,arguments)}),je=(c._init=function(){return(c._init=c.asm.B).apply(null,arguments)},c._register_tensor=function(){return(c._register_tensor=c.asm.C).apply(null,arguments)},c._dispose_data=function(){return(c._dispose_data=c.asm.D).apply(null,arguments)},c._dispose=function(){return(c._dispose=c.asm.E).apply(null,arguments)},c._Abs=function(){return(c._Abs=c.asm.G).apply(null,arguments)},c._Add=function(){return(c._Add=c.asm.H).apply(null,arguments)},c._AddN=function(){return(c._AddN=c.asm.I).apply(null,arguments)},c._ArgMax=function(){return(c._ArgMax=c.asm.J).apply(null,arguments)},c._AvgPool=function(){return(c._AvgPool=c.asm.K).apply(null,arguments)},c._BatchMatMul=function(){return(c._BatchMatMul=c.asm.L).apply(null,arguments)},c._Ceil=function(){return(c._Ceil=c.asm.M).apply(null,arguments)},c._ClipByValue=function(){return(c._ClipByValue=c.asm.N).apply(null,arguments)},c._Conv2D=function(){return(c._Conv2D=c.asm.O).apply(null,arguments)},c._Conv2DBackpropInput=function(){return(c._Conv2DBackpropInput=c.asm.P).apply(null,arguments)},c._Cos=function(){return(c._Cos=c.asm.Q).apply(null,arguments)},c._CropAndResize=function(){return(c._CropAndResize=c.asm.R).apply(null,arguments)},c._Cumsum=function(){return(c._Cumsum=c.asm.S).apply(null,arguments)},c._DepthToSpace=function(){return(c._DepthToSpace=c.asm.T).apply(null,arguments)},c._DepthwiseConv2dNative=function(){return(c._DepthwiseConv2dNative=c.asm.U).apply(null,arguments)},c._Equal=function(){return(c._Equal=c.asm.V).apply(null,arguments)},c._Exp=function(){return(c._Exp=c.asm.W).apply(null,arguments)},c._FlipLeftRight=function(){return(c._FlipLeftRight=c.asm.X).apply(null,arguments)},c._Floor=function(){return(c._Floor=c.asm.Y).apply(null,arguments)},c._FloorDiv=function(){return(c._FloorDiv=c.asm.Z).apply(null,arguments)},c._FusedBatchNorm=function(){return(c._FusedBatchNorm=c.asm._).apply(null,arguments)},c._FusedConv2D=function(){return(c._FusedConv2D=c.asm.$).apply(null,arguments)},c._FusedDepthwiseConv2D=function(){return(c._FusedDepthwiseConv2D=c.asm.aa).apply(null,arguments)},c._Gather=function(){return(c._Gather=c.asm.ba).apply(null,arguments)},c._GatherNd=function(){return(c._GatherNd=c.asm.ca).apply(null,arguments)},c._Greater=function(){return(c._Greater=c.asm.da).apply(null,arguments)},c._GreaterEqual=function(){return(c._GreaterEqual=c.asm.ea).apply(null,arguments)},c._LeakyRelu=function(){return(c._LeakyRelu=c.asm.fa).apply(null,arguments)},c._Less=function(){return(c._Less=c.asm.ga).apply(null,arguments)},c._LessEqual=function(){return(c._LessEqual=c.asm.ha).apply(null,arguments)},c._Log=function(){return(c._Log=c.asm.ia).apply(null,arguments)},c._LogicalAnd=function(){return(c._LogicalAnd=c.asm.ja).apply(null,arguments)},c._Max=function(){return(c._Max=c.asm.ka).apply(null,arguments)},c._MaxPool=function(){return(c._MaxPool=c.asm.la).apply(null,arguments)},c._Maximum=function(){return(c._Maximum=c.asm.ma).apply(null,arguments)},c._Mean=function(){return(c._Mean=c.asm.na).apply(null,arguments)},c._Min=function(){return(c._Min=c.asm.oa).apply(null,arguments)},c._Minimum=function(){return(c._Minimum=c.asm.pa).apply(null,arguments)},c._Multiply=function(){return(c._Multiply=c.asm.qa).apply(null,arguments)},c._Neg=function(){return(c._Neg=c.asm.ra).apply(null,arguments)},c._NonMaxSuppressionV3=function(){return(c._NonMaxSuppressionV3=c.asm.sa).apply(null,arguments)},c._NonMaxSuppressionV4=function(){return(c._NonMaxSuppressionV4=c.asm.ta).apply(null,arguments)},c._NonMaxSuppressionV5=function(){return(c._NonMaxSuppressionV5=c.asm.ua).apply(null,arguments)},c._NotEqual=function(){return(c._NotEqual=c.asm.va).apply(null,arguments)},c._OneHot=function(){return(c._OneHot=c.asm.wa).apply(null,arguments)},c._PadV2=function(){return(c._PadV2=c.asm.xa).apply(null,arguments)},c._Pow=function(){return(c._Pow=c.asm.ya).apply(null,arguments)},c._Prelu=function(){return(c._Prelu=c.asm.za).apply(null,arguments)},c._Prod=function(){return(c._Prod=c.asm.Aa).apply(null,arguments)},c._RealDiv=function(){return(c._RealDiv=c.asm.Ba).apply(null,arguments)},c._Relu=function(){return(c._Relu=c.asm.Ca).apply(null,arguments)},c._Relu6=function(){return(c._Relu6=c.asm.Da).apply(null,arguments)},c._ResizeBilinear=function(){return(c._ResizeBilinear=c.asm.Ea).apply(null,arguments)},c._Reverse=function(){return(c._Reverse=c.asm.Fa).apply(null,arguments)},c._RotateWithOffset=function(){return(c._RotateWithOffset=c.asm.Ga).apply(null,arguments)},c._Round=function(){return(c._Round=c.asm.Ha).apply(null,arguments)},c._Rsqrt=function(){return(c._Rsqrt=c.asm.Ia).apply(null,arguments)},c._ScatterNd=function(){return(c._ScatterNd=c.asm.Ja).apply(null,arguments)},c._SelectV2=function(){return(c._SelectV2=c.asm.Ka).apply(null,arguments)},c._Sigmoid=function(){return(c._Sigmoid=c.asm.La).apply(null,arguments)},c._Sin=function(){return(c._Sin=c.asm.Ma).apply(null,arguments)},c._Softmax=function(){return(c._Softmax=c.asm.Na).apply(null,arguments)},c._Sqrt=function(){return(c._Sqrt=c.asm.Oa).apply(null,arguments)},c._Square=function(){return(c._Square=c.asm.Pa).apply(null,arguments)},c._SquaredDifference=function(){return(c._SquaredDifference=c.asm.Qa).apply(null,arguments)},c._Step=function(){return(c._Step=c.asm.Ra).apply(null,arguments)},c._StridedSlice=function(){return(c._StridedSlice=c.asm.Sa).apply(null,arguments)},c._Sub=function(){return(c._Sub=c.asm.Ta).apply(null,arguments)},c._Sum=function(){return(c._Sum=c.asm.Ua).apply(null,arguments)},c._Tanh=function(){return(c._Tanh=c.asm.Va).apply(null,arguments)},c._Tile=function(){return(c._Tile=c.asm.Wa).apply(null,arguments)},c._TopK=function(){return(c._TopK=c.asm.Xa).apply(null,arguments)},c._Transpose=function(){return(c._Transpose=c.asm.Ya).apply(null,arguments)},c.__FusedMatMul=function(){return(c.__FusedMatMul=c.asm.Za).apply(null,arguments)},c._malloc=function(){return(je=c._malloc=c.asm._a).apply(null,arguments)}),He=c._free=function(){return(He=c._free=c.asm.$a).apply(null,arguments)},Ge=c.___errno_location=function(){return(Ge=c.___errno_location=c.asm.ab).apply(null,arguments)},Ke=c._emscripten_get_global_libc=function(){return(Ke=c._emscripten_get_global_libc=c.asm.bb).apply(null,arguments)},qe=c._pthread_self=function(){return(qe=c._pthread_self=c.asm.cb).apply(null,arguments)},Xe=c.___pthread_tsd_run_dtors=function(){return(Xe=c.___pthread_tsd_run_dtors=c.asm.db).apply(null,arguments)},Qe=c._emscripten_main_thread_process_queued_calls=function(){return(Qe=c._emscripten_main_thread_process_queued_calls=c.asm.eb).apply(null,arguments)},Ye=(c._emscripten_current_thread_process_queued_calls=function(){return(c._emscripten_current_thread_process_queued_calls=c.asm.fb).apply(null,arguments)},c._emscripten_register_main_browser_thread_id=function(){return(Ye=c._emscripten_register_main_browser_thread_id=c.asm.gb).apply(null,arguments)}),$e=c.__emscripten_do_dispatch_to_thread=function(){return($e=c.__emscripten_do_dispatch_to_thread=c.asm.hb).apply(null,arguments)},Ze=c._emscripten_sync_run_in_main_thread_4=function(){return(Ze=c._emscripten_sync_run_in_main_thread_4=c.asm.ib).apply(null,arguments)},Je=c._emscripten_run_in_main_runtime_thread_js=function(){return(Je=c._emscripten_run_in_main_runtime_thread_js=c.asm.jb).apply(null,arguments)},et=c.__emscripten_call_on_thread=function(){return(et=c.__emscripten_call_on_thread=c.asm.kb).apply(null,arguments)},tt=(c._emscripten_tls_init=function(){return(c._emscripten_tls_init=c.asm.lb).apply(null,arguments)},c.__emscripten_thread_init=function(){return(tt=c.__emscripten_thread_init=c.asm.mb).apply(null,arguments)}),nt=c.stackSave=function(){return(nt=c.stackSave=c.asm.nb).apply(null,arguments)},rt=c.stackRestore=function(){return(rt=c.stackRestore=c.asm.ob).apply(null,arguments)},at=c.stackAlloc=function(){return(at=c.stackAlloc=c.asm.pb).apply(null,arguments)},ot=c._emscripten_stack_set_limits=function(){return(ot=c._emscripten_stack_set_limits=c.asm.qb).apply(null,arguments)},it=c._memalign=function(){return(it=c._memalign=c.asm.rb).apply(null,arguments)},st=c.__emscripten_allow_main_runtime_queued_calls=9880,ut=c.__emscripten_main_thread_futex=11368;function ct(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function lt(e){if(!(ne>0)){if(v)return s(c),void postMessage({cmd:"loaded"});(function(){if(!v){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)ee(c.preRun.shift());de(Y)}})(),ne>0||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),t()}),1)):t())}function t(){Ue||(Ue=!0,c.calledRun=!0,L||(de($),v||de(Z),s(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),function(){if(!v){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;)te(c.postRun.shift());de(J)}}()))}}if(c.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?V(e):function(){return W(e,t,n,arguments)}},c.PThread=ge,c.PThread=ge,c.wasmMemory=N,c.ExitStatus=ct,re=function e(){Ue||lt(),Ue||(re=e)},c.run=lt,c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return v&&(R=!1,ge.initWorker()),lt(),e.ready});e.exports=r})),dj=eI((function(e,t){var n,r=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(n=n||__filename),function(e){var t,r,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,n){t=e,r=n}));var o,i={};for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);var s,u,c,l;s="object"==("undefined"==typeof window?"undefined":Ty(window)),u="function"==typeof importScripts,c="object"==("undefined"==typeof process?"undefined":Ty(process))&&"object"==Ty(process.versions)&&"string"==typeof process.versions.node,l=!s&&!c&&!u;var d,f,p,h,m,g="";c?(g=u?sj.dirname(g)+"/":__dirname+"/",d=function(e,t){return h||(h=wT),m||(m=sj),e=m.normalize(e),h.readFileSync(e,t?null:"utf8")},p=function(e){var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),w(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ae))throw e})),process.on("unhandledRejection",j),a.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(d=function(e){return read(e)}),p=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(w("object"==Ty(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(s||u)&&(u?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),n&&(g=n),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var v,y,b=a.print||console.log.bind(console),x=a.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);i=null,a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,a.quit&&a.quit,a.wasmBinary&&(v=a.wasmBinary),a.noExitRuntime,"object"!=("undefined"==typeof WebAssembly?"undefined":Ty(WebAssembly))&&j("no native wasm support detected");var k=!1;function w(e,t){e||j("Assertion failed: "+t)}function I(e){var t=a["_"+e];return w(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function C(e,t,n,r,a){var o={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);!function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var a=n,o=n+r-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(e,T,t,n)}(e,t=re(n),n)}return t},array:function(e){var t=re(e.length);return function(e,t){S.set(e,t)}(e,t),t}},i=I(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=o[n[c]];l?(0===u&&(u=te()),s[c]=l(r[c])):s[c]=r[c]}var d=i.apply(null,s);return d=function(e){return"string"===t?R(e):"boolean"===t?Boolean(e):e}(d),0!==u&&ne(u),d}var E,S,T,A,N="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function _(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&N)return N.decode(e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var u=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|u:(7&i)<<18|s<<12|u<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var c=i-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&i)<<6|s)}else o+=String.fromCharCode(i)}return o}function R(e,t){return e?_(T,e,t):""}function O(e,t){return e%t>0&&(e+=t-e%t),e}function F(e){E=e,a.HEAP8=S=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=A=new Int32Array(e),a.HEAPU8=T=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var M,D=[],B=[],P=[],L=[];function U(e){D.unshift(e)}function V(e){L.unshift(e)}B.push({func:function(){ee()}});var W=0,z=null;function j(e){a.onAbort&&a.onAbort(e),x(e+=""),k=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}function H(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}a.preloadedImages={},a.preloadedAudios={};function G(e){return H(e,"data:application/octet-stream;base64,")}function K(e){return H(e,"file://")}var q="tfjs-backend-wasm.wasm";function X(e){try{if(e==q&&v)return new Uint8Array(v);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(e){j(e)}}function Q(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?M.get(n)():M.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}function Y(e){try{return y.grow(e-E.byteLength+65535>>>16),F(y.buffer),1}catch(e){}}G(q)||(q=function(e){return a.locateFile?a.locateFile(e,g):g+e}(q));var $={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=$.buffers[e];0===t||10===t?((1===e?b:x)(_(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return $.varargs+=4,A[$.varargs-4>>2]},getStr:function(e){return R(e)},get64:function(e,t){return e}};var Z,J={a:function(){j()},d:function(e,t,n){T.copyWithin(e,t,t+n)},e:function(e){var t=T.length,n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),Y(Math.min(n,O(Math.max(e,a),65536))))return!0}return!1},f:function(e){return 0},c:function(e,t,n,r,a){},b:function(e,t,n,r){for(var a=0,o=0;o<n;o++){for(var i=A[t+8*o>>2],s=A[t+(8*o+4)>>2],u=0;u<s;u++)$.printChar(e,T[i+u]);a+=s}return A[r>>2]=a,0}},ee=(function(){var e={a:J};function t(e,t){var n=e.exports;a.asm=n,F((y=a.asm.g).buffer),M=a.asm.m,function(e){if(W--,a.monitorRunDependencies&&a.monitorRunDependencies(W),0==W&&z){var t=z;z=null,t()}}()}function n(e){t(e.instance)}function o(t){return function(){if(!v&&(s||u)){if("function"==typeof fetch&&!K(q))return fetch(q,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+q+"'";return e.arrayBuffer()})).catch((function(){return X(q)}));if(f)return new Promise((function(e,t){f(q,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return X(q)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){x("failed to asynchronously prepare wasm: "+e),j(e)}))}if(W++,a.monitorRunDependencies&&a.monitorRunDependencies(W),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return x("Module.instantiateWasm callback failed with error: "+e),!1}(v||"function"!=typeof WebAssembly.instantiateStreaming||G(q)||K(q)||"function"!=typeof fetch?o(n):fetch(q,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),o(n)}))}))).catch(r)}(),a.___wasm_call_ctors=function(){return(ee=a.___wasm_call_ctors=a.asm.h).apply(null,arguments)}),te=(a._init=function(){return(a._init=a.asm.i).apply(null,arguments)},a._register_tensor=function(){return(a._register_tensor=a.asm.j).apply(null,arguments)},a._dispose_data=function(){return(a._dispose_data=a.asm.k).apply(null,arguments)},a._dispose=function(){return(a._dispose=a.asm.l).apply(null,arguments)},a._Abs=function(){return(a._Abs=a.asm.n).apply(null,arguments)},a._Add=function(){return(a._Add=a.asm.o).apply(null,arguments)},a._AddN=function(){return(a._AddN=a.asm.p).apply(null,arguments)},a._ArgMax=function(){return(a._ArgMax=a.asm.q).apply(null,arguments)},a._AvgPool=function(){return(a._AvgPool=a.asm.r).apply(null,arguments)},a._BatchMatMul=function(){return(a._BatchMatMul=a.asm.s).apply(null,arguments)},a._Ceil=function(){return(a._Ceil=a.asm.t).apply(null,arguments)},a._ClipByValue=function(){return(a._ClipByValue=a.asm.u).apply(null,arguments)},a._Conv2D=function(){return(a._Conv2D=a.asm.v).apply(null,arguments)},a._Conv2DBackpropInput=function(){return(a._Conv2DBackpropInput=a.asm.w).apply(null,arguments)},a._Cos=function(){return(a._Cos=a.asm.x).apply(null,arguments)},a._CropAndResize=function(){return(a._CropAndResize=a.asm.y).apply(null,arguments)},a._Cumsum=function(){return(a._Cumsum=a.asm.z).apply(null,arguments)},a._DepthToSpace=function(){return(a._DepthToSpace=a.asm.A).apply(null,arguments)},a._DepthwiseConv2dNative=function(){return(a._DepthwiseConv2dNative=a.asm.B).apply(null,arguments)},a._Equal=function(){return(a._Equal=a.asm.C).apply(null,arguments)},a._Exp=function(){return(a._Exp=a.asm.D).apply(null,arguments)},a._FlipLeftRight=function(){return(a._FlipLeftRight=a.asm.E).apply(null,arguments)},a._Floor=function(){return(a._Floor=a.asm.F).apply(null,arguments)},a._FloorDiv=function(){return(a._FloorDiv=a.asm.G).apply(null,arguments)},a._FusedBatchNorm=function(){return(a._FusedBatchNorm=a.asm.H).apply(null,arguments)},a._FusedConv2D=function(){return(a._FusedConv2D=a.asm.I).apply(null,arguments)},a._FusedDepthwiseConv2D=function(){return(a._FusedDepthwiseConv2D=a.asm.J).apply(null,arguments)},a._Gather=function(){return(a._Gather=a.asm.K).apply(null,arguments)},a._GatherNd=function(){return(a._GatherNd=a.asm.L).apply(null,arguments)},a._Greater=function(){return(a._Greater=a.asm.M).apply(null,arguments)},a._GreaterEqual=function(){return(a._GreaterEqual=a.asm.N).apply(null,arguments)},a._LeakyRelu=function(){return(a._LeakyRelu=a.asm.O).apply(null,arguments)},a._Less=function(){return(a._Less=a.asm.P).apply(null,arguments)},a._LessEqual=function(){return(a._LessEqual=a.asm.Q).apply(null,arguments)},a._Log=function(){return(a._Log=a.asm.R).apply(null,arguments)},a._LogicalAnd=function(){return(a._LogicalAnd=a.asm.S).apply(null,arguments)},a._Max=function(){return(a._Max=a.asm.T).apply(null,arguments)},a._MaxPool=function(){return(a._MaxPool=a.asm.U).apply(null,arguments)},a._Maximum=function(){return(a._Maximum=a.asm.V).apply(null,arguments)},a._Mean=function(){return(a._Mean=a.asm.W).apply(null,arguments)},a._Min=function(){return(a._Min=a.asm.X).apply(null,arguments)},a._Minimum=function(){return(a._Minimum=a.asm.Y).apply(null,arguments)},a._Multiply=function(){return(a._Multiply=a.asm.Z).apply(null,arguments)},a._Neg=function(){return(a._Neg=a.asm._).apply(null,arguments)},a._NonMaxSuppressionV3=function(){return(a._NonMaxSuppressionV3=a.asm.$).apply(null,arguments)},a._NonMaxSuppressionV4=function(){return(a._NonMaxSuppressionV4=a.asm.aa).apply(null,arguments)},a._NonMaxSuppressionV5=function(){return(a._NonMaxSuppressionV5=a.asm.ba).apply(null,arguments)},a._NotEqual=function(){return(a._NotEqual=a.asm.ca).apply(null,arguments)},a._OneHot=function(){return(a._OneHot=a.asm.da).apply(null,arguments)},a._PadV2=function(){return(a._PadV2=a.asm.ea).apply(null,arguments)},a._Pow=function(){return(a._Pow=a.asm.fa).apply(null,arguments)},a._Prelu=function(){return(a._Prelu=a.asm.ga).apply(null,arguments)},a._Prod=function(){return(a._Prod=a.asm.ha).apply(null,arguments)},a._RealDiv=function(){return(a._RealDiv=a.asm.ia).apply(null,arguments)},a._Relu=function(){return(a._Relu=a.asm.ja).apply(null,arguments)},a._Relu6=function(){return(a._Relu6=a.asm.ka).apply(null,arguments)},a._ResizeBilinear=function(){return(a._ResizeBilinear=a.asm.la).apply(null,arguments)},a._Reverse=function(){return(a._Reverse=a.asm.ma).apply(null,arguments)},a._RotateWithOffset=function(){return(a._RotateWithOffset=a.asm.na).apply(null,arguments)},a._Round=function(){return(a._Round=a.asm.oa).apply(null,arguments)},a._Rsqrt=function(){return(a._Rsqrt=a.asm.pa).apply(null,arguments)},a._ScatterNd=function(){return(a._ScatterNd=a.asm.qa).apply(null,arguments)},a._SelectV2=function(){return(a._SelectV2=a.asm.ra).apply(null,arguments)},a._Sigmoid=function(){return(a._Sigmoid=a.asm.sa).apply(null,arguments)},a._Sin=function(){return(a._Sin=a.asm.ta).apply(null,arguments)},a._Softmax=function(){return(a._Softmax=a.asm.ua).apply(null,arguments)},a._Sqrt=function(){return(a._Sqrt=a.asm.va).apply(null,arguments)},a._Square=function(){return(a._Square=a.asm.wa).apply(null,arguments)},a._SquaredDifference=function(){return(a._SquaredDifference=a.asm.xa).apply(null,arguments)},a._Step=function(){return(a._Step=a.asm.ya).apply(null,arguments)},a._StridedSlice=function(){return(a._StridedSlice=a.asm.za).apply(null,arguments)},a._Sub=function(){return(a._Sub=a.asm.Aa).apply(null,arguments)},a._Sum=function(){return(a._Sum=a.asm.Ba).apply(null,arguments)},a._Tanh=function(){return(a._Tanh=a.asm.Ca).apply(null,arguments)},a._Tile=function(){return(a._Tile=a.asm.Da).apply(null,arguments)},a._TopK=function(){return(a._TopK=a.asm.Ea).apply(null,arguments)},a._Transpose=function(){return(a._Transpose=a.asm.Fa).apply(null,arguments)},a.__FusedMatMul=function(){return(a.__FusedMatMul=a.asm.Ga).apply(null,arguments)},a._malloc=function(){return(a._malloc=a.asm.Ha).apply(null,arguments)},a._free=function(){return(a._free=a.asm.Ia).apply(null,arguments)},a.stackSave=function(){return(te=a.stackSave=a.asm.Ja).apply(null,arguments)}),ne=a.stackRestore=function(){return(ne=a.stackRestore=a.asm.Ka).apply(null,arguments)},re=a.stackAlloc=function(){return(re=a.stackAlloc=a.asm.La).apply(null,arguments)};function ae(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function oe(e){function n(){Z||(Z=!0,a.calledRun=!0,k||(Q(B),Q(P),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)V(a.postRun.shift());Q(L)}()))}W>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)U(a.preRun.shift());Q(D)}(),W>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),n()}),1)):n()))}if(a.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?I(e):function(){return C(e,t,n,arguments)}},z=function e(){Z||oe(),Z||(z=e)},a.run=oe,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return oe(),e.ready});e.exports=r})),fj=function(e){Dy(a,e);var t,n,r=Hy(a);function a(e){var t;return _y(this,a),(t=r.call(this)).wasm=e,t.dataIdNextNumber=1,t.wasm.tfjs.init(),t.dataIdMap=new rC(zy(t),DS()),t}return Oy(a,[{key:"write",value:function(e,t,n){var r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}},{key:"numDataIds",value:function(){return this.dataIdMap.numDataIds()}},{key:"time",value:(n=Ny(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JC(),t(),e.abrupt("return",{kernelMs:JC()-n});case 3:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"move",value:function(e,t,n,r,a){var o=this.dataIdNextNumber++;if("string"!==r){var i=dC(n),s=i*CC(r),u=this.wasm._malloc(s);this.dataIdMap.set(e,{id:o,memoryOffset:u,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(o,i,u),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),u)}else{var c=t;this.dataIdMap.set(e,{id:o,stringBytes:c,shape:n,dtype:r,memoryOffset:null,refCount:a})}}},{key:"read",value:(t=Ny(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"readSync",value:function(e){var t=this.dataIdMap.get(e),n=t.memoryOffset,r=t.dtype,a=t.shape,o=t.stringBytes;return"string"===r?o:function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}(this.wasm.HEAPU8.slice(n,n+dC(a)*CC(r)).buffer,r)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.dataIdMap.has(e)){var n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}},{key:"refCount",value:function(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}},{key:"incRef",value:function(e){var t=this.dataIdMap.get(e);null!=t&&t.refCount++}},{key:"floatPrecision",value:function(){return 32}},{key:"getMemoryOffset",value:function(e){return this.dataIdMap.get(e).memoryOffset}},{key:"dispose",value:function(){this.wasm.tfjs.dispose(),this.wasm=null}},{key:"memory",value:function(){return{unreliable:!1}}},{key:"makeOutput",value:function(e,t,n){var r;if(null==n)r=this.write(null,e,t);else{var a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});var o=dC(e);this.wasm.tfjs.registerTensor(a,o,n)}return{dataId:r,shape:e,dtype:t}}},{key:"typedArrayFromHeap",value:function(e){var t=e.shape,n=e.dtype,r=e.dataId,a=this.wasm.HEAPU8.buffer,o=this.dataIdMap.get(r).memoryOffset,i=dC(t);switch(n){case"float32":return new Float32Array(a,o,i);case"int32":return new Int32Array(a,o,i);case"bool":return new Uint8Array(a,o,i);default:throw new Error("Unknown dtype ".concat(n))}}}]),a}(aC);function pj(e){return function(t,n){return function(e,t){return UC().platform.fetch(e,{credentials:"same-origin"})}(e).then((function(r){r.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),r.arrayBuffer().then((function(e){WebAssembly.instantiate(e,t).then((function(e){n(e.instance)}))}))})),{}}}function hj(e,t,n){var r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=yj&&null!=yj[r]?yj[r]:n+r}var mj=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],gj=null,vj=null,yj={},bj=!1,xj=!1;function kj(){return(kj=Vk(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.preferredBackends,r=void 0===n?["webgl","wasm","cpu"]:n,e.next=3,MS();case 3:a=Xk(r),e.prev=4,a.s();case 6:if((o=a.n()).done){e.next=20;break}return i=o.value,e.prev=8,e.next=11,BS(i);case 11:return e.abrupt("break",20);case 14:if(e.prev=14,e.t0=e.catch(8),i!==r[r.length-1]){e.next=18;break}throw e.t0;case 18:e.next=6;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(4),a.e(e.t1);case 25:return e.prev=25,a.f(),e.finish(25);case 28:return e.next=30,PS();case 30:case"end":return e.stop()}}),e,null,[[4,22,25,28],[8,14]])})))).apply(this,arguments)}LS("wasm",Ny(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ny(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([UC().getAsync("WASM_HAS_SIMD_SUPPORT"),UC().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);case 2:return t=e.sent,n=qy(t,2),r=n[0],a=n[1],e.abrupt("return",new Promise((function(e,t){var n={locateFile:function(e,t){if(e.endsWith(".worker.js")){var n=new Blob(['var Module={};function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;this.alert=threadAlert;Module["instantiateWasm"]=function(info,receiveInstance){var instance=new WebAssembly.Instance(Module["wasmModule"],info);Module["wasmModule"]=null;receiveInstance(instance);return instance.exports};function moduleLoaded(){}this.onmessage=function(e){try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance;moduleLoaded()})}else if(e.data.cmd==="objectTransfer"){Module["PThread"].receiveObjectTransfer(e.data)}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0);var max=e.data.stackBase;var top=e.data.stackBase+e.data.stackSize;Module["establishStackSpace"](top,max);Module["_emscripten_tls_init"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].setThreadStatus(Module["_pthread_self"](),1);try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(!Module["getNoExitRuntime"]())Module["PThread"].threadExit(result)}catch(ex){if(ex==="Canceled!"){Module["PThread"].threadCancel()}else if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["getNoExitRuntime"]()){}else{Module["PThread"].threadExit(ex.status)}}else{Module["PThread"].threadExit(-2);throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["PThread"].threadCancel()}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);throw ex}};if(typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string"){self={location:{href:__filename}};var onmessage=this.onmessage;var nodeWorkerThreads=require("worker_threads");global.Worker=nodeWorkerThreads.Worker;var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var nodeFS=require("fs");var nodeRead=function(filename){return nodeFS.readFileSync(filename,"utf8")};function globalEval(x){global.require=require;global.Module=Module;eval.call(null,x)}importScripts=function(f){globalEval(nodeRead(f))};postMessage=function(msg){parentPort.postMessage(msg)};if(typeof performance==="undefined"){performance={now:function(){return Date.now()}}}}'],{type:"application/javascript"});return URL.createObjectURL(n)}return e.endsWith(".wasm")?hj(r,a,null!=vj?vj:t):t+e}};xj&&(n.instantiateWasm=pj(hj(r,a,null!=vj?vj:"")));var o,i=!1;n.onAbort=function(){i||bj||(bj=!0,t({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},a&&r&&null==gj?(n.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+lj.toString()],{type:"text/javascript"}),o=lj(n)):o=dj(n),o.then((function(t){i=!0,bj=!1,t.tfjs={init:t.cwrap("init",null,[]),registerTensor:t.cwrap("register_tensor",null,["number","number","number"]),disposeData:t.cwrap("dispose_data",null,["number"]),dispose:t.cwrap("dispose",null,[])},e({wasm:t})}))})));case 7:case"end":return e.stop()}}),e)})))();case 2:return t=e.sent,n=t.wasm,e.abrupt("return",new fj(n));case 5:case"end":return e.stop()}}),e)}))),2),function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(bj)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)vj=e;else{yj=e;var n=mj.filter((function(e){return null==yj[e]}));if(n.length>0)throw new Error("There were no entries found for the following binaries: ".concat(n.join(","),". Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found."))}xj=t}
/** @license See the LICENSE file. */("//cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@".concat("3.3.0","/dist/"));var wj=Object.freeze({__proto__:null,initTensorFlow:function(){return kj.apply(this,arguments)}}),Ij=60103,Cj=60106,Ej=60107,Sj=60108,Tj=60114,Aj=60109,Nj=60110,_j=60112,Rj=60113,Oj=60120,Fj=60115,Mj=60116,Dj=60121,Bj=60122,Pj=60117,Lj=60129,Uj=60131;
/** @license React v17.0.1
	 * react-is.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */if("function"==typeof Symbol&&Symbol.for){var Vj=Symbol.for;Ij=Vj("react.element"),Cj=Vj("react.portal"),Ej=Vj("react.fragment"),Sj=Vj("react.strict_mode"),Tj=Vj("react.profiler"),Aj=Vj("react.provider"),Nj=Vj("react.context"),_j=Vj("react.forward_ref"),Rj=Vj("react.suspense"),Oj=Vj("react.suspense_list"),Fj=Vj("react.memo"),Mj=Vj("react.lazy"),Dj=Vj("react.block"),Bj=Vj("react.server.block"),Pj=Vj("react.fundamental"),Lj=Vj("react.debug_trace_mode"),Uj=Vj("react.legacy_hidden")}function Wj(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Ij:switch(e=e.type){case Ej:case Tj:case Sj:case Rj:case Oj:return e;default:switch(e=e&&e.$$typeof){case Nj:case _j:case Mj:case Fj:case Aj:return e;default:return t}}case Cj:return t}}}var zj=Aj,jj=Ij,Hj=_j,Gj=Ej,Kj=Mj,qj=Fj,Xj=Cj,Qj=Tj,Yj=Sj,$j=Rj,Zj=Nj,Jj=zj,eH=jj,tH=Hj,nH=Gj,rH=Kj,aH=qj,oH=Xj,iH=Qj,sH=Yj,uH=$j,cH=function(){return!1},lH=function(){return!1},dH=function(e){return Wj(e)===Nj},fH=function(e){return Wj(e)===Aj},pH=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Ij},hH=function(e){return Wj(e)===_j},mH=function(e){return Wj(e)===Ej},gH=function(e){return Wj(e)===Mj},vH=function(e){return Wj(e)===Fj},yH=function(e){return Wj(e)===Cj},bH=function(e){return Wj(e)===Tj},xH=function(e){return Wj(e)===Sj},kH=function(e){return Wj(e)===Rj},wH=function(e){return"string"==typeof e||"function"==typeof e||e===Ej||e===Tj||e===Lj||e===Sj||e===Rj||e===Oj||e===Uj||"object"==typeof e&&null!==e&&(e.$$typeof===Mj||e.$$typeof===Fj||e.$$typeof===Aj||e.$$typeof===Nj||e.$$typeof===_j||e.$$typeof===Pj||e.$$typeof===Dj||e[0]===Bj)},IH=Wj,CH={ContextConsumer:Zj,ContextProvider:Jj,Element:eH,ForwardRef:tH,Fragment:nH,Lazy:rH,Memo:aH,Portal:oH,Profiler:iH,StrictMode:sH,Suspense:uH,isAsyncMode:cH,isConcurrentMode:lH,isContextConsumer:dH,isContextProvider:fH,isElement:pH,isForwardRef:hH,isFragment:mH,isLazy:gH,isMemo:vH,isPortal:yH,isProfiler:bH,isStrictMode:xH,isSuspense:kH,isValidElementType:wH,typeOf:IH},EH=(i((function(e,t){})),i((function(e){e.exports=CH})));function SH(e){function t(e,r,u,c,f){for(var p,h,m,g,x,w=0,I=0,C=0,E=0,S=0,O=0,M=m=p=0,B=0,P=0,L=0,U=0,V=u.length,W=V-1,z="",j="",H="",G="";B<V;){if(h=u.charCodeAt(B),B===W&&0!==I+E+C+w&&(0!==I&&(h=47===I?10:47),E=C=w=0,V++,W++),0===I+E+C+w){if(B===W&&(0<P&&(z=z.replace(d,"")),0<z.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:z+=u.charAt(B)}h=59}switch(h){case 123:for(p=(z=z.trim()).charCodeAt(0),m=1,U=++B;B<V;){switch(h=u.charCodeAt(B)){case 123:m++;break;case 125:m--;break;case 47:switch(h=u.charCodeAt(B+1)){case 42:case 47:e:{for(M=B+1;M<W;++M)switch(u.charCodeAt(M)){case 47:if(42===h&&42===u.charCodeAt(M-1)&&B+2!==M){B=M+1;break e}break;case 10:if(47===h){B=M+1;break e}}B=M}}break;case 91:h++;case 40:h++;case 34:case 39:for(;B++<W&&u.charCodeAt(B)!==h;);}if(0===m)break;B++}switch(m=u.substring(U,B),0===p&&(p=(z=z.replace(l,"").trim()).charCodeAt(0)),p){case 64:switch(0<P&&(z=z.replace(d,"")),h=z.charCodeAt(1)){case 100:case 109:case 115:case 45:P=r;break;default:P=R}if(U=(m=t(r,P,m,h,f+1)).length,0<F&&(x=s(3,m,P=n(R,z,L),r,A,T,U,h,f,c),z=P.join(""),void 0!==x&&0===(U=(m=x.trim()).length)&&(h=0,m="")),0<U)switch(h){case 115:z=z.replace(k,i);case 100:case 109:case 45:m=z+"{"+m+"}";break;case 107:m=(z=z.replace(v,"$1 $2"))+"{"+m+"}",m=1===_||2===_&&o("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=z+m,112===c&&(j+=m,m="")}else m="";break;default:m=t(r,n(r,z,L),m,c,f+1)}H+=m,m=L=P=M=p=0,z="",h=u.charCodeAt(++B);break;case 125:case 59:if(1<(U=(z=(0<P?z.replace(d,""):z).trim()).length))switch(0===M&&(p=z.charCodeAt(0),45===p||96<p&&123>p)&&(U=(z=z.replace(" ",":")).length),0<F&&void 0!==(x=s(1,z,r,e,A,T,j.length,c,f,c))&&0===(U=(z=x.trim()).length)&&(z="\0\0"),p=z.charCodeAt(0),h=z.charCodeAt(1),p){case 0:break;case 64:if(105===h||99===h){G+=z+u.charAt(B);break}default:58!==z.charCodeAt(U-1)&&(j+=a(z,p,h,z.charCodeAt(2)))}L=P=M=p=0,z="",h=u.charCodeAt(++B)}}switch(h){case 13:case 10:47===I?I=0:0===1+p&&107!==c&&0<z.length&&(P=1,z+="\0"),0<F*D&&s(0,z,r,e,A,T,j.length,c,f,c),T=1,A++;break;case 59:case 125:if(0===I+E+C+w){T++;break}default:switch(T++,g=u.charAt(B),h){case 9:case 32:if(0===E+w+I)switch(S){case 44:case 58:case 9:case 32:g="";break;default:32!==h&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===E+I+w&&(P=L=1,g="\f"+g);break;case 108:if(0===E+I+w+N&&0<M)switch(B-M){case 2:112===S&&58===u.charCodeAt(B-3)&&(N=S);case 8:111===O&&(N=O)}break;case 58:0===E+I+w&&(M=B);break;case 44:0===I+C+E+w&&(P=1,g+="\r");break;case 34:case 39:0===I&&(E=E===h?0:0===E?h:E);break;case 91:0===E+I+C&&w++;break;case 93:0===E+I+C&&w--;break;case 41:0===E+I+w&&C--;break;case 40:if(0===E+I+w){if(0===p)switch(2*S+3*O){case 533:break;default:p=1}C++}break;case 64:0===I+C+E+w+M+m&&(m=1);break;case 42:case 47:if(!(0<E+w+C))switch(I){case 0:switch(2*h+3*u.charCodeAt(B+1)){case 235:I=47;break;case 220:U=B,I=42}break;case 42:47===h&&42===S&&U+2!==B&&(33===u.charCodeAt(U+2)&&(j+=u.substring(U,B+1)),g="",I=0)}}0===I&&(z+=g)}O=S,S=h,B++}if(0<(U=j.length)){if(P=r,0<F&&(void 0!==(x=s(2,j,P,e,A,T,U,c,f,c))&&0===(j=x).length))return G+j+H;if(j=P.join(",")+"{"+j+"}",0!=_*N){switch(2!==_||o(j,2)||(N=0),N){case 111:j=j.replace(b,":-moz-$1")+j;break;case 112:j=j.replace(y,"::-webkit-input-$1")+j.replace(y,"::-moz-$1")+j.replace(y,":-ms-input-$1")+j}N=0}}return G+j+H}function n(e,t,n){var a=t.trim().split(m);t=a;var o=a.length,i=e.length;switch(i){case 0:case 1:var s=0;for(e=0===i?"":e[0]+" ";s<o;++s)t[s]=r(e,t[s],n).trim();break;default:var u=s=0;for(t=[];s<o;++s)for(var c=0;c<i;++c)t[u++]=r(e[c]+" ",a[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function a(e,t,n,r){var i=e+";",s=2*t+3*n+4*r;if(944===s){e=i.indexOf(":",9)+1;var u=i.substring(e,i.length-1).trim();return u=i.substring(0,e).trim()+u+";",1===_||2===_&&o(u,1)?"-webkit-"+u+u:u}if(0===_||2===_&&!o(i,1))return i;switch(s){case 1015:return 97===i.charCodeAt(10)?"-webkit-"+i+i:i;case 951:return 116===i.charCodeAt(3)?"-webkit-"+i+i:i;case 963:return 110===i.charCodeAt(5)?"-webkit-"+i+i:i;case 1009:if(100!==i.charCodeAt(4))break;case 969:case 942:return"-webkit-"+i+i;case 978:return"-webkit-"+i+"-moz-"+i+i;case 1019:case 983:return"-webkit-"+i+"-moz-"+i+"-ms-"+i+i;case 883:if(45===i.charCodeAt(8))return"-webkit-"+i+i;if(0<i.indexOf("image-set(",11))return i.replace(S,"$1-webkit-$2")+i;break;case 932:if(45===i.charCodeAt(4))switch(i.charCodeAt(5)){case 103:return"-webkit-box-"+i.replace("-grow","")+"-webkit-"+i+"-ms-"+i.replace("grow","positive")+i;case 115:return"-webkit-"+i+"-ms-"+i.replace("shrink","negative")+i;case 98:return"-webkit-"+i+"-ms-"+i.replace("basis","preferred-size")+i}return"-webkit-"+i+"-ms-"+i+i;case 964:return"-webkit-"+i+"-ms-flex-"+i+i;case 1023:if(99!==i.charCodeAt(8))break;return"-webkit-box-pack"+(u=i.substring(i.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+i+"-ms-flex-pack"+u+i;case 1005:return p.test(i)?i.replace(f,":-webkit-")+i.replace(f,":-moz-")+i:i;case 1e3:switch(t=(u=i.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=i.replace(x,"tb");break;case 232:u=i.replace(x,"tb-rl");break;case 220:u=i.replace(x,"lr");break;default:return i}return"-webkit-"+i+"-ms-"+u+i;case 1017:if(-1===i.indexOf("sticky",9))break;case 975:switch(t=(i=e).length-10,s=(u=(33===i.charCodeAt(t)?i.substring(0,t):i).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:i=i.replace(u,"-webkit-"+u)+";"+i;break;case 207:case 102:i=i.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+i.replace(u,"-webkit-"+u)+";"+i.replace(u,"-ms-"+u+"box")+";"+i}return i+";";case 938:if(45===i.charCodeAt(5))switch(i.charCodeAt(6)){case 105:return u=i.replace("-items",""),"-webkit-"+i+"-webkit-box-"+u+"-ms-flex-"+u+i;case 115:return"-webkit-"+i+"-ms-flex-item-"+i.replace(I,"")+i;default:return"-webkit-"+i+"-ms-flex-line-pack"+i.replace("align-content","").replace(I,"")+i}break;case 973:case 989:if(45!==i.charCodeAt(3)||122===i.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):i.replace(u,"-webkit-"+u)+i.replace(u,"-moz-"+u.replace("fill-",""))+i;break;case 962:if(i="-webkit-"+i+(102===i.charCodeAt(5)?"-ms-"+i:"")+i,211===n+r&&105===i.charCodeAt(13)&&0<i.indexOf("transform",10))return i.substring(0,i.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+i}return i}function o(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),M(2!==t?r:r.replace(C,"$1"),n,t)}function i(e,t){var n=a(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,a,o,i,s,u,l){for(var d,f=0,p=t;f<F;++f)switch(d=O[f].call(c,e,p,n,r,a,o,i,s,u,l)){case void 0:case!1:case!0:case null:break;default:p=d}if(p!==t)return p}function u(e){return void 0!==(e=e.prefix)&&(M=null,e?"function"!=typeof e?_=1:(_=2,M=e):_=0),u}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<F){var a=s(-1,n,r,r,A,T,0,0,0,0);void 0!==a&&"string"==typeof a&&(n=a)}var o=t(R,r,n,0,0);return 0<F&&(void 0!==(a=s(-2,o,r,r,A,T,o.length,0,0,0))&&(o=a)),"",N=0,T=A=1,o}var l=/^\0+/g,d=/[\0\r\f]/g,f=/: */g,p=/zoo|gra/,h=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,k=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,I=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,S=/([^-])(image-set\()/,T=1,A=1,N=0,_=1,R=[],O=[],F=0,M=null,D=0;return c.use=function e(t){switch(t){case void 0:case null:F=O.length=0;break;default:if("function"==typeof t)O[F++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else D=0|!!t}return e},c.set=u,void 0!==e&&u(e),c}var TH={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function AH(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var NH=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,_H=AH((function(e){return NH.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),RH="function"==typeof Symbol&&Symbol.for,OH=RH?Symbol.for("react.element"):60103,FH=RH?Symbol.for("react.portal"):60106,MH=RH?Symbol.for("react.fragment"):60107,DH=RH?Symbol.for("react.strict_mode"):60108,BH=RH?Symbol.for("react.profiler"):60114,PH=RH?Symbol.for("react.provider"):60109,LH=RH?Symbol.for("react.context"):60110,UH=RH?Symbol.for("react.async_mode"):60111,VH=RH?Symbol.for("react.concurrent_mode"):60111,WH=RH?Symbol.for("react.forward_ref"):60112,zH=RH?Symbol.for("react.suspense"):60113,jH=RH?Symbol.for("react.suspense_list"):60120,HH=RH?Symbol.for("react.memo"):60115,GH=RH?Symbol.for("react.lazy"):60116,KH=RH?Symbol.for("react.block"):60121,qH=RH?Symbol.for("react.fundamental"):60117,XH=RH?Symbol.for("react.responder"):60118,QH=RH?Symbol.for("react.scope"):60119;function YH(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case OH:switch(e=e.type){case UH:case VH:case MH:case BH:case DH:case zH:return e;default:switch(e=e&&e.$$typeof){case LH:case WH:case GH:case HH:case PH:return e;default:return t}}case FH:return t}}}function $H(e){return YH(e)===VH}var ZH=UH,JH=VH,eG=LH,tG=PH,nG=OH,rG=WH,aG=MH,oG=GH,iG=HH,sG=FH,uG=BH,cG=DH,lG=zH,dG=function(e){return $H(e)||YH(e)===UH},fG=$H,pG=function(e){return YH(e)===LH},hG=function(e){return YH(e)===PH},mG=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===OH},gG=function(e){return YH(e)===WH},vG=function(e){return YH(e)===MH},yG=function(e){return YH(e)===GH},bG=function(e){return YH(e)===HH},xG=function(e){return YH(e)===FH},kG=function(e){return YH(e)===BH},wG=function(e){return YH(e)===DH},IG=function(e){return YH(e)===zH},CG=function(e){return"string"==typeof e||"function"==typeof e||e===MH||e===VH||e===BH||e===DH||e===zH||e===jH||"object"==typeof e&&null!==e&&(e.$$typeof===GH||e.$$typeof===HH||e.$$typeof===PH||e.$$typeof===LH||e.$$typeof===WH||e.$$typeof===qH||e.$$typeof===XH||e.$$typeof===QH||e.$$typeof===KH)},EG=YH,SG={AsyncMode:ZH,ConcurrentMode:JH,ContextConsumer:eG,ContextProvider:tG,Element:nG,ForwardRef:rG,Fragment:aG,Lazy:oG,Memo:iG,Portal:sG,Profiler:uG,StrictMode:cG,Suspense:lG,isAsyncMode:dG,isConcurrentMode:fG,isContextConsumer:pG,isContextProvider:hG,isElement:mG,isForwardRef:gG,isFragment:vG,isLazy:yG,isMemo:bG,isPortal:xG,isProfiler:kG,isStrictMode:wG,isSuspense:IG,isValidElementType:CG,typeOf:EG},TG=(i((function(e,t){})),i((function(e){e.exports=SG}))),AG={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},NG={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},_G={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},RG={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},OG={};function FG(e){return TG.isMemo(e)?RG:OG[e.$$typeof]||AG}OG[TG.ForwardRef]=_G,OG[TG.Memo]=RG;var MG=Object.defineProperty,DG=Object.getOwnPropertyNames,BG=Object.getOwnPropertySymbols,PG=Object.getOwnPropertyDescriptor,LG=Object.getPrototypeOf,UG=Object.prototype;function VG(e,t,n){if("string"!=typeof t){if(UG){var r=LG(t);r&&r!==UG&&VG(e,r,n)}var a=DG(t);BG&&(a=a.concat(BG(t)));for(var o=FG(e),i=FG(t),s=0;s<a.length;++s){var u=a[s];if(!(NG[u]||n&&n[u]||i&&i[u]||o&&o[u])){var c=PG(t,u);try{MG(e,u,c)}catch(e){}}}}return e}var WG=VG;function zG(){return(zG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var jG=function(e,t){for(var n=[e[0]],r=0,a=t.length;r<a;r+=1)n.push(t[r],e[r+1]);return n},HG=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!EH.typeOf(e)},GG=Object.freeze([]),KG=Object.freeze({});function qG(e){return"function"==typeof e}function XG(e){return e.displayName||e.name||"Component"}function QG(e){return e&&"string"==typeof e.styledComponentId}var YG="undefined"!=typeof process&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",$G="undefined"!=typeof window&&"HTMLElement"in window,ZG=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&("false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY)),JG={};function eK(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var tK=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,a=r;e>=a;)(a<<=1)<0&&eK(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var o=r;o<a;o++)this.groupSizes[o]=0}for(var i=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(i,t[s])&&(this.groupSizes[e]++,i++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var a=n;a<r;a++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n,o=r;o<a;o++)t+=this.tag.getRule(o)+"/*!sc*/\n";return t},e}(),nK=new Map,rK=new Map,aK=1,oK=function(e){if(nK.has(e))return nK.get(e);for(;rK.has(aK);)aK++;var t=aK++;return nK.set(e,t),rK.set(t,e),t},iK=function(e){return rK.get(e)},sK=function(e,t){nK.set(e,t),rK.set(t,e)},uK="style["+YG+'][data-styled-version="5.2.1"]',cK=new RegExp("^"+YG+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),lK=function(e,t,n){for(var r,a=n.split(","),o=0,i=a.length;o<i;o++)(r=a[o])&&e.registerName(t,r)},dK=function(e,t){for(var n=t.innerHTML.split("/*!sc*/\n"),r=[],a=0,o=n.length;a<o;a++){var i=n[a].trim();if(i){var s=i.match(cK);if(s){var u=0|parseInt(s[1],10),c=s[2];0!==u&&(sK(c,u),lK(e,c,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(i)}}},fK=function(){return"undefined"!=typeof __webpack_nonce__?__webpack_nonce__:null},pK=function(e){var t=document.head,n=e||t,r=document.createElement("style"),a=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(YG))return r}}(n),o=void 0!==a?a.nextSibling:null;r.setAttribute(YG,"active"),r.setAttribute("data-styled-version","5.2.1");var i=fK();return i&&r.setAttribute("nonce",i),n.insertBefore(r,o),r},hK=function(){function e(e){var t=this.element=pK(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var a=t[n];if(a.ownerNode===e)return a}eK(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),mK=function(){function e(e){var t=this.element=pK(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),gK=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),vK=$G,yK={isServer:!$G,useCSSOMInjection:!ZG},bK=function(){function e(e,t,n){void 0===e&&(e=KG),void 0===t&&(t={}),this.options=zG({},yK,{},e),this.gs=t,this.names=new Map(n),!this.options.isServer&&$G&&vK&&(vK=!1,function(e){for(var t=document.querySelectorAll(uK),n=0,r=t.length;n<r;n++){var a=t[n];a&&"active"!==a.getAttribute(YG)&&(dK(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return oK(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(zG({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,a=t.target,e=n?new gK(a):r?new hK(a):new mK(a),new tK(e)));var e,t,n,r,a},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(oK(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(oK(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(oK(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",a=0;a<n;a++){var o=iK(a);if(void 0!==o){var i=e.names.get(o),s=t.getGroup(a);if(void 0!==i&&0!==s.length){var u=YG+".g"+a+'[id="'+o+'"]',c="";void 0!==i&&i.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+u+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),xK=/(a)(d)/gi,kK=function(e){return String.fromCharCode(e+(e>25?39:97))};function wK(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=kK(t%52)+n;return(kK(t%52)+n).replace(xK,"$1-$2")}var IK=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},CK=function(e){return IK(5381,e)};function EK(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(qG(n)&&!QG(n))return!1}return!0}var SK=CK("5.2.1"),TK=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&EK(e),this.componentId=t,this.baseHash=IK(SK,t),this.baseStyle=n,bK.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var o=HK(this.rules,e,t,n).join(""),i=wK(IK(this.baseHash,o.length)>>>0);if(!t.hasNameForId(r,i)){var s=n(o,"."+i,void 0,r);t.insertRules(r,i,s)}a.push(i),this.staticRulesId=i}else{for(var u=this.rules.length,c=IK(this.baseHash,n.hash),l="",d=0;d<u;d++){var f=this.rules[d];if("string"==typeof f)l+=f;else if(f){var p=HK(f,e,t,n),h=Array.isArray(p)?p.join(""):p;c=IK(c,h+d),l+=h}}if(l){var m=wK(c>>>0);if(!t.hasNameForId(r,m)){var g=n(l,"."+m,void 0,r);t.insertRules(r,m,g)}a.push(m)}}return a.join(" ")},e}(),AK=/^\s*\/\/.*$/gm,NK=[":","[",".","#"];function _K(e){var t,n,r,a,o=void 0===e?KG:e,i=o.options,s=void 0===i?KG:i,u=o.plugins,c=void 0===u?GG:u,l=new SH(s),d=[],f=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,a,o,i,s,u,c,l,d){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(a[0]+r),"";default:return r+(0===d?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){d.push(e)})),p=function(e,r,o){return 0===r&&NK.includes(o[n.length])||o.match(a)?e:"."+t};function h(e,o,i,s){void 0===s&&(s="&");var u=e.replace(AK,""),c=o&&i?i+" "+o+" { "+u+" }":u;return t=s,n=o,r=new RegExp("\\"+n+"\\b","g"),a=new RegExp("(\\"+n+"\\b){2,}"),l(i||!o?"":o,c)}return l.use([].concat(c,[function(e,t,a){2===e&&a.length&&a[0].lastIndexOf(n)>0&&(a[0]=a[0].replace(r,p))},f,function(e){if(-2===e){var t=d;return d=[],t}}])),h.hash=c.length?c.reduce((function(e,t){return t.name||eK(15),IK(e,t.name)}),5381).toString():"",h}var RK=Tx.createContext(),OK=(RK.Consumer,Tx.createContext()),FK=(OK.Consumer,new bK),MK=_K();function DK(){return Tx.useContext(RK)||FK}function BK(){return Tx.useContext(OK)||MK}var PK=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=MK);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return eK(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=MK),this.name+e.hash},e}(),LK=/([A-Z])/,UK=/([A-Z])/g,VK=/^ms-/,WK=function(e){return"-"+e.toLowerCase()};function zK(e){return LK.test(e)?e.replace(UK,WK).replace(VK,"-ms-"):e}var jK=function(e){return null==e||!1===e||""===e};function HK(e,t,n,r){if(Array.isArray(e)){for(var a,o=[],i=0,s=e.length;i<s;i+=1)""!==(a=HK(e[i],t,n,r))&&(Array.isArray(a)?o.push.apply(o,a):o.push(a));return o}return jK(e)?"":QG(e)?"."+e.styledComponentId:qG(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:HK(e(t),t,n,r):e instanceof PK?n?(e.inject(n,r),e.getName(r)):e:HG(e)?function e(t,n){var r,a,o=[];for(var i in t)t.hasOwnProperty(i)&&!jK(t[i])&&(HG(t[i])?o.push.apply(o,e(t[i],i)):qG(t[i])?o.push(zK(i)+":",t[i],";"):o.push(zK(i)+": "+(r=i,(null==(a=t[i])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in TH?String(a).trim():a+"px")+";")));return n?[n+" {"].concat(o,["}"]):o}(e):e.toString();var u}function GK(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qG(e)||HG(e)?HK(jG(GG,[e].concat(n))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:HK(jG(e,n))}var KK=function(e,t,n){return void 0===n&&(n=KG),e.theme!==n.theme&&e.theme||t||n.theme},qK=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,XK=/(^-|-$)/g;function QK(e){return e.replace(qK,"-").replace(XK,"")}var YK=function(e){return wK(CK(e)>>>0)};function $K(e){return"string"==typeof e&&!0}var ZK=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},JK=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function eq(e,t,n){var r=e[n];ZK(t)&&ZK(r)?tq(r,t):e[n]=t}function tq(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,o=n;a<o.length;a++){var i=o[a];if(ZK(i))for(var s in i)JK(s)&&eq(e,i[s],s)}return e}var nq=Tx.createContext(),rq=(nq.Consumer,{});function aq(e,t,n){var r=QG(e),a=!$K(e),o=t.attrs,i=void 0===o?GG:o,s=t.componentId,u=void 0===s?function(e,t){var n="string"!=typeof e?"sc":QK(e);rq[n]=(rq[n]||0)+1;var r=n+"-"+YK("5.2.1"+n+rq[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):s,c=t.displayName,l=void 0===c?function(e){return $K(e)?"styled."+e:"Styled("+XG(e)+")"}(e):c,d=t.displayName&&t.componentId?QK(t.displayName)+"-"+t.componentId:t.componentId||u,f=r&&e.attrs?Array.prototype.concat(e.attrs,i).filter(Boolean):i,p=t.shouldForwardProp;r&&e.shouldForwardProp&&(p=t.shouldForwardProp?function(n,r){return e.shouldForwardProp(n,r)&&t.shouldForwardProp(n,r)}:e.shouldForwardProp);var h,m=new TK(n,d,r?e.componentStyle:void 0),g=m.isStatic&&0===i.length,v=function(e,t){return function(e,t,n,r){var a=e.attrs,o=e.componentStyle,i=e.defaultProps,s=e.foldedComponentIds,u=e.shouldForwardProp,c=e.styledComponentId,l=e.target,d=function(e,t,n){void 0===e&&(e=KG);var r=zG({},t,{theme:e}),a={};return n.forEach((function(e){var t,n,o,i=e;for(t in qG(i)&&(i=i(r)),i)r[t]=a[t]="className"===t?(n=a[t],o=i[t],n&&o?n+" "+o:n||o):i[t]})),[r,a]}(KK(t,Tx.useContext(nq),i)||KG,t,a),f=d[0],p=d[1],h=function(e,t,n,r){var a=DK(),o=BK();return t?e.generateAndInjectStyles(KG,a,o):e.generateAndInjectStyles(n,a,o)}(o,r,f),m=n,g=p.$as||t.$as||p.as||t.as||l,v=$K(g),y=p!==t?zG({},t,{},p):t,b={};for(var x in y)"$"!==x[0]&&"as"!==x&&("forwardedAs"===x?b.as=y[x]:(u?u(x,_H):!v||_H(x))&&(b[x]=y[x]));return t.style&&p.style!==t.style&&(b.style=zG({},t.style,{},p.style)),b.className=Array.prototype.concat(s,c,h!==c?h:null,t.className,p.className).filter(Boolean).join(" "),b.ref=m,Tx.createElement(g,b)}(h,e,t,g)};return v.displayName=l,(h=Tx.forwardRef(v)).attrs=f,h.componentStyle=m,h.displayName=l,h.shouldForwardProp=p,h.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):GG,h.styledComponentId=d,h.target=r?e.target:e,h.withComponent=function(e){var r=t.componentId,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["componentId"]),o=r&&r+"-"+($K(e)?e:QK(XG(e)));return aq(e,zG({},a,{attrs:f,componentId:o}),n)},Object.defineProperty(h,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?tq({},e.defaultProps,t):t}}),h.toString=function(){return"."+h.styledComponentId},a&&WG(h,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),h}var oq=function(e){return function e(t,n,r){if(void 0===r&&(r=KG),!EH.isValidElementType(n))return eK(1,String(n));var a=function(){return t(n,r,GK.apply(void 0,arguments))};return a.withConfig=function(a){return e(t,n,zG({},r,{},a))},a.attrs=function(a){return e(t,n,zG({},r,{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},a}(aq,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){oq[e]=oq(e)}));var iq=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=EK(e),bK.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,r){var a=r(HK(this.rules,t,n,r).join(""),""),o=this.componentId+e;n.insertRules(o,o,a)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&bK.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();function sq(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=GK.apply(void 0,[e].concat(n)),o="sc-global-"+YK(JSON.stringify(a)),i=new iq(a,o);function s(e){var t=DK(),n=BK(),r=Tx.useContext(nq),a=Tx.useRef(t.allocateGSInstance(o)).current;return Tx.useLayoutEffect((function(){return u(a,e,t,r,n),function(){return i.removeStyles(a,t)}}),[a,e,t,r,n]),null}function u(e,t,n,r,a){if(i.isStatic)i.renderStyles(e,JG,n,a);else{var o=zG({},t,{theme:KK(t,r,s.defaultProps)});i.renderStyles(e,o,n,a)}}return Tx.memo(s)}function uq(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=GK.apply(void 0,[e].concat(n)).join(""),o=YK(a);return new PK(o,a)}function cq(e){return(cq="function"==typeof Symbol&&"symbol"==Ty(Symbol.iterator)?function(e){return Ty(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Ty(e)})(e)}function lq(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function dq(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){lq(o,r,a,i,s,"next",e)}function s(e){lq(o,r,a,i,s,"throw",e)}i(void 0)}))}}function fq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hq(){return(hq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mq(Object(n),!0).forEach((function(t){pq(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vq(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function yq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||xq(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bq(e){return function(e){if(Array.isArray(e))return kq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||xq(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xq(e,t){if(e){if("string"==typeof e)return kq(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kq(e,t):void 0}}function kq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wq="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Iq(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Cq(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}function Eq(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var Sq=Cq((function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){e.exports={BROWSER_TYPES:{CHROME:"Chrome",FIREFOX:"Firefox",OPERA:"Opera",YANDEX:"Yandex",SAFARI:"Safari",INTERNET_EXPLORER:"Internet Explorer",EDGE:"Edge",CHROMIUM:"Chromium",IE:"IE",MOBILE_SAFARI:"Mobile Safari",EDGE_CHROMIUM:"Edge Chromium"},DEVICE_TYPES:{MOBILE:"mobile",TABLET:"tablet",SMART_TV:"smarttv",CONSOLE:"console",WEARABLE:"wearable",BROWSER:void 0},OS_TYPES:{IOS:"iOS",ANDROID:"Android",WINDOWS_PHONE:"Windows Phone",WINDOWS:"Windows",MAC_OS:"Mac OS"},defaultData:{isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1}}},function(e,t,n){var r,a=n(2),o=n(0),i=o.BROWSER_TYPES,s=o.OS_TYPES,u=o.DEVICE_TYPES,c=n(4),l=c.checkType,d=c.broPayload,f=c.mobilePayload,p=c.wearPayload,h=c.consolePayload,m=c.stvPayload,g=c.getNavigatorInstance,v=c.isIOS13Check,y=new a,b=y.getBrowser(),x=y.getDevice(),k=y.getEngine(),w=y.getOS(),I=y.getUA(),C=i.CHROME,E=i.CHROMIUM,S=i.IE,T=i.INTERNET_EXPLORER,A=i.OPERA,N=i.FIREFOX,_=i.SAFARI,R=i.EDGE,O=i.YANDEX,F=i.MOBILE_SAFARI,M=u.MOBILE,D=u.TABLET,B=u.SMART_TV,P=u.BROWSER,L=u.WEARABLE,U=u.CONSOLE,V=s.ANDROID,W=s.WINDOWS_PHONE,z=s.IOS,j=s.WINDOWS,H=s.MAC_OS,G=function(){return w.name===s.WINDOWS&&"10"===w.version&&"string"==typeof I&&-1!==I.indexOf("Edg/")},K=function(){return b.name===R},q=function(){return v("iPad")},X=x.type===B,Q=x.type===U,Y=x.type===L,$=b.name===F||q(),Z=b.name===E,J=function(){switch(x.type){case M:case D:return!0;default:return!1}}()||q(),ee=x.type===M,te=x.type===D||q(),ne=x.type===P,re=w.name===V,ae=w.name===W,oe=w.name===z||q(),ie=b.name===C,se=b.name===N,ue=b.name===_||b.name===F,ce=b.name===A,le=b.name===T||b.name===S,de=w.version?w.version:"none",fe=w.name?w.name:"none",pe=b.major,he=b.version,me=b.name,ge=x.vendor?x.vendor:"none",ve=x.model?x.model:"none",ye=k.name,be=k.version,xe=I,ke=K()||G(),we=b.name===O,Ie=x.type,Ce=(r=g())&&(/iPad|iPhone|iPod/.test(r.platform)||"MacIntel"===r.platform&&r.maxTouchPoints>1)&&!window.MSStream,Ee=q(),Se=v("iPhone"),Te=v("iPod"),Ae=function(){var e=g(),t=e&&e.userAgent.toLowerCase();return"string"==typeof t&&/electron/.test(t)}(),Ne=G(),_e=K(),Re=w.name===j,Oe=w.name===H,Fe=l(x.type);e.exports={deviceDetect:function(){var e=Fe.isBrowser,t=Fe.isMobile,n=Fe.isTablet,r=Fe.isSmartTV,a=Fe.isConsole,o=Fe.isWearable;return e?d(e,b,k,w,I):r?m(r,k,w,I):a?h(a,k,w,I):t||n?f(Fe,x,w,I):o?p(o,k,w,I):void 0},isSmartTV:X,isConsole:Q,isWearable:Y,isMobileSafari:$,isChromium:Z,isMobile:J,isMobileOnly:ee,isTablet:te,isBrowser:ne,isAndroid:re,isWinPhone:ae,isIOS:oe,isChrome:ie,isFirefox:se,isSafari:ue,isOpera:ce,isIE:le,osVersion:de,osName:fe,fullBrowserVersion:pe,browserVersion:he,browserName:me,mobileVendor:ge,mobileModel:ve,engineName:ye,engineVersion:be,getUA:xe,isEdge:ke,isYandex:we,deviceType:Ie,isIOS13:Ce,isIPad13:Ee,isIPhone13:Se,isIPod13:Te,isElectron:Ae,isEdgeChromium:Ne,isLegacyEdge:_e,isWindows:Re,isMacOs:Oe}},function(e,t,n){var r;
/*!
	     * UAParser.js v0.7.18
	     * Lightweight JavaScript-based User-Agent string parser
	     * https://github.com/faisalman/ua-parser-js
	     *
	     * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
	     * Dual licensed under GPLv2 or MIT
	     */!function(a,o){var i="function",s="undefined",u="object",c="model",l="name",d="type",f="vendor",p="version",h="architecture",m="console",g="mobile",v="tablet",y="smarttv",b="wearable",x={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},k={rgx:function(e,t){for(var n,r,a,s,c,l,d=0;d<t.length&&!c;){var f=t[d],p=t[d+1];for(n=r=0;n<f.length&&!c;)if(c=f[n++].exec(e))for(a=0;a<p.length;a++)l=c[++r],Ty(s=p[a])===u&&s.length>0?2==s.length?Ty(s[1])==i?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3==s.length?Ty(s[1])!==i||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):o:this[s[0]]=l?s[1].call(this,l,s[2]):o:4==s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):o):this[s]=l||o;d+=2}},str:function(e,t){for(var n in t)if(Ty(t[n])===u&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(x.has(t[n][r],e))return"?"===n?o:n}else if(x.has(t[n],e))return"?"===n?o:n;return e}},w={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},I={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[l,p],[/(opios)[\/\s]+([\w\.]+)/i],[[l,"Opera Mini"],p],[/\s(opr)\/([\w\.]+)/i],[[l,"Opera"],p],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[l,p],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[l,"IE"],p],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[l,"Edge"],p],[/(yabrowser)\/([\w\.]+)/i],[[l,"Yandex"],p],[/(puffin)\/([\w\.]+)/i],[[l,"Puffin"],p],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[l,"UCBrowser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],p],[/(micromessenger)\/([\w\.]+)/i],[[l,"WeChat"],p],[/(qqbrowserlite)\/([\w\.]+)/i],[l,p],[/(QQ)\/([\d\.]+)/i],[l,p],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[l,p],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[l,p],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[l,p],[/(MetaSr)[\/\s]?([\w\.]+)/i],[l],[/(LBBROWSER)/i],[l],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[p,[l,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[p,[l,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[l,/(.+)/,"$1 WebView"],p],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[l,/(.+(?:g|us))(.+)/,"$1 $2"],p],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[p,[l,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[l,p],[/(dolfin)\/([\w\.]+)/i],[[l,"Dolphin"],p],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[l,"Chrome"],p],[/(coast)\/([\w\.]+)/i],[[l,"Opera Coast"],p],[/fxios\/([\w\.-]+)/i],[p,[l,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[p,l],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[l,"GSA"],p],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[l,[p,k.str,w.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[l,"Netscape"],p],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[l,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,x.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[h,/ower/,"",x.lowerize]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[h,x.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[c,f,[d,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[c,[f,"Apple"],[d,v]],[/(apple\s{0,1}tv)/i],[[c,"Apple TV"],[f,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[f,c,[d,v]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[c,[f,"Amazon"],[d,v]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[c,k.str,w.device.amazon.model],[f,"Amazon"],[d,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[c,f,[d,g]],[/\((ip[honed|\s\w*]+);/i],[c,[f,"Apple"],[d,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[f,c,[d,g]],[/\(bb10;\s(\w+)/i],[c,[f,"BlackBerry"],[d,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[c,[f,"Asus"],[d,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[f,"Sony"],[c,"Xperia Tablet"],[d,v]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[c,[f,"Sony"],[d,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[f,c,[d,m]],[/android.+;\s(shield)\sbuild/i],[c,[f,"Nvidia"],[d,m]],[/(playstation\s[34portablevi]+)/i],[c,[f,"Sony"],[d,m]],[/(sprint\s(\w+))/i],[[f,k.str,w.device.sprint.vendor],[c,k.str,w.device.sprint.model],[d,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[f,c,[d,v]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[f,[c,/_/g," "],[d,g]],[/(nexus\s9)/i],[c,[f,"HTC"],[d,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[c,[f,"Huawei"],[d,g]],[/(microsoft);\s(lumia[\s\w]+)/i],[f,c,[d,g]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[c,[f,"Microsoft"],[d,m]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[f,"Microsoft"],[d,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[c,[f,"Motorola"],[d,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[c,[f,"Motorola"],[d,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[f,x.trim],[c,x.trim],[d,y]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[f,"Samsung"],[d,y]],[/\(dtv[\);].+(aquos)/i],[c,[f,"Sharp"],[d,y]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[f,"Samsung"],c,[d,v]],[/smart-tv.+(samsung)/i],[f,[d,y],c],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[f,"Samsung"],c,[d,g]],[/sie-(\w*)/i],[c,[f,"Siemens"],[d,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[f,"Nokia"],c,[d,g]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[c,[f,"Acer"],[d,v]],[/android.+([vl]k\-?\d{3})\s+build/i],[c,[f,"LG"],[d,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[f,"LG"],c,[d,v]],[/(lg) netcast\.tv/i],[f,c,[d,y]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[c,[f,"LG"],[d,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[c,[f,"Lenovo"],[d,v]],[/linux;.+((jolla));/i],[f,c,[d,g]],[/((pebble))app\/[\d\.]+\s/i],[f,c,[d,b]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[f,c,[d,g]],[/crkey/i],[[c,"Chromecast"],[f,"Google"]],[/android.+;\s(glass)\s\d/i],[c,[f,"Google"],[d,b]],[/android.+;\s(pixel c)\s/i],[c,[f,"Google"],[d,v]],[/android.+;\s(pixel xl|pixel)\s/i],[c,[f,"Google"],[d,g]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[c,/_/g," "],[f,"Xiaomi"],[d,g]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[c,/_/g," "],[f,"Xiaomi"],[d,v]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[c,[f,"Meizu"],[d,v]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[c,[f,"OnePlus"],[d,g]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[c,[f,"RCA"],[d,v]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[c,[f,"Dell"],[d,v]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[c,[f,"Verizon"],[d,v]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[f,"Barnes & Noble"],c,[d,v]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[c,[f,"NuVision"],[d,v]],[/android.+;\s(k88)\sbuild/i],[c,[f,"ZTE"],[d,v]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[c,[f,"Swiss"],[d,g]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[c,[f,"Swiss"],[d,v]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[c,[f,"Zeki"],[d,v]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[f,"Dragon Touch"],c,[d,v]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[c,[f,"Insignia"],[d,v]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[c,[f,"NextBook"],[d,v]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[f,"Voice"],c,[d,g]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[f,"LvTel"],c,[d,g]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[c,[f,"Envizen"],[d,v]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[f,c,[d,v]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[c,[f,"MachSpeed"],[d,v]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[f,c,[d,v]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[c,[f,"Rotor"],[d,v]],[/android.+(KS(.+))\s+build/i],[c,[f,"Amazon"],[d,v]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[f,c,[d,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[d,x.lowerize],f,c],[/(android[\w\.\s\-]{0,9});.+build/i],[c,[f,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[l,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,p],[/rv\:([\w\.]{1,9}).+(gecko)/i],[p,l]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[l,[p,k.str,w.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[p,k.str,w.os.windows.version]],[/\((bb)(10);/i],[[l,"BlackBerry"],p],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[l,p],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[l,"Symbian"],p],[/\((series40);/i],[l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"],p],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[l,p],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],p],[/(sunos)\s?([\w\.\d]*)/i],[[l,"Solaris"],p],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[l,p],[/(haiku)\s(\w+)/i],[l,p],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[p,/_/g,"."],[l,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[l,"Mac OS"],[p,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[l,p]]},C=function e(t,n){if("object"==Ty(t)&&(n=t,t=o),!(this instanceof e))return new e(t,n).getResult();var r=t||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),i=n?x.extend(I,n):I;return this.getBrowser=function(){var e={name:o,version:o};return k.rgx.call(e,r,i.browser),e.major=x.major(e.version),e},this.getCPU=function(){var e={architecture:o};return k.rgx.call(e,r,i.cpu),e},this.getDevice=function(){var e={vendor:o,model:o,type:o};return k.rgx.call(e,r,i.device),e},this.getEngine=function(){var e={name:o,version:o};return k.rgx.call(e,r,i.engine),e},this.getOS=function(){var e={name:o,version:o};return k.rgx.call(e,r,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};C.VERSION="0.7.18",C.BROWSER={NAME:l,MAJOR:"major",VERSION:p},C.CPU={ARCHITECTURE:h},C.DEVICE={MODEL:c,VENDOR:f,TYPE:d,CONSOLE:m,MOBILE:g,SMARTTV:y,TABLET:v,WEARABLE:b,EMBEDDED:"embedded"},C.ENGINE={NAME:l,VERSION:p},C.OS={NAME:l,VERSION:p},Ty(t)!==s?(Ty(e)!==s&&e.exports&&(t=e.exports=C),t.UAParser=C):n(3)?(r=function(){return C}.call(t,n,t,e))===o||(e.exports=r):a&&(a.UAParser=C);var E=a&&(a.jQuery||a.Zepto);if(Ty(E)!==s){var S=new C;E.ua=S.getResult(),E.ua.get=function(){return S.getUA()},E.ua.set=function(e){S.setUA(e);var t=S.getResult();for(var n in t)E.ua[n]=t[n]}}}("object"==("undefined"==typeof window?"undefined":Ty(window))?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),o=a.DEVICE_TYPES,i=a.defaultData,s=t.getNavigatorInstance=function(){return!("undefined"==typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},u=t.isIOS13Check=function(e){var t=s();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)};e.exports={checkType:function(e){switch(e){case o.MOBILE:return{isMobile:!0};case o.TABLET:return{isTablet:!0};case o.SMART_TV:return{isSmartTV:!0};case o.CONSOLE:return{isConsole:!0};case o.WEARABLE:return{isWearable:!0};case o.BROWSER:return{isBrowser:!0};default:return i}},broPayload:function(e,t,n,r,a){return{isBrowser:e,browserMajorVersion:t.major,browserFullVersion:t.version,browserName:t.name,engineName:n.name||!1,engineVersion:n.version,osName:r.name,osVersion:r.version,userAgent:a}},mobilePayload:function(e,t,n,a){return r({},e,{vendor:t.vendor,model:t.model,os:n.name,osVersion:n.version,ua:a})},stvPayload:function(e,t,n,r){return{isSmartTV:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},consolePayload:function(e,t,n,r){return{isConsole:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},wearPayload:function(e,t,n,r){return{isWearable:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},getNavigatorInstance:s,isIOS13Check:u}}])})),Tq=Iq(Sq),Aq=Object.freeze(Object.assign(Object.create(null),Sq,{default:Tq}));function Nq(){return"function"==typeof navigator.enumerateDevices?navigator.enumerateDevices():"object"===cq(navigator.mediaDevices)&&"function"==typeof navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices():new Promise((function(e,t){try{if(null==window.MediaStreamTrack||null==window.MediaStreamTrack.getSources)throw new Error;window.MediaStreamTrack.getSources((function(t){e(t.filter((function(e){return"video"===e.kind.toLowerCase()||"videoinput"===e.kind.toLowerCase()})).map((function(e){return{deviceId:null!=e.deviceId?e.deviceId:"",groupId:e.groupId,kind:"videoinput",label:e.label,toJSON:function(){return this}}})))}))}catch(e){return t(e)}}))}function _q(){var e=vq(["\n  padding: 0.625rem 0 0.9375rem;\n  margin: 0;\n  text-align: left;\n  width: 100%;\n  cursor: pointer;\n  font-size: 0.82rem;\n  transition: all 550ms ease-in-out;\n\n  &:hover {\n    opacity: 0.8;\n  }\n"]);return _q=function(){return e},e}function Rq(){var e=vq(["\n  list-style: none;\n  padding: 0;\n"]);return Rq=function(){return e},e}function Oq(){var e=vq(["\n  padding: 0 0 0.3125rem;\n  margin: 0.25rem auto;\n  font-size: 0.8rem;\n"]);return Oq=function(){return e},e}function Fq(){var e=vq(["\n  margin: 0.25rem auto;\n  padding: 0;\n  font-weight: 600;\n  font-size: 1.2rem;\n"]);return Fq=function(){return e},e}function Mq(){var e=vq(["\n  text-align: center;\n  padding: 0.625rem 0;\n  border-bottom: 1px solid #dddddd;\n"]);return Mq=function(){return e},e}function Dq(){var e=vq(["\n  width: 260px;\n  margin: 1.25rem;\n  padding: 0.625rem 1.875rem;\n  background: #ffffff;\n  border-radius: 0.3125rem;\n  box-shadow: 2px 2px 14px rgba(0, 0, 0, 0.15);\n"]);return Dq=function(){return e},e}function Bq(){var e=vq(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: ",";\n"]);return Bq=function(){return e},e}function Pq(){var e=vq(["\n  z-index: ",";\n  position: absolute;\n  top: 40px;\n  color: red;\n"]);return Pq=function(){return e},e}function Lq(){var e=vq(["\n  z-index: ",";\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  width: 20px;\n"]);return Lq=function(){return e},e}function Uq(){var e=vq(["\n  cursor: pointer;\n  text-align: center;\n  width: 50px;\n  img {\n    width: 100%;\n  }\n"]);return Uq=function(){return e},e}function Vq(){var e=vq(["\n  width: 100%;\n  ","\n"]);return Vq=function(){return e},e}function Wq(){var e=vq(["\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: #000;\n  display: flex;\n  justify-content: center;\n  z-index: ",";\n  ","\n"]);return Wq=function(){return e},e}var zq=_k.Errors,jq=1e3,Hq=oq.div(Wq(),1e3,(function(e){return e.checkCameraMode&&"opacity: 0;"})),Gq=oq.video(Vq(),(function(e){return e.flipHorizontal&&"\n     transform: scaleX(-1);\n  "})),Kq=oq.div(Uq()),qq=oq(Kq)(Lq(),1100),Xq=oq.div(Pq(),1020),Qq=oq.div(Bq(),1030),Yq=oq.section(Dq()),$q=oq.header(Mq()),Zq=oq.h2(Fq()),Jq=oq.p(Oq()),eX=oq.ul(Rq()),tX=oq.li(_q()),nX=Tx.createRef(),rX=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices;var e=navigator.mozGetUserMedia||navigator.webkitGetUserMedia;return e?{getUserMedia:function(t){return new Promise((function(n,r){e.call(navigator,t,n,r)}))}}:null}();function aX(e){var t=e.checkCameraMode,n=e.frontCamera,r=e.onClose,a=e.children,o=e.onVideoPlayed,i=e.flipHorizontal,s=e.videoSettings,u=e.refVideo,c=e.onError,l=Mk.useSDKSettings().lang,d=Pk.useAsset("ic_close.png"),f=yq(Tx.useState(""),2),p=f[0],h=f[1],m=yq(Tx.useState([]),2),g=m[0],v=m[1],y=yq(Tx.useState(!1),2),b=y[0],x=y[1],k=Tx.useRef(!1),w=Tx.useCallback((function(){u.current.srcObject instanceof MediaStream&&(u.current.srcObject.getTracks().forEach((function(e){return e.stop()})),u.current.srcObject=null)}),[u]),I=Tx.useCallback(function(){var e=dq(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{},r=Sq.isMobile?Sq.isIOS?{width:{ideal:1460},aspectRatio:{ideal:window.innerHeight/window.innerWidth}}:{width:{ideal:1650},aspectRatio:{ideal:window.innerHeight/window.innerWidth}}:{height:{ideal:9999}},e.prev=2,e.next=5,rX.getUserMedia({audio:!1,video:gq(gq({},t?{deviceId:t}:{facingMode:n?"user":"environment"}),s||r)});case 5:return(a=e.sent)||(h(zq.not_supported.msg[l]),c(zq.not_supported)),e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(2),"NotAllowedError"===e.t0.name?(h(zq.no_permission.msg[l]),c(zq.no_permission)):(x(!0),h(e.t0.message),c({code:e.t0.name||e.t0.code}));case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),[n,s,l,c]),C=Tx.useCallback(function(){var e=dq(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=u.current).oncanplaythrough=function(){n.play();var e=window.innerWidth,t=window.innerHeight,r=Iw.analyzeVideoAndWindowSizes(n),a=r.lostX,i=void 0===a?0:a,s=r.lostY,u=void 0===s?0:s,c=Math.min(e,Math.floor(e-2*i)),l=Math.min(t,Math.floor(t-2*u));o&&o({clientWidth:e,clientHeight:t,videoAreaWidth:c,videoAreaHeight:l,lostX:i,lostY:u})},e.next=4,I(t);case 4:(r=e.sent)&&(n.srcObject=r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,I,o]);Tx.useEffect((function(){function e(){return(e=dq(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nq();case 3:t=e.sent,n=t.filter((function(e){return e.deviceId&&"videoinput"===e.kind})),v(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}b&&!k.current&&(k.current=!0,function(){e.apply(this,arguments)}())}),[b]),Tx.useEffect((function(){function e(){return(e=dq(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return e.next=4,Nq();case 4:t=e.sent,(n=t.filter((function(e){return"videoinput"===e.kind&&e.label.includes("0")}))).length>0&&(r=n[0].deviceId,w(),C(r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t=u.current;return!rX||Sq.browserName&&["facebook"].includes(Sq.browserName.toLowerCase())?(h(zq.not_supported.msg[l]),c(zq.not_supported)):t&&(Sq.isAndroid&&!1===n?function(){e.apply(this,arguments)}():C()),function(){w()}}),[u,l,n,C,w,c]);var E=Tx.useCallback((function(){w(),r&&r()}),[r,w]);return Tx.createElement(Hq,{checkCameraMode:t},b&&null!=g&&g.length?Tx.createElement(Qq,null,Tx.createElement(Yq,null,Tx.createElement($q,null,Tx.createElement(Zq,null,"Không thể mở camera mặc định"),Tx.createElement(Jq,null,"Vui lòng thử chọn camera khác trong danh sách dưới đây")),Tx.createElement(eX,null,g.map((function(e,t){return Tx.createElement(tX,{key:e.deviceId,onClick:function(){h(""),w(),x(!1),C(e.deviceId)}},e.label?e.label:"Camera ".concat(t+1))}))))):null,p?Tx.createElement(Xq,null,p):null,Tx.createElement(Gq,{ref:u,playsInline:!0,muted:!0,flipHorizontal:i}),a,Tx.createElement(qq,{onClick:E},Tx.createElement("img",{src:d,alt:""})))}aX.propTypes={checkCameraMode:Tk.bool,frontCamera:Tk.bool,onClose:Tk.func,onError:Tk.func,onVideoPlayed:Tk.func,children:Tk.node,flipHorizontal:Tk.bool,videoSettings:Tk.object,refVideo:Tk.object},aX.defaultProps={checkCameraMode:!1,frontCamera:!0,onClose:null,onError:function(){},onVideoPlayed:null,children:null,flipHorizontal:!1,videoSettings:null,refVideo:null};var oX=Tx.forwardRef((function(e,t){return Tx.createElement(aX,hq({},e,{refVideo:t||nX}))}));function iX(){var e=vq(["\n  position: relative;\n"]);return iX=function(){return e},e}function sX(){var e=vq(["\n  width: 100%;\n  height: 100%;\n  td {\n    text-align: center;\n    vertical-align: middle;\n    padding: 0;\n    border: 0;\n  }\n  border-spacing: 0px;\n  table-layout: auto;\n"]);return sX=function(){return e},e}var uX=oq.table(sX()),cX=oq.div(iX()),lX=Array.from(Array(3).keys()),dX=Array.from(Array(3).keys());function fX(e){var t=e.children,n=e.x,r=e.y,a=e.width,o=e.height,i=e.className,s=e.surroundStyle;return Tx.createElement(uX,{className:i},lX.map((function(e,i){return Tx.createElement("tr",{key:e,style:{height:0===i?r:"auto"}},dX.map((function(e,r){var u=1===i&&1===r,c="auto";return u?c=a:0===r&&(c=n),Tx.createElement("td",{key:e,style:gq({width:c,height:u?o:"auto"},u?{}:s)},u?Tx.createElement(cX,{style:{width:c,height:o}},t):null)})))})))}function pX(){var e=vq(["\n  background: transparent;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: ",";\n"]);return pX=function(){return e},e}fX.propTypes={children:Tk.node,x:Tk.string,y:Tk.string,width:Tk.string,height:Tk.string,className:Tk.string,surroundStyle:Tk.object},fX.defaultProps={children:null,x:"auto",y:"auto",width:"auto",height:"auto",className:"",surroundStyle:{}};var hX=oq(fX)(pX(),1010);function mX(e){var t=e.className;return Tx.createElement("svg",{className:t,width:"38px",height:"32px",viewBox:"0 0 24 21"},Tx.createElement("title",null,"FA45C15C-1E21-4D7B-9585-07FB9F999CB8"),Tx.createElement("desc",null,"Created with sketchtool."),Tx.createElement("g",{id:"Web-demo",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Tx.createElement("g",{id:"step1",transform:"translate(-950.000000, -380.000000)",fill:"currentColor",fillRule:"nonzero"},Tx.createElement("g",{id:"Group",transform:"translate(950.000000, 380.000000)"},Tx.createElement("g",{id:"Group-2"},Tx.createElement("g",{id:"camera"},Tx.createElement("path",{d:"M21,3 L17,3 L15,0 L9,0 L7,3 L3,3 C1.34314575,3 0,4.34314575 0,6 L0,18 C0,19.6568542 1.34314575,21 3,21 L21,21 C22.6568542,21 24,19.6568542 24,18 L24,6 C24,4.34314575 22.6568542,3 21,3 Z M12,17 C9.23857625,17 7,14.7614237 7,12 C7,9.23857625 9.23857625,7 12,7 C14.7614237,7 17,9.23857625 17,12 C17,14.7614237 14.7614237,17 12,17 L12,17 Z",id:"Shape"})))))))}mX.propTypes={className:Tk.string},mX.defaultProps={className:""};var gX=function(e){var t=Ty(e);return null!=e&&("object"==t||"function"==t)},vX="object"==Ty(wq)&&wq&&wq.Object===Object&&wq,yX="object"==("undefined"==typeof self?"undefined":Ty(self))&&self&&self.Object===Object&&self,bX=vX||yX||Function("return this")(),xX=function(){return bX.Date.now()},kX=bX.Symbol,wX=Object.prototype,IX=wX.hasOwnProperty,CX=wX.toString,EX=kX?kX.toStringTag:void 0,SX=function(e){var t=IX.call(e,EX),n=e[EX];try{e[EX]=void 0;var r=!0}catch(e){}var a=CX.call(e);return r&&(t?e[EX]=n:delete e[EX]),a},TX=Object.prototype.toString,AX=function(e){return TX.call(e)},NX=kX?kX.toStringTag:void 0,_X=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":NX&&NX in Object(e)?SX(e):AX(e)},RX=function(e){return null!=e&&"object"==Ty(e)},OX=function(e){return"symbol"==Ty(e)||RX(e)&&"[object Symbol]"==_X(e)},FX=/^\s+|\s+$/g,MX=/^[-+]0x[0-9a-f]+$/i,DX=/^0b[01]+$/i,BX=/^0o[0-7]+$/i,PX=parseInt,LX=function(e){if("number"==typeof e)return e;if(OX(e))return NaN;if(gX(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=gX(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(FX,"");var n=DX.test(e);return n||BX.test(e)?PX(e.slice(2),n?2:8):MX.test(e)?NaN:+e},UX=Math.max,VX=Math.min,WX=function(e,t,n){var r,a,o,i,s,u,c=0,l=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=a;return r=a=void 0,c=t,i=e.apply(o,n)}function h(e){return c=e,s=setTimeout(g,t),l?p(e):i}function m(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-c>=o}function g(){var e=xX();if(m(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-u);return d?VX(n,o-(e-c)):n}(e))}function v(e){return s=void 0,f&&r?p(e):(r=a=void 0,i)}function y(){var e=xX(),n=m(e);if(r=arguments,a=this,u=e,n){if(void 0===s)return h(u);if(d)return clearTimeout(s),s=setTimeout(g,t),p(u)}return void 0===s&&(s=setTimeout(g,t)),i}return t=LX(t)||0,gX(n)&&(l=!!n.leading,o=(d="maxWait"in n)?UX(LX(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=a=s=void 0},y.flush=function(){return void 0===s?i:v(xX())},y},zX=function(){function e(t,n){_y(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return Oy(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),jX=function(){function e(){_y(this,e)}return Oy(e,[{key:"refCount",value:function(e){return HX("refCount")}},{key:"incRef",value:function(e){return HX("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return HX("time")}},{key:"read",value:function(e){return HX("read")}},{key:"readSync",value:function(e){return HX("readSync")}},{key:"numDataIds",value:function(){return HX("numDataIds")}},{key:"disposeData",value:function(e,t){return HX("disposeData")}},{key:"write",value:function(e,t,n){return HX("write")}},{key:"move",value:function(e,t,n,r,a){return HX("move")}},{key:"memory",value:function(){return HX("memory")}},{key:"floatPrecision",value:function(){return HX("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return HX("dispose")}}]),e}();function HX(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen"))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function GX(e,t,n){return Math.max(e,Math.min(t,n))}function KX(e){return e%2==0?e:e+1}function qX(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function XX(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";qX(ZX(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function QX(e){qX(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function YX(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||cQ(e)&&!n)for(var r=0;r<e.length;++r)YX(e[r],t,n);else t.push(e);return t}function $X(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function ZX(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function JX(e){return e%1==0}function eQ(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function tQ(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function nQ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var o=0;!function i(){if(e())r();else{o++;var s=t(o);null!=n&&o>=n?a():setTimeout(i,s)}}()}))}function rQ(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when there are 0 elements"));if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got ".concat(t," / ").concat(n));var o=e.slice();return o[r]=t/n,o}function aQ(e,t){var n=t.length;return qX((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but got axis ").concat(e)})),qX(e.every((function(e){return JX(e)})),(function(){return"All values in axis param must be integers but got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function oQ(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:aQ(t,e).sort(),i=0,s=0;s<e.length;++s){if(null!=o){if(o[i]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==o[i]||o[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function iQ(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function sQ(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function uQ(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function cQ(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function lQ(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function dQ(e){return"string"==typeof e||e instanceof String}function fQ(e){return Array.isArray(e)?fQ(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":"number"==typeof e?"float32":dQ(e)?"string":function(e){return"boolean"==typeof e}(e)?"bool":"float32"}function pQ(e){return!!(e&&e.constructor&&e.call&&e.apply)}function hQ(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function mQ(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function gQ(e,t,n){var r=new Array;if(1===t.length)for(var a=t[0],o=0;o<a;o++)r[o]=n[e+o];else for(var i=t[0],s=t.slice(1),u=s.reduce((function(e,t){return e*t})),c=0;c<i;c++)r[c]=gQ(e+c*u,s,n);return r}function vQ(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length,"."));return gQ(0,e,t)}function yQ(e,t){for(var n=bQ(e,t),r=0;r<n.length;r++)n[r]=1;return n}function bQ(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function xQ(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return vQ(e,new Float32Array(n));if("int32"===t)return vQ(e,new Int32Array(n));if("bool"===t)return vQ(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function kQ(e){e.forEach((function(t){qX(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape [".concat(e,"].")}))}))}function wQ(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function IQ(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function CQ(e){return e&&e.then&&"function"==typeof e.then}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var EQ=function(){function e(t){_y(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}var t;return Oy(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&console.warn("Platform ".concat(this.platformName," has already been set. Overwriting the platform with ").concat(t,".")),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:(t=Ny(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t in this.flags,e.t0){e.next=5;break}return e.next=4,this.evaluateFlag(t);case 4:this.flags[t]=e.sent;case 5:return e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(CQ(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. Please use getAsync() instead."));return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t=function(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}(this.global.location.search);"tfjsflags"in t&&t.tfjsflags.split(",").forEach((function(t){var n=qy(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}},{key:"features",get:function(){return this.flags}}]),e}();function SQ(){return AQ}var TQ,AQ=null;function NQ(){if(null==TQ){var e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof global)e=global;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}TQ=e}return TQ}function _Q(e,t){var n=function(){var e=NQ();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var RQ="Add",OQ=_Q("kernelRegistry",(function(){return new Map})),FQ=_Q("gradRegistry",(function(){return new Map}));function MQ(e,t){var n=LQ(e,t);return OQ.get(n)}function DQ(e){return FQ.get(e)}function BQ(e){for(var t=OQ.entries(),n=[];;){var r=t.next(),a=r.done,o=r.value;if(a)break;var i=qy(o,2),s=i[0],u=i[1];qy(s.split("_"),1)[0]===e&&n.push(u)}return n}function PQ(e){var t=e.kernelName,n=e.backendName,r=LQ(t,n);OQ.has(r)&&console.warn("The kernel '".concat(t,"' for backend '").concat(n,"' is already registered")),OQ.set(r,e)}function LQ(e,t){return"".concat(t,"_").concat(e)}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function UQ(e,t){return"string"===t?zQ(e):VQ([e],t)}function VQ(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=YX(e)),SQ().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function WQ(){return SQ().platform.now()}function zQ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",SQ().platform.encode(e,t)}function jQ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",SQ().platform.decode(e,t)
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var HQ=function(){function e(t,n){_y(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new KQ)}return Oy(e,[{key:"profileKernel",value:function(e,t,n){var r,a,o=function(){r=n()},i=WQ();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();var s,u=rb(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(e){u.e(e)}finally{u.f()}a=Promise.resolve({kernelMs:WQ()-i})}if(SQ().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(t){var n=r[t];n.data().then((function(t){GQ(t,n.dtype,e)}))},l=0;l<r.length;l++)c(l);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,o=e.inputs,i=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,i]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],o,r[2])}))}))}}]),e}();function GQ(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}return!1}var KQ=function(){function e(){_y(this,e)}return Oy(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,o){var i="number"==typeof r?tQ("".concat(r,"ms"),9):r.error,s=tQ(e,25),u=t.rank,c=t.size,l=tQ(t.shape.toString(),14),d="";for(var f in a){var p=a[f];if(null!=p){var h=p.shape||t.shape,m=h.length;d+="".concat(f,": ").concat(m,"D ").concat(m>0?h:""," ")}}console.log("%c".concat(s,"\t%c").concat(i,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function qQ(e,t,n,r){var a=mQ(t),o=function(e,t,n,r){var a=$X(t),o=r[r.length-1],i=new Array(o).fill(0),s=t.length,u="complex64"===n?$Q(e):e;if(s>1)for(var c=0;c<a/o;c++)for(var l=c*o,d=0;d<o;d++)i[d]=Math.max(i[d],XQ(u[l+d],0,n).length);return i}(e,t,n,a),i=t.length,s=YQ(e,t,n,a,o),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(i)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function XQ(e,t,n){return tQ(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ").concat(parseFloat(e[1].toFixed(7)),"j"):dQ(e)?"'".concat(e,"'"):"bool"===n?QQ(e):parseFloat(e.toFixed(7)).toString(),t)}function QQ(e){return 0===e?"false":"true"}function YQ(e,t,n,r,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i="complex64"===n?2:1,s=t[0],u=t.length;if(0===u)return"complex64"===n?[XQ($Q(e)[0],0,n)]:"bool"===n?[QQ(e[0])]:[e[0].toString()];if(1===u){if(s>20){var c=3*i,l=Array.from(e.slice(0,c)),d=Array.from(e.slice((s-3)*i,s*i));return"complex64"===n&&(l=$Q(l),d=$Q(d)),["["+l.map((function(e,t){return XQ(e,a[t],n)})).join(", ")+", ..., "+d.map((function(e,t){return XQ(e,a[s-3+t],n)})).join(", ")+"]"]}return["["+("complex64"===n?$Q(e):Array.from(e)).map((function(e,t){return XQ(e,a[t],n)})).join(", ")+"]"]}var f=t.slice(1),p=r.slice(1),h=r[0]*i,m=[];if(s>20){for(var g=0;g<3;g++){var v=g*h,y=v+h;m.push.apply(m,Xy(YQ(e.slice(v,y),f,n,p,a,!1)))}m.push("...");for(var b=s-3;b<s;b++){var x=b*h,k=x+h;m.push.apply(m,Xy(YQ(e.slice(x,k),f,n,p,a,b===s-1)))}}else for(var w=0;w<s;w++){var I=w*h,C=I+h;m.push.apply(m,Xy(YQ(e.slice(I,C),f,n,p,a,w===s-1)))}var E=2===u?",":"";m[0]="["+m[0]+E;for(var S=1;S<m.length-1;S++)m[S]=" "+m[S]+E;for(var T=",\n",A=2;A<u;A++)T+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(o?"":T),m}function $Q(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ZQ=function(){function e(t,n,r){var a=this;if(_y(this,e),this.dtype=n,this.shape=t.slice(),this.size=$X(t),null!=r){var o=r.length;qX(o===this.size,(function(){return"Length of values '".concat(o,"' does not match the size inferred by the shape '").concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||sQ(n,this.size),this.strides=mQ(t)}return Oy(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),qX(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must match the rank (").concat(t.rank,")")}));var o=this.locToIndex(r);this.values[o]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,o=t;a<o.length;a++){var i=o[a];if(i<0||i>=this.shape[r]){var s="Requested out of range element at ".concat(t,".   Buffer shape=").concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"toTensor",value:function(){return JQ().makeTensor(this.values,this.shape,this.dtype)}},{key:"rank",get:function(){return this.shape.length}}]),e}(),JQ=null,eY=null,tY=function(){function e(t,n,r,a){_y(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=$X(t),this.strides=mQ(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}var t,n,r,a;return Oy(e,[{key:"buffer",value:(a=Ny(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",eY.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"bufferSync",value:function(){return eY.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:(r=Ny(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",vQ(this.shape,t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"arraySync",value:function(){return vQ(this.shape,this.dataSync())}},{key:"data",value:(n=Ny(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=JQ().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return jQ(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])}))),function(){return n.apply(this,arguments)})},{key:"dataSync",value:function(){this.throwIfDisposed();var e=JQ().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return jQ(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:(t=Ny(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,JQ().read(this.dataId);case 3:return t=e.sent,e.abrupt("return","string"===this.dtype?t:new Uint8Array(t.buffer));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dispose",value:function(){this.isDisposed||(JQ().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return eY.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),eY.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return qQ(this.dataSync(),this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),eY.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),JQ().makeVariable(this,e,t,n)}},{key:"rank",get:function(){return this.shape.length}},{key:"isDisposed",get:function(){return this.isDisposedInternal}}]),e}();Object.defineProperty(tY,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),_Q("Tensor",(function(){return tY}));var nY,rY,aY,oY,iY,sY=function(e){Dy(n,e);var t=Hy(n);function n(e,r,a,o){var i;return _y(this,n),(i=t.call(this,e.shape,e.dtype,e.dataId,o)).trainable=r,i.name=a,i}return Oy(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and previous value (").concat(this.dtype,") must match"));if(!ZX(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and previous value (").concat(this.shape,") must match"));JQ().disposeTensor(this),this.dataId=e.dataId,JQ().incRef(this,null)}},{key:"dispose",value:function(){JQ().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(tY);
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */Object.defineProperty(sY,Symbol.hasInstance,{value:function(e){return e instanceof tY&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(nY||(nY={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(rY||(rY={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(aY||(aY={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(oY||(oY={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(iY||(iY={}));var uY={float32:oY,int32:rY,bool:aY,complex64:iY};function cY(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return uY[e][t]}function lY(e){return cY(e,"int32")}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function dY(e,t){if(e.dtype===t.dtype)return[e,t];var n=cY(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function fY(e){var t=[];return pY(e,t,new Set),t}function pY(e,t,n){if(null!=e)if(e instanceof tY)t.push(e);else if(r=e,Array.isArray(r)||"object"==Ty(r)){var r,a=e;
/**
	   * @license
	   * Copyright 2018 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */for(var o in a){var i=a[o];n.has(i)||(n.add(i),pY(i,t,n))}}}function hY(e){return null!=e.kernelName}var mY=function(){function e(){_y(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return Oy(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),gY=function(){function e(t){_y(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new mY}var t,n,r,a;return Oy(e,[{key:"ready",value:(a=Ny(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=17;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=14;break}return e.next=13,this.setBackend(r);case 13:return e.abrupt("return",void e.sent);case 14:n++,e.next=6;break;case 17:throw new Error("Could not initialize any backends, all backend initializations failed.");case 18:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(console.warn("".concat(e," backend was already registered. Reusing existing backend factory.")),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:(r=Ny(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=14;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=11;break}return e.next=8,r;case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=r;case 12:if(e.t0){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",(this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new HQ(this.backendInstance),!0));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setupRegisteredKernels",value:function(){var e=this;BQ(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;BQ(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof jX||"function"!=typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,o=r.then((function(n){return!(a<t.pendingBackendInitId||(t.registry[e]=n,t.pendingBackendInit=null,0))})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend ".concat(e," failed")),console.warn(n.stack||n.message)),!1}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}catch(n){return console.warn("Initialization of backend ".concat(e," failed")),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,o=r.asyncInit;if(o||a)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=yY.runKernel("Identity",{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e};return yY.runKernel("Cast",t,{dtype:"float32"})}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==MQ(e,this.backendName))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-o;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak (").concat(i," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,o=[],i=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=hY(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(hY(e)){var l=e.kernelName,d=e.inputs,f=e.attrs;null==this.backendName&&this.backend;var p=MQ(l,this.backendName);qX(null!=p,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=p.kernelFunc({inputs:d,attrs:f,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(i){var s=a.getTensorsForGradient(l,d,n);o=a.saveTensorsForBackwardMode(s)}return n}}else{var h=e.forwardFunc,m=function(e){i&&(o=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return h(a.backend,m)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var g,v=e.inputs,y=e.attrs,b=hY(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(g=a.profiler.profileKernel(c,v,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(g),t=g.outputs):t=n()})),i&&this.addTapeNode(c,v,t,b,o,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(v).map((function(e){return null!=v[e]?v[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=DQ(e);if(null!=r){var a,o=r.inputsToSave||[],i=r.outputsToSave||[];r.saveAllInputs?(qX(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=o.map((function(e){return t[e]}));var s=n.filter((function(e,t){return i[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&dQ(e[0])&&(a=e.map((function(e){return zQ(e)})));var o=r.write(a,t,n),i=new tY(t,n,o,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){var s=this.state.tensorInfo.get(o),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return i}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a=new tY(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new sY(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*lQ(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof sY||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*lQ(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:(n=Ny(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=5,t();case 5:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Xy(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=rb(this.state.activeProfile.kernels),e.prev=11,a.s();case 13:if((o=a.n()).done){e.next=23;break}return i=o.value,e.next=17,i.kernelTimeMs;case 17:return i.kernelTimeMs=e.sent,e.next=20,i.extraInfo;case 20:i.extraInfo=e.sent;case 21:e.next=13;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(11),a.e(e.t0);case 28:return e.prev=28,a.f(),e.finish(28);case 31:return e.abrupt("return",this.state.activeProfile);case 32:case"end":return e.stop()}}),e,this,[[11,25,28,31]])}))),function(e){return n.apply(this,arguments)})},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,o){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=DQ(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=bQ(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,o)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=fY(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||r.has(o.id)||o.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(qX(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));qX(o instanceof tY,(function(){return"The result y returned by f() must be a tensor."}));var i=function(e,t,n){for(var r={},a={},o=0;o<t.length;o++)r[t[o].id]=!0;for(var i=0;i<e.length;i++){var s=e[i],u=s.inputs;for(var c in u){for(var l=u[c],d=!1,f=0;f<t.length;f++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var p={};p[n.id]=!0;for(var h={},m=e.length-1;m>=0;m--)for(var g=e[m],v=g.inputs,y=0;y<g.outputs.length;y++)if(p[g.outputs[y].id]){for(var b in v)p[v[b].id]=!0,h[g.id]=!0;break}for(var x=[],k=0;k<e.length;k++){var w=e[k];if(a[w.id]&&h[w.id]){var I={};for(var C in w.inputs){var E=w.inputs[C];r[E.id]&&(I[C]=E)}var S=Object.assign({},w);S.inputs=I,S.outputs=w.outputs,x.push(S)}}return x}(this.state.activeTape,t,o);if(!a&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?function(e){var t=yQ($X(e),"float32");return yY.makeTensor(t,e,"float32")}(o.shape):n,function(e,t,n,a){for(var o=function(n){var o=t[n],i=[];if(o.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for ".concat(o.kernelName,"."));var s=o.gradient(i),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". Available gradients found: ").concat(Object.keys(s),"."));var n=function(e){return r.tidy(e)}((function(){return s[t]()}));if("float32"!==n.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ").concat(t," must have 'float32' dtype, but has '").concat(n.dtype,"'"));var i=o.inputs[t];if(!ZX(n.shape,i.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input '").concat(t,"' has shape '").concat(n.shape,"', which does not match the shape of the input '").concat(i.shape,"'"));if(null==e[i.id])e[i.id]=n;else{var u=e[i.id];e[i.id]=a(u,n),u.dispose()}};for(var c in o.inputs)u(c)},i=t.length-1;i>=0;i--)o(i)}
/**
	         * @license
	         * Copyright 2018 Google LLC. All Rights Reserved.
	         * Licensed under the Apache License, Version 2.0 (the "License");
	         * you may not use this file except in compliance with the License.
	         * You may obtain a copy of the License at
	         *
	         * http://www.apache.org/licenses/LICENSE-2.0
	         *
	         * Unless required by applicable law or agreed to in writing, software
	         * distributed under the License is distributed on an "AS IS" BASIS,
	         * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	         * See the License for the specific language governing permissions and
	         * limitations under the License.
	         * =============================================================================
	         */(e,i,0,bY);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=rb(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(e){n.e(e)}finally{n.f()}})),r.state.activeTape=null),{value:o,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return qX(pQ(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o;qX(r.every((function(e){return e instanceof tY})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};return r.forEach((function(e,t){i[t]=e})),t.runKernelFunc({forwardFunc:function(t,n){return qX((o=e.apply(void 0,r.concat([n]))).value instanceof tY,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),qX(pQ(o.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),o.value},backwardsFunc:function(e,t){var n=o.gradFunc(e,t),a=Array.isArray(n)?n:[n];qX(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),qX(a.every((function(e){return e instanceof tY})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return a.forEach((function(e,t){i[t]=function(){return e}})),i},inputs:i})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"time",value:(t=Ny(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=WQ(),e.next=3,this.backend.time(t);case 3:return r=e.sent,e.abrupt("return",(r.wallMs=WQ()-n,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new mY,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));this.setBackend(t)}return this.backendInstance}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}}]),e}();function vY(){var e,t=NQ();if(null==t._tfengine){var n=new EQ(t);t._tfengine=new gY(n)}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
return e=t._tfengine.ENV,AQ=e,JQ=function(){return t._tfengine},t._tfengine}gY.nextTensorId=0,gY.nextVariableId=0;var yY=vY();function bY(e,t){var n={a:e,b:t};return yY.runKernel(RQ,n)}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function xY(){if("undefined"!=typeof navigator&&null!=navigator){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function kY(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var wY=SQ();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function IY(e,t){var n=e;if(cQ(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||cQ(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&SQ().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&CY(e,r,[]),r}function CY(e,t,n){if(n=n||[],Array.isArray(e)||cQ(e)){qX(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, but is an array of ").concat(e.length," elements")})),qX(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," elements, but has ").concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)CY(e[a],r,n.concat(a))}else qX(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, but should be an array/TypedArray of ").concat(t[0]," elements")}))}function EY(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must be ").concat(e," tensor, but got ").concat(t," tensor"))}}function SY(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof tY)return EY(r,e.dtype,t,n),e;var a=fQ(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),EY(r,a,t,n),null==e||!cQ(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var o=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a Tensor or TensorLike, but got '").concat(o,"'"))}var i=IY(e,a);cQ(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?VQ(e,a):YX(e,[],!0);return yY.makeTensor(s,i,a)}function TY(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a `Tensor[]` or `TensorLike[]`"));return e.map((function(e,a){return SY(e,"".concat(t,"[").concat(a,"]"),n,r)}))}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function AY(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with ".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var a=function(){yY.startScope(n);try{var e=r.apply(void 0,arguments);return CQ(e)&&console.error("Cannot return a Promise inside of tidy."),yY.endScope(e),e}catch(e){throw yY.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}wY.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),wY.registerFlag("IS_BROWSER",(function(){return kY()})),wY.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),wY.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),wY.registerFlag("PROD",(function(){return!1})),wY.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return wY.getBool("DEBUG")})),wY.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),wY.registerFlag("IS_TEST",(function(){return!1})),wY.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),wY.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1}));var NY=AY({complex_:function(e,t){var n=SY(e,"real","complex"),r=SY(t,"imag","complex");XX(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", must match in call to tf.complex()."));var a={real:n,imag:r};return yY.runKernel("Complex",a)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function _Y(e,t,n,r){if(null==r&&(r=fQ(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!cQ(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){kQ(t);var a=$X(t),o=$X(n);qX(a===o,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ").concat(a," values but has ").concat(o)}));for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==$X(t.slice(i));qX(n[i]===t[i]||!u,(function(){return"Error creating a new Tensor. Inferred shape (".concat(n,") does not match the provided shape (").concat(t,"). ")}))}}return cQ(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?VQ(e,r):YX(e,[],!0),yY.makeTensor(e,t,r)
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function RY(e,t,n){return _Y(e,t,IY(e,n),n)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var OY={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},FY="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function MY(e){return FY?Buffer.byteLength(e):new Blob([e]).size}function DY(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function BY(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:MY(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:MY(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function PY(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0==(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|(n+=947912704)},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),o=new Uint32Array(a),i=0;i<r.length;i++){var s=r[i],u=e[n[s>>10]+(1023&s)]+t[s>>10];o[i]=u}return new Float32Array(a)}}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var LY=function(){function e(){_y(this,e),this.saveRouters=[],this.loadRouters=[]}return Oy(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}();function UY(){if(!SQ().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function VY(e){var t=e.result;t.createObjectStore("models_store",{keyPath:"modelPath"}),t.createObjectStore("model_info_store",{keyPath:"modelPath"})}var WY=function(){function e(t){if(_y(this,e),this.indexedDB=UY(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}var t,n;return Oy(e,[{key:"save",value:(n=Ny(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=Ny(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return VY(a)},a.onsuccess=function(){var o=a.result;if(null==t){var i=o.transaction("models_store","readonly"),s=i.objectStore("models_store").get(n.modelPath);s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' in IndexedDB.")));e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},i.oncomplete=function(){return o.close()}}else{var u,c=BY(t),l=o.transaction("model_info_store","readwrite"),d=l.objectStore("model_info_store"),f=d.put({modelPath:n.modelPath,modelArtifactsInfo:c});f.onsuccess=function(){var a=(u=o.transaction("models_store","readwrite")).objectStore("models_store").put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(d=l.objectStore("model_info_store")).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(a.error)},t.onerror=function(e){return o.close(),r(a.error)}}},f.onerror=function(e){return o.close(),r(f.error)},l.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();WY.URL_SCHEME="indexeddb://";var zY=function(e){return SQ().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(WY.URL_SCHEME)?(t=e.slice(WY.URL_SCHEME.length),new WY(t)):null;var t};LY.registerSaveRouter(zY),LY.registerLoadRouter(zY);var jY=function(){function e(){_y(this,e),this.indexedDB=UY()}var t,n;return Oy(e,[{key:"listModels",value:(n=Ny(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return VY(r)},r.onsuccess=function(){var t=r.result,a=t.transaction("model_info_store","readonly"),o=a.objectStore("model_info_store").getAll();o.onsuccess=function(){var t,n={},r=rb(o.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(e){r.e(e)}finally{r.f()}e(n)},o.onerror=function(e){return t.close(),n(o.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"removeModel",value:(t=Ny(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(t=(n=t).startsWith(WY.URL_SCHEME)?n.slice(WY.URL_SCHEME.length):n,new Promise((function(e,n){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return VY(a)},a.onsuccess=function(){var r,o=a.result,i=o.transaction("model_info_store","readwrite"),s=i.objectStore("model_info_store"),u=s.get(t);u.onsuccess=function(){if(null==u.result)return o.close(),n(new Error("Cannot find model with path '".concat(t,"' in IndexedDB.")));var a=s.delete(t),i=function(){var a=(r=o.transaction("models_store","readwrite")).objectStore("models_store").delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return n(u.error)}};a.onsuccess=i,a.onerror=function(e){return i(),o.close(),n(u.error)}},u.onerror=function(e){return o.close(),n(u.error)},i.oncomplete=function(){null==r?o.close():r.oncomplete=function(){return o.close()}}},a.onerror=function(e){return n(a.error)}}))));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),HY="tensorflowjs_models",GY="info",KY="model_topology",qY="weight_specs",XY="weight_data",QY="model_metadata";
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function YY(e){return{info:[HY,e,GY].join("/"),topology:[HY,e,KY].join("/"),weightSpecs:[HY,e,qY].join("/"),weightData:[HY,e,XY].join("/"),modelMetadata:[HY,e,QY].join("/")}}function $Y(e){var t=e.split("/");if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join("/")}var ZY=function(){function e(t){if(_y(this,e),!SQ().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=YY(this.modelPath)}var t,n;return Oy(e,[{key:"save",value:(n=Ny(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=BY(t),e.prev=3,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(FY)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(t.weightData)),o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},e.abrupt("return",(null!=t.signature&&(o.signature=t.signature),null!=t.userDefinedMetadata&&(o.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(o.modelInitializer=t.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:a}));case 9:throw e.prev=9,e.t0=e.catch(3),this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=").concat(a.modelTopologyBytes,", weightSpecsBytes=").concat(a.weightSpecsBytes,", weightDataBytes=").concat(a.weightDataBytes,"."));case 12:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=Ny(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=8;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' is missing."));case 8:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=12;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' are missing."));case 12:if(n.weightSpecs=a,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(o),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,null!=i.signature&&(n.signature=i.signature),null!=i.userDefinedMetadata&&(n.userDefinedMetadata=i.userDefinedMetadata),null!=i.modelInitializer&&(n.modelInitializer=i.modelInitializer)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=18;break}throw new Error("In local storage, the binary weight values of model '".concat(this.modelPath,"' are missing."));case 18:return e.abrupt("return",(n.weightData=function(e){if(FY){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(s),n));case 19:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();ZY.URL_SCHEME="localstorage://";var JY=function(e){return SQ().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ZY.URL_SCHEME)?(t=e.slice(ZY.URL_SCHEME.length),new ZY(t)):null;var t};LY.registerSaveRouter(JY),LY.registerLoadRouter(JY);var e$=function(){function e(){_y(this,e),qX(SQ().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),qX("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}var t,n;return Oy(e,[{key:"listModels",value:(n=Ny(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=HY+"/",r="/"+GY,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(n)&&o.endsWith(r)&&(t[$Y(o)]=JSON.parse(this.LS.getItem(o)));return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"removeModel",value:(t=Ny(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=YY(t=(n=t).startsWith(ZY.URL_SCHEME)?n.slice(ZY.URL_SCHEME.length):n),null!=this.LS.getItem(r.info)){e.next=3;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 3:return a=JSON.parse(this.LS.getItem(r.info)),e.abrupt("return",(this.LS.removeItem(r.info),this.LS.removeItem(r.topology),this.LS.removeItem(r.weightSpecs),this.LS.removeItem(r.weightData),a));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),t$=function(){function e(){_y(this,e),this.managers={}}return Oy(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){qX(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith("://")&&(t=t.slice(0,t.indexOf("://"))),qX(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();qX(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}(),n$=function(){function e(){_y(this,e)}return Oy(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */if(SQ().get("IS_BROWSER")){SQ().setPlatform("browser",new n$);try{t$.registerManager(ZY.URL_SCHEME,new e$)}catch(Rx){}try{t$.registerManager(WY.URL_SCHEME,new jY)}catch(Rx){}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var r$,a$=function(){return require("node-fetch")},o$=function(){function e(){_y(this,e),this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return Oy(e,[{key:"fetch",value:function(e,t){return null!=SQ().global.fetch?SQ().global.fetch(e,t):(null==r$&&(r$=a$()),r$(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function i$(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",kQ(e),new ZQ(e,t,n)
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}SQ().get("IS_NODE")&&SQ().setPlatform("node",new o$);var s$=AY({cast_:function(e,t){var n=SY(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return yY.runKernel("Cast",r,a)}}),u$=AY({clone_:function(e){var t={x:SY(e,"x","clone","string_or_numeric")};return yY.runKernel("Identity",t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function c$(e,t,n,r){!function(e){qX(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){qX(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction ".concat(e)})),qX(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction ".concat(t)})),qX(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction ".concat(e," and endFraction ").concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(o){return o.then((function(o){var i=n+ ++a/e.length*(r-n);return t(i),o})),o})))}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
vY(),eY={buffer:i$,cast:s$,clone:u$,print:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};var l$=function(){function e(t,n){if(_y(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(qX("function"==typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=SQ().platform.fetch,qX(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&qX(2===t.length,(function(){return"URL paths for http must have a length of 2, (actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}var t,n,r;return Oy(e,[{key:"save",value:(r=Ny(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},null!=t.signature&&(a.signature=t.signature),null!=t.userDefinedMetadata&&(a.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(a.modelInitializer=t.modelInitializer),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=8,this.fetch(this.path,n);case 8:if(!(o=e.sent).ok){e.next=11;break}return e.abrupt("return",{modelArtifactsInfo:BY(t),responses:[o]});case 11:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status ".concat(o.status,"."));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"load",value:(n=Ny(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s,u,c,l,d,f,p,h,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ").concat(t.status,". Please verify this URL points to the model JSON of the model to load."));case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 15:if(a=n.modelTopology,o=n.weightsManifest,i=n.generatedBy,s=n.convertedBy,u=n.format,c=n.signature,l=n.userDefinedMetadata,null!=a||null!=o){e.next=18;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model topology or manifest for weights."));case 18:if(null==o){e.next=25;break}return e.next=21,this.loadWeights(o);case 21:p=e.sent,h=qy(p,2),d=h[0],f=h[1];case 25:return m={modelTopology:a,weightSpecs:d,weightData:f,generatedBy:i,convertedBy:s,format:u},null!=c&&(m.signature=c),null!=l&&(m.userDefinedMetadata=l),g=n.modelInitializer,e.abrupt("return",(g&&(m.modelInitializer=g),m));case 29:case"end":return e.stop()}}),e,this,[[5,11]])}))),function(){return n.apply(this,arguments)})},{key:"loadWeights",value:(t=Ny(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,f,p,h,m,g,v,y,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(n),a=qy(r,2),o=a[0],i=a[1],s=this.weightPathPrefix||o,u=[],c=rb(t);try{for(c.s();!(l=c.n()).done;)d=l.value,u.push.apply(u,Xy(d.weights))}catch(e){c.e(e)}finally{c.f()}f=[],p=[],h=rb(t);try{for(h.s();!(m=h.n()).done;){g=m.value,v=rb(g.paths);try{for(v.s();!(y=v.n()).done;)b=y.value,null!=this.weightUrlConverter?p.push(this.weightUrlConverter(b)):f.push(s+b+i)}catch(e){v.e(e)}finally{v.f()}}}catch(e){h.e(e)}finally{h.f()}if(e.t0=this.weightUrlConverter,!e.t0){e.next=16;break}return e.t1=f.push,e.t2=f,e.t3=Xy,e.next=13,Promise.all(p);case 13:e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.t1.apply.call(e.t1,e.t2,e.t5);case 16:return e.t6=u,e.t7=DY,e.next=20,function(){var e=Ny(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?SQ().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),null!=n.onProgress){e.next=9;break}return e.next=6,Promise.all(a);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,c$(a,n.onProgress,0,.5);case 11:e.t0=e.sent;case 12:if(o=e.t0.map((function(e){return e.arrayBuffer()})),null!=n.onProgress){e.next=19;break}return e.next=16,Promise.all(o);case 16:e.t1=e.sent,e.next=22;break;case 19:return e.next=21,c$(o,n.onProgress,.5,1);case 21:e.t1=e.sent;case 22:return e.abrupt("return",e.t1);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()
/**
	                 * @license
	                 * Copyright 2018 Google LLC. All Rights Reserved.
	                 * Licensed under the Apache License, Version 2.0 (the "License");
	                 * you may not use this file except in compliance with the License.
	                 * You may obtain a copy of the License at
	                 *
	                 * http://www.apache.org/licenses/LICENSE-2.0
	                 *
	                 * Unless required by applicable law or agreed to in writing, software
	                 * distributed under the License is distributed on an "AS IS" BASIS,
	                 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	                 * See the License for the specific language governing permissions and
	                 * limitations under the License.
	                 * =============================================================================
	                 */(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 20:return e.t8=e.sent,e.t9=(0,e.t7)(e.t8),e.abrupt("return",[e.t6,e.t9]);case 23:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function d$(e){return null!=e.match(l$.URL_SCHEME_REGEX)}l$.URL_SCHEME_REGEX=/^https?:\/\//;var f$=function(e,t){if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return d$(e)})):d$(e))?p$(e,t):null};function p$(e,t){return new l$(e,t)}function h$(e,t){return p$(e,t)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */LY.registerSaveRouter(f$),LY.registerLoadRouter(f$);var m$,g$=AY({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=SY(e,"a","matMul"),o=SY(t,"b","matMul"),i=dY(a,o),s=qy(i,2),u={a:a=s[0],b:o=s[1]},c={transposeA:n,transposeB:r};return yY.runKernel("BatchMatMul",u,c)}}),v$=AY({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a={indices:SY(e,"indices","oneHot","int32")},o={depth:t,onValue:n,offValue:r};return yY.runKernel("OneHot",a,o)}}),y$=AY({transpose_:function(e,t){var n=SY(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),qX(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," must match length of perm ").concat(t,".")})),t.forEach((function(e){qX(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var r={x:n},a={perm:t};return yY.runKernel("Transpose",r,a)}}),b$=AY({fromPixels_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,o=!1,i=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ".concat(e.constructor.name));s=!0}if(a){var u=2;if(a&&e.readyState<u)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=MQ("FromPixels",yY.backendName)){var c={pixels:e},l={numChannels:t};return yY.runKernel("FromPixels",c,l)}var d,f,p=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],h=qy(p,2),m=h[0],g=h[1];if(i?d=e.getContext("2d").getImageData(0,0,m,g).data:r||n?d=e.data:(o||a||s)&&(null==m$&&(m$=document.createElement("canvas").getContext("2d")),m$.canvas.width=m,m$.canvas.height=g,m$.drawImage(e,0,0,m,g),d=m$.getImageData(0,0,m,g).data),4===t)f=new Int32Array(d);else{var v=m*g;f=new Int32Array(v*t);for(var y=0;y<v;y++)for(var b=0;b<t;++b)f[y*t+b]=d[4*y+b]}return function(e,t,n){if(QX(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=IY(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return _Y(e,t,r,n)}(f,[g,m,t],"int32")}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function x$(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: ".concat(t.shape[r-1]," vs. ").concat(n));if(0===$X(e.shape))throw new Error("Requested more than 0 entries, but input is empty. Input shape: ".concat(e.shape,"."));for(var a=t.shape,o=a[a.length-1],i=1,s=0;s<a.length-1;++s)i*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,d=o;d<n;++d)l*=u[d],c.push(u[d]);var f=[].concat(Xy(mQ(e.shape).map((function(e){return e/l}))),[1]).slice(0,o);return[c,i,l,f]}function k$(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ".concat(n.shape,", indices.shape: ").concat(t.shape,", shape: ").concat(e,", sliceDim: ").concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(o+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(o+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+" update.rank != "+(a+e.length-r));for(var i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(t.shape[i],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(o+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function w$(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}k$(n,t,e)}function I$(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,o=n.length,i=1,s=a;s<o;++s)i*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:$X(t.shape)/u,sliceSize:i,strides:[].concat(Xy(mQ(n.slice(0,a))),[1]),outputSize:$X(n)}}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function C$(e,t,n){var r=e.shape.length;qX(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must match the rank of the array (").concat(r,").")})),qX(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must match the rank of the array (").concat(r,").")}));for(var a=function(a){qX(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] (").concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},o=0;o<r;++o)a(o)}function E$(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function S$(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function T$(e,t,n,r){for(var a=Xy(e),o=a.length;o<r.length;o++)a.push(1);for(var i=0;i<n;i++)0===i?a[t]=1:(a.splice(t,0,1),a.pop());return a}function A$(e,t,n){return n<=e?n:n-(t-1)}function N$(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function _$(e,t,n,r,a,o,i,s,u){var c=e.length,l=new Array(c),d=new Array(c),f=new Array(c);if(t.length&&n>0){var p=t[0],h=n+1;l=R$(i,p,h,r,e),d=O$(s,p,h,a,e),f=T$(o,p,h,e)}else for(var m=0;m<c;m++)l[m]=M$(i,r,o,e,m,u),d[m]=D$(s,a,o,e,m,u),f[m]=F$(o,m,u);return{begin:l,end:d,strides:f}}function R$(e,t,n,r,a){for(var o=Xy(a),i=N$(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=0;else{var u=A$(t,n,s),c=r[u];e&1<<u&&(c=0),o[s]=c}return o}function O$(e,t,n,r,a){for(var o=Xy(a),i=N$(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{var u=A$(t,n,s),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),o[s]=c}for(var l=0;l<o.length;l++){var d=a[l];o[l]<0&&(o[l]+=d),o[l]=GX(0,o[l],a[l])}return o}function F$(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function M$(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=GX(0,i,u-1)}function D$(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=s>0?GX(0,i,u):GX(-1,i,u-1)}function B$(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function P$(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function L$(e,t,n){var r,a,o=e.shape.length;return(r="number"==typeof t?[t].concat(Xy(new Array(o-1).fill(0))):t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice()).forEach((function(e){qX(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(o).fill(-1):"number"==typeof n?[n].concat(Xy(new Array(o-1).fill(-1))):n.length<o?n.concat(new Array(o-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(qX(-1===t,(function(){return"Negative size values should be exactly -1 but got ".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function U$(e,t,n,r,a,o,i,s,u){var c=t.slice(),l=n.slice(),d=r;null==r&&(d=new Array(c.length));var f=E$(i);if(f.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==i&&0!==s)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==i&&0!==u)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var p=e.length-c.length,h=E$(s),m=e.slice();h.forEach((function(e){c[e]=0,l[e]=1,m.splice(e,0,1)}));var g=_$(m,f,p,c,l,d,a,o,i),v=g.begin,y=g.end,b=g.strides;c=v,l=y,d=b;var x=E$(u);x.forEach((function(e){l[e]=c[e]+1,d[e]=1}));var k=S$(c,l,d),w=k.filter((function(e,t){return-1===x.indexOf(t)}));return{nonStrided:d.every((function(e){return 1===e})),$begin:c,$end:l,$strides:d,size:k,newShape:m,outShape:w}}var V$=Object.freeze({__proto__:null,assertParamsValid:C$,maskToAxes:E$,computeOutShape:S$,stridesWithElidedDims:T$,getNormalizedAxes:_$,startIndicesWithElidedDims:R$,stopIndicesWithElidedDims:O$,stridesForAxis:F$,startForAxis:M$,stopForAxis:D$,isSliceContinous:B$,computeFlatOffset:P$,parseSliceParams:L$,sliceInfo:U$});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function W$(){return yY}function z$(e,t){return yY.tidy(e,t)}function j$(e){return yY.keep(e)}function H$(e){return yY.setBackend(e)}function G$(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return yY.registerBackend(e,t,n)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var K$=AY({add_:function(e,t){var n=SY(e,"a","add"),r=SY(t,"b","add"),a=qy(dY(n,r),2),o={a:n=a[0],b:r=a[1]};return yY.runKernel(RQ,o)}}),q$=AY({floorDiv_:function(e,t){var n=SY(e,"a","floorDiv"),r=SY(t,"b","floorDiv"),a=qy(dY(n,r),2),o={a:n=a[0],b:r=a[1]};return yY.runKernel("FloorDiv",o)}}),X$=AY({div_:function(e,t){var n,r=SY(e,"a","div"),a=SY(t,"b","div");if(r=(n=qy(dY(r,a),2))[0],a=n[1],"int32"===r.dtype&&"int32"===a.dtype)return q$(r,a);var o={a:r,b:a};return yY.runKernel("RealDiv",o,{})}}),Q$=AY({mul_:function(e,t){var n=SY(e,"a","mul"),r=SY(t,"b","mul"),a=qy(dY(n,r),2),o={a:n=a[0],b:r=a[1]};return yY.runKernel("Multiply",o)}}),Y$=AY({abs_:function(e){var t=SY(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return yY.runKernel("ComplexAbs",n)}var r={x:t};return yY.runKernel("Abs",r)}}),$$=AY({acos_:function(e){var t={x:SY(e,"x","acos")};return yY.runKernel("Acos",t)}}),Z$=AY({acosh_:function(e){var t={x:SY(e,"x","acosh")};return yY.runKernel("Acosh",t)}}),J$=AY({addN_:function(e){qX(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),qX(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got ".concat(e.length)}));var t=e.map((function(e,t){return SY(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!ZX(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return yY.runKernel("AddN",r)}}),eZ=AY({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:SY(e,"x","all","bool")},a={axis:t,keepDims:n};return yY.runKernel("All",r,a)}}),tZ=AY({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:SY(e,"x","any","bool")},a={axis:t,keepDims:n};return yY.runKernel("Any",r,a)}}),nZ=AY({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:SY(e,"x","argMax")},r={axis:t};return yY.runKernel("ArgMax",n,r)}}),rZ=AY({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:SY(e,"x","argMin")},r={axis:t};return yY.runKernel("ArgMin",n,r)}}),aZ=AY({asin_:function(e){var t={x:SY(e,"x","asin")};return yY.runKernel("Asin",t)}}),oZ=AY({asinh_:function(e){var t={x:SY(e,"x","asinh")};return yY.runKernel("Asinh",t)}}),iZ=AY({atan_:function(e){var t={x:SY(e,"x","atan")};return yY.runKernel("Atan",t)}}),sZ=AY({atan2_:function(e,t){var n=SY(e,"a","atan2"),r=SY(t,"b","atan2"),a=qy(dY(n,r),2),o={a:n=a[0],b:r=a[1]};return yY.runKernel("Atan2",o)}}),uZ=AY({atanh_:function(e){var t={x:SY(e,"x","atanh")};return yY.runKernel("Atanh",t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function cZ(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0;return fZ(e,[].concat(Xy(t),[e[3]]),n,o,r,null,null,kZ(a))}function lZ(e,t,n,r,a,o){var i,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=mZ(t),c=qy(u,2),l=c[0],d=c[1];if("channelsLast"===s)i=[l,d,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));i=[l,d,e[1],e[1]]}return fZ(e,i,n,r,a,o,!1,s)}function dZ(e,t,n,r,a,o){var i,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=gZ(t),l=qy(c,3),d=l[0],f=l[1],p=l[2];if("NDHWC"===u)s="channelsLast",i=[d,f,p,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",i=[d,f,p,e[1],e[1]]}return pZ(e,i,n,r,a,!1,s,o)}function fZ(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,d=-1;if("channelsLast"===s){var f=qy(e,4);u=f[0],c=f[1],l=f[2],d=f[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var p=qy(e,4);u=p[0],d=p[1],c=p[2],l=p[3]}var h,m=qy(t,4),g=m[0],v=m[1],y=m[3],b=mZ(n),x=qy(b,2),k=x[0],w=x[1],I=mZ(r),C=qy(I,2),E=C[0],S=C[1],T=vZ(g,E),A=vZ(v,S),N=function(e,t,n,r,a,o,i,s,u){var c,l,d;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=hZ(e,t,n));var o=e[1];return[yZ((e[0]-t+2*r)/n+1,a),yZ((o-t+2*r)/n+1,a)]}([t,n],o,r,e,s);l=f[0],d=f[1]}else if("same"===e){l=Math.ceil(t/r),d=Math.ceil(n/a);var p=Math.max(0,(l-1)*r+o-t),h=Math.max(0,(d-1)*a+i-n),m=Math.floor(p/2),g=p-m,v=Math.floor(h/2);c={top:m,bottom:g,left:v,right:h-v,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-o+1)/r),d=Math.ceil((n-i+1)/a);else{if("object"!=Ty(e))throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],k="channelsLast"===u?e[2][1]:e[3][1];c={top:y,bottom:b,left:x,right:k,type:0===y&&0===b&&0===x&&0===k?"VALID":"EXPLICIT"},l=yZ((t-o+y+b)/r+1,s),d=yZ((n-i+x+k)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:d}}(a,c,l,k,w,T,A,o,s),_=N.padInfo,R=N.outHeight,O=N.outWidth,F=i?y*d:y;return"channelsFirst"===s?h=[u,F,R,O]:"channelsLast"===s&&(h=[u,R,O,F]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:d,outHeight:R,outWidth:O,outChannels:F,padInfo:_,strideHeight:k,strideWidth:w,filterHeight:g,filterWidth:v,effectiveFilterHeight:T,effectiveFilterWidth:A,dilationHeight:E,dilationWidth:S,inShape:e,outShape:h,filterShape:t}}function pZ(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,d=-1,f=-1;if("channelsLast"===i){var p=qy(e,5);u=p[0],c=p[1],l=p[2],d=p[3],f=p[4]}else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));var h=qy(e,5);u=h[0],f=h[1],c=h[2],l=h[3],d=h[4]}var m,g=qy(t,5),v=g[0],y=g[1],b=g[2],x=g[4],k=gZ(n),w=qy(k,3),I=w[0],C=w[1],E=w[2],S=gZ(r),T=qy(S,3),A=T[0],N=T[1],_=T[2],R=vZ(v,A),O=vZ(y,N),F=vZ(b,_),M=function(e,t,n,r,a,o,i,s,u,c,l){var d,f,p,h;if("number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,o){null==a&&(a=hZ(e,t,r));var i=e[1],s=e[2];return[yZ((e[0]-t+2*a)/r+1,o),yZ((i-t+2*a)/r+1,o),yZ((s-t+2*a)/r+1,o),1]}([t,n,r,1],s,0,a,e,l);f=m[0],p=m[1],h=m[2]}else if("same"===e){var g=((f=Math.ceil(t/a))-1)*a+s-t,v=((p=Math.ceil(n/o))-1)*o+u-n,y=((h=Math.ceil(r/i))-1)*i+c-r,b=Math.floor(g/2),x=g-b,k=Math.floor(v/2),w=v-k,I=Math.floor(y/2);d={top:k,bottom:w,left:I,right:y-I,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/a),p=Math.ceil((n-u+1)/o),h=Math.ceil((r-c+1)/i)}return{padInfo:d,outDepth:f,outHeight:p,outWidth:h}}(a,c,l,d,I,C,E,R,O,F,s),D=M.padInfo,B=M.outDepth,P=M.outHeight,L=M.outWidth,U=o?x*f:x;return"channelsFirst"===i?m=[u,U,B,P,L]:"channelsLast"===i&&(m=[u,B,P,L,U]),{batchSize:u,dataFormat:i,inDepth:c,inHeight:l,inWidth:d,inChannels:f,outDepth:B,outHeight:P,outWidth:L,outChannels:U,padInfo:D,strideDepth:I,strideHeight:C,strideWidth:E,filterDepth:v,filterHeight:y,filterWidth:b,effectiveFilterDepth:R,effectiveFilterHeight:O,effectiveFilterWidth:F,dilationDepth:A,dilationHeight:N,dilationWidth:_,inShape:e,outShape:m,filterShape:t}}function hZ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=vZ(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function mZ(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function gZ(e){return"number"==typeof e?[e,e,e]:e}function vZ(e,t){return t<=1?e:e+(e-1)*(t-1)}function yZ(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function bZ(e){var t=qy(mZ(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function xZ(e,t){return bZ(e)||bZ(t)}function kZ(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var wZ=AY({reshape_:function(e,t){var n={x:SY(e,"x","reshape","string_or_numeric")},r={shape:t};return yY.runKernel("Reshape",n,r)}}),IZ=AY({avgPool_:function(e,t,n,r,a){var o=SY(e,"x","avgPool","float32");qX(xZ(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '1'")}));var i=o,s=!1;3===o.rank&&(s=!0,i=wZ(o,[1,o.shape[0],o.shape[1],o.shape[2]])),qX(4===i.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(i.rank,".")})),null!=a&&qX(JX(r),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var u={x:i},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=yY.runKernel("AvgPool",u,c);return l=s$(l,o.dtype),s?wZ(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),CZ=AY({avgPool3d_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",i=SY(e,"x","avgPool3d","float32"),s=i,u=!1;4===i.rank&&(u=!0,s=wZ(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),qX(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),qX("NDHWC"===o,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(o)})),null!=a&&qX(JX(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o},d=yY.runKernel("AvgPool3D",c,l);return d=s$(d,s.dtype),u?wZ(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),EZ=AY({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;qX(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=TY(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return u$(n[0]);var r=n,a={axis:t};return yY.runKernel("Concat",r,a)}}),SZ=AY({sigmoid_:function(e){var t={x:SY(e,"x","sigmoid")};return yY.runKernel("Sigmoid",t)}}),TZ=AY({slice_:function(e,t,n){var r=SY(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},o={begin:t,size:n};return yY.runKernel("Slice",a,o)}}),AZ=AY({tanh_:function(e){var t={x:SY(e,"x","tanh")};return yY.runKernel("Tanh",t)}}),NZ=AY({batchToSpaceND_:function(e,t,n){var r=SY(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));qX(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),qX(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),qX(r.shape[0]%a==0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of the elements of blockShape ").concat(t.join(" * ")," === ").concat(a)}));var o={x:r},i={blockShape:t,crops:n};return yY.runKernel("BatchToSpaceND",o,i)}}),_Z=AY({batchNorm_:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e,t,n,r,a,o){null==o&&(o=.001);var i,s,u=SY(e,"x","batchNorm"),c=SY(t,"mean","batchNorm"),l=SY(n,"variance","batchNorm");null!=a&&(i=SY(a,"scale","batchNorm")),null!=r&&(s=SY(r,"offset","batchNorm")),qX(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),qX(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),qX(null==i||c.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var d={x:function(e){return 0===e.rank||1===e.rank?wZ(e,[1,1,1,e.size]):2===e.rank?wZ(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?wZ(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),scale:i,offset:s,mean:c,variance:l},f={varianceEpsilon:o},p=yY.runKernel("FusedBatchNorm",d,f);return wZ(p,u.shape)}}),RZ=AY({bincount_:function(e,t,n){var r=SY(e,"x","bincount"),a=SY(t,"weights","bincount");qX("int32"===r.dtype,(function(){return"Error in bincount: input dtype must be int32, but got ".concat(r.dtype)})),qX(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),qX(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or0-length, but got input shape: ".concat(r.shape,", weights shape: ").concat(a.shape,".")}));var o={x:r,weights:a},i={size:n};return yY.runKernel("Bincount",o,i)}}),OZ=AY({broadcastTo_:function(e,t){var n=SY(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=wZ(n,a)}for(var o=n.shape,i=Array.from(t),s=t.length-1;s>=0;s--)if(o[s]===t[s])i[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));if(0===i.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0})).length)return u$(n);var u={x:n},c={reps:i};return yY.runKernel("Tile",u,c)}}),FZ=AY({ceil_:function(e){var t={x:SY(e,"x","ceil")};return yY.runKernel("Ceil",t)}}),MZ=AY({clipByValue_:function(e,t,n){var r=SY(e,"x","clipByValue");qX(t<=n,(function(){return"Error in clip: min (".concat(t,") must be less than or equal to max (").concat(n,").")}));var a={x:r},o={clipValueMin:t,clipValueMax:n};return yY.runKernel("ClipByValue",a,o)}}),DZ=AY({concat2d_:function(e,t){return EZ(e,t)}}),BZ=AY({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=SY(e,"x","conv2d"),u=SY(t,"filter","conv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=wZ(s,[1,s.shape[0],s.shape[1],s.shape[2]])),qX(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),qX(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank ".concat(u.rank,".")})),null!=i&&qX(JX(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode ".concat(i," but got pad ").concat(r,".")}));var d="NHWC"===a?c.shape[3]:c.shape[1];qX(d===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(d,") must match input depth for filter ").concat(u.shape[2],".")})),qX(xZ(n,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(o,"'")}));var f={x:c,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},h=yY.runKernel("Conv2D",f,p);return l?wZ(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),PZ=AY({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0,s=SY(e,"x","conv1d"),u=SY(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=wZ(s,[1,s.shape[0],s.shape[1]])),qX(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),qX(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank ".concat(u.rank,".")})),null!=i&&qX(JX(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode ".concat(i," but got pad ").concat(r,".")})),qX(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match input depth for filter ").concat(u.shape[1],".")})),qX(xZ(n,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride ".concat(n," and dilation '").concat(o,"'")})),qX("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var d=wZ(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=wZ(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=BZ(f,d,[1,n],r,"NHWC",[1,o],i);return wZ(p,l?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}}),LZ=AY({conv2DBackpropInput_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;qX(e.length===t.rank,(function(){return"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=wZ(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),qX(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length ".concat(s.length,".")})),qX(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank ".concat(u.rank)})),qX(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank ".concat(n.rank)}));var l="NHWC"===o?s[3]:s[1],d="NHWC"===o?u.shape[3]:u.shape[1];qX(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must match input depth for filter ").concat(n.shape[2],".")})),qX(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(d,") must match output depth for filter ").concat(n.shape[3],".")})),null!=i&&qX(JX(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ".concat(i," but got pad ").concat(a,".")}));var f={dy:u,filter:n},p={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,inputShape:s},h=yY.runKernel("Conv2DBackpropInput",f,p);return c?wZ(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),UZ=AY({conv2dTranspose_:function(e,t,n,r,a,o){var i=SY(e,"x","conv2dTranspose"),s=SY(t,"filter","conv2dTranspose");return LZ(n,i,s,r,a,"NHWC",o)}}),VZ=AY({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],i=SY(e,"x","conv3d"),s=SY(t,"filter","conv3d"),u=i,c=!1;4===i.rank&&(c=!0,u=wZ(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),qX(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),qX(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank ".concat(s.rank,".")})),qX(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match input depth for filter ").concat(s.shape[3],".")})),qX(xZ(n,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(o,"'")})),qX("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var l={x:u,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:o},f=yY.runKernel("Conv3D",l,d);return c?wZ(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}}),WZ=AY({cos_:function(e){var t={x:SY(e,"x","cos")};return yY.runKernel("Cos",t)}}),zZ=AY({cosh_:function(e){var t={x:SY(e,"x","cosh")};return yY.runKernel("Cosh",t)}}),jZ=AY({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:SY(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:r};return yY.runKernel("Cumsum",a,o)}}),HZ=AY({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=SY(e,"x","denseBincount"),o=SY(t,"weights","denseBincount");qX("int32"===a.dtype,(function(){return"Error in denseBincount: input dtype must be int32, but got ".concat(a.dtype)})),qX(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got rank ".concat(a.rank,".")})),qX(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),qX(o.size===a.size||0===o.size,(function(){return"Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ".concat(a.shape,", weights shape: ").concat(o.shape,".")}));var i={x:a,weights:o},s={size:n,binaryOutput:r};return yY.runKernel("DenseBincount",i,s)}}),GZ=AY({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=SY(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];qX(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),qX(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),qX(i%(t*t)==0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(i," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return yY.runKernel("DepthToSpace",s,u)}}),KZ=AY({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=SY(e,"x","depthwiseConv2d"),u=SY(t,"filter","depthwiseConv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=wZ(s,[1,s.shape[0],s.shape[1],s.shape[2]])),qX(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),qX(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank ".concat(u.rank,".")})),qX(c.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels (".concat(c.shape[3],") must match the inChannels dimension in filter ").concat(u.shape[2],".")})),null!=i&&qX(JX(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ".concat(i," but got pad ").concat(r,".")}));var d={x:c,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},p=yY.runKernel("DepthwiseConv2dNative",d,f);return l?wZ(p,[p.shape[1],p.shape[2],p.shape[3]]):p}}),qZ=AY({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=SY(e,"x","dilation2d"),s=SY(t,"filter","dilation2d");qX(3===i.rank||4===i.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank ".concat(i.rank,".")})),qX(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank ".concat(s.rank,".")})),qX("NHWC"===o,(function(){return"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ".concat(o)}));var u=i,c=!1;3===i.rank&&(u=wZ(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0);var l={x:u,filter:s},d={strides:n,pad:r,dilations:a},f=yY.runKernel("Dilation2D",l,d);return c?wZ(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function XZ(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}function QZ(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function YZ(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var o=e[e.length-a-1];null==o&&(o=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===o)n.unshift(i);else if(1===i)n.unshift(o);else{if(o!==i)throw Error("Operands could not be broadcast together with shapes ".concat(e," and ").concat(t,"."));n.unshift(o)}}return n}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var $Z=AY({equal_:function(e,t){var n,r=SY(e,"a","equal"),a=SY(t,"b","equal");r=(n=qy(dY(r,a),2))[0],a=n[1],YZ(r.shape,a.shape);var o={a:r,b:a};return yY.runKernel("Equal",o)}}),ZZ=AY({where_:function(e,t,n){var r=SY(t,"a","where"),a=SY(n,"b","where"),o=SY(e,"condition","where","bool"),i=YZ(r.shape,a.shape),s=OZ(r,i),u=OZ(a,i);1===o.rank&&qX(o.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})),1!==o.rank&&XX(o.shape,u.shape,"Error in where: ");var c={condition:o,t:s,e:u};return yY.runKernel("Select",c)}}),JZ=AY({zerosLike_:function(e){var t={x:SY(e,"x","zerosLike")};return yY.runKernel("ZerosLike",t)}}),eJ=AY({divNoNan_:function(e,t){var n=SY(e,"a","div"),r=SY(t,"b","div"),a=qy(dY(n,r),2);n=a[0],r=a[1];var o=X$(n,r),i=JZ(o),s=$Z(r,i);return ZZ(s,i,o)}}),tJ=AY({elu_:function(e){var t={x:SY(e,"x","elu")};return yY.runKernel("Elu",t)}}),nJ=AY({erf_:function(e){var t=SY(e,"x","erf");qX("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=s$(t,"float32"));var n={x:t};return yY.runKernel("Erf",n)}}),rJ=AY({exp_:function(e){var t={x:SY(e,"x","exp")};return yY.runKernel("Exp",t)}}),aJ=AY({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=SY(e,"x","expandDims","string_or_numeric");qX(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return yY.runKernel("ExpandDims",r,a)}}),oJ=AY({expm1_:function(e){var t={x:SY(e,"x","expm1")};return yY.runKernel("Expm1",t)}}),iJ=AY({tile_:function(e,t){var n=SY(e,"x","tile","string_or_numeric");qX(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," must match length of reps ").concat(t,".")}));var r={x:n},a={reps:t};return yY.runKernel("Tile",r,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function sJ(e,t,n){var r={shape:e,value:t,dtype:n};return yY.runKernel("Fill",{},r)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var uJ=AY({floor_:function(e){var t={x:SY(e,"x","floor")};return yY.runKernel("Floor",t)}}),cJ=AY({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={x:SY(e,"x","gather"),indices:SY(t,"indices","gather","int32")},o={axis:n,batchDims:r};return yY.runKernel("GatherV2",a,o)}}),lJ=AY({greater_:function(e,t){var n,r=SY(e,"a","greater"),a=SY(t,"b","greater");r=(n=qy(dY(r,a),2))[0],a=n[1],YZ(r.shape,a.shape);var o={a:r,b:a};return yY.runKernel("Greater",o)}}),dJ=AY({greaterEqual_:function(e,t){var n,r=SY(e,"a","greaterEqual"),a=SY(t,"b","greaterEqual");r=(n=qy(dY(r,a),2))[0],a=n[1],YZ(r.shape,a.shape);var o={a:r,b:a};return yY.runKernel("GreaterEqual",o)}}),fJ=AY({imag_:function(e){var t={input:SY(e,"input","imag")};return yY.runKernel("Imag",t)}}),pJ=AY({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:SY(e,"x","leakyRelu")},r={alpha:t};return yY.runKernel("LeakyRelu",n,r)}}),hJ=AY({less_:function(e,t){var n,r=SY(e,"a","less"),a=SY(t,"b","less");r=(n=qy(dY(r,a),2))[0],a=n[1],YZ(r.shape,a.shape);var o={a:r,b:a};return yY.runKernel("Less",o)}}),mJ=AY({lessEqual_:function(e,t){var n,r=SY(e,"a","lessEqual"),a=SY(t,"b","lessEqual");r=(n=qy(dY(r,a),2))[0],a=n[1],YZ(r.shape,a.shape);var o={a:r,b:a};return yY.runKernel("LessEqual",o)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function gJ(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return yY.runKernel("LinSpace",{},r)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var vJ=AY({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=SY(e,"x","localResponseNormalization");qX(4===o.rank||3===o.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(o.rank,".")})),qX(JX(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ".concat(t,".")}));var i=o,s=!1;3===o.rank&&(s=!0,i=wZ(o,[1,o.shape[0],o.shape[1],o.shape[2]]));var u={x:i},c={depthRadius:t,bias:n,alpha:r,beta:a},l=yY.runKernel("LRN",u,c);return s?wZ(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),yJ=AY({log_:function(e){var t={x:SY(e,"x","log")};return yY.runKernel("Log",t)}}),bJ=AY({log1p_:function(e){var t={x:SY(e,"x","log1p")};return yY.runKernel("Log1p",t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function xJ(e){return yY.customGrad(e)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var kJ=AY({neg_:function(e){var t={x:SY(e,"x","neg")};return yY.runKernel("Neg",t)}}),wJ=AY({softplus_:function(e){var t={x:SY(e,"x","softplus")};return yY.runKernel("Softplus",t)}}),IJ=AY({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:SY(e,"x","max")},a={reductionIndices:t,keepDims:n};return yY.runKernel("Max",r,a)}}),CJ=AY({sub_:function(e,t){var n=SY(e,"a","sub"),r=SY(t,"b","sub"),a=qy(dY(n,r),2),o={a:n=a[0],b:r=a[1]};return yY.runKernel("Sub",o)}}),EJ=AY({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=SY(e,"x","sum");"bool"===r.dtype&&(r=s$(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return yY.runKernel("Sum",a,o)}}),SJ=AY({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=SY(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and axis was ").concat(t));return xJ((function(e,n){var r=IJ(e,t,!0),a=CJ(e,r),o=CJ(s$(a,"float32"),yJ(EJ(rJ(a),t,!0)));return n([o]),{value:o,gradFunc:function(e,n){var r=qy(n,1)[0],a=rJ(r);return CJ(e,Q$(EJ(e,t,!0),a))}}}))(n)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function TJ(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function AJ(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[o++]):a.push(t[i++]);return a}function NJ(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function _J(e,t){return AJ(e,t.map((function(e){return 1})),t)}function RJ(e,t,n){qX(TJ(t,n),(function(){return"".concat(e," supports only inner-most axes for now. Got axes ").concat(t," and rank-").concat(n," input.")}))}function OJ(e,t){if(TJ(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function FJ(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function MJ(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var DJ=AY({logicalAnd_:function(e,t){var n=SY(e,"a","logicalAnd","bool"),r=SY(t,"b","logicalAnd","bool");YZ(n.shape,r.shape);var a={a:n,b:r};return yY.runKernel("LogicalAnd",a)}}),BJ=AY({logicalNot_:function(e){var t={x:SY(e,"x","logicalNot","bool")};return yY.runKernel("LogicalNot",t)}}),PJ=AY({logicalOr_:function(e,t){var n=SY(e,"a","logicalOr","bool"),r=SY(t,"b","logicalOr","bool");YZ(n.shape,r.shape);var a={a:n,b:r};return yY.runKernel("LogicalOr",a)}}),LJ=AY({maxPool_:function(e,t,n,r,a){var o=SY(e,"x","maxPool"),i=o,s=!1;3===o.rank&&(s=!0,i=wZ(o,[1,o.shape[0],o.shape[1],o.shape[2]])),qX(4===i.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(i.rank,".")})),qX(xZ(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '1'")})),null!=a&&qX(JX(r),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var u={x:i},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=yY.runKernel("MaxPool",u,c);return s?wZ(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),UJ=AY({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",i=SY(e,"x","maxPool3d"),s=i,u=!1;4===i.rank&&(u=!0,s=wZ(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),qX(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),qX("NDHWC"===o,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(o)})),null!=a&&qX(JX(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o},d=yY.runKernel("MaxPool3D",c,l);return u?wZ(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),VJ=AY({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={x:SY(e,"x","maxPoolWithArgmax")},i={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},s=yY.runKernel("MaxPoolWithArgmax",o,i);return{result:s[0],indexes:s[1]}}}),WJ=AY({maximum_:function(e,t){var n,r=SY(e,"a","maximum"),a=SY(t,"b","maximum");r=(n=qy(dY(r,a),2))[0],a=n[1],"bool"===r.dtype&&(r=s$(r,"int32"),a=s$(a,"int32")),YZ(r.shape,a.shape);var o={a:r,b:a};return yY.runKernel("Maximum",o)}}),zJ=AY({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:SY(e,"x","mean")},a={axis:t,keepDims:n};return yY.runKernel("Mean",r,a)}}),jJ=AY({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:SY(e,"x","min")},a={axis:t,keepDims:n};return yY.runKernel("Min",r,a)}}),HJ=AY({minimum_:function(e,t){var n,r=SY(e,"a","minimum"),a=SY(t,"b","minimum");r=(n=qy(dY(r,a),2))[0],a=n[1],"bool"===r.dtype&&(r=s$(r,"int32"),a=s$(a,"int32")),YZ(r.shape,a.shape);var o={a:r,b:a};return yY.runKernel("Minimum",o)}}),GJ=AY({mirrorPad_:function(e,t,n){qX("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. Got ".concat(n,".")}));var r=SY(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");qX(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". Got ").concat(t.length,".")}));for(var a="reflect"===n?1:0,o=function(e){qX(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),qX(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal to ").concat(r.shape[e]-a," or less than 0 for input of shape ").concat(r.shape)}))},i=0;i<r.rank;i++)o(i);var s={paddings:t,mode:n},u={x:r};return yY.runKernel("MirrorPad",u,s)}}),KJ=AY({mod_:function(e,t){var n=SY(e,"a","mod"),r=SY(t,"b","mod"),a=qy(dY(n,r),2),o={a:n=a[0],b:r=a[1]};return yY.runKernel("Mod",o)}}),qJ=AY({square_:function(e){var t=SY(e,"x","square");return yY.runKernel("Square",{x:t},{})}}),XJ=AY({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=SY(e,"logits","multinomial"),o=a.size,i=a.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got ".concat(o,"."));if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(i));n=n||Math.random();var s={logits:1===i?wZ(a,[1,-1]):a},u={numSamples:t,seed:n,normalized:r},c=yY.runKernel("Multinomial",s,u);return 1===i?wZ(c,[c.size]):c}}),QJ=AY({notEqual_:function(e,t){var n,r=SY(e,"a","notEqual"),a=SY(t,"b","notEqual");r=(n=qy(dY(r,a),2))[0],a=n[1],YZ(r.shape,a.shape);var o={a:r,b:a};return yY.runKernel("NotEqual",o)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function YJ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=YJ(e,"float32"),r=YJ(e,"float32");return NY(n,r)}var a=bQ($X(e),t);return yY.makeTensor(a,e,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function $J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=$J(e,"float32"),r=YJ(e,"float32");return NY(n,r)}var a=yQ($X(e),t);return yY.makeTensor(a,e,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ZJ=AY({onesLike_:function(e){var t={x:SY(e,"x","onesLike")};return yY.runKernel("OnesLike",t)}}),JJ=AY({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=SY(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},o={x:r};return yY.runKernel("PadV2",o,a)}}),e0=AY({spaceToBatchND_:function(e,t,n){var r=SY(e,"x","spaceToBatchND");qX(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),qX(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),qX(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},o={blockShape:t,paddings:n};return yY.runKernel("SpaceToBatchND",a,o)}}),t0=AY({pow_:function(e,t){var n=SY(e,"base","pow"),r=SY(t,"exp","pow"),a=qy(dY(n,r),2),o={a:n=a[0],b:r=a[1]};return yY.runKernel("Pow",o)}}),n0=AY({prelu_:function(e,t){var n={x:SY(e,"x","prelu"),alpha:SY(t,"alpha","prelu")};return yY.runKernel("Prelu",n)}}),r0=AY({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=SY(e,"x","prod");"bool"===r.dtype&&(r=s$(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return yY.runKernel("Prod",a,o)}}),a0=Cq((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new r(e),o=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.alea=o}(0,e)})),o0=Cq((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xor128=o}(0,e)})),i0=Cq((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xorwow=o}(0,e)})),s0=Cq((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&(o.x&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xorshift7=o}(0,e)})),u0=Cq((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=s[127&o]^=r+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&(o.X&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xor4096=o}(0,e)})),c0=Cq((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.tychei=o}(0,e)})),l0=Eq(Object.freeze({__proto__:null,default:{}})),d0=Cq((function(e){!function(t,n){var r,a=this,o=256,i=n.pow(o,6),s=n.pow(2,52),u=2*s,c=255;function l(e,c,l){var g=[],v=h(p((c=1==c?{entropy:!0}:c||{}).entropy?[e,m(t)]:null==e?function(){try{var e;return r&&(e=r.randomBytes)?e=e(o):(e=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(e)),m(e)}catch(e){var n=a.navigator,i=n&&n.plugins;return[+new Date,a,i,a.screen,m(t)]}}():e,3),g),y=new d(g),b=function(){for(var e=y.g(6),t=i,n=0;e<s;)e=(e+n)*o,t*=o,n=y.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,h(m(y.S),t),(c.pass||l||function(e,t,r,a){return a&&(a.S&&f(a,y),e.state=function(){return f(y,{})}),r?(n.random=e,t):e})(b,v,"global"in c?c.global:this==n,c.state)}function d(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<o;)s[a]=a++;for(a=0;a<o;a++)s[a]=s[i=c&i+e[a%n]+(t=s[a])],s[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,s=r.S;e--;)t=s[a=c&a+1],n=n*o+s[c&(s[a]=s[i=c&i+t])+(s[i]=t)];return r.i=a,r.j=i,n})(o)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){var n,r=[],a=Ty(e);if(t&&"object"==a)for(n in e)try{r.push(p(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\0"}function h(e,t){for(var n,r=e+"",a=0;a<r.length;)t[c&a]=c&(n^=19*t[c&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(n.seedrandom=l,h(n.random(),t),e.exports){e.exports=l;try{r=l0}catch(e){}}}([],Math)}));
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */d0.alea=a0,d0.xor128=o0,d0.xorwow=i0,d0.xorshift7=s0,d0.xor4096=u0,d0.tychei=c0;var f0=d0,p0=function(){function e(t,n,r,a,o){_y(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=f0.alea(i.toString())}return Oy(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,o=void 0,i=void 0;do{i=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),h0=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(_y(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==o&&(o=Math.random()),"number"==typeof o&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=f0.alea(o)}return Oy(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}(),m0=AY({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,o=i$(e,r),i=new h0(t,n,null,a),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function g0(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return yY.runKernel("Range",{},a)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var v0=AY({real_:function(e){var t={input:SY(e,"input","real")};return yY.runKernel("Real",t)}}),y0=AY({reciprocal_:function(e){var t={x:SY(e,"x","reciprocal")};return yY.runKernel("Reciprocal",t)}}),b0=AY({relu_:function(e){var t={x:SY(e,"x","relu")};return yY.runKernel("Relu",t)}}),x0=AY({relu6_:function(e){var t={x:SY(e,"x","relu6")};return yY.runKernel("Relu6",t)}}),k0=AY({reverse_:function(e,t){var n={x:SY(e,"x","reverse")},r={dims:t};return yY.runKernel("Reverse",n,r)}}),w0=AY({round_:function(e){var t={x:SY(e,"x","round")};return yY.runKernel("Round",t)}}),I0=AY({rsqrt_:function(e){var t={x:SY(e,"x","rsqrt")};return yY.runKernel("Rsqrt",t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function C0(e,t){if((cQ(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&cQ(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return _Y(e,[],[],t)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var E0=AY({selu_:function(e){var t={x:SY(e,"x","selu")};return yY.runKernel("Selu",t)}}),S0=function(){var e=Ny(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,u,c,l,d,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=SY(t,"x","setdiff1d"),a=SY(n,"y","setdiff1d"),qX(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),qX(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),qX(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=4,r.data();case 4:return o=e.sent,e.next=7,a.data();case 7:for(i=e.sent,s=new Set(i),u=0,c=0;c<o.length;c++)s.has(o[c])||u++;for(l=new ZQ([u],r.dtype),d=new ZQ([u],"int32"),f=0,p=0;f<o.length;f++)s.has(o[f])||(l.values[p]=o[f],d.values[p]=f,p++);return e.abrupt("return",[l.toTensor(),d.toTensor()]);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T0=AY({sign_:function(e){var t={x:SY(e,"x","sign")};return yY.runKernel("Sign",t)}}),A0=AY({sin_:function(e){var t={x:SY(e,"x","sin")};return yY.runKernel("Sin",t)}}),N0=AY({sinh_:function(e){var t={x:SY(e,"x","sinh")};return yY.runKernel("Sinh",t)}}),_0=AY({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=SY(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return yY.runKernel("Softmax",r,a)}}),R0=AY({fft_:function(e){qX("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got ".concat(e.dtype,".")}));var t={input:e};return yY.runKernel("FFT",t)}}),O0=AY({ifft_:function(e){qX("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got ".concat(e.dtype,".")}));var t={input:e};return yY.runKernel("IFFT",t)}}),F0=AY({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=wZ(e,[r,n]);t=O0(a)}else{var o=[r,2*(n-1)],i=wZ(v0(e),[r,n]),s=wZ(fJ(e),[r,n]),u=k0(TZ(i,[0,1],[r,n-2]),1),c=Q$(k0(TZ(s,[0,1],[r,n-2]),1),C0(-1)),l=EZ([i,u],1),d=EZ([s,c],1),f=wZ(NY(l,d),[o[0],o[1]]);t=O0(f)}if(t=v0(t),3===e.rank&&0!==e.shape[0]){var p=t,h=e.shape[0];t=wZ(t,[h,t.shape[0]/h,t.shape[1]]),p.dispose()}return t}}),M0=AY({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={x:SY(e,"x","split")},a={numOrSizeSplits:t,axis:n};return yY.runKernel("SplitV",r,a)}}),D0=AY({rfft_:function(e,t){qX("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var o=e.shape.map((function(e){return 0})),i=e.shape.map((function(e){return e}));i[e.shape.length-1]=t,n=TZ(e,o,i),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=EZ([e,YJ(s)],e.shape.length-1),r=t}else n=e;var u=JZ(n),c=wZ(NY(n,u),[a,r]),l=R0(c),d=Math.floor(r/2)+1,f=v0(l),p=fJ(l),h=M0(f,[d,r-d],f.shape.length-1),m=M0(p,[d,r-d],p.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=d,wZ(NY(h[0],m[0]),g)}}),B0=AY({sqrt_:function(e){var t={x:SY(e,"x","sqrt")};return yY.runKernel("Sqrt",t)}}),P0=AY({squaredDifference_:function(e,t){var n,r=SY(e,"a","squaredDifference"),a=SY(t,"b","squaredDifference");r=(n=qy(dY(r,a),2))[0],a=n[1],YZ(r.shape,a.shape);var o={a:r,b:a};return yY.runKernel("SquaredDifference",o,{})}}),L0=AY({squeeze_:function(e,t){var n=SY(e,"x","squeeze");return wZ(n,oQ(n.shape,t).newShape)}}),U0=AY({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=TY(e,"tensors","stack","string_or_numeric");qX(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&qX(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return yY.runKernel("Pack",r,a)}}),V0=AY({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:SY(e,"x","step")},r={alpha:t};return yY.runKernel("Step",n,r)}}),W0=AY({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c={x:SY(e,"x","stridedSlice")},l={begin:t,end:n,strides:r,beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:u};return yY.runKernel("StridedSlice",c,l)}}),z0=AY({tan_:function(e){var t={x:SY(e,"x","tan")};return yY.runKernel("Tan",t)}});
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function j0(e,t){QX(e);var n=IY(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return _Y(e,null,n,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function H0(e,t,n){if(QX(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=IY(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return _Y(e,t,r,n)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var G0=AY({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=SY(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") but got ").concat(t));var o={x:r},i={k:t,sorted:n},s=yY.runKernel("TopK",o,i),u=qy(s,2),c=u[0],l=u[1];return{values:c,indices:l}}}),K0=AY({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var o=new p0(t,n,r,!0,a),i=i$(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),q0=AY({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=SY(e,"x","unique","string_or_numeric");qX(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},o=yY.runKernel("Unique",r,a),i=qy(o,2),s=i[0],u=i[1];return{values:s,indices:u}}}),X0=AY({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=SY(e,"x","unstack","string_or_numeric");qX(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return yY.runKernel("Unpack",r,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Q0(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=i$(e,"int32"),o=i$([n.length,e.length],"int32"),i=0;i<n.length;i++){var s=a.indexToLoc(n[i]),u=i*e.length;o.values.set(s,u)}return o.toTensor()}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Y0=function(){var e=Ny(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=SY(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=Q0(n.shape,r),e.abrupt("return",(t!==n&&n.dispose(),a));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$0=AY({scatterND_:function(e,t,n){var r=SY(e,"indices","scatterND","int32"),a=SY(t,"updates","scatterND");w$(a,r,n);var o={indices:r,updates:a},i={shape:n};return yY.runKernel("ScatterNd",o,i)}}),Z0=AY({sparseToDense_:
/**
	   * @license
	   * Copyright 2018 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=SY(e,"sparseIndices","sparseToDense","int32"),o=SY(t,"sparseValues","sparseToDense"),i=SY(r,"defaultValue","sparseToDense",o.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:, ".concat(n.length,", should be: ").concat(o,"."));var i=t.size;if(0!==t.rank&&(1!==t.rank||i!==a))throw new Error("sparseValues has incorrect shape ".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,o,n,i);var s={sparseIndices:a,sparseValues:o,defaultValue:i},u={outputShape:n};return yY.runKernel("SparseToDense",s,u)}}),J0=AY({gatherND_:function(e,t){var n=SY(t,"indices","gatherND","int32"),r={params:SY(e,"x","gatherND"),indices:n};return yY.runKernel("GatherNd",r)}}),e1=AY({conv2DBackpropFilter_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=wZ(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=wZ(t,[1,t.shape[0],t.shape[1],t.shape[2]])),qX(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape ".concat(s.shape,".")})),qX(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape ".concat(u.shape,".")})),qX(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got ".concat(n,".")}));var c="NHWC"===o?s.shape[3]:s.shape[1],l="NHWC"===o?u.shape[3]:u.shape[1];qX(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must match input depth in filter (").concat(n[2],".")})),qX(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must match output depth for filter (").concat(n[3],").")})),null!=i&&qX(JX(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ".concat(i," but got pad ").concat(a,".")}));var d={x:s,dy:u},f={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,filterShape:n};return yY.runKernel("Conv2DBackpropFilter",d,f)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function t1(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Q$(e,V0(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function n1(e,t){var n=t,r=QZ(e.shape,t.shape);return r.length>0&&(n=EJ(n,r)),wZ(n,e.shape)}function r1(e,t,n,r){if("linear"===t)return e;if("relu"===t)return b0(e);if("elu"===t)return tJ(e);if("relu6"===t)return x0(e);if("prelu"===t)return n0(e,n);if("leakyrelu"===t)return pJ(e,r);throw new Error("Unknown fused activation ".concat(t,"."))}var a1=function(e,t){return!(e>0)||"linear"===t},o1=AY({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,o=e.dataFormat,i=void 0===o?"NHWC":o,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,d=e.activation,f=void 0===d?"linear":d,p=e.preluActivationWeights,h=e.leakyreluAlpha;if(f=f||"linear",!1===a1(yY.state.gradientDepth,f)){var m=BZ(t,n,r,a,i,u,c);return null!=l&&(m=K$(m,l)),r1(m,f,p,h)}var g=SY(t,"x","conv2d"),v=SY(n,"filter","conv2d"),y=g,b=!1;3===g.rank&&(b=!0,y=wZ(g,[1,g.shape[0],g.shape[1],g.shape[2]])),qX(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank ".concat(y.rank,".")})),qX(4===v.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank ".concat(v.rank,".")})),null!=c&&qX(JX(a),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode ".concat(c," but got pad ").concat(a,".")})),qX(y.shape[3]===v.shape[2],(function(){return"Error in conv2d: depth of input (".concat(y.shape[3],") must match input depth for filter ").concat(v.shape[2],".")})),qX(xZ(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),qX("NHWC"===i,(function(){return"Error in conv2d: got dataFormat of ".concat(i," but only NHWC is currently supported.")}));var x,k,w=fZ(y.shape,v.shape,r,u,a,c);null!=l&&(x=qy(dY(x=SY(l,"bias","fused conv2d"),g),1)[0],YZ(w.outShape,x.shape)),null!=p&&(k=SY(p,"prelu weights","fused conv2d"));var I=function(e,t){var n=qy(t,4),o=n[0],i=n[1],s=n[2],c=n[3],l=t1(e,s,f);qX(bZ(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(u,"'")}));var d=[LZ(i.shape,l,o,r,a),e1(i,l,o.shape,r,a)];if(null!=c){var p=n1(c,l);d.push(p)}return d},C={x:y,filter:v,bias:x,preluActivationWeights:k},E={strides:r,pad:a,dataFormat:i,dilations:u,dimRoundingMode:c,activation:f,leakyreluAlpha:h};return null==l?xJ((function(e,t,n){var r=yY.runKernel("FusedConv2D",C,E);return n([t,e,r]),b&&(r=wZ(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:I}}))(y,v):xJ((function(e,t,n,r){var a=yY.runKernel("FusedConv2D",C,E);return r([t,e,a,n]),b&&(a=wZ(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:I}}))(y,v,x)}}),i1=AY({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=wZ(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=wZ(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:u},l={strides:r,pad:a,dimRoundingMode:i,dilations:o,filterShape:n};return yY.runKernel("DepthwiseConv2dNativeBackpropFilter",c,l)}}),s1=AY({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=wZ(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:i,dilations:o,inputShape:e},d=yY.runKernel("DepthwiseConv2dNativeBackpropInput",c,l);return u?wZ(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),u1=AY({fusedDepthwiseConv2d_:function(e){var t,n=e.x,r=e.filter,a=e.strides,o=e.pad,i=e.dataFormat,s=void 0===i?"NHWC":i,u=e.dilations,c=void 0===u?[1,1]:u,l=e.dimRoundingMode,d=e.bias,f=e.activation,p=void 0===f?"linear":f,h=e.preluActivationWeights,m=e.leakyreluAlpha;if(!1===a1(yY.state.gradientDepth,p)){var g=KZ(n,r,a,o,s,c,l);return null!=d&&(g=K$(g,d)),r1(g,p,h,m)}var v=SY(n,"x","depthwiseConv2d"),y=SY(r,"filter","depthwiseConv2d"),b=v,x=!1;3===v.rank&&(x=!0,b=wZ(v,[1,v.shape[0],v.shape[1],v.shape[2]])),qX(4===b.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank ".concat(b.rank,".")})),qX(4===y.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank ".concat(y.rank,".")})),qX(b.shape[3]===y.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels (".concat(b.shape[3],") must match the inChannels dimension in filter ").concat(y.shape[2],".")})),null==c&&(c=[1,1]),qX(xZ(a,c),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(a," and dilations '").concat(c,"'")})),null!=l&&qX(JX(o),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ".concat(l," but got pad ").concat(o,".")}));var k,w,I=fZ(b.shape,y.shape,a,c,o,l,!0);null!=d&&(t=qy(dY(k=SY(d,"bias","fused conv2d"),v),1),k=t[0],YZ(I.outShape,k.shape)),null!=h&&(w=SY(h,"prelu weights","fused depthwiseConv2d"));var C=function(e,t){qX(bZ(c),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '".concat(c,"'")}));var n=qy(t,4),r=n[0],i=n[1],s=n[2],u=n[3],d=t1(e,s,p),f=s1(i.shape,d,r,a,o,c,l),h=i1(i,d,r.shape,a,o,c,l);return null!=u?[f,h,n1(k,d)]:[f,h]},E={x:b,filter:y,bias:k,preluActivationWeights:w},S={strides:a,pad:o,dataFormat:s,dilations:c,dimRoundingMode:l,activation:p,leakyreluAlpha:m};return null==d?xJ((function(e,t,n){var r=yY.runKernel("FusedDepthwiseConv2D",E,S);return n([t,e,r]),x&&(r=wZ(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:C}}))(b,y):xJ((function(e,t,n,r){var a=yY.runKernel("FusedDepthwiseConv2D",E,S);return r([t,e,a,n]),x&&(a=wZ(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:C}}))(b,y,k)}}),c1=AY({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,o=e.transposeB,i=void 0!==o&&o,s=e.bias,u=e.activation,c=void 0===u?"linear":u,l=e.preluActivationWeights,d=e.leakyreluAlpha;if(!1===a1(yY.state.gradientDepth,c)){var f=g$(t,n,a,i);return null!=s&&(f=K$(f,s)),r1(f,c,l,d)}var p=SY(t,"a","fused matMul"),h=SY(n,"b","fused matMul"),m=qy(dY(p,h),2);p=m[0],h=m[1];var g=a?p.shape[p.rank-2]:p.shape[p.rank-1],v=i?h.shape[h.rank-1]:h.shape[h.rank-2],y=a?p.shape[p.rank-1]:p.shape[p.rank-2],b=i?h.shape[h.rank-2]:h.shape[h.rank-1],x=p.shape.slice(0,-2),k=h.shape.slice(0,-2),w=$X(x),I=$X(k);qX(p.rank>=2&&h.rank>=2&&p.rank===h.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks ".concat(p.rank," and ").concat(h.rank,".")})),qX(ZX(x,k),(function(){return"Error in fused matMul: outer dimensions (".concat(x,") and (").concat(k,") of Tensors with shapes ").concat(p.shape," and ").concat(h.shape," must match.")})),qX(g===v,(function(){return"Error in fused matMul: inner shapes (".concat(g,") and (").concat(v,") of Tensors with shapes ").concat(p.shape," and ").concat(h.shape," and transposeA=").concat(a," and transposeB=").concat(i," must match.")}));var C,E,S=p.shape.slice(0,-2).concat([y,b]),T=wZ(p,a?[w,g,y]:[w,y,g]),A=wZ(h,i?[I,b,v]:[I,v,b]);null!=s&&(C=qy(dY(C=SY(s,"bias","fused matMul"),p),1)[0],YZ(S,C.shape)),null!=l&&(E=SY(l,"prelu weights","fused matMul"));var N=function(e,t){var n,r,o=qy(t,4),u=o[0],l=o[1],d=o[2],f=o[3],p=t1(wZ(e,d.shape),d,c);return a||i?!a&&i?(n=g$(p,l,!1,!1),r=g$(p,u,!0,!1)):a&&!i?(n=g$(l,p,!1,!0),r=g$(u,p,!1,!1)):(n=g$(l,p,!0,!0),r=g$(p,u,!0,!0)):(n=g$(p,l,!1,!0),r=g$(u,p,!0,!1)),null!=s?[n,r,n1(f,p)]:[n,r]},_={a:T,b:A,bias:C,preluActivationWeights:E},R={transposeA:a,transposeB:i,activation:c,leakyreluAlpha:d};return null==s?xJ((function(e,t,n){var r=yY.runKernel("_FusedMatMul",_,R);return n([e,t,r]),{value:wZ(r,S),gradFunc:N}}))(T,A):xJ((function(e,t,n,r){var a=yY.runKernel("_FusedMatMul",_,R);return r([e,t,a,n]),{value:wZ(a,S),gradFunc:N}}))(T,A,C)}}),l1=AY({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=SY(e,"image","cropAndResize"),s=SY(t,"boxes","cropAndResize","float32"),u=SY(n,"boxInd","cropAndResize","int32"),c=s.shape[0];qX(4===i.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank ".concat(i.rank,".")})),qX(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] but had shape ").concat(s.shape,".")})),qX(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] but had shape ").concat(s.shape,".")})),qX(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length ".concat(r.length,".")})),qX(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),qX("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:i,boxes:s,boxInd:u},d={method:a,extrapolationValue:o,cropSize:r};return yY.runKernel("CropAndResize",l,d)}}),d1=AY({flipLeftRight_:function(e){var t=SY(e,"image","flipLeftRight","float32");qX(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,but got rank ".concat(t.rank,".")}));var n={image:t};return yY.runKernel("FlipLeftRight",n,{})}}),f1=AY({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=SY(e,"image","rotateWithOffset","float32");qX(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,but got rank ".concat(a.rank,".")}));var o={image:a},i={radians:t,fillValue:n,center:r};return yY.runKernel("RotateWithOffset",o,i)}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function p1(e,t,n,r,a,o){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);var i=e.shape[0];return n=Math.min(n,i),qX(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),qX(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),qX(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),qX(1===t.rank,(function(){return"scores must be a 1D tensor"})),qX(t.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected ".concat(i,", but was ").concat(t.shape[0])})),qX(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(o,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var h1=AY({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=SY(e,"boxes","nonMaxSuppression"),i=SY(t,"scores","nonMaxSuppression"),s=p1(o,i,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return yY.runKernel("NonMaxSuppressionV3",{boxes:o,scores:i},u)}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function m1(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,o=0,i=!1;r<a;){var s=n(t,e[o=r+(a-r>>>1)]);s>0?r=o+1:(a=o,i=!s)}return i?r:-r-1}
/**
	     * @license
	     * Copyright 2020 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(e,t,n||g1)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function g1(e,t){return e>t?1:e<t?-1:0}function v1(e,t,n,r,a){return x1(e,t,n,r,a,0)}function y1(e,t,n,r,a,o){return x1(e,t,n,r,a,0,!1,o,!0)}function b1(e,t,n,r,a,o){return x1(e,t,n,r,a,o,!0)}function x1(e,t,n,r,a,o){for(var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(I1);for(var d=o>0?-.5/o:0,f=[],p=[];f.length<n&&c.length>0;){var h=c.pop(),m=h.score,g=h.boxIndex,v=h.suppressBeginIndex;if(m<a)break;for(var y=!1,b=f.length-1;b>=v;--b){var x=k1(e,g,f[b]);if(x>=r){y=!0;break}if(h.score=h.score*w1(r,d,x),h.score<=a)break}h.suppressBeginIndex=f.length,y||(h.score===m?(f.push(g),p.push(h.score)):h.score>a&&m1(c,h,I1))}var k=f.length,w=n-k;s&&w>0&&(f.push.apply(f,Xy(new Array(w).fill(0))),p.push.apply(p,Xy(new Array(w).fill(0))));var I={selectedIndices:f};return i&&(I.selectedScores=p),u&&(I.validOutputs=k),I}function k1(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),p=(s-o)*(u-i),h=(d-c)*(f-l);if(p<=0||h<=0)return 0;var m=Math.max(o,c),g=Math.max(i,l),v=Math.min(s,d),y=Math.min(u,f),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(p+h-b)}function w1(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function I1(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var C1=function(){var e=Ny(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,u,c,l,d,f,p,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:.5,o=h.length>4&&void 0!==h[4]?h[4]:Number.NEGATIVE_INFINITY,i=SY(t,"boxes","nonMaxSuppressionAsync"),s=SY(n,"scores","nonMaxSuppressionAsync"),u=p1(i,s,r,a,o),r=u.maxOutputSize,a=u.iouThreshold,o=u.scoreThreshold,e.next=6,Promise.all([i.data(),s.data()]);case 6:return c=e.sent,l=c[0],d=c[1],f=v1(l,d,r,a,o),p=f.selectedIndices,e.abrupt("return",(i!==t&&i.dispose(),s!==n&&s.dispose(),j0(p,"int32")));case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),E1=AY({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=SY(e,"boxes","nonMaxSuppression"),s=SY(t,"scores","nonMaxSuppression"),u=p1(i,s,n,r,a,o),c={boxes:i,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},d=yY.runKernel("NonMaxSuppressionV5",c,l);return{selectedIndices:d[0],selectedScores:d[1]}}}),S1=function(){var e=Ny(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,u,c,l,d,f,p,h,m,g=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>3&&void 0!==g[3]?g[3]:.5,o=g.length>4&&void 0!==g[4]?g[4]:Number.NEGATIVE_INFINITY,i=g.length>5&&void 0!==g[5]?g[5]:0,s=SY(t,"boxes","nonMaxSuppressionAsync"),u=SY(n,"scores","nonMaxSuppressionAsync"),c=p1(s,u,r,a,o,i),r=c.maxOutputSize,a=c.iouThreshold,o=c.scoreThreshold,i=c.softNmsSigma,e.next=7,Promise.all([s.data(),u.data()]);case 7:return l=e.sent,d=l[0],f=l[1],p=b1(d,f,r,a,o,i),h=p.selectedIndices,m=p.selectedScores,e.abrupt("return",(s!==t&&s.dispose(),u!==n&&u.dispose(),{selectedIndices:j0(h,"int32"),selectedScores:j0(m)}));case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),T1=AY({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=SY(e,"boxes","nonMaxSuppression"),s=SY(t,"scores","nonMaxSuppression"),u=p1(i,s,n,r,a,null),c={boxes:i,scores:s},l={maxOutputSize:u.maxOutputSize,iouThreshold:u.iouThreshold,scoreThreshold:u.scoreThreshold,padToMaxOutputSize:o},d=yY.runKernel("NonMaxSuppressionV4",c,l);return{selectedIndices:d[0],validOutputs:d[1]}}}),A1=function(){var e=Ny(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,u,c,l,d,f,p,h,m,g,v,y,b,x=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,o=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,i=x.length>5&&void 0!==x[5]&&x[5],s=SY(t,"boxes","nonMaxSuppressionAsync"),u=SY(n,"scores","nonMaxSuppressionAsync"),c=p1(s,u,r,a,o,null),l=c.maxOutputSize,d=c.iouThreshold,f=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return p=e.sent,h=qy(p,2),m=h[0],g=h[1],v=y1(m,g,l,d,f,i),y=v.selectedIndices,b=v.validOutputs,e.abrupt("return",(s!==t&&s.dispose(),u!==n&&u.dispose(),{selectedIndices:j0(y,"int32"),validOutputs:C0(b,"int32")}));case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),N1=AY({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=SY(e,"images","resizeBilinear");qX(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank ".concat(a.rank,".")})),qX(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape ".concat(t,".")})),qX(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var o=a,i=!1;3===a.rank&&(i=!0,o=wZ(a,[1,a.shape[0],a.shape[1],a.shape[2]]));var s={images:o},u={alignCorners:n,halfPixelCenters:r,size:t},c=yY.runKernel("ResizeBilinear",s,u);return i?wZ(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),_1={flipLeftRight:d1,resizeNearestNeighbor:AY({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=SY(e,"images","resizeNearestNeighbor");qX(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ".concat(a.rank,".")})),qX(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape ".concat(t,".")})),qX("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),qX(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var o=a,i=!1;3===a.rank&&(i=!0,o=wZ(a,[1,a.shape[0],a.shape[1],a.shape[2]]));var s={images:o},u={alignCorners:n,halfPixelCenters:r,size:t},c=yY.runKernel("ResizeNearestNeighbor",s,u);return i?wZ(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),resizeBilinear:N1,rotateWithOffset:f1,cropAndResize:l1,nonMaxSuppression:h1,nonMaxSuppressionAsync:C1,nonMaxSuppressionWithScore:E1,nonMaxSuppressionWithScoreAsync:S1,nonMaxSuppressionPadded:T1,nonMaxSuppressionPaddedAsync:A1,transform:AY({transform_:
/**
	     * @license
	     * Copyright 2021 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */
function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,i=SY(e,"image","transform","float32"),s=SY(t,"transforms","transform","float32");qX(4===i.rank,(function(){return"Error in transform: image must be rank 4,but got rank ".concat(i.rank,".")})),qX(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),qX(null==o||2===o.length,(function(){return"Error in transform: outputShape must be [height, width] or null, but got ".concat(o,".")}));var u={image:i,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:o};return yY.runKernel("Transform",u,c)}})};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function R1(e,t){var n=e[0].length;e.forEach((function(e,t){qX(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same as the rank of the rest (").concat(n,")")}))})),qX(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var o=0;o<n;o++)qX(o===t||e[o]===r[o],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") does not match the shape of the rest (").concat(r,") along the non-concatenated axis ").concat(a,".")}))}))}function O1(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function F1(e){return e<=30?e:hQ(e,Math.floor(Math.sqrt(e)))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function M1(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function D1(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var o=t.length,i=0;i<o;++i)a=a.concat([e[i+1]/t[i],t[i]]);a=a.concat(e.slice(o+1))}return a}function B1(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var o=[],i=[],s=1;s<e;++s)s>=2*t+1||s%2==1?i.push(s):o.push(s);r.push.apply(r,o),r.push(0),r.push.apply(r,i)}return r}function P1(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function L1(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function U1(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function V1(){var e;SQ().getBool("IS_TEST")||(e=console).warn.apply(e,arguments)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function W1(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function z1(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function j1(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function H1(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function G1(e,t){return{real:e[2*t],imag:e[2*t+1]}}function K1(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function q1(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}function X1(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Q1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"==typeof t)qX(e.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{qX(t.reduce((function(e,t){return-1===t&&(e+=1),e}),0)<=1,(function(){return"There should be only one negative value in split array."}));var a=t.indexOf(-1);if(-1!==a){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[a]=e.shape[n]-o}qX(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Y1(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=hQ(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=hQ(e,n+1);return n}function $1(e,t,n){for(var r=[],a=e.length,o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}function Z1(e,t,n,r){var a=t.shape.length,o=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>o)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(o,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var i=0;i<r;++i)if(e.shape[i]!==t.shape[i])throw new Error("x.shape[".concat(i,"]: ").concat(e.shape[i]," should be equal to indices.shape[").concat(i,"]: ").concat(t.shape[i],"."));for(var s=e.shape[n],u=[],c=1,l=1,d=1,f=0;f<r;++f)u.push(e.shape[f]),c*=e.shape[f];for(var p=r;p<n;p++)u.push(e.shape[p]),l*=e.shape[p];for(var h=r;h<a;h++)u.push(t.shape[h]);for(var m=n+1;m<o;m++)u.push(e.shape[m]),d*=e.shape[m];return{batchSize:c,sliceSize:d,outerSize:l,dimSize:s,outputShape:u}}var J1=Object.freeze({__proto__:null,segOpComputeOptimalWindowSize:Y1,computeOutShape:$1,collectGatherOpShapeInfo:Z1});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function e2(e){try{return e.map((function(e){return jQ(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(e))}}function t2(e){return e.map((function(e){return zQ(e)}))}var n2,r2,a2=Object.freeze({__proto__:null,slice_util:V$,segment_util:J1,fromUint8ToStringArray:e2,fromStringArrayToUint8:t2,upcastType:cY,axesAreInnerMostDims:TJ,combineLocations:AJ,computeOutAndReduceShapes:NJ,expandShapeToKeepDim:_J,assertAxesAreInnerMostDims:RJ,getAxesPermutation:OJ,getUndoAxesPermutation:FJ,getInnerMostAxes:MJ,getBroadcastDims:XZ,getReductionAxes:QZ,assertAndGetBroadcastShape:YZ,assertParamsConsistent:R1,computeOutShape:O1,computeDilation2DInfo:cZ,computePool2DInfo:lZ,computePool3DInfo:dZ,computeConv2DInfo:fZ,computeConv3DInfo:pZ,computeDefaultPad:hZ,tupleValuesAreOne:bZ,eitherStridesOrDilationsAreOne:xZ,convertConv2DDataFormat:kZ,getFusedDyActivation:t1,getFusedBiasGradient:n1,applyActivation:r1,shouldFuse:a1,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:F1,getImageCenter:M1,getReshaped:D1,getPermuted:B1,getReshapedPermuted:P1,getSliceBeginCoords:L1,getSliceSize:U1,prepareAndValidate:x$,validateUpdateShape:k$,validateInput:w$,calculateShapes:I$,SELU_SCALEALPHA:1.7580993408473768,SELU_SCALE:1.0507009873554805,ERF_P:.3275911,ERF_A1:.254829592,ERF_A2:-.284496736,ERF_A3:1.421413741,ERF_A4:-1.453152027,ERF_A5:1.061405429,warn:V1,log:function(){var e;SQ().getBool("IS_TEST")||(e=console).log.apply(e,arguments)},mergeRealAndImagArrays:W1,splitRealAndImagArrays:z1,complexWithEvenIndex:j1,complexWithOddIndex:H1,getComplexWithIndex:G1,assignToTypedArray:K1,exponents:q1,exponent:X1,prepareSplitSize:Q1});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 * =============================================================================
	 */!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(n2||(n2={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(r2||(r2={}));
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var o2={};function i2(e){return o2[e]}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function s2(e,t,n,r,a){var o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){var i=o.inputIndexStart,s=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?i+1:o.inputIndexEnd;if("tensor"===o.type)return u2(t.inputNames[o.inputIndexStart],n,r,a);if("tensors"===o.type)return t.inputNames.slice(i,s).map((function(e){return u2(e,n,r,a)}));var u=u2(t.inputNames.slice(i)[0],n,r,a),c=u.dataSync();return"number"===o.type?c[0]:vQ(u.shape,c)}var l=t.attrParams[e];return l&&l.value}function u2(e,t,n,r){var a=qy(d2(e),2),o=a[0],i=a[1];if(null!=r){var s=r.getHashTableHandleByName(o);if(null!=s)return s}var u=n.currentContextIds.find((function(e){return!!t[l2(o,e)]}));return void 0!==u?t[l2(o,u)][i]:void 0}function c2(e,t){var n=qy(d2(e),2),r=n[0],a=n[1];return[l2(r,t&&t.currentContextId),a]}function l2(e,t){return t?"".concat(e,"-").concat(t):e}function d2(e){var t=e.split(":");return 1===t.length?[e,0]:[t[0],Number(t[t.length-1])]}function f2(e,t,n){var r=s2("pad",e,t,n);if("explicit"===r){r=s2("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],o=0;o<4;o++)a[o][0]=r[2*o],a[o][1]=r[2*o+1];return a}return r}function p2(e){return e.kept?e:u$(e)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var h2=Object.freeze({__proto__:null,json:[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),m2=Object.freeze({__proto__:null,json:[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),g2=Object.freeze({__proto__:null,json:[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}]}),v2=Object.freeze({__proto__:null,json:[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]}),y2=Object.freeze({__proto__:null,json:[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]}),b2=Object.freeze({__proto__:null,json:[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),x2=Object.freeze({__proto__:null,json:[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]}),k2=Object.freeze({__proto__:null,json:[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]}),w2=Object.freeze({__proto__:null,json:[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}]}),I2=Object.freeze({__proto__:null,json:[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]}),C2=Object.freeze({__proto__:null,json:[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),E2=Object.freeze({__proto__:null,json:[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),S2=Object.freeze({__proto__:null,json:[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]}),T2=Object.freeze({__proto__:null,json:[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]}),A2=Object.freeze({__proto__:null,json:[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]}),N2=Object.freeze({__proto__:null,json:[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]}),_2=Object.freeze({__proto__:null,json:[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}]}),R2=function(){function e(){var t;_y(this,e);var n=(t=[]).concat.apply(t,Xy([h2,m2,g2,v2,y2,b2,x2,C2,I2,k2,E2,S2,T2,A2,N2,_2,w2].map((function(e){return e.json}))));this.opMappers=n.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return Oy(e,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),Oy(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],o=[],i=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?o.push(e[n.name]):null!=n.input&&0!==n.input.length||i.push(e[n.name]),e}),{}),u=[],c=[],l={},d={};null!=n&&(l=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));var f=Object.keys(s);f.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e){var n=qy(c2(e),1)[0];t.inputs.push(s[n]),s[n].children.push(t)}))})),0===Object.keys(d).length?f.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(d).forEach((function(e){var t=qy(c2(e),1)[0],n=s[t];null!=n&&(n.signatureKey=d[e],c.push(n))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=qy(c2(e),1)[0],n=s[t];n&&(n.signatureKey=l[e],u.push(n))})):u=a;var p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var h={nodes:s,inputs:u,outputs:c,weights:o,placeholders:a,signature:n,functions:p};return i.length>0&&(h.initNodes=i),h}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=i2(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r,a=n.type;switch(n.type){case"string":void 0===(r=F2(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=F2(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(r=j2(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=j2(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(r=D2(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(r=D2(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(r=z2(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=z2(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(r=M2(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=M2(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(r=G2(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=G2(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(r=W2(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=W2(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(r=H2(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=H2(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(r=L2(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=L2(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(r=U2(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=U2(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(r=P2(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=P2(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:r,type:a},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var o=[],i=[];e.signature.inputArg.forEach((function(e){var t=qy(c2(e.name),1)[0],n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:B2(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,o.push(n),a[t]=n})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e){var n=qy(c2(e),1)[0];t.inputs.push(a[n]),a[n].children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=qy(c2(s[e.name]),2),n=t[0],r=t[1],o=a[n];null!=o&&(o.defaultOutput=r,i.push(o))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:o,outputs:i,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}]),e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function O2(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=SQ().global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function F2(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?O2(a.s,r):n}function M2(e,t,n){var r=e[t];return r?r.b:n}function D2(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function B2(e){switch("string"==typeof e&&(e=n2[e]),e){case n2.DT_FLOAT:return"float32";case n2.DT_INT32:case n2.DT_INT64:case n2.DT_INT8:case n2.DT_UINT8:return"int32";case n2.DT_BOOL:return"bool";case n2.DT_DOUBLE:return"float32";case n2.DT_STRING:return"string";default:return null}}function P2(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function L2(e,t,n){var r=e[t];return r&&r.type?B2(r.type):n}function U2(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return B2(e)})):n}function V2(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"==typeof e.size?e.size:parseInt(e.size,10)})):[]}function W2(e,t,n){var r=e[t];return r&&r.shape?V2(r.shape):n}function z2(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"==typeof e?e:parseInt(e,10)})):n}function j2(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return O2(e,r)})):n}function H2(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return V2(e)})):n}function G2(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var K2=function(){function e(t,n,r){var a=this;_y(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return Oy(e,[{key:"getInput",value:function(e){return u2(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return u2(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return D2(this.node.rawAttrs,e,t);if(null!=n.s)return F2(this.node.rawAttrs,e,t);if(null!=n.b)return M2(this.node.rawAttrs,e,t);if(null!=n.shape)return W2(this.node.rawAttrs,e,t);if(null!=n.type)return L2(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return z2(this.node.rawAttrs,e,t);if(null!=n.list.s)return j2(this.node.rawAttrs,e,t);if(null!=n.list.shape)return H2(this.node.rawAttrs,e,t);if(null!=n.list.b)return G2(this.node.rawAttrs,e,t);if(null!=n.list.type)return U2(this.node.rawAttrs,e,t)}return t}}]),e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function q2(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!=typeof e&&"number"!=typeof t){qX(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],o=t[r];qX(a<0||o<0||a===o,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function X2(e){return"number"!=typeof e&&!e.some((function(e){return e<0}))}function Q2(e,t,n){var r=Y2(e,n),a=!X2(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=Y2(e.shape,r)})),!X2(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function Y2(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],o=t[r];if(a>=0&&o>=0&&a!==o)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:o}return n}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var $2=function(){function e(t,n,r,a,o,i,s){_y(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=o,this.dynamicSize=i,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=C0(0),j$(this.idTensor)}return Oy(e,[{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?)."));return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),q2(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,j$(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,because the index size: ").concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return RY([],[0].concat(this.elementShape));var r=this.readMany(e);return q2(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),U0(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return RY([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return q2(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),EZ(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,Xy(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,X0(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), and the TensorArray is not marked as dynamically resizeable"));var o=0===r?0:t.size/r,i=[];z$((function(){t=wZ(t,[1,r,o]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],o];i[s]=wZ(TZ(t,u,c),n.elementShape)}return i}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,i)}},{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}}]),e}(),Z2=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;_y(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));q2(n,e.shape,"TensorList shape mismatch: "),j$(e)})),this.idTensor=C0(0),this.maxNumElements=a,j$(this.idTensor)}return Oy(e,[{key:"copy",value:function(){return new e(Xy(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));q2(e,this.elementShape,"TensorList shape mismatch: ");var a=Q2(this.elementShape,this.tensors,e);return z$((function(){var e=n.tensors.map((function(e){return wZ(e,a)}));return U0(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=Q2(this.elementShape,this.tensors,e),r=this.tensors.pop();return q2(r.shape,e,"TensorList shape mismatch: "),wZ(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(q2(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");j$(e),this.tensors.push(e)}},{key:"resize",value:function(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));this.tensors.length=e}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));q2(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=Q2(this.elementShape,this.tensors,t);return wZ(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));q2(this.elementShape,t.shape,"TensorList shape mismatch: "),j$(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));q2(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=Q2(this.elementShape,this.tensors,n);return 0===e.length?RY([],[0].concat(a)):z$((function(){var t=e.map((function(e){return wZ(r.tensors[e],a)}));return U0(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));q2(this.elementShape,t,"TensorList shape mismatch: ");var r=Q2(this.elementShape,this.tensors,t);return 0===this.size()?RY([],[0].concat(r)):z$((function(){var e=n.tensors.map((function(e){return wZ(e,r)}));return EZ(e,0)}))}},{key:"id",get:function(){return this.idTensor.id}}]),e}(),J2=function(){var e=Ny(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,u,c,l,d,f,p,h,m,g,v,y,b,x,k,w,I,C,E,S,T,A,N,_,R,O,F,M,D,B,P,L,U,V,W,z,j,H,G,K,q,X,Q,Y,$,Z,J,ee,te,ne,re,ae,oe,ie,se,ue,ce,le,de,fe,pe,he,me,ge,ve,ye,be,xe,ke,we,Ie,Ce,Ee,Se,Te,Ae;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?12:"LoopCond"===e.t0?16:"Switch"===e.t0?17:"Merge"===e.t0?28:"Enter"===e.t0?32:"Exit"===e.t0?34:"NextIteration"===e.t0?36:"TensorArrayV3"===e.t0?38:"TensorArrayWriteV3"===e.t0?40:"TensorArrayReadV3"===e.t0?42:"TensorArrayGatherV3"===e.t0?44:"TensorArrayScatterV3"===e.t0?46:"TensorArrayConcatV3"===e.t0?48:"TensorArraySplitV3"===e.t0?50:"TensorArraySizeV3"===e.t0?52:"TensorArrayCloseV3"===e.t0?54:"TensorListSetItem"===e.t0?56:"TensorListGetItem"===e.t0?58:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?60:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?62:"TensorListGather"===e.t0?66:"TensorListStack"===e.t0?68:"TensorListFromTensor"===e.t0?70:"TensorListConcat"===e.t0?72:"TensorListPushBack"===e.t0?74:"TensorListPopBack"===e.t0?76:"TensorListSplit"===e.t0?78:80;break;case 3:return a=s2("thenBranch",t,n,r),o=s2("elseBranch",t,n,r),i=s2("cond",t,n,r),s=s2("args",t,n,r),e.next=6,i.data();case 6:if(!e.sent[0]){e.next=10;break}e.t1=r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap),e.next=11;break;case 10:e.t1=r.functionMap[o].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap);case 11:return e.abrupt("return",e.t1);case 12:return e.delegateYield(regeneratorRuntime.mark((function e(){var a,o,i,s,u,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s2("body",t,n,r),o=s2("cond",t,n,r),i=s2("args",t,n,r),e.next=5,r.functionMap[o].executeFunctionAsync(i,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=i.map((function(e){return e.id})),e.next=9,s[0].data();case 9:c=e.sent,s.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||e.dispose()})),l=i,d=regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[o].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return i=e.sent,e.next=11,i[0].data();case 11:c=e.sent,i.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(d(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t2",13);case 13:if("object"!==Ty(u=e.t2)){e.next=16;break}return e.abrupt("return",u.v);case 16:return e.abrupt("return",[p2(s2("pred",t,n,r))]);case 17:return c=s2("pred",t,n,r),(l=s2("data",t,n,r)).kept||(l=p2(l)),e.next=22,c.data();case 22:if(!e.sent[0]){e.next=26;break}e.t3=[void 0,l],e.next=27;break;case 26:e.t3=[l,void 0];case 27:return e.abrupt("return",e.t3);case 28:if(!(d=t.inputNames.find((function(e){return void 0!==u2(e,n,r)})))){e.next=31;break}return e.abrupt("return",[p2(u2(d,n,r))]);case 31:return e.abrupt("return");case 32:return f=s2("frameName",t,n,r),p=s2("tensor",t,n,r),e.abrupt("return",(r.enterFrame(f),[p2(p)]));case 34:return h=s2("tensor",t,n,r),e.abrupt("return",(r.exitFrame(),[p2(h)]));case 36:return m=s2("tensor",t,n,r),e.abrupt("return",(r.nextIteration(),[p2(m)]));case 38:return g=s2("size",t,n,r),v=s2("dtype",t,n,r),y=s2("elementShape",t,n,r),b=s2("dynamicSize",t,n,r),x=s2("clearAfterRead",t,n,r),k=s2("identicalElementShapes",t,n,r),w=s2("name",t,n,r),I=new $2(w,v,g,y,k,b,x),e.abrupt("return",(r.addTensorArray(I),[I.idTensor,C0(1)]));case 40:return C=s2("tensorArrayId",t,n,r),E=s2("index",t,n,r),S=s2("tensor",t,n,r),T=r.getTensorArray(C.id),e.abrupt("return",(T.write(E,S),[T.idTensor]));case 42:return A=s2("tensorArrayId",t,n,r),N=s2("index",t,n,r),e.abrupt("return",[r.getTensorArray(A.id).read(N)]);case 44:return _=s2("tensorArrayId",t,n,r),R=s2("indices",t,n,r),O=s2("dtype",t,n,r),e.abrupt("return",[r.getTensorArray(_.id).gather(R,O)]);case 46:return F=s2("tensorArrayId",t,n,r),M=s2("indices",t,n,r),D=s2("tensor",t,n,r),B=r.getTensorArray(F.id),e.abrupt("return",(B.scatter(M,D),[B.idTensor]));case 48:return P=s2("tensorArrayId",t,n,r),L=r.getTensorArray(P.id),U=s2("dtype",t,n,r),e.abrupt("return",[L.concat(U)]);case 50:return V=s2("tensorArrayId",t,n,r),W=s2("tensor",t,n,r),z=s2("lengths",t,n,r),j=r.getTensorArray(V.id),e.abrupt("return",(j.split(z,W),[j.idTensor]));case 52:return H=s2("tensorArrayId",t,n,r),e.abrupt("return",[C0(r.getTensorArray(H.id).size(),"int32")]);case 54:return G=s2("tensorArrayId",t,n,r),K=r.getTensorArray(G.id),e.abrupt("return",(K.clearAndClose(),[K.idTensor]));case 56:return q=s2("tensorListId",t,n,r),X=s2("index",t,n,r),Q=s2("tensor",t,n,r),Y=r.getTensorList(q.id),e.abrupt("return",(Y.setItem(X,Q),[Y.idTensor]));case 58:return $=s2("tensorListId",t,n,r),Z=s2("index",t,n,r),J=s2("elementShape",t,n,r),ee=s2("elementDType",t,n,r),e.abrupt("return",[r.getTensorList($.id).getItem(Z,J,ee)]);case 60:return te=s2("indices",t,n,r),ne=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,Xy(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var o=new Z2([],n,e.dtype,r),i=X0(e,0);return t.forEach((function(e,t){o.setItem(e,i[t])})),o}(s2("tensor",t,n,r),te,s2("elementShape",t,n,r),s2("numElements",t,n,r)),e.abrupt("return",(r.addTensorList(ne),[ne.idTensor]));case 62:return re=s2("elementShape",t,n,r),ae=s2("elementDType",t,n,r),oe="TensorListReserve"===t.op?"numElements":"maxNumElements",ie=function(e,t,n){return new Z2([],e,t,n)}(re,ae,s2(oe,t,n,r)),e.abrupt("return",(r.addTensorList(ie),[ie.idTensor]));case 66:return se=s2("tensorListId",t,n,r),ue=s2("indices",t,n,r),ce=s2("elementShape",t,n,r),le=s2("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(se.id).gather(ue,le,ce)]);case 68:return de=s2("tensorListId",t,n,r),fe=s2("elementShape",t,n,r),pe=s2("elementDType",t,n,r),he=s2("numElements",t,n,r),e.abrupt("return",[r.getTensorList(de.id).stack(fe,pe,he)]);case 70:return me=function(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));q2(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=X0(e);return new Z2(a,t,r)}(s2("tensor",t,n,r),s2("elementShape",t,n,r),s2("elementDType",t,n,r)),e.abrupt("return",(r.addTensorList(me),[me.idTensor]));case 72:return ge=s2("tensorListId",t,n,r),ve=r.getTensorList(ge.id),ye=s2("dtype",t,n,r),be=s2("elementShape",t,n,r),e.abrupt("return",[ve.concat(ye,be)]);case 74:return xe=s2("tensorListId",t,n,r),ke=s2("tensor",t,n,r),we=r.getTensorList(xe.id),e.abrupt("return",(we.pushBack(ke),[we.idTensor]));case 76:return Ie=s2("tensorListId",t,n,r),Ce=s2("elementShape",t,n,r),Ee=s2("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(Ie.id).popBack(Ce,Ee)]);case 78:return Se=s2("tensor",t,n,r),Te=s2("elementShape",t,n,r),Ae=function(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var o=Y2(e.shape.slice(1),n),i=0===r?0:e.size/r,s=z$((function(){var n=[];e=wZ(e,[1,r,i]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],i];n[s]=wZ(TZ(e,u,c),o)}return e.dispose(),n})),u=new Z2([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}(Se,s2("lengths",t,n,r),Te),e.abrupt("return",(r.addTensorList(Ae),[Ae.idTensor]));case 80:throw TypeError("Node type ".concat(t.op," is not implemented"));case 81:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function e3(e,t,n){var r=qy(s2("fusedOps",e,t,n),2),a=r[0],o=r[1],i="biasadd"===a,s="prelu"===o,u="fusedbatchnorm"===a,c=s2("numArgs",e,t,n);if(i){if(s&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");var l=s2("strides",e,t,n),d=f2(e,t,n),f=s2("dataFormat",e,t,n).toUpperCase(),p=s2("dilations",e,t,n),h=qy(s2("args",e,t,n),2);return{stride:l,pad:d,dataFormat:f,dilations:p,biasArg:h[0],preluArg:h[1],activationFunc:o,leakyreluAlpha:s2("leakyreluAlpha",e,t,n)}}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function t3(e,t,n){return{boxes:s2("boxes",e,t,n),scores:s2("scores",e,t,n),maxOutputSize:s2("maxOutputSize",e,t,n),iouThreshold:s2("iouThreshold",e,t,n),scoreThreshold:s2("scoreThreshold",e,t,n),softNmsSigma:s2("softNmsSigma",e,t,n)}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var n3=function(){function e(t,n){_y(this,e),this.keyDType=t,this.valueDType=n,this.handle=C0(0),this.tensorMap=new Map,j$(this.handle)}var t,n;return Oy(e,[{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return C0(this.size(),"int32")}},{key:"import",value:(n=Ny(regeneratorRuntime.mark((function e(t,n){var r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",(this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),z$((function(){var e=X0(n),t=r.length,o=e.length;qX(t===o,(function(){return"The number of elements doesn't match, keys has ".concat(t," elements, the values has ").concat(o," elements.")}));for(var i=0;i<t;i++){var s=r[i],u=e[i];j$(u),a.tensorMap.set(s,u)}return a.handle}))));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"find",value:(t=Ny(regeneratorRuntime.mark((function e(t,n){var r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",z$((function(){for(var e=[],t=0;t<r.length;t++){var o=r[t],i=a.findWithDefault(o,n);e.push(i)}return U0(e)})));case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ").concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ").concat(t.dtype))}},{key:"id",get:function(){return this.handle.id}}]),e}();
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function r3(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return z$((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[K$(s2("a",e,t,n),s2("b",e,t,n))];case"AddN":return[J$(s2("tensors",e,t,n))];case"FloorMod":case"Mod":return[KJ(s2("a",e,t,n),s2("b",e,t,n))];case"Mul":return[Q$(s2("a",e,t,n),s2("b",e,t,n))];case"RealDiv":case"Div":return[X$(s2("a",e,t,n),s2("b",e,t,n))];case"DivNoNan":return[eJ(s2("a",e,t,n),s2("b",e,t,n))];case"FloorDiv":return[q$(s2("a",e,t,n),s2("b",e,t,n))];case"Sub":return[CJ(s2("a",e,t,n),s2("b",e,t,n))];case"Minimum":return[HJ(s2("a",e,t,n),s2("b",e,t,n))];case"Maximum":return[WJ(s2("a",e,t,n),s2("b",e,t,n))];case"Pow":return[t0(s2("a",e,t,n),s2("b",e,t,n))];case"SquaredDifference":return[P0(s2("a",e,t,n),s2("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"basic_math":return z$((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[Y$(s2("x",e,t,n))];case"Acos":return[$$(s2("x",e,t,n))];case"Acosh":return[Z$(s2("x",e,t,n))];case"Asin":return[aZ(s2("x",e,t,n))];case"Asinh":return[oZ(s2("x",e,t,n))];case"Atan":return[iZ(s2("x",e,t,n))];case"Atan2":return[sZ(s2("x",e,t,n),s2("y",e,t,n))];case"Atanh":return[uZ(s2("x",e,t,n))];case"Ceil":return[FZ(s2("x",e,t,n))];case"Complex":return[NY(s2("real",e,t,n),s2("imag",e,t,n))];case"Cos":return[WZ(s2("x",e,t,n))];case"Cosh":return[zZ(s2("x",e,t,n))];case"Elu":return[tJ(s2("x",e,t,n))];case"Erf":return[nJ(s2("x",e,t,n))];case"Exp":return[rJ(s2("x",e,t,n))];case"Expm1":return[oJ(s2("x",e,t,n))];case"Floor":return[uJ(s2("x",e,t,n))];case"Log":return[yJ(s2("x",e,t,n))];case"Log1p":return[bJ(s2("x",e,t,n))];case"Imag":return[fJ(s2("x",e,t,n))];case"Neg":return[kJ(s2("x",e,t,n))];case"Reciprocal":return[y0(s2("x",e,t,n))];case"Real":return[v0(s2("x",e,t,n))];case"Relu":return[b0(s2("x",e,t,n))];case"Round":return[w0(s2("x",e,t,n))];case"Selu":return[E0(s2("x",e,t,n))];case"Sigmoid":return[SZ(s2("x",e,t,n))];case"Sin":return[A0(s2("x",e,t,n))];case"Sign":return[T0(s2("x",e,t,n))];case"Sinh":return[N0(s2("x",e,t,n))];case"Softplus":return[wJ(s2("x",e,t,n))];case"Sqrt":return[B0(s2("x",e,t,n))];case"Square":return[qJ(s2("x",e,t,n))];case"Tanh":return[AZ(s2("x",e,t,n))];case"Tan":return[z0(s2("x",e,t,n))];case"ClipByValue":return[MZ(s2("x",e,t,n),s2("clipValueMin",e,t,n),s2("clipValueMax",e,t,n))];case"Relu6":return[x0(s2("x",e,t,n))];case"Rsqrt":return[I0(u2(e.inputNames[0],t,n))];case"Prod":return[r0(s2("x",e,t,n),s2("axes",e,t,n))];case"LeakyRelu":return[pJ(s2("x",e,t,n),s2("alpha",e,t,n))];case"Prelu":return[n0(s2("x",e,t,n),s2("alpha",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"control":return J2(e,t,n);case"convolution":return z$((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=s2("stride",e,t,n),a=s2("pad",e,t,n),o=s2("dataFormat",e,t,n).toUpperCase(),i=s2("dilation",e,t,n);return[PZ(s2("x",e,t,n),s2("filter",e,t,n),r,a,o,i)];case"Conv2D":var s=s2("strides",e,t,n),u=f2(e,t,n),c=s2("dataFormat",e,t,n).toUpperCase(),l=s2("dilations",e,t,n);return[BZ(s2("x",e,t,n),s2("filter",e,t,n),[s[1],s[2]],u,c,[l[1],l[2]])];case"_FusedConv2D":var d=e3(e,t,n),f=d.stride,p=d.pad,h=d.dataFormat,m=d.dilations,g=d.biasArg,v=d.preluArg,y=d.activationFunc,b=d.leakyreluAlpha;return[o1({x:s2("x",e,t,n),filter:s2("filter",e,t,n),strides:[f[1],f[2]],pad:p,dataFormat:h,dilations:[m[1],m[2]],bias:g,activation:y,preluActivationWeights:v,leakyreluAlpha:b})];case"FusedDepthwiseConv2dNative":var x=e3(e,t,n),k=x.stride,w=x.pad,I=x.dataFormat,C=x.dilations,E=x.biasArg,S=x.preluArg,T=x.activationFunc,A=x.leakyreluAlpha;return[u1({x:s2("x",e,t,n),filter:s2("filter",e,t,n),strides:[k[1],k[2]],pad:w,dataFormat:I,dilations:[C[1],C[2]],bias:E,activation:T,preluActivationWeights:S,leakyreluAlpha:A})];case"Conv2DBackpropInput":case"Conv2dTranspose":var N=s2("outputShape",e,t,n),_=s2("strides",e,t,n),R=f2(e,t,n);return[UZ(s2("x",e,t,n),s2("filter",e,t,n),N,[_[1],_[2]],R)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var O=s2("strides",e,t,n),F=f2(e,t,n),M=s2("dilations",e,t,n),D=s2("dataFormat",e,t,n).toUpperCase();return[KZ(s2("input",e,t,n),s2("filter",e,t,n),[O[1],O[2]],F,D,[M[1],M[2]])];case"Conv3D":var B=s2("strides",e,t,n),P=s2("pad",e,t,n),L=s2("dataFormat",e,t,n).toUpperCase(),U=s2("dilations",e,t,n);return[VZ(s2("x",e,t,n),s2("filter",e,t,n),[B[1],B[2],B[3]],P,L,[U[1],U[2],U[3]])];case"AvgPool":var V=s2("strides",e,t,n),W=s2("pad",e,t,n),z=s2("kernelSize",e,t,n);return[IZ(s2("x",e,t,n),[z[1],z[2]],[V[1],V[2]],W)];case"MaxPool":var j=s2("strides",e,t,n),H=s2("pad",e,t,n),G=s2("kernelSize",e,t,n);return[LJ(s2("x",e,t,n),[G[1],G[2]],[j[1],j[2]],H)];case"MaxPoolWithArgmax":var K=s2("strides",e,t,n),q=s2("pad",e,t,n),X=s2("kernelSize",e,t,n),Q=s2("includeBatchInIndex",e,t,n),Y=VJ(s2("x",e,t,n),[X[1],X[2]],[K[1],K[2]],q,Q);return[Y.result,Y.indexes];case"AvgPool3D":var $=s2("strides",e,t,n),Z=s2("pad",e,t,n),J=s2("kernelSize",e,t,n);return[CZ(s2("x",e,t,n),[J[1],J[2],J[3]],[$[1],$[2],$[3]],Z)];case"MaxPool3D":var ee=s2("strides",e,t,n),te=s2("pad",e,t,n),ne=s2("kernelSize",e,t,n);return[UJ(s2("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"Dilation2D":var re=s2("strides",e,t,n),ae=s2("pad",e,t,n),oe=s2("dilations",e,t,n),ie=re[1],se=re[2],ue=oe[1],ce=oe[2];return[qZ(s2("x",e,t,n),s2("filter",e,t,n),[ie,se],ae,[ue,ce],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"creation":return z$((function(){return function(e,t,n){switch(e.op){case"Fill":var r=s2("shape",e,t,n),a=s2("dtype",e,t,n);return[sJ(r,s2("value",e,t,n),a)];case"LinSpace":return[gJ(s2("start",e,t,n),s2("stop",e,t,n),s2("num",e,t,n))];case"Multinomial":var o=s2("logits",e,t,n),i=s2("numSamples",e,t,n),s=s2("seed",e,t,n);return[XJ(o,i,s)];case"OneHot":var u=s2("indices",e,t,n),c=s2("depth",e,t,n),l=s2("onValue",e,t,n),d=s2("offValue",e,t,n);return[v$(u,c,l,d)];case"Ones":return[$J(s2("shape",e,t,n),s2("dtype",e,t,n))];case"OnesLike":return[ZJ(s2("x",e,t,n))];case"RandomUniform":return[m0(s2("shape",e,t,n),s2("minval",e,t,n),s2("maxval",e,t,n),s2("dtype",e,t,n))];case"Range":return[g0(s2("start",e,t,n),s2("stop",e,t,n),s2("step",e,t,n),s2("dtype",e,t,n))];case"TruncatedNormal":var f=s2("shape",e,t,n),p=s2("mean",e,t,n),h=s2("stdDev",e,t,n),m=s2("seed",e,t,n);return[K0(f,p,h,s2("dtype",e,t,n),m)];case"Zeros":return[YJ(s2("shape",e,t,n),s2("dtype",e,t,n))];case"ZerosLike":return[JZ(s2("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"dynamic":return(i=Ny(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,u,c,l,d,f,p,h,m,g,v,y,b,x,k,w,I,C,E,S,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?14:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?25:"Where"===e.t0?30:"ListDiff"===e.t0?36:37;break;case 3:return a=t3(t,n,r),o=a.boxes,i=a.scores,s=a.maxOutputSize,u=a.iouThreshold,c=a.scoreThreshold,l=a.softNmsSigma,e.next=12,_1.nonMaxSuppressionWithScoreAsync(o,i,s,u,c,l);case 12:return d=e.sent,e.abrupt("return",[d.selectedIndices,d.selectedScores]);case 14:return f=t3(t,n,r),p=f.boxes,h=f.scores,m=f.maxOutputSize,g=f.iouThreshold,v=f.scoreThreshold,y=s2("padToMaxOutputSize",t,n,r),e.next=23,_1.nonMaxSuppressionPaddedAsync(p,h,m,g,v,y);case 23:return b=e.sent,e.abrupt("return",[b.selectedIndices,b.validOutputs]);case 25:return x=t3(t,n,r),k=x.boxes,w=x.scores,I=x.maxOutputSize,C=x.iouThreshold,E=x.scoreThreshold,e.next=28,_1.nonMaxSuppressionAsync(k,w,I,C,E);case 28:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 30:return S=s$(s2("condition",t,n,r),"bool"),e.next=33,Y0(S);case 33:return e.t2=e.sent,T=[e.t2],e.abrupt("return",(S.dispose(),T));case 36:return e.abrupt("return",S0(s2("x",t,n,r),s2("y",t,n,r)));case 37:throw TypeError("Node type ".concat(t.op," is not implemented"));case 38:case"end":return e.stop()}}),e)}))),function(e,t,n){return i.apply(this,arguments)})(e,t,n);case"evaluation":return z$((function(){return function(e,t,n){switch(e.op){case"TopKV2":var r=s2("x",e,t,n),a=s2("k",e,t,n),o=s2("sorted",e,t,n),i=G0(r,a,o);return[i.values,i.indices];case"Unique":var s=s2("x",e,t,n),u=q0(s);return[u.values,u.indices];case"UniqueV2":var c=s2("x",e,t,n),l=s2("axis",e,t,n),d=q0(c,l);return[d.values,d.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"image":return z$((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=s2("images",e,t,n),a=s2("size",e,t,n),o=s2("alignCorners",e,t,n),i=s2("halfPixelCenters",e,t,n);return[_1.resizeBilinear(r,[a[0],a[1]],o,i)];case"ResizeNearestNeighbor":var s=s2("images",e,t,n),u=s2("size",e,t,n),c=s2("alignCorners",e,t,n),l=s2("halfPixelCenters",e,t,n);return[_1.resizeNearestNeighbor(s,[u[0],u[1]],c,l)];case"CropAndResize":var d=s2("image",e,t,n),f=s2("boxes",e,t,n),p=s2("boxInd",e,t,n),h=s2("cropSize",e,t,n),m=s2("method",e,t,n),g=s2("extrapolationValue",e,t,n);return[_1.cropAndResize(d,f,p,h,m,g)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"graph":return z$((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=s2("default",e,t,n);return[u2(e.name,t,n)||r];case"Placeholder":return[u2(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[p2(s2("x",e,t,n))];case"IdentityN":return s2("x",e,t,n).map((function(e){return p2(e)}));case"Snapshot":return[p2(s2("x",e,t,n))];case"Shape":return[j0(s2("x",e,t,n).shape,"int32")];case"ShapeN":return s2("x",e,t,n).map((function(e){return j0(e.shape)}));case"Size":return[C0(s2("x",e,t,n).size,"int32")];case"Rank":return[C0(s2("x",e,t,n).rank,"int32")];case"NoOp":return[C0(1)];case"Print":var a=s2("x",e,t,n),o=s2("data",e,t,n),i=s2("message",e,t,n),s=s2("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(i);for(var u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"logical":return z$((function(){return function(e,t,n){switch(e.op){case"Equal":return[$Z(s2("a",e,t,n),s2("b",e,t,n))];case"NotEqual":return[QJ(s2("a",e,t,n),s2("b",e,t,n))];case"Greater":return[lJ(s2("a",e,t,n),s2("b",e,t,n))];case"GreaterEqual":return[dJ(s2("a",e,t,n),s2("b",e,t,n))];case"Less":return[hJ(s2("a",e,t,n),s2("b",e,t,n))];case"LessEqual":return[mJ(s2("a",e,t,n),s2("b",e,t,n))];case"LogicalAnd":return[DJ(s2("a",e,t,n),s2("b",e,t,n))];case"LogicalNot":return[BJ(s2("a",e,t,n))];case"LogicalOr":return[PJ(s2("a",e,t,n),s2("b",e,t,n))];case"Select":case"SelectV2":return[ZZ(s2("condition",e,t,n),s2("a",e,t,n),s2("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"matrices":return z$((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[g$(s2("a",e,t,n),s2("b",e,t,n),s2("transposeA",e,t,n),s2("transposeB",e,t,n))];case"Transpose":return[y$(s2("x",e,t,n),s2("perm",e,t,n))];case"_FusedMatMul":var r=qy(s2("fusedOps",e,t,n),2),a=r[0],o=r[1],i="biasadd"===a,s="prelu"===o,u=s2("numArgs",e,t,n),c=s2("leakyreluAlpha",e,t,n);if(i){if(s&&2!==u)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==u)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var l=qy(s2("args",e,t,n),2),d=l[0],f=l[1];return[c1({a:s2("a",e,t,n),b:s2("b",e,t,n),transposeA:s2("transposeA",e,t,n),transposeB:s2("transposeB",e,t,n),bias:d,activation:o,preluActivationWeights:f,leakyreluAlpha:c})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"normalization":return z$((function(){return function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[_Z(s2("x",e,t,n),s2("mean",e,t,n),s2("variance",e,t,n),s2("offset",e,t,n),s2("scale",e,t,n),s2("epsilon",e,t,n))];case"LRN":return[vJ(s2("x",e,t,n),s2("radius",e,t,n),s2("bias",e,t,n),s2("alpha",e,t,n),s2("beta",e,t,n))];case"Softmax":return[_0(s2("x",e,t,n))];case"LogSoftmax":return[SJ(s2("x",e,t,n))];case"SparseToDense":return[Z0(s2("sparseIndices",e,t,n),s2("outputShape",e,t,n),s2("sparseValues",e,t,n),s2("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"reduction":return z$((function(){return function(e,t,n){switch(e.op){case"Max":var r=s2("axis",e,t,n),a=s2("keepDims",e,t,n);return[IJ(s2("x",e,t,n),r,a)];case"Mean":var o=s2("axis",e,t,n),i=s2("keepDims",e,t,n);return[zJ(s2("x",e,t,n),o,i)];case"Min":var s=s2("axis",e,t,n),u=s2("keepDims",e,t,n);return[jJ(s2("x",e,t,n),s,u)];case"Sum":var c=s2("axis",e,t,n),l=s2("keepDims",e,t,n);return[EJ(s2("x",e,t,n),c,l)];case"All":var d=s2("axis",e,t,n),f=s2("keepDims",e,t,n);return[eZ(s2("x",e,t,n),d,f)];case"Any":var p=s2("axis",e,t,n),h=s2("keepDims",e,t,n);return[tZ(s2("x",e,t,n),p,h)];case"ArgMax":var m=s2("axis",e,t,n);return[nZ(s2("x",e,t,n),m)];case"ArgMin":var g=s2("axis",e,t,n);return[rZ(s2("x",e,t,n),g)];case"Prod":var v=s2("axis",e,t,n),y=s2("keepDims",e,t,n);return[r0(s2("x",e,t,n),v,y)];case"Cumsum":var b=s2("axis",e,t,n),x=s2("exclusive",e,t,n),k=s2("reverse",e,t,n);return[jZ(s2("x",e,t,n),b,x,k)];case"Bincount":var w=s2("x",e,t,n),I=s2("weights",e,t,n),C=s2("size",e,t,n);return[RZ(w,I,C)];case"DenseBincount":var E=s2("x",e,t,n),S=s2("weights",e,t,n),T=s2("size",e,t,n),A=s2("binaryOutput",e,t,n);return[HZ(E,S,T,A)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"slice_join":return z$((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=s2("n",e,t,n),a=s2("axis",e,t,n),o=s2("tensors",e,t,n);return o=o.slice(0,r),[EZ(o,a)];case"Gather":var i=s2("x",e,t,n),s=s2("indices",e,t,n);return[cJ(i,s$(s,"int32"),0)];case"GatherV2":var u=s2("axis",e,t,n),c=s2("batchDims",e,t,n),l=s2("x",e,t,n),d=s2("indices",e,t,n);return[cJ(l,s$(d,"int32"),u,c)];case"Reverse":for(var f=s2("dims",e,t,n),p=[],h=0;h<f.length;h++)f[h]&&p.push(h);var m=s2("x",e,t,n);return[k0(m,p)];case"ReverseV2":var g=s2("axis",e,t,n),v=s2("x",e,t,n);return[k0(v,g)];case"Slice":var y=s2("begin",e,t,n),b=s2("size",e,t,n);return[TZ(s2("x",e,t,n),y,b)];case"StridedSlice":var x=s2("begin",e,t,n),k=s2("end",e,t,n),w=s2("strides",e,t,n),I=s2("beginMask",e,t,n),C=s2("endMask",e,t,n),E=s2("ellipsisMask",e,t,n),S=s2("newAxisMask",e,t,n),T=s2("shrinkAxisMask",e,t,n),A=s2("x",e,t,n);return[W0(A,x,k,w,I,C,E,S,T)];case"Pack":return z$((function(){var r=s2("axis",e,t,n),a=s2("tensors",e,t,n),o=a[0].shape,i=L0(a[0]).shape,s=a.map((function(e){var t=ZX(e.shape,o);if(!t&&!ZX(L0(e).shape,i))throw new Error("the input tensors shape does not match");return t?e:wZ(e,o)}));return[U0(s,r)]}));case"Unpack":var N=s2("axis",e,t,n),_=s2("tensor",e,t,n);return X0(_,N);case"Tile":var R=s2("reps",e,t,n);return[iJ(s2("x",e,t,n),R)];case"Split":case"SplitV":var O=s2("axis",e,t,n),F=s2("numOrSizeSplits",e,t,n),M=s2("x",e,t,n);return M0(M,F,O);case"ScatterNd":var D=s2("indices",e,t,n),B=s2("values",e,t,n),P=s2("shape",e,t,n);return[$0(D,B,P)];case"GatherNd":var L=s2("x",e,t,n),U=s2("indices",e,t,n);return[J0(L,U)];case"SparseToDense":var V=s2("sparseIndices",e,t,n),W=s2("outputShape",e,t,n),z=s2("sparseValues",e,t,n),j=s2("defaultValue",e,t,n);return[Z0(V,z,W,z.dtype===j.dtype?j:s$(j,z.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"spectral":return z$((function(){return function(e,t,n){switch(e.op){case"FFT":return[R0(s2("x",e,t,n))];case"IFFT":return[O0(s2("x",e,t,n))];case"RFFT":return[D0(s2("x",e,t,n))];case"IRFFT":return[F0(s2("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"transformation":return z$((function(){return function(e,t,n){switch(e.op){case"Cast":return[s$(s2("x",e,t,n),s2("dtype",e,t,n))];case"ExpandDims":var r=s2("axis",e,t,n);return[aJ(s2("x",e,t,n),r)];case"Squeeze":var a=s2("axis",e,t,n);return[L0(s2("x",e,t,n),a)];case"Reshape":return[wZ(s2("x",e,t,n),s2("shape",e,t,n))];case"MirrorPad":return[GJ(s2("x",e,t,n),s2("padding",e,t,n),s2("mode",e,t,n))];case"PadV2":case"Pad":return[JJ(s2("x",e,t,n),s2("padding",e,t,n),s2("constantValue",e,t,n))];case"SpaceToBatchND":var o=s2("blockShape",e,t,n),i=s2("paddings",e,t,n);return[e0(s2("x",e,t,n),o,i)];case"BatchToSpaceND":var s=s2("blockShape",e,t,n),u=s2("crops",e,t,n);return[NZ(s2("x",e,t,n),s,u)];case"DepthToSpace":var c=s2("blockSize",e,t,n),l=s2("dataFormat",e,t,n).toUpperCase();return[GZ(s2("x",e,t,n),c,l)];case"BroadcastTo":return[OZ(s2("x",e,t,n),s2("shape",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"hash_table":return(o=Ny(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,u,c,l,d,f,p,h,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?5:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?10:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?15:17;break;case 3:return o=s2("keyDType",t,n,r),i=s2("valueDType",t,n,r),s=new n3(o,i),e.abrupt("return",(a.addHashTable(t.name,s),[s.handle]));case 5:return u=s2("tableHandle",t,n,r,a),c=s2("keys",t,n,r),l=s2("values",t,n,r),d=a.getHashTableById(u.id),e.next=8,d.import(c,l);case 8:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 10:return f=s2("tableHandle",t,n,r,a),p=s2("keys",t,n,r),h=s2("defaultValue",t,n,r),m=a.getHashTableById(f.id),e.next=13,m.find(p,h);case 13:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 15:return g=s2("tableHandle",t,n,r,a),e.abrupt("return",[a.getHashTableById(g.id).tensorSize()]);case 17:throw TypeError("Node type ".concat(t.op," is not implemented"));case 18:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return o.apply(this,arguments)})(e,t,n,r);case"custom":var a=i2(e.op);if(a&&a.customExecutor)return a.customExecutor(new K2(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()"))}var o,i}(e,t,n);return CQ(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var a3=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};_y(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return Oy(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}},{key:"currentContext",set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},get:function(){return this.contexts}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}}]),e}();
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function o3(e,t,n,r){var a=new Set,o=[],i=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return d2(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return d2(e.name)[0]})));for(var d=Xy(t);d.length>0;){var f=d.pop();(c3(f)||l3(f)||d3(f))&&null==i&&(s=(i=f).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(f.name),null==n[f.name]&&-1===c.indexOf(f.name)&&-1===l.indexOf(f.name)&&(0!==f.inputs.length?f.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),d.push(e))})):o.push(f.name))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:o,dynamicNode:i,syncInputs:s}}var i3=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],s3=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],u3=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function c3(e){return i3.indexOf(e.op)>=0}function l3(e){return s3.indexOf(e.op)>=0}function d3(e){return u3.indexOf(e.op)>=0}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var f3=function(){function e(t,n){var r=this;_y(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}var t,n,r,a;return Oy(e,[{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=o3(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,o=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has the dynamic op '").concat(a.op,"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [").concat(o,"]"));if(r.length>0){var i=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(i,"] from the provided inputs [").concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,o=[],i=Object.keys(a).map((function(e){return d2(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;i.forEach((function(e){r.has(e.name)&&o.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&o.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&o.push(e)}));for(var u=new Set,c=[];o.length>0;){var l=o.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&o.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[d2(e)[0]]})),o=t.map((function(e){return d2(e)[0]})),i=o.map((function(e){return n.graph.nodes[e]}));0===i.length&&(i=this._outputs);var s=this.getCompilationKey(a,i),u=this.compiledMap.get(s);null==u&&(u=this.compile(e,i),this.compiledMap.set(s,u));var c={},l={};return z$((function(){var r=new a3(n.weightMap,c,l,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=qy(d2(t),2),r=n[0],o=[];o[n[1]]=e[t],a[r]=o}));for(var i=n.getFrozenTensorIds(a),s={},d=0;d<u.length;d++){var f=u[d];if(!a[f.name]){var p=r3(f,a,r,n._resourceManager);if(CQ(p))throw new Error("The execution of the op '".concat(f.op,"' returned a promise. Please use model.executeAsync() instead."));a[f.name]=p,n.checkTensorForDisposal(f.name,f,a,r,i,o,s)}}return null==n.parent&&r.dispose(i),t.map((function(e){return u2(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,o,i){"control"!==t.category&&-1===o.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(i[e.id]=(i[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var t=function(e,t,n){return t[l2(e,n.currentContextId)]}(e.name,n,r);null!=t&&t.forEach((function(e){if(e&&!a.has(e.id)){var t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}}))}})))}},{key:"executeAsync",value:(a=Ny(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"_executeAsync",value:(r=Ny(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,u,c,l,d,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>2&&void 0!==f[2]&&f[2],a=f.length>3&&void 0!==f[3]?f[3]:{},o=f.length>4&&void 0!==f[4]?f[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n)),i=new a3(this.weightMap,a,o,this.functionExecutorMap),e.next=7,this.executeWithControlFlow(t,i,n,r);case 7:return s=e.sent,u=n.map((function(e){return u2(e,s,i)})),c=u.map((function(e){return e.id})),l=Object.keys(t).map((function(e){return t[e].id})),d=new Set([].concat(Xy(c),Xy(l),Xy(this.weightIds))),e.abrupt("return",(Object.keys(s).forEach((function(e){s[e].forEach((function(e){!e||e.isDisposed||d.has(e.id)||e.dispose()}))})),null==this.parent&&i.dispose(d),u));case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"executeFunctionAsync",value:(n=Ny(regeneratorRuntime.mark((function e(t,n,r){var a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[o.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"executeWithControlFlow",value:(t=Ny(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,u,c,l,d,f,p,h,m,g,v,y,b,x,k,w=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Object.keys(t),i=o.map((function(e){return w.graph.nodes[d2(e)[0]]})),s=r.map((function(e){return d2(e)[0]})),0===(u=s.map((function(e){return w.graph.nodes[e]}))).length&&(u=this._outputs),c=o3(t,u,this.weightMap,this._initNodes),l=c.usedNodes,d=c.missingInputs,f=c.dynamicNode,p=c.syncInputs,h=[].concat(Xy(i),Xy(this.graph.weights),Xy(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=qy(d2(e),2),r=n[0],a=[];a[n[1]]=t[e],m[r]=a})),g={},v=this.getFrozenTensorIds(m),y={};case 6:if(!(h.length>0)){e.next=12;break}return b=this.processStack(i,h,n,m,y,v,s,g,l),e.next=10,Promise.all(b);case 10:e.next=6;break;case 12:if(null!=f||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((x=u.filter((function(e){return!c3(e)&&!u2(e.name,m,n)})).map((function(e){return e.name}))).length>0)){e.next=17;break}throw k="",null!=f&&(k="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided inputs [").concat(o,"]. Consider providing the following inputs: [").concat(d,"]. ").concat(k));case 17:return e.abrupt("return",m);case 18:case"end":return e.stop()}}),e,this)}))),function(e,n,r,a){return t.apply(this,arguments)})},{key:"processStack",value:function(e,t,n,r,a,o,i,s,u){for(var c=this,l=[],d=function(){var e,d=t.pop();n.currentContext=d.contexts;var f="";if("Enter"===d.node.op&&s2("isConstant",d.node,r,n)&&(e=qy(c2(d.node.name,n),1),f=e[0]),null==r[d.node.name]){var p,h=r3(d.node,r,n,c._resourceManager);f||(p=qy(c2(d.node.name,n),1),f=p[0]);var m=n.currentContext;CQ(h)?l.push(h.then((function(e){return r[f]=e,n.currentContext=m,c.checkTensorForDisposal(f,d.node,r,n,o,i,s),c.processChildNodes(d.node,t,n,r,a,u),e}))):(r[f]=h,c.checkTensorForDisposal(f,d.node,r,n,o,i,s),c.processChildNodes(d.node,t,n,r,a,u))}else c.processChildNodes(d.node,t,n,r,a,u)};t.length>0;)d();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,o){e.children.forEach((function(e){var i=qy(c2(e.name,n),1)[0];!a[i]&&o.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!u2(e,r,n)}))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!u2(e,r,n)}))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=qy(d2(n),1)[0],o=t.graph.nodes[a];if(o.attrParams.shape&&o.attrParams.shape.value){var i=o.attrParams.shape.value;qX(i.length===r.shape.length&&r.shape.every((function(e,t){return-1===i[t]||i[t]===e})),(function(){return"The shape of dict['".concat(o.name,"'] provided in model.execute(dict) must be [").concat(i,"], but was [").concat(r.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&qX(r.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in model.execute(dict) must be ").concat(o.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]?t[this._signature.inputs[n].name]=e[n]:t[n]=e[n];return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=qy(d2(e),1)[0];return null==t.graph.nodes[n]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=qy(d2(e),1)[0];if(!t.graph.nodes[n])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}},{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,Xy(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}}]),e}(),p3=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_y(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return Oy(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),h3=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_y(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new p3}var t,n,r;return Oy(e,[{key:"findIOHandler",value:function(){var e,t,n=this.modelUrl;if(null!=n.load)this.handler=n;else if(null!=this.loadOptions.requestInit)this.handler=h$(n,this.loadOptions);else{var r=(e=n,t=this.loadOptions,LY.getLoadHandlers(e,t));if(0===r.length)r.push(h$(n,this.loadOptions));else if(r.length>1)throw new Error("Found more than one (".concat(r.length,") load handlers for URL '").concat([n],"'"));this.handler=r[0]}}},{key:"load",value:(r=Ny(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.findIOHandler(),null!=this.handler.load){e.next=2;break}throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 2:return e.next=4,this.handler.load();case 4:return t=e.sent,e.abrupt("return",this.loadSync(t));case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=function(e,t){var n,r,a={},o=0,i=rb(t);try{for(i.s();!(r=i.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,d=$X(l),f=void 0;if("quantization"in s){var p=s.quantization;if("uint8"===p.dtype||"uint16"===p.dtype){if(!("min"in p)||!("scale"in p))throw new Error("Weight ".concat(s.name," with quantization ").concat(p.dtype," doesn't have corresponding metadata min and scale."))}else{if("float16"!==p.dtype)throw new Error("Weight ".concat(s.name," has unknown quantization dtype ").concat(p.dtype,". Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'."));if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(p.dtype," which only supports weights of type float32 not ").concat(c,"."))}var h=OY[p.dtype],m=e.slice(o,o+d*h),g="uint8"===p.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===c)if("uint8"===p.dtype||"uint16"===p.dtype){f=new Float32Array(g.length);for(var v=0;v<g.length;v++){var y=g[v];f[v]=y*p.scale+p.min}}else{if("float16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," for weight type float32."));void 0===n&&(n=PY()),f=n(g)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==p.dtype&&"uint16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," for weight type int32."));f=new Int32Array(g.length);for(var b=0;b<g.length;b++){var x=g[b];f[b]=Math.round(x*p.scale+p.min)}}o+=d*h}else if("string"===c){var k=$X(s.shape);f=[];for(var w=0;w<k;w++){var I=new Uint32Array(e.slice(o,o+4))[0];o+=4;var C=new Uint8Array(e.slice(o,o+I));f.push(C),o+=I}}else{var E=OY[c],S=e.slice(o,o+d*E);if("float32"===c)f=new Float32Array(S);else if("int32"===c)f=new Int32Array(S);else if("bool"===c)f=new Uint8Array(S);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));f=new Float32Array(S);for(var T=new Float32Array(f.length/2),A=new Float32Array(f.length/2),N=0;N<T.length;N++)T[N]=f[2*N],A[N]=f[2*N+1];var _=RY(T,l,"float32"),R=RY(A,l,"float32");a[u]=NY(_,R),_.dispose(),R.dispose()}o+=d*E}"complex64"!==c&&(a[u]=RY(f,l,c))}}catch(e){i.e(e)}finally{i.f()}return a}(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new f3(R2.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=R2.Instance.transformGraph(e.modelInitializer);this.initializer=new f3(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:(n=Ny(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=7;break}if(a=t,0!==(r=LY.getSaveHandlers(a)).length){e.next=4;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 4:if(!(r.length>1)){e.next=6;break}throw new Error("Found more than one (".concat(r.length,") save handlers for URL '").concat(t,"'"));case 6:t=r[0];case 7:if(null!=t.save){e.next=9;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 9:return e.abrupt("return",t.save(this.artifacts));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof tY||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has ".concat(this.inputNodes.length," placeholders, while there are ").concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:(t=Ny(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=3,this.executor.executeAsync(t,n);case 3:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}},{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}}]),e}();function m3(e){return g3.apply(this,arguments)}
/**
	    * @license
	    * Copyright 2021 Google LLC. All Rights Reserved.
	    * Licensed under the Apache License, Version 2.0 (the "License");
	    * you may not use this file except in compliance with the License.
	    * You may obtain a copy of the License at
	    *
	    * http://www.apache.org/licenses/LICENSE-2.0
	    *
	    * Unless required by applicable law or agreed to in writing, software
	    * distributed under the License is distributed on an "AS IS" BASIS,
	    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	    * See the License for the specific language governing permissions and
	    * limitations under the License.
	    * =============================================================================
	    */function g3(){return(g3=Ny(regeneratorRuntime.mark((function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t="".concat(t,"model.json?tfjs-format=file")),r=new h3(t,n),e.next=7,r.load();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v3(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))}function y3(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var b3=function(e){return{startEndTensor:e,startPoint:TZ(e,[0,0],[-1,2]),endPoint:TZ(e,[0,2],[-1,2])}},x3={strides:[8,16],anchors:[2,6]};function k3(e,t){var n,r,a;if(e.topLeft instanceof tY&&e.bottomRight instanceof tY){var o=z$((function(){return[EZ([TZ(CJ(t-1,e.topLeft),0,1),TZ(e.topLeft,1,1)]),EZ([CJ(t-1,TZ(e.bottomRight,0,1)),TZ(e.bottomRight,1,1)])]}));n=o[0],r=o[1],null!=e.landmarks&&(a=z$((function(){var n=CJ(j0([t-1,0]),e.landmarks),r=j0([1,-1]);return Q$(n,r)})))}else{var i=e.topLeft,s=i[0],u=i[1],c=e.bottomRight,l=c[0],d=c[1];n=[t-1-s,u],r=[t-1-l,d],null!=e.landmarks&&(a=e.landmarks.map((function(e){return[t-1-e[0],e[1]]})))}var f={topLeft:n,bottomRight:r};return null!=a&&(f.landmarks=a),null!=e.probability&&(f.probability=e.probability instanceof tY?e.probability.clone():e.probability),f}function w3(e,t){return z$((function(){var n;return n=e.hasOwnProperty("box")?e.box:e,L0(function(e,t){var n=Q$(e.startPoint,t),r=Q$(e.endPoint,t),a=DZ([n,r],1);return b3(a)}(n,t).startEndTensor)}))}var I3,C3,E3,S3=function(){function e(e,t,n,r,a,o){this.blazeFaceModel=e,this.width=t,this.height=n,this.maxFaces=r,this.anchorsData=function(e,t,n){for(var r=[],a=0;a<n.strides.length;a++)for(var o=n.strides[a],i=Math.floor((t+o-1)/o),s=Math.floor((e+o-1)/o),u=n.anchors[a],c=0;c<i;c++)for(var l=o*(c+.5),d=0;d<s;d++)for(var f=o*(d+.5),p=0;p<u;p++)r.push([f,l]);return r}(t,n,x3),this.anchors=H0(this.anchorsData),this.inputSizeData=[t,n],this.inputSize=j0([t,n]),this.iouThreshold=a,this.scoreThreshold=o}return e.prototype.getBoundingBoxes=function(e,t,n){return void 0===n&&(n=!0),v3(this,void 0,void 0,(function(){var r,a,o,i,s,u,c,l,d,f,p,h,m,g,v=this;return y3(this,(function(y){switch(y.label){case 0:return r=z$((function(){var t=_1.resizeBilinear(e,[v.width,v.height]),n=Q$(CJ(X$(t,255),.5),2),r=v.blazeFaceModel.predict(n),a=L0(r),o=function(e,t,n){var r=TZ(e,[0,1],[-1,2]),a=K$(r,t),o=TZ(e,[0,3],[-1,2]),i=X$(o,n),s=X$(a,n),u=X$(i,2),c=CJ(s,u),l=K$(s,u),d=Q$(c,n),f=Q$(l,n);return DZ([d,f],1)}(a,v.anchors,v.inputSize),i=TZ(a,[0,0],[-1,1]);return[a,o,L0(SZ(i))]})),a=r[0],o=r[1],i=r[2],s=console.warn,console.warn=function(){},u=_1.nonMaxSuppression(o,i,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=s,[4,u.array()];case 1:return c=y.sent(),u.dispose(),l=c.map((function(e){return TZ(o,[e,0],[1,-1])})),t?[3,3]:[4,Promise.all(l.map((function(e){return v3(v,void 0,void 0,(function(){var t;return y3(this,(function(n){switch(n.label){case 0:return[4,e.array()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 2:l=y.sent(),y.label=3;case 3:for(d=e.shape[1],f=e.shape[2],p=t?X$([f,d],this.inputSize):[f/this.inputSizeData[0],d/this.inputSizeData[1]],h=[],m=function(e){var r=l[e],o=z$((function(){var o=b3(r instanceof tY?r:H0(r));if(!n)return o;var s,u=c[e];return s=t?TZ(v.anchors,[u,0],[1,2]):v.anchorsData[u],{box:o,landmarks:wZ(L0(TZ(a,[u,5],[1,-1])),[6,-1]),probability:TZ(i,[u],[1]),anchor:s}}));h.push(o)},g=0;g<l.length;g++)m(g);return o.dispose(),i.dispose(),a.dispose(),[2,{boxes:h,scaleFactor:p}]}}))}))},e.prototype.estimateFaces=function(e,t,n,r){return void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!0),v3(this,void 0,void 0,(function(){var a,o,i,s,u,c,l=this;return y3(this,(function(d){switch(d.label){case 0:return a=function(e){return e instanceof tY?[e.shape[0],e.shape[1]]:[e.height,e.width]}(e),o=a[1],i=z$((function(){return e instanceof tY||(e=b$(e)),aJ(s$(e,"float32"),0)})),[4,this.getBoundingBoxes(i,t,r)];case 1:return s=d.sent(),u=s.boxes,c=s.scaleFactor,i.dispose(),t?[2,u.map((function(e){var t=w3(e,c),a={topLeft:TZ(t,[0],[2]),bottomRight:TZ(t,[2],[2])};if(r){var i=e,s=i.landmarks,u=i.probability,l=i.anchor,d=Q$(K$(s,l),c);a.landmarks=d,a.probability=u}return n&&(a=k3(a,o)),a}))]:[2,Promise.all(u.map((function(e){return v3(l,void 0,void 0,(function(){var t,a,i,s,u,l,d,f,p,h,m,g=this;return y3(this,(function(v){switch(v.label){case 0:return t=w3(e,c),r?[3,2]:[4,t.array()];case 1:return u=v.sent(),a={topLeft:u.slice(0,2),bottomRight:u.slice(2)},[3,4];case 2:return[4,Promise.all([e.landmarks,t,e.probability].map((function(e){return v3(g,void 0,void 0,(function(){return y3(this,(function(t){return[2,e.array()]}))}))})))];case 3:i=v.sent(),s=i[0],u=i[1],l=i[2],d=e.anchor,p=(f=c)[0],h=f[1],m=s.map((function(e){return[(e[0]+d[0])*p,(e[1]+d[1])*h]})),a={topLeft:u.slice(0,2),bottomRight:u.slice(2),landmarks:m,probability:l},function(e){e.startEndTensor.dispose(),e.startPoint.dispose(),e.endPoint.dispose()}(e.box),e.landmarks.dispose(),e.probability.dispose(),v.label=4;case 4:return t.dispose(),n&&(a=k3(a,o)),[2,a]}}))}))})))]}}))}))},e}();function T3(e){var t=void 0===e?{}:e,n=t.maxFaces,r=void 0===n?10:n,a=t.inputWidth,o=void 0===a?128:a,i=t.inputHeight,s=void 0===i?128:i,u=t.iouThreshold,c=void 0===u?.3:u,l=t.scoreThreshold,d=void 0===l?.75:l,f=t.modelUrl;return v3(this,void 0,void 0,(function(){var e;return y3(this,(function(t){switch(t.label){case 0:return null==f?[3,2]:[4,m3(f)];case 1:return e=t.sent(),[3,4];case 2:return[4,m3("https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1",{fromTFHub:!0})];case 3:e=t.sent(),t.label=4;case 4:return[2,new S3(e,o,s,r,c,d)]}}))}))}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(I3||(I3={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu"}(C3||(C3={}));var A3={kernelName:"_FusedMatMul",backendName:"wasm",setupFunc:function(e){E3=e.wasm.cwrap("_FusedMatMul",null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,s=t.preluActivationWeights;if("float32"!==a.dtype||"float32"!==o.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var u=r.transposeA,c=r.transposeB,l=r.activation,d=r.leakyreluAlpha,f=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(o.dataId).id,h=0;if(null!=i){var m=n.dataIdMap.get(i.dataId);if(1!==m.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got rank ".concat(m.shape.length,"."));h=m.id}var g=null==s?0:n.dataIdMap.get(s.dataId).id,v=C3[l];if(null==v)throw new Error("".concat(l," activation not yet supported for FusedConv2D in the wasm backend."));var y=u?a.shape[2]:a.shape[1],b=c?o.shape[1]:o.shape[2],x=a.shape[0],k=n.makeOutput([x,y,b],a.dtype),w=n.dataIdMap.get(k.dataId).id,I=new Uint8Array(new Int32Array(a.shape).buffer),C=new Uint8Array(new Int32Array(o.shape).buffer);return E3(f,I,a.shape.length,p,C,o.shape.length,u,c,v,h,g,d||0,w),k}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function N3(e){var t;return{kernelName:e,backendName:"wasm",setupFunc:function(n){t=n.wasm.cwrap(e,null,["number","number"])},kernelFunc:function(e){var n=e.backend,r=e.inputs.x,a=n.dataIdMap.get(r.dataId).id,o=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(o.dataId).id;return 0===$X(o.shape)||t(a,i),o}}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var _3=N3("Abs");
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function R3(e,t,n){var r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(a){var o=a.backend,i=a.inputs,s=i.a,u=i.b,c=o.dataIdMap.get(s.dataId).id,l=o.dataIdMap.get(u.dataId).id,d=null!=n?n:s.dtype,f=YZ(s.shape,u.shape),p=o.makeOutput(f,d);if(0===$X(f))return p;var h=new Uint8Array(new Int32Array(s.shape).buffer),m=new Uint8Array(new Int32Array(u.shape).buffer),g=o.dataIdMap.get(p.dataId).id,v=function(){return r(c,h,s.shape.length,l,m,u.shape.length,I3[s.dtype],g)};if(t&&"float32"===s.dtype)return v(),p;var y=XZ(s.shape,f),b=XZ(u.shape,f),x=y.every((function(e,t){return e===t})),k=b.every((function(e,t){return e===t}));if(x&&k)return v(),p;throw new Error("Broadcasting along outer dims is not yet supported for ".concat(s.dtype," ").concat(e,"."))}}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var O3,F3=R3(RQ,!0),M3={kernelName:"AddN",backendName:"wasm",setupFunc:function(e){O3=e.wasm.cwrap("AddN",null,["array","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===$X(r.shape))return r;var a=t.map((function(e){return n.dataIdMap.get(e.dataId).id})),o=new Uint8Array(new Int32Array(a).buffer),i=n.dataIdMap.get(r.dataId).id;return O3(o,a.length,I3[r.dtype],i),r}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function D3(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var B3,P3={kernelName:"Identity",backendName:"wasm",kernelFunc:D3};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function L3(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=qy(function(e,t){for(var n=[],r=[],a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(var o=0;o<r.length;++o){for(var i=-1,s=0;s<r.length;++s)r[s]>=o&&(-1===i||r[i]>r[s])&&(i=s);r[i]=o}return[n,r]}(t.x.shape,r.perm),2),o=a[0],i=a[1],s=!0,u=0;u<i.length;u++)i[u]!==u&&(s=!1);var c=function(e,t){for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),l={dataId:t.x.dataId,shape:o,dtype:t.x.dtype};if(s){var d=D3({inputs:t,backend:n});return d.shape=c,d}var f=n.makeOutput(c,l.dtype),p=n.dataIdMap.get(l.dataId).id,h=n.dataIdMap.get(f.dataId).id,m=new Uint8Array(new Int32Array(i).buffer),g=new Uint8Array(new Int32Array(l.shape).buffer);return B3(p,g,l.shape.length,I3[l.dtype],h,m,i.length),f}var U3,V3={kernelName:"Transpose",backendName:"wasm",kernelFunc:L3,setupFunc:function(e){B3=e.wasm.cwrap("Transpose",null,["number","array","number","number","number","array","number"])}};
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function W3(e,t,n){var r=e.shape,a=e.shape.length,o=aQ(t,r),i=o,s=OJ(i,a),u=null,c=!1;if(null!=s){for(var l=new Array(a),d=0;d<l.length;d++)l[d]=r[s[d]];i=MJ(i.length,a),u=L3({inputs:{x:e},attrs:{perm:s},backend:n});var f=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(u.dataId).id!==f&&(c=!0)}return{transposed:u,originalAxes:o,axes:i,inputWasTransposed:c}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var z3,j3={kernelName:"ArgMax",backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.axis,a=n.x,o=t.dataIdMap.get(a.dataId).id,i=o,s=a,u=W3(a,r,t),c=u.transposed,l=u.axes,d=u.inputWasTransposed;if(d){var f=t.dataIdMap.get(c.dataId).id;f!==o&&(s=c,i=f)}var p=s.shape.slice(0,-1),h=t.makeOutput(p,"int32"),m=t.dataIdMap.get(h.dataId).id,g=$X(h.shape),v=s.shape[l[0]];return U3(i,I3[s.dtype],g,v,m),d&&t.disposeData(c.dataId),h},setupFunc:function(e){U3=e.wasm.cwrap("ArgMax",null,["number","number","number","number","number"])}},H3={kernelName:"AvgPool",backendName:"wasm",setupFunc:function(e){z3=e.wasm.cwrap("AvgPool",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=r.dataIdMap.get(a.dataId).id,i=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=lZ(a.shape,i,s,1,u,c),d=l.filterHeight,f=l.filterWidth,p=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,g=l.padInfo.left,v=l.strideHeight,y=l.strideWidth,b=l.inChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(l.dataFormat,"'. Please use 'channelsLast'."));if(1!==l.dilationWidth||1!==l.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], got [".concat(l.dilationHeight,", ").concat(l.dilationWidth,"]."));var x=r.makeOutput(l.outShape,"float32"),k=r.dataIdMap.get(x.dataId).id;return z3(o,a.shape[0],a.shape[1],a.shape[2],d,f,p,h,m,g,v,y,b,k),x}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function G3(e){var t=e.inputs,n=e.attrs,r=t.x,a=n.shape,o=$X(r.shape),i=rQ(a,o);return qX(o===$X(i),(function(){return"new shape: ".concat(i,", old shape: ").concat(r.shape,". New shape and old shape must have the same number of elements.")})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:i,dtype:r.dtype}}var K3,q3={kernelName:"Reshape",backendName:"wasm",kernelFunc:G3},X3={kernelName:"BatchMatMul",backendName:"wasm",setupFunc:function(e){K3=e.wasm.cwrap("BatchMatMul",null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=r.transposeA,s=r.transposeB;if("float32"!==a.dtype||"float32"!==o.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");var u=a.shape.length,c=o.shape.length,l=i?a.shape[u-2]:a.shape[u-1],d=s?o.shape[c-1]:o.shape[c-2],f=i?a.shape[u-1]:a.shape[u-2],p=s?o.shape[c-2]:o.shape[c-1],h=a.shape.slice(0,-2),m=o.shape.slice(0,-2),g=$X(h),v=$X(m);qX(u>=2&&c>=2&&(g===v||1===g||1===v),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (".concat(h,") and (").concat(m,").")}));var y=(g>v?a.shape.slice(0,-2):o.shape.slice(0,-2)).concat([f,p]);qX(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (").concat(d,") of Tensors with shapes ").concat(a.shape," and ").concat(o.shape," and transposeA=").concat(i," and transposeB=").concat(s," must match.")}));var b=s?[v,p,d]:[v,d,p],x=G3({inputs:{x:a},backend:n,attrs:{shape:i?[g,l,f]:[g,f,l]}}),k=G3({inputs:{x:o},backend:n,attrs:{shape:b}}),w=n.dataIdMap.get(x.dataId).id,I=n.dataIdMap.get(k.dataId).id,C=i?x.shape[2]:x.shape[1],E=s?k.shape[1]:k.shape[2],S=Math.max(g,v),T=n.makeOutput([S,C,E],x.dtype),A=n.dataIdMap.get(T.dataId).id,N=new Uint8Array(new Int32Array(x.shape).buffer),_=new Uint8Array(new Int32Array(k.shape).buffer);return K3(w,N,x.shape.length,I,_,k.shape.length,i,s,A),n.disposeData(x.dataId),n.disposeData(k.dataId),T.shape=y,T}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Q3(e){var t=e.inputs.x,n=e.attrs.dtype,r=e.backend,a=r.makeOutput(t.shape,n),o=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(o),a}var Y3,$3={kernelName:"Cast",backendName:"wasm",kernelFunc:Q3},Z3=N3("Ceil"),J3={kernelName:"ClipByValue",backendName:"wasm",setupFunc:function(e){Y3=e.wasm.cwrap("ClipByValue",null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.clipValueMin,i=r.clipValueMax,s=n.dataIdMap.get(a.dataId).id,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(u.dataId).id;return Y3(s,o,i,c),u}};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function e4(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&qX("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function t4(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var n4={kernelName:"Abs",backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;e4(t,"abs");var r=new Float32Array($X(t.shape));return r=t4(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function r4(e){return function(t,n,r,a,o){var i=YZ(t,n),s=i.length,u=mQ(i),c=iQ(o,$X(i)),l=t.length,d=n.length,f=mQ(t),p=mQ(n),h=XZ(t,i),m=XZ(n,i);if(h.length+m.length===0)for(var g=0;g<c.length;++g)c[g]=e(r[g%r.length],a[g%a.length]);else for(var v=function(t){var n=IQ(t,s,u),o=n.slice(-l);h.forEach((function(e){return o[e]=0}));var i=wQ(o,l,f),g=n.slice(-d);m.forEach((function(e){return g[e]=0}));var v=wQ(g,d,p);c[t]=e(r[i],a[v])},y=0;y<c.length;++y)v(y);return[c,i]}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function a4(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(a.shape,"float32",i)},s}var o4={kernelName:"Complex",backendName:"cpu",kernelFunc:a4};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function i4(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n)return a4({inputs:{real:i4(e,t,"float32"),imag:i4(e,t,"float32")},backend:e});var r=bQ($X(t),n);return e.makeTensorInfo(t,n,r)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function s4(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var u4={kernelName:"Identity",backendName:"cpu",kernelFunc:s4};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function c4(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var l4={kernelName:"Real",backendName:"cpu",kernelFunc:c4};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function d4(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dtype;if("complex64"===o){if("complex64"===a.dtype)return s4({inputs:{x:a},backend:n});var i=i4(n,a.shape,a.dtype),s=d4({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=a4({inputs:{real:s,imag:i},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var c=c4({inputs:{input:a},backend:n}),l=d4({inputs:{x:c},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(c),l}if(!uQ(a.dtype,o)){var d=s4({inputs:{x:a},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:o}}if("int32"===o){var f=n.data.get(a.dataId).values,p=Int32Array.from(f);return n.makeTensorInfo(a.shape,"int32",p)}if("bool"===o){var h=n.data.get(a.dataId).values,m=VQ([0],a.dtype),g=qy(r4((function(e,t){return e!==t?1:0}))(a.shape,[],h,m,"bool"),2),v=g[0],y=g[1];return n.makeTensorInfo(y,"bool",v)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(o))}var f4={kernelName:"Cast",backendName:"cpu",kernelFunc:d4};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function p4(e,t,n,r){return null==n?function(n){var a=n.inputs,o=n.backend,i=a.a,s=a.b,u=o;e4([i,s],e);var c=u.data.get(i.dataId).values,l=u.data.get(s.dataId).values,d=r||i.dtype,f=qy(t(i.shape,s.shape,c,l,d),2),p=f[0],h=f[1];return u.makeTensorInfo(h,d,p)}:function(e){var a=e.inputs,o=e.backend,i=a.a,s=a.b,u=o;if("complex64"===i.dtype||"complex64"===s.dtype){var c=d4({inputs:{x:i},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),d=l.complexTensorInfos.real,f=l.complexTensorInfos.imag,p=u.data.get(d.dataId).values,h=u.data.get(f.dataId).values,m=d4({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),g=u.data.get(m.dataId),v=g.complexTensorInfos.real,y=g.complexTensorInfos.imag,b=u.data.get(v.dataId).values,x=u.data.get(y.dataId).values,k=qy(n(i.shape,s.shape,p,h,b,x),3),w=k[0],I=k[1],C=k[2],E=u.makeTensorInfo(C,"float32",w),S=u.makeTensorInfo(C,"float32",I),T=a4({inputs:{real:E,imag:S},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(E),u.disposeIntermediateTensorInfo(S),T}var A=u.data.get(i.dataId).values,N=u.data.get(s.dataId).values,_=r||i.dtype,R=qy(t(i.shape,s.shape,A,N,_),2),O=R[0],F=R[1];return u.makeTensorInfo(F,_,O)}}function h4(e){return function(t,n,r,a,o,i){var s=YZ(t,n),u=$X(s),c=s.length,l=mQ(s),d=iQ("float32",u),f=iQ("float32",u),p=XZ(t,s),h=XZ(n,s),m=W1(r,a),g=W1(o,i),v=t.length,y=mQ(t),b=n.length,x=mQ(n);if(p.length+h.length===0)for(var k=0;k<d.length;k++){var w=k%m.length,I=k%g.length,C=e(m[2*w],m[2*w+1],g[2*I],g[2*I+1]);d[k]=C.real,f[k]=C.imag}else for(var E=function(t){var n=IQ(t,c,l),r=n.slice(-v);p.forEach((function(e){return r[e]=0}));var a=wQ(r,v,y),o=n.slice(-b);h.forEach((function(e){return o[e]=0}));var i=wQ(o,b,x),s=e(m[2*a],m[2*a+1],g[2*i],g[2*i+1]);d[t]=s.real,f[t]=s.imag},S=0;S<d.length;S++)E(S);return[d,f,s]}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var m4=r4((function(e,t){return e+t})),g4=h4((function(e,t,n,r){return{real:e+n,imag:t+r}})),v4=p4(RQ,m4,g4),y4={kernelName:RQ,backendName:"cpu",kernelFunc:v4};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function b4(e,t,n,r,a){for(var o=$X(r),i=bQ(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(i[u]+=o>0?t[s]:1)}return i}function x4(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],o=e.shape[1],i=i$([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<o;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?i.set(1,s,c):t.size>0?i.set(i.get(s,c)+t.get(s,u),s,c):i.set(i.get(s,c)+1,s,c))}return i}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function k4(e){return function(t,n,r){for(var a=iQ(n,t.length),o=0;o<t.length;++o)a[o]=e(t[o],r);return a}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function w4(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(e4(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=i,c=u.data.get(s.dataId).values,l=$X(s.shape),d=n||s.dtype,f=sQ(d,l),p=0;p<l;++p)f[p]=t(c[p],o);return u.makeTensorInfo(s.shape,d,f)}}function I4(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(e4(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=i,c=u.data.get(s.dataId).values,l=n||s.dtype,d=t(c,l,o);return u.makeTensorInfo(s.shape,l,d)}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var C4=k4((function(e){return Math.ceil(e)})),E4={kernelName:"Ceil",backendName:"cpu",kernelFunc:I4("Ceil",C4)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function S4(e,t,n,r){var a=sQ(n,$X(t));if(r&&"string"!==n){var o=0;e.forEach((function(e){var t=$X(e.shape);a.set(e.vals,o),o+=t}))}else{var i=0;e.forEach((function(e){for(var r="string"===n?e2(e.vals):e.vals,o=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+i,c=0;c<e.shape[1];++c)a[u+c]=r[o++];i+=e.shape[1]}))}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var T4=k4((function(e){return Math.exp(e)})),A4=I4("Exp",T4),N4={kernelName:"Exp",backendName:"cpu",kernelFunc:A4},_4=k4((function(e){return Math.expm1(e)})),R4={kernelName:"Expm1",backendName:"cpu",kernelFunc:I4("Expm1",_4)},O4=k4((function(e){return Math.floor(e)})),F4={kernelName:"Floor",backendName:"cpu",kernelFunc:I4("Floor",O4)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function M4(e,t,n){for(var r=i$(n,e.dtype),a=0;a<r.size;++a){var o=r.indexToLoc(a).slice(),i=o[0],s=o[2],u=t.locToIndex([i,s]);o[2]=t.values[u];var c=e.locToIndex(o);r.values[a]=e.values[c]}return r}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var D4=r4((function(e,t){return e>t?1:0})),B4={kernelName:"Greater",backendName:"cpu",kernelFunc:p4("Greater",D4,null,"bool")},P4=r4((function(e,t){return e<t?1:0})),L4={kernelName:"Less",backendName:"cpu",kernelFunc:p4("Less",P4,null,"bool")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function U4(e,t,n){var r=(t-e)/(n-1),a=bQ(n,"float32");a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var V4=k4((function(e){return Math.log(e)})),W4={kernelName:"Log",backendName:"cpu",kernelFunc:I4("Log",V4)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function z4(e,t,n,r){for(var a=iQ(r,$X(n)),o=0;o<a.length;++o){for(var i=o*t,s=e[i],u=0;u<t;++u){var c=e[i+u];c>s&&(s=c)}a[o]=s}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var j4=r4((function(e,t){return Math.max(e,t)})),H4={kernelName:"Maximum",backendName:"cpu",kernelFunc:p4("Maximum",j4)},G4=r4((function(e,t){return Math.min(e,t)})),K4={kernelName:"Minimum",backendName:"cpu",kernelFunc:p4("Minimum",G4)},q4=r4((function(e,t){return e*t})),X4=h4((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),Q4=p4("Multiply",q4,X4),Y4={kernelName:"Multiply",backendName:"cpu",kernelFunc:Q4};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function $4(e,t,n){var r=UQ(-1,n);return q4([],t,r,e,n)}var Z4={kernelName:"Neg",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;e4(r,"neg");var a=qy($4(n.data.get(r.dataId).values,r.shape,r.dtype),2),o=a[0],i=a[1];return n.makeTensorInfo(i,r.dtype,o)}},J4=r4((function(e,t){return e!==t?1:0})),e6={kernelName:"NotEqual",backendName:"cpu",kernelFunc:p4("NotEqual",J4,null,"bool")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function t6(e,t,n,r,a){for(var o=t.length,i=$X(t),s=mQ(t),u=mQ(a),c=iQ(n,$X(a)),l=0;l<i;++l){for(var d=IQ(l,o,s),f=new Array(d.length),p=0;p<f.length;p++)f[p]=d[r[p]];c[wQ(f,o,u)]=e[l]}return c}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function n6(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.perm;e4(a,"transpose");for(var i=a.shape.length,s=new Array(i),u=0;u<s.length;u++)s[u]=a.shape[o[u]];var c=t6(r.data.get(a.dataId).values,a.shape,a.dtype,o,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var r6={kernelName:"Transpose",backendName:"cpu",kernelFunc:n6};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function a6(e,t,n,r){for(var a=qy(NJ(e,r),2),o=a[0],i=a[1],s=cY(t,"int32"),u=bQ($X(o),s),c=$X(i),l=0;l<u.length;++l){for(var d=l*c,f=1,p=0;p<c;++p)f*=n[d+p];u[l]=f}return{outVals:u,outShape:o,outDtype:s}}var o6={kernelName:"Prod",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;e4(a,"prod");var s=a.shape.length,u=aQ(o,a.shape),c=OJ(u,s),l=u,d=a,f=[];null!=c&&(d=n6({inputs:{x:a},backend:n,attrs:{perm:c}}),f.push(d),l=MJ(l.length,s));var p=n.data.get(d.dataId).values,h=a6(d.shape,d.dtype,p,l),m=h.outVals,g=h.outShape,v=h.outDtype,y=g;return i&&(y=_J(g,u)),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,v,m)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function i6(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return bQ(0,r);var a=bQ(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+n;return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var s6=k4((function(e){return 1/Math.sqrt(e)})),u6={kernelName:"Rsqrt",backendName:"cpu",kernelFunc:I4("Rsqrt",s6)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function c6(e,t,n,r,a){var o=B$(r,t,n),i=$X(n),s=mQ(r);if(o){var u=P$(t,s);return"string"===a?e.slice(u,u+i):e.subarray(u,u+i)}for(var c=i$(r,a,"string"===a?e2(e):e),l=i$(n,a),d=0;d<l.size;++d){var f=l.indexToLoc(d),p=f.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,Xy(p))].concat(Xy(f)))}return"string"===a?t2(l.values):l.values}function l6(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.size;e4(a,"slice");var s=qy(L$(a,o,i),2),u=s[0],c=s[1];C$(a,u,c);var l=c6(n.data.get(a.dataId).values,u,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,l)}var d6={kernelName:"Slice",backendName:"cpu",kernelFunc:l6},f6=r4((function(e,t){var n=e-t;return n*n})),p6={kernelName:"SquaredDifference",backendName:"cpu",kernelFunc:p4("SquaredDifference",f6)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function h6(e,t,n,r){for(var a=i$(e,t.dtype),o=0;o<a.size;o++){for(var i=a.indexToLoc(o),s=new Array(i.length),u=0;u<s.length;u++)s[u]=i[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat(Xy(i)))}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var m6=r4((function(e,t){return e-t})),g6=p4("Sub",m6,h4((function(e,t,n,r){return{real:e-n,imag:t-r}}))),v6={kernelName:"Sub",backendName:"cpu",kernelFunc:g6};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function y6(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=i$(n,e.dtype),o=0;o<a.values.length;++o){for(var i=a.indexToLoc(o),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=i[u]%e.shape[u];var c=e.locToIndex(s);a.values[o]=e.values[c]}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function b6(e,t,n,r,a){for(var o=t[t.length-1],i=e.length/o,s=o,u=iQ(n,i*r),c=iQ("int32",i*r),l=0;l<i;l++){for(var d=l*s,f=e.subarray(d,d+s),p=[],h=0;h<f.length;h++)p.push({value:f[h],index:h});p.sort((function(e,t){return t.value-e.value}));for(var m=l*r,g=u.subarray(m,m+r),v=c.subarray(m,m+r),y=0;y<r;y++)g[y]=p[y].value,v[y]=p[y].index}var b=t.slice();return b[b.length-1]=r,[i$(b,n,u),i$(b,"int32",c)]
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function x6(e,t,n,r){for(var a=aQ(t,n)[0],o=[1,n[0],1],i=0;i<a;i++)o[0]*=n[i];o[1]=n[a];for(var s=a+1;s<n.length;s++)o[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new ZQ(o,r,e),d=[],f=1===o[0]&&1===o[2],p=0;p<n[a];p++){var h=void 0;if(f)h=e[p].toString();else{for(var m=[],g=0;g<o[0];g++)for(var v=0;v<o[2];v++)m.push(l.get(g,p,v));h=m.join(",")}if(void 0!==u[h])c[p]=u[h];else{var y=Object.keys(u).length;u[h]=y,c[p]=y,d.push(p)}}var b=o.slice();b[1]=Object.keys(u).length;var x=new ZQ(b,r);d.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)x.set(l.get(n,e,r),n,t,r)}));var k=n.slice();return k[a]=b[1],{outputValues:x.values,outputShape:k,indices:c}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var k6=Object.freeze({__proto__:null,simpleAbsImpl:t4,addImpl:m4,bincountImpl:b4,bincountReduceImpl:x4,ceilImpl:C4,concatImpl:S4,expImpl:T4,expm1Impl:_4,floorImpl:O4,gatherV2Impl:M4,greaterImpl:D4,lessImpl:P4,linSpaceImpl:U4,logImpl:V4,maxImpl:z4,maximumImpl:j4,minimumImpl:G4,multiplyImpl:q4,negImpl:$4,notEqualImpl:J4,prodImpl:a6,rangeImpl:i6,rsqrtImpl:s6,sliceImpl:c6,squaredDifferenceImpl:f6,stridedSliceImpl:h6,subImpl:m6,tileImpl:y6,topKImpl:b6,transposeImpl:t6,uniqueImpl:x6});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function w6(e){var t=e.inputs,n=e.backend,r=aQ(e.attrs.axis,t[0].shape)[0],a=O1(t.map((function(e){return e.shape})),r),o=t.filter((function(e){return $X(e.shape)>0}));if(1===o.length)return D3({inputs:{x:o[0]},backend:n});var i=n.makeOutput(a,t[0].dtype);if(0===$X(a))return i;if(R1(o.map((function(e){return e.shape})),r),"string"===o[0].dtype){var s=o.map((function(e){var t=$X(e.shape.slice(r));return G3({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),u=s.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}}));a=O1(s.map((function(e){return e.shape})),1);var c=1===s[0].shape[0],l=S4(u,a,t[0].dtype,c),d=O1(o.map((function(e){return e.shape})),r);return i.shape=d,n.dataIdMap.get(i.dataId).stringBytes=t2(l),s.forEach((function(e){return n.disposeData(e.dataId)})),i}for(var f=$X(o[0].shape.slice(0,r)),p=0,h=o.map((function(e){var t=$X(e.shape.slice(r));return p+=t,t})),m=o.map((function(e){return n.typedArrayFromHeap(e)})),g=n.typedArrayFromHeap(i),v=0;v<f;v++)for(var y=v*p,b=0;b<m.length;b++){var x=h[b],k=v*x,w=m[b].subarray(k,k+x);g.set(w,y),y+=x}return i}var I6,C6,E6,S6,T6={kernelName:"Concat",backendName:"wasm",kernelFunc:w6},A6={kernelName:"Conv2D",backendName:"wasm",setupFunc:function(e){I6=e.wasm.cwrap("Conv2D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(o.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,f=kZ(n.dataFormat),p=fZ(a.shape,o.shape,u,c,l,d,!1,f),h=p.filterHeight,m=p.filterWidth,g=p.padInfo.top,v=p.padInfo.right,y=p.padInfo.bottom,b=p.padInfo.left,x=p.dilationHeight,k=p.dilationWidth,w=p.strideHeight,I=p.strideWidth,C=p.inChannels,E=p.outChannels,S="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'".concat(p.dataFormat,"'. Please use 'channelsLast'."));var T=r.makeOutput(p.outShape,"float32"),A=r.dataIdMap.get(T.dataId).id;return I6(i,a.shape[0],a.shape[1],a.shape[2],s,h,m,g,v,y,b,S,x,k,w,I,C,E,A),T}},N6={kernelName:"Conv2DBackpropInput",backendName:"wasm",setupFunc:function(e){C6=e.wasm.cwrap("Conv2DBackpropInput",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.dy,o=n.filter,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.inputShape,d=kZ(u),f=fZ(l,o.shape,i,1,s,c,!1,d),p=f.batchSize,h=f.filterHeight,m=f.filterWidth,g=f.inChannels,v=f.inHeight,y=f.inWidth,b=f.outChannels,x=f.outHeight,k=f.outWidth,w=f.strideHeight,I=f.strideWidth,C=h-1-f.padInfo.top,E=m-1-f.padInfo.left,S="channelsLast"===f.dataFormat,T=mQ(f.inShape),A=mQ(a.shape),N=qy(mQ(o.shape),3),_=N[0],R=N[1],O=N[2],F=T[0],M=S?T[1]:T[2],D=S?T[2]:1,B=S?1:T[1],P=A[0],L=S?A[1]:A[2],U=S?A[2]:1,V=S?1:A[1],W=t.makeOutput(f.inShape,"float32"),z=t.dataIdMap.get(W.dataId).id,j=t.dataIdMap.get(a.dataId).id,H=t.dataIdMap.get(o.dataId).id;return C6(j,H,p,h,m,v,y,g,x,k,b,w,I,C,E,_,R,O,F,M,D,B,P,L,U,V,z),W}},_6=N3("Cos");
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(E6||(E6={}));var R6,O6,F6,M6={kernelName:"CropAndResize",backendName:"wasm",setupFunc:function(e){S6=e.wasm.cwrap("CropAndResize",null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,o=a.method,i=a.extrapolationValue,s=a.cropSize,u=r.image,c=r.boxes,l=r.boxInd,d=c.shape[0],f=qy(s,2),p=f[0],h=f[1],m=[d,p,h,u.shape[3]],g=n.dataIdMap.get(u.dataId);"float32"!==u.dtype&&(t=Q3({backend:n,inputs:{x:u},attrs:{dtype:"float32"}}),g=n.dataIdMap.get(t.dataId));var v=g.id,y=n.dataIdMap.get(c.dataId).id,b=n.dataIdMap.get(l.dataId).id,x=n.makeOutput(m,"float32"),k=n.dataIdMap.get(x.dataId).id,w=new Uint8Array(new Int32Array(u.shape).buffer);return S6(v,y,b,d,w,p,h,E6[o],i,k),null!=t&&n.disposeData(t.dataId),x}},D6={kernelName:"Cumsum",backendName:"wasm",setupFunc:function(e){R6=e.wasm.cwrap("Cumsum",null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse,u=a.shape.length;qX("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumsum does not support ".concat(a.dtype," tensors in the WASM backend")}));var c=OJ([o],u),l=a;null!==c&&(l=L3({inputs:{x:a},attrs:{perm:c},backend:n}));var d=MJ(1,u)[0];RJ("cumsum",[d],u);var f=n.makeOutput(l.shape,l.dtype),p=l.shape[d],h=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(f.dataId).id;R6(h,i?1:0,s?1:0,p,m,I3[a.dtype]);var g=f;return null!==c&&(g=L3({inputs:{x:f},attrs:{perm:FJ(c)},backend:n}),n.disposeData(l.dataId),n.disposeData(f.dataId)),g}},B6={kernelName:"DepthToSpace",backendName:"wasm",setupFunc:function(e){O6=e.wasm.cwrap("DepthToSpace",null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,o=r.blockSize,i=r.dataFormat;qX(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));var s=a.shape[0],u="NHWC"===i?a.shape[1]:a.shape[2],c="NHWC"===i?a.shape[2]:a.shape[3],l="NHWC"===i?a.shape[3]:a.shape[1],d=u*o,f=c*o,p=l/(o*o),h="NHWC"===i?[s,d,f,p]:[s,p,d,f],m=t.makeOutput(h,"float32"),g=t.dataIdMap.get(a.dataId).id,v=new Uint8Array(new Int32Array(mQ(a.shape)).buffer),y=new Uint8Array(new Int32Array(h).buffer),b=new Uint8Array(new Int32Array(mQ(h)).buffer),x=t.dataIdMap.get(m.dataId).id;return O6(g,o,"NHWC"===i?1:0,v,a.shape.length-1,y,b,h.length,x),m}},P6={kernelName:"DepthwiseConv2dNative",backendName:"wasm",setupFunc:function(e){F6=e.wasm.cwrap("DepthwiseConv2dNative",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(o.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,f=null==c?[1,1]:c,p=fZ(a.shape,o.shape,u,f,l,d,!0),h=p.filterHeight,m=p.filterWidth,g=p.padInfo.top,v=p.padInfo.right,y=p.padInfo.bottom,b=p.padInfo.left,x=p.dilationHeight,k=p.dilationWidth,w=p.strideHeight,I=p.strideWidth,C=p.inChannels,E=p.outChannels,S="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'".concat(p.dataFormat,"'. Please use 'channelsLast'."));var T=r.makeOutput(p.outShape,"float32"),A=r.dataIdMap.get(T.dataId).id;return F6(i,a.shape[0],a.shape[1],a.shape[2],s,h,m,g,v,y,b,S,x,k,w,I,C,E,A),T}},L6=R3("Equal",!1,"bool"),U6=N3("Exp");
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function V6(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.input,o=n.dim,i=a.shape.length,s=a.shape.slice(),u=o;return o<0&&(qX(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+o+1),s.splice(u,0,1),G3({inputs:{x:a},backend:r,attrs:{shape:s}})}var W6,z6,j6,H6,G6,K6,q6,X6,Q6,Y6,$6,Z6,J6={kernelName:"ExpandDims",backendName:"wasm",kernelFunc:V6},e5={kernelName:"Fill",backendName:"wasm",kernelFunc:function(e){var t=e.attrs,n=t.shape,r=t.value,a=t.dtype,o=e.backend,i=o.makeOutput(n,a);return o.typedArrayFromHeap(i).fill(r),i}},t5={kernelName:"FlipLeftRight",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n.makeOutput(r.shape,r.dtype),o=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(a.dataId).id,s=qy(r.shape,4),u=s[0],c=s[1],l=s[2],d=s[3];return W6(o,u,c,l,d,i),a},setupFunc:function(e){W6=e.wasm.cwrap("FlipLeftRight",null,["number","number","number","number","number","number"])}},n5=N3("Floor"),r5=R3("FloorDiv",!1),a5={kernelName:"FusedBatchNorm",backendName:"wasm",setupFunc:function(e){z6=e.wasm.cwrap("FusedBatchNorm",null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.varianceEpsilon,a=n.x,o=n.mean,i=n.variance,s=n.offset,u=n.scale,c=t.dataIdMap.get(a.dataId).id,l=t.dataIdMap.get(o.dataId).id,d=t.dataIdMap.get(i.dataId).id,f=null!=s?t.dataIdMap.get(s.dataId).id:0,p=null!=u?t.dataIdMap.get(u.dataId).id:0,h=t.makeOutput(a.shape,a.dtype);if(0===$X(a.shape))return h;var m=t.dataIdMap.get(h.dataId).id;return z6(c,l,d,f,p,r,m),h}},o5={kernelName:"FusedConv2D",backendName:"wasm",setupFunc:function(e){j6=e.wasm.cwrap("FusedConv2D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,f=n.dimRoundingMode,p=n.activation,h=n.leakyreluAlpha,m=fZ(a.shape,o.shape,u,l,c,f),g=C3[p];if(null==g)throw new Error("".concat(p," activation not yet supported for FusedConv2D in the wasm backend."));var v=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(o.dataId).id,b=m.outChannels,x=0;if(null!=i){var k=r.dataIdMap.get(i.dataId);if(1!==k.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got rank ".concat(k.shape.length,"."));if(k.shape[0]!==b)throw new Error("FusedConv2D bias shape (".concat(k.shape,") does not match the number of output channels (").concat(b,")"));x=k.id}var w=m.filterHeight,I=m.filterWidth,C=m.padInfo.top,E=m.padInfo.right,S=m.padInfo.bottom,T=m.padInfo.left,A=m.dilationHeight,N=m.dilationWidth,_=m.strideHeight,R=m.strideWidth,O=m.inChannels,F="SAME"===m.padInfo.type?1:0,M=m.batchSize,D=m.inHeight,B=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));var P=r.makeOutput(m.outShape,"float32"),L=r.dataIdMap.get(P.dataId).id,U=null==s?0:r.dataIdMap.get(s.dataId).id;return j6(v,M,D,B,y,w,I,x,C,E,S,T,F,A,N,_,R,O,b,g,U,h||0,L),P}},i5={kernelName:"FusedDepthwiseConv2D",backendName:"wasm",setupFunc:function(e){H6=e.wasm.cwrap("FusedDepthwiseConv2D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,f=n.dimRoundingMode,p=n.activation,h=n.leakyreluAlpha,m=fZ(a.shape,o.shape,u,l,c,f,!0),g=C3[p];if(null==g)throw new Error("".concat(p," activation not yet supported for FusedDepthwiseConv2D in the wasm backend."));var v=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(o.dataId).id,b=m.outChannels,x=0;if(null!=i){var k=r.dataIdMap.get(i.dataId);if(1!==k.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got rank ".concat(k.shape.length,"."));if(k.shape[0]!==b)throw new Error("FusedDepthwiseConv2D bias shape (".concat(k.shape,") does not match the number of output channels (").concat(b,")"));x=k.id}var w=m.filterHeight,I=m.filterWidth,C=m.padInfo.top,E=m.padInfo.right,S=m.padInfo.bottom,T=m.padInfo.left,A=m.dilationHeight,N=m.dilationWidth,_=m.strideHeight,R=m.strideWidth,O=m.inChannels,F="SAME"===m.padInfo.type?1:0,M=m.batchSize,D=m.inHeight,B=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));var P=r.makeOutput(m.outShape,"float32"),L=r.dataIdMap.get(P.dataId).id,U=null==s?0:r.dataIdMap.get(s.dataId).id;return H6(v,M,D,B,y,w,I,x,C,E,S,T,F,A,N,_,R,O,b,g,U,h||0,L),P}},s5={kernelName:"GatherNd",backendName:"wasm",setupFunc:function(e){G6=e.wasm.cwrap("GatherNd",null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.params,a=n.indices,o=qy(x$(r,a),4),i=o[0],s=o[1],u=o[2],c=o[3],l=t.makeOutput(i,r.dtype);if(0===s)return l;var d=a.shape,f=d[d.length-1],p=t.dataIdMap.get(r.dataId).id,h=t.dataIdMap.get(a.dataId).id,m=new Uint8Array(new Int32Array(c).buffer),g=t.dataIdMap.get(l.dataId).id;return G6(p,I3[r.dtype],h,s,f,u,m,g),l}},u5={kernelName:"GatherV2",backendName:"wasm",setupFunc:function(e){K6=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,o=n.indices,i=r.axis,s=r.batchDims,u=Z1(a,o,aQ(i,a.shape)[0],s),c=G3({inputs:{x:a},attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]},backend:t}),l=$X(o.shape),d=G3({inputs:{x:o},attrs:{shape:[u.batchSize,l/u.batchSize]},backend:t}),f=[u.batchSize,u.outerSize,l/u.batchSize,u.sliceSize],p=t.makeOutput(f,a.dtype);if(0===$X(a.shape))return p;var h=c.shape.length-1,m=t.dataIdMap.get(c.dataId).id,g=t.dataIdMap.get(d.dataId).id,v=t.dataIdMap.get(p.dataId).id,y=new Uint8Array(new Int32Array(mQ(c.shape)).buffer),b=new Uint8Array(new Int32Array(mQ(f)).buffer);return K6(m,I3[a.dtype],y,h,g,u.batchSize,b,v),t.disposeData(c.dataId),t.disposeData(d.dataId),p.shape=u.outputShape,p}},c5=R3("Greater",!1,"bool"),l5=R3("GreaterEqual",!1,"bool"),d5={kernelName:"LeakyRelu",backendName:"wasm",setupFunc:function(e){q6=e.wasm.cwrap("LeakyRelu",null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs.x,n=e.attrs.alpha,r=e.backend,a=r.dataIdMap.get(t.dataId).id,o=r.makeOutput(t.shape,t.dtype);if(0!==$X(t.shape)){var i=r.dataIdMap.get(o.dataId).id;q6(a,n,i)}return o}},f5=R3("Less",!1,"bool"),p5=R3("LessEqual",!1,"bool"),h5=N3("Log"),m5=R3("LogicalAnd",!1,"bool"),g5={kernelName:"Max",backendName:"wasm",setupFunc:function(e){X6=e.wasm.cwrap("Max",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.reductionIndices,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=i,c=W3(i,a,t),l=c.transposed,d=c.axes,f=c.originalAxes,p=c.inputWasTransposed;p&&(u=l,s=t.dataIdMap.get(l.dataId).id),RJ("max",d,u.shape.length);var h=qy(NJ(u.shape,d),2),m=h[0],g=$X(h[1]),v=t.makeOutput(m,i.dtype);if(0!==$X(u.shape)){var y=t.dataIdMap.get(v.dataId).id;X6(s,g,y)}if(p&&t.disposeData(l.dataId),o){var b=_J(v.shape,f);v.shape=b}return v}},v5=R3("Maximum",!1),y5={kernelName:"MaxPool",backendName:"wasm",setupFunc:function(e){Q6=e.wasm.cwrap("MaxPool",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=r.dataIdMap.get(a.dataId).id,i=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=lZ(a.shape,i,s,1,u,c),d=l.filterHeight,f=l.filterWidth,p=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,g=l.padInfo.left,v=l.dilationHeight,y=l.dilationWidth,b=l.strideHeight,x=l.strideWidth,k=l.inChannels,w=l.outChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(l.dataFormat,"'. Please use 'channelsLast'."));var I=r.makeOutput(l.outShape,"float32"),C=r.dataIdMap.get(I.dataId).id;return Q6(o,a.shape[0],a.shape[1],a.shape[2],d,f,p,h,m,g,v,y,b,x,k,w,C),I}},b5={kernelName:"Mean",backendName:"wasm",setupFunc:function(e){Y6=e.wasm.cwrap("Mean",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=W3(i,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed,m=f;if(h){var g=t.dataIdMap.get(d.dataId).id;g!==s&&(c=d,u=g,m=MJ(m.length,c.shape.length))}RJ("mean",m,c.shape.length);var v=qy(NJ(c.shape,m),2),y=v[0],b=$X(v[1]),x=c;"float32"!==c.dtype&&(x=Q3({backend:t,inputs:{x:c},attrs:{dtype:"float32"}}),u=t.dataIdMap.get(x.dataId).id);var k=t.makeOutput(y,"float32");if(0!==$X(c.shape)){var w=t.dataIdMap.get(k.dataId).id;Y6(u,b,w)}if(h&&t.disposeData(d.dataId),o){var I=_J(k.shape,p);k.shape=I}return"float32"!==c.dtype&&t.disposeData(x.dataId),k}},x5={kernelName:"Min",backendName:"wasm",setupFunc:function(e){$6=e.wasm.cwrap("Min",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=W3(i,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed;if(h){var m=t.dataIdMap.get(d.dataId).id;m!==s&&(c=d,u=m)}RJ("min",f,c.shape.length);var g=qy(NJ(c.shape,f),2),v=g[0],y=$X(g[1]),b=t.makeOutput(v,c.dtype);if(0!==$X(c.shape)){var x=t.dataIdMap.get(b.dataId).id;$6(u,y,x)}if(h&&t.disposeData(d.dataId),o){var k=_J(b.shape,p);b.shape=k}return b}},k5=R3("Minimum",!1),w5=R3("Multiply",!0),I5=N3("Neg");
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function C5(e,t){var n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],o=n[2],i=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:o,pValidOutputs:i}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var E5,S5,T5,A5,N5,_5,R5,O5,F5,M5,D5,B5,P5,L5,U5,V5,W5,z5,j5={kernelName:"NonMaxSuppressionV3",backendName:"wasm",setupFunc:function(e){Z6=e.wasm.cwrap("NonMaxSuppressionV3","number",["number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,o=r.maxOutputSize,i=r.scoreThreshold,s=n.boxes,u=n.scores,c=t.dataIdMap.get(s.dataId).id,l=t.dataIdMap.get(u.dataId).id,d=C5(t,Z6(c,l,o,a,i)),f=d.pSelectedIndices,p=d.selectedSize,h=d.pSelectedScores,m=d.pValidOutputs;return t.wasm._free(h),t.wasm._free(m),t.makeOutput([p],"int32",f)}},H5={kernelName:"NonMaxSuppressionV4",backendName:"wasm",setupFunc:function(e){E5=e.wasm.cwrap("NonMaxSuppressionV4","number",["number","number","number","number","number","bool"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,o=r.maxOutputSize,i=r.scoreThreshold,s=r.padToMaxOutputSize,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,f=C5(t,E5(l,d,o,a,i,s)),p=f.pSelectedIndices,h=f.selectedSize,m=f.pSelectedScores,g=f.pValidOutputs;return t.wasm._free(m),[t.makeOutput([h],"int32",p),t.makeOutput([],"int32",g)]}},G5={kernelName:"NonMaxSuppressionV5",backendName:"wasm",setupFunc:function(e){S5=e.wasm.cwrap("NonMaxSuppressionV5","number",["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,o=r.maxOutputSize,i=r.scoreThreshold,s=r.softNmsSigma,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,f=C5(t,S5(l,d,o,a,i,s)),p=f.pSelectedIndices,h=f.selectedSize,m=f.pSelectedScores,g=f.pValidOutputs;return t.wasm._free(g),[t.makeOutput([h],"int32",p),t.makeOutput([h],"float32",m)]}},K5=R3("NotEqual",!1,"bool"),q5={kernelName:"OneHot",backendName:"wasm",setupFunc:function(e){T5=e.wasm.cwrap("OneHot",null,["number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue,u=n.makeOutput([].concat(Xy(a.shape),[o]),"int32"),c=n.dataIdMap.get(u.dataId).id,l=n.dataIdMap.get(a.dataId).id;return T5(l,o,i,s,c),u}},X5={kernelName:"OnesLike",backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}},Q5={kernelName:"Pack",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return V6({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){XX(a,e.shape,"All tensors passed to stack must have matching shapes"),qX(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=w6({inputs:t.map((function(e){var t=V6({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeData(e.dataId)})),s}},Y5={kernelName:"PadV2",backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,o=r.constantValue,i=a.map((function(e,n){return e[0]+t.shape[n]+e[1]})),s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(i,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),f=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(f).buffer);return A5(s,l,t.shape.length,I3[t.dtype],p,h,o,c),u},setupFunc:function(e){A5=e.wasm.cwrap("PadV2",null,["number","array","number","number","array","array","number","number"])}},$5=R3("Pow",!1),Z5={kernelName:"Prelu",backendName:"wasm",setupFunc:function(e){N5=e.wasm.cwrap("Prelu",null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(a.dataId).id,s=n.makeOutput(r.shape,"float32"),u=n.dataIdMap.get(s.dataId).id;return N5(o,i,u),s}},J5={kernelName:"Prod",backendName:"wasm",setupFunc:function(e){_5=e.wasm.cwrap("Prod",null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=W3(i,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed,m=f;if(h){var g=t.dataIdMap.get(d.dataId).id;g!==s&&(c=d,u=g,m=MJ(m.length,c.shape.length))}RJ("prod",m,c.shape.length);var v=qy(NJ(c.shape,m),2),y=v[0],b=$X(v[1]),x=t.makeOutput(y,c.dtype);if(0!==$X(c.shape)){var k=t.dataIdMap.get(x.dataId).id;_5(u,b,I3[x.dtype],k)}if(h&&t.disposeData(d.dataId),o){var w=_J(x.shape,p);x.shape=w}return x}},e8={kernelName:"Range",backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,s=i6(r,a,o,i),u=t.makeOutput([s.length],i);return t.typedArrayFromHeap(u).set(s),u}},t8=R3("RealDiv",!0),n8=N3("Relu"),r8=N3("Relu6"),a8={kernelName:"ResizeBilinear",backendName:"wasm",setupFunc:function(e){R5=e.wasm.cwrap("ResizeBilinear",null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,o=r.images,i=a.alignCorners,s=a.halfPixelCenters,u=qy(a.size,2),c=u[0],l=u[1],d=qy(o.shape,4),f=d[0],p=d[1],h=d[2],m=d[3],g=[f,c,l,m],v=n.dataIdMap.get(o.dataId);"float32"!==v.dtype&&(t=Q3({backend:n,inputs:{x:o},attrs:{dtype:"float32"}}),v=n.dataIdMap.get(t.dataId));var y=v.id,b=n.makeOutput(g,"float32");if(0===$X(o.shape))return b;var x=n.dataIdMap.get(b.dataId).id;return R5(y,f,p,h,m,c,l,i?1:0,s?1:0,x),null!=t&&n.disposeData(t.dataId),b}},o8={kernelName:"Reverse",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=aQ(r.dims,a.shape);if(0===a.shape.length)return D3({inputs:{x:a},backend:n});var i=n.makeOutput(a.shape,a.dtype),s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(i.dataId).id,c=new Uint8Array(new Int32Array(o).buffer),l=new Uint8Array(new Int32Array(a.shape).buffer);O5(s,c,o.length,l,a.shape.length,u);var d=G3({inputs:{x:i},attrs:{shape:a.shape},backend:n});return n.disposeData(i.dataId),d},setupFunc:function(e){O5=e.wasm.cwrap("Reverse",null,["number","array","number","array","number","number"])}},i8={kernelName:"RotateWithOffset",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=r.radians,i=r.fillValue,s=r.center,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(a.dataId).id,l=n.dataIdMap.get(u.dataId).id,d=qy(a.shape,4),f=d[0],p=d[1],h=d[2],m=d[3],g=qy(M1(s,p,h),2),v=g[0],y=g[1],b="number"==typeof i?[i,i,i,0===i?0:255]:[].concat(Xy(i),[255]),x=new Uint8Array(new Int32Array(b).buffer);return F5(c,f,p,h,m,o,v,y,x,b.length,l),u},setupFunc:function(e){F5=e.wasm.cwrap("RotateWithOffset",null,["number","number","number","number","number","number","number","number","array","number","number"])}},s8=N3("Round");
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function u8(e){var t=e.inputs.x,n=e.attrs,r=n.begin,a=n.size,o=e.backend,i=qy(L$(t,r,a),2),s=i[0],u=i[1],c=B$(t.shape,s,u),l=o.readSync(t.dataId),d=o.makeOutput(u,t.dtype),f=mQ(t.shape),p=o.dataIdMap.get(d.dataId);if(c){var h=P$(s,f);return"string"===t.dtype?p.stringBytes=l.slice(h,h+$X(u)):o.typedArrayFromHeap(d).set(l.subarray(h,h+$X(u))),d}if("string"===t.dtype){var m=c6(l,s,u,t.shape,t.dtype);return p.stringBytes=m,d}var g=o.typedArrayFromHeap(d),v=t.shape.length;if(2===v)!function(e,t,n,r,a){for(var o=0,i=r[0],s=r[1],u=i+a[0],c=i;c<u;c++){var l=c*t+s;n.set(e.subarray(l,l+a[1]),o),o+=a[1]}}(l,f[0],g,s,u);else if(3===v)!function(e,t,n,r,a,o){for(var i=0,s=a[0],u=a[1],c=a[2],l=s+o[0],d=u+o[1],f=s;f<l;f++)for(var p=u;p<d;p++){var h=f*t+p*n+c;r.set(e.subarray(h,h+o[2]),i),i+=o[2]}}(l,f[0],f[1],g,s,u);else if(4===v)!function(e,t,n,r,a,o,i){for(var s=0,u=o[0],c=o[1],l=o[2],d=u+i[0],f=c+i[1],p=l+i[2],h=o[3],m=u;m<d;m++)for(var g=c;g<f;g++)for(var v=l;v<p;v++){var y=m*t+g*n+v*r+h;a.set(e.subarray(y,y+i[3]),s),s+=i[3]}}(l,f[0],f[1],f[2],g,s,u);else{var y=c6(l,s,u,t.shape,t.dtype);g.set(y)}return d}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
for(var c8=[_3,F3,M3,j3,H3,X3,$3,Z3,J3,T6,A6,N6,_6,M6,D6,B6,P6,L6,U6,J6,e5,t5,n5,r5,A3,a5,o5,i5,s5,u5,c5,l5,P3,d5,f5,p5,h5,m5,g5,v5,y5,b5,x5,k5,w5,I5,j5,H5,G5,K5,q5,X5,Q5,Y5,$5,Z5,J5,e8,t8,n8,r8,q3,a8,o8,i8,N3("Rsqrt"),s8,{kernelName:"ScatterNd",backendName:"wasm",setupFunc:function(e){M5=e.wasm.cwrap("ScatterNd",null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.indices,o=n.updates,i=r.shape,s=t.makeOutput(i,o.dtype);if(0===$X(i))return s;var u=I$(0,a,i),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,f=u.strides,p=u.outputSize,h=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(o.dataId).id,g=new Uint8Array(new Int32Array(f).buffer),v=t.dataIdMap.get(s.dataId).id;return M5(h,m,I3[o.dtype],c,l,d,g,p,v),s}},{kernelName:"Select",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(o.dataId).id,c=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(c.dataId).id,d=r.shape.length,f=a.shape.length,p=0===d||d>1||1===f?1:$X(a.shape.slice(1));return D5(i,s,u,p,l),c},setupFunc:function(e){D5=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},{kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){B5=e.wasm.cwrap("Sigmoid",null,["number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.x,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),o=t.dataIdMap.get(a.dataId).id;return 0===$X(a.shape)||B5(r,o),a}},N3("Sin"),{kernelName:"Slice",backendName:"wasm",kernelFunc:u8},{kernelName:"Softmax",backendName:"wasm",setupFunc:function(e){P5=e.wasm.cwrap("Softmax",null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.logits,r=e.attrs.dim,a=t.dataIdMap.get(n.dataId).id,o=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(o.dataId).id,s=n.shape[r],u=$X(n.shape)/s;return 0===$X(o.shape)||P5(a,i,s,u),o}},{kernelName:"SplitV",backendName:"wasm",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.numOrSizeSplits,i=aQ(n.axis,a.shape)[0],s=Q1(a,o,i),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=Xy(c);t[i]=e;var n=u8({inputs:{x:a},attrs:{begin:u,size:t},backend:r});return u[i]+=e,n}))}},N3("Sqrt"),N3("Square"),R3("SquaredDifference",!0),{kernelName:"Step",backendName:"wasm",setupFunc:function(e){L5=e.wasm.cwrap("Step",null,["number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.alpha,a=n.x,o=t.dataIdMap.get(a.dataId).id,i=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(i.dataId).id;return L5(o,r,s),i}},{kernelName:"StridedSlice",backendName:"wasm",setupFunc:function(e){U5=e.wasm.cwrap("StridedSlice",null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,o=r.begin,i=r.end,s=r.strides;null==s&&(s=new Array(o.length));var u=r.beginMask,c=r.endMask,l=r.ellipsisMask,d=r.newAxisMask,f=r.shrinkAxisMask,p=E$(l);if(p.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==l&&0!==d)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==l&&0!==f)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var h=a.shape.length-o.length,m=E$(d),g=a.shape.slice();m.forEach((function(e){o[e]=0,i[e]=1,g.splice(e,0,1)}));var v=G3({inputs:{x:a},attrs:{shape:g},backend:t}),y=_$(v.shape,p,h,o,i,s,u,c,l),b=y.begin,x=y.end,k=y.strides;o=b,i=x,s=k;var w=E$(f);w.forEach((function(e){i[e]=o[e]+1,s[e]=1}));var I=S$(o,i,s),C=I.filter((function(e,t){return-1===w.indexOf(t)}));if(s.every((function(e){return 1===e}))){var E=u8({inputs:{x:v},attrs:{begin:o,size:I},backend:t});t.disposeData(v.dataId);var S=G3({inputs:{x:E},attrs:{shape:C},backend:t});return t.disposeData(E.dataId),S}var T=t.makeOutput(C,"float32");if(!C.some((function(e){return 0===e}))){var A=t.dataIdMap.get(v.dataId).id,N=new Uint8Array(new Int32Array(mQ(v.shape)).buffer),_=new Uint8Array(new Int32Array(o).buffer),R=new Uint8Array(new Int32Array(i).buffer),O=new Uint8Array(new Int32Array(s).buffer),F=new Uint8Array(new Int32Array(C).buffer),M=new Uint8Array(new Int32Array(mQ(C)).buffer),D=t.dataIdMap.get(T.dataId).id;U5(A,N,v.shape.length,_,R,O,F,M,C.length,D)}t.disposeData(v.dataId);var B=G3({inputs:{x:T},attrs:{shape:C},backend:t});return t.disposeData(T.dataId),B}},R3("Sub",!0),{kernelName:"Sum",backendName:"wasm",setupFunc:function(e){V5=e.wasm.cwrap("Sum",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=W3(i,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed,m=f;if(h){var g=t.dataIdMap.get(d.dataId).id;g!==s&&(c=d,u=g,m=MJ(m.length,c.shape.length))}RJ("sum",m,c.shape.length);var v=qy(NJ(c.shape,m),2),y=v[0],b=$X(v[1]),x=t.makeOutput(y,c.dtype);if(0!==$X(c.shape)){var k=t.dataIdMap.get(x.dataId).id;V5(u,b,k)}if(h&&t.disposeData(d.dataId),o){var w=_J(x.shape,p);x.shape=w}return x}},N3("Tanh"),{kernelName:"Tile",backendName:"wasm",setupFunc:function(e){W5=e.wasm.cwrap("Tile",null,["number","array","number","array","number","number"])},kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=n.dataIdMap.get(a.dataId).id,i=r.reps,s=new Array(a.shape.length),u=0;u<s.length;u++)s[u]=a.shape[u]*i[u];var c=new Uint8Array(new Int32Array(a.shape).buffer),l=new Uint8Array(new Int32Array(s).buffer),d=n.makeOutput(s,a.dtype),f=n.dataIdMap.get(d.dataId).id;return W5(o,c,a.shape.length,l,s.length,I3[d.dtype],f),d}},{kernelName:"TopK",backendName:"wasm",setupFunc:function(e){z5=e.wasm.cwrap("TopK",null,["number","array","number","number","number","bool","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted,s=n.dataIdMap.get(a.dataId).id,u=new Uint8Array(new Int32Array(a.shape).buffer),c=a.shape.slice();c[c.length-1]=o;var l=n.makeOutput(c,a.dtype),d=n.dataIdMap.get(l.dataId).id,f=n.makeOutput(c,"int32"),p=n.dataIdMap.get(f.dataId).id;return z5(s,u,a.shape.length,I3[a.dtype],o,i,d,p),[l,f]}},V3,{kernelName:"Unpack",backendName:"wasm",kernelFunc:
/**
	   * @license
	   * Copyright 2019 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape[o],s=a.shape.length,u=new Array(s-1),c=0,l=0;l<s;l++)l!==o&&(u[c++]=a.shape[l]);var d=new Array(i),f=new Array(s).fill(0),p=a.shape.slice();p[o]=1;for(var h=0;h<d.length;h++)f[o]=h,d[h]=u8({inputs:{x:a},attrs:{begin:f,size:p},backend:n});return d.map((function(e){return{dataId:e.dataId,dtype:e.dtype,shape:u}}))}},{kernelName:"ZerosLike",backendName:"wasm",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}}],l8=0,d8=c8;l8<d8.length;l8++){var f8=d8[l8];PQ(f8)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var p8=SQ();function h8(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}p8.registerFlag("WASM_HAS_SIMD_SUPPORT",Ny(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])));case 1:case"end":return e.stop()}}),e)})))),p8.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",Ny(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p8.get("IS_NODE")){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.abrupt("return",((new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))));case 6:return e.prev=6,e.t0=e.catch(2),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[2,6]])}))));var m8=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,g8=function(e){return m8.exec(e).slice(1)};function v8(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,t="/"===r.charAt(0))}return(t?"/":"")+(e=h8(S8(e.split("/"),(function(e){return!!e})),!t).join("/"))||"."}function y8(e){var t=b8(e),n="/"===A8(e,-1);return(e=h8(S8(e.split("/"),(function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function b8(e){return"/"===e.charAt(0)}function x8(){var e=Array.prototype.slice.call(arguments,0);return y8(S8(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))}function k8(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=v8(e).substr(1),t=v8(t).substr(1);for(var r=n(e.split("/")),a=n(t.split("/")),o=Math.min(r.length,a.length),i=o,s=0;s<o;s++)if(r[s]!==a[s]){i=s;break}var u=[];for(s=i;s<r.length;s++)u.push("..");return(u=u.concat(a.slice(i))).join("/")}function w8(e){var t=g8(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."}function I8(e,t){var n=g8(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}function C8(e){return g8(e)[3]}var E8={extname:C8,basename:I8,dirname:w8,sep:"/",delimiter:":",relative:k8,join:x8,isAbsolute:b8,normalize:y8,resolve:v8};function S8(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var T8,A8="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)},N8=Object.freeze({__proto__:null,resolve:v8,normalize:y8,isAbsolute:b8,join:x8,relative:k8,sep:"/",delimiter:":",dirname:w8,basename:I8,extname:C8,default:E8}),_8=Object.freeze({__proto__:null,default:{}});function R8(){if(void 0===T8){var e=new ArrayBuffer(2),t=new Uint8Array(e),n=new Uint16Array(e);if(t[0]=1,t[1]=2,258===n[0])T8="BE";else{if(513!==n[0])throw new Error("unable to figure out endianess");T8="LE"}}return T8}function O8(){return void 0!==global.location?global.location.hostname:""}function F8(){return[]}function M8(){return 0}function D8(){return Number.MAX_VALUE}function B8(){return Number.MAX_VALUE}function P8(){return[]}function L8(){return"Browser"}function U8(){return void 0!==global.navigator?global.navigator.appVersion:""}function V8(){}function W8(){}function z8(){return"/tmp"}var j8=z8,H8={EOL:"\n",tmpdir:j8,tmpDir:z8,networkInterfaces:V8,getNetworkInterfaces:W8,release:U8,type:L8,cpus:P8,totalmem:B8,freemem:D8,uptime:M8,loadavg:F8,hostname:O8,endianness:R8},G8=Object.freeze({__proto__:null,endianness:R8,hostname:O8,loadavg:F8,uptime:M8,freemem:D8,totalmem:B8,cpus:P8,type:L8,release:U8,networkInterfaces:V8,getNetworkInterfaces:W8,arch:function(){return"javascript"},platform:function(){return"browser"},tmpDir:z8,tmpdir:j8,EOL:"\n",default:H8}),K8=Eq(N8),q8=Eq(_8),X8=Eq(G8),Q8=Cq((function(e,t){var n,r=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(n=n||__filename),function(e){function t(){return N.buffer!=O&&q(N.buffer),F}function r(){return N.buffer!=O&&q(N.buffer),M}function a(){return N.buffer!=O&&q(N.buffer),D}function o(){return N.buffer!=O&&q(N.buffer),B}function i(){return N.buffer!=O&&q(N.buffer),P}var s,u,c=void 0!==(e=e||{})?e:{};c.ready=new Promise((function(e,t){s=e,u=t}));var l,d={};for(l in c)c.hasOwnProperty(l)&&(d[l]=c[l]);var f,p,h,m,g=function(e,t){throw t};f="object"==("undefined"==typeof window?"undefined":Ty(window)),p="function"==typeof importScripts,h="object"==("undefined"==typeof process?"undefined":Ty(process))&&"object"==Ty(process.versions)&&"string"==typeof process.versions.node,m=!f&&!h&&!p;var v=c.ENVIRONMENT_IS_PTHREAD||!1;v&&(O=c.buffer);var y,b,x,k,w,I="";function C(e){return c.locateFile?c.locateFile(e,I):I+e}if(h){var E;I=p?K8.dirname(I)+"/":__dirname+"/",y=function(e,t){return k||(k=l0),w||(w=K8),e=w.normalize(e),k.readFileSync(e,t?null:"utf8")},x=function(e){var t=y(e,!0);return t.buffer||(t=new Uint8Array(t)),U(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ct))throw e})),process.on("unhandledRejection",ae),g=function(e){process.exit(e)},c.inspect=function(){return"[Emscripten Module object]"};try{E=q8}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}wq.Worker=E.Worker}else m?("undefined"!=typeof read&&(y=function(e){return read(e)}),x=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(U("object"==Ty(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"function"==typeof quit&&(g=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(f||p)&&(p?I=self.location.href:"undefined"!=typeof document&&document.currentScript&&(I=document.currentScript.src),void 0!==n&&n&&(I=n),I=0!==I.indexOf("blob:")?I.substr(0,I.lastIndexOf("/")+1):"",h?(y=function(e,t){return k||(k=l0),w||(w=K8),e=w.normalize(e),k.readFileSync(e,t?null:"utf8")},x=function(e){var t=y(e,!0);return t.buffer||(t=new Uint8Array(t)),U(t.buffer),t}):(y=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},p&&(x=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),b=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}));h&&"undefined"==typeof performance&&(wq.performance=q8.performance);var S,T=c.print||console.log.bind(console),A=c.printErr||console.warn.bind(console);for(l in d)d.hasOwnProperty(l)&&(c[l]=d[l]);d=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&(g=c.quit),c.wasmBinary&&(S=c.wasmBinary);var N,_,R=c.noExitRuntime||!0;"object"!=("undefined"==typeof WebAssembly?"undefined":Ty(WebAssembly))&&ae("no native wasm support detected");var O,F,M,D,B,P,L=!1;function U(e,t){e||ae("Assertion failed: "+t)}function V(e){var t=c["_"+e];return U(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function W(e,t,n,r,a){var o={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);H(e,t=at(n),n)}return t},array:function(e){var t=at(e.length);return G(e,t),t}},i=V(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=o[n[c]];l?(0===u&&(u=nt()),s[c]=l(r[c])):s[c]=r[c]}var d=i.apply(null,s);return d=function(e){return"string"===t?j(e):"boolean"===t?Boolean(e):e}(d),0!==u&&rt(u),d}function z(e,t,n){for(var r=t+n,a="";!(t>=r);){var o=e[t++];if(!o)return a;if(128&o){var i=63&e[t++];if(192!=(224&o)){var s=63&e[t++];if((o=224==(240&o)?(15&o)<<12|i<<6|s:(7&o)<<18|i<<12|s<<6|63&e[t++])<65536)a+=String.fromCharCode(o);else{var u=o-65536;a+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else a+=String.fromCharCode((31&o)<<6|i)}else a+=String.fromCharCode(o)}return a}function j(e,t){return e?z(r(),e,t):""}function H(e,t,n){return function(e,t,n,r){if(!(r>0))return 0;for(var a=n,o=n+r-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-a}(e,r(),t,n)}function G(e,n){t().set(e,n)}function K(e,t){return e%t>0&&(e+=t-e%t),e}function q(e){O=e,c.HEAP8=F=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=D=new Int32Array(e),c.HEAPU8=M=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=B=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=P=new Float64Array(e)}var X,Q=c.INITIAL_MEMORY||16777216;if(v)N=c.wasmMemory,O=c.buffer;else if(c.wasmMemory)N=c.wasmMemory;else if(!((N=new WebAssembly.Memory({initial:Q/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw A("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),h&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");N&&(O=N.buffer),Q=O.byteLength,q(O);var Y=[],$=[],Z=[],J=[];function ee(e){Y.unshift(e)}function te(e){J.unshift(e)}v||$.push({func:function(){ze()}});var ne=0,re=null;function ae(e){c.onAbort&&c.onAbort(e),v&&console.error("Pthread aborting at "+(new Error).stack),A(e+=""),L=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw u(t),t}function oe(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}c.preloadedImages={},c.preloadedAudios={};function ie(e){return oe(e,"data:application/octet-stream;base64,")}function se(e){return oe(e,"file://")}var ue="tfjs-backend-wasm-threaded-simd.wasm";function ce(e){try{if(e==ue&&S)return new Uint8Array(S);if(x)return x(e);throw"both async and sync fetching of the wasm failed"}catch(e){ae(e)}}ie(ue)||(ue=C(ue));var le={8991:function(e,t){setTimeout((function(){$e(e,t)}),0)}};function de(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?X.get(n)():X.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(c)}}function fe(e,n){if(e<=0||e>t().length||!0&e||n<0)return-28;if(0==n)return 0;n>=2147483647&&(n=1/0);var r=Atomics.load(a(),ut>>2),o=0;if(r==e&&Atomics.compareExchange(a(),ut>>2,r,0)==r&&(o=1,--n<=0))return 1;var i=Atomics.notify(a(),e>>2,n);if(i>=0)return i+o;throw"Atomics.notify returned an unexpected value "+i}function pe(e){if(v)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in killThread!";a()[e+12>>2]=0;var t=ge.pthreads[e];t.worker.terminate(),ge.freeThreadData(t),ge.runningWorkers.splice(ge.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}function he(e){if(v)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";a()[e+12>>2]=0;var t=ge.pthreads[e];if(t){var n=t.worker;ge.returnWorkerToPool(n)}}c._emscripten_futex_wake=fe;var me,ge={unusedWorkers:[],runningWorkers:[],initMainThreadBlock:function(){for(var e=0;e<8;++e)ge.allocateUnusedWorker()},initRuntime:function(){for(var e=je(228),t=0;t<57;++t)o()[e/4+t]=0;a()[e+12>>2]=e;var n=e+152;a()[n>>2]=n;var r=je(512);for(t=0;t<128;++t)o()[r/4+t]=0;Atomics.store(o(),e+100>>2,r),Atomics.store(o(),e+40>>2,e),tt(e,!p,1),Ye(e)},initWorker:function(){},pthreads:{},threadExitHandlers:[],setThreadStatus:function(){},runExitHandlers:function(){for(;ge.threadExitHandlers.length>0;)ge.threadExitHandlers.pop()();v&&qe()&&Xe()},threadExit:function(e){var t=qe();t&&(Atomics.store(o(),t+4>>2,e),Atomics.store(o(),t+0>>2,1),Atomics.store(o(),t+56>>2,1),Atomics.store(o(),t+60>>2,0),ge.runExitHandlers(),fe(t+0,2147483647),tt(0,0,0),v&&postMessage({cmd:"exit"}))},threadCancel:function(){ge.runExitHandlers();var e=qe();Atomics.store(o(),e+4>>2,-1),Atomics.store(o(),e+0>>2,1),fe(e+0,2147483647),tt(0,0,0),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in ge.pthreads)(r=ge.pthreads[e])&&r.worker&&ge.returnWorkerToPool(r.worker);ge.pthreads={};for(var t=0;t<ge.unusedWorkers.length;++t)(n=ge.unusedWorkers[t]).terminate();for(ge.unusedWorkers=[],t=0;t<ge.runningWorkers.length;++t){var n,r=(n=ge.runningWorkers[t]).pthread;ge.freeThreadData(r),n.terminate()}ge.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var t=a()[e.threadInfoStruct+100>>2];a()[e.threadInfoStruct+100>>2]=0,He(t),He(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&He(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){ge.runWithoutMainThreadQueuedCalls((function(){delete ge.pthreads[e.pthread.threadInfoStruct],ge.unusedWorkers.push(e),ge.runningWorkers.splice(ge.runningWorkers.indexOf(e),1),ge.freeThreadData(e.pthread),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){a()[st>>2]=0;try{e()}finally{a()[st>>2]=1}},receiveObjectTransfer:function(e){},loadWasmModuleToWorker:function(e,t){e.onmessage=function(n){var r=n.data,a=r.cmd;if(e.pthread&&(ge.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),r.targetThread&&r.targetThread!=qe()){var i=ge.pthreads[r.targetThread];return i?i.worker.postMessage(n.data,r.transferList):console.error('Internal error! Worker sent a message "'+a+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(ge.currentProxiedOperationCallerThread=void 0)}if("processQueuedMainThreadWork"===a)Qe();else if("spawnThread"===a)Pe(n.data);else if("cleanupThread"===a)he(r.thread);else if("killThread"===a)pe(r.thread);else if("cancelThread"===a)!function(e){if(v)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cancelThread!";ge.pthreads[e].worker.postMessage({cmd:"cancel"})}(r.thread);else if("loaded"===a)e.loaded=!0,t&&t(e),e.runPthread&&(e.runPthread(),delete e.runPthread);else if("print"===a)T("Thread "+r.threadId+": "+r.text);else if("printErr"===a)A("Thread "+r.threadId+": "+r.text);else if("alert"===a)alert("Thread "+r.threadId+": "+r.text);else if("exit"===a)e.pthread&&Atomics.load(o(),e.pthread.threadInfoStruct+64>>2)&&ge.returnWorkerToPool(e);else if("exitProcess"===a)try{!function(e,t){if(!t||!R||0!==e){if(!t&&v)throw postMessage({cmd:"exitProcess",returnCode:e}),new ct(e);R||(ge.terminateAllThreads(),c.onExit&&c.onExit(e),L=!0),g(e,new ct(e))}}(r.returnCode)}catch(n){if(n instanceof ct)return;throw n}else"cancelDone"===a?ge.returnWorkerToPool(e):"objectTransfer"===a?ge.receiveObjectTransfer(n.data):"setimmediate"===n.data.target?e.postMessage(n.data):A("worker sent an unknown command "+a);ge.currentProxiedOperationCallerThread=void 0},e.onerror=function(e){A("pthread sent an error! "+e.filename+":"+e.lineno+": "+e.message)},h&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("exit",(function(e){}))),e.postMessage({cmd:"load",urlOrBlob:c.mainScriptUrlOrBlob||n,wasmMemory:N,wasmModule:_})},allocateUnusedWorker:function(){var e=C("tfjs-backend-wasm-threaded-simd.worker.js");ge.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==ge.unusedWorkers.length&&(ge.allocateUnusedWorker(),ge.loadWasmModuleToWorker(ge.unusedWorkers[0])),ge.unusedWorkers.length>0?ge.unusedWorkers.pop():null},busySpinWait:function(e){for(var t=performance.now()+e;performance.now()<t;);}};function ve(e,t){for(var n=arguments.length-2,r=nt(),a=n,o=at(8*a),s=o>>3,u=0;u<n;u++){var c=arguments[2+u];i()[s+u]=c}var l=Je(e,a,o,t);return rt(r),l}c.establishStackSpace=function(e,t){ot(e,t),rt(e)},c.getNoExitRuntime=function(){return R},c.invokeEntryPoint=function(e,t){return X.get(e)(t)},me=h?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:v?function(){return performance.now()-c.__performance_now_clock_drift}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var ye=[],be=[];function xe(e,t){var n;for(be.length=0,t>>=2;n=r()[e++];){var o=n<105;o&&1&t&&t++,be.push(o?i()[t++>>1]:a()[t]),++t}return be}function ke(){return r().length}function we(e){try{return N.grow(e-O.byteLength+65535>>>16),q(N.buffer),1}catch(e){}}var Ie={inEventHandler:0,removeAllEventListeners:function(){for(var e=Ie.eventHandlers.length-1;e>=0;--e)Ie._removeHandler(e);Ie.eventHandlers=[],Ie.deferredCalls=[]},registerRemoveEventListeners:function(){Ie.removeEventListenersRegistered||(Ie.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var a in Ie.deferredCalls){var o=Ie.deferredCalls[a];if(o.targetFunction==e&&r(o.argsList,n))return}Ie.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),Ie.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<Ie.deferredCalls.length;++t)Ie.deferredCalls[t].targetFunction==e&&(Ie.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return Ie.inEventHandler&&Ie.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Ie.canPerformEventHandlerRequests())for(var e=0;e<Ie.deferredCalls.length;++e){var t=Ie.deferredCalls[e];Ie.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<Ie.eventHandlers.length;++n)Ie.eventHandlers[n].target!=e||t&&t!=Ie.eventHandlers[n].eventTypeString||Ie._removeHandler(n--)},_removeHandler:function(e){var t=Ie.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),Ie.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++Ie.inEventHandler,Ie.currentEventHandler=e,Ie.runDeferredCalls(),e.handlerFunc(t),Ie.runDeferredCalls(),--Ie.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),Ie.eventHandlers.push(e),Ie.registerRemoveEventListeners();else for(var n=0;n<Ie.eventHandlers.length;++n)Ie.eventHandlers[n].target==e.target&&Ie.eventHandlers[n].eventTypeString==e.eventTypeString&&Ie._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,t,n,r,o){var i=nt(),s=at(12);a()[s>>2]=n,a()[s+4>>2]=r,a()[s+8>>2]=o,et(0,e,637534208,t,r,s),rt(i)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return ge.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Ce(e,t,n,r){var o=nt(),i=at(12),s=0;t&&(s=function(e){var t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(e)+1,n=je(t);return H(e,n,t),n}(t)),a()[i>>2]=s,a()[i+4>>2]=n,a()[i+8>>2]=r,et(0,e,657457152,0,s,i),rt(o)}var Ee=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function Se(e){return e=function(e){return e>2?j(e):e}(e),Ee[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function Te(e){return Se(e)}function Ae(e,t,n){var r=Te(e);if(!r)return-4;if(r.canvasSharedPtr&&(a()[r.canvasSharedPtr>>2]=t,a()[r.canvasSharedPtr+4>>2]=n),!r.offscreenCanvas&&r.controlTransferredOffscreen)return r.canvasSharedPtr?(function(e,t,n,r){Ce(e,t=t?j(t):"",n,r)}(a()[r.canvasSharedPtr+8>>2],e,t,n),1):-4;r.offscreenCanvas&&(r=r.offscreenCanvas);var o=!1;if(r.GLctxObject&&r.GLctxObject.GLctx){var i=r.GLctxObject.GLctx.getParameter(2978);o=0===i[0]&&0===i[1]&&i[2]===r.width&&i[3]===r.height}return r.width=t,r.height=n,o&&r.GLctxObject.GLctx.viewport(0,0,t,n),0}function Ne(e,t,n){return v?ve(2,1,e,t,n):Ae(e,t,n)}var _e={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){_e.lastError||(_e.lastError=e)},getNewId:function(e){for(var t=_e.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,r){for(var o="",i=0;i<t;++i){var s=r?a()[r+4*i>>2]:-1;o+=j(a()[n+4*i>>2],s<0?void 0:s)}return o},createContext:function(e,t){var n=e.getContext("webgl",t);return n?_e.registerContext(n,t):0},registerContext:function(e,t){var n=je(8);a()[n+4>>2]=qe();var r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),_e.contexts[n]=r,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&_e.initExtensions(r),n},makeContextCurrent:function(e){return _e.currentContext=_e.contexts[e],c.ctx=Oe=_e.currentContext&&_e.currentContext.GLctx,!(e&&!Oe)},getContext:function(e){return _e.contexts[e]},deleteContext:function(e){_e.currentContext===_e.contexts[e]&&(_e.currentContext=null),"object"==Ty(Ie)&&Ie.removeAllHandlersOnTarget(_e.contexts[e].GLctx.canvas),_e.contexts[e]&&_e.contexts[e].GLctx.canvas&&(_e.contexts[e].GLctx.canvas.GLctxObject=void 0),He(_e.contexts[e].handle),_e.contexts[e]=null},initExtensions:function(e){if(e||(e=_e.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;(function(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,a){t.drawArraysInstancedANGLE(e,n,r,a)},e.drawElementsInstanced=function(e,n,r,a,o){t.drawElementsInstancedANGLE(e,n,r,a,o)}})(t),function(e){var t=e.getExtension("OES_vertex_array_object");if(t)e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)}}(t),function(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)}}(t),t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query"),function(e){e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")}(t),(t.getSupportedExtensions()||[]).forEach((function(e){e.indexOf("lose_context")<0&&e.indexOf("debug")<0&&t.getExtension(e)}))}},populateUniformTable:function(e){for(var t=_e.programs[e],n=_e.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},r=n.uniforms,a=Oe.getProgramParameter(t,35718),o=0;o<a;++o){var i=Oe.getActiveUniform(t,o),s=i.name;n.maxUniformLength=Math.max(n.maxUniformLength,s.length+1),"]"==s.slice(-1)&&(s=s.slice(0,s.lastIndexOf("[")));var u=Oe.getUniformLocation(t,s);if(u){var c=_e.getNewId(_e.uniforms);r[s]=[i.size,c],_e.uniforms[c]=u;for(var l=1;l<i.size;++l){var d=s+"["+l+"]";u=Oe.getUniformLocation(t,d),c=_e.getNewId(_e.uniforms),_e.uniforms[c]=u}}}}},Re=["default","low-power","high-performance"];var Oe,Fe={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Fe.buffers[e];0===t||10===t?((1===e?T:A)(z(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return Fe.varargs+=4,a()[Fe.varargs-4>>2]},getStr:function(e){return j(e)},get64:function(e,t){return e}};function Me(e){return v?ve(3,1,e):0}function De(e,t,n,r,a){if(v)return ve(4,1,e,t,n,r,a)}function Be(e,t,n,o){if(v)return ve(5,1,e,t,n,o);for(var i=0,s=0;s<n;s++){for(var u=a()[t+8*s>>2],c=a()[t+(8*s+4)>>2],l=0;l<c;l++)Fe.printChar(e,r()[u+l]);i+=c}return a()[o>>2]=i,0}function Pe(e){if(v)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var t=ge.getNewWorker();if(void 0!==t.pthread)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";ge.runningWorkers.push(t);for(var n=je(512),r=0;r<128;++r)a()[n+4*r>>2]=0;var i=e.stackBase+e.stackSize,s=ge.pthreads[e.pthread_ptr]={worker:t,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,threadInfoStruct:e.pthread_ptr},u=s.threadInfoStruct>>2;Atomics.store(o(),u+16,e.detached),Atomics.store(o(),u+25,n),Atomics.store(o(),u+10,s.threadInfoStruct),Atomics.store(o(),u+20,e.stackSize),Atomics.store(o(),u+19,i),Atomics.store(o(),u+26,e.stackSize),Atomics.store(o(),u+28,i),Atomics.store(o(),u+29,e.detached);var c=Ke()+40;Atomics.store(o(),u+43,c),t.pthread=s;var l={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};t.runPthread=function(){l.time=performance.now(),t.postMessage(l,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread)}function Le(e){if(v)return ve(6,1,e);switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==("undefined"==typeof navigator?"undefined":Ty(navigator))&&navigator.hardwareConcurrency||1}return function(e){a()[Ge()>>2]=e}(28),-1}v||ge.initMainThreadBlock();var Ue,Ve=[null,function(e,t){if(v)return ve(1,1,e,t)},Ne,Me,De,Be,Le],We={e:function(e,t,n,r){ae("Assertion failed: "+j(e)+", at: "+[t?j(t):"unknown filename",n,r?j(r):"unknown function"])},r:function(e,t){_main(e,t)},x:function(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(v)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=ge.pthreads[e],r=n&&n.worker;if(!r)return;r.postMessage({cmd:"processThreadQueue"})}return 1},b:function(){ae()},y:function(e,t,n){var r=xe(t,n);return le[e].apply(null,r)},j:function(e,t){},c:function(e,n,r){if(e<=0||e>t().length||!0&e)return-28;if(f){if(Atomics.load(a(),e>>2)!=n)return-6;var o=performance.now(),i=o+r;for(Atomics.exchange(a(),ut>>2,e);;){if((o=performance.now())>i)return Atomics.exchange(a(),ut>>2,0),-73;if(0==Atomics.exchange(a(),ut>>2,0))break;if(Qe(),Atomics.load(a(),e>>2)!=n)return-6;Atomics.exchange(a(),ut>>2,e)}return 0}var s=Atomics.wait(a(),e>>2,n,r);if("timed-out"===s)return-73;if("not-equal"===s)return-6;if("ok"===s)return 0;throw"Atomics.wait returned an unexpected value "+s},d:fe,f:me,p:function(e,t,n){r().copyWithin(e,t,t+n)},z:function(){return h?X8.cpus().length:navigator.hardwareConcurrency},u:function(e,t,n){ye.length=t;for(var r=n>>3,a=0;a<t;a++)ye[a]=i()[r+a];return(e<0?le[-e-1]:Ve[e]).apply(null,ye)},q:function(e){var t=ke();if(e<=t)return!1;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),we(Math.min(n,K(Math.max(e,a),65536))))return!0}return!1},v:function(e,t,n){return Te(e)?Ae(e,t,n):Ne(e,t,n)},i:function(e){},t:function(e,t){},w:function(e,t){return function(e,t){var n=t>>2,r=a()[n+6],o={alpha:!!a()[n+0],depth:!!a()[n+1],stencil:!!a()[n+2],antialias:!!a()[n+3],premultipliedAlpha:!!a()[n+4],preserveDrawingBuffer:!!a()[n+5],powerPreference:Re[r],failIfMajorPerformanceCaveat:!!a()[n+7],majorVersion:a()[n+8],minorVersion:a()[n+9],enableExtensionsByDefault:a()[n+10],explicitSwapControl:a()[n+11],proxyContextToMainThread:a()[n+12],renderViaOffscreenBackBuffer:a()[n+13]},i=Te(e);return i?o.explicitSwapControl?0:_e.createContext(i,o):0}(e,t)},m:Me,n:De,g:Be,o:function(){ge.initRuntime()},a:N||c.wasmMemory,k:function(e){var t=ge.threadExitHandlers.pop();e&&t()},l:function(e,t){ge.threadExitHandlers.push((function(){X.get(e)(t)}))},h:function(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return A("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!e)return A("pthread_create called with a null thread pointer!"),28;var i=[];if(v&&0===i.length)return Ze(687865856,e,t,n,r);var s=0,u=0,c=0;t&&-1!=t?(s=a()[t>>2],s+=81920,u=a()[t+8>>2],c=0!==a()[t+12>>2]):s=2097152;var l=0==u;l?u=it(16,s):U((u-=s)>0);for(var d=je(228),f=0;f<57;++f)o()[(d>>2)+f]=0;a()[e>>2]=d,a()[d+12>>2]=d;var p=d+152;a()[p>>2]=p;var h={stackBase:u,stackSize:s,allocatedOwnStack:l,detached:c,startRoutine:n,pthread_ptr:d,arg:r,transferList:i};return v?(h.cmd="spawnThread",postMessage(h,i)):Pe(h),0},s:Le},ze=(function(){var e={a:We};function t(e,t){var n=e.exports;if(c.asm=n,X=c.asm.F,_=t,!v){var r=ge.unusedWorkers.length;ge.unusedWorkers.forEach((function(e){ge.loadWasmModuleToWorker(e,(function(){--r||function(e){if(ne--,c.monitorRunDependencies&&c.monitorRunDependencies(ne),0==ne&&re){var t=re;re=null,t()}}()}))}))}}function n(e){t(e.instance,e.module)}function r(t){return function(){if(!S&&(f||p)){if("function"==typeof fetch&&!se(ue))return fetch(ue,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ue+"'";return e.arrayBuffer()})).catch((function(){return ce(ue)}));if(b)return new Promise((function(e,t){b(ue,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return ce(ue)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){A("failed to asynchronously prepare wasm: "+e),ae(e)}))}if(v||(U(!v,"addRunDependency cannot be used in a pthread worker"),ne++,c.monitorRunDependencies&&c.monitorRunDependencies(ne)),c.instantiateWasm)try{return c.instantiateWasm(e,t)}catch(e){return A("Module.instantiateWasm callback failed with error: "+e),!1}(S||"function"!=typeof WebAssembly.instantiateStreaming||ie(ue)||se(ue)||"function"!=typeof fetch?r(n):fetch(ue,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return A("wasm streaming compile failed: "+e),A("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(u)}(),c.___wasm_call_ctors=function(){return(ze=c.___wasm_call_ctors=c.asm.A).apply(null,arguments)}),je=(c._init=function(){return(c._init=c.asm.B).apply(null,arguments)},c._register_tensor=function(){return(c._register_tensor=c.asm.C).apply(null,arguments)},c._dispose_data=function(){return(c._dispose_data=c.asm.D).apply(null,arguments)},c._dispose=function(){return(c._dispose=c.asm.E).apply(null,arguments)},c._Abs=function(){return(c._Abs=c.asm.G).apply(null,arguments)},c._Add=function(){return(c._Add=c.asm.H).apply(null,arguments)},c._AddN=function(){return(c._AddN=c.asm.I).apply(null,arguments)},c._ArgMax=function(){return(c._ArgMax=c.asm.J).apply(null,arguments)},c._AvgPool=function(){return(c._AvgPool=c.asm.K).apply(null,arguments)},c._BatchMatMul=function(){return(c._BatchMatMul=c.asm.L).apply(null,arguments)},c._Ceil=function(){return(c._Ceil=c.asm.M).apply(null,arguments)},c._ClipByValue=function(){return(c._ClipByValue=c.asm.N).apply(null,arguments)},c._Conv2D=function(){return(c._Conv2D=c.asm.O).apply(null,arguments)},c._Conv2DBackpropInput=function(){return(c._Conv2DBackpropInput=c.asm.P).apply(null,arguments)},c._Cos=function(){return(c._Cos=c.asm.Q).apply(null,arguments)},c._CropAndResize=function(){return(c._CropAndResize=c.asm.R).apply(null,arguments)},c._Cumsum=function(){return(c._Cumsum=c.asm.S).apply(null,arguments)},c._DepthToSpace=function(){return(c._DepthToSpace=c.asm.T).apply(null,arguments)},c._DepthwiseConv2dNative=function(){return(c._DepthwiseConv2dNative=c.asm.U).apply(null,arguments)},c._Equal=function(){return(c._Equal=c.asm.V).apply(null,arguments)},c._Exp=function(){return(c._Exp=c.asm.W).apply(null,arguments)},c._FlipLeftRight=function(){return(c._FlipLeftRight=c.asm.X).apply(null,arguments)},c._Floor=function(){return(c._Floor=c.asm.Y).apply(null,arguments)},c._FloorDiv=function(){return(c._FloorDiv=c.asm.Z).apply(null,arguments)},c._FusedBatchNorm=function(){return(c._FusedBatchNorm=c.asm._).apply(null,arguments)},c._FusedConv2D=function(){return(c._FusedConv2D=c.asm.$).apply(null,arguments)},c._FusedDepthwiseConv2D=function(){return(c._FusedDepthwiseConv2D=c.asm.aa).apply(null,arguments)},c._Gather=function(){return(c._Gather=c.asm.ba).apply(null,arguments)},c._GatherNd=function(){return(c._GatherNd=c.asm.ca).apply(null,arguments)},c._Greater=function(){return(c._Greater=c.asm.da).apply(null,arguments)},c._GreaterEqual=function(){return(c._GreaterEqual=c.asm.ea).apply(null,arguments)},c._LeakyRelu=function(){return(c._LeakyRelu=c.asm.fa).apply(null,arguments)},c._Less=function(){return(c._Less=c.asm.ga).apply(null,arguments)},c._LessEqual=function(){return(c._LessEqual=c.asm.ha).apply(null,arguments)},c._Log=function(){return(c._Log=c.asm.ia).apply(null,arguments)},c._LogicalAnd=function(){return(c._LogicalAnd=c.asm.ja).apply(null,arguments)},c._Max=function(){return(c._Max=c.asm.ka).apply(null,arguments)},c._MaxPool=function(){return(c._MaxPool=c.asm.la).apply(null,arguments)},c._Maximum=function(){return(c._Maximum=c.asm.ma).apply(null,arguments)},c._Mean=function(){return(c._Mean=c.asm.na).apply(null,arguments)},c._Min=function(){return(c._Min=c.asm.oa).apply(null,arguments)},c._Minimum=function(){return(c._Minimum=c.asm.pa).apply(null,arguments)},c._Multiply=function(){return(c._Multiply=c.asm.qa).apply(null,arguments)},c._Neg=function(){return(c._Neg=c.asm.ra).apply(null,arguments)},c._NonMaxSuppressionV3=function(){return(c._NonMaxSuppressionV3=c.asm.sa).apply(null,arguments)},c._NonMaxSuppressionV4=function(){return(c._NonMaxSuppressionV4=c.asm.ta).apply(null,arguments)},c._NonMaxSuppressionV5=function(){return(c._NonMaxSuppressionV5=c.asm.ua).apply(null,arguments)},c._NotEqual=function(){return(c._NotEqual=c.asm.va).apply(null,arguments)},c._OneHot=function(){return(c._OneHot=c.asm.wa).apply(null,arguments)},c._PadV2=function(){return(c._PadV2=c.asm.xa).apply(null,arguments)},c._Pow=function(){return(c._Pow=c.asm.ya).apply(null,arguments)},c._Prelu=function(){return(c._Prelu=c.asm.za).apply(null,arguments)},c._Prod=function(){return(c._Prod=c.asm.Aa).apply(null,arguments)},c._RealDiv=function(){return(c._RealDiv=c.asm.Ba).apply(null,arguments)},c._Relu=function(){return(c._Relu=c.asm.Ca).apply(null,arguments)},c._Relu6=function(){return(c._Relu6=c.asm.Da).apply(null,arguments)},c._ResizeBilinear=function(){return(c._ResizeBilinear=c.asm.Ea).apply(null,arguments)},c._Reverse=function(){return(c._Reverse=c.asm.Fa).apply(null,arguments)},c._RotateWithOffset=function(){return(c._RotateWithOffset=c.asm.Ga).apply(null,arguments)},c._Round=function(){return(c._Round=c.asm.Ha).apply(null,arguments)},c._Rsqrt=function(){return(c._Rsqrt=c.asm.Ia).apply(null,arguments)},c._ScatterNd=function(){return(c._ScatterNd=c.asm.Ja).apply(null,arguments)},c._SelectV2=function(){return(c._SelectV2=c.asm.Ka).apply(null,arguments)},c._Sigmoid=function(){return(c._Sigmoid=c.asm.La).apply(null,arguments)},c._Sin=function(){return(c._Sin=c.asm.Ma).apply(null,arguments)},c._Softmax=function(){return(c._Softmax=c.asm.Na).apply(null,arguments)},c._Sqrt=function(){return(c._Sqrt=c.asm.Oa).apply(null,arguments)},c._Square=function(){return(c._Square=c.asm.Pa).apply(null,arguments)},c._SquaredDifference=function(){return(c._SquaredDifference=c.asm.Qa).apply(null,arguments)},c._Step=function(){return(c._Step=c.asm.Ra).apply(null,arguments)},c._StridedSlice=function(){return(c._StridedSlice=c.asm.Sa).apply(null,arguments)},c._Sub=function(){return(c._Sub=c.asm.Ta).apply(null,arguments)},c._Sum=function(){return(c._Sum=c.asm.Ua).apply(null,arguments)},c._Tanh=function(){return(c._Tanh=c.asm.Va).apply(null,arguments)},c._Tile=function(){return(c._Tile=c.asm.Wa).apply(null,arguments)},c._TopK=function(){return(c._TopK=c.asm.Xa).apply(null,arguments)},c._Transpose=function(){return(c._Transpose=c.asm.Ya).apply(null,arguments)},c.__FusedMatMul=function(){return(c.__FusedMatMul=c.asm.Za).apply(null,arguments)},c._malloc=function(){return(je=c._malloc=c.asm._a).apply(null,arguments)}),He=c._free=function(){return(He=c._free=c.asm.$a).apply(null,arguments)},Ge=c.___errno_location=function(){return(Ge=c.___errno_location=c.asm.ab).apply(null,arguments)},Ke=c._emscripten_get_global_libc=function(){return(Ke=c._emscripten_get_global_libc=c.asm.bb).apply(null,arguments)},qe=c._pthread_self=function(){return(qe=c._pthread_self=c.asm.cb).apply(null,arguments)},Xe=c.___pthread_tsd_run_dtors=function(){return(Xe=c.___pthread_tsd_run_dtors=c.asm.db).apply(null,arguments)},Qe=c._emscripten_main_thread_process_queued_calls=function(){return(Qe=c._emscripten_main_thread_process_queued_calls=c.asm.eb).apply(null,arguments)},Ye=(c._emscripten_current_thread_process_queued_calls=function(){return(c._emscripten_current_thread_process_queued_calls=c.asm.fb).apply(null,arguments)},c._emscripten_register_main_browser_thread_id=function(){return(Ye=c._emscripten_register_main_browser_thread_id=c.asm.gb).apply(null,arguments)}),$e=c.__emscripten_do_dispatch_to_thread=function(){return($e=c.__emscripten_do_dispatch_to_thread=c.asm.hb).apply(null,arguments)},Ze=c._emscripten_sync_run_in_main_thread_4=function(){return(Ze=c._emscripten_sync_run_in_main_thread_4=c.asm.ib).apply(null,arguments)},Je=c._emscripten_run_in_main_runtime_thread_js=function(){return(Je=c._emscripten_run_in_main_runtime_thread_js=c.asm.jb).apply(null,arguments)},et=c.__emscripten_call_on_thread=function(){return(et=c.__emscripten_call_on_thread=c.asm.kb).apply(null,arguments)},tt=(c._emscripten_tls_init=function(){return(c._emscripten_tls_init=c.asm.lb).apply(null,arguments)},c.__emscripten_thread_init=function(){return(tt=c.__emscripten_thread_init=c.asm.mb).apply(null,arguments)}),nt=c.stackSave=function(){return(nt=c.stackSave=c.asm.nb).apply(null,arguments)},rt=c.stackRestore=function(){return(rt=c.stackRestore=c.asm.ob).apply(null,arguments)},at=c.stackAlloc=function(){return(at=c.stackAlloc=c.asm.pb).apply(null,arguments)},ot=c._emscripten_stack_set_limits=function(){return(ot=c._emscripten_stack_set_limits=c.asm.qb).apply(null,arguments)},it=c._memalign=function(){return(it=c._memalign=c.asm.rb).apply(null,arguments)},st=c.__emscripten_allow_main_runtime_queued_calls=9880,ut=c.__emscripten_main_thread_futex=11368;function ct(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function lt(e){if(!(ne>0)){if(v)return s(c),void postMessage({cmd:"loaded"});(function(){if(!v){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)ee(c.preRun.shift());de(Y)}})(),ne>0||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),t()}),1)):t())}function t(){Ue||(Ue=!0,c.calledRun=!0,L||(de($),v||de(Z),s(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),function(){if(!v){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;)te(c.postRun.shift());de(J)}}()))}}if(c.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?V(e):function(){return W(e,t,n,arguments)}},c.PThread=ge,c.PThread=ge,c.wasmMemory=N,c.ExitStatus=ct,re=function e(){Ue||lt(),Ue||(re=e)},c.run=lt,c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return v&&(R=!1,ge.initWorker()),lt(),e.ready});e.exports=r})),Y8=Cq((function(e,t){var n,r=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(n=n||__filename),function(e){var t,r,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,n){t=e,r=n}));var o,i={};for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);var s,u,c,l;s="object"==("undefined"==typeof window?"undefined":Ty(window)),u="function"==typeof importScripts,c="object"==("undefined"==typeof process?"undefined":Ty(process))&&"object"==Ty(process.versions)&&"string"==typeof process.versions.node,l=!s&&!c&&!u;var d,f,p,h,m,g="";c?(g=u?K8.dirname(g)+"/":__dirname+"/",d=function(e,t){return h||(h=l0),m||(m=K8),e=m.normalize(e),h.readFileSync(e,t?null:"utf8")},p=function(e){var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),w(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ae))throw e})),process.on("unhandledRejection",j),a.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(d=function(e){return read(e)}),p=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(w("object"==Ty(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(s||u)&&(u?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),n&&(g=n),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var v,y,b=a.print||console.log.bind(console),x=a.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);i=null,a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,a.quit&&a.quit,a.wasmBinary&&(v=a.wasmBinary),a.noExitRuntime,"object"!=("undefined"==typeof WebAssembly?"undefined":Ty(WebAssembly))&&j("no native wasm support detected");var k=!1;function w(e,t){e||j("Assertion failed: "+t)}function I(e){var t=a["_"+e];return w(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function C(e,t,n,r,a){var o={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);!function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var a=n,o=n+r-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(e,T,t,n)}(e,t=re(n),n)}return t},array:function(e){var t=re(e.length);return function(e,t){S.set(e,t)}(e,t),t}},i=I(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=o[n[c]];l?(0===u&&(u=te()),s[c]=l(r[c])):s[c]=r[c]}var d=i.apply(null,s);return d=function(e){return"string"===t?R(e):"boolean"===t?Boolean(e):e}(d),0!==u&&ne(u),d}var E,S,T,A,N="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function _(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&N)return N.decode(e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var u=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|u:(7&i)<<18|s<<12|u<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var c=i-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&i)<<6|s)}else o+=String.fromCharCode(i)}return o}function R(e,t){return e?_(T,e,t):""}function O(e,t){return e%t>0&&(e+=t-e%t),e}function F(e){E=e,a.HEAP8=S=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=A=new Int32Array(e),a.HEAPU8=T=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var M,D=[],B=[],P=[],L=[];function U(e){D.unshift(e)}function V(e){L.unshift(e)}B.push({func:function(){ee()}});var W=0,z=null;function j(e){a.onAbort&&a.onAbort(e),x(e+=""),k=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}function H(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}a.preloadedImages={},a.preloadedAudios={};function G(e){return H(e,"data:application/octet-stream;base64,")}function K(e){return H(e,"file://")}var q="tfjs-backend-wasm.wasm";function X(e){try{if(e==q&&v)return new Uint8Array(v);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(e){j(e)}}function Q(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?M.get(n)():M.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}function Y(e){try{return y.grow(e-E.byteLength+65535>>>16),F(y.buffer),1}catch(e){}}G(q)||(q=function(e){return a.locateFile?a.locateFile(e,g):g+e}(q));var $={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=$.buffers[e];0===t||10===t?((1===e?b:x)(_(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return $.varargs+=4,A[$.varargs-4>>2]},getStr:function(e){return R(e)},get64:function(e,t){return e}};var Z,J={a:function(){j()},d:function(e,t,n){T.copyWithin(e,t,t+n)},e:function(e){var t=T.length,n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),Y(Math.min(n,O(Math.max(e,a),65536))))return!0}return!1},f:function(e){return 0},c:function(e,t,n,r,a){},b:function(e,t,n,r){for(var a=0,o=0;o<n;o++){for(var i=A[t+8*o>>2],s=A[t+(8*o+4)>>2],u=0;u<s;u++)$.printChar(e,T[i+u]);a+=s}return A[r>>2]=a,0}},ee=(function(){var e={a:J};function t(e,t){var n=e.exports;a.asm=n,F((y=a.asm.g).buffer),M=a.asm.m,function(e){if(W--,a.monitorRunDependencies&&a.monitorRunDependencies(W),0==W&&z){var t=z;z=null,t()}}()}function n(e){t(e.instance)}function o(t){return function(){if(!v&&(s||u)){if("function"==typeof fetch&&!K(q))return fetch(q,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+q+"'";return e.arrayBuffer()})).catch((function(){return X(q)}));if(f)return new Promise((function(e,t){f(q,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return X(q)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){x("failed to asynchronously prepare wasm: "+e),j(e)}))}if(W++,a.monitorRunDependencies&&a.monitorRunDependencies(W),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return x("Module.instantiateWasm callback failed with error: "+e),!1}(v||"function"!=typeof WebAssembly.instantiateStreaming||G(q)||K(q)||"function"!=typeof fetch?o(n):fetch(q,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),o(n)}))}))).catch(r)}(),a.___wasm_call_ctors=function(){return(ee=a.___wasm_call_ctors=a.asm.h).apply(null,arguments)}),te=(a._init=function(){return(a._init=a.asm.i).apply(null,arguments)},a._register_tensor=function(){return(a._register_tensor=a.asm.j).apply(null,arguments)},a._dispose_data=function(){return(a._dispose_data=a.asm.k).apply(null,arguments)},a._dispose=function(){return(a._dispose=a.asm.l).apply(null,arguments)},a._Abs=function(){return(a._Abs=a.asm.n).apply(null,arguments)},a._Add=function(){return(a._Add=a.asm.o).apply(null,arguments)},a._AddN=function(){return(a._AddN=a.asm.p).apply(null,arguments)},a._ArgMax=function(){return(a._ArgMax=a.asm.q).apply(null,arguments)},a._AvgPool=function(){return(a._AvgPool=a.asm.r).apply(null,arguments)},a._BatchMatMul=function(){return(a._BatchMatMul=a.asm.s).apply(null,arguments)},a._Ceil=function(){return(a._Ceil=a.asm.t).apply(null,arguments)},a._ClipByValue=function(){return(a._ClipByValue=a.asm.u).apply(null,arguments)},a._Conv2D=function(){return(a._Conv2D=a.asm.v).apply(null,arguments)},a._Conv2DBackpropInput=function(){return(a._Conv2DBackpropInput=a.asm.w).apply(null,arguments)},a._Cos=function(){return(a._Cos=a.asm.x).apply(null,arguments)},a._CropAndResize=function(){return(a._CropAndResize=a.asm.y).apply(null,arguments)},a._Cumsum=function(){return(a._Cumsum=a.asm.z).apply(null,arguments)},a._DepthToSpace=function(){return(a._DepthToSpace=a.asm.A).apply(null,arguments)},a._DepthwiseConv2dNative=function(){return(a._DepthwiseConv2dNative=a.asm.B).apply(null,arguments)},a._Equal=function(){return(a._Equal=a.asm.C).apply(null,arguments)},a._Exp=function(){return(a._Exp=a.asm.D).apply(null,arguments)},a._FlipLeftRight=function(){return(a._FlipLeftRight=a.asm.E).apply(null,arguments)},a._Floor=function(){return(a._Floor=a.asm.F).apply(null,arguments)},a._FloorDiv=function(){return(a._FloorDiv=a.asm.G).apply(null,arguments)},a._FusedBatchNorm=function(){return(a._FusedBatchNorm=a.asm.H).apply(null,arguments)},a._FusedConv2D=function(){return(a._FusedConv2D=a.asm.I).apply(null,arguments)},a._FusedDepthwiseConv2D=function(){return(a._FusedDepthwiseConv2D=a.asm.J).apply(null,arguments)},a._Gather=function(){return(a._Gather=a.asm.K).apply(null,arguments)},a._GatherNd=function(){return(a._GatherNd=a.asm.L).apply(null,arguments)},a._Greater=function(){return(a._Greater=a.asm.M).apply(null,arguments)},a._GreaterEqual=function(){return(a._GreaterEqual=a.asm.N).apply(null,arguments)},a._LeakyRelu=function(){return(a._LeakyRelu=a.asm.O).apply(null,arguments)},a._Less=function(){return(a._Less=a.asm.P).apply(null,arguments)},a._LessEqual=function(){return(a._LessEqual=a.asm.Q).apply(null,arguments)},a._Log=function(){return(a._Log=a.asm.R).apply(null,arguments)},a._LogicalAnd=function(){return(a._LogicalAnd=a.asm.S).apply(null,arguments)},a._Max=function(){return(a._Max=a.asm.T).apply(null,arguments)},a._MaxPool=function(){return(a._MaxPool=a.asm.U).apply(null,arguments)},a._Maximum=function(){return(a._Maximum=a.asm.V).apply(null,arguments)},a._Mean=function(){return(a._Mean=a.asm.W).apply(null,arguments)},a._Min=function(){return(a._Min=a.asm.X).apply(null,arguments)},a._Minimum=function(){return(a._Minimum=a.asm.Y).apply(null,arguments)},a._Multiply=function(){return(a._Multiply=a.asm.Z).apply(null,arguments)},a._Neg=function(){return(a._Neg=a.asm._).apply(null,arguments)},a._NonMaxSuppressionV3=function(){return(a._NonMaxSuppressionV3=a.asm.$).apply(null,arguments)},a._NonMaxSuppressionV4=function(){return(a._NonMaxSuppressionV4=a.asm.aa).apply(null,arguments)},a._NonMaxSuppressionV5=function(){return(a._NonMaxSuppressionV5=a.asm.ba).apply(null,arguments)},a._NotEqual=function(){return(a._NotEqual=a.asm.ca).apply(null,arguments)},a._OneHot=function(){return(a._OneHot=a.asm.da).apply(null,arguments)},a._PadV2=function(){return(a._PadV2=a.asm.ea).apply(null,arguments)},a._Pow=function(){return(a._Pow=a.asm.fa).apply(null,arguments)},a._Prelu=function(){return(a._Prelu=a.asm.ga).apply(null,arguments)},a._Prod=function(){return(a._Prod=a.asm.ha).apply(null,arguments)},a._RealDiv=function(){return(a._RealDiv=a.asm.ia).apply(null,arguments)},a._Relu=function(){return(a._Relu=a.asm.ja).apply(null,arguments)},a._Relu6=function(){return(a._Relu6=a.asm.ka).apply(null,arguments)},a._ResizeBilinear=function(){return(a._ResizeBilinear=a.asm.la).apply(null,arguments)},a._Reverse=function(){return(a._Reverse=a.asm.ma).apply(null,arguments)},a._RotateWithOffset=function(){return(a._RotateWithOffset=a.asm.na).apply(null,arguments)},a._Round=function(){return(a._Round=a.asm.oa).apply(null,arguments)},a._Rsqrt=function(){return(a._Rsqrt=a.asm.pa).apply(null,arguments)},a._ScatterNd=function(){return(a._ScatterNd=a.asm.qa).apply(null,arguments)},a._SelectV2=function(){return(a._SelectV2=a.asm.ra).apply(null,arguments)},a._Sigmoid=function(){return(a._Sigmoid=a.asm.sa).apply(null,arguments)},a._Sin=function(){return(a._Sin=a.asm.ta).apply(null,arguments)},a._Softmax=function(){return(a._Softmax=a.asm.ua).apply(null,arguments)},a._Sqrt=function(){return(a._Sqrt=a.asm.va).apply(null,arguments)},a._Square=function(){return(a._Square=a.asm.wa).apply(null,arguments)},a._SquaredDifference=function(){return(a._SquaredDifference=a.asm.xa).apply(null,arguments)},a._Step=function(){return(a._Step=a.asm.ya).apply(null,arguments)},a._StridedSlice=function(){return(a._StridedSlice=a.asm.za).apply(null,arguments)},a._Sub=function(){return(a._Sub=a.asm.Aa).apply(null,arguments)},a._Sum=function(){return(a._Sum=a.asm.Ba).apply(null,arguments)},a._Tanh=function(){return(a._Tanh=a.asm.Ca).apply(null,arguments)},a._Tile=function(){return(a._Tile=a.asm.Da).apply(null,arguments)},a._TopK=function(){return(a._TopK=a.asm.Ea).apply(null,arguments)},a._Transpose=function(){return(a._Transpose=a.asm.Fa).apply(null,arguments)},a.__FusedMatMul=function(){return(a.__FusedMatMul=a.asm.Ga).apply(null,arguments)},a._malloc=function(){return(a._malloc=a.asm.Ha).apply(null,arguments)},a._free=function(){return(a._free=a.asm.Ia).apply(null,arguments)},a.stackSave=function(){return(te=a.stackSave=a.asm.Ja).apply(null,arguments)}),ne=a.stackRestore=function(){return(ne=a.stackRestore=a.asm.Ka).apply(null,arguments)},re=a.stackAlloc=function(){return(re=a.stackAlloc=a.asm.La).apply(null,arguments)};function ae(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function oe(e){function n(){Z||(Z=!0,a.calledRun=!0,k||(Q(B),Q(P),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)V(a.postRun.shift());Q(L)}()))}W>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)U(a.preRun.shift());Q(D)}(),W>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),n()}),1)):n()))}if(a.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?I(e):function(){return C(e,t,n,arguments)}},z=function e(){Z||oe(),Z||(z=e)},a.run=oe,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return oe(),e.ready});e.exports=r})),$8=function(e){Dy(a,e);var t,n,r=Hy(a);function a(e){var t;return _y(this,a),(t=r.call(this)).wasm=e,t.dataIdNextNumber=1,t.wasm.tfjs.init(),t.dataIdMap=new zX(zy(t),W$()),t}return Oy(a,[{key:"write",value:function(e,t,n){var r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}},{key:"numDataIds",value:function(){return this.dataIdMap.numDataIds()}},{key:"time",value:(n=Ny(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=WQ(),t(),e.abrupt("return",{kernelMs:WQ()-n});case 3:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"move",value:function(e,t,n,r,a){var o=this.dataIdNextNumber++;if("string"!==r){var i=$X(n),s=i*lQ(r),u=this.wasm._malloc(s);this.dataIdMap.set(e,{id:o,memoryOffset:u,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(o,i,u),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),u)}else{var c=t;this.dataIdMap.set(e,{id:o,stringBytes:c,shape:n,dtype:r,memoryOffset:null,refCount:a})}}},{key:"read",value:(t=Ny(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"readSync",value:function(e){var t=this.dataIdMap.get(e),n=t.memoryOffset,r=t.dtype,a=t.shape,o=t.stringBytes;return"string"===r?o:function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}(this.wasm.HEAPU8.slice(n,n+$X(a)*lQ(r)).buffer,r)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.dataIdMap.has(e)){var n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}},{key:"refCount",value:function(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}},{key:"incRef",value:function(e){var t=this.dataIdMap.get(e);null!=t&&t.refCount++}},{key:"floatPrecision",value:function(){return 32}},{key:"getMemoryOffset",value:function(e){return this.dataIdMap.get(e).memoryOffset}},{key:"dispose",value:function(){this.wasm.tfjs.dispose(),this.wasm=null}},{key:"memory",value:function(){return{unreliable:!1}}},{key:"makeOutput",value:function(e,t,n){var r;if(null==n)r=this.write(null,e,t);else{var a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});var o=$X(e);this.wasm.tfjs.registerTensor(a,o,n)}return{dataId:r,shape:e,dtype:t}}},{key:"typedArrayFromHeap",value:function(e){var t=e.shape,n=e.dtype,r=e.dataId,a=this.wasm.HEAPU8.buffer,o=this.dataIdMap.get(r).memoryOffset,i=$X(t);switch(n){case"float32":return new Float32Array(a,o,i);case"int32":return new Int32Array(a,o,i);case"bool":return new Uint8Array(a,o,i);default:throw new Error("Unknown dtype ".concat(n))}}}]),a}(jX);function Z8(e){return function(t,n){return function(e,t){return SQ().platform.fetch(e,{credentials:"same-origin"})}(e).then((function(r){r.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),r.arrayBuffer().then((function(e){WebAssembly.instantiate(e,t).then((function(e){n(e.instance)}))}))})),{}}}function J8(e,t,n){var r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=r7&&null!=r7[r]?r7[r]:n+r}var e7=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],t7=null,n7=null,r7={},a7=!1,o7=!1;G$("wasm",Ny(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ny(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([SQ().getAsync("WASM_HAS_SIMD_SUPPORT"),SQ().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);case 2:return t=e.sent,n=qy(t,2),r=n[0],a=n[1],e.abrupt("return",new Promise((function(e,t){var n={locateFile:function(e,t){if(e.endsWith(".worker.js")){var n=new Blob(['var Module={};function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;this.alert=threadAlert;Module["instantiateWasm"]=function(info,receiveInstance){var instance=new WebAssembly.Instance(Module["wasmModule"],info);Module["wasmModule"]=null;receiveInstance(instance);return instance.exports};function moduleLoaded(){}this.onmessage=function(e){try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance;moduleLoaded()})}else if(e.data.cmd==="objectTransfer"){Module["PThread"].receiveObjectTransfer(e.data)}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0);var max=e.data.stackBase;var top=e.data.stackBase+e.data.stackSize;Module["establishStackSpace"](top,max);Module["_emscripten_tls_init"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].setThreadStatus(Module["_pthread_self"](),1);try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(!Module["getNoExitRuntime"]())Module["PThread"].threadExit(result)}catch(ex){if(ex==="Canceled!"){Module["PThread"].threadCancel()}else if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["getNoExitRuntime"]()){}else{Module["PThread"].threadExit(ex.status)}}else{Module["PThread"].threadExit(-2);throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["PThread"].threadCancel()}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);throw ex}};if(typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string"){self={location:{href:__filename}};var onmessage=this.onmessage;var nodeWorkerThreads=require("worker_threads");global.Worker=nodeWorkerThreads.Worker;var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var nodeFS=require("fs");var nodeRead=function(filename){return nodeFS.readFileSync(filename,"utf8")};function globalEval(x){global.require=require;global.Module=Module;eval.call(null,x)}importScripts=function(f){globalEval(nodeRead(f))};postMessage=function(msg){parentPort.postMessage(msg)};if(typeof performance==="undefined"){performance={now:function(){return Date.now()}}}}'],{type:"application/javascript"});return URL.createObjectURL(n)}return e.endsWith(".wasm")?J8(r,a,null!=n7?n7:t):t+e}};o7&&(n.instantiateWasm=Z8(J8(r,a,null!=n7?n7:"")));var o,i=!1;n.onAbort=function(){i||a7||(a7=!0,t({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},a&&r&&null==t7?(n.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+Q8.toString()],{type:"text/javascript"}),o=Q8(n)):o=Y8(n),o.then((function(t){i=!0,a7=!1,t.tfjs={init:t.cwrap("init",null,[]),registerTensor:t.cwrap("register_tensor",null,["number","number","number"]),disposeData:t.cwrap("dispose_data",null,["number"]),dispose:t.cwrap("dispose",null,[])},e({wasm:t})}))})));case 7:case"end":return e.stop()}}),e)})))();case 2:return t=e.sent,n=t.wasm,e.abrupt("return",new $8(n));case 5:case"end":return e.stop()}}),e)}))),2);
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var i7,s7,u7,c7={},l7={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function d7(e){if(!(e in c7)){var t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete c7[e]}),!1),1===e?t.getContext("webgl",l7)||t.getContext("experimental-webgl",l7):t.getContext("webgl2",l7)}
/**
	     * @license
	     * Copyright 2017 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;c7[e]=t}var n=c7[e];return n.isContextLost()?(delete c7[e],d7(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),c7[e])}function f7(e,t){return[t,e]}function p7(e){var t=$X(e);return eQ(Math.ceil(t/4))}function h7(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function m7(e,t){var n,r,a,o,i,s,u,c,l,d=e;return 2===SQ().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,o=d.RGBA32F,i=d.RED,s=4,u=1,c=d.HALF_FLOAT,l=d.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,o=d.RGBA,i=e.RGBA,s=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:l}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function g7(e,t){var n=t();return SQ().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}function v7(e){return!!(SQ().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function y7(e,t){return N7(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function b7(e,t){var n=N7(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(g7(e,(function(){return e.shaderSource(n,t)})),g7(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=w7.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map((function(e,t){return tQ((t+1).toString(),o)+e})),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var c=i.slice(0,r-1),l=i.slice(r-1,r),d=i.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(tQ(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(i7||(i7={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(s7||(s7={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(u7||(u7={}));var x7,k7,w7=/ERROR: [0-9]+:([0-9]+):/g;function I7(e,t){if(g7(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function C7(e,t,n,r,a,o,i){var s=e.getAttribLocation(t,n);return-1!==s&&(g7(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),g7(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,o,i)})),g7(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function E7(e,t,n){!function(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in ".concat("[gl.TEXTURE0, gl.TEXTURE".concat(n,"]"),"."))}(e,n),g7(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),g7(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}function S7(e,t,n){g7(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),g7(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function T7(e,t){g7(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),g7(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function A7(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function N7(e,t,n){var r=g7(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function _7(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return $X(e.slice(0,e.length-t))}function R7(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function O7(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[_7(e)].concat(Xy(R7(e)))),t}function F7(e){return e%2==0}function M7(e,t){if(ZX(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(F7(n)&&F7(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&F7(e[0])&&F7(t[0])}function D7(e,t){return null!=e.getExtension(t)}function B7(e){try{if(null!=d7(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function P7(e){if(0===e)return!1;var t=d7(e);if(1!==e){if(D7(t,"EXT_color_buffer_float"))return L7(t);var n="EXT_color_buffer_half_float";if(D7(t,n)){var r=t.getExtension(n);return function(e,t){var n=m7(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),o}(t,r)}return!1}return!!D7(t,"OES_texture_float")&&(!!D7(t,"WEBGL_color_buffer_float")&&L7(t))}function L7(e){var t=m7(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function U7(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&qX("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the WebGL backend.")}))}))
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var V7=SQ();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function W7(){var e,t,n,r,a,o,i,s,u,c;return 2===SQ().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function z7(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=mQ(t);return r.map((function(t,a){return"".concat("int ".concat(e[a]," = ").concat(n," / ").concat(t),"; ",a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t),";")})).join("")}function j7(e){var t=mQ(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}V7.registerFlag("HAS_WEBGL",(function(){return V7.getNumber("WEBGL_VERSION")>0})),V7.registerFlag("WEBGL_VERSION",(function(){return B7(2)?2:B7(1)?1:0})),V7.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),V7.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===V7.get("WEBGL_VERSION")})),V7.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),V7.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),V7.registerFlag("WEBGL_PACK",(function(){return V7.getBool("HAS_WEBGL")})),V7.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return V7.getBool("WEBGL_PACK")})),V7.registerFlag("WEBGL_PACK_CLIP",(function(){return V7.getBool("WEBGL_PACK")})),V7.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),V7.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return V7.getBool("WEBGL_PACK")})),V7.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return V7.getBool("WEBGL_PACK")})),V7.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return V7.getBool("WEBGL_PACK")})),V7.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return V7.getBool("WEBGL_PACK")})),V7.registerFlag("WEBGL_PACK_REDUCE",(function(){return V7.getBool("WEBGL_PACK")})),V7.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return V7.getBool("WEBGL_PACK")})),V7.registerFlag("WEBGL_CONV_IM2COL",(function(){return V7.getBool("WEBGL_PACK")})),V7.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==x7){var t=d7(e);x7=t.getParameter(t.MAX_TEXTURE_SIZE)}return x7}(V7.getNumber("WEBGL_VERSION"))})),V7.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==k7){var t=d7(e);k7=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,k7)}(V7.getNumber("WEBGL_VERSION"))})),V7.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=V7.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=d7(e);return D7(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:D7(t,"EXT_disjoint_timer_query")?1:0}(e)})),V7.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return V7.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!xY()})),V7.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=d7(e);if(1===e){if(!D7(t,"OES_texture_float"))return!1}else if(!D7(t,"EXT_color_buffer_float"))return!1;return L7(t)}(V7.getNumber("WEBGL_VERSION"))})),V7.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!V7.getBool("WEBGL_FORCE_F16_TEXTURES")&&V7.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),V7.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return P7(V7.getNumber("WEBGL_VERSION"))})),V7.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=V7.getNumber("WEBGL_VERSION"))&&null!=d7(e).fenceSync;var e})),V7.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return V7.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),V7.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ".concat(e,"."))})),V7.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return xY()&&V7.getBool("IS_CHROME")?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ".concat(e,"."))}));var H7="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",G7=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=i7.DENSE;var n=p7(t),r=W7();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(z7(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},K7=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=i7.DENSE;var n=p7(t),r=W7();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(z7(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},q7=function e(t){_y(this,e),this.variableNames=["A"],this.outTexUsage=s7.DOWNLOAD;var n=W7();this.outputShape=t,this.userCode="\n      ".concat(H7,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},X7=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=s7.DOWNLOAD;var n=W7();this.outputShape=t,this.userCode="\n      ".concat(H7,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},Q7=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_y(this,e),this.variableNames=["A"];var a=W7(),o=qy(n,2),i=o[0],s=o[1];this.outputShape=t;var u="result";r&&(u="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(j7(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ").concat(s,";\n        int c = imod(flatIndex, ").concat(s,");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n        vec4 values = ").concat(a.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(a.output," = vec4(").concat(u,", 0., 0., 0.);\n      }\n    ")},Y7=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var a=W7(),o=qy(n,2),i=o[0],s=o[1];this.outputShape=t;var u="",c="result";r&&(c="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var d=0;d<=1;d++){var f=2*l+d;u+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(d," < ").concat(t[2],") {\n            localCoords[2] += ").concat(d,";\n            if(localCoords[1] + ").concat(l," < ").concat(t[1],") {\n              localCoords[1] += ").concat(l,";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ").concat(s,";\n              c = imod(flatIndex, ").concat(s,");\n              uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n              values = ").concat(a.texture2D,"(A, uv);\n\n              if(offset == 0) {\n                result[").concat(f,"] = values[0];\n              } else if(offset == 1) {\n                result[").concat(f,"] = values[1];\n              } else if(offset == 2) {\n                result[").concat(f,"] = values[2];\n              } else {\n                result[").concat(f,"] = values[3];\n              }\n            }\n          }\n        ")}this.userCode="\n      ".concat(j7(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ").concat(u,"\n\n        ").concat(a.output," = ").concat(c,";\n      }\n    ")};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function $7(e){var t=W7();return function(e,t){var n=N7(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(g7(e,(function(){return e.shaderSource(n,t)})),g7(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function Z7(e){return function(e,t){var n=N7(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return g7(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),g7(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function J7(e){return function(e,t){var n=N7(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return g7(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),g7(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function e9(e,t,n,r,a,o){!function(e,t){var n=SQ().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error("Requested texture size [".concat(e,"x").concat(t,"] is invalid."));if(e>n||t>n)throw new Error("Requested texture size [".concat(e,"x").concat(t,"] greater than WebGL maximum on this browser / GPU [").concat(n,"x").concat(n,"]."))}(t,n);var i=function(e){return N7(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return g7(e,(function(){return e.bindTexture(s,i)})),g7(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),g7(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),g7(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),g7(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),g7(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,o,null)})),g7(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),i}function t9(e){return e.internalFormatFloat}function n9(e){return e.internalFormatHalfFloat}function r9(e){return e.downloadTextureFormat}function a9(e){return e.internalFormatPackedFloat}function o9(e){return e.internalFormatPackedHalfFloat}function i9(e,t,n,r,a,o,i,s){var u=e,c=new Float32Array(function(e,t){var n=qy(h7(e,t),2);return n[0]*n[1]*4}(o,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var s9=function(){function e(t){_y(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=SQ().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){c7[e]=t}(n,t)):this.gl=d7(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(1===SQ().getNumber("WEBGL_VERSION")){var o="OES_texture_half_float";if(this.textureFloatExtension=y7(this.gl,"OES_texture_float"),D7(this.gl,o))this.textureHalfFloatExtension=y7(this.gl,o);else if(SQ().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),D7(this.gl,a))this.colorBufferHalfFloatExtension=y7(this.gl,a);else if(SQ().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",D7(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!D7(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=Z7(this.gl),this.indexBuffer=J7(this.gl),this.framebuffer=function(e){return N7(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=m7(this.gl,this.textureHalfFloatExtension)}var t;return Oy(e,[{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;g7(t,(function(){return t.finish()})),g7(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),g7(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),g7(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),g7(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),g7(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=qy(f7(t,n),2);return e9(e,a[0],a[1],t9(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=qy(f7(t,n),2);return e9(e,a[0],a[1],n9(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=qy(f7(t,n),2);return e9(e,a[0],a[1],r9(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){g7(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?g7(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):g7(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),g7(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,o){var i,s,u;g7(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,u=o.internalFormatPackedFloat),i.set(a),g7(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,i)})),g7(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=qy(h7(t,n),2);return e9(e,a[0],a[1],o9(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=qy(h7(t,n),2);return e9(e,a[0],a[1],a9(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(T7(this.gl,this.framebuffer),this.outputTexture=null),g7(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=qy(f7(t,n),2),o=a[0],i=a[1],s=new Uint8Array(t*n*4);return g7(e,(function(){return e.readPixels(0,0,o,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,o){return i9(this.gl,e,0,0,0,a,o,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();g7(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var o=16*t*n;return g7(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),g7(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),g7(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(SQ().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(o,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=o}else SQ().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,SQ().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return g7(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){this.throwIfDisposed();var t=this.gl,n=b7(t,e),r=$7(t),a=function(e){return N7(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(t);return g7(t,(function(){return t.attachShader(a,r)})),g7(t,(function(){return t.attachShader(a,n)})),function(e,t){if(g7(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,a),this.debug&&I7(t,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=function(e,t,n){return g7(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),C7(e,t,"clipSpacePos",n,3,20,0)&&C7(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),a}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&g7(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&I7(this.gl,this.program),g7(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return N7(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),g7(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),function(e,t,n,r){g7(e,(function(){return E7(e,t,r)})),g7(e,(function(){return e.uniform1i(n,r)}))}(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=qy(h7(t,n),2),a=r[0],o=r[1];this.setOutputMatrixTextureDriver(e,a,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&I7(this.gl,this.program),A7(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),g7(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),g7(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=y7(this.gl,2===SQ().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===SQ().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==SQ().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:(t=Ny(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nQ((function(){return n.disposed||n.isQueryAvailable(t,SQ().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,SQ().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}
/**
	       * @license
	       * Copyright 2017 Google LLC. All Rights Reserved.
	       * Licensed under the Apache License, Version 2.0 (the "License");
	       * you may not use this file except in compliance with the License.
	       * You may obtain a copy of the License at
	       *
	       * http://www.apache.org/licenses/LICENSE-2.0
	       *
	       * Unless required by applicable law or agreed to in writing, software
	       * distributed under the License is distributed on an "AS IS" BASIS,
	       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	       * See the License for the specific language governing permissions and
	       * limitations under the License.
	       * =============================================================================
	       */(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||nQ((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),S7(this.gl,e,this.framebuffer),this.debug&&A7(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(S7(this.gl,this.outputTexture,this.framebuffer),this.debug&&A7(this.gl)):T7(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;S7(r,e,this.framebuffer),this.debug&&A7(r),this.outputTexture=e,g7(r,(function(){return r.viewport(0,0,t,n)})),g7(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),g7(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}},{key:"debug",get:function(){return SQ().getBool("DEBUG")}}]),e}(),u9=a2.getBroadcastDims;function c9(e,t,n,r){var a=[];e.forEach((function(e){var t=$X(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?a.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(a.push("uniform sampler2D ".concat(e.name,";")),a.push("uniform int offset".concat(e.name,";")))}));var o,i,s=a.join("\n"),u=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="";r+=n?d9(e):l9(e);var a=e.shapeInfo.logicalShape,o=t.logicalShape;return a.length<=o.length&&(r+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),o="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=u9(e.shapeInfo.logicalShape,t.logicalShape),c=y9(s),l=s-i,d=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(d[e+l]," = 0;")})).join("\n");var f;f=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+l])})).join(", ");var p="return outputValue;",h=1===$X(e.shapeInfo.logicalShape),m=1===$X(t.logicalShape);if(1!==i||h||m){if(h&&!m)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=i-2,v=i-1;u.indexOf(g)>-1&&u.indexOf(v)>-1?p="return vec4(outputValue.x);":u.indexOf(g)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(v)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(f,");\n      ").concat(p,"\n    }\n  ")}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&ZX(i,o))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=y9(u),d=u9(e.shapeInfo.logicalShape,t.logicalShape),f=u-s,p=["x","y","z","w","u","v"];c=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(p[e+f]," = 0;")})).join("\n");var h;return h=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+f])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(h,");\n    }\n  ")}(e,t)),r}(e,t,r)})).join("\n"),c=t.texShape,l=W7(),d=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(l),f=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(f9,"\n    ").concat(p9,"\n    ").concat(h9,"\n  ")}(l);return t.isPacked?(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(n[1],".0);\n      }\n    "):1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(n[0],".0);\n      }\n    "):"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      return 2 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n    }\n  ")}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(ZX(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(n[0],", ").concat(n[1],"));\n      }\n    ");var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),a=r*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t);default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),o=a,i="",s="b, r, c",u=2;u<e.length-1;u++)o*=e[e.length-u-1],i="\n      int b".concat(u," = index / ").concat(o,";\n      index -= b").concat(u," * ").concat(o,";\n    ")+i,s="b".concat(u,", ")+s;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      ").concat(i,"\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec").concat(e.length,"(").concat(s,");\n    }\n  ")}(e,t)}}(t.logicalShape,c),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(l)):(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    "):1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    "):"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t);case 2:return function(e,t){return ZX(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    "):1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    "):1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    "):"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=z7(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t);case 4:return function(e,t){var n=z7(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t);case 5:return function(e,t){var n=z7(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=z7(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,c),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(l)),r&&(f+=m9),[f,d,i,s,o,u,n].join("\n")}function l9(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(n,"() {return ").concat(t,";}");var r=qy(e.shapeInfo.texShape,2),a=r[0],o=r[1];if(1===a&&1===o)return"\n      float ".concat(n,"() {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var i=qy(e.shapeInfo.texShape,2),s=i[0],u=i[1],c=g9(t);return"\n    float ".concat(n,"() {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(u,", ").concat(c,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(n,"(int index) {\n        ").concat(v9(e),"\n      }\n    ");var r=e.shapeInfo.texShape,a=r[0],o=r[1];if(1===o&&1===a)return"\n      float ".concat(n,"(int index) {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var i=g9(t);return 1===o?"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(i,") + 0.5) / ").concat(a,".0);\n        return sampleTexture(").concat(t,", uv);\n      }\n    "):1===a?"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(i,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(t,", uv);\n      }\n    "):"\n    float ".concat(n,"(int index) {\n      vec2 uv = uvFromFlat(").concat(a,", ").concat(o,", index + ").concat(i,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&ZX(t,a)){var o=a[0];return"\n    float ".concat(r,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a[1],".0, ").concat(o,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}var i=oQ(t),s=i.newShape,u=i.keptDims,c=s;if(c.length<t.length){return"\n      ".concat(l9(b9(e,c)),"\n      float ").concat(r,"(int row, int col) {\n        return ").concat(r,"(").concat(x9(["row","col"],u),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(t[1],", 1)));\n        ").concat(v9(e),"\n      }\n    ");var l=a[0],d=a[1],f=g9(n);return 1===d?"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(t[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(l,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):1===l?"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(t[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(d,".0, 0.5);\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n  float ".concat(r,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(t[1]," + col + ").concat(f,";\n    vec2 uv = uvFromFlat(").concat(l,", ").concat(d,", index);\n    return sampleTexture(").concat(n,", uv);\n  }\n")}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],o=t[2],i=oQ(t),s=i.newShape,u=i.keptDims,c=s;if(c.length<t.length){return"\n        ".concat(l9(b9(e,c)),"\n        float ").concat(r,"(int row, int col, int depth) {\n          return ").concat(r,"(").concat(x9(["row","col","depth"],u),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(a,", ").concat(o,", 1)));\n        ").concat(v9(e),"\n      }\n    ");var l=e.shapeInfo.texShape,d=l[0],f=l[1],p=e.shapeInfo.flatOffset;if(f===a&&null==p)return"\n        float ".concat(r,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(f,".0, ").concat(d,".0);\n          return sampleTexture(").concat(n,", uv);\n        }\n      ");if(f===o&&null==p)return"\n    float ".concat(r,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(t[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(f,".0, ").concat(d,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var h=g9(n);return"\n      float ".concat(r,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(a," + col * ").concat(o," + depth + ").concat(h,";\n        vec2 uv = uvFromFlat(").concat(d,", ").concat(f,", index);\n        return sampleTexture(").concat(n,", uv);\n      }\n  ")}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],o=t[2]*a,i=t[1]*o,s=oQ(t),u=s.newShape,c=s.keptDims;if(u.length<t.length){return"\n      ".concat(l9(b9(e,u)),"\n      float ").concat(r,"(int row, int col, int depth, int depth2) {\n        return ").concat(r,"(").concat(x9(["row","col","depth","depth2"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(i,", ").concat(o,", ").concat(a,", 1)));\n        ").concat(v9(e),"\n      }\n    ");var l=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],p=d[1];if(p===i&&null==l)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===a&&null==l)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(t[1]*t[2],", ").concat(t[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var h=g9(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(i," + col * ").concat(o," +\n          depth * ").concat(a," + depth2;\n      vec2 uv = uvFromFlat(").concat(f,", ").concat(p,", index + ").concat(h,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,i=t[2]*o,s=t[1]*i,u=oQ(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){return"\n      ".concat(l9(b9(e,c)),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(x9(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(i,", ").concat(o,", ").concat(a,")) +\n          depth3;\n        ").concat(v9(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,p=f[0],h=f[1];if(h===s&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(o,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(h,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(h===a&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(h,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=g9(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(o," +\n          depth2 * ").concat(a," + depth3 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=oQ(t),o=a.newShape,i=a.keptDims;if(o.length<t.length){return"\n      ".concat(l9(b9(e,o)),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(x9(["row","col","depth","depth2","depth3","depth4"],i),");\n      }\n    ")}var s=t[5],u=t[4]*s,c=t[3]*u,l=t[2]*c,d=t[1]*l;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(d,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(s,", 1)));\n        ").concat(v9(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],m=p[1];if(m===d&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(l,", ").concat(c,", ").concat(u,", ").concat(s,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===s&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=g9(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(d," + col * ").concat(l," + depth * ").concat(c," +\n          depth2 * ").concat(u," + depth3 * ").concat(s," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(t.length,"-D input sampling is not yet supported"))}}function d9(e){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=W7();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=W7();return"\n    vec4 ".concat(n,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(a[0],", ").concat(a[1],", index);\n      return ").concat(o.texture2D,"(").concat(t,", uv);\n    }\n  ")}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=a[0],i=a[1],s=W7();if(null!=a&&ZX(t,a))return"\n      vec4 ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(i,".0, ").concat(o,".0);\n\n        return ").concat(s.texture2D,"(").concat(n,", uv);\n      }\n    ");var u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=Math.ceil(t[1]/2);return"\n    vec4 ".concat(r,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(c,", ").concat(u[0],", ").concat(u[1],", row, col);\n      return ").concat(s.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0]){return"\n        ".concat(d9(b9(e,t.slice(1))),"\n        vec4 ").concat(r,"(int b, int row, int col) {\n          return ").concat(r,"(").concat(x9(["b","row","col"],[1,2]),");\n        }\n      ")}var i=o[0],s=o[1],u=Math.ceil(t[2]/2),c=u*Math.ceil(t[1]/2),l=W7();return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(i,", ").concat(s,", ").concat(c,", ").concat(u,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],s=i[0],u=i[1],c=Math.ceil(t[n-1]/2),l=c*Math.ceil(t[n-2]/2),d="int b, int row, int col",f="b * ".concat(l," + (row / 2) * ").concat(c," + (col / 2)"),p=2;p<n-1;p++)d="int b".concat(p,", ")+d,l*=t[n-p-1],f="b".concat(p," * ").concat(l," + ")+f;var h=W7();return"\n    vec4 ".concat(a,"(").concat(d,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(s,");\n      return ").concat(h.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e)}}var f9="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",p9="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",h9="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",m9="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function g9(e){return"offset".concat(e)}function v9(e){var t=e.name,n=$X(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function y9(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function b9(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function x9(e,t){return t.map((function(t){return e[t]})).join(", ")}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function k9(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but was executed with ").concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],o=a.shape;if(!ZX(r,o))throw Error("Binary was compiled with different shapes than the current args. Shapes ".concat(r," and ").concat(o," must match"));if(!e.isUniform||!a.isUniform){var i=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!ZX(i,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape ".concat(i," and ").concat(s," must match"))}}))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var w9=k6.addImpl,I9=k6.bincountImpl,C9=k6.bincountReduceImpl,E9=k6.ceilImpl,S9=k6.concatImpl,T9=k6.expImpl,A9=k6.expm1Impl,N9=k6.floorImpl,_9=k6.gatherV2Impl,R9=k6.greaterImpl,O9=k6.lessImpl,F9=k6.linSpaceImpl,M9=k6.logImpl,D9=k6.maxImpl,B9=k6.maximumImpl,P9=k6.minimumImpl,L9=k6.multiplyImpl,U9=k6.negImpl,V9=k6.prodImpl,W9=k6.rangeImpl,z9=k6.rsqrtImpl,j9=k6.simpleAbsImpl,H9=k6.sliceImpl,G9=k6.stridedSliceImpl,K9=k6.subImpl,q9=k6.tileImpl,X9=k6.topKImpl,Q9=k6.transposeImpl,Y9=k6.uniqueImpl;
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function $9(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function Z9(e,t){return 1===t?[e]:$9(e,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var J9=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(0===n)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var r=Z9("rc",n),a=y9(n),o=function(e,t,n){if(1===e)return"rc > ".concat(t[0]);for(var r="",a=e-2;a<e;a++)r+="".concat(n[a]," >= ").concat(t[a]),a<e-1&&(r+="||");return r}(n,t,r),i=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = ".concat(a[0],";\n    int c = ").concat(a[1],";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ").concat(t,";\n    bool rEdge = rp1 >= ").concat(n,";\n  ")}(n,t[t.length-1],t[t.length-2],r),s=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var o="".concat(0===r?"r":"rp1",", ").concat(0===a?"c":"cp1"),i=2;i<e;i++)o="".concat(t[t.length-1-i],",")+o;n.push(o)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= ".concat(e[0]," ? 0. : getA(rc + 1),\n            0, 0"):"getA(".concat(r[0],"),\n          cEdge ? 0. : getA(").concat(r[1],"),\n          rEdge ? 0. : getA(").concat(r[2],"),\n          rEdge || cEdge ? 0. : getA(").concat(r[3],")")}
/**
	     * @license
	     * Copyright 2018 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(t,r);this.userCode="\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n\n          if(").concat(o,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(s,"));\n          }\n        }\n      ")}},eee=function e(t,n){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r,a="",o=0;o<4;o++){var i="thisRC = rc;";o%2==1&&(i+="thisRC.z += 1;"),o>1&&(i+="thisRC.y += 1;"),a+="\n        ".concat(i,"\n        ").concat(o>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(o,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(o>0?"}":"","\n      ")}
/**
	   * @license
	   * Copyright 2017 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
this.userCode="\n      ".concat((r=n,"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(z7(["r","c","d"],r),"\n      return ivec3(r, c, d);\n    }\n  ")),"\n      ").concat(j7(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(t[1],";\n        int cols = ").concat(t[2],";\n\n        ").concat(a,"\n\n        setOutput(result);\n      }\n    ")},tee=function(){function e(t){_y(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return Oy(e,[{key:"acquireTexture",value:function(e,t,n){var r=ree(t,n),a=aee(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var o,i=nee(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===u7.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===u7.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===u7.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===u7.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===u7.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=ree(n,r),o=aee(t,a,r);o in this.freeTextures||(this.freeTextures[o]=[]);var i=nee(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=SQ().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=i):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;var u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}}]),e}();function nee(e,t,n,r,a){var o,i=function(e,t){switch(e){case u7.PACKED_2X2_FLOAT32:return a9(t);case u7.PACKED_2X2_FLOAT16:return o9(t);case u7.UNPACKED_FLOAT32:return t9(t);case u7.UNPACKED_FLOAT16:return n9(t);case u7.PACKED_4X1_UNSIGNED_BYTE:return r9(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=qy(h7(e[0],e[1]),2);o=s[0]*s[1]}else{var u=qy(f7(e[0],e[1]),2);o=u[0]*u[1]}return o*function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;throw new Error("Unknown internal format ".concat(t))}(n,i)}function ree(e,t){if(e===s7.UPLOAD)return u7.PACKED_2X2_FLOAT32;if(e===s7.RENDER||null==e)return function(e){return SQ().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?u7.PACKED_2X2_FLOAT32:u7.UNPACKED_FLOAT32:e?u7.PACKED_2X2_FLOAT16:u7.UNPACKED_FLOAT16}(t);if(e===s7.DOWNLOAD||e===s7.PIXELS)return u7.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function aee(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var oee=function e(t,n){_y(this,e),this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},iee="return abs(x);",see="return x;",uee=function e(t,n){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},cee=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,r=Z9("rc",n),a=y9(n),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),i=r.slice(-2),s=n<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(o,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")},lee=Q0,dee={},fee=function(e){Dy(o,e);var t,n,r,a=Hy(o);function o(e){var t,n;if(_y(this,o),(t=a.call(this)).pendingRead=new WeakMap,t.pendingDisposal=new WeakSet,t.dataRefCount=new WeakMap,t.numBytesInGPU=0,t.uploadWaitMs=0,t.downloadWaitMs=0,t.lastGlFlushTime=0,t.warnedAboutMemory=!1,t.warnedAboutCPUBackend=!1,t.pendingDeletes=0,t.disposed=!1,!SQ().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var r=d7(SQ().getNumber("WEBGL_VERSION"));t.binaryCache=((n=SQ().getNumber("WEBGL_VERSION"))in dee||(dee[n]={}),dee[n]),t.gpgpu=new s9(r),t.canvas=r.canvas,t.gpgpuCreatedLocally=!0}else t.gpgpu=e,t.binaryCache={},t.gpgpuCreatedLocally=!1,t.canvas=e.gl.canvas;return t.textureManager=new tee(t.gpgpu),t.numMBBeforeWarning=null==SQ().global.screen?1024:SQ().global.screen.height*SQ().global.screen.width*window.devicePixelRatio*600/1024/1024,t.texData=new zX(zy(t),W$()),jy(t)}return Oy(o,[{key:"nextDataId",value:function(){return o.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((SQ().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||SQ().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:s7.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(SQ().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:s7.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,o=t.slice,i=t.shape,s=t.isPacked;if(null!=o){var u;u=s?new uee(i,see):new oee(i,see);var c=this.runWebGLProgram(u,[{dataId:e,shape:i,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,f,p=null!=this.activeTimers;return p&&(d=WQ()),f="complex64"===r?W1(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.getValuesFromTexture(e),p&&(this.downloadWaitMs+=WQ()-d),this.convertAndCacheOnCPU(e,f)}},{key:"read",value:(r=Ny(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,f,p,h,m,g,v,y,b,x,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,o=r.shape,i=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==i){e.next=8;break}return l=c?new uee(o,see):new oee(o,see),d=this.runWebGLProgram(l,[{dataId:t,shape:o,dtype:s}],s),f=this.read(d.dataId),e.abrupt("return",(this.disposeIntermediateTensorInfo(d),f));case 8:if(null==a){e.next=10;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 10:if(SQ().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==SQ().getNumber("WEBGL_VERSION")){e.next=12;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 12:if(m=null,"complex64"!==s&&SQ().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),v=this.texData.get(p.dataId),m=(g=this.gpgpu).createBufferFromTexture.apply(g,[v.texture].concat(Xy(p7(o))))),this.pendingRead.set(t,[]),e.t0="complex64"!==s,!e.t0){e.next=19;break}return e.next=19,this.gpgpu.createAndWaitForFence();case 19:if("complex64"!==s){e.next=26;break}return e.next=22,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 22:y=e.sent,h=W1(y[0],y[1]),e.next=27;break;case 26:null==m?h=this.getValuesFromTexture(t):(b=$X(o),h=this.gpgpu.downloadFloat32MatrixFromBuffer(m,b));case 27:return null!=p&&this.disposeIntermediateTensorInfo(p),x=this.convertAndCacheOnCPU(t,h),k=this.pendingRead.get(t),e.abrupt("return",(this.pendingRead.delete(t),k.forEach((function(e){return e(x)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&W$().removeDataId(t,this),this.pendingDeletes--),x));case 30:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return jQ(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return i$(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!v7(n)){if(SQ().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"));throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,o=$X(n);if(SQ().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var i,s=this.decode(e),u=this.texData.get(s.dataId),c=(i=this.gpgpu).downloadMatrixFromPackedTexture.apply(i,[u.texture].concat(Xy(p7(n)))).subarray(0,o);return this.disposeIntermediateTensorInfo(s),c}var l=SQ().getBool("WEBGL_PACK")&&!0===a,d=l?O7(n):n,f=l?new X7(d):new q7(d),p=this.runWebGLProgram(f,[{shape:d,dtype:r,dataId:e}],"float32"),h=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture,h.texShape[0],h.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(p),m}},{key:"timerAvailable",value:function(){return SQ().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:(n=Ny(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.activeTimers,r=[],a=!1,null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,t(),o=YX(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=YX(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=n,a&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},!(SQ().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=13;break}return e.next=9,Promise.all(o);case 9:u=e.sent,s.kernelMs=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}(u),s.getExtraProfileInfo=function(){return u.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=14;break;case 13:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 14:return e.abrupt("return",(this.uploadWaitMs=0,this.downloadWaitMs=0,s));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return SQ().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:WQ(),endMs:null}}},{key:"endTimer",value:function(e){return SQ().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=WQ(),e)}},{key:"getQueryTime",value:(t=Ny(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(SQ().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,o=t.usage,i=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,o,i)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"getCPUBackend",value:function(){return SQ().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=W$().findBackend("cpu")),this.cpuBackend):null}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,r=this.getCPUBackend();return SQ().getBool("IS_TEST")||this.warnedAboutCPUBackend||null!=r||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=r&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&$X(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){V1("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return lee(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new uee(e.shape,t),a=this.compileAndRun(r,[e],n);return W$().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=j9(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(SQ().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,iee,e.dtype);var n=new oee(e.shape,iee),r=this.compileAndRun(n,[e]);return W$().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&dQ(n[0])){var a=n.map((function(e){return zQ(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return W$().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new cee(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new J9(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[_7(e.shape)].concat(Xy(R7(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[_7(t)].concat(Xy(R7(t))),o=new eee(a,n),i=this.runWebGLProgram(o,[r],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}},{key:"decode",value:function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,o=n.dtype,i=O7(a);return t=r?new K7(i):new G7(i),{dtype:o,shape:a,dataId:this.runWebGLProgram(t,[{shape:i,dtype:o,dataId:e}],o,null,!0).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(i.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===i7.DENSE){var u=p7(e.outputShape);s.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===$X(i.shape))return s.values=iQ(i.dtype,0),i;var c=[],l=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&$X(t.shape)<=SQ().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!M7(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=a.packedReshape(t,o),c.push(t),n=a.texData.get(t.dataId),r.shape=o}return a.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);var d,f={shape:i.shape,texData:s,isUniform:!1},p=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+="".concat(e.shape,"_").concat(n,"_").concat(t)}));var a=e.userCode,o=e.constructor.name;return o+="_"+r+"_"+a}(e,l,f),h=this.getAndSaveBinary(p,(function(){return function(e,t,n,r){var a=t.userCode,o=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=o.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=c9(o,s,a,t.packedInputs),c=e.createProgram(u),l=null,d=e.getUniformLocation(c,"NAN",!1);1===SQ().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1));for(var f={},p=0;p<t.variableNames.length;p++){var h=t.variableNames[p];f[h]=e.getUniformLocation(c,h,false),f["offset".concat(h)]=e.getUniformLocation(c,"offset".concat(h),false)}return{program:t,source:u,webGLProgram:c,uniformLocations:f,inShapeInfos:i,outShapeInfo:s,infLoc:l,nanLoc:d}}(a.gpgpu,e,l,f)})),m=null!=this.activeTimers;m&&(d=this.startTimer()),function(e,t,n,r,a){k9(t.inShapeInfos,n),k9([t.outShapeInfo],[r]);var o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o,i[0],i[1]):e.setOutputMatrixTexture(o,i[0],i[1]),e.setProgram(t.webGLProgram),1===SQ().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],o=t.uniformLocations[a],i=t.uniformLocations["offset".concat(a)];if(null!=o)if(n.isUniform)if($X(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(o,s)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,r)})),null!=a&&a(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,h,l,f,r),c.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),m&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)}));var g=SQ().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var v=WQ();v-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!SQ().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){var y=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),y}return i}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;this.disposed||(SQ().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=z$((function(){if(!SQ().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=SQ().getBool("DEBUG");SQ().set("DEBUG",!1);var n=e.abs(C0(1e-8)).dataSync()[0];if(SQ().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,o=t.texture,i=t.usage,s=t.isPacked;if(null==o){var u,c=null!=this.activeTimers;c&&(u=WQ());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=SQ().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?KX(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=oQ(e);e=r.newShape}var a=$X(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var o,i=_7(e),s=2,u=2;return e.length&&(s=(o=qy(R7(e),2))[0],u=o[1]),eQ(a=i*(s/2)*(u/2)).map((function(e){return 2*e}))}return eQ(a)}(n,s),t.texShape=l),null!=a){var d,f,p=O7(n),h=l[1],m=l[0],g=a instanceof Uint8Array;s?(h=(d=qy(h7(l[0],l[1]),2))[0],m=d[1],f=new Y7(p,[m,h],g)):f=new Q7(p,[m,h],g);var v=this.makeTensorInfo([m,h],r);this.texData.get(v.dataId).usage=g?s7.PIXELS:s7.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),h,m,a);var y=this.runWebGLProgram(f,[v],r,null,!0),b=this.texData.get(y.dataId);t.texture=b.texture,t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,this.disposeIntermediateTensorInfo(v),this.texData.delete(y.dataId),t.values=null,c&&(this.uploadWaitMs+=WQ()-u)}else{var x=this.acquireTexture(l,i,r,s);t.texture=x}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}
/**
	       * @license
	       * Copyright 2020 Google Inc. All Rights Reserved.
	       * Licensed under the Apache License, Version 2.0 (the "License");
	       * you may not use this file except in compliance with the License.
	       * You may obtain a copy of the License at
	       *
	       * http://www.apache.org/licenses/LICENSE-2.0
	       *
	       * Unless required by applicable law or agreed to in writing, software
	       * distributed under the License is distributed on an "AS IS" BASIS,
	       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	       * See the License for the specific language governing permissions and
	       * limitations under the License.
	       * =============================================================================
	       */(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, most likely due to a memory leak"))}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*lQ(t)}}]),o}(jX);fee.nextDataId=0,kY()&&G$("webgl",(function(){return new fee}),2)
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */;var pee=function e(t,n,r){_y(this,e),this.variableNames=["A","B"],this.outputShape=YZ(n,r),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")},hee=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_y(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=YZ(n,r);var o=this.outputShape.length,i="";if(a)if(0===o||1===$X(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          ".concat(y9(o)," coords = getOutputCoords();\n        "),1===o)i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var s=Z9("coords",o);i+="\n            bool nextRowOutOfBounds =\n              (".concat(s[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(s[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function mee(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var gee={kernelName:"Identity",backendName:"webgl",kernelFunc:mee};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function vee(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),s=mee({inputs:{x:r},backend:n}),u=mee({inputs:{x:a},backend:n});return i.complexTensorInfos={real:s,imag:u},o}var yee={kernelName:"Complex",backendName:"webgl",kernelFunc:vee},bee="return (a < 0.) ? b * a : a;",xee="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",kee={kernelName:"LeakyRelu",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha,i=n.makeTensorInfo([],"float32",UQ(o,"float32")),s=SQ().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hee(xee,a.shape,i.shape):new pee(bee,a.shape,i.shape),u=n.runWebGLProgram(s,[a,i],a.dtype);return n.disposeIntermediateTensorInfo(i),u}},wee="return (a < 0.) ? b * a : a;",Iee="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",Cee={kernelName:"Prelu",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=SQ().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hee(Iee,r.shape,a.shape):new pee(wee,r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Eee(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var o,i=e.inputs,s=e.backend,u=i.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var d=c.texData.get(u.dataId),f=r(d.values,l);return c.makeTensorInfo(u.shape,l,f)}return o=SQ().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new uee(u.shape,n):new oee(u.shape,t),c.runWebGLProgram(o,[u],l)}}function See(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,o=e.supportsComplex,i=void 0!==o&&o,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,o=e.backend,c=r.a,l=r.b,d=o;if(i&&"complex64"===c.dtype){var f=d.texData.get(c.dataId),p=d.texData.get(l.dataId),h=[[f.complexTensorInfos.real,p.complexTensorInfos.real],[f.complexTensorInfos.imag,p.complexTensorInfos.imag]].map((function(e){var n=qy(e,2),r=n[0],a=n[1],o={dataId:r.dataId,dtype:r.dtype,shape:c.shape},i={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new pee(t,c.shape,l.shape);return d.runWebGLProgram(s,[o,i],cY(r.dtype,a.dtype))})),m=qy(h,2),g=m[0],v=m[1],y=vee({inputs:{real:g,imag:v},backend:d});return d.disposeIntermediateTensorInfo(g),d.disposeIntermediateTensorInfo(v),y}var b,x=u||cY(c.dtype,l.dtype);if(d.shouldExecuteOnCPU([c,l])&&null!=s){var k=d.texData.get(c.dataId),w=d.texData.get(l.dataId),I=qy(s(c.shape,l.shape,k.values,w.values,x),2),C=I[0],E=I[1],S=d.makeTensorInfo(E,x);return d.texData.get(S.dataId).values=C,S}return b=SQ().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new hee(n,c.shape,l.shape,a):new pee(t,c.shape,l.shape),d.runWebGLProgram(b,[c,l],x)}}function Tee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return t?Iee:wee;if("leakyrelu"===e)return t?xee:bee;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Aee=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];_y(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;var l=a?t[1]:t[2],d=Math.ceil(l/2),f=a?"i * 2, rc.y":"rc.y, i * 2",p=o?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",v="";s&&(g=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),v="result = activation(result);");var y=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(g,"\n\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(d,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(f,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(m[0],");\n          result += (").concat(h[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(v,"\n\n        setOutput(result);\n      }\n    ")},Nee="return areal * breal - aimag * bimag;",_ee="return areal * bimag + aimag * breal;",Ree=function e(t,n,r){_y(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=YZ(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")},Oee="return a * b;";
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Fee(e){var t,n=e.inputs,r=e.backend,a=n.a,o=n.b,i=cY(a.dtype,o.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(o.dataId),c=new Ree(Nee,a.shape,o.shape),l=new Ree(_ee,a.shape,o.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:o.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:o.shape}],f=r.runWebGLProgram(c,d,"float32"),p=r.runWebGLProgram(l,d,"float32"),h=vee({inputs:{real:f,imag:p},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(p),h}if(r.shouldExecuteOnCPU([a,o])){var m=r.texData.get(a.dataId),g=r.texData.get(o.dataId),v=qy(L9(a.shape,o.shape,m.values,g.values,i),2),y=v[0],b=v[1],x=r.makeTensorInfo(b,i);return r.texData.get(x.dataId).values=y,x}return t=SQ().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hee(Oee,a.shape,o.shape):new pee(Oee,a.shape,o.shape),r.runWebGLProgram(t,[a,o],i)}var Mee={kernelName:"Multiply",backendName:"webgl",kernelFunc:Fee};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Dee(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=n,s=$X(a.shape),u=rQ(o,s),c=$X(u);qX(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old shape (").concat(a.shape,") has ").concat(s," elements. The new shape and old shape must have the same number of elements.")}));var l=i.texData.get(a.dataId);return!l.isPacked||M7(a.shape,u)||null!==l.texture&&M7(l.shape,u)?(i.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[_7(e.shape)].concat(Xy(R7(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},o=[_7(t)].concat(Xy(R7(t))),i=new eee(o,r),s=n.runWebGLProgram(i,[a],e.dtype,null,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}(a,u,i)}var Bee={kernelName:"Reshape",backendName:"webgl",kernelFunc:Dee},Pee=function e(t,n){_y(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(JX(l)?l.toPrecision(2):l,", ones);")}var d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")},Lee=function e(t,n){_y(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),d=r%4,f="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n      }\n    "),p="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var h="";o%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(f,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(2===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(3===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(f,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Uee(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=F1(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),o=e,i=0;i<a.length;i++){var s,u,c=a[i],l=c.inSize,d=c.windowSize,f=c.outSize;s="mean"===n?0===i?new Pee({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:f},l):new Pee({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:f}):new Lee({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:f},n),u=o,o=r.runWebGLProgram(s,[o],t),u.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(u)}return o}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Vee=function e(t,n){_y(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var o=y9(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}
/**
	   * @license
	   * Copyright 2019 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(n);this.userCode="\n    void main() {\n      ".concat(o," resRC = getOutputCoords();\n      setOutput(getA(").concat(i,"));\n    }\n    ")},Wee=function e(t,n){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var o=y9(this.rank),i=$9("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=i[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(i[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(o," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(l,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(i[this.rank-1],";\n      if(++").concat(i[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(l,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function zee(e,t,n){var r=SQ().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wee(e.shape,t):new Vee(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function jee(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,o=e.shape.length,i=aQ(a,e.shape),s=i,u=OJ(s,o),c=null!=u,l=e;c&&(l=zee(e,u,r),s=MJ(s.length,o)),RJ("sum",s,o);var d=qy(NJ(l.shape,s),2),f=d[0],p=d[1],h=f;n&&(h=_J(f,i));var m=$X(p),g=Dee({inputs:{x:l},attrs:{shape:[$X(e.shape)/m,m]},backend:r}),v=Uee(g,lY(e.dtype),"sum",r),y=Dee({inputs:{x:v},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(v),c&&r.disposeIntermediateTensorInfo(l),y}(t.x,r.axis,r.keepDims,n)}var Hee={kernelName:"Sum",backendName:"webgl",kernelFunc:jee};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Gee(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.perm,s=r,u=o.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=o.shape[i[l]];if(s.shouldExecuteOnCPU([o])){var d=s.texData.get(o.dataId).values,f=Q9(d,o.shape,o.dtype,i,c);t=s.makeTensorInfo(c,o.dtype),s.texData.get(t.dataId).values=f}else t=zee(o,i,s);return t}var Kee={kernelName:"Transpose",backendName:"webgl",kernelFunc:Gee};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function qee(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,p=void 0===f?null:f,h=t.shape.length,m=n.shape.length,g=r?t.shape[h-2]:t.shape[h-1],v=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[h-1]:t.shape[h-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),k=n.shape.slice(0,-2),w=$X(x),I=$X(k);qX(h>=2&&m>=2&&(w===I||1===w||1===I),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (".concat(x,") and (").concat(k,").")}));var C=(w>I?t.shape.slice(0,-2):n.shape.slice(0,-2)).concat([y,b]);qX(g===v,(function(){return"Error in matMul: inner shapes (".concat(g,") and (").concat(v,") of Tensors with shapes ").concat(t.shape," and ").concat(n.shape," and transposeA=").concat(r," and transposeB=").concat(a," must match.")}));var E,S=r?[w,g,y]:[w,y,g],T=a?[I,b,v]:[I,v,b],A=Dee({inputs:{x:t},backend:o,attrs:{shape:S}}),N=Dee({inputs:{x:n},backend:o,attrs:{shape:T}}),_=[A,N],R=Math.max(w,I),O=r?A.shape[1]:A.shape[2],F=null!=s,M=null!=c,D="leakyrelu"===p,B=null!=p?Tee(p,!0):null;if((1===y||1===b)&&O>1e3&&!1===(F||M||D||null!=B)){var P=A,L=N;r&&(P=Gee({inputs:{x:A},backend:o,attrs:{perm:[0,2,1]}}),_.push(P)),a&&(L=Gee({inputs:{x:N},backend:o,attrs:{perm:[0,2,1]}}),_.push(L));var U=1===b,V=P;1!==b&&(V=Dee({inputs:{x:P},backend:o,attrs:{shape:[R,O,1]}}),_.push(V));var W=1===b?2:1,z=L;U&&(z=Dee({inputs:{x:L},backend:o,attrs:{shape:[R,1,O]}}),_.push(z));var j=Fee({inputs:{a:V,b:z},backend:o});E=jee({inputs:{x:j},backend:o,attrs:{axis:W,keepDims:!0}}),_.push(j)}else{var H=cY(t.dtype,n.dtype),G=new Aee(S,T,[R,y,b],r,a,F,B,M,D),K=[A,N];if(null!=s&&K.push(s),M&&K.push(c),D){var q=o.makeTensorInfo([],"float32",UQ(d,"float32"));K.push(q),_.push(q)}E=o.runWebGLProgram(G,K,H)}var X=Dee({inputs:{x:E},backend:o,attrs:{shape:C}});_.push(E);for(var Q=0,Y=_;Q<Y.length;Q++){var $=Y[Q];o.disposeIntermediateTensorInfo($)}return X}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Xee={kernelName:"_FusedMatMul",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return qee({a:a,b:o,transposeA:u,transposeB:c,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},Qee={kernelName:"Abs",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var o=r.texData.get(a.dataId),i=j9(o.values);return r.makeTensorInfo(a.shape,a.dtype,i)}return t=SQ().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new uee(a.shape,"return abs(x);"):new oee(a.shape,"return abs(x);"),r.runWebGLProgram(t,[a],a.dtype)}},Yee={kernelName:"Acos",backendName:"webgl",kernelFunc:Eee({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"})},$ee={kernelName:"Acosh",backendName:"webgl",kernelFunc:Eee({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"})},Zee="return a + b;",Jee=See({opSnippet:Zee,packedOpSnippet:Zee,supportsComplex:!0,cpuKernelImpl:w9}),ete={kernelName:RQ,backendName:"webgl",kernelFunc:Jee},tte=function e(t,n){_y(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},nte=function e(t,n){_y(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},rte={kernelName:"AddN",backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return mee({inputs:{x:a[0]},backend:r});if(a.length>SQ().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(a.length/2),i=e({inputs:a.slice(0,o),backend:r}),s=e({inputs:a.slice(o),backend:r});return e({inputs:[i,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return cY(e,t)})),c=a.map((function(e){return e.shape})),l=SQ().getBool("WEBGL_PACK")?new nte(a[0].shape,c):new tte(a[0].shape,c);return r.runWebGLProgram(l,a,u)}},ate={kernelName:"All",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=aQ(o,a.shape),c=u,l=OJ(c,s),d=a;null!=l&&(d=Gee({inputs:{x:a},backend:n,attrs:{perm:l}}),c=MJ(c.length,s)),RJ("all",c,s);var f,p=qy(NJ(d.shape,c),2),h=p[0],m=Dee({inputs:{x:d},backend:n,attrs:{shape:[-1,$X(p[1])]}}),g=Uee(m,m.dtype,"all",n);return f=Dee(i?{inputs:{x:g},backend:n,attrs:{shape:_J(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),f}},ote={kernelName:"Any",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=aQ(o,a.shape),c=u,l=OJ(c,s),d=a;null!=l&&(d=Gee({inputs:{x:a},backend:n,attrs:{perm:l}}),c=MJ(c.length,s)),RJ("any",c,s);var f,p=qy(NJ(d.shape,c),2),h=p[0],m=Dee({inputs:{x:d},backend:n,attrs:{shape:[-1,$X(p[1])]}}),g=Uee(m,m.dtype,"any",n);return f=Dee(i?{inputs:{x:g},backend:n,attrs:{shape:_J(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),f}},ite=function e(t,n,r){_y(this,e),this.variableNames=["A"];var a=t.windowSize,o=t.batchSize,i=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")},ste=function e(t,n,r,a){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,qX(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var o=t[t.length-1],i=Math.ceil(o/n);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,d=y9(l),f=Z9("coords",l);if(1===i){var p=y9(u=l+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(f.join(),", 0);\n        ++").concat(f[l-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(f.join(),", 0);\n        ++").concat(f[l-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(f.join(),", 0);\n        --").concat(f[l-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(f.join(),", 0);\n        --").concat(f[l-2],";")}else u=l,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(f[l-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(f[l-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(f[l-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(f[l-2],";");var h=["x","y","z","w","u","v"].slice(0,u),m="."+h[u-1],g=h.map((function(e){return"int "+e})),v=Z9("sourceLocR",u-1).concat("inIdx.r"),y=Z9("sourceLocG",u-1).concat("inIdx.g"),b=Z9("sourceLocB",u-1).concat("inIdx.b"),x=Z9("sourceLocA",u-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(v.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),I="vec4(\n            getAChannel(".concat(v.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),C=a?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(C,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(f[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(f[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(I,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(I,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function ute(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],o=t.shape[1];null!=r&&(a=r.shape[0],o=r.shape[1]);var i=F1(o),s={windowSize:i,inSize:o,batchSize:a,outSize:Math.ceil(o/i)},u=new ite(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var d=ute(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}function cte(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,o=F1(a[a.length-1]),i=new ste(a,o,n,null==r),s=null==r?[t]:[t,r],u=e.runWebGLProgram(i,s,"int32");if(u.shape.length===t.shape.length){var c=cte(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}return u}function lte(e,t,n,r){var a=[n];if(RJ("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!SQ().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var o=[],i=qy(NJ(t.shape,a),2),s=i[0],u=$X(i[1]),c=Dee({inputs:{x:t},backend:e,attrs:{shape:[-1,u]}});o.push(c);var l=ute(e,c,r);o.push(l);var d=Dee({inputs:{x:l},backend:e,attrs:{shape:s}});return o.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),d}return cte(e,t,r)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var dte={kernelName:"ArgMax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=aQ(r.axis,a.shape),i=OJ(o,a.shape.length),s=a,u=[];null!=i&&(s=Gee({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(s),o=MJ(o.length,s.shape.length)),RJ("argMax",[o[0]],s.shape.length);var c=lte(n,s,o[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},fte={kernelName:"ArgMin",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=aQ(r.axis,a.shape),i=OJ(o,a.shape.length),s=a,u=[];null!=i&&(s=Gee({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(s),o=MJ(o.length,s.shape.length)),RJ("argMin",[o[0]],s.shape.length);var c=lte(n,s,o[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},pte={kernelName:"Asin",backendName:"webgl",kernelFunc:Eee({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"})},hte={kernelName:"Asinh",backendName:"webgl",kernelFunc:Eee({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"})},mte={kernelName:"Atan",backendName:"webgl",kernelFunc:Eee({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"})},gte={kernelName:"Atan2",backendName:"webgl",kernelFunc:See({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},vte={kernelName:"Atanh",backendName:"webgl",kernelFunc:Eee({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"})},yte=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_y(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,g="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),v="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(m||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?o?g:v:"wR * ".concat(f," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(x="avgValue / count");var k=4*Math.floor(i/4),w=i%4,I="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(I,"\n          }\n\n          int xC = xCCorner + ").concat(k,";\n          if (").concat(1===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(2===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(3===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(I,"\n          }\n        }\n        setOutput(").concat(x,");\n      }\n    ")}},bte=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_y(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,p=t.effectiveFilterDepth,h=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,v=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(v,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(f,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?o?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(h," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(w="avgValue / count");var I=4*Math.floor(i/4),C=i%4,E="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(v,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(I,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(f,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(f,", ch)\n              );\n\n              ").concat(E,"\n            }\n\n            int xC = xCCorner + ").concat(I,";\n            if (").concat(1===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(2===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(3===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                initializationValue\n              );\n\n              ").concat(E,"\n            }\n          }\n          setOutput(").concat(w,");\n        }\n      }\n    ")}},xte={kernelName:"AvgPool",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;U7(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;qX(xZ(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c=lZ(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&ZX(c.inShape,c.outShape))return mee({inputs:{x:a},backend:n});var l=new yte(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}},kte={kernelName:"AvgPool3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=dZ(a.shape,o,i,[1,1,1],s,u,c),d=new bte(l,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}},wte=function e(t){_y(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,d=c-1-t.padInfo.left,f=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(d,");\n      const float avgMultiplier = float(").concat(f,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Ite=function e(t){_y(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,p=t.effectiveFilterWidth,h=d-1-t.padInfo.front,m=f-1-t.padInfo.top,g=p-1-t.padInfo.left,v=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(m,", ").concat(g,");\n      const float avgMultiplier = float(").concat(v,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Cte={kernelName:"AvgPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=dZ(o.shape,i,s,[1,1,1],u,c),d=new Ite(l);return n.runWebGLProgram(d,[a],o.dtype)}},Ete={kernelName:"AvgPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;U7([a,o],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=lZ(i.shape,s,u,1,c),d=new wte(l);return n.runWebGLProgram(d,[a],i.dtype)}},Ste={kernelName:"BatchMatMul",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return qee({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},Tte=function e(t,n,r,a,o,i){_y(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],YZ(t,n),YZ(t,r);var s="0.0";null!=a&&(YZ(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=o&&(YZ(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")},Ate=function e(t,n,r,a,o,i){_y(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],YZ(t,n),YZ(t,r);var s="vec4(0.0)";null!=a&&(YZ(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=o&&(YZ(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")},Nte={kernelName:"FusedBatchNorm",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.mean,i=t.variance,s=t.offset,u=t.scale;qX(o.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),qX(null==s||o.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),qX(null==u||o.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,o,i],d=null;null!=s&&(d=s.shape,l.push(s));var f=null;null!=u&&(f=u.shape,l.push(u));var p=SQ().getBool("WEBGL_PACK_NORMALIZATION")?new Ate(a.shape,o.shape,i.shape,d,f,c):new Tte(a.shape,o.shape,i.shape,d,f,c);return n.runWebGLProgram(p,l,l[0].dtype)}},_te=function(){function e(t){_y(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=y9(this.rank),a="uniform int start[".concat(this.rank,"];"),o=function(e){if(1===e)return"sourceLoc";if(e<=6)return Rte.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}
/**
	     * @license
	     * Copyright 2019 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(this.rank);n="\n        ".concat(r," sourceLoc;\n        ").concat(r," coords = getOutputCoords();\n        ").concat(t.map((function(e,t){return"sourceLoc.".concat(Rte[t]," = start[").concat(t,"] + coords.").concat(Rte[t],";")})).join("\n"),"\n      "),this.userCode="\n      ".concat(a,"\n      void main() {\n        ").concat(n,"\n        setOutput(getSource(").concat(o,"));\n      }\n    ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;if(e.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the length of start (").concat(e.length,")"));return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}}}]),e}(),Rte=["x","y","z","w","u","v"],Ote=function(){function e(t){_y(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=y9(this.rank),r=Z9("coords",this.rank),a=Z9("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),i="getChannel(getSource(".concat(a.join(),"), ").concat(o,")"),s="\n      result.x = ".concat(i,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      uniform int start[".concat(this.rank,"];\n      void main() {\n        ").concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;if(e.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the length of start (").concat(e.length,")"));return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}}}]),e}();
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Fte(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=qy(L$(a,r.begin,r.size),2),i=o[0],s=o[1];if(C$(a,i,s),0===$X(s))return n.makeTensorInfo(s,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var u=n.texData.get(a.dataId),c=H9(u.values,i,s,a.shape,a.dtype);return n.makeTensorInfo(s,a.dtype,c)}var l=n.texData.get(a.dataId).isPacked,d=B$(a.shape,i,s);if(l||!d){var f=SQ().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ote(s):new _te(s),p=f.getCustomSetupFunc(i);return n.runWebGLProgram(f,[a],a.dtype,p)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),i=r.texData.get(o.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;var s=P$(t,mQ(e.shape));a.slice&&(s+=a.slice.flatOffset),i.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),o}(a,i,s,n)}var Mte={kernelName:"Slice",backendName:"webgl",kernelFunc:Fte},Dte={kernelName:"BatchToSpaceND",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;qX(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=D1(a.shape,o,s),c=B1(u.length,o.length),l=P1(a.shape,o,s),d=L1(i,o.length),f=U1(l,i,o.length),p=[],h=Dee({inputs:{x:a},backend:n,attrs:{shape:u}}),m=Gee({inputs:{x:h},backend:n,attrs:{perm:c}}),g=Dee({inputs:{x:m},backend:n,attrs:{shape:l}}),v=Fte({inputs:{x:g},backend:n,attrs:{begin:d,size:f}});return p.push(h),p.push(m),p.push(g),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},Bte={kernelName:"Bincount",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=I9(s,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}},Pte=See({opSnippet:"return float(a != b);",dtype:"bool"}),Lte={kernelName:"NotEqual",backendName:"webgl",kernelFunc:Pte};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Ute(e){var t=e.inputs,n=e.backend,r=t.input;return mee({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var Vte={kernelName:"Real",backendName:"webgl",kernelFunc:Ute},Wte={kernelName:"Cast",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function e(t){var n=t.inputs,r=t.backend,a=t.attrs,o=n.x,i=a.dtype;if("complex64"===i){if("complex64"===o.dtype)return mee({inputs:{x:o},backend:r});var s=YJ(o.shape),u=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),c=vee({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===o.dtype){var l=Ute({inputs:{input:o},backend:r}),d=e({inputs:{x:l},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(l),d}if(!uQ(o.dtype,i)){var f=mee({inputs:{x:o},backend:r});return{dataId:f.dataId,shape:f.shape,dtype:i}}if("int32"===i)return function(e,t){var n=new oee(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===i){var p=r.makeTensorInfo([],"bool",iQ("bool",1)),h=Pte({inputs:{a:o,b:p},backend:r});return r.disposeIntermediateTensorInfo(p),h}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(i))}},zte="return ceil(x);",jte={kernelName:"Ceil",backendName:"webgl",kernelFunc:Eee({opSnippet:zte,packedOpSnippet:zte,cpuKernelImpl:E9})},Hte=function(){function e(t){_y(this,e),this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return Oy(e,[{key:"getCustomSetupFunc",value:function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}}}]),e}(),Gte=function(){function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return Oy(e,[{key:"getCustomSetupFunc",value:function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}}}]),e}(),Kte={kernelName:"ClipByValue",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.clipValueMin,s=a.clipValueMax,u=(t=SQ().getBool("WEBGL_PACK_CLIP")?new Gte(o.shape):new Hte(o.shape)).getCustomSetupFunc(i,s);return r.runWebGLProgram(t,[o],o.dtype,u)}},qte=function e(t){_y(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Xte(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var Qte={kernelName:"ComplexAbs",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),o=new qte(r.shape),i=[Xte(r,a.complexTensorInfos.real),Xte(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}},Yte=function e(t){_y(this,e),this.outputShape=[],this.outputShape=O1(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],o=1;o<n.length;o++){var i=n[o-1];a.push("else if (yC < ".concat(n[o],") setOutput(getT").concat(o,"(yR, yC-").concat(i,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")},$te=function e(t,n){_y(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=O1(t,n);var r=this.outputShape,a=r.length,o=y9(a),i=Z9("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],d=s.slice(-2),f=s.join(),p="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(f,"), vec2(").concat(d.join(),"));\n        }"),h=1;h<u.length;h++){var m=u[h-1];p+="\n        if (".concat(l," < ").concat(u[h],"  && ").concat(l," >= ").concat(u[h-1],") {\n          return getChannel(\n            getT").concat(h,"(").concat(Zte(s,l,m),"),\n            vec2(").concat(Zte(d,l,m),"));\n        }")}var g=u.length,v=u[u.length-1];p+="\n        return getChannel(\n          getT".concat(g,"(").concat(Zte(s,l,v),"),\n          vec2(").concat(Zte(d,l,v),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," + 1;\n        if (").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-2]," = ").concat(i[a-2]," + 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," - 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2]," &&\n            ").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Zte(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Jte(e){var t=e.inputs,n=e.backend,r=t.input;return mee({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var ene={kernelName:"Imag",backendName:"webgl",kernelFunc:Jte};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function tne(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return Ute({inputs:{input:e},backend:n})})),o=e.map((function(e){return Jte({inputs:{input:e},backend:n})})),i=tne(a,t,n),s=tne(o,t,n),u=vee({inputs:{real:i,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}if("string"===r){var c=nne(e,t,n),l=c.tensors2D,d=c.outShape,f=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),p=1===l[0].shape[0],h=S9(f,d,r,p),m=O1(e.map((function(e){return e.shape})),t),g=n.makeTensorInfo(m,r,h);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}if(e.length>SQ().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var v=Math.floor(e.length/2),y=tne(e.slice(0,v),t,n),b=tne(e.slice(v),t,n),x=tne([y,b],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}if(SQ().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var k=new $te(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(k,e,r)}var w=nne(e,t,n),I=w.tensors2D,C=w.outShape,E=new Yte(I.map((function(e){return e.shape}))),S=n.runWebGLProgram(E,I,r);I.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var T=Dee({inputs:{x:S},attrs:{shape:C},backend:n});return n.disposeIntermediateTensorInfo(S),T}function nne(e,t,n){var r=O1(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return Dee({inputs:{x:e},attrs:{shape:[-1,$X(e.shape.slice(t))]},backend:n})})),outShape:r}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function rne(e){var t=e.inputs,n=e.backend,r=aQ(e.attrs.axis,t[0].shape)[0],a=O1(t.map((function(e){return e.shape})),r);if(0===$X(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return $X(e.shape)>0}));return 1===o.length?mee({inputs:{x:o[0]},backend:n}):(R1(o.map((function(e){return e.shape})),r),tne(o,r,n))}var ane={kernelName:"Concat",backendName:"webgl",kernelFunc:rne},one=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4,g="channelsLast"===t.dataFormat,v=g?1:2,y=g?2:3,b=g?3:1,x="",k="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(v,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(f,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")},ine=function e(t){_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(i,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},sne=function e(t,n,r){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var a=r.filterWidth,o=r.inChannels,i=r.strideWidth,s=r.strideHeight,u=r.padInfo,c=r.outWidth,l=r.dilationWidth,d=r.dilationHeight,f=r.dataFormat,p=u.left,h=u.top,m=o*a,g=W7(),v="channelsLast"===f,y=v?0:1,b=v?1:2,x="",k=0;k<=1;k++)for(var w=0;w<=1;w++)x+="\n          blockIndex = rc.y + ".concat(w,";\n          pos = rc.x + ").concat(k,";\n\n          if(blockIndex < ").concat(t[1]," && pos < ").concat(t[0],") {\n            offsetY = int(blockIndex / (").concat(c,")) * ").concat(s," - ").concat(h,";\n            d0 = offsetY + ").concat(d," * (pos / ").concat(m,");\n\n            if(d0 < ").concat(n[y]," && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ").concat(c,".) * ").concat(i,". - ").concat(p,".);\n              d1 = offsetX + ").concat(l," * (int(mod(float(pos), ").concat(m,".) / ").concat(o,".));\n\n              if(d1 < ").concat(n[b]," && d1 >= 0) {\n\n                ch = int(mod(float(pos), ").concat(o,".));\n\n                if (").concat(v,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*k+w,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*k+w,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(x,"\n\n        ").concat(g.output," = result;\n      }\n    ")};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function une(e){var t,n=e.x,r=e.filter,a=e.convInfo,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,p=void 0===f?null:f,h=n.shape,m=o.texData.get(n.dataId),g=a.inChannels,v=h[0]*h[1]*h[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[],k=(1===v||1===y)&&g>1e3,w=h[2]%2!=0&&!!m.isPacked;if(!k&&SQ().getBool("WEBGL_LAZILY_UNPACK")&&SQ().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&w){var I=b?h[0]*h[1]*(h[2]+1):h[0]*h[2]*(h[3]+1),C={dataId:n.dataId,shape:[1,I,a.inChannels],dtype:n.dtype},E=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,qX(M7(m.shape,C.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(C.shape," isn't free")}));var S=Dee({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(S);var T=qee({a:C,b:S,backend:o,transposeA:!1,transposeB:!1,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:d}),A=o.texData.get(T.dataId);qX(A.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=E,A.shape=a.outShape,(t=mee({inputs:{x:T},backend:o})).shape=a.outShape,x.push(T)}else{var N=Dee({inputs:{x:n},backend:o,attrs:{shape:[1,b?h[0]*h[1]*h[2]:h[0]*h[2]*h[3],a.inChannels]}}),_=Dee({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}}),R=qee({a:N,b:_,transposeA:!1,transposeB:!1,backend:o,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:d});t=Dee({inputs:{x:R},backend:o,attrs:{shape:a.outShape}}),x.push(N),x.push(_),x.push(R)}for(var O=0,F=x;O<F.length;O++){var M=F[O];o.disposeIntermediateTensorInfo(M)}return t}function cne(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,o=e.bias,i=void 0===o?null:o,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,d=e.activation,f=void 0===d?null:d,p=r.filterWidth,h=r.filterHeight,m=r.inChannels,g=r.outWidth,v=r.outHeight,y="channelsLast"===r.dataFormat,b=p*h*m,x=v*g,k=[b,x],w=[],I=Dee({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),C=Dee({inputs:{x:n},backend:a,attrs:{shape:[1,b,$X(n.shape)/b]}});w.push(I),w.push(C);var E=new sne(k,I.shape,r),S=a.runWebGLProgram(E,[I],"float32"),T=Dee({inputs:{x:S},backend:a,attrs:{shape:[1,k[0],k[1]]}});w.push(S),w.push(T);var A=null!=i,N=null!=u,_="leakyrelu"===f,R=f?Tee(f,!0):null,O=new Aee(T.shape,C.shape,[1,x,r.outChannels],!0,!1,A,R,N,_),F=[T,C];if(i&&F.push(i),N&&F.push(u),_){var M=a.makeTensorInfo([],"float32",UQ(l,"float32"));F.push(M),w.push(M)}var D=a.runWebGLProgram(O,F,"float32"),B=Dee({inputs:{x:D},backend:a,attrs:{shape:y?[1,v,g,r.outChannels]:[1,r.outChannels,v,g]}});w.push(D);for(var P=0,L=w;P<L.length;P++){var U=L[P];a.disposeIntermediateTensorInfo(U)}return B}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var lne={kernelName:"Conv2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,d=a.dimRoundingMode,f=kZ(c),p=fZ(o.shape,i.shape,s,l,u,d,!1,f);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(SQ().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=cne({x:o,filter:i,convInfo:p,backend:r});else{var h=new one(p);t=r.runWebGLProgram(h,[o,i],"float32")}else t=une({x:o,filter:i,convInfo:p,backend:r});var m=Dee({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),m}},dne=function e(t){_y(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(i,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},fne=function e(t){_y(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=i?1:2,l=i?2:3,d=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},pne=function e(t){_y(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.padInfo.front,i=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},hne=function e(t){_y(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},mne={kernelName:"Conv2DBackpropFilter",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,d=kZ(u),f=fZ(a.shape,l,i,1,s,c,!1,d),p=new dne(f);return n.runWebGLProgram(p,[a,o],"float32")}},gne={kernelName:"Conv2DBackpropInput",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=kZ(c),f=fZ(i,o.shape,s,1,u,l,!1,d),p=new fne(f);return n.runWebGLProgram(p,[a,o],"float32")}},vne={kernelName:"Conv3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=pZ(a.shape,o.shape,i,u,s),l=new ine(c);return n.runWebGLProgram(l,[a,o],"float32")}},yne={kernelName:"Conv3DBackpropFilterV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.filterShape,c=pZ(a.shape,u,i,1,s),l=new pne(c);return n.runWebGLProgram(l,[a,o],"float32")}},bne={kernelName:"Conv3DBackpropInputV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,u=pZ(r.inputShape,o.shape,s,1,i),c=new hne(u);return n.runWebGLProgram(c,[a,o],"float32")}},xne={kernelName:"Cos",backendName:"webgl",kernelFunc:Eee({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"})},kne={kernelName:"Cosh",backendName:"webgl",kernelFunc:Eee({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"})},wne=function e(t,n,r,a,o){_y(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=qy(t,4),s=i[0],u=i[1],c=i[2],l=i[3],d=qy(n,1)[0],f=qy(r,2),p=f[0],h=f[1];this.outputShape=[d,p,h,l];var m="bilinear"===a?1:0,g=u-1+".0",v=c-1+".0",y=qy(p>1?[""+(u-1)/(p-1),"(y2-y1) * height_ratio","y1*".concat(g," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(g)],3),b=y[0],x=y[1],k=y[2],w=qy(h>1?[""+(c-1)/(h-1),"(x2-x1) * width_ratio","x1*".concat(v," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(v)],3),I=w[0],C=w[1],E=w[2];this.userCode="\n      const float height_ratio = float(".concat(b,");\n      const float width_ratio = float(").concat(I,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(x,";\n        float width_scale = ").concat(C,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(g," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n        float in_x = ").concat(E,";\n        if( in_x < 0.0 || in_x > ").concat(v," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")},Ine={kernelName:"CropAndResize",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new wne(a.shape,o.shape,s,u,c);return n.runWebGLProgram(l,[a,o,i],"float32")}},Cne=function(){function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=t;var a=t.length,o=n?"0.0":"getX(".concat(Ene(a,"coords"),")"),i=t[t.length-1],s="",u="";n?(s=r?"end != "+(i-1):"end != 0",u=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(i):"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode="\n      uniform float index;\n      void main() {\n        ".concat(y9(a)," coords = getOutputCoords();\n        int end = ").concat(Sne(a,"coords"),";\n        float val = ").concat(o,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(u,";\n          ").concat(Sne(a,"coords")," = idx;\n          val += getX(").concat(Ene(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.index&&(t.index=n.getUniformLocation(r,"index")),n.gl.uniform1f(t.index,e)}}}]),e}();
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Ene(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function Sne(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Tne={kernelName:"Cumsum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse,u=a.shape.length,c=OJ([o],u),l=a;null!=c&&(l=Gee({inputs:{x:a},backend:n,attrs:{perm:c}}));var d=MJ(1,u)[0];if(d!==u-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," but got axis=").concat(o));for(var f=l.shape[d],p=mee({inputs:{x:l},backend:n}),h=0;h<=Math.ceil(Math.log2(f))-1;h++){var m=new Cne(l.shape,!1,s),g=m.getCustomSetupFunc(h),v=p;p=n.runWebGLProgram(m,[p],p.dtype,g),n.disposeIntermediateTensorInfo(v)}if(i){var y=new Cne(l.shape,i,s),b=p;p=n.runWebGLProgram(y,[p],p.dtype),n.disposeIntermediateTensorInfo(b)}if(null!=c){var x=Gee({inputs:{x:p},backend:n,attrs:{perm:FJ(c)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(l),x}return p}},Ane={kernelName:"DenseBincount",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=I9(u,c,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,l)}if(2===a.shape.length){var d=n.bufferSync(a),f=n.bufferSync(o),p=C9(d,f,i,s);return n.makeTensorInfo(p.shape,o.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}},Nne=function(){function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return Oy(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}(),_ne={kernelName:"DepthToSpace",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;qX(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));var s=a.shape[0],u="NHWC"===i?a.shape[1]:a.shape[2],c="NHWC"===i?a.shape[2]:a.shape[3],l="NHWC"===i?a.shape[3]:a.shape[1],d=u*o,f=c*o,p=l/(o*o),h=new Nne("NHWC"===i?[s,d,f,p]:[s,p,d,f],o,i);return n.runWebGLProgram(h,[a],a.dtype)}},Rne=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,s=t.inWidth,u=t.padInfo.top,c=t.padInfo.left,l=t.strideHeight,d=t.strideWidth,f=t.dilationHeight,p=t.dilationWidth,h=t.filterHeight,m=t.filterWidth,g=t.outChannels/t.inChannels,v="",y="";r&&(v=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),y="result = activation(result);");var b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(v,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(d,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(g,";\n        int q = d2 - d1 * ").concat(g,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(f,";\n\n          if (xR < 0 || xR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(m,"; wC++) {\n            int xC = xCCorner + wC * ").concat(p,";\n\n            if (xC < 0 || xC >= ").concat(s,") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(b,"\n        ").concat(y,"\n        setOutput(result);\n      }\n    ")},One=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_y(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.inHeight,s=t.inWidth,u=t.padInfo.top,c=t.padInfo.left,l=t.strideHeight,d=t.strideWidth,f=t.dilationHeight,p=t.dilationWidth,h=t.filterHeight,m=t.filterWidth,g=m,v="int xR; int xC; int xCOffset;",y=0;y<h;y++)for(var b=0;b<m;b++)v+="\n          vec4 xTexelR".concat(y,"C").concat(2*b," = vec4(0.);\n          vec4 wR").concat(y,"C").concat(b," = vec4(0.);\n          vec4 xR").concat(y,"C").concat(b," = vec4(0.);");for(var x=0;x<h;x++)for(var k=0;k<g;k++){var w=2*k;if(v+="\n          xR = xRCorner + ".concat(x*f,";\n          xC = xCCorner + ").concat(w*p,";\n        "),1===d){if(w<m&&(v+=c%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ".concat(i," && xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(x,"C").concat(w," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(s,") {\n                    xTexelR").concat(x,"C").concat(w,".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR").concat(x,"C").concat(w," = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ").concat(i," && xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(s,") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR").concat(x,"C").concat(w," = vec4(previous.zw, xTexelR").concat(x,"C").concat(w,".xy);\n                } else {\n                  xR").concat(x,"C").concat(w," = vec4(0, 0, xTexelR").concat(x,"C").concat(w,".xy);\n                }\n              "):"\n                if(xR >= 0 && xR < ".concat(i," && xC >= 0 && xC < ").concat(s,") {\n                  xTexelR").concat(x,"C").concat(w," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(w," = vec4(0.);\n                }\n\n                xR").concat(x,"C").concat(w," = xTexelR").concat(x,"C").concat(w,";\n              "),w+1<m)){var I=c%2==0?KX(p):p;p%2==0&&c%2==1||p%2!=0&&c%2!=1?(v+="\n                  xCOffset = xC + ".concat(c%2," + ").concat(I,";\n\n                  if(xR >= 0 && xR < ").concat(i," &&\n                    xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    xTexelR").concat(x,"C").concat(w+2," = getX(batch, xR, xCOffset, d1);\n                  }\n                "),p>1&&(v+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ".concat(i," &&\n                      xCOffset >= 0 && xCOffset < ").concat(s,") {\n                      xTexelR").concat(x,"C").concat(w," = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR").concat(x,"C").concat(w," = vec4(0.);\n                    }\n                  ")),v+="\n                  xR".concat(x,"C").concat(w+1," = vec4(\n                    xTexelR").concat(x,"C").concat(w,".zw, xTexelR").concat(x,"C").concat(w+2,".xy);\n                ")):v+="\n                  xCOffset = xC + ".concat(I,";\n\n                  if(xR >= 0 && xR < ").concat(i," &&\n                    xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    xTexelR").concat(x,"C").concat(w+2," = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR").concat(x,"C").concat(w+1," = xTexelR").concat(x,"C").concat(w+2,";\n                ")}}else w<m&&(v+="\n              if(xR >= 0 && xR < ".concat(i,") {\n            "),c%2==1?(v+="\n                xCOffset = xC + 1 - ".concat(d,";\n                if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(x,"C").concat(w," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(w," = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ").concat(s,") {\n                  xTexelR").concat(x,"C").concat(w+2," = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(w+2," = vec4(0.);\n                }\n\n                xR").concat(x,"C").concat(w," = vec4(\n                  xTexelR").concat(x,"C").concat(w,".zw, xTexelR").concat(x,"C").concat(w+2,".zw);\n              "),w+1<m&&(v+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ".concat(d,";\n                  if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR").concat(x,"C").concat(w+1," = vec4(xTexelR").concat(x,"C").concat(w+2,".xy, final.xy);\n                "))):(v+="\n                if(xC >= 0 && xC < ".concat(s,") {\n                  xTexelR").concat(x,"C").concat(w," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(w," = vec4(0.);\n                }\n\n                xCOffset = xC + ").concat(d,";\n                if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(x,"C").concat(w+2," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(x,"C").concat(w+2," = vec4(0.);\n                }\n\n                xR").concat(x,"C").concat(w," = vec4(\n                  xTexelR").concat(x,"C").concat(w,".xy, xTexelR").concat(x,"C").concat(w+2,".xy);\n              "),w+1<m&&(v+="\n                  xR".concat(x,"C").concat(w+1," = vec4(\n                    xTexelR").concat(x,"C").concat(w,".zw, xTexelR").concat(x,"C").concat(w+2,".zw);\n                "))),v+="}");w<m&&(v+="\n            vec4 wTexelR".concat(x,"C").concat(w," = getW(").concat(x,", ").concat(w,", d1, q);\n            wR").concat(x,"C").concat(w," = vec4(wTexelR").concat(x,"C").concat(w,".xz, wTexelR").concat(x,"C").concat(w,".xz);\n          "),w+1<m&&(v+="\n              vec4 wTexelR".concat(x,"C").concat(w+1," = getW(").concat(x,", ").concat(w+1,", d1, q);\n              wR").concat(x,"C").concat(w+1," =\n                vec4(wTexelR").concat(x,"C").concat(w+1,".xz, wTexelR").concat(x,"C").concat(w+1,".xz);")))}for(var C=0;C<h;C++)for(var E=0;E<m;E++)v+="dotProd += xR".concat(C,"C").concat(E," * wR").concat(C,"C").concat(E,";");var S="",T="";r&&(S=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),T="result = activation(result);");var A=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(S,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(d,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(c,");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ").concat(v,"\n\n        vec4 result = dotProd;\n        ").concat(A,"\n        ").concat(T,"\n        setOutput(result);\n      }\n    ")},Fne={kernelName:"DepthwiseConv2dNative",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),qX(xZ(i,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(l,"'")}));var d,f=fZ(a.shape,o.shape,i,l,s,c,!0);return d=SQ().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels==1?new One(f):new Rne(f),n.runWebGLProgram(d,[a,o],"float32")}},Mne=function e(t){_y(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Dne=function e(t){_y(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Bne={kernelName:"DepthwiseConv2dNativeBackpropFilter",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,d=fZ(a.shape,l,i,s,u,c,!0),f=new Mne(d);return n.runWebGLProgram(f,[a,o],"float32")}},Pne={kernelName:"DepthwiseConv2dNativeBackpropInput",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=fZ(r.inputShape,o.shape,i,s,u,c,!0),d=new Dne(l);return n.runWebGLProgram(d,[a,o],"float32")}},Lne=function e(t){_y(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},Une={kernelName:"Diag",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat(Xy(r.shape),Xy(r.shape)),o=$X(r.shape),i=Dee({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new Lne(o),u=n.runWebGLProgram(s,[i],i.dtype),c=Dee({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),c}},Vne=function e(t){_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,o=t.strideHeight,i=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,d=a.top,f=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(f,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")},Wne={kernelName:"Dilation2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=cZ(o.shape,i.shape,s,u,"NHWC",c),d=new Vne(l),f=Dee({inputs:{x:t=r.runWebGLProgram(d,[o,i],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),f}},zne={kernelName:"Elu",backendName:"webgl",kernelFunc:Eee({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"})},jne={kernelName:"EluGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,o=SQ().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hee("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new pee("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}},Hne={kernelName:"Equal",backendName:"webgl",kernelFunc:See({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool"})},Gne={kernelName:"Erf",backendName:"webgl",kernelFunc:Eee({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n'})},Kne="return exp(x);",qne=Eee({opSnippet:Kne,packedOpSnippet:Kne,cpuKernelImpl:T9}),Xne={kernelName:"Exp",backendName:"webgl",kernelFunc:qne};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Qne(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,o=t.input,i=o.shape.length,s=o.shape.slice(),u=a;return a<0&&(qX(-(i+1)<=a,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+a+1),s.splice(u,0,1),Dee({inputs:{x:o},backend:r,attrs:{shape:s}})}var Yne={kernelName:"ExpandDims",backendName:"webgl",kernelFunc:Qne},$ne="return exp(x) - 1.0;",Zne={kernelName:"Expm1",backendName:"webgl",kernelFunc:Eee({opSnippet:$ne,packedOpSnippet:$ne,cpuKernelImpl:A9})},Jne=function e(t,n,r){_y(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var o,i=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)o="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));o="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(o,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function ere(e,t,n){var r=n.texData.get(e.dataId),a=$X(e.shape),o=e.shape[e.shape.length-1],i=Dee({inputs:{x:e},backend:n,attrs:{shape:[a/o,o]}}),s=i.shape,u=new Jne("real",s,t),c=new Jne("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(u,l,"float32"),f=n.runWebGLProgram(c,l,"float32"),p=vee({inputs:{real:d,imag:f},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f);var h=Dee({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),h
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var tre={kernelName:"FFT",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return ere(t.input,!1,n)}},nre=function(){function e(t,n){_y(this,e),this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}}}]),e}();
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function rre(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype;if("string"===(o=o||fQ(a))){var i=sQ(o,$X(r));return i.fill(a),t.makeTensorInfo(r,o,i)}var s=new nre(r,a),u=s.getCustomSetupFunc(a);return t.runWebGLProgram(s,[],o,u)}var are,ore={kernelName:"Fill",backendName:"webgl",kernelFunc:rre},ire=function e(t){_y(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},sre={kernelName:"FlipLeftRight",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,o=new ire(r.shape);return a.runWebGLProgram(o,[r],r.dtype)}},ure="return floor(x);",cre={kernelName:"Floor",backendName:"webgl",kernelFunc:Eee({opSnippet:ure,packedOpSnippet:ure,cpuKernelImpl:N9})},lre={kernelName:"FloorDiv",backendName:"webgl",kernelFunc:See({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"})},dre=function e(t){_y(this,e),this.variableNames=["A"];var n=W7(),r=qy(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(o,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")},fre=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=W7(),r=qy(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(o,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},pre={kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,o=r.numChannels,i="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,u=qy(i?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),c=u[0],l=u[1],d=[l,c],f=[l,c,o];(s||i)&&(null==are&&(are=document.createElement("canvas").getContext("2d")),are.canvas.width=c,are.canvas.height=l,are.drawImage(a,0,0,c,l),a=are.canvas);var p=n.makeTensorInfo(d,"int32");n.texData.get(p.dataId).usage=s7.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),a);var h=SQ().getBool("WEBGL_PACK")?new fre(f):new dre(f),m=n.runWebGLProgram(h,[p],"int32");return n.disposeData(p.dataId),m
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */}},hre={kernelName:"FusedConv2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,d=a.dataFormat,f=a.dilations,p=a.dimRoundingMode,h=a.activation,m=a.leakyreluAlpha,g=kZ(d),v=fZ(o.shape,i.shape,c,f,l,p,!1,g),y=[];if(1!==v.filterHeight||1!==v.filterWidth||1!==v.dilationHeight||1!==v.dilationWidth||1!==v.strideHeight||1!==v.strideWidth||"SAME"!==v.padInfo.type&&"VALID"!==v.padInfo.type)if(SQ().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=cne({x:o,filter:i,convInfo:v,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});else{var b=null!=s,x=null!=u,k="leakyrelu"===h,w=h?Tee(h,!1):null,I=new one(v,b,w,x,k),C=[o,i];if(s&&C.push(s),u&&C.push(u),k){var E=r.makeTensorInfo([],"float32",UQ(m,"float32"));C.push(E),y.push(E)}t=r.runWebGLProgram(I,C,"float32")}else t=une({x:o,filter:i,convInfo:v,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});var S=Dee({inputs:{x:t},backend:r,attrs:{shape:v.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),S}},mre={kernelName:"FusedDepthwiseConv2D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,d=r.dimRoundingMode,f=r.activation,p=r.leakyreluAlpha,h=[],m=l;null==m&&(m=[1,1]),qX(xZ(u,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(u," and dilations '").concat(m,"'")}));var g,v=fZ(a.shape,o.shape,u,m,c,d,!0),y=SQ().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels==1,b=f?Tee(f,y):null,x=[a,o],k=null!=i,w=null!=s,I="leakyrelu"===f;if(k&&x.push(i),w&&x.push(s),I){var C=n.makeTensorInfo([],"float32",UQ(p,"float32"));x.push(C),h.push(C)}g=y?new One(v,k,b,w,I):new Rne(v,k,b,w,I);var E=n.runWebGLProgram(g,x,"float32");return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),E}},gre=function e(t,n,r){_y(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=y9(n.length),o=y9(r.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(i,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")},vre={kernelName:"GatherNd",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=a.shape,i=o[o.length-1],s=qy(x$(r,a),4),u=s[0],c=s[1],l=s[2],d=s[3],f=Dee({inputs:{x:a},backend:n,attrs:{shape:[c,i]}}),p=Dee({inputs:{x:r},backend:n,attrs:{shape:[$X(r.shape)/l,l]}}),h=new gre(i,d,[c,l]),m=n.runWebGLProgram(h,[p,f],p.dtype),g=Dee({inputs:{x:m},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}},yre=function e(t,n){_y(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=y9(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("int(getIndices(resRC.x, resRC.z))"):r.push("".concat(n[a]));return r.join()}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")},bre={kernelName:"GatherV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims,u=Z1(a,o,aQ(i,a.shape)[0],s),c=$X(o.shape),l=[],d=Dee({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),f=Dee({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});l.push(d),l.push(f);var p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){var h=n.bufferSync(f),m=n.bufferSync(d),g=_9(m,h,p);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(u.outputShape,g.dtype,g.values)}var v=new yre(d.shape,p),y=n.runWebGLProgram(v,[d,f],d.dtype);l.push(y);var b=Dee({inputs:{x:y},backend:n,attrs:{shape:u.outputShape}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}},xre={kernelName:"Greater",backendName:"webgl",kernelFunc:See({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:R9,dtype:"bool"})},kre={kernelName:"GreaterEqual",backendName:"webgl",kernelFunc:See({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool"})},wre={kernelName:"IFFT",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend;return ere(t.input,!0,n)}},Ire={kernelName:"IsFinite",backendName:"webgl",kernelFunc:Eee({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"})},Cre={kernelName:"IsInf",backendName:"webgl",kernelFunc:Eee({opSnippet:"return float(isinf(x));",dtype:"bool"})},Ere={kernelName:"IsNan",backendName:"webgl",kernelFunc:Eee({opSnippet:"return float(isnan(x));",dtype:"bool"})},Sre={kernelName:"Less",backendName:"webgl",kernelFunc:See({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:O9,dtype:"bool"})},Tre={kernelName:"LessEqual",backendName:"webgl",kernelFunc:See({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",dtype:"bool"})},Are={kernelName:"LinSpace",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.num,i=F9(r,a,o);return t.makeTensorInfo([i.length],"float32",i)}},Nre={kernelName:"Log",backendName:"webgl",kernelFunc:Eee({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:M9})},_re={kernelName:"Log1p",backendName:"webgl",kernelFunc:Eee({opSnippet:"return log(1.0 + x);"})},Rre={kernelName:"LogicalAnd",backendName:"webgl",kernelFunc:See({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"})},Ore={kernelName:"LogicalNot",backendName:"webgl",kernelFunc:Eee({opSnippet:"return float(!(x >= 1.0));"})},Fre={kernelName:"LogicalOr",backendName:"webgl",kernelFunc:See({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"})},Mre=function e(t,n,r,a,o){_y(this,e),this.variableNames=["x"],this.outputShape=[];var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(i,";\n        setOutput(val);\n      }\n    ")},Dre=function e(t,n,r,a,o){_y(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(i,";\n        setOutput(result);\n      }\n    ")},Bre={kernelName:"LRN",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta,c=SQ().getBool("WEBGL_PACK_NORMALIZATION")?new Dre(a.shape,o,i,s,u):new Mre(a.shape,o,i,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},Pre=function e(t,n,r,a,o){_y(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(o,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")},Lre={kernelName:"LRNGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,d=new Pre(a.shape,s,u,c,l);return n.runWebGLProgram(d,[a,o,i],a.dtype)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Ure(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,i=r.keepDims,s=a.shape.length,u=aQ(o,a.shape),c=u,l=OJ(c,s),d=null!=l,f=n.shouldExecuteOnCPU([a]),p=a;if(d){if(f){for(var h=n.texData.get(p.dataId).values,m=new Array(s),g=0;g<m.length;g++)m[g]=a.shape[l[g]];var v=Q9(h,a.shape,a.dtype,l,m);p=n.makeTensorInfo(m,a.dtype),n.texData.get(p.dataId).values=v}else p=zee(a,l,n);c=MJ(c.length,s)}RJ("max",c,s);var y,b=qy(NJ(p.shape,c),2),x=b[0],k=b[1],w=x;if(i&&(w=_J(x,u)),f){var I=n.texData.get(p.dataId).values,C=D9(I,$X(k),w,a.dtype);y=n.makeTensorInfo(w,a.dtype),n.texData.get(y.dataId).values=C}else y=
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e,t,n,r){var a=$X(t),o=Dee({inputs:{x:e},attrs:{shape:[$X(e.shape)/a,a]},backend:r}),i=Uee(o,e.dtype,"max",r),s=Dee({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(p,k,w,n);return d&&n.disposeIntermediateTensorInfo(p),y}var Vre={kernelName:"Max",backendName:"webgl",kernelFunc:Ure},Wre={kernelName:"Maximum",backendName:"webgl",kernelFunc:See({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:B9})},zre={kernelName:"MaxPool",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;U7(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;qX(xZ(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c=lZ(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&ZX(c.inShape,c.outShape))return mee({inputs:{x:a},backend:n});var l=new yte(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}},jre={kernelName:"MaxPool3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=dZ(a.shape,o,i,[1,1,1],s,c,u),d=new bte(l,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}},Hre=function e(t){_y(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,o=t.effectiveFilterHeight,i=t.effectiveFilterWidth,s=o-1-t.padInfo.top,u=i-1-t.padInfo.left,c=o*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Gre=function e(t){_y(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=u-1-t.padInfo.front,f=c-1-t.padInfo.top,p=l-1-t.padInfo.left,h=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(f,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Kre={kernelName:"MaxPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=dZ(o.shape,i,s,[1,1,1],u,c),d=new bte(l,"max",!0),f=n.runWebGLProgram(d,[o],o.dtype),p=new Gre(l),h=n.runWebGLProgram(p,[a,f],o.dtype);return n.disposeIntermediateTensorInfo(f),h}},qre={kernelName:"MaxPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;U7([o,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=lZ(i.shape,s,u,1,c,l),f=new yte(d,"max",!0),p=n.runWebGLProgram(f,[i],i.dtype),h=new Hre(d),m=n.runWebGLProgram(h,[a,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}},Xre={kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,i=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;qX(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];qX(xZ(i,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(l,"'")}));var d=lZ(a.shape,o,i,l,s),f=qy(function(e,t,n,r){var a=new yte(n,"max",!1),o=r.runWebGLProgram(a,[e],"float32");return a=new yte(n,"max",!0,!0,t),[o,r.runWebGLProgram(a,[e],"float32")]}(a,u,d,c),2);return[f[0],f[1]]}},Qre={kernelName:"Mean",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.keepDims,i=n.axis,s=r,u=a.shape.length,c=aQ(i,a.shape),l=c,d=OJ(l,u),f=null!=d,p=s.shouldExecuteOnCPU([a]),h=[],m=a;if(f){if(p){for(var g=s.texData.get(m.dataId).values,v=new Array(u),y=0;y<v.length;y++)v[y]=a.shape[d[y]];var b=Q9(g,a.shape,a.dtype,d,v);m=s.makeTensorInfo(v,a.dtype),s.texData.get(m.dataId).values=b}else m=zee(a,d,s);h.push(m),l=MJ(l.length,u)}RJ("sum",l,u);var x=qy(NJ(m.shape,l),2),k=x[0],w=x[1],I=k;o&&(I=_J(k,c));for(var C=function(e,t,n,r){var a=$X(t),o=Dee({inputs:{x:e},attrs:{shape:[$X(e.shape)/a,a]},backend:r}),i=Uee(o,"float32","mean",r),s=Dee({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(m,w,I,s),E=0,S=h;E<S.length;E++){var T=S[E];s.disposeIntermediateTensorInfo(T)}return C}},Yre={kernelName:"Min",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=aQ(o,a.shape),c=u,l=OJ(c,s),d=a;null!=l&&(d=Gee({inputs:{x:a},backend:n,attrs:{perm:l}}),c=MJ(c.length,a.shape.length)),RJ("min",c,s);var f,p=qy(NJ(d.shape,c),2),h=p[0],m=Dee({inputs:{x:d},backend:n,attrs:{shape:[-1,$X(p[1])]}}),g=Uee(m,m.dtype,"min",n);return f=Dee(i?{inputs:{x:g},backend:n,attrs:{shape:_J(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),f}},$re={kernelName:"Minimum",backendName:"webgl",kernelFunc:See({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:P9})},Zre=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=y9(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(o," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")},Jre=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=y9(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=Z9("rc",a),c=Z9("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f="reflect"===r?0:1,p="";if(1===a){var h="\n        ".concat(o," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(f,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(f,";\n        }\n        source -= start;\n      ");p="\n        ".concat(o," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ")}else{var m="\n        ".concat(o," source = rc;\n        ").concat(o," lt = ").concat(o,"(lessThan(source, start));\n        ").concat(o," gte = ").concat(o,"(greaterThanEqual(source, end));\n        ").concat(o," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(f,") +\n                gte * ((end - 1) * 2 - source + ").concat(f,");\n        source -= start;\n      ");p="\n        ".concat(o," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")},eae={kernelName:"MirrorPad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode,s=SQ().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Jre(a.shape,o,i):new Zre(a.shape,o,i);return n.runWebGLProgram(s,[a],a.dtype)}},tae={kernelName:"Mod",backendName:"webgl",kernelFunc:See({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},nae=function(){function e(t,n,r){_y(this,e),this.variableNames=["probs"],this.outputShape=[t,r],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}}}]),e}(),rae=See({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),aae={kernelName:"RealDiv",backendName:"webgl",kernelFunc:rae},oae="return a - b;",iae=See({opSnippet:oae,packedOpSnippet:oae,supportsComplex:!0,cpuKernelImpl:K9}),sae={kernelName:"Sub",backendName:"webgl",kernelFunc:iae};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function uae(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=aQ([r.dim],a.shape),i=Ure({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),s=_J(i.shape,o),u=Dee({inputs:{x:i},backend:n,attrs:{shape:s}}),c=iae({inputs:{a:a,b:u},backend:n}),l=qne({inputs:{x:c},backend:n}),d=jee({inputs:{x:l},backend:n,attrs:{axis:o,keepDims:!1}}),f=Dee({inputs:{x:d},backend:n,attrs:{shape:s}}),p=rae({inputs:{a:l,b:f},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),p}var cae={kernelName:"Softmax",backendName:"webgl",kernelFunc:uae},lae={kernelName:"Multinomial",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized,u=s?a:uae({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],d=new nae(c,l,o),f=d.getCustomSetupFunc(i),p=n.runWebGLProgram(d,[u],"int32",f);return s||n.disposeIntermediateTensorInfo(u),p}},dae="return -x;",fae={kernelName:"Neg",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var o=r.texData.get(a.dataId),i=qy(U9(o.values,a.shape,a.dtype),2),s=i[0],u=i[1];return r.makeTensorInfo(u,a.dtype,s)}return t=SQ().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new uee(a.shape,dae):new oee(a.shape,dae),r.runWebGLProgram(t,[a],a.dtype)}},pae=v1,hae={kernelName:"NonMaxSuppressionV3",backendName:"webgl",kernelFunc:function(e){V1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(o.dataId),d=pae(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},mae=y1,gae={kernelName:"NonMaxSuppressionV4",backendName:"webgl",kernelFunc:function(e){V1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),d=n.readSync(o.dataId),f=mae(l,d,i,s,u,c),p=f.selectedIndices,h=f.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},vae=b1,yae={kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){V1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),d=n.readSync(o.dataId),f=vae(l,d,i,s,u,c),p=f.selectedIndices,h=f.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},bae=function e(t,n,r,a){_y(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")},xae={kernelName:"OneHot",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue,u=$X(a.shape),c=new bae(u,o,i,s),l=Dee({inputs:{x:a},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(c,[l],a.dtype);n.disposeIntermediateTensorInfo(l);var f=Dee({inputs:{x:d},backend:n,attrs:{shape:[].concat(Xy(a.shape),[o])}});return n.disposeIntermediateTensorInfo(d),f}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function kae(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=Ute({inputs:{input:r},backend:n}),o=kae({inputs:{x:a},backend:n}),i=Jte({inputs:{input:r},backend:n}),s=kae({inputs:{x:i},backend:n}),u=vee({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return rre({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var wae={kernelName:"ZerosLike",backendName:"webgl",kernelFunc:kae},Iae={kernelName:"OnesLike",backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var o=Ute({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=Jte({inputs:{input:a},backend:r}),u=kae({inputs:{x:s},backend:r}),c=vee({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return rre({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}},Cae={kernelName:"Pack",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Qne({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){XX(a,e.shape,"All tensors passed to stack must have matching shapes"),qX(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=rne({inputs:t.map((function(e){var t=Qne({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},Eae=function(){function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=y9(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n      uniform float value;\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(o," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n        uniform float value;\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}}}]),e}(),Sae=function(){function e(t,n,r){_y(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,o=y9(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=Z9("rc",a),c=Z9("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f=["".concat(o," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",m=0,g=1===a?2:4;m<g;m++)h+="\n        ".concat(f[m],"\n        if (").concat(p,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(o," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ");h+=1===a?"} ":"}}",this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n      uniform float value;\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}}}]),e}(),Tae=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue,s=SQ().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Sae(a.shape,o,i):new Eae(a.shape,o,i),u=s.getCustomSetupFunc(i);return n.runWebGLProgram(s,[a],a.dtype,u)},Aae={kernelName:"PadV2",backendName:"webgl",kernelFunc:Tae},Nae={kernelName:"Pow",backendName:"webgl",kernelFunc:See({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},_ae={kernelName:"Prod",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.axis,s=a.keepDims,u=o.shape.length,c=[],l=aQ(i,o.shape),d=l,f=OJ(d,u),p=o;if(null!=f&&(p=Gee({inputs:{x:o},backend:r,attrs:{perm:f}}),d=MJ(d.length,u),c.push(p)),RJ("prod",d,u),r.shouldExecuteOnCPU([p])){var h=r.texData.get(p.dataId).values,m=V9(p.shape,p.dtype,h,d),g=m.outVals,v=m.outShape,y=m.outDtype;t=r.makeTensorInfo(v,y,g)}else{var b=qy(NJ(p.shape,d),2),x=b[0],k=$X(b[1]),w=Dee({inputs:{x:p},backend:r,attrs:{shape:[-1,k]}}),I=Uee(w,lY(o.dtype),"prod",r);t=Dee({inputs:{x:I},backend:r,attrs:{shape:x}}),c.push(w),c.push(I)}if(s){c.push(t);var C=_J(t.shape,l);t=Dee({inputs:{x:t},backend:r,attrs:{shape:C}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},Rae=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,s=W9(r,a,o,i);return t.makeTensorInfo([s.length],i,s)},Oae={kernelName:"Range",backendName:"webgl",kernelFunc:Rae},Fae={kernelName:"Reciprocal",backendName:"webgl",kernelFunc:Eee({opSnippet:"return 1.0 / x;"})},Mae={kernelName:"Relu",backendName:"webgl",kernelFunc:Eee({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"})},Dae={kernelName:"Relu6",backendName:"webgl",kernelFunc:Eee({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"})},Bae=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.outputShape=[];var i=qy(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")},Pae=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=qy(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],",\n          ").concat(f[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")},Lae={kernelName:"ResizeBilinear",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=qy(r.size,2),u=s[0],c=s[1],l=SQ().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Pae(a.shape,u,c,o,i):new Bae(a.shape,u,c,o,i);return n.runWebGLProgram(l,[a],"float32")}},Uae=function e(t,n,r){_y(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=qy(n,3),o=a[1],i=a[2],s=qy(t,3),u=s[1],c=s[2],l=[r&&u>1?o-1:o,r&&c>1?i-1:i],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/d[0],p=l[1]/d[1],h=1/f,m=1/p,g=2*Math.ceil(h)+2,v=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(v,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(o-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(i-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")},Vae={kernelName:"ResizeBilinearGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new Uae(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},Wae=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.outputShape=[];var i=qy(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";d=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")},zae={kernelName:"ResizeNearestNeighbor",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=qy(r.size,2),u=s[0],c=s[1],l=new Wae(a.shape,u,c,o,i);return n.runWebGLProgram(l,[a],a.dtype)}},jae=function e(t,n,r){_y(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=qy(n,3),o=a[1],i=a[2],s=qy(t,3),u=s[1],c=s[2],l=[r&&u>1?o-1:o,r&&c>1?i-1:i],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/d[0],p=l[1]/d[1],h=1/f,m=1/p,g=2*Math.ceil(h)+2,v=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(v,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")},Hae={kernelName:"ResizeNearestNeighborGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new jae(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},Gae=function e(t,n){_y(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),o=y9(r);this.userCode="\n      void main() {\n        ".concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")},Kae=function e(t,n){_y(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=Z9("rc",r),o="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),i="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=y9(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)}));return"getChannel(getX(".concat(r.join(","),"), vec2(").concat(r.slice(-2).join(","),"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")},qae={kernelName:"Reverse",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims,i=a.shape.length,s=aQ(o,a.shape);if(0===i)return mee({inputs:{x:a},backend:n});var u=SQ().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Kae(a.shape,s):new Gae(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},Xae=function(){function e(t,n){_y(this,e),this.variableNames=["Image"],this.outputShape=[];var r=t[1],a=t[2];this.outputShape=t;var o;o="number"==typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        uniform vec4 params;\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}return Oy(e,[{key:"getCustomSetupFunc",value:function(e,t,n,r){var a=this;return function(o,i){null==a.paramsLoc&&(a.paramsLoc=o.getUniformLocationNoThrow(i,"params")),o.gl.uniform4f(a.paramsLoc,e,t,n,r)}}}]),e}(),Qae={kernelName:"RotateWithOffset",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,i=n.fillValue,s=n.center,u=r,c=new Xae(a.shape,i),l=qy(M1(s,a.shape[1],a.shape[2]),2),d=l[0],f=l[1],p=c.getCustomSetupFunc(d,f,Math.sin(o),Math.cos(o));return u.runWebGLProgram(c,[a],a.dtype,p)}},Yae={kernelName:"Round",backendName:"webgl",kernelFunc:Eee({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"})},$ae={kernelName:"Rsqrt",backendName:"webgl",kernelFunc:Eee({opSnippet:"return inversesqrt(x);",cpuKernelImpl:z9})},Zae=function e(t,n,r,a,o,i){_y(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=y9(o.length),u=y9(i.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var f="getUpdates(".concat(d,")"),p=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(p,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(f,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")},Jae={kernelName:"ScatterNd",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=I$(0,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,p=[f/l,l];if(0===f)return n.makeTensorInfo(i,a.dtype);var h=Dee({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=Dee({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),v=new Zae(c,u,h.shape.length,m.shape.length,d,p),y=n.runWebGLProgram(v,[m,h,g],m.dtype),b=Dee({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),b}},eoe=function e(t,n,r){var a,o;if(_y(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)o="resRC",a="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(i[c])),c<t&&s.push("".concat(i[c]));a=s.join(),o=u.join()}var l=y9(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(o,"));\n        } else {\n          setOutput(getB(").concat(o,"));\n        }\n      }\n    ")},toe={kernelName:"Select",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=new eoe(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,o],cY(a.dtype,o.dtype))}},noe={kernelName:"Selu",backendName:"webgl",kernelFunc:Eee({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n"})},roe={kernelName:"Sigmoid",backendName:"webgl",kernelFunc:Eee({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"})},aoe={kernelName:"Sign",backendName:"webgl",kernelFunc:Eee({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"})},ooe={kernelName:"Sin",backendName:"webgl",kernelFunc:Eee({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"})},ioe={kernelName:"Sinh",backendName:"webgl",kernelFunc:Eee({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"})},soe={kernelName:"Softplus",backendName:"webgl",kernelFunc:Eee({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"})},uoe={kernelName:"SpaceToBatchND",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;qX(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,Xy(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=[],d=Tae({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=D1(d.shape,o,s,!1),p=B1(f.length,o.length,!1),h=P1(d.shape,o,s,!1),m=Dee({inputs:{x:d},backend:n,attrs:{shape:f}}),g=Gee({inputs:{x:m},backend:n,attrs:{perm:p}}),v=Dee({inputs:{x:g},backend:n,attrs:{shape:h}});return l.push(d),l.push(m),l.push(g),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},coe={kernelName:"SparseToDense",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,u=I$(0,a,s),c=u.sliceRank,l=u.numUpdates,d=u.strides,f=u.outputSize,p=new Zae(l,c,a.shape.length,o.shape.length,d,[f,1],!1),h=n.runWebGLProgram(p,[o,a,i],o.dtype),m=Dee({inputs:{x:h},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),m}},loe={kernelName:"SplitV",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=aQ(r.axis,a.shape)[0],s=Q1(a,o,i),u=a.shape.length,c=new Array(u).fill(0),l=a.shape.slice();return s.map((function(e){var t=Xy(l);t[i]=e;var r=Fte({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[i]+=e,r}))}},doe={kernelName:"Sqrt",backendName:"webgl",kernelFunc:Eee({opSnippet:"return sqrt(x);"})},foe={kernelName:"Square",backendName:"webgl",kernelFunc:Eee({opSnippet:"return x * x;"})},poe={kernelName:"SquaredDifference",backendName:"webgl",kernelFunc:See({opSnippet:"return (a - b) * (a - b);",packedOpSnippet:"return (a - b) * (a - b);"})},hoe={kernelName:"Step",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o="if (isnan(x)) return x;\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new oee(a.shape,o);return r.runWebGLProgram(i,[a],a.dtype)}},moe=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,o=y9(r.length),i=y9(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(o," begin = ").concat(o,"(").concat(t,");\n      ").concat(o," strides = ").concat(o,"(").concat(n,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")},goe={kernelName:"StridedSlice",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,f=a.newAxisMask,p=a.shrinkAxisMask,h=U$(o.shape,i,s,u,c,l,d,f,p),m=h.nonStrided,g=h.$begin,v=h.$strides,y=h.size,b=h.newShape,x=h.outShape,k=Dee({inputs:{x:o},backend:r,attrs:{shape:b}});if(m){var w=Fte({inputs:{x:k},backend:r,attrs:{begin:g,size:y}});t=Dee({inputs:{x:w},backend:r,attrs:{shape:x}}),r.disposeIntermediateTensorInfo(w)}else if(x.some((function(e){return 0===e})))t=r.makeTensorInfo(x,o.dtype,[]);else if(r.shouldExecuteOnCPU([k])){var I=r.texData.get(k.dataId).values,C=i$(k.shape,k.dtype,I),E=G9(x,C,v,g);t=r.makeTensorInfo(x,k.dtype,E.values)}else{var S=new moe(g,v,x);t=r.runWebGLProgram(S,[k],k.dtype)}var T=Dee({inputs:{x:t},backend:r,attrs:{shape:x}});return r.disposeIntermediateTensorInfo(k),r.disposeIntermediateTensorInfo(t),T}},voe={kernelName:"Tan",backendName:"webgl",kernelFunc:Eee({opSnippet:"return tan(x);"})},yoe={kernelName:"Tanh",backendName:"webgl",kernelFunc:Eee({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"})},boe=function e(t,n){_y(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var o=y9(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(t);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        setOutput(getA(").concat(i,"));\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function xoe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;if("string"===a.dtype){var i=n.readSync(a.dataId).map((function(e){return jQ(e)})),s=i$(a.shape,a.dtype,i),u=q9(s,o);return n.makeTensorInfo(u.shape,u.dtype,u.values)}var c=new boe(a.shape,o);return n.runWebGLProgram(c,[a],a.dtype)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
for(var koe={kernelName:"Tile",backendName:"webgl",kernelFunc:xoe},woe={kernelName:"TopK",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted,s=n.readSync(a.dataId),u=qy(X9(s,a.shape,a.dtype,o,i),2),c=u[0],l=u[1];return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}},Ioe=function e(t,n,r,a,o,i){_y(this,e),this.variableNames=["Image","Transforms"],this.outputShape=i;var s,u="nearest"===r?1:2;switch(a){case"constant":s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4;break;default:s=1}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")},Coe={kernelName:"Transform",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.transforms,i=r.interpolation,s=r.fillMode,u=r.fillValue,c=r.outputShape,l=qy(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],m=qy(null!=c?c:[f,p],2),g=m[0],v=m[1],y=new Ioe(f,p,i,s,u,[d,g,v,h]);return n.runWebGLProgram(y,[a,o],"float32")}},Eoe={kernelName:"Unique",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;U7(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var i=r.readSync(o.dataId),s=Y9(i,a,o.shape,o.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,o.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}},Soe={kernelName:"Unpack",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a,s=i.shape.length,u=a.shape[o],c=new Array(s-1),l=0,d=0;d<s;d++)d!==o&&(c[l++]=i.shape[d]);var f=[],p=new Array(s).fill(0),h=i.shape.slice();h[o]=1;for(var m=new Array(u),g=0;g<m.length;g++){p[o]=g;var v=Fte({inputs:{x:i},backend:n,attrs:{begin:p,size:h}}),y=Dee({inputs:{x:v},backend:n,attrs:{shape:c}});m[g]=y,f.push(v)}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},Toe=function e(t,n){_y(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.numSegments,s=i*Math.ceil(o/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));var f="";o%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(f,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")},Aoe=[Bre,Lre,Xee,Qee,Yee,$ee,ete,rte,ate,ote,dte,fte,pte,hte,gte,mte,vte,kte,xte,Cte,Ete,Ste,Nte,Dte,Bte,Wte,jte,Kte,Qte,yee,ane,mne,gne,lne,yne,bne,vne,xne,kne,Ine,Tne,Ane,_ne,Bne,Pne,Fne,Une,Wne,zne,jne,Hne,Gne,Xne,Yne,Zne,tre,ore,sre,cre,lre,pre,hre,mre,vre,bre,xre,kre,gee,wre,ene,Ire,Cre,Ere,kee,Sre,Tre,Are,_re,Nre,Rre,Ore,Fre,Vre,jre,zre,Kre,qre,Xre,Wre,Qre,Yre,$re,eae,tae,lae,Mee,fae,hae,gae,yae,Lte,xae,Iae,Cae,Aae,Nae,Cee,_ae,Oae,Vte,aae,Fae,Dae,Mae,Bee,Lae,Vae,zae,Hae,qae,Qae,Yae,$ae,Jae,toe,noe,roe,aoe,ooe,ioe,Mte,cae,soe,uoe,coe,loe,doe,foe,poe,hoe,goe,sae,Hee,voe,yoe,koe,woe,Coe,Kee,Eoe,Soe,{kernelName:"UnsortedSegmentSum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments,s=a.shape.length,u=[],c=0,l=OJ([c],s),d=a;null!=l&&(d=Gee({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(d),c=MJ(1,s)[0]);var f=$1(d.shape,c,i),p=$X([d.shape[c]]),h=Dee({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});u.push(h);var m=Dee({inputs:{x:function e(t,r,a,o,i){var s=t.shape[0],c=t.shape[1],l=Y1(c,i),d=new Toe({windowSize:l,inSize:c,batchSize:s,numSegments:i},r),f=n.compileAndRun(d,[t,a],o);if(u.push(f),f.shape[1]===i)return f;var p=Rae({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),h=xoe({inputs:{x:p},backend:n,attrs:{reps:[c/l]}});return u.push(p),u.push(h),e(f,r,h,o,i)}(h,"unsortedSegmentSum",o,lY(a.dtype),i)},backend:n,attrs:{shape:f}}),g=m;if(null!=l){u.push(m);var v=FJ(l);g=Gee({inputs:{x:g},backend:n,attrs:{perm:v}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},wae],Noe=0,_oe=Aoe
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */;Noe<_oe.length;Noe++){var Roe=_oe[Noe];PQ(Roe)}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Ooe=Q0,Foe=function(e){Dy(a,e);var t,n,r=Hy(a);function a(){var e;return _y(this,a),(e=r.call(this)).blockSize=48,e.firstUse=!0,e.data=new zX(zy(e),W$()),e}return Oy(a,[{key:"nextDataId",value:function(){return a.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,SQ().get("IS_NODE")&&V1("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&dQ(n[0])){var a=n.map((function(e){return zQ(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:(n=Ny(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?W1(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return jQ(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return i$(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return W$().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:(t=Ny(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=WQ(),t(),e.abrupt("return",{kernelMs:WQ()-n});case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){e4([e],"where");var t=this.readSync(e.dataId);return Ooe(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return Ky(By(a.prototype),"epsilon",this).call(this)}}]),a}(jX);Foe.nextDataId=0,
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
G$("cpu",(function(){return new Foe}),1);
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var Moe=w4("Elu",(function(e){return e>=0?e:Math.exp(e)-1})),Doe={kernelName:"Elu",backendName:"cpu",kernelFunc:Moe};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Boe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha;e4([a],"leakyRelu");for(var i=$X(a.shape),s=n.data.get(a.dataId).values,u=iQ("float32",i),c=0;c<s.length;c++)u[c]=s[c]<0?o*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var Poe={kernelName:"LeakyRelu",backendName:"cpu",kernelFunc:Boe},Loe=r4((function(e,t){return e<0?t*e:e}));
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Uoe(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;e4([r,a],"prelu");var o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=qy(Loe(r.shape,a.shape,o,i,r.dtype),2),u=s[0],c=s[1];return n.makeTensorInfo(c,r.dtype,u)}var Voe={kernelName:"Prelu",backendName:"cpu",kernelFunc:Uoe},Woe=w4("Relu",(function(e){return Math.max(0,e)})),zoe={kernelName:"Relu",backendName:"cpu",kernelFunc:Woe},joe=w4("Relu6",(function(e){return Math.min(Math.max(0,e),6)})),Hoe={kernelName:"Relu6",backendName:"cpu",kernelFunc:joe};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Goe(e,t,n,r,a){if("linear"===n)return s4({inputs:{x:t},backend:e});if("relu"===n)return Woe({inputs:{x:t},backend:e});if("elu"===n)return Moe({inputs:{x:t},backend:e});if("relu6"===n)return joe({inputs:{x:t},backend:e});if("prelu"===n)return Uoe({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return Boe({inputs:{x:t},backend:e,attrs:{alpha:a}});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Koe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=$X(a.shape),s=rQ(o,i),u=$X(s);qX(i===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old shape (").concat(a.shape,") has ").concat(i," elements. The new shape and old shape must have the same number of elements.")})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;l.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var qoe={kernelName:"Reshape",backendName:"cpu",kernelFunc:Koe};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Xoe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=r.transposeA,s=r.transposeB;e4([a,o],"matMul");var u=a.shape.length,c=o.shape.length,l=i?a.shape[u-2]:a.shape[u-1],d=s?o.shape[c-1]:o.shape[c-2],f=i?a.shape[u-1]:a.shape[u-2],p=s?o.shape[c-2]:o.shape[c-1],h=a.shape.slice(0,-2),m=o.shape.slice(0,-2),g=$X(h),v=$X(m);qX(u>=2&&c>=2&&(g===v||1===g||1===v),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (".concat(h,") and (").concat(m,").")}));var y=(g>v?a.shape.slice(0,-2):o.shape.slice(0,-2)).concat([f,p]);qX(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (").concat(d,") of Tensors with shapes ").concat(a.shape," and ").concat(o.shape," and transposeA=").concat(i," and transposeB=").concat(s," must match.")}));for(var b=s?[v,p,d]:[v,d,p],x=Koe({inputs:{x:a},backend:n,attrs:{shape:i?[g,l,f]:[g,f,l]}}),k=Koe({inputs:{x:o},backend:n,attrs:{shape:b}}),w=i?x.shape[1]:x.shape[2],I=i?x.shape[2]:x.shape[1],C=s?k.shape[1]:k.shape[2],E=Math.max(g,v),S=n.data.get(x.dataId).values,T=n.data.get(k.dataId).values,A=mQ(x.shape),N=mQ(k.shape),_=qy(i?[A[0],1,A[1]]:[A[0],A[1],1],3),R=_[0],O=_[1],F=_[2],M=qy(s?[1,N[1],N[0]]:[N[1],1,N[0]],3),D=M[0],B=M[1],P=M[2],L=I*C,U=i$([E,I,C],x.dtype),V=U.values,W=n.blockSize,z=0;z<E;z++)for(var j=0;j<I;j+=W)for(var H=0;H<C;H+=W)for(var G=0;G<w;G+=W)for(var K=Math.min(j+W,I),q=Math.min(H+W,C),X=Math.min(G+W,w),Q=j;Q<K;Q++)for(var Y=H;Y<q;Y++){for(var $=0,Z=G;Z<X;Z++){var J=Math.min(z,g-1)*R,ee=Math.min(z,v-1)*P;$+=S[J+Q*O+Z*F]*T[Z*D+Y*B+ee]}V[z*L+(Q*C+Y)]+=$}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(y,U.dtype,U.values)}var Qoe={kernelName:"BatchMatMul",backendName:"cpu",kernelFunc:Xoe},Yoe={kernelName:"_FusedMatMul",backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,o=e.backend,i=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,d=i.transposeA,f=i.transposeB,p=i.activation,h=i.leakyreluAlpha,m=[];t=Xoe({inputs:{a:s,b:u},attrs:{transposeA:d,transposeB:f},backend:o}),c&&(n=v4({inputs:{a:t,b:c},backend:o}),m.push(t),t=n),p&&(r=Goe(o,t,p,l,h),m.push(t),t=r);for(var g=0,v=m;g<v.length;g++){var y=v[g];o.disposeIntermediateTensorInfo(y)}return t}},$oe={kernelName:"Acos",backendName:"cpu",kernelFunc:w4("Acos",(function(e){return Math.acos(e)}))},Zoe={kernelName:"Acosh",backendName:"cpu",kernelFunc:w4("Acosh",(function(e){return Math.acosh(e)}))},Joe={kernelName:"AddN",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=t;e4(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),o=i$(r[0].shape,r[0].dtype),i=o.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<i.length;c++)i[c]+=u[c];return n.makeTensorInfo(o.shape,o.dtype,o.values)}},eie={kernelName:"All",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;e4(a,"all");var s=aQ(o,a.shape),u=s,c=OJ(u,a.shape.length),l=a;null!=c&&(l=n6({inputs:{x:a},backend:n,attrs:{perm:c}}),u=MJ(u.length,a.shape.length)),RJ("all",u,l.shape.length);for(var d=qy(NJ(l.shape,u),2),f=d[0],p=$X(d[1]),h=bQ($X(f),l.dtype),m=n.data.get(l.dataId).values,g=0;g<h.length;++g){for(var v=g*p,y=m[v],b=0;b<p;++b){var x=m[v+b];y=y&&x}h[g]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(f,l.dtype,h);if(i){var w=Koe({inputs:{x:k},backend:n,attrs:{shape:_J(f,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},tie={kernelName:"Any",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;e4(a,"any");var s=aQ(o,a.shape),u=s,c=OJ(u,a.shape.length),l=a;null!=c&&(l=n6({inputs:{x:a},backend:n,attrs:{perm:c}}),u=MJ(u.length,a.shape.length)),RJ("any",u,l.shape.length);for(var d=qy(NJ(l.shape,u),2),f=d[0],p=$X(d[1]),h=bQ($X(f),l.dtype),m=n.data.get(l.dataId).values,g=0;g<h.length;++g){for(var v=g*p,y=m[v],b=0;b<p;++b){var x=m[v+b];y=y||x}h[g]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(f,l.dtype,h);if(i){var w=Koe({inputs:{x:k},backend:n,attrs:{shape:_J(f,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},nie={kernelName:"ArgMax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;e4(a,"argMax");var i=aQ(o,a.shape),s=OJ(i,a.shape.length),u=a,c=[];null!=s&&(u=n6({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=MJ(i.length,u.shape.length)),RJ("argMax",i=[i[0]],u.shape.length);for(var l=qy(NJ(u.shape,i),2),d=l[0],f=l[1],p=bQ($X(d),"int32"),h=$X(f),m=n.data.get(u.dataId).values,g=0;g<p.length;++g){for(var v=g*h,y=m[v],b=0,x=0;x<h;++x){var k=m[v+x];k>y&&(y=k,b=x)}p[g]=b}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",p)}},rie={kernelName:"ArgMin",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;e4(a,"argMin");var i=aQ(o,a.shape),s=OJ(i,a.shape.length),u=a,c=[];null!=s&&(u=n6({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=MJ(i.length,u.shape.length)),RJ("argMin",i=[i[0]],u.shape.length);for(var l=qy(NJ(u.shape,i),2),d=l[0],f=l[1],p=bQ($X(d),"int32"),h=$X(f),m=n.data.get(u.dataId).values,g=0;g<p.length;++g){for(var v=g*h,y=m[v],b=0,x=0;x<h;++x){var k=m[v+x];k<y&&(y=k,b=x)}p[g]=b}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",p)}},aie={kernelName:"Asin",backendName:"cpu",kernelFunc:w4("Asin",(function(e){return Math.asin(e)}))},oie={kernelName:"Asinh",backendName:"cpu",kernelFunc:w4("Asinh",(function(e){return Math.asinh(e)}))},iie={kernelName:"Atan",backendName:"cpu",kernelFunc:w4("Atan",(function(e){return Math.atan(e)}))},sie={kernelName:"Atan2",backendName:"cpu",kernelFunc:p4("Atan2",r4((function(e,t){return Math.atan2(e,t)})))},uie={kernelName:"Atanh",backendName:"cpu",kernelFunc:w4("Atanh",(function(e){return Math.atanh(e)}))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function cie(e,t,n,r,a,o){for(var i=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,d=a.effectiveFilterWidth,f=a.padInfo.top,p=a.padInfo.left,h="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=i$(a.outShape,n),g=m.values,v=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var k=x*v,w=x*r[0],I=0;I<a.inChannels;++I)for(var C=0;C<a.outHeight;++C)for(var E=C*i-f,S=Math.max(0,E),T=Math.min(a.inHeight,l+E),A=k+C*y,N=0;N<a.outWidth;++N){for(var _=N*s-p,R=Math.max(0,_),O=Math.min(a.inWidth,d+_),F=h,M=0,D=0,B=S;B<T;B+=u){for(var P=w+B*r[1],L=R;L<O;L+=c){var U=e[P+L*r[2]+I];"max"===o&&U>F?F=U:"avg"===o&&(M+=U,D++)}if(isNaN(F))break}g[A+N*b+I]="avg"===o?M/D:F}return m}function lie(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=i$(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,m=i$(t,n,e),g=0;g<r.batchSize;++g)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.outHeight;++y){for(var b=y*s-p,x=b;x<0;)x+=c;for(var k=Math.min(r.inHeight,d+b),w=0;w<r.outWidth;++w){for(var I=w*u-h,C=I;C<0;)C+=l;for(var E=Math.min(r.inWidth,f+I),S=Number.NEGATIVE_INFINITY,T=-1,A=x;A<k;A+=c)for(var N=A-b,_=C;_<E;_+=l){var R=_-I,O=m.get(g,A,_,v);O>S&&(S=O,T=a?o?((g*r.inHeight+A)*r.inWidth+_)*r.inChannels+v:(A*r.inWidth+_)*r.inChannels+v:N*f+R)}i.set(T,g,y,w,v)}}return i}function die(e,t,n,r,a,o){for(var i=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,d=a.dilationWidth,f=a.effectiveFilterDepth,p=a.effectiveFilterHeight,h=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,v=a.padInfo.left,y="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=i$(a.outShape,n),x=b.values,k=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],I=a.outShape[3]*a.outShape[4],C=a.outShape[4],E=0;E<a.batchSize;++E)for(var S=E*k,T=E*r[0],A=0;A<a.inChannels;++A)for(var N=0;N<a.outDepth;++N){for(var _=N*i-m,R=_;R<0;)R+=c;for(var O=Math.min(a.inDepth,f+_),F=S+N*w,M=0;M<a.outHeight;++M){for(var D=M*s-g,B=D;B<0;)B+=l;for(var P=Math.min(a.inHeight,p+D),L=F+M*I,U=0;U<a.outWidth;++U){for(var V=U*u-v,W=V;W<0;)W+=d;for(var z=Math.min(a.inWidth,h+V),j=L+U*C,H=y,G=0,K=0,q=R;q<O;q+=c){for(var X=T+q*r[1],Q=B;Q<P;Q+=l){for(var Y=X+Q*r[2],$=W;$<z;$+=d){var Z=e[Y+$*r[3]+A];if("max"===o&&Z>H?H=Z:"avg"===o&&(G+=Z,K++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}x[j+A]="avg"===o?G/K:H}}}return b}var fie={kernelName:"AvgPool",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;e4(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;qX(xZ(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c,l=lZ(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&ZX(l.inShape,l.outShape))c=s4({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=mQ(a.shape),p=cie(d,a.shape,a.dtype,f,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return c}},pie={kernelName:"AvgPool3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;e4(a,"avgPool3d");var l=dZ(a.shape,o,i,1,s,u,c),d=die(n.data.get(a.dataId).values,a.shape,a.dtype,mQ(a.shape),l,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}},hie={kernelName:"AvgPool3DGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;e4([a,o],"avgPool3DGrad");for(var l=dZ(o.shape,i,s,1,u,c),d=l.strideDepth,f=l.strideHeight,p=l.strideWidth,h=l.filterDepth,m=l.filterHeight,g=l.filterWidth,v=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,k=l.effectiveFilterHeight,w=l.effectiveFilterWidth,I=x-1-l.padInfo.front,C=w-1-l.padInfo.left,E=k-1-l.padInfo.top,S=i$(o.shape,"float32"),T=1/(h*m*g),A=n.bufferSync(a),N=0;N<l.batchSize;++N)for(var _=0;_<l.inChannels;++_)for(var R=0;R<l.inDepth;++R)for(var O=0;O<l.inHeight;++O)for(var F=0;F<l.inWidth;++F){for(var M=R-I,D=O-E,B=F-C,P=0,L=0;L<x;L+=v){var U=(M+L)/d;if(!(U<0||U>=l.outDepth||Math.floor(U)!==U))for(var V=0;V<k;V+=y){var W=(D+V)/f;if(!(W<0||W>=l.outHeight||Math.floor(W)!==W))for(var z=0;z<w;z+=b){var j=(B+z)/p;j<0||j>=l.outWidth||Math.floor(j)!==j||(P+=A.get(N,U,W,j,_))}}}S.set(P*T,N,R,O,F,_)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}},mie={kernelName:"AvgPoolGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;e4([a,o],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=lZ(i.shape,s,u,1,c),d=l.strideHeight,f=l.strideWidth,p=l.filterHeight,h=l.filterWidth,m=l.dilationHeight,g=l.dilationWidth,v=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,x=v-1-l.padInfo.top,k=i$(i.shape,"float32"),w=1/(p*h),I=n.data.get(a.dataId).values,C=i$(a.shape,"float32",I),E=0;E<l.batchSize;++E)for(var S=0;S<l.inChannels;++S)for(var T=0;T<l.inHeight;++T)for(var A=0;A<l.inWidth;++A){for(var N=T-x,_=A-b,R=0,O=0;O<v;O+=m){var F=(N+O)/d;if(!(F<0||F>=l.outHeight||Math.floor(F)!==F))for(var M=0;M<y;M+=g){var D=(_+M)/f;D<0||D>=l.outWidth||Math.floor(D)!==D||(R+=C.get(E,F,D,S))}}k.set(R*w,E,T,A,S)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}},gie={kernelName:"FusedBatchNorm",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.scale,i=t.offset,s=t.mean,u=t.variance;qX(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),qX(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),qX(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),e4([a,s,u,o,i],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,f=n.data.get(u.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),h=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(l.length),g=h.length,v=p.length,y=f.length,b=d.length,x=0,k=0,w=0,I=0,C=0;C<l.length;++C)m[C]=h[x++]+(l[C]-d[k++])*p[w++]/Math.sqrt(f[I++]+c),x>=g&&(x=0),k>=b&&(k=0),w>=v&&(w=0),I>=y&&(I=0);return n.makeTensorInfo(a.shape,a.dtype,m)}},vie={kernelName:"BatchToSpaceND",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;e4([a],"batchToSpaceND");var s=o.reduce((function(e,t){return e*t})),u=D1(a.shape,o,s),c=B1(u.length,o.length),l=P1(a.shape,o,s),d=L1(i,o.length),f=U1(l,i,o.length),p=Koe({inputs:{x:a},backend:n,attrs:{shape:u}}),h=n6({inputs:{x:p},backend:n,attrs:{perm:c}}),m=Koe({inputs:{x:h},backend:n,attrs:{shape:l}}),g=l6({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}},yie={kernelName:"Bincount",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=b4(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,s)}},bie={kernelName:"ClipByValue",backendName:"cpu",kernelFunc:w4("ClipByValue",(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}))},xie={kernelName:"ComplexAbs",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array($X(t.shape)),a=n.data.get(t.dataId),o=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,s=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=0;c<s.length;c++){var l=s[c],d=u[c];r[c]=Math.hypot(l,d)}return n.makeOutput(r,t.shape,"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function kie(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var wie={kernelName:"Imag",backendName:"cpu",kernelFunc:kie};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Iie(e){var t=e.inputs,n=e.backend,r=aQ(e.attrs.axis,t[0].shape)[0],a=O1(t.map((function(e){return e.shape})),r);if(0===$X(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return $X(e.shape)>0}));if(1===o.length)return s4({inputs:{x:o[0]},backend:n});if(R1(o.map((function(e){return e.shape})),r),"complex64"===o[0].dtype){var i=o.map((function(e){return c4({inputs:{input:e},backend:n})})),s=o.map((function(e){return kie({inputs:{input:e},backend:n})})),u=Iie({inputs:i,backend:n,attrs:{axis:r}}),c=Iie({inputs:s,backend:n,attrs:{axis:r}}),l=a4({inputs:{real:u,imag:c},backend:n});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),l}var d=o.map((function(e){var t=$X(e.shape.slice(r));return Koe({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),f=d.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=O1(d.map((function(e){return e.shape})),1);var p=1===d[0].shape[0],h=S4(f,a,t[0].dtype,p),m=O1(o.map((function(e){return e.shape})),r),g=n.makeTensorInfo(m,t[0].dtype,h);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}var Cie={kernelName:"Concat",backendName:"cpu",kernelFunc:Iie};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Eie(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;e4([a,o],"conv2d");for(var d=kZ(u),f=fZ(a.shape,o.shape,i,c,s,l,!1,d),p=f.filterHeight,h=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,v=f.padInfo.left,y=f.padInfo.top,b="channelsLast"===f.dataFormat,x=new ZQ(f.outShape,a.dtype),k=mQ(a.shape),w=mQ(o.shape),I=k[0],C=b?k[1]:k[2],E=b?k[2]:1,S=b?1:k[1],T=x.strides[0],A=b?x.strides[1]:x.strides[2],N=b?x.strides[2]:1,_=b?1:x.strides[1],R=n.data.get(a.dataId).values,O=n.data.get(o.dataId).values,F=x.values,M=0;M<f.batchSize;++M)for(var D=M*I,B=M*T,P=0;P<f.outHeight;++P)for(var L=B+P*A,U=P*f.strideHeight-y,V=0;V<p;++V){var W=U+V*m;if(!(W<0||W>=f.inHeight))for(var z=V*w[0],j=D+W*C,H=0;H<f.outWidth;++H)for(var G=L+H*N,K=H*f.strideWidth-v,q=0;q<h;++q){var X=K+q*g;if(!(X<0||X>=f.inWidth))for(var Q=j+X*E,Y=z+q*w[1],$=0;$<f.inChannels;++$){for(var Z=R[Q+$*S],J=0;J<f.outChannels;++J)F[G+J*_]+=Z*O[Y+J];Y+=f.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,F)}var Sie={kernelName:"Conv2D",backendName:"cpu",kernelFunc:Eie},Tie={kernelName:"Conv2DBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;e4([a,o],"conv2dBackpropFilter");for(var d=kZ(u),f=fZ(a.shape,l,i,1,s,c,!1,d),p=f.strideHeight,h=f.strideWidth,m=f.filterHeight,g=f.filterWidth,v="channelsLast"===f.dataFormat,y=new ZQ(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,k=n.data.get(a.dataId).values,w=n.data.get(o.dataId).values,I=new ZQ(a.shape,a.dtype,k),C=new ZQ(o.shape,o.dtype,w),E=0;E<m;++E)for(var S=Math.max(0,Math.ceil((x-E)/p)),T=Math.min(f.outHeight,(f.inHeight+x-E)/p),A=0;A<g;++A)for(var N=Math.max(0,Math.ceil((b-A)/h)),_=Math.min(f.outWidth,(f.inWidth+b-A)/h),R=0;R<f.inChannels;++R)for(var O=0;O<f.outChannels;++O){for(var F=0,M=0;M<f.batchSize;++M)for(var D=S;D<T;++D)for(var B=E+D*p-x,P=N;P<_;++P){var L=A+P*h-b;F+=v?I.get(M,B,L,R)*C.get(M,D,P,O):I.get(M,R,B,L)*C.get(M,O,D,P)}y.set(F,E,A,R,O)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},Aie={kernelName:"Conv2DBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode;e4([a,o],"conv2dBackpropInput");var d=mQ(o.shape),f=mQ(a.shape),p=kZ(c),h=fZ(i,o.shape,s,1,u,l,!1,p),m=new ZQ(h.inShape,"float32"),g=m.values,v=n.data.get(a.dataId).values,y=n.data.get(o.dataId).values,b=qy(d,3),x=b[0],k=b[1],w=b[2],I=h.batchSize,C=h.filterHeight,E=h.filterWidth,S=h.inChannels,T=h.inHeight,A=h.inWidth,N=h.outChannels,_=h.outHeight,R=h.outWidth,O=h.strideHeight,F=h.strideWidth;p=h.dataFormat;for(var M=C-1-h.padInfo.top,D=E-1-h.padInfo.left,B="channelsLast"===p,P=m.strides[0],L=B?m.strides[1]:m.strides[2],U=B?m.strides[2]:1,V=B?1:m.strides[1],W=f[0],z=B?f[1]:f[2],j=B?f[2]:1,H=B?1:f[1],G=0;G<I;++G)for(var K=0;K<S;++K)for(var q=0;q<T;++q)for(var X=q-M,Q=Math.max(0,Math.ceil(X/O)),Y=Math.min(_,(C+X)/O),$=0;$<A;++$){for(var Z=$-D,J=Math.max(0,Math.ceil(Z/F)),ee=Math.min(R,(E+Z)/F),te=0,ne=Q;ne<Y;++ne)for(var re=ne*O-X,ae=J;ae<ee;++ae)for(var oe=W*G+z*ne+j*ae,ie=x*(C-1-re)+k*(E-1-(ae*F-Z))+w*K,se=0;se<N;++se)te+=v[oe+H*se]*y[ie+se];g[P*G+L*q+U*$+V*K]=te}return n.makeTensorInfo(m.shape,m.dtype,m.values)}},Nie={kernelName:"Conv3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations;e4([a,o],"conv3d");for(var c=pZ(a.shape,o.shape,i,u,s),l=c.filterDepth,d=c.filterHeight,f=c.filterWidth,p=c.dilationDepth,h=c.dilationHeight,m=c.dilationWidth,g=c.padInfo,v=g.front,y=g.left,b=g.top,x=new ZQ(c.outShape,a.dtype),k=n.data.get(a.dataId).values,w=n.data.get(o.dataId).values,I=x.values,C=mQ(a.shape),E=mQ(o.shape),S=0;S<c.batchSize;++S)for(var T=S*C[0],A=S*x.strides[0],N=0;N<c.outDepth;++N)for(var _=A+N*x.strides[1],R=N*c.strideDepth-v,O=0;O<l;++O){var F=R+O*p;if(!(F<0||F>=c.inDepth))for(var M=O*E[0],D=T+F*C[1],B=0;B<c.outHeight;++B)for(var P=_+B*x.strides[2],L=B*c.strideHeight-b,U=0;U<d;++U){var V=L+U*h;if(!(V<0||V>=c.inHeight))for(var W=M+U*E[1],z=D+V*C[2],j=0;j<c.outWidth;++j)for(var H=P+j*c.outChannels,G=j*c.strideWidth-y,K=0;K<f;++K){var q=G+K*m;if(!(q<0||q>=c.inWidth))for(var X=W+K*E[2],Q=z+q*c.inChannels,Y=X,$=0;$<c.inChannels;++$){for(var Z=k[Q+$],J=0;J<c.outChannels;++J)I[H+J]+=Z*w[Y+J];Y+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}},_ie={kernelName:"Conv3DBackpropFilterV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.filterShape;e4([a,o],"conv3dBackpropFilterV2");for(var c=mQ(a.shape),l=mQ(o.shape),d=pZ(a.shape,u,i,1,s),f=d.strideDepth,p=d.strideHeight,h=d.strideWidth,m=d.filterDepth,g=d.filterHeight,v=d.filterWidth,y=new ZQ(d.filterShape,"float32"),b=y.values,x=qy(y.strides,4),k=x[0],w=x[1],I=x[2],C=x[3],E=n.data.get(o.dataId).values,S=qy(l,4),T=S[0],A=S[1],N=S[2],_=S[3],R=n.data.get(a.dataId).values,O=qy(c,4),F=O[0],M=O[1],D=O[2],B=O[3],P=d.padInfo.front,L=d.padInfo.left,U=d.padInfo.top,V=0;V<m;++V)for(var W=Math.max(0,Math.ceil((P-V)/f)),z=Math.min(d.outDepth,(d.inDepth+P-V)/f),j=V*k,H=0;H<g;++H)for(var G=Math.max(0,Math.ceil((U-H)/p)),K=Math.min(d.outHeight,(d.inHeight+U-H)/p),q=H*w+j,X=0;X<v;++X)for(var Q=Math.max(0,Math.ceil((L-X)/h)),Y=Math.min(d.outWidth,(d.inWidth+L-X)/h),$=X*I+q,Z=0;Z<d.inChannels;++Z)for(var J=Z*C+$,ee=0;ee<d.outChannels;++ee){for(var te=0,ne=0;ne<d.batchSize;++ne)for(var re=ne*F,ae=ne*T,oe=W;oe<z;++oe)for(var ie=(V+oe*f-P)*M+re,se=oe*A+ae,ue=G;ue<K;++ue)for(var ce=(H+ue*p-U)*D+ie,le=ue*N+se,de=Q;de<Y;++de){var fe=de*_+le;te+=R[(X+de*h-L)*B+ce+Z]*E[fe+ee]}b[J+ee]=te}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},Rie={kernelName:"Conv3DBackpropInputV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,u=r.inputShape;e4([a],"conv3dBackpropInputV2");for(var c=mQ(a.shape),l=mQ(o.shape),d=pZ(u,o.shape,s,1,i),f=new ZQ(d.inShape,"float32"),p=f.values,h=qy(f.strides,4),m=h[0],g=h[1],v=h[2],y=h[3],b=n.data.get(a.dataId).values,x=qy(c,4),k=x[0],w=x[1],I=x[2],C=x[3],E=n.data.get(o.dataId).values,S=qy(l,4),T=S[0],A=S[1],N=S[2],_=S[3],R=d.batchSize,O=d.filterDepth,F=d.filterHeight,M=d.filterWidth,D=d.inChannels,B=d.inDepth,P=d.inHeight,L=d.inWidth,U=d.outChannels,V=d.outDepth,W=d.outHeight,z=d.outWidth,j=d.strideDepth,H=d.strideHeight,G=d.strideWidth,K=O-1-d.padInfo.front,q=F-1-d.padInfo.top,X=M-1-d.padInfo.left,Q=0;Q<R;++Q)for(var Y=0;Y<D;++Y)for(var $=0;$<B;++$)for(var Z=$-K,J=Math.max(0,Math.ceil(Z/j)),ee=Math.min(V,(O+Z)/j),te=0;te<P;++te)for(var ne=te-q,re=Math.max(0,Math.ceil(ne/H)),ae=Math.min(W,(F+ne)/H),oe=0;oe<L;++oe){for(var ie=oe-X,se=Math.max(0,Math.ceil(ie/G)),ue=Math.min(z,(M+ie)/G),ce=0,le=J;le<ee;++le)for(var de=le*j-Z,fe=re;fe<ae;++fe)for(var pe=fe*H-ne,he=se;he<ue;++he)for(var me=k*Q+w*le+I*fe+C*he,ge=T*(O-1-de)+A*(F-1-pe)+N*(M-1-(he*G-ie))+_*Y,ve=0;ve<U;++ve)ce+=b[me+ve]*E[ge+ve];p[m*Q+g*$+v*te+y*oe+Y]=ce}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},Oie={kernelName:"Cos",backendName:"cpu",kernelFunc:w4("Cos",(function(e){return Math.cos(e)}))},Fie={kernelName:"Cosh",backendName:"cpu",kernelFunc:w4("Cosh",(function(e){return Math.cosh(e)}))},Mie={kernelName:"CropAndResize",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=qy(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],m=o.shape[0],g=qy(s,2),v=g[0],y=g[1],b=i$([m,v,y,h],"float32"),x=n.data.get(o.dataId).values,k=n.data.get(i.dataId).values,w=n.data.get(a.dataId).values,I=mQ(a.shape),C=mQ(b.shape),E=0;E<m;E++){var S=4*E,T=x[S],A=x[S+1],N=x[S+2],_=x[S+3],R=k[E];if(!(R>=d))for(var O=v>1?(N-T)*(f-1)/(v-1):0,F=y>1?(_-A)*(p-1)/(y-1):0,M=0;M<v;M++){var D=v>1?T*(f-1)+M*O:.5*(T+N)*(f-1);if(D<0||D>f-1)for(var B=0;B<y;B++)for(var P=0;P<h;P++){var L=P+B*C[2]+M*C[1]+E*C[0];b.values[L]=c}else if("bilinear"===u)for(var U=Math.floor(D),V=Math.ceil(D),W=D-U,z=0;z<y;z++){var j=y>1?A*(p-1)+z*F:.5*(A+_)*(p-1);if(j<0||j>p-1)for(var H=0;H<h;H++){var G=H+z*C[2]+M*C[1]+E*C[0];b.values[G]=c}else for(var K=Math.floor(j),q=Math.ceil(j),X=j-K,Q=0;Q<h;Q++){var Y=Q+K*I[2]+U*I[1]+R*I[0],$=w[Y],Z=w[Y=Q+q*I[2]+U*I[1]+R*I[0]],J=w[Y=Q+K*I[2]+V*I[1]+R*I[0]],ee=$+(Z-$)*X,te=J+(w[Y=Q+q*I[2]+V*I[1]+R*I[0]]-J)*X;Y=Q+z*C[2]+M*C[1]+E*C[0],b.values[Y]=ee+(te-ee)*W}}else for(var ne=0;ne<y;++ne){var re=y>1?A*(p-1)+ne*F:.5*(A+_)*(p-1);if(re<0||re>p-1)for(var ae=0;ae<h;ae++){var oe=ae+ne*C[2]+M*C[1]+E*C[0];b.values[oe]=c}else for(var ie=Math.round(re),se=Math.round(D),ue=0;ue<h;ue++){var ce=ue+ie*I[2]+se*I[1]+R*I[0],le=ue+ne*C[2]+M*C[1]+E*C[0];b.values[le]=w[ce]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},Die={kernelName:"Cumsum",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;e4(a,"cumsum");var u=OJ([o],a.shape.length),c=a;null!=u&&(c=n6({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=MJ(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=cY(c.dtype,"int32"),f=bQ($X(c.shape),d),p=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},g=0;g<p.length;g+=h)for(var v=0;v<h;v++){var y=m(g,v);if(0===v)f[y]=i?0:p[y];else{var b=m(g,v-1);f[y]=i?p[b]+f[b]:p[y]+f[b]}}var x=n.makeTensorInfo(c.shape,d,f);if(null!=u){var k=n6({inputs:{x:x},backend:n,attrs:{perm:FJ(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),k}return x}},Bie={kernelName:"DenseBincount",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=b4(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}if(2===a.shape.length){var c=x4(n.bufferSync(a),n.bufferSync(o),i,s);return n.makeTensorInfo(c.shape,o.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}},Pie={kernelName:"DepthToSpace",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;qX("NHWC"===i,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i)})),qX(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],d=u*o,f=c*o,p=l/(o*o),h=n.data.get(a.dataId).values,m=new Float32Array(s*d*f*p),g=0,v=0;v<s;++v)for(var y=0;y<d;++y)for(var b=Math.floor(y/o),x=y%o,k=0;k<f;++k)for(var w=Math.floor(k/o),I=(x*o+k%o)*p,C=0;C<p;++C){var E=C+I+l*(w+c*(b+u*v));m[g++]=h[E]}return n.makeTensorInfo([s,d,f,p],a.dtype,m)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Lie(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;e4([a,o],"depthwiseConv2DNative");var l=mQ(a.shape),d=mQ(o.shape),f=u;null==f&&(f=[1,1]),qX(xZ(i,f),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(f,"'")}));for(var p=fZ(a.shape,o.shape,i,f,s,c,!0),h=p.filterHeight,m=p.filterWidth,g=p.dilationHeight,v=p.dilationWidth,y=p.padInfo,b=y.left,x=y.top,k=p.outChannels/p.inChannels,w=new ZQ(p.outShape,a.dtype),I=n.data.get(a.dataId).values,C=n.data.get(o.dataId).values,E=w.values,S=0;S<p.batchSize;++S)for(var T=S*l[0],A=S*w.strides[0],N=0;N<p.outHeight;++N)for(var _=A+N*w.strides[1],R=N*p.strideHeight-b,O=0;O<h;++O){var F=R+O*g;if(!(F<0||F>=p.inHeight))for(var M=O*d[0],D=T+F*l[1],B=0;B<p.outWidth;++B)for(var P=_+B*w.strides[2],L=B*p.strideWidth-x,U=0;U<m;++U){var V=L+U*v;if(!(V<0||V>=p.inWidth))for(var W=M+U*d[1],z=D+V*p.inChannels,j=P,H=W,G=0;G<p.inChannels;++G){for(var K=I[z+G],q=0;q<k;++q)E[j+q]+=K*C[H+q];j+=k,H+=k}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var Uie={kernelName:"DepthwiseConv2dNative",backendName:"cpu",kernelFunc:Lie},Vie={kernelName:"DepthwiseConv2dNativeBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;e4([a,o],"depthwiseConv2dNativeBackpropFilter");for(var d=fZ(a.shape,l,i,s,u,c,!0),f=d.strideHeight,p=d.strideWidth,h=d.filterHeight,m=d.filterWidth,g=new ZQ(d.filterShape,"float32"),v=d.padInfo.left,y=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(a.dataId).values,k=new ZQ(a.shape,a.dtype,x),w=n.data.get(o.dataId).values,I=new ZQ(o.shape,o.dtype,w),C=0;C<h;++C)for(var E=Math.max(0,Math.ceil((y-C)/f)),S=Math.min(d.outHeight,(d.inHeight+y-C)/f),T=0;T<m;++T)for(var A=Math.max(0,Math.ceil((v-T)/p)),N=Math.min(d.outWidth,(d.inWidth+v-T)/p),_=0;_<d.outChannels;++_){for(var R=Math.trunc(_/b),O=_%b,F=0,M=0;M<d.batchSize;++M)for(var D=E;D<S;++D)for(var B=C+D*f-y,P=A;P<N;++P){var L=T+P*p-v;F+=k.get(M,B,L,R)*I.get(M,D,P,_)}g.set(F,C,T,R,O)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}},Wie={kernelName:"DepthwiseConv2dNativeBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape;e4([a,o],"depthwiseConv2DNativeBackpropInput");for(var d=mQ(a.shape),f=mQ(o.shape),p=fZ(l,o.shape,i,s,u,c,!0),h=new ZQ(p.inShape,"float32"),m=h.values,g=qy(h.strides,3),v=g[0],y=g[1],b=g[2],x=n.data.get(a.dataId).values,k=qy(d,3),w=k[0],I=k[1],C=k[2],E=n.data.get(o.dataId).values,S=qy(f,3),T=S[0],A=S[1],N=S[2],_=p.batchSize,R=p.filterHeight,O=p.filterWidth,F=p.inChannels,M=p.inHeight,D=p.inWidth,B=p.outChannels,P=p.outHeight,L=p.outWidth,U=p.strideHeight,V=p.strideWidth,W=R-1-p.padInfo.top,z=O-1-p.padInfo.left,j=B/F,H=0;H<_;++H)for(var G=0;G<F;++G)for(var K=0;K<M;++K)for(var q=K-W,X=Math.max(0,Math.ceil(q/U)),Q=Math.min(P,(R+q)/U),Y=0;Y<D;++Y){for(var $=Y-z,Z=Math.max(0,Math.ceil($/V)),J=Math.min(L,(O+$)/V),ee=0,te=X;te<Q;++te)for(var ne=te*U-q,re=Z;re<J;++re)for(var ae=w*H+I*te+C*re,oe=T*(R-1-ne)+A*(O-1-(re*V-$))+N*G,ie=0;ie<j;++ie)ee+=x[ae+(G*j+ie)]*E[oe+ie];m[v*H+y*K+b*Y+G]=ee}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},zie={kernelName:"Diag",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=$X(r.shape),o=n.data.get(r.dataId).values,i=i$([a,a],r.dtype),s=i.values,u=0;u<o.length;u++)s[u*a+u]=o[u];var c=[].concat(Xy(r.shape),Xy(r.shape));return n.makeTensorInfo(c,i.dtype,i.values)}},jie={kernelName:"Dilation2D",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,d=a.shape.length,f=c.data.get(o.dataId).values,p=o.shape.length,h=cZ(a.shape,o.shape,i,s,"NHWC",u),m=h.batchSize,g=h.inHeight,v=h.inWidth,y=h.inChannels,b=h.outHeight,x=h.outWidth,k=h.padInfo,w=h.strideHeight,I=h.strideWidth,C=h.filterHeight,E=h.filterWidth,S=h.dilationHeight,T=h.dilationWidth,A=h.outShape,N=$X(A),_=A.length,R=sQ(a.dtype,N),O=0;O<m;++O)for(var F=0;F<b;++F)for(var M=F*w-k.top,D=0;D<x;++D)for(var B=D*I-k.left,P=0;P<y;++P){for(var L=Number.MIN_SAFE_INTEGER,U=0;U<C;++U){var V=M+U*S;if(V>=0&&V<g)for(var W=0;W<E;++W){var z=B+W*T;if(z>=0&&z<v){var j=wQ([O,V,z,P],d,mQ(a.shape)),H=wQ([U,W,P],p,mQ(o.shape)),G=l[j]+f[H];G>L&&(L=G)}}}R[wQ([O,F,D,P],_,mQ(A))]=L}return{dataId:c.write(VQ(R,a.dtype),A,a.dtype),shape:A,dtype:a.dtype}}},Hie={kernelName:"Dilation2DBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=vQ(a.shape,l.data.get(a.dataId).values),f=vQ(o.shape,l.data.get(o.dataId).values),p=cZ(a.shape,o.shape,s,u,"NHWC",c),h=p.batchSize,m=p.inHeight,g=p.inWidth,v=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,k=p.strideHeight,w=p.strideWidth,I=p.filterHeight,C=p.filterWidth,E=p.dilationHeight,S=p.dilationWidth,T=p.outShape;qX(i.rank===T.length,(function(){return"Error in Dilation2DBackpropFilter, dy must have the same rank as output ".concat(T.length,", but got ").concat(i.rank)}));for(var A=vQ(T,l.data.get(i.dataId).values),N=xQ(o.shape,o.dtype),_=0;_<h;++_)for(var R=0;R<y;++R)for(var O=R*k-x.top,F=0;F<b;++F)for(var M=F*w-x.left,D=0;D<v;++D){for(var B=Number.MIN_SAFE_INTEGER,P=0,L=0,U=0;U<I;++U){var V=O+U*E;if(V>=0&&V<m)for(var W=0;W<C;++W){var z=M+W*S;if(z>=0&&z<g){var j=d[_][V][z][D]+f[U][W][D];j>B&&(B=j,P=U,L=W)}}}N[P][L][D]+=A[_][R][F][D]}return{dataId:l.write(VQ(N,a.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},Gie={kernelName:"Dilation2DBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=vQ(a.shape,l.data.get(a.dataId).values),f=vQ(o.shape,l.data.get(o.dataId).values),p=cZ(a.shape,o.shape,s,u,"NHWC",c),h=p.batchSize,m=p.inHeight,g=p.inWidth,v=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,k=p.strideHeight,w=p.strideWidth,I=p.filterHeight,C=p.filterWidth,E=p.dilationHeight,S=p.dilationWidth,T=p.outShape;qX(i.rank===T.length,(function(){return"Error in Dilation2DBackpropInput, dy must have the same rank as output ".concat(T.length,", but got ").concat(i.rank)}));for(var A=vQ(T,l.data.get(i.dataId).values),N=xQ(a.shape,a.dtype),_=0;_<h;++_)for(var R=0;R<y;++R)for(var O=R*k-x.top,F=0;F<b;++F)for(var M=F*w-x.left,D=0;D<v;++D){for(var B=Number.MIN_SAFE_INTEGER,P=O<0?0:O,L=M<0?0:M,U=0;U<I;++U){var V=O+U*E;if(V>=0&&V<m)for(var W=0;W<C;++W){var z=M+W*S;if(z>=0&&z<g){var j=d[_][V][z][D]+f[U][W][D];j>B&&(B=j,P=V,L=z)}}}N[_][P][L][D]+=A[_][R][F][D]}return{dataId:l.write(VQ(N,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},Kie={kernelName:"EluGrad",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;e4([r,a],"eluGrad");for(var o=new Float32Array($X(a.shape)),i=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<i.length;++u){var c=i[u];o[u]=c>=1?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",o)}},qie=p4("Equal",r4((function(e,t){return e===t?1:0})),null,"bool"),Xie={kernelName:"Equal",backendName:"cpu",kernelFunc:qie},Qie={kernelName:"Erf",backendName:"cpu",kernelFunc:w4("Erf",(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))}))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Yie(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,o=r.dim,i=a.shape.length,s=a.shape.slice(),u=o;return o<0&&(qX(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+o+1),s.splice(u,0,1),Koe({inputs:{x:a},backend:n,attrs:{shape:s}})}var $ie={kernelName:"ExpandDims",backendName:"cpu",kernelFunc:Yie},Zie=p4("RealDiv",r4((function(e,t){return e/t}))),Jie={kernelName:"RealDiv",backendName:"cpu",kernelFunc:Zie};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function ese(e,t,n){for(var r=e.shape,a=r[0],o=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,c=[a,o],l=$X(c),d=iQ("float32",l),f=iQ("float32",l),p=0;p<a;p++){for(var h=l6({inputs:{x:s},backend:n,attrs:{begin:[p,0],size:[1,o]}}),m=l6({inputs:{x:u},backend:n,attrs:{begin:[p,0],size:[1,o]}}),g=a4({inputs:{real:h,imag:m},backend:n}),v=tse(g,t,n),y=W1(v.real,v.imag),b=0;b<o;b++){var x=G1(y,b);d[p*o+b]=x.real,f[p*o+b]=x.imag}n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g)}var k=n.makeTensorInfo(c,"float32",d),w=n.makeTensorInfo(c,"float32",f),I=a4({inputs:{real:k,imag:w},backend:n});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(w),I}function tse(e,t,n){var r,a=$X(e.shape),o=n.data.get(e.dataId),i=n.data.get(o.complexTensorInfos.real.dataId).values,s=n.data.get(o.complexTensorInfos.imag.dataId).values;if(0==((r=a)&r-1)){var u=nse(i,s,a,t,n),c=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(c,"float32",u.real),d=n.makeTensorInfo(c,"float32",u.imag),f=n.makeTensorInfo([],"float32",UQ(a,"float32")),p=s4({inputs:{x:f},backend:n}),h=Jie.kernelFunc({inputs:{a:l,b:f},backend:n}),m=Jie.kernelFunc({inputs:{a:d,b:p},backend:n}),g=n.data.get(h.dataId).values,v=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),{real:g,imag:v}}return u}return z1(function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var o=0,i=0,s=0;s<t;s++){var u=X1(a*s,t,n),c=G1(e,s);o+=c.real*u.real-c.imag*u.imag,i+=c.real*u.imag+c.imag*u.real}n&&(o/=t,i/=t),K1(r,o,i,a)}return r}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(W1(i,s),a,t))}function nse(e,t,n,r,a){if(1===n)return{real:e,imag:t};var o=W1(e,t),i=n/2,s=j1(o),u=s.real,c=s.imag,l=[u.length],d=a.makeTensorInfo(l,"float32",u),f=a.makeTensorInfo(l,"float32",c),p=a4({inputs:{real:d,imag:f},backend:a}),h=H1(o),m=h.real,g=h.imag,v=[m.length],y=a.makeTensorInfo(v,"float32",m),b=a.makeTensorInfo(v,"float32",g),x=a4({inputs:{real:y,imag:b},backend:a}),k=nse(u,c,i,r,a),w=k.real,I=k.imag,C=[w.length],E=a.makeTensorInfo(C,"float32",w),S=a.makeTensorInfo(C,"float32",I),T=a4({inputs:{real:E,imag:S},backend:a}),A=nse(m,g,i,r,a),N=A.real,_=A.imag,R=[N.length],O=a.makeTensorInfo(R,"float32",N),F=a.makeTensorInfo(R,"float32",_),M=a4({inputs:{real:O,imag:F},backend:a}),D=q1(n,r),B=[D.real.length],P=a.makeTensorInfo(B,"float32",D.real),L=a.makeTensorInfo(B,"float32",D.imag),U=a4({inputs:{real:P,imag:L},backend:a}),V=Q4({inputs:{a:U,b:M},backend:a}),W=v4({inputs:{a:T,b:V},backend:a}),z=g6({inputs:{a:T,b:V},backend:a}),j=c4({inputs:{input:W},backend:a}),H=c4({inputs:{input:z},backend:a}),G=kie({inputs:{input:W},backend:a}),K=kie({inputs:{input:z},backend:a}),q=Iie({inputs:[j,H],backend:a,attrs:{axis:0}}),X=Iie({inputs:[G,K],backend:a,attrs:{axis:0}}),Q=a.data.get(q.dataId).values,Y=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(X),{real:Q,imag:Y}}var rse={kernelName:"FFT",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=$X(r.shape),o=r.shape[r.shape.length-1],i=Koe({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=ese(i,!1,n),u=Koe({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function ase(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype||fQ(a),i=sQ(o,$X(r));return function(e,t,n){e.fill(t)}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(i,a),t.makeTensorInfo(r,o,i)}var ose={kernelName:"Fill",backendName:"cpu",kernelFunc:ase},ise={kernelName:"FlipLeftRight",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,o=iQ(r.dtype,$X(r.shape)),i=qy(r.shape,4),s=i[0],u=i[1],c=i[2],l=i[3],d=a.data.get(r.dataId).values,f=0;f<s;f++)for(var p=f*c*u*l,h=0;h<u;h++)for(var m=h*(c*l),g=0;g<c;g++)for(var v=g*l,y=0;y<l;y++){var b=[s,h,g,y][2],x=Math.round(c-b),k=p+m+v+y,w=d[k];x>=0&&x<c&&(w=d[p+m+x*l+y]),o[k]=w}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},sse={kernelName:"FloorDiv",backendName:"cpu",kernelFunc:p4("FloorDiv",r4((function(e,t){return Math.floor(e/t)})),null,"int32")},use={kernelName:"FusedConv2D",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=Eie({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(i){var g=m;m=v4({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(p){var v=m;m=Goe(n,m,p,s,h),n.disposeIntermediateTensorInfo(v)}return m}},cse={kernelName:"FusedDepthwiseConv2D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=Lie({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(i){var g=m;m=v4({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(p){var v=m;m=Goe(n,m,p,s,h),n.disposeIntermediateTensorInfo(v)}return m}},lse={kernelName:"GatherNd",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=$X(r.shape),i=a.shape,s=i[i.length-1],u=qy(x$(r,a),4),c=u[0],l=u[1],d=u[2],f=u[3];if(0===l)return n.makeTensorInfo(c,r.dtype,[]);for(var p=i$([l,d],r.dtype),h=n.data.get(a.dataId).values,m=n.data.get(r.dataId).values,g=0;g<l;g++){for(var v=[],y=0,b=0;b<s;b++){var x=h[g*s+b];y+=x*f[b],v.push(x)}if(y<0||y>=o/d)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(r.shape));for(var k=0;k<d;k++)p.values[g*d+k]=m[y*d+k]}return n.makeTensorInfo(c,p.dtype,p.values)}},dse={kernelName:"GatherV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims;e4([a,o],"gatherV2");var u=s;null==s&&(u=0);var c=$X(o.shape),l=Z1(a,o,aQ(i,a.shape)[0],u),d=Koe({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),f=Koe({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}}),p=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize],h=n.bufferSync(f),m=M4(n.bufferSync(d),h,p);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.makeTensorInfo(l.outputShape,m.dtype,m.values)}},fse={kernelName:"GreaterEqual",backendName:"cpu",kernelFunc:p4("GreaterEqual",r4((function(e,t){return e>=t?1:0})),null,"bool")},pse={kernelName:"IFFT",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=t.input,a=$X(r.shape),o=r.shape[r.shape.length-1],i=Koe({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=ese(i,!0,n),u=Koe({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}},hse={kernelName:"IsFinite",backendName:"cpu",kernelFunc:w4("IsFinite",(function(e){return Number.isFinite(e)?1:0}),"bool")},mse={kernelName:"IsInf",backendName:"cpu",kernelFunc:w4("IsInf",(function(e){return Math.abs(e)===1/0?1:0}),"bool")},gse={kernelName:"IsNan",backendName:"cpu",kernelFunc:w4("IsNan",(function(e){return Number.isNaN(e)?1:0}),"bool")},vse={kernelName:"LessEqual",backendName:"cpu",kernelFunc:p4("LessEqual",r4((function(e,t){return e<=t?1:0})),null,"bool")},yse={kernelName:"LinSpace",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.backend,n=e.attrs,r=U4(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},bse={kernelName:"Log1p",backendName:"cpu",kernelFunc:w4("Log1p",(function(e){return Math.log1p(e)}))},xse={kernelName:"LogicalAnd",backendName:"cpu",kernelFunc:p4("LogicalAnd",r4((function(e,t){return e&&t})),null,"bool")},kse={kernelName:"LogicalNot",backendName:"cpu",kernelFunc:w4("LogicalNot",(function(e){return e?0:1}),"bool")},wse={kernelName:"LogicalOr",backendName:"cpu",kernelFunc:p4("LogicalOr",r4((function(e,t){return e||t})),null,"bool")},Ise={kernelName:"LRN",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta;e4(a,"LRN");var c=a.shape[3],l=c-1,d=n.data.get(a.dataId).values,f=$X(a.shape),p=new Float32Array(f);function h(e){for(var t=e%c,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,l),a=0;n<=r;n++){var i=d[n];a+=i*i}return a}for(var m=0;m<f;m++){var g=h(m),v=d[m]*Math.pow(i+s*g,-u);p[m]=v}return n.makeTensorInfo(a.shape,a.dtype,p)}},Cse={kernelName:"LRNGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;e4(i,"LRNGrad");for(var d=$X(i.shape),f=i.shape[3],p=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,m=n.data.get(o.dataId).values,g=new Float32Array(d),v=d,y=0;y<v;y++){for(var b=y%f,x=y-b+Math.max(0,b-s),k=y-b+Math.min(f,b+s+1),w=0,I=x;I<k;I++)w+=Math.pow(h[I],2);w=c*w+u;for(var C=x;C<k;C++){var E=-2*c*l*h[C]*m[y]/w;y===C&&(E+=Math.pow(w,-l)),E*=p[y],g[C]+=E}}return n.makeTensorInfo(i.shape,a.dtype,g)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Ese(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,i=r.keepDims,s=n,u=a.shape,c=u.length,l=aQ(o,u),d=l,f=OJ(d,c),p=s.data.get(a.dataId).values;if(null!=f){for(var h=new Array(c),m=0;m<h.length;m++)h[m]=u[f[m]];p=t6(p,u,a.dtype,f,h),d=MJ(d.length,c),u=h}e4(a,"max"),RJ("max",d,c);var g=qy(NJ(u,d),2),v=g[0],y=z4(p,$X(g[1]),v,a.dtype),b=s.write(y,v,a.dtype),x=v;return i&&(x=_J(v,l)),{dataId:b,shape:x,dtype:a.dtype}}var Sse={kernelName:"Max",backendName:"cpu",kernelFunc:Ese},Tse={kernelName:"MaxPool",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;e4(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;qX(xZ(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c,l=lZ(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&ZX(l.inShape,l.outShape))c=s4({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=mQ(a.shape),p=cie(d,a.shape,a.dtype,f,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return c}},Ase={kernelName:"MaxPool3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;e4(a,"maxPool3d");var l=dZ(a.shape,o,i,1,s,u,c),d=die(n.data.get(a.dataId).values,a.shape,a.dtype,mQ(a.shape),l,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}},Nse={kernelName:"MaxPool3DGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;e4([a,o],"maxPool3DGrad");for(var l=dZ(o.shape,i,s,1,u,c),d=function(e,t){for(var n=i$(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var v=0;v<t.outDepth;++v){for(var y=v*r-f,b=y;b<0;)b+=i;for(var x=Math.min(t.inDepth,c+y),k=0;k<t.outHeight;++k){for(var w=k*a-p,I=w;I<0;)I+=s;for(var C=Math.min(t.inHeight,l+w),E=0;E<t.outWidth;++E){for(var S=E*o-h,T=S;T<0;)T+=u;for(var A=Math.min(t.inWidth,d+S),N=Number.NEGATIVE_INFINITY,_=-1,R=b;R<x;R+=i)for(var O=R-y,F=I;F<C;F+=s)for(var M=F-w,D=T;D<A;D+=u){var B=D-S,P=e.get(m,R,F,D,g);P>=N&&(N=P,_=O*l*d+M*l+B)}n.set(_,m,v,k,E,g)}}}return n}(n.bufferSync(o),l),f=l.strideDepth,p=l.strideHeight,h=l.strideWidth,m=l.dilationDepth,g=l.dilationHeight,v=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,k=y-1-l.padInfo.front,w=x-1-l.padInfo.left,I=b-1-l.padInfo.top,C=i$(o.shape,"float32"),E=n.bufferSync(a),S=0;S<l.batchSize;++S)for(var T=0;T<l.inChannels;++T)for(var A=0;A<l.inDepth;++A)for(var N=0;N<l.inHeight;++N)for(var _=0;_<l.inWidth;++_){for(var R=A-k,O=N-I,F=_-w,M=0,D=0;D<y;D+=m){var B=(R+D)/f;if(!(B<0||B>=l.outDepth||Math.floor(B)!==B))for(var P=0;P<b;P+=g){var L=(O+P)/p;if(!(L<0||L>=l.outHeight||Math.floor(L)!==L))for(var U=0;U<x;U+=v){var V=(F+U)/h;if(!(V<0||V>=l.outWidth||Math.floor(V)!==V)){var W=y*b*x-1-d.get(S,B,L,V,T)===D*b*x+P*x+U?1:0;0!==W&&(M+=E.get(S,B,L,V,T)*W)}}}}C.set(M,S,A,N,_,T)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}},_se={kernelName:"MaxPoolGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;e4([o,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=lZ(i.shape,s,u,1,c,l),f=n.data.get(i.dataId).values,p=i$(d.outShape,i.dtype,lie(f,i.shape,i.dtype,d).values),h=d.strideHeight,m=d.strideWidth,g=d.dilationHeight,v=d.dilationWidth,y=d.effectiveFilterHeight,b=d.effectiveFilterWidth,x=b-1-d.padInfo.left,k=y-1-d.padInfo.top,w=i$(i.shape,"float32"),I=n.data.get(a.dataId).values,C=i$(a.shape,"float32",I),E=0;E<d.batchSize;++E)for(var S=0;S<d.inChannels;++S)for(var T=0;T<d.inHeight;++T)for(var A=0;A<d.inWidth;++A){for(var N=T-k,_=A-x,R=0,O=0;O<y;O+=g){var F=(N+O)/h;if(!(F<0||F>=d.outHeight||Math.floor(F)!==F))for(var M=0;M<b;M+=v){var D=(_+M)/m;if(!(D<0||D>=d.outWidth||Math.floor(D)!==D)){var B=y*b-1-p.get(E,F,D,S)===O*b+M?1:0;0!==B&&(R+=C.get(E,F,D,S)*B)}}}w.set(R,E,T,A,S)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},Rse={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,i=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;e4(a,"MaxPoolWithArgmax");var l=c.data.get(a.dataId).values,d=lZ(a.shape,o,i,[1,1],s),f=qy(function(e,t,n,r,a){var o=cie(e,0,n,mQ(t),a,"max"),i=lie(e,t,n,a,!0,r);return[o.values,i.values]}(l,a.shape,a.dtype,u,d),2),p=f[0],h=f[1],m=c.write(p,d.outShape,a.dtype),g=c.write(h,d.outShape,a.dtype);return[{dataId:m,shape:d.outShape,dtype:a.dtype},{dataId:g,shape:d.outShape,dtype:"int32"}]}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Ose(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.axis,s=a.keepDims;e4(o,"sum");var u=(t="bool"===o.dtype?d4({inputs:{x:o},backend:r,attrs:{dtype:"int32"}}):s4({inputs:{x:o},backend:r})).shape.length,c=aQ(i,t.shape),l=OJ(c,u),d=c,f=t;null!=l&&(f=n6({inputs:{x:t},backend:r,attrs:{perm:l}}),d=MJ(d.length,u)),RJ("sum",d,f.shape.length);for(var p=qy(NJ(f.shape,d),2),h=p[0],m=p[1],g=i4(r,h,cY(f.dtype,"int32")),v=$X(m),y=r.data.get(g.dataId).values,b=r.data.get(f.dataId).values,x=0;x<y.length;++x){for(var k=x*v,w=0,I=0;I<v;++I)w+=b[k+I];y[x]=w}if(s){var C=g;g=Koe({inputs:{x:g},backend:r,attrs:{shape:_J(g.shape,c)}}),r.disposeIntermediateTensorInfo(C)}return r.disposeIntermediateTensorInfo(t),null!=l&&r.disposeIntermediateTensorInfo(f),g}var Fse={kernelName:"Sum",backendName:"cpu",kernelFunc:Ose},Mse={kernelName:"Mean",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=aQ(o,a.shape),u=$X(NJ(a.shape,s)[1]),c=[],l=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(l);var d=d4({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(d);var f=Zie({inputs:{a:d,b:l},backend:n});c.push(f);var p=Ose({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:i}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),p}},Dse={kernelName:"Min",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;e4(a,"min");var s=aQ(o,a.shape),u=s,c=OJ(u,a.shape.length),l=a;null!=c&&(l=n6({inputs:{x:a},backend:n,attrs:{perm:c}}),u=MJ(u.length,a.shape.length)),RJ("min",u,l.shape.length);for(var d=qy(NJ(l.shape,u),2),f=d[0],p=$X(d[1]),h=bQ($X(f),l.dtype),m=n.data.get(l.dataId).values,g=0;g<h.length;++g){for(var v=g*p,y=m[v],b=0;b<p;++b){var x=m[v+b];x<y&&(y=x)}h[g]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(f,l.dtype,h);if(i){var w=Koe({inputs:{x:k},backend:n,attrs:{shape:_J(f,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},Bse={kernelName:"MirrorPad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode;e4(a,"mirrorPad");for(var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=o.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===i?0:1,d=n.data.get(a.dataId).values,f=a.shape.length,p=mQ(a.shape),h=$X(s),m=s.length,g=mQ(s),v=iQ(a.dtype,h),y=0;y<h;y++){for(var b=IQ(y,m,g),x=0;x<m;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);var k=wQ(b=b.map((function(e,t){return e-u[t]})),f,p);v[y]=d[k]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},Pse={kernelName:"Mod",backendName:"cpu",kernelFunc:p4("Mod",r4((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Lse(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.dim,i=a.shape.length,s=o;if(-1===s&&(s=i-1),s!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(i," and dim was ").concat(s));var u=aQ([s],a.shape),c=Ese({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=_J(c.shape,u),d=Koe({inputs:{x:c},backend:n,attrs:{shape:l}}),f=g6({inputs:{a:a,b:d},backend:n}),p=A4({inputs:{x:f},backend:n}),h=Ose({inputs:{x:p},backend:n,attrs:{axis:u,keepDims:!1}}),m=Koe({inputs:{x:h},backend:n,attrs:{shape:l}}),g=Zie({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}var Use={kernelName:"Softmax",backendName:"cpu",kernelFunc:Lse},Vse={kernelName:"Multinomial",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized;e4(a,"multinomial");for(var u=s?a:Lse({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],d=n.data.get(u.dataId).values,f=[c,o],p=bQ($X(f),"int32"),h=0;h<c;++h){var m=h*l,g=new Float32Array(l-1);g[0]=d[m];for(var v=1;v<g.length;++v)g[v]=g[v-1]+d[m+v];for(var y=f0.alea(i.toString()),b=h*o,x=0;x<o;++x){var k=y();p[b+x]=g.length;for(var w=0;w<g.length;w++)if(k<g[w]){p[b+x]=w;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(f,"int32",p)}},Wse=v1,zse={kernelName:"NonMaxSuppressionV3",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;e4(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,d=Wse(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},jse=y1,Hse={kernelName:"NonMaxSuppressionV4",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;e4(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,f=jse(l,d,i,s,u,c),p=f.selectedIndices,h=f.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},Gse=b1,Kse={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;e4(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,f=Gse(l,d,i,s,u,c),p=f.selectedIndices,h=f.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},qse={kernelName:"OneHot",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue;e4(a,"oneHot");var u=$X(a.shape),c=new Float32Array(u*o);c.fill(s);for(var l=n.data.get(a.dataId).values,d=0;d<u;++d)l[d]>=0&&l[d]<o&&(c[d*o+l[d]]=i);return n.makeTensorInfo([].concat(Xy(a.shape),[o]),"int32",c)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Xse(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=c4({inputs:{input:r},backend:n}),o=Xse({inputs:{x:a},backend:n}),i=kie({inputs:{input:r},backend:n}),s=Xse({inputs:{x:i},backend:n}),u=a4({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return ase({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var Qse={kernelName:"ZerosLike",backendName:"cpu",kernelFunc:Xse},Yse={kernelName:"OnesLike",backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var o=c4({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=kie({inputs:{input:a},backend:r}),u=Xse({inputs:{x:s},backend:r}),c=a4({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return ase({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function $se(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Yie({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){XX(a,e.shape,"All tensors passed to stack must have matching shapes"),qX(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=Iie({inputs:t.map((function(e){var t=Yie({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var Zse={kernelName:"Pack",backendName:"cpu",kernelFunc:$se},Jse={kernelName:"PadV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;e4(a,"pad");var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=$X(a.shape),d=a.shape.length,f=mQ(a.shape),p=$X(s),h=s.length,m=mQ(s),g=iQ(a.dtype,p);0!==i&&g.fill(i);for(var v=0;v<l;v++)g[wQ(IQ(v,d,f).map((function(e,t){return e+u[t]})),h,m)]=c[v];return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},eue={kernelName:"Pow",backendName:"cpu",kernelFunc:p4("Pow",r4((function(e,t){return Math.pow(e,t)})))},tue={kernelName:"Range",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.dtype,i=i6(r,a,n.step,o);return t.makeTensorInfo([i.length],o,i)}},nue={kernelName:"Reciprocal",backendName:"cpu",kernelFunc:w4("Reciprocal",(function(e){return 1/e}))},rue={kernelName:"ResizeBilinear",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size;e4(a,"resizeBilinear");for(var u=mQ(a.shape),c=qy(s,2),l=c[0],d=c[1],f=qy(a.shape,4),p=f[0],h=f[1],m=f[2],g=f[3],v=n.data.get(a.dataId).values,y=new Float32Array($X([p,l,d,g])),b=[o&&l>1?h-1:h,o&&d>1?m-1:m],x=[o&&l>1?l-1:l,o&&d>1?d-1:d],k=0,w=b[0]/x[0],I=b[1]/x[1],C=0;C<p;C++)for(var E=0;E<l;E++){var S;S=i?w*(E+.5)-.5:w*E;for(var T=Math.max(0,Math.floor(S)),A=S-T,N=Math.min(h-1,Math.ceil(S)),_=C*u[0]+T*u[1],R=C*u[0]+N*u[1],O=0;O<d;O++){var F;F=i?I*(O+.5)-.5:I*O;for(var M=Math.max(0,Math.floor(F)),D=F-M,B=Math.min(m-1,Math.ceil(F)),P=_+M*u[2],L=R+M*u[2],U=_+B*u[2],V=R+B*u[2],W=0;W<g;W++){var z=v[P+W],j=v[L+W],H=z+(v[U+W]-z)*D,G=H+(j+(v[V+W]-j)*D-H)*A;y[k++]=G}}}return n.makeTensorInfo([p,l,d,g],"float32",y)}},aue={kernelName:"ResizeBilinearGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners;e4([o,a],"resizeBilinearGrad");for(var s=mQ(a.shape),u=qy(a.shape,4),c=u[0],l=u[1],d=u[2],f=u[3],p=qy(o.shape,3),h=p[1],m=p[2],g=new Float32Array(c*l*d*f),v=[i&&h>1?l-1:l,i&&m>1?d-1:d],y=[i&&h>1?h-1:h,i&&m>1?m-1:m],b=v[0]/y[0],x=v[1]/y[1],k=n.data.get(o.dataId).values,w=0,I=0;I<c;I++)for(var C=I*s[0],E=0;E<h;E++)for(var S=E*b,T=Math.floor(S),A=Math.min(Math.ceil(S),l-1),N=C+T*s[1],_=C+A*s[1],R=S-T,O=1-R,F=0;F<m;F++)for(var M=F*x,D=Math.floor(M),B=Math.min(Math.ceil(M),d-1),P=M-D,L=1-P,U=N+D*s[2],V=N+B*s[2],W=_+D*s[2],z=_+B*s[2],j=O*L,H=O*P,G=R*L,K=R*P,q=0;q<f;q++){var X=k[w++];g[U+q]+=X*j,g[V+q]+=X*H,g[W+q]+=X*G,g[z+q]+=X*K}return n.makeTensorInfo([c,d,l,f],"float32",g)}},oue={kernelName:"ResizeNearestNeighbor",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size;e4(a,"resizeNearestNeighbor");for(var u=mQ(a.shape),c=qy(s,2),l=c[0],d=c[1],f=qy(a.shape,4),p=f[0],h=f[1],m=f[2],g=f[3],v=n.data.get(a.dataId).values,y=new Float32Array(p*l*d*g),b=[o&&l>1?h-1:h,o&&d>1?m-1:m],x=[o&&l>1?l-1:l,o&&d>1?d-1:d],k=b[0]/x[0],w=b[1]/x[1],I=0,C=0;C<p;C++)for(var E=C*u[0],S=0;S<l;S++){var T=i?k*(S+.5):k*S,A=Math.min(h-1,o?Math.round(T):Math.floor(T));i&&(A=Math.max(0,A));for(var N=E+A*u[1],_=0;_<d;_++){var R=i?w*(_+.5):w*_,O=Math.min(m-1,o?Math.round(R):Math.floor(R));i&&(O=Math.max(0,O));for(var F=N+O*u[2],M=0;M<g;M++){var D=v[F+M];y[I++]=D}}}return n.makeTensorInfo([p,l,d,g],a.dtype,y)}},iue={kernelName:"ResizeNearestNeighborGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners;e4([o,a],"resizeNearestNeighborGrad");for(var s=mQ(a.shape),u=mQ(o.shape),c=qy(a.shape,4),l=c[0],d=c[1],f=c[2],p=c[3],h=qy(o.shape,3),m=h[1],g=h[2],v=new Float32Array(l*d*f*p),y=n.data.get(o.dataId).values,b=[i&&m>1?d-1:d,i&&g>1?f-1:f],x=[i&&m>1?m-1:m,i&&g>1?g-1:g],k=b[0]/x[0],w=b[1]/x[1],I=1/k,C=1/w,E=2*Math.ceil(I)+2,S=2*Math.ceil(C)+2,T=0;T<l;T++)for(var A=T*s[0],N=0;N<d;N++)for(var _=A+N*s[1],R=Math.floor(N*I),O=Math.floor(R-E/2),F=0;F<f;F++)for(var M=_+F*s[2],D=Math.floor(F*C),B=Math.floor(D-S/2),P=0;P<p;P++){for(var L=0,U=0;U<E;U++){var V=U+O;if(!(V<0||V>=m)){var W=A+V*u[1],z=V*k;if(N===Math.min(d-1,i?Math.round(z):Math.floor(z)))for(var j=0;j<S;j++){var H=j+B;if(!(H<0||H>=g)){var G=W+H*u[2],K=H*w;F===Math.min(f-1,i?Math.round(K):Math.floor(K))&&(L+=y[G+P])}}}}v[M+P]=L}return n.makeTensorInfo(a.shape,a.dtype,v)}},sue={kernelName:"Reverse",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims;e4(a,"reverse");var i=a.shape.length,s=aQ(o,a.shape);if(0===i)return s4({inputs:{x:a},backend:n});for(var u=new ZQ(a.shape,a.dtype),c=n.bufferSync(a),l=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[c.get.apply(c,Xy(n))].concat(Xy(t)))},d=0;d<u.size;d++)l(d);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},uue={kernelName:"RotateWithOffset",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,i=n.fillValue,s=n.center,u=r,c=iQ(a.dtype,$X(a.shape)),l=qy(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],m=qy(M1(s,f,p),2),g=m[0],v=m[1],y=Math.sin(o),b=Math.cos(o),x=u.data.get(a.dataId).values,k=0;k<d;k++)for(var w=k*p*f*h,I=0;I<f;I++)for(var C=I*(p*h),E=0;E<p;E++)for(var S=E*h,T=0;T<h;T++){var A=[d,I,E,T],N=A[2],_=A[1],R=(N-g)*b-(_-v)*y,O=(N-g)*y+(_-v)*b;R=Math.round(R+g),O=Math.round(O+v);var F=i;"number"!=typeof i&&(F=3===T?255:i[T]),R>=0&&R<p&&O>=0&&O<f&&(F=x[w+O*(p*h)+R*h+T]),c[w+C+S+T]=F}return{dataId:u.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},cue={kernelName:"Round",backendName:"cpu",kernelFunc:w4("Round",(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1}))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function lue(e,t,n,r,a,o,i,s,u,c){var l=[r/a,a],d=e.values,f=t.values;if(0===r)return i$(n,t.dtype);var p=i$(l,t.dtype);p.values.fill(u);for(var h=0;h<o;h++){for(var m=[],g=0,v=0;v<i;v++){var y=d[h*i+v];m.push(y),g+=y*s[v]}if(g<0||g>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var b=0;b<a;b++)c?p.values[g*a+b]+=f[h*a+b]:p.values[g*a+b]=0===t.rank?f[0]:f[h*a+b]}return p}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var due={kernelName:"ScatterNd",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=I$(0,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,p=lue(n.bufferSync(a),n.bufferSync(o),i,f,l,c,u,d,0,!0);return n.makeTensorInfo(i,p.dtype,p.values)}},fue={kernelName:"Select",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e;e4([r,a,o],"select");for(var i=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=cY(a.dtype,o.dtype),d=bQ($X(a.shape),l),f=0,p=0===i||i>1||1===a.shape.length?1:$X(a.shape.slice(1)),h=0;h<s.length;h++)for(var m=0;m<p;m++)1===s[h]?d[f++]=u[h]:d[f++]=c[h];return n.makeTensorInfo(a.shape,l,d)}},pue={kernelName:"Selu",backendName:"cpu",kernelFunc:w4("Selu",(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)}))},hue={kernelName:"Sigmoid",backendName:"cpu",kernelFunc:w4("Sigmoid",(function(e){return 1/(1+Math.exp(-e))}))},mue={kernelName:"Sign",backendName:"cpu",kernelFunc:w4("Sign",(function(e){return e<0?-1:e>0?1:0}))},gue={kernelName:"Sin",backendName:"cpu",kernelFunc:w4("Sin",(function(e){return Math.sin(e)}))},vue={kernelName:"Sinh",backendName:"cpu",kernelFunc:w4("Sinh",(function(e){return Math.sinh(e)}))},yue=Math.log(1.1920928955078125e-7)+2,bue={kernelName:"Softplus",backendName:"cpu",kernelFunc:w4("Softplus",(function(e){var t=e>-yue,n=e<yue,r=Math.exp(e);return n?r:t?e:Math.log(1+r)}))},xue={kernelName:"SpaceToBatchND",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;e4([a],"spaceToBatchND");var s=$X(o),u=[[0,0]];u.push.apply(u,Xy(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=Jse.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=D1(l.shape,o,s,!1),f=B1(d.length,o.length,!1),p=P1(l.shape,o,s,!1),h=Koe({inputs:{x:l},backend:n,attrs:{shape:d}}),m=n6({inputs:{x:h},backend:n,attrs:{perm:f}}),g=Koe({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}},kue={kernelName:"SparseToDense",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,u=I$(0,a,s),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,f=u.strides,p=u.outputSize,h=lue(n.bufferSync(a),n.bufferSync(o),s,p,d,l,c,f,n.data.get(i.dataId).values[0],!1);return n.makeTensorInfo(s,h.dtype,h.values)}},wue={kernelName:"SplitV",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=aQ(r.axis,a.shape)[0],s=Q1(a,o,i),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=Xy(c);t[i]=e;var r=l6({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[i]+=e,r}))}},Iue={kernelName:"Sqrt",backendName:"cpu",kernelFunc:w4("Sqrt",(function(e){return Math.sqrt(e)}))},Cue={kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;e4(r,"square");for(var o=a.data.get(r.dataId).values,i=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];i[s]=u*u}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Eue={kernelName:"Step",backendName:"cpu",kernelFunc:w4("Step",(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha}))},Sue={kernelName:"StridedSlice",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,d=r.newAxisMask,f=r.shrinkAxisMask;e4(a,"stridedSlice");var p,h=U$(a.shape,o,i,s,u,c,l,d,f),m=h.nonStrided,g=h.$begin,v=h.$strides,y=h.size,b=h.newShape,x=h.outShape,k=Koe({inputs:{x:a},backend:n,attrs:{shape:b}});if(m){var w=l6({inputs:{x:k},backend:n,attrs:{begin:g,size:y}});p=Koe({inputs:{x:w},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(w)}else if(x.some((function(e){return 0===e})))p=n.makeTensorInfo(x,a.dtype,[]);else{var I=h6(x,n.bufferSync(k),v,g);p=n.makeTensorInfo(I.shape,I.dtype,I.values)}var C=Koe({inputs:{x:p},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(p),C}},Tue={kernelName:"Tan",backendName:"cpu",kernelFunc:w4("Tan",(function(e){return Math.tan(e)}))},Aue=w4("Tanh",(function(e){return Math.tanh(e)}));
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Nue(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return GX(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return GX(0,n,t-1)}(e,t);case"nearest":return function(e,t){return GX(0,e,t-1)}(e,t);case"constant":default:return function(e,t){return e}(e)}}function _ue(e,t,n,r,a,o,i,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[i*r+s*a+u*o+c]:l}function Rue(e,t,n,r,a,o,i,s,u,c,l){return _ue(e,t,n,r,a,o,i,Math.round(s),Math.round(u),c,l)}function Oue(e,t,n,r,a,o,i,s,u,c,l){var d=Math.floor(s),f=Math.floor(u),p=d+1,h=f+1;return(p-s)*((h-u)*_ue(e,t,n,r,a,o,i,d,f,c,l)+(u-f)*_ue(e,t,n,r,a,o,i,d,h,c,l))+(s-d)*((h-u)*_ue(e,t,n,r,a,o,i,p,f,c,l)+(u-f)*_ue(e,t,n,r,a,o,i,p,h,c,l))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
for(var Fue=[Yoe,n4,$oe,Zoe,y4,Joe,eie,tie,nie,rie,aie,oie,iie,sie,uie,fie,pie,hie,mie,Qoe,gie,vie,yie,f4,E4,bie,o4,xie,Cie,Tie,Aie,Sie,_ie,Rie,Nie,Oie,Fie,Mie,Die,Bie,Pie,Uie,Vie,Wie,zie,jie,Gie,Hie,Jie,Doe,Kie,Xie,Qie,N4,$ie,R4,rse,ose,ise,F4,sse,use,cse,lse,dse,B4,fse,u4,pse,wie,hse,mse,gse,Poe,L4,vse,yse,W4,bse,xse,kse,wse,Ise,Cse,H4,Tse,Ase,Nse,_se,Rse,Sse,Mse,Dse,K4,Bse,Pse,Vse,Y4,Z4,zse,Hse,Kse,e6,qse,Yse,Zse,Jse,eue,Voe,o6,tue,l4,nue,zoe,Hoe,qoe,rue,aue,oue,iue,sue,uue,cue,u6,due,fue,pue,hue,mue,gue,vue,d6,Use,bue,xue,kue,wue,Iue,Cue,p6,Eue,Sue,v6,Fse,Tue,{kernelName:"Tanh",backendName:"cpu",kernelFunc:Aue},{kernelName:"Tile",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;e4(a,"tile");var i=y6(n.bufferSync(a),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},{kernelName:"TopK",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k;r.sorted;e4(a,"topk");var i=qy(b6(n.data.get(a.dataId).values,a.shape,a.dtype,o),2),s=i[0],u=i[1];return[n.makeTensorInfo(s.shape,s.dtype,s.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}},r6,{kernelName:"Transform",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2021 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=t.transforms,i=n.interpolation,s=n.fillMode,u=n.fillValue,c=n.outputShape,l=qy(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],m=qy(null!=c?c:[f,p],2),g=m[0],v=m[1],y=[d,g,v,h],b=mQ(a.shape),x=b[0],k=b[1],w=b[2],I=iQ(a.dtype,$X(y));I.fill(u);for(var C=r.data.get(a.dataId).values,E=r.data.get(o.dataId).values,S=0;S<d;++S){for(var T=1===o.shape[0]?E:E.subarray(8*S,8*S+8),A=0;A<g;++A)for(var N=0;N<v;++N)for(var _=0;_<h;++_){var R=void 0,O=T[6]*N+T[7]*A+1;if(0!==O){var F=(T[0]*N+T[1]*A+T[2])/O,M=(T[3]*N+T[4]*A+T[5])/O,D=Nue(F,p,s),B=Nue(M,f,s);switch(i){case"nearest":R=Rue(C,f,p,x,k,w,S,B,D,_,u);break;case"bilinear":R=Oue(C,f,p,x,k,w,S,B,D,_,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got ".concat(i))}I[S*x+A*k+N*w+_]=R}}return r.makeTensorInfo(y,a.dtype,I)}return{dataId:r.write(I,y,a.dtype),shape:a.shape,dtype:a.dtype}}},{kernelName:"Unique",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;e4(o,"unique");var i=x6(r.data.get(o.dataId).values,a,o.shape,o.dtype),s=i.outputValues,u=i.outputShape,c=i.indices;return[r.makeTensorInfo(u,o.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}},{kernelName:"Unpack",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape.length,s=a.shape[o],u=new Array(i-1),c=0,l=0;l<i;l++)l!==o&&(u[c++]=a.shape[l]);var d=new Array(i).fill(0),f=a.shape.slice();f[o]=1;for(var p=new Array(s),h=0;h<p.length;h++){d[o]=h;var m=l6({inputs:{x:a},backend:n,attrs:{begin:d,size:f}});p[h]=Koe({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return p}},{kernelName:"UnsortedSegmentSum",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments;e4(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-o.shape.length,l=o,d=0;d<c;++d){var f=Yie({inputs:{input:l},backend:n,attrs:{dim:d+1}});l=f,u.push(f)}for(var p=0;p<i;++p){var h=UQ(p,"int32"),m=n.makeTensorInfo([],"int32",h),g=qie({inputs:{a:m,b:l},backend:n}),v=d4({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),y=Q4({inputs:{a:v,b:a},backend:n}),b=Ose({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(m),u.push(g),u.push(v),u.push(y),u.push(b)}var x=$se({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},Qse],Mue=0,Due=Fue;Mue<Due.length;Mue++){var Bue=Due[Mue];PQ(Bue)}var Pue,Lue=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return gX(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),WX(e,t,{leading:r,maxWait:t,trailing:a})},Uue=function(e){if(!gX(e))return!1;var t=_X(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Vue=bX["__core-js_shared__"],Wue=(Pue=/[^.]+$/.exec(Vue&&Vue.keys&&Vue.keys.IE_PROTO||""))?"Symbol(src)_1."+Pue:"",zue=function(e){return!!Wue&&Wue in e},jue=Function.prototype.toString,Hue=function(e){if(null!=e){try{return jue.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Gue=/^\[object .+?Constructor\]$/,Kue=Function.prototype,que=Object.prototype,Xue=Kue.toString,Que=que.hasOwnProperty,Yue=RegExp("^"+Xue.call(Que).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$ue=function(e){return!(!gX(e)||zue(e))&&(Uue(e)?Yue:Gue).test(Hue(e))},Zue=function(e,t){return null==e?void 0:e[t]},Jue=function(e,t){var n=Zue(e,t);return $ue(n)?n:void 0},ece=function(){try{var e=Jue(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),tce=function(e,t,n){"__proto__"==t&&ece?ece(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},nce=function(e,t){return e===t||e!=e&&t!=t},rce=Object.prototype.hasOwnProperty,ace=function(e,t,n){var r=e[t];rce.call(e,t)&&nce(r,n)&&(void 0!==n||t in e)||tce(e,t,n)},oce=function(e,t,n,r){var a=!n;n||(n={});for(var o=-1,i=t.length;++o<i;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),a?tce(n,s,u):ace(n,s,u)}return n},ice=function(e){return e},sce=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},uce=Math.max,cce=function(e,t,n){return t=uce(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,o=uce(r.length-t,0),i=Array(o);++a<o;)i[a]=r[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=r[a];return s[t]=n(i),sce(e,this,s)}},lce=function(e){return function(){return e}},dce=ece?function(e,t){return ece(e,"toString",{configurable:!0,enumerable:!1,value:lce(t),writable:!0})}:ice,fce=Date.now,pce=function(e){var t=0,n=0;return function(){var r=fce(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(dce),hce=function(e,t){return pce(cce(e,t,ice),e+"")},mce=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},gce=function(e){return null!=e&&mce(e.length)&&!Uue(e)},vce=/^(?:0|[1-9]\d*)$/,yce=function(e,t){var n=Ty(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&vce.test(e))&&e>-1&&e%1==0&&e<t},bce=function(e,t,n){if(!gX(n))return!1;var r=Ty(t);return!!("number"==r?gce(n)&&yce(t,n.length):"string"==r&&t in n)&&nce(n[t],e)},xce=function(e){return hce((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,i=a>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(a--,o):void 0,i&&bce(n[0],n[1],i)&&(o=a<3?void 0:o,a=1),t=Object(t);++r<a;){var s=n[r];s&&e(t,s,r,o)}return t}))},kce=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},wce=function(e){return RX(e)&&"[object Arguments]"==_X(e)},Ice=Object.prototype,Cce=Ice.hasOwnProperty,Ece=Ice.propertyIsEnumerable,Sce=wce(function(){return arguments}())?wce:function(e){return RX(e)&&Cce.call(e,"callee")&&!Ece.call(e,"callee")},Tce=Array.isArray,Ace=function(){return!1},Nce=Cq((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,a=r&&r.exports===n?bX.Buffer:void 0,o=(a?a.isBuffer:void 0)||Ace;e.exports=o})),_ce={};_ce["[object Float32Array]"]=_ce["[object Float64Array]"]=_ce["[object Int8Array]"]=_ce["[object Int16Array]"]=_ce["[object Int32Array]"]=_ce["[object Uint8Array]"]=_ce["[object Uint8ClampedArray]"]=_ce["[object Uint16Array]"]=_ce["[object Uint32Array]"]=!0,_ce["[object Arguments]"]=_ce["[object Array]"]=_ce["[object ArrayBuffer]"]=_ce["[object Boolean]"]=_ce["[object DataView]"]=_ce["[object Date]"]=_ce["[object Error]"]=_ce["[object Function]"]=_ce["[object Map]"]=_ce["[object Number]"]=_ce["[object Object]"]=_ce["[object RegExp]"]=_ce["[object Set]"]=_ce["[object String]"]=_ce["[object WeakMap]"]=!1;var Rce=function(e){return RX(e)&&mce(e.length)&&!!_ce[_X(e)]},Oce=function(e){return function(t){return e(t)}},Fce=Cq((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,a=r&&r.exports===n&&vX.process,o=function(){try{return r&&r.require&&r.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=o})),Mce=Fce&&Fce.isTypedArray,Dce=Mce?Oce(Mce):Rce,Bce=Object.prototype.hasOwnProperty,Pce=function(e,t){var n=Tce(e),r=!n&&Sce(e),a=!n&&!r&&Nce(e),o=!n&&!r&&!a&&Dce(e),i=n||r||a||o,s=i?kce(e.length,String):[],u=s.length;for(var c in e)!t&&!Bce.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||yce(c,u))||s.push(c);return s},Lce=Object.prototype,Uce=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Lce)},Vce=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},Wce=Object.prototype.hasOwnProperty,zce=function(e){if(!gX(e))return Vce(e);var t=Uce(e),n=[];for(var r in e)("constructor"!=r||!t&&Wce.call(e,r))&&n.push(r);return n},jce=function(e){return gce(e)?Pce(e,!0):zce(e)},Hce=xce((function(e,t,n,r){oce(t,jce(t),e,r)})),Gce=function(e,t){return function(n){return e(t(n))}},Kce=Gce(Object.getPrototypeOf,Object),qce=Function.prototype,Xce=Object.prototype,Qce=qce.toString,Yce=Xce.hasOwnProperty,$ce=Qce.call(Object),Zce=function(e){if(!RX(e)||"[object Object]"!=_X(e))return!1;var t=Kce(e);if(null===t)return!0;var n=Yce.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Qce.call(n)==$ce},Jce=function(e){if(!RX(e))return!1;var t=_X(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Zce(e)},ele=hce((function(e,t){try{return sce(e,void 0,t)}catch(e){return Jce(e)?e:new Error(e)}})),tle=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a},nle=function(e,t){return tle(t,(function(t){return e[t]}))},rle=Object.prototype,ale=rle.hasOwnProperty,ole=function(e,t,n,r){return void 0===e||nce(e,rle[n])&&!ale.call(r,n)?t:e},ile={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},sle=function(e){return"\\"+ile[e]},ule=Gce(Object.keys,Object),cle=Object.prototype.hasOwnProperty,lle=function(e){if(!Uce(e))return ule(e);var t=[];for(var n in Object(e))cle.call(e,n)&&"constructor"!=n&&t.push(n);return t},dle=function(e){return gce(e)?Pce(e):lle(e)},fle=/<%=([\s\S]+?)%>/g,ple=function(e){return function(t){return null==e?void 0:e[t]}}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),hle=kX?kX.prototype:void 0,mle=hle?hle.toString:void 0,gle=function e(t){if("string"==typeof t)return t;if(Tce(t))return tle(t,e)+"";if(OX(t))return mle?mle.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},vle=function(e){return null==e?"":gle(e)},yle=/[&<>"']/g,ble=RegExp(yle.source),xle={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:fle,variable:"",imports:{_:{escape:function(e){return(e=vle(e))&&ble.test(e)?e.replace(yle,ple):e}}}},kle=/\b__p \+= '';/g,wle=/\b(__p \+=) '' \+/g,Ile=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Cle=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ele=/($^)/,Sle=/['\n\r\u2028\u2029\\]/g,Tle=Object.prototype.hasOwnProperty,Ale=function(e,t,n){var r=xle.imports._.templateSettings||xle;n&&bce(e,t,n)&&(t=void 0),e=vle(e),t=Hce({},t,r,ole);var a,o,i=Hce({},t.imports,r.imports,ole),s=dle(i),u=nle(i,s),c=0,l=t.interpolate||Ele,d="__p += '",f=RegExp((t.escape||Ele).source+"|"+l.source+"|"+(l===fle?Cle:Ele).source+"|"+(t.evaluate||Ele).source+"|$","g"),p=Tle.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(f,(function(t,n,r,i,s,u){return r||(r=i),d+=e.slice(c,u).replace(Sle,sle),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),d+="';\n";var h=Tle.call(t,"variable")&&t.variable;h||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(kle,""):d).replace(wle,"$1").replace(Ile,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=ele((function(){return Function(s,p+"return "+d).apply(void 0,u)}));if(m.source=d,Jce(m))throw m;return m},Nle=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_le=/^\w*$/,Rle=function(e,t){if(Tce(e))return!1;var n=Ty(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!OX(e))||_le.test(e)||!Nle.test(e)||null!=t&&e in Object(t)},Ole=Jue(Object,"create"),Fle=function(){this.__data__=Ole?Ole(null):{},this.size=0},Mle=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Dle=Object.prototype.hasOwnProperty,Ble=function(e){var t=this.__data__;if(Ole){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Dle.call(t,e)?t[e]:void 0},Ple=Object.prototype.hasOwnProperty,Lle=function(e){var t=this.__data__;return Ole?void 0!==t[e]:Ple.call(t,e)},Ule=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ole&&void 0===t?"__lodash_hash_undefined__":t,this};function Vle(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Vle.prototype.clear=Fle,Vle.prototype.delete=Mle,Vle.prototype.get=Ble,Vle.prototype.has=Lle,Vle.prototype.set=Ule;var Wle=Vle,zle=function(){this.__data__=[],this.size=0},jle=function(e,t){for(var n=e.length;n--;)if(nce(e[n][0],t))return n;return-1},Hle=Array.prototype.splice,Gle=function(e){var t=this.__data__,n=jle(t,e);return!(n<0||(n==t.length-1?t.pop():Hle.call(t,n,1),--this.size,0))},Kle=function(e){var t=this.__data__,n=jle(t,e);return n<0?void 0:t[n][1]},qle=function(e){return jle(this.__data__,e)>-1},Xle=function(e,t){var n=this.__data__,r=jle(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Qle(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Qle.prototype.clear=zle,Qle.prototype.delete=Gle,Qle.prototype.get=Kle,Qle.prototype.has=qle,Qle.prototype.set=Xle;var Yle=Qle,$le=Jue(bX,"Map"),Zle=function(){this.size=0,this.__data__={hash:new Wle,map:new($le||Yle),string:new Wle}},Jle=function(e){var t=Ty(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},ede=function(e,t){var n=e.__data__;return Jle(t)?n["string"==typeof t?"string":"hash"]:n.map},tde=function(e){var t=ede(this,e).delete(e);return this.size-=t?1:0,t},nde=function(e){return ede(this,e).get(e)},rde=function(e){return ede(this,e).has(e)},ade=function(e,t){var n=ede(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function ode(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ode.prototype.clear=Zle,ode.prototype.delete=tde,ode.prototype.get=nde,ode.prototype.has=rde,ode.prototype.set=ade;var ide=ode;function sde(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,r);return n.cache=o.set(a,i)||o,i};return n.cache=new(sde.Cache||ide),n}sde.Cache=ide;var ude=sde,cde=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lde=/\\(\\)?/g,dde=function(e){var t=ude((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(cde,(function(e,n,r,a){t.push(r?a.replace(lde,"$1"):n||e)})),t}),(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}(),fde=function(e,t){return Tce(e)?e:Rle(e,t)?[e]:dde(vle(e))},pde=function(e){if("string"==typeof e||OX(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},hde=function(e,t){for(var n=0,r=(t=fde(t,e)).length;null!=e&&n<r;)e=e[pde(t[n++])];return n&&n==r?e:void 0},mde=function(e,t,n){var r=null==e?void 0:hde(e,t);return void 0===r?n:r},gde=_k.Errors;function vde(e){var t=e.livenessSettings,n=e.apiClient,r=e.apiCheck,a=e.onError,o=yq(Tx.useState({face_tracking_setting:{enable:!1,web_terminate_threshold:.0030152991993743408,web_warning_threshold:.0017317430600108828,limit_for:"all_flow",max_warning_time:5},flow_interval_time_ms:3e3,limit_time_liveness_check:{enable:!1,limit_time_second:45},terminate_if_no_face:{enable:!1,max_invalid_frame:5,max_time_ms:1e3}}),2),i=o[0],s=o[1];return Tx.useEffect((function(){t?mde(t,"face_tracking_setting.web_terminate_threshold")?s(t):a(gde.client_web_setting_not_found):r&&n.clientSettings().then((function(e){if(e&&e.data){var t=mde(e,"data.settings.sdk_settings.active_liveness_settings.face_tracking_setting.enable"),n=mde(e,"data.settings.sdk_settings.active_liveness_settings.face_tracking_setting.web_terminate_threshold");if(t&&n){var r=mde(e,"data.settings.sdk_settings.active_liveness_settings");s(r)}t&&!n&&a(gde.client_web_setting_not_found)}e&&e.errors&&a(gde.server_error)})).catch((function(e){a(e)}))}),[t,n,a,r]),i}function yde(e){var t,n=e.canvas,r=e.resultsOutput,a=void 0===r?[]:r,o=n.captureStream(25);try{t=new MediaRecorder(o);var i=function(){var e=dq(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){t.ondataavailable=function(t){return function(e,t,n,r){if(e.data.size>0){var a=new Blob([e.data],{type:"video/webm"});t.push({id:null,blob:a}),n()}else console.error("No video have recored!"),r()}(t,a,e,n)},"inactive"!==t.state&&t.stop()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.stopVideoRecording=i}catch(e){}return t||(t={start:function(){},stop:function(){},pause:function(){},resume:function(){},requestData:function(){},stopVideoRecording:function(){}}),{mediaRecorder:t}}var bde,xde=function(e){var t=e.curStep,n=e.faceDirection,r=mde(t,"stepTimeConstraints.delayTime");return!!r&&(null===t.firstFrameSpottedAt?(t.name===n&&(t.firstFrameSpottedAt=(new Date).getTime()),!0):(new Date).getTime()-t.firstFrameSpottedAt<r)},kde=Lw.faceTracker(),wde=_k.Mode,Ide=_k.FaceDirection,Cde=_k.Errors,Ede=_k.Messages;function Sde(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.apiCheck,r=t.mode,a=t.bgCameraMask,o=t.bgCameraMaskRed,i=t.surroundStyle,s=t.cropAreaDimension,u=t.customInstructions,c=t.customIcon,l=t.customDirectionIcon,d=t.customStepTimeConstraints,f=void 0===d?(pq(e={},_k.FaceDirection.UP,{delayTime:1e3}),pq(e,_k.FaceDirection.LEFT,{delayTime:1e3}),pq(e,_k.FaceDirection.RIGHT,{delayTime:1e3}),pq(e,_k.FaceDirection.FRONTAL,{delayTime:2e3}),e):d,p=t.onLivenessDetectionDone,h=t.onError,m=t.frontalMinSize,g=t.enableRecording,v=void 0!==g&&g,y=t.waitingTimeToGetBetterFrames,b=void 0===y?500:y,x=t.captureFrameData,k=void 0!==x&&x,w=t.livenessSettings,I=t.setRemainingTime,C=void 0===I?function(){}:I,E=t.onApiCheck,S=t.customErrors,T=t.framesIntervalTime,A=void 0===T?180:T,N=Tx.useState(!1),_=yq(N,2),R=_[0],O=_[1],F=Tx.useState(),M=yq(F,2),D=M[0],B=M[1],P=Tx.useState(!1),L=yq(P,2),U=L[0],V=L[1],W=Tx.useState(!1),z=yq(W,2),j=z[0],H=z[1],G=Tx.useRef(null),K=Mk.useSDKSettings(),q=K.lang,X=K.assetRoot,Q=K.apiClient,Y=r===wde.ACTIVE,$=Tx.useReducer((function(e){return e+1}),0),Z=yq($,2),J=(Z[0],Z[1]),ee=Tx.useRef(null),te=Tx.useRef(!1),ne=Tx.useRef(null);null===ne.current&&(ne.current=Lw.initFaceVerificationData({assetRoot:X,customInstructions:u,customIcon:c,customDirectionIcon:l,customStepTimeConstraints:f}));var re=Tx.useState(""),ae=yq(re,2),oe=ae[0],ie=ae[1],se=Tx.useMemo((function(){return Lue(ie,500)}),[ie]),ue=Tx.useRef([]),ce=Tx.useRef(),le=Tx.useRef([]),de=Tx.useRef(-1),fe=Tx.useRef(),pe=vde({livenessSettings:w,apiClient:Q,apiCheck:n,onError:h}),he=pe.face_tracking_setting,me=pe.flow_interval_time_ms,ge=pe.limit_time_liveness_check,ve=pe.terminate_if_no_face,ye=Tx.useRef(0),be=Tx.useRef(),xe=Tx.useCallback((function(){C(""),ne.current.curStepIndex=ne.current.steps.length,V(!1),setTimeout((function(){ne.current=Lw.initFaceVerificationData({assetRoot:X,customInstructions:u,customIcon:c,customDirectionIcon:l}),fe.current=Date.now(),ye.current=0,be.current=null,le.current=[],de.current=0,H(!1),J()}),me)}),[X,u,c,l,me,C]),ke=Tx.useRef(null),we=Tx.useMemo((function(){return gq(gq({},Cde),S)}),[S]);Tx.useEffect((function(){if(R&&ge.enable&&j){fe.current=Date.now();var e=ge.limit_time_second+1;ke.current=setInterval((function(){var t=Math.round((1e3*e-(Date.now()-fe.current))/1e3);if(ne.current.curStepIndex<ne.current.steps.length){if(t<=10&&t>=1){var n=Ale(Ede.REMAIN_TIME[q]);C(n({x:t}))}if(Math.round((Date.now()-fe.current)/1e3)===e){var r=Ale(we.liveness_terminated_time_out.msg[q]);ie({error:r({x:ge.limit_time_second}),duration:me}),xe()}}}),1e3)}return function(){clearInterval(ke.current)}}),[xe,C,R,q,me,ge.enable,ge.limit_time_second,j,we.liveness_terminated_time_out]);var Ie=Tx.useCallback((function(e){var t,n,r=e.clientWidth,o=e.clientHeight,u=e.videoAreaWidth,c=e.videoAreaHeight,l=e.lostX,d=e.lostY;Sq.isMobile?n=t=u:t=n=c-200;var f=Math.floor((u-t)/2)+l,p=5+d,h=a;ee.current={x:f,y:p,width:t,height:n,image:h,surroundStyle:i},"object"===cq(s)?ee.current=gq(gq({},ee.current),s):"function"==typeof s&&(ee.current=gq(gq({},ee.current),s({clientWidth:r,clientHeight:o,videoAreaWidth:u,videoAreaHeight:c,lostX:l,lostY:d,isMobile:Sq.isMobile,width:t,height:n}))),J(),O(!0)}),[a,i,s]),Ce=Tx.useState(3),Ee=yq(Ce,2),Se=Ee[0],Te=Ee[1],Ae=Tx.useState(!1),Ne=yq(Ae,2),_e=Ne[0],Re=Ne[1],Oe=Tx.useRef(!1),Fe=Tx.useCallback((function(e){Re(e),Oe.current=e}),[]),Me=Tx.useRef(null),De=Tx.useRef([]),Be=Tx.useCallback((function(){Te(3),clearInterval(Me.current),Fe(!0),Me.current=setInterval((function(){Te((function(e){if(e-1==0){clearInterval(Me.current);var t=De.current,r=ue.current.map((function(e){return e.blob}));if(n){var a=t.map((function(e){return Q.uploadImage({file:e.blob,label:"portrait",metadata:JSON.stringify({gesture_score:e.leftRightScore,gesture:Ide.FRONTAL})})})).concat(r.map((function(e){return Q.uploadFile({file:e,label:"video"})})));Promise.all(a).then((function(e){var n=e.filter((function(e,n){return n<t.length})),r=e.filter((function(e,n){return n>=t.length}));return Q.verifyFaceLiveness({images:n.map((function(e){return{id:e.data.image_id}})),videos:r.map((function(e){return{id:e.data.file_id}}))})})).then((function(e){p({apiCheckPassed:e.data.is_live,verifyFaceLivenessResult:e.data})})).catch((function(e){h({error:e})}))}else p({frontalFaces:t,videoRecord:r})}return e-1}))}),1e3)}),[Fe,n,p,Q,h]);Tx.useEffect((function(){oe&&(clearInterval(Me.current),Fe(!1))}),[oe,Fe]),Tx.useEffect((function(){var e=!1;(function(){var t=dq(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return AQ.set("WASM_HAS_SIMD_SUPPORT",!1),AQ.set("WASM_HAS_MULTITHREAD_SUPPORT",!1),t.prev=2,t.next=5,H$("wasm");case 5:t.next=25;break;case 7:return t.prev=7,t.t0=t.catch(2),t.prev=9,t.next=12,H$("webgl");case 12:t.next=25;break;case 14:return t.prev=14,t.t1=t.catch(9),t.prev=16,t.next=19,H$("cpu");case 19:t.next=25;break;case 21:t.prev=21,t.t2=t.catch(16),console.error(t.t2),e=!0;case 25:case"end":return t.stop()}}),t,null,[[2,7],[9,14],[16,21]])})));return function(){return t.apply(this,arguments)}})()().then(dq(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}ie(we.unable_to_load_model.msg[q]),h(we.unable_to_load_model),t.next=9;break;case 5:return t.next=7,T3();case 7:n=t.sent,B(n);case 9:case"end":return t.stop()}}),t)}))))}),[q,h,we.unable_to_load_model]),Tx.useEffect((function(){var e,t=G.current,r=function(){var e=dq(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ne.current.steps,n=[],t.forEach((function(e){var t=e.name,r=e.image,a=e.frontalFaceImage;t!==Ide.FRONTAL?n.push(Q.uploadImage({file:r.blob,label:"portrait",metadata:JSON.stringify({gesture_score:r.leftRightScore,gesture:t})})):n.push(Promise.resolve({data:{image_id:null}})),a.blob?n.push(Q.uploadImage({file:a.blob,label:"portrait",metadata:JSON.stringify({gesture_score:a.leftRightScore,gesture:Ide.FRONTAL})})):n.push(Promise.resolve({data:{image_id:null}}))})),e.next=5,Promise.all(n);case 5:r=e.sent,t.forEach((function(e,t){e.image.imageId=r[2*t].data.image_id,e.frontalFaceImage.imageId=r[2*t+1].data.image_id}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=dq(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:t=ne.current.steps,0===(n=t.filter((function(e){return e.frontalFaceImage.imageId}))).length?p({error:"wrong_face_movement"}):Q.verifyFaceLiveness({images:n.map((function(e){return{id:e.frontalFaceImage.imageId}})),gesture_images:t.filter((function(e){return e.image.imageId&&e.name!==Ide.FRONTAL})).map((function(e){return{gesture:e.name,images:[{id:e.image.imageId}]}})),videos:[{frames:le.current}],metadata:k?{sdk_logs:{tracking_frames:le.current.map((function(e){return{index:e.index,landmarks:e.landmarks,original_landmarks:e.original_landmarks,score:e.score,time:e.time,bbox:e.bbox,original_bbox:e.original_bbox}}))}}:void 0}).then((function(e){var t=!0===e.data.is_live;p({apiCheckPassed:t,verifyFaceLivenessResult:e.data})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=dq(regeneratorRuntime.mark((function e(){var t,r,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ne.current.steps,ne.current.curStepIndex++,he.enable&&"each_gesture"===he.limit_for&&(ye.current=0),ne.current.curStepIndex!==t.length){e.next=28;break}if(!v){e.next=7;break}return e.next=7,ce.current.stopVideoRecording();case 7:if(ge.enable&&C(""),!p){e.next=28;break}if(n){e.next=25;break}if(o=t.filter((function(e){return e.name!==Ide.FRONTAL})).map((function(e){return{name:e.name,image:{blob:e.image.blob}}})),s=t.filter((function(e){return e.name!==Ide.FRONTAL})).map((function(e){return e.frontalFaceImage.blob})).filter((function(e){return null!==e})),!(u=null===(r=t.find((function(e){return e.name===Ide.FRONTAL})))||void 0===r||null===(a=r.image)||void 0===a?void 0:a.blob)||!m){e.next=19;break}return e.next=16,YI.scaleImage(u,{minSize:m});case 16:e.t0=e.sent,e.next=20;break;case 19:e.t0=null;case 20:c=e.t0,u&&s.push(u),p({steps:o,frontalFaces:s,videoRecord:[],frontalScaledImage:c,capturedFrames:le.current}),e.next=28;break;case 25:return E(),e.next=28,i();case 28:J();case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=WX((function(){var e=ne.current,t=e.curStepIndex,n=e.steps,r=n[t],a=null!==(null==r?void 0:r.image.blob),o=null!==(null==r?void 0:r.frontalFaceImage.blob),i=n.filter((function(e){return e.frontalFaceImage.blob})).length,u=!1;return a&&(o||![1].includes(t)||i>=1)?(te.current=!1,s(),u=!0):te.current=!(!a||o),V(!1),u}),b);function c(e,t,n,r){return l.apply(this,arguments)}function l(){return(l=dq(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,c,l,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=ne.current,i=o.curStepIndex,c=o.steps,!(i<c.length)){e.next=24;break}if(l=c[i],!xde({faceDirection:t,curStep:l})){e.next=5;break}return e.abrupt("return");case 5:if(t!==Ide.FRONTAL||null!==l.frontalFaceImage.blurScore&&!kw.hasBetterBlurScore(r,l.frontalFaceImage.blurScore)){e.next=13;break}return l.frontalFaceImage.blurScore=r,e.next=9,Iw.takePicture({canvas:n});case 9:d=e.sent,l.frontalFaceImage.blob=d,l.frontalFaceImage.leftRightScore=a,te.current&&(te.current=!1,s());case 13:if(l.name!==t||null!==l.image.blurScore&&!kw.hasBetterBlurScore(r,l.image.blurScore)){e.next=24;break}return V(!0),l.image.blurScore=r,e.next=18,Iw.takePicture({canvas:n});case 18:f=e.sent,l.image.blob=f,l.image.leftRightScore=a,l.image.objUrl&&URL.revokeObjectURL(l.image.objUrl),l.image.objUrl=URL.createObjectURL(f),u();case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t,n){return f.apply(this,arguments)}function f(){return(f=dq(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!0===Oe.current&&t===Ide.FRONTAL&&De.current.length<3&&(Iw.takePicture({canvas:n}).then((function(e){De.current.push({blob:e,leftRightScore:r})})),2===De.current.length&&v&&ce.current.stopVideoRecording());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,n,r){if(le.current.length&&Date.now()-le.current[le.current.length-1].time<A)return null;if(de.current++,k&&!r){var a=e.topLeft,o=e.bottomRight,i=[].concat(bq(a),bq(o)),s=[];[a,o].forEach((function(e){s=[].concat(bq(s),[e[0]/zw.SIZE*t.width,e[1]/zw.SIZE*t.height])}));var u=kde(e,0===le.current.length),c=u.score,l=u.time,d=t.toDataURL("image/jpeg",.8);return le.current.push({label:"portrait",base64:d.split(",")[1],landmarks:n,original_landmarks:n.map((function(e){return[e[0]/zw.SIZE*t.width,e[1]/zw.SIZE*t.height]})),score:c,time:l,index:le.current.length,bbox:i,original_bbox:s}),c}return null}function y(e){if(!he.enable||null===e||!j)return!0;var t=he.web_warning_threshold,n=he.web_terminate_threshold,r=he.max_warning_time;return e<t||(e<n&&ye.current<r?(ye.current++,ye.current===r?ie({error:we.liveness_terminated_face_tracking.msg[q],duration:me}):ie({error:we.liveness_too_fast.msg[q],duration:1500}),!0):(ie({error:we.liveness_terminated.msg[q],duration:me}),xe(),!1))}function x(e){if(ve.enable&&j){var t=ve.max_time_ms;be.current&&e||(be.current={time:Date.now(),frame:0}),e&&be.current.frame++;var n=be.current.time;e&&Date.now()-n>=t&&(ie({error:we.liveness_terminated_no_face.msg[q],duration:me}),xe())}}function w(e,t){return I.apply(this,arguments)}function I(){return(I=dq(regeneratorRuntime.mark((function n(r,i){var s,u,l,f,p,h,m,v,b,k,I,C,E,S,T,A,N,_,R,O,F;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=r.cropX,u=r.cropY,l=r.cropWidth,f=r.cropHeight,i.getContext("2d").drawImage(t,s,u,l,f,0,0,l,f),n.next=5,kw.calculateBlurScore(i);case 5:return p=n.sent,n.next=8,zw.getModelPredictions({model:D,sCanvas:i});case 8:return h=n.sent,n.next=11,Lw.validatePredictions({predictions:h,width:zw.SIZE,height:zw.SIZE});case 11:if(m=n.sent,v=m.error,b=m.fullFace,k="",ee.current.image=a,I=null,C=null,E=null,S=ne.current,T=S.curStepIndex,A=S.steps,!b){n.next=27;break}return N=A[T],E=b.landmarks,n.next=25,Lw.calculateFaceDirection({landmarks:E,getPerfectFrontal:N&&N.name===Ide.FRONTAL});case 25:(_=n.sent)&&(I=_.gesture,C=_.leftRightScore);case 27:if(R="no_face"===(null==v?void 0:v.code)||"partial_face"===(null==v?void 0:v.code),O=T<A.length,x(R&&O),v&&("face_too_small"!==v.code||![Ide.DOWN,Ide.UP,Ide.LEFT,Ide.RIGHT].includes(I))){n.next=43;break}if(!Y){n.next=39;break}if(j||H(!0),!y(g(h[0],i,E,T>=A.length))){n.next=37;break}return n.next=37,c(I,i,p,C);case 37:n.next=41;break;case 39:return n.next=41,d(I,i,C);case 41:n.next=44;break;case 43:T<A.length&&(k=null===(F=we[v.code])||void 0===F?void 0:F.msg[q],ee.current.image=o);case 44:se(k),-1!==e&&(e=requestAnimationFrame((function(){return w(r,i)})));case 46:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function S(){return(S=dq(regeneratorRuntime.mark((function e(){var n,r,a,o,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D&&(n=Iw.analyzeVideoAndWindowSizes(t,ee.current),r=n.cropWidth,a=n.cropHeight,(o=document.createElement("canvas")).width=r,o.height=a,(i=o.getContext("2d")).translate(r,0),i.scale(-1,1),s=v?yde({canvas:o,resultsOutput:ue.current}):{},u=s.mediaRecorder,ce.current=u,ce.current&&ce.current.start(),w(n,o));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return R&&setTimeout((function(){!function(){S.apply(this,arguments)}()}),2e3),function(){cancelAnimationFrame(e),e=-1}}),[R,q,Y,Q,n,a,o,p,h,v,m,b,k,E,he,ge.enable,C,se,me,xe,ve,D,j,we,A]);var Pe=ne.current,Le=Pe.curStepIndex,Ue=Pe.steps,Ve=Tx.useMemo((function(){return Ue.find((function(e){return e.name===_k.FaceDirection.FRONTAL}))}),[Ue]),We=te.current?Ve:Ue[Le],ze=We&&j?We.instructions[q]:null,je=We&&j?We.directionIcon:"",He=We?We.directionIconAnimation:"";return{countdownToTakePicture:Se,cropArea:ee,curStepIndex:Le,directionIcon:je,directionIconAnimation:He,faceDetectionError:oe,handleTriggerPassiveMode:Be,handleVideoPlayed:Ie,instructions:ze,isActiveMode:Y,refVideo:G,showCountdown:_e,steps:Ue,videoPlayed:R,activeCapturing:U,isFirstValidFrameFound:j}}function Tde(){var e=vq(["\n  animation-delay: 1s;\n"]);return Tde=function(){return e},e}function Ade(){var e=vq(["\n  animation-delay: 0.5s;\n"]);return Ade=function(){return e},e}function Nde(){var e=vq(["\n  animation-delay: 0s;\n"]);return Nde=function(){return e},e}function _de(){var e=vq(["\n  display: flex;\n  margin: 4px 0;\n  width: 100%;\n  height: 15px;\n  animation: "," 1s infinite;\n  animation-direction: alternate;\n\n  &::before,\n  &::after {\n    content: '';\n    height: 100%;\n    width: 50%;\n    background: rgba(255, 255, 255, 0.8);\n  }\n\n  &::before {\n    transform: skewY(32deg);\n  }\n\n  &::after {\n    width: 50%;\n    transform: skewY(-32deg);\n  }\n"]);return _de=function(){return e},e}function Rde(){var e=vq(["\n  width: 70px;\n  transform: rotate(","deg);\n"]);return Rde=function(){return e},e}function Ode(){var e=vq(["\n  width: 200px;\n  height: 200px;\n  position: relative;\n  transform: scale(0.48);\n\n  .top,\n  .right,\n  .bottom,\n  .left {\n    position: absolute;\n  }\n\n  .top {\n    top: 0;\n    left: 50%;\n    transform: rotate(","deg) translateX(-50%);\n  }\n\n  .right {\n    right: 0;\n    top: 50%;\n    transform: rotate(","deg) translateX(-50%);\n  }\n\n  .bottom {\n    bottom: 0;\n    left: 50%;\n    transform: rotate(","deg) translateX(50%);\n  }\n\n  .left {\n    left: 0;\n    top: 50%;\n    transform: rotate(","deg) translateX(50%);\n  }\n"]);return Ode=function(){return e},e}!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a7)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)n7=e;else{r7=e;var n=e7.filter((function(e){return null==r7[e]}));if(n.length>0)throw new Error("There were no entries found for the following binaries: ".concat(n.join(","),". Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found."))}o7=t}
/** @license See the LICENSE file. */("//cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@".concat("3.3.0","/dist/"));var Fde=(pq(bde={},_k.FaceDirection.LEFT,90),pq(bde,_k.FaceDirection.RIGHT,270),pq(bde,_k.FaceDirection.UP,180),pq(bde,_k.FaceDirection.DOWN,0),bde),Mde=uq(["0%{opacity:0.15;}50%{opacity:0.3;}100%{opacity:1;}"]),Dde=oq.div(Ode(),Fde[_k.FaceDirection.DOWN],Fde[_k.FaceDirection.LEFT],Fde[_k.FaceDirection.UP],Fde[_k.FaceDirection.RIGHT]),Bde=oq.div(Rde(),(function(e){var t,n=e.direction;return null!==(t=Fde[n])&&void 0!==t?t:0})),Pde=oq.span(_de(),Mde),Lde=oq(Pde)(Nde()),Ude=oq(Pde)(Ade()),Vde=oq(Pde)(Tde());function Wde(e){var t=e.type;return t!==_k.FaceDirection.FRONTAL?Tx.createElement(Bde,{direction:t},Tx.createElement(Lde,null),Tx.createElement(Ude,null),Tx.createElement(Vde,null)):Tx.createElement(Dde,null,Tx.createElement(Bde,{className:"top"},Tx.createElement(Lde,null),Tx.createElement(Ude,null),Tx.createElement(Vde,null)),Tx.createElement(Bde,{className:"right"},Tx.createElement(Lde,null),Tx.createElement(Ude,null),Tx.createElement(Vde,null)),Tx.createElement(Bde,{className:"bottom"},Tx.createElement(Lde,null),Tx.createElement(Ude,null),Tx.createElement(Vde,null)),Tx.createElement(Bde,{className:"left"},Tx.createElement(Lde,null),Tx.createElement(Ude,null),Tx.createElement(Vde,null)))}Wde.propTypes={type:Tk.oneOf([_k.FaceDirection.LEFT,_k.FaceDirection.RIGHT,_k.FaceDirection.UP,_k.FaceDirection.FRONTAL])},Wde.defaultProps={type:_k.FaceDirection.LEFT};var zde=_k.ErrorDuration;function jde(e){var t=e.children,n=e.className,r=Tx.useRef(0),a=Tx.useRef(""),o=Tx.useRef(zde.SHORT),i="",s=0;if("string"==typeof t)i=t;else{var u=t.error;s=t.duration,i=u}return Date.now()-r.current>=o.current?(r.current=Date.now(),a.current=i,o.current=s,i?Tx.createElement("div",{className:n},i):null):a.current?Tx.createElement("div",{className:n},a.current):null}function Hde(){var e=vq(["\n  transition: stroke-dashoffset 0.4s;\n  transform: rotate(-90deg);\n  transform-origin: 50% 50%;\n"]);return Hde=function(){return e},e}jde.propTypes={children:Tk.node.isRequired,className:Tk.string},jde.defaultProps={className:""};var Gde,Kde,qde=oq.circle(Hde());function Xde(e){var t=e.className,n=e.style,r=e.radius,a=e.strokeWidth,o=e.progress,i=e.hasError,s=e.activeColor,u=e.innerPadding,c=e.outsideRingColor,l=e.outsideRingOpacity,d=e.insideRingColor,f=e.insideRingWidth,p=e.insideRingStrokeDash,h=e.errorRingWidth,m=e.errorRingColor,g=e.dashedRingColor,v=e.dashedRingOpacity,y=e.dashedRingWidth,b=e.dashedRingLineThick,x=e.dashedRingLineSpacing,k=e.dashedInsideRingColor,w=e.dashedInsideRingWidth,I=e.showOutsideRing,C=e.showInsideRing,E=e.showDashedRing,S=2*r,T=2*r,A=r-2*a,N=2*Math.PI*A,_=N-o/100*N,R=A-y/2-a/2-u,O=2*Math.PI*R,F=O-o/100*O,M=R-w/2-y/2,D=2*Math.PI*M,B=D-o/100*D,P=M-f/2-w/2,L=M-h/2-w/2;return Tx.createElement("svg",{className:t,style:n,width:S,height:T,viewBox:"0 0 ".concat(S," ").concat(T),fill:"none",xmlns:"http://www.w3.org/2000/svg"},I?Tx.createElement(Tx.Fragment,null,Tx.createElement("circle",{opacity:l,cx:r,cy:r,r:A,stroke:c}),Tx.createElement(qde,{cx:r,cy:r,r:A,stroke:s,strokeWidth:a,strokeLinecap:"round",strokeDasharray:"".concat(N," ").concat(N),style:{strokeDashoffset:_}})):null,E?Tx.createElement(Tx.Fragment,null,Tx.createElement("circle",{opacity:v,cx:r,cy:r,r:R,stroke:g,strokeWidth:y,strokeDasharray:"".concat(b," ").concat(x)}),Tx.createElement("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse"},Tx.createElement("circle",{cx:r,cy:r,r:R,stroke:s,strokeWidth:y,strokeDasharray:"".concat(b," ").concat(x)})),Tx.createElement("g",{mask:"url(#mask0)"},Tx.createElement(qde,{cx:r,cy:r,r:R,stroke:s,strokeWidth:y,strokeDasharray:"".concat(O," ").concat(O),style:{strokeDashoffset:F}})),Tx.createElement("circle",{opacity:v,cx:r,cy:r,r:M,stroke:k,strokeWidth:w}),Tx.createElement(qde,{cx:r,cy:r,r:M,stroke:s,strokeWidth:w,strokeLinecap:"round",strokeDasharray:"".concat(D," ").concat(D),style:{strokeDashoffset:B}})):null,C?Tx.createElement("circle",{strokeDasharray:p,cx:r,cy:r,r:P,stroke:d,strokeWidth:f}):null,i?Tx.createElement("circle",{strokeDasharray:p,cx:r,cy:r,r:L,stroke:m,strokeWidth:h}):null)}function Qde(e){var t=e.className;return Tx.createElement("svg",{className:t,width:"320",height:"320",viewBox:"0 0 320 320",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Tx.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M320 0H0V320H320V0ZM160 296C235.111 296 296 235.111 296 160C296 84.8893 235.111 24 160 24C84.8893 24 24 84.8893 24 160C24 235.111 84.8893 296 160 296Z",fill:"currentColor"}))}function Yde(){var e=vq(["\n  position: absolute;\n  width: 100%;\n  top: 0;\n  bottom: 0;\n  z-index: -1;\n  background: rgba(255, 255, 255, 0.3);\n  animation: "," 1s infinite;\n  border-radius: 50%;\n"]);return Yde=function(){return e},e}function $de(){var e=vq(["\n  position: absolute;\n  z-index: -1;\n  background: rgba(223, 0, 0, 0.2);\n  border-radius: 50%;\n  width: 86%;\n  height: 86%;\n  top: 7%;\n  left: 7%;\n"]);return $de=function(){return e},e}function Zde(){var e=vq(["\n  width: 100%;\n  height: 100%;\n  vertical-align: middle;\n  margin: 0;\n  color: ",";\n"]);return Zde=function(){return e},e}function Jde(){var e=vq(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]);return Jde=function(){return e},e}function efe(){var e=vq(["\n  position: absolute;\n  width: 100%;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return efe=function(){return e},e}function tfe(){var e=vq(["\n  position: absolute;\n  width: 100%;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #ffffff;\n  font-size: 140px;\n  opacity: 0.6;\n"]);return tfe=function(){return e},e}function nfe(){var e=vq(["\n  cursor: pointer;\n  text-align: center;\n  width: 50px;\n\n  img {\n    width: 100%;\n  }\n"]);return nfe=function(){return e},e}function rfe(){var e=vq(["\n  color: #ffffff;\n  height: 70px;\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: ",";\n"]);return rfe=function(){return e},e}function afe(){var e=vq(["\n  width: ",";\n  height: ",";\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 2px solid #ffffff;\n  font-size: 16px;\n  color: #fff;\n  font-weight: 700;\n\n  & + & {\n    margin-left: 10px;\n  }\n\n  ","\n  img {\n    width: 100%;\n    margin: 0;\n    border-radius: 50%;\n  }\n"]);return afe=function(){return e},e}function ofe(){var e=vq(["\n  height: ",";\n  position: absolute;\n  ","\n  ","\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: ",";\n"]);return ofe=function(){return e},e}function ife(){var e=vq(["\n  position: absolute;\n  ","\n  ","\n  font-size: ",";\n  text-shadow: 2px 2px 4px #000000;\n"]);return ife=function(){return e},e}function sfe(){var e=vq(["\n  ","\n  font-size: 18px;\n  background: #ea3223;\n  color: #fff;\n  padding: 5px 10px;\n  border-radius: 3px;\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, 0);\n  white-space: nowrap;\n"]);return sfe=function(){return e},e}function ufe(){var e=vq(["\n  ","\n  ","\n  ","\n  ","\n  font-size: 18px;\n  background: #ea3223;\n  color: #fff;\n  padding: 5px 10px;\n  border-radius: 3px;\n  position: absolute;\n  white-space: pre-wrap;\n  text-align: center;\n  max-width: 80%;\n"]);return ufe=function(){return e},e}function cfe(){var e=vq(["\n  ","\n"]);return cfe=function(){return e},e}Xde.propTypes={className:Tk.string,style:Tk.shape({}),radius:Tk.number,strokeWidth:Tk.number,progress:Tk.number,hasError:Tk.bool,activeColor:Tk.string,innerPadding:Tk.number,outsideRingColor:Tk.string,outsideRingOpacity:Tk.number,insideRingColor:Tk.string,insideRingWidth:Tk.number,insideRingStrokeDash:Tk.string,errorRingColor:Tk.string,errorRingWidth:Tk.number,dashedRingColor:Tk.string,dashedRingOpacity:Tk.number,dashedRingWidth:Tk.number,dashedRingLineThick:Tk.number,dashedRingLineSpacing:Tk.number,dashedInsideRingColor:Tk.string,dashedInsideRingWidth:Tk.number,showOutsideRing:Tk.bool,showDashedRing:Tk.bool,showInsideRing:Tk.bool},Xde.defaultProps={className:"",style:null,radius:160,strokeWidth:3,progress:0,hasError:!1,activeColor:"#0092ff",innerPadding:5,outsideRingColor:"#f2f6f9",outsideRingOpacity:.1,insideRingColor:"#f2f6f9",insideRingWidth:3,insideRingStrokeDash:"0",errorRingColor:"#df0000",errorRingWidth:3,dashedRingColor:"#ffffff",dashedRingOpacity:.3,dashedRingWidth:10,dashedRingLineThick:1,dashedRingLineSpacing:6,dashedInsideRingColor:"#ffffff",dashedInsideRingWidth:0,showOutsideRing:!0,showDashedRing:!0,showInsideRing:!0},Qde.propTypes={className:Tk.string},Qde.defaultProps={className:""};var lfe=GK(["z-index:",";color:#ffffff;"],1020),dfe=oq.div(cfe(),lfe),ffe=oq(jde)(ufe(),lfe,(function(e){var t=e.top;return t&&GK(["top:","px;"],t)}),(function(e){var t=e.bottom;return t&&GK(["bottom:","px;"],t)}),(function(e){return e.centerY&&GK(["top:50%;transform:translateY(-50%);"])})),pfe=oq(dfe)(sfe(),(function(e){var t=e.top;return t&&GK(["top:","px;"],t)})),hfe=oq(dfe)(ife(),(function(e){var t=e.top;return t&&GK(["top:","px;"],t)}),(function(e){var t=e.bottom;return t&&GK(["bottom:","px;"],t)}),(function(){return Sq.isMobile?"20px":"22px"})),mfe=oq.div(ofe(),(function(){return Sq.isMobile?"50px":"70px"}),(function(e){var t=e.top;return t&&GK(["top:","px;"],t)}),(function(e){var t=e.bottom;return t&&GK(["bottom:","px;"],t)}),1020),gfe=oq.div(afe(),(function(){return Sq.isMobile?"40px":"50px"}),(function(){return Sq.isMobile?"40px":"50px"}),(function(e){return!e.active&&GK(["opacity:0.6;"])})),vfe=oq.div(rfe(),1020),yfe=oq.div(nfe()),bfe=oq.div(tfe()),xfe=oq.div(efe()),kfe=oq(Xde)(Jde()),wfe=oq(Qde)(Zde(),(function(e){var t=e.color;return null!=t?t:"rgba(0, 0, 0, 0.6)"})),Ife=oq.div($de()),Cfe=uq(["from{opacity:1;}to{opacity:0;}"]),Efe=oq.div(Yde(),Cfe),Sfe=Sq.isMobile?{width:640}:null,Tfe={background:"#000000",opacity:.6};function Afe(e){var t=e.apiCheck,n=e.mode,r=e.onLivenessDetectionDone,a=e.onClose,o=e.onError,i=e.captureFrameData,s=e.frontCamera,u=e.customDirectionIcon,c=e.customStepTimeConstraints,l=e.onApiCheck,d=e.customErrors,f=e.framesIntervalTime,p=e.livenessSettings,h=Pk.useAsset("bg_camera_mask.png"),m=Pk.useAsset("bg_camera_mask_red.png"),g=yq(Tx.useState({}),2),v=g[0],y=g[1],b=v.yFaceDetectionError,x=v.yFaceVerificationStepsWrapper,k=yq(Tx.useState(""),2),w=k[0],I=k[1],C=Tx.useCallback((function(e){var t=e.lostY,n=e.height,r=t+25,a=r+30;return y({yFaceDetectionError:r,yFaceVerificationStepsWrapper:a+n+20}),{y:Math.floor(a)}}),[]),E=Sde({apiCheck:t,mode:n,bgCameraMask:h,bgCameraMaskRed:m,surroundStyle:Tfe,onLivenessDetectionDone:r,onError:o,cropAreaDimension:C,customDirectionIcon:u,captureFrameData:i,livenessSettings:p,setRemainingTime:I,customStepTimeConstraints:c,onApiCheck:l,customErrors:d,framesIntervalTime:f}),S=E.countdownToTakePicture,T=E.cropArea,A=E.curStepIndex,N=E.directionIcon,_=E.faceDetectionError,R=E.handleTriggerPassiveMode,O=E.handleVideoPlayed,F=E.instructions,M=E.isActiveMode,D=E.refVideo,B=E.showCountdown,P=E.steps,L=E.videoPlayed,U=E.activeCapturing,V=E.isFirstValidFrameFound;return Tx.createElement(oX,{frontCamera:s,onVideoPlayed:O,onClose:a,flipHorizontal:s,ref:D,videoSettings:Sfe,onError:o},L?Tx.createElement(Tx.Fragment,null,Tx.createElement(ffe,{top:b-15,className:"face-detection-error"},_),T.current?Tx.createElement(hX,{x:"".concat(T.current.x,"px"),y:"".concat(T.current.y,"px"),width:"".concat(T.current.width,"px"),height:"".concat(T.current.height,"px"),surroundStyle:T.current.surroundStyle},Tx.createElement(wfe,null),Tx.createElement(kfe,{progress:A/P.length*100,hasError:!!_,showDashedRing:!1,showOutsideRing:!1,insideRingWidth:1,errorRingWidth:1,insideRingStrokeDash:"2"}),B?Tx.createElement(bfe,null,S):null,M?Tx.createElement(Tx.Fragment,null,Tx.createElement(xfe,null,N),U&&Tx.createElement(Efe,null)):null,_&&Tx.createElement(Ife,null)):null,M?Tx.createElement(Tx.Fragment,null,w&&Tx.createElement(pfe,{top:x-30},w),F?Tx.createElement(hfe,{top:x+5,className:"instructions"},F):null,V&&Tx.createElement(mfe,{top:x+35},P.map((function(e,t){var n=e.name,r=e.image.objUrl;return Tx.createElement(gfe,{key:n,active:A>=t,className:"step-item"},r?Tx.createElement("img",{src:r,alt:""}):Tx.createElement("span",null,t+1))})))):Tx.createElement(Tx.Fragment,null,_?null:Tx.createElement(vfe,null,Tx.createElement(yfe,{onClick:R},Tx.createElement(mX,null))))):null)}Afe.propTypes={apiCheck:Tk.bool,mode:Tk.string,onLivenessDetectionDone:Tk.func,onClose:Tk.func,onError:Tk.func,captureFrameData:Tk.bool,frontCamera:Tk.bool,customDirectionIcon:Tk.shape({}),customStepTimeConstraints:Tk.shape({}),onApiCheck:Tk.func,customErrors:Tk.shape({}),framesIntervalTime:Tk.number,livenessSettings:Tk.shape({})},Afe.defaultProps={apiCheck:!1,mode:null,onLivenessDetectionDone:null,onClose:null,onError:function(){},captureFrameData:!1,frontCamera:!0,customDirectionIcon:(Gde={},pq(Gde,_k.FaceDirection.LEFT,Tx.createElement(Wde,{type:_k.FaceDirection.LEFT})),pq(Gde,_k.FaceDirection.RIGHT,Tx.createElement(Wde,{type:_k.FaceDirection.RIGHT})),pq(Gde,_k.FaceDirection.UP,Tx.createElement(Wde,{type:_k.FaceDirection.UP})),pq(Gde,_k.FaceDirection.FRONTAL,Tx.createElement(Wde,{type:_k.FaceDirection.FRONTAL})),Gde),customStepTimeConstraints:(Kde={},pq(Kde,_k.FaceDirection.UP,{delayTime:1e3}),pq(Kde,_k.FaceDirection.LEFT,{delayTime:1e3}),pq(Kde,_k.FaceDirection.RIGHT,{delayTime:1e3}),pq(Kde,_k.FaceDirection.FRONTAL,{delayTime:2e3}),Kde),onApiCheck:function(){},customErrors:null,framesIntervalTime:180,livenessSettings:null};var Nfe=Object.freeze({__proto__:null,Text:dfe,FaceDetectionError:ffe,CountdownTime:pfe,FaceVerificationInstructions:hfe,FaceVerificationStepsWrapper:mfe,StepItem:gfe,BottomButtonsOverlay:vfe,Button:yfe,CountDownOverlay:bfe,InstructionsOverlay:xfe,default:Afe,useLivenessDetection:Sde});function _fe(){return(_fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rfe(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Ofe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Ffe(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}
/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/var Mfe=Object.getOwnPropertySymbols,Dfe=Object.prototype.hasOwnProperty,Bfe=Object.prototype.propertyIsEnumerable;function Pfe(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var Lfe=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,a=Pfe(e),o=1;o<arguments.length;o++){for(var i in n=Object(arguments[o]))Dfe.call(n,i)&&(a[i]=n[i]);if(Mfe){r=Mfe(n);for(var s=0;s<r.length;s++)Bfe.call(n,r[s])&&(a[r[s]]=n[r[s]])}}return a},Ufe=Cq((function(e,t){var n,r,a,o,i;if("undefined"==typeof window||"function"!=typeof MessageChannel){var s=null,u=null,c=function e(){if(null!==s)try{var n=t.unstable_now();s(!0,n),s=null}catch(n){throw setTimeout(e,0),n}},l=Date.now();t.unstable_now=function(){return Date.now()-l},n=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){null!==s?setTimeout(n,0,e):(s=e,setTimeout(c,0))})),r=function(e,t){u=setTimeout(e,t)},a=function(){clearTimeout(u)},o=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,f=window.Date,p=window.setTimeout,h=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==Ty(d)&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var g=f.now();t.unstable_now=function(){return f.now()-g}}var v=!1,y=null,b=-1,x=5,k=0;o=function(){return t.unstable_now()>=k},i=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):x=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,I=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+x;try{y(!0,e)?I.postMessage(null):(v=!1,y=null)}catch(e){throw I.postMessage(null),e}}else v=!1},n=function(e){y=e,v||(v=!0,I.postMessage(null))},r=function(e,n){b=p((function(){e(t.unstable_now())}),n)},a=function(){h(b),b=-1}}function C(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<T(a,t)))break e;e[r]=t,e[n]=a,n=r}}function E(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var o=2*(r+1)-1,i=e[o],s=o+1,u=e[s];if(void 0!==i&&0>T(i,n))void 0!==u&&0>T(u,i)?(e[r]=u,e[s]=n,r=s):(e[r]=i,e[o]=n,r=o);else{if(!(void 0!==u&&0>T(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],N=[],_=1,R=null,O=3,F=!1,M=!1,D=!1;function B(e){for(var t=E(N);null!==t;){if(null===t.callback)S(N);else{if(!(t.startTime<=e))break;S(N),t.sortIndex=t.expirationTime,C(A,t)}t=E(N)}}function P(e){if(D=!1,B(e),!M)if(null!==E(A))M=!0,n(L);else{var t=E(N);null!==t&&r(P,t.startTime-e)}}function L(e,n){M=!1,D&&(D=!1,a()),F=!0;var i=O;try{for(B(n),R=E(A);null!==R&&(!(R.expirationTime>n)||e&&!o());){var s=R.callback;if(null!==s){R.callback=null,O=R.priorityLevel;var u=s(R.expirationTime<=n);n=t.unstable_now(),"function"==typeof u?R.callback=u:R===E(A)&&S(A),B(n)}else S(A);R=E(A)}if(null!==R)var c=!0;else{var l=E(N);null!==l&&r(P,l.startTime-n),c=!1}return c}finally{R=null,O=i,F=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){M||F||(M=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return E(A)},t.unstable_next=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},t.unstable_scheduleCallback=function(e,o,i){var s=t.unstable_now();if("object"==Ty(i)&&null!==i){var u=i.delay;u="number"==typeof u&&0<u?s+u:s,i="number"==typeof i.timeout?i.timeout:U(e)}else i=U(e),u=s;return e={id:_++,callback:o,priorityLevel:e,startTime:u,expirationTime:i=u+i,sortIndex:-1},u>s?(e.sortIndex=u,C(N,e),null===E(A)&&e===E(N)&&(D?a():D=!0,r(P,u-s))):(e.sortIndex=i,C(A,e),M||F||(M=!0,n(L))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();B(e);var n=E(A);return n!==R&&null!==R&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<R.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}}})),Vfe=(Cq((function(e,t){})),Cq((function(e){e.exports=Ufe})));function Wfe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Tx)throw Error(Wfe(227));function zfe(e,t,n,r,a,o,i,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var jfe=!1,Hfe=null,Gfe=!1,Kfe=null,qfe={onError:function(e){jfe=!0,Hfe=e}};function Xfe(e,t,n,r,a,o,i,s,u){jfe=!1,Hfe=null,zfe.apply(qfe,arguments)}var Qfe=null,Yfe=null,$fe=null;function Zfe(e,t,n){var r=e.type||"unknown-event";e.currentTarget=$fe(n),function(e,t,n,r,a,o,i,s,u){if(Xfe.apply(this,arguments),jfe){if(!jfe)throw Error(Wfe(198));var c=Hfe;jfe=!1,Hfe=null,Gfe||(Gfe=!0,Kfe=c)}}(r,t,void 0,e),e.currentTarget=null}var Jfe=null,epe={};function tpe(){if(Jfe)for(var e in epe){var t=epe[e],n=Jfe.indexOf(e);if(!(-1<n))throw Error(Wfe(96,e));if(!rpe[n]){if(!t.extractEvents)throw Error(Wfe(97,e));for(var r in rpe[n]=t,n=t.eventTypes){var a=void 0,o=n[r],i=t,s=r;if(ape.hasOwnProperty(s))throw Error(Wfe(99,s));ape[s]=o;var u=o.phasedRegistrationNames;if(u){for(a in u)u.hasOwnProperty(a)&&npe(u[a],i,s);a=!0}else o.registrationName?(npe(o.registrationName,i,s),a=!0):a=!1;if(!a)throw Error(Wfe(98,r,e))}}}}function npe(e,t,n){if(ope[e])throw Error(Wfe(100,e));ope[e]=t,ipe[e]=t.eventTypes[n].dependencies}var rpe=[],ape={},ope={},ipe={};function spe(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!epe.hasOwnProperty(t)||epe[t]!==r){if(epe[t])throw Error(Wfe(102,t));epe[t]=r,n=!0}}n&&tpe()}var upe=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),cpe=null,lpe=null,dpe=null;function fpe(e){if(e=Yfe(e)){if("function"!=typeof cpe)throw Error(Wfe(280));var t=e.stateNode;t&&(t=Qfe(t),cpe(e.stateNode,e.type,t))}}function ppe(e){lpe?dpe?dpe.push(e):dpe=[e]:lpe=e}function hpe(){if(lpe){var e=lpe,t=dpe;if(dpe=lpe=null,fpe(e),t)for(e=0;e<t.length;e++)fpe(t[e])}}function mpe(e,t){return e(t)}function gpe(e,t,n,r,a){return e(t,n,r,a)}function vpe(){}var ype=mpe,bpe=!1,xpe=!1;function kpe(){null===lpe&&null===dpe||(vpe(),hpe())}function wpe(e,t,n){if(xpe)return e(t,n);xpe=!0;try{return ype(e,t,n)}finally{xpe=!1,kpe()}}var Ipe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cpe=Object.prototype.hasOwnProperty,Epe={},Spe={};function Tpe(e,t,n,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var Ape={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){Ape[e]=new Tpe(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];Ape[t]=new Tpe(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Ape[e]=new Tpe(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Ape[e]=new Tpe(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){Ape[e]=new Tpe(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Ape[e]=new Tpe(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){Ape[e]=new Tpe(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){Ape[e]=new Tpe(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){Ape[e]=new Tpe(e,5,!1,e.toLowerCase(),null,!1)}));var Npe=/[\-:]([a-z])/g;function _pe(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Npe,_pe);Ape[t]=new Tpe(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Npe,_pe);Ape[t]=new Tpe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Npe,_pe);Ape[t]=new Tpe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){Ape[e]=new Tpe(e,1,!1,e.toLowerCase(),null,!1)})),Ape.xlinkHref=new Tpe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){Ape[e]=new Tpe(e,1,!1,e.toLowerCase(),null,!0)}));var Rpe=Tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Ope(e,t,n,r){var a=Ape.hasOwnProperty(t)?Ape[t]:null;(null!==a?0===a.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(Ty(t)){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!Cpe.call(Spe,e)||!Cpe.call(Epe,e)&&(Ipe.test(e)?Spe[e]=!0:(Epe[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}Rpe.hasOwnProperty("ReactCurrentDispatcher")||(Rpe.ReactCurrentDispatcher={current:null}),Rpe.hasOwnProperty("ReactCurrentBatchConfig")||(Rpe.ReactCurrentBatchConfig={suspense:null});var Fpe=/^(.*)[\\\/]/,Mpe="function"==typeof Symbol&&Symbol.for,Dpe=Mpe?Symbol.for("react.element"):60103,Bpe=Mpe?Symbol.for("react.portal"):60106,Ppe=Mpe?Symbol.for("react.fragment"):60107,Lpe=Mpe?Symbol.for("react.strict_mode"):60108,Upe=Mpe?Symbol.for("react.profiler"):60114,Vpe=Mpe?Symbol.for("react.provider"):60109,Wpe=Mpe?Symbol.for("react.context"):60110,zpe=Mpe?Symbol.for("react.concurrent_mode"):60111,jpe=Mpe?Symbol.for("react.forward_ref"):60112,Hpe=Mpe?Symbol.for("react.suspense"):60113,Gpe=Mpe?Symbol.for("react.suspense_list"):60120,Kpe=Mpe?Symbol.for("react.memo"):60115,qpe=Mpe?Symbol.for("react.lazy"):60116,Xpe=Mpe?Symbol.for("react.block"):60121,Qpe="function"==typeof Symbol&&Symbol.iterator;function Ype(e){return null===e||"object"!=Ty(e)?null:"function"==typeof(e=Qpe&&e[Qpe]||e["@@iterator"])?e:null}function $pe(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Ppe:return"Fragment";case Bpe:return"Portal";case Upe:return"Profiler";case Lpe:return"StrictMode";case Hpe:return"Suspense";case Gpe:return"SuspenseList"}if("object"==Ty(e))switch(e.$$typeof){case Wpe:return"Context.Consumer";case Vpe:return"Context.Provider";case jpe:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Kpe:return $pe(e.type);case Xpe:return $pe(e.render);case qpe:if(e=1===e._status?e._result:null)return $pe(e)}return null}function Zpe(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,a=e._debugSource,o=$pe(e.type);n=null,r&&(n=$pe(r.type)),r=o,o="",a?o=" (at "+a.fileName.replace(Fpe,"")+":"+a.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function Jpe(e){switch(Ty(e)){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ehe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function the(e){e._valueTracker||(e._valueTracker=function(e){var t=ehe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function nhe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ehe(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function rhe(e,t){var n=t.checked;return Lfe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ahe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Jpe(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ohe(e,t){null!=(t=t.checked)&&Ope(e,"checked",t,!1)}function ihe(e,t){ohe(e,t);var n=Jpe(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?uhe(e,t.type,n):t.hasOwnProperty("defaultValue")&&uhe(e,t.type,Jpe(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function she(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function uhe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function che(e,t){return e=Lfe({children:void 0},t),(t=function(e){var t="";return Tx.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function lhe(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Jpe(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function dhe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(Wfe(91));return Lfe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fhe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(Wfe(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Wfe(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Jpe(n)}}function phe(e,t){var n=Jpe(t.value),r=Jpe(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function hhe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var mhe="http://www.w3.org/1999/xhtml",ghe="http://www.w3.org/2000/svg";function vhe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yhe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?vhe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var bhe,xhe,khe=(xhe=function(e,t){if(e.namespaceURI!==ghe||"innerHTML"in e)e.innerHTML=t;else{for((bhe=bhe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=bhe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return xhe(e,t)}))}:xhe);function whe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ihe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Che={animationend:Ihe("Animation","AnimationEnd"),animationiteration:Ihe("Animation","AnimationIteration"),animationstart:Ihe("Animation","AnimationStart"),transitionend:Ihe("Transition","TransitionEnd")},Ehe={},She={};function The(e){if(Ehe[e])return Ehe[e];if(!Che[e])return e;var t,n=Che[e];for(t in n)if(n.hasOwnProperty(t)&&t in She)return Ehe[e]=n[t];return e}upe&&(She=document.createElement("div").style,"AnimationEvent"in window||(delete Che.animationend.animation,delete Che.animationiteration.animation,delete Che.animationstart.animation),"TransitionEvent"in window||delete Che.transitionend.transition);var Ahe=The("animationend"),Nhe=The("animationiteration"),_he=The("animationstart"),Rhe=The("transitionend"),Ohe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fhe=new("function"==typeof WeakMap?WeakMap:Map);function Mhe(e){var t=Fhe.get(e);return void 0===t&&(t=new Map,Fhe.set(e,t)),t}function Dhe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Bhe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Phe(e){if(Dhe(e)!==e)throw Error(Wfe(188))}function Lhe(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Dhe(e)))throw Error(Wfe(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Phe(a),e;if(o===r)return Phe(a),t;o=o.sibling}throw Error(Wfe(188))}if(n.return!==r.return)n=a,r=o;else{for(var i=!1,s=a.child;s;){if(s===n){i=!0,n=a,r=o;break}if(s===r){i=!0,r=a,n=o;break}s=s.sibling}if(!i){for(s=o.child;s;){if(s===n){i=!0,n=o,r=a;break}if(s===r){i=!0,r=o,n=a;break}s=s.sibling}if(!i)throw Error(Wfe(189))}}if(n.alternate!==r)throw Error(Wfe(190))}if(3!==n.tag)throw Error(Wfe(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Uhe(e,t){if(null==t)throw Error(Wfe(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function Vhe(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var Whe=null;function zhe(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)Zfe(e,t[r],n[r]);else t&&Zfe(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function jhe(e){if(null!==e&&(Whe=Uhe(Whe,e)),e=Whe,Whe=null,e){if(Vhe(e,zhe),Whe)throw Error(Wfe(95));if(Gfe)throw e=Kfe,Gfe=!1,Kfe=null,e}}function Hhe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Ghe(e){if(!upe)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var Khe=[];function qhe(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Khe.length&&Khe.push(e)}function Xhe(e,t,n,r){if(Khe.length){var a=Khe.pop();return a.topLevelType=e,a.eventSystemFlags=r,a.nativeEvent=t,a.targetInst=n,a}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function Qhe(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=cge(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var a=Hhe(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,i=e.eventSystemFlags;0===n&&(i|=64);for(var s=null,u=0;u<rpe.length;u++){var c=rpe[u];c&&(c=c.extractEvents(r,t,o,a,i))&&(s=Uhe(s,c))}jhe(s)}}function Yhe(e,t,n){if(!n.has(e)){switch(e){case"scroll":_me(t,"scroll",!0);break;case"focus":case"blur":_me(t,"focus",!0),_me(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":Ghe(e)&&_me(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ohe.indexOf(e)&&Nme(e,t)}n.set(e,null)}}var $he,Zhe,Jhe,eme=!1,tme=[],nme=null,rme=null,ame=null,ome=new Map,ime=new Map,sme=[],ume="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),cme="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function lme(e,t,n,r,a){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:a,container:r}}function dme(e,t){switch(e){case"focus":case"blur":nme=null;break;case"dragenter":case"dragleave":rme=null;break;case"mouseover":case"mouseout":ame=null;break;case"pointerover":case"pointerout":ome.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ime.delete(t.pointerId)}}function fme(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e=lme(t,n,r,a,o),null!==t&&null!==(t=lge(t))&&Zhe(t),e):(e.eventSystemFlags|=r,e)}function pme(e){var t=cge(e.target);if(null!==t){var n=Dhe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Bhe(n)))return e.blockedOn=t,void Vfe.unstable_runWithPriority(e.priority,(function(){Jhe(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function hme(e){if(null!==e.blockedOn)return!1;var t=Mme(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=lge(t);return null!==n&&Zhe(n),e.blockedOn=t,!1}return!0}function mme(e,t,n){hme(e)&&n.delete(t)}function gme(){for(eme=!1;0<tme.length;){var e=tme[0];if(null!==e.blockedOn){null!==(e=lge(e.blockedOn))&&$he(e);break}var t=Mme(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:tme.shift()}null!==nme&&hme(nme)&&(nme=null),null!==rme&&hme(rme)&&(rme=null),null!==ame&&hme(ame)&&(ame=null),ome.forEach(mme),ime.forEach(mme)}function vme(e,t){e.blockedOn===t&&(e.blockedOn=null,eme||(eme=!0,Vfe.unstable_scheduleCallback(Vfe.unstable_NormalPriority,gme)))}function yme(e){function t(t){return vme(t,e)}if(0<tme.length){vme(tme[0],e);for(var n=1;n<tme.length;n++){var r=tme[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==nme&&vme(nme,e),null!==rme&&vme(rme,e),null!==ame&&vme(ame,e),ome.forEach(t),ime.forEach(t),n=0;n<sme.length;n++)(r=sme[n]).blockedOn===e&&(r.blockedOn=null);for(;0<sme.length&&null===(n=sme[0]).blockedOn;)pme(n),null===n.blockedOn&&sme.shift()}var bme={},xme=new Map,kme=new Map,wme=["abort","abort",Ahe,"animationEnd",Nhe,"animationIteration",_he,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rhe,"transitionEnd","waiting","waiting"];function Ime(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1],o="on"+(a[0].toUpperCase()+a.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},kme.set(r,t),xme.set(r,o),bme[a]=o}}Ime("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ime("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ime(wme,2);for(var Cme="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Eme=0;Eme<Cme.length;Eme++)kme.set(Cme[Eme],0);var Sme=Vfe.unstable_UserBlockingPriority,Tme=Vfe.unstable_runWithPriority,Ame=!0;function Nme(e,t){_me(t,e,!1)}function _me(e,t,n){var r=kme.get(t);switch(void 0===r?2:r){case 0:r=Rme.bind(null,t,1,e);break;case 1:r=Ome.bind(null,t,1,e);break;default:r=Fme.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Rme(e,t,n,r){bpe||vpe();var a=Fme,o=bpe;bpe=!0;try{gpe(a,e,t,n,r)}finally{(bpe=o)||kpe()}}function Ome(e,t,n,r){Tme(Sme,Fme.bind(null,e,t,n,r))}function Fme(e,t,n,r){if(Ame)if(0<tme.length&&-1<ume.indexOf(e))e=lme(null,e,t,n,r),tme.push(e);else{var a=Mme(e,t,n,r);if(null===a)dme(e,r);else if(-1<ume.indexOf(e))e=lme(a,e,t,n,r),tme.push(e);else if(!function(e,t,n,r,a){switch(t){case"focus":return nme=fme(nme,e,t,n,r,a),!0;case"dragenter":return rme=fme(rme,e,t,n,r,a),!0;case"mouseover":return ame=fme(ame,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return ome.set(o,fme(ome.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,ime.set(o,fme(ime.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r)){dme(e,r),e=Xhe(e,r,null,t);try{wpe(Qhe,e)}finally{qhe(e)}}}}function Mme(e,t,n,r){if(null!==(n=cge(n=Hhe(r)))){var a=Dhe(n);if(null===a)n=null;else{var o=a.tag;if(13===o){if(null!==(n=Bhe(a)))return n;n=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}e=Xhe(e,r,n,t);try{wpe(Qhe,e)}finally{qhe(e)}return null}var Dme={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bme=["Webkit","ms","Moz","O"];function Pme(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Dme.hasOwnProperty(e)&&Dme[e]?(""+t).trim():t+"px"}function Lme(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=Pme(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(Dme).forEach((function(e){Bme.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dme[t]=Dme[e]}))}));var Ume=Lfe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vme(e,t){if(t){if(Ume[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(Wfe(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(Wfe(60));if("object"!=Ty(t.dangerouslySetInnerHTML)||!("__html"in t.dangerouslySetInnerHTML))throw Error(Wfe(61))}if(null!=t.style&&"object"!=Ty(t.style))throw Error(Wfe(62,""))}}function Wme(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zme=mhe;function jme(e,t){var n=Mhe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=ipe[t];for(var r=0;r<t.length;r++)Yhe(t[r],e,n)}function Hme(){}function Gme(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Kme(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qme(e,t){var n,r=Kme(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kme(r)}}function Xme(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Xme(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Qme(){for(var e=window,t=Gme();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Gme((e=t.contentWindow).document)}return t}function Yme(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var $me=null,Zme=null;function Jme(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function ege(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==Ty(t.dangerouslySetInnerHTML)&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var tge="function"==typeof setTimeout?setTimeout:void 0,nge="function"==typeof clearTimeout?clearTimeout:void 0;function rge(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function age(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var oge=Math.random().toString(36).slice(2),ige="__reactInternalInstance$"+oge,sge="__reactEventHandlers$"+oge,uge="__reactContainere$"+oge;function cge(e){var t=e[ige];if(t)return t;for(var n=e.parentNode;n;){if(t=n[uge]||n[ige]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=age(e);null!==e;){if(n=e[ige])return n;e=age(e)}return t}n=(e=n).parentNode}return null}function lge(e){return!(e=e[ige]||e[uge])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function dge(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(Wfe(33))}function fge(e){return e[sge]||null}function pge(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function hge(e,t){var n=e.stateNode;if(!n)return null;var r=Qfe(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(Wfe(231,t,Ty(n)));return n}function mge(e,t,n){(t=hge(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=Uhe(n._dispatchListeners,t),n._dispatchInstances=Uhe(n._dispatchInstances,e))}function gge(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=pge(t);for(t=n.length;0<t--;)mge(n[t],"captured",e);for(t=0;t<n.length;t++)mge(n[t],"bubbled",e)}}function vge(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=hge(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=Uhe(n._dispatchListeners,t),n._dispatchInstances=Uhe(n._dispatchInstances,e))}function yge(e){e&&e.dispatchConfig.registrationName&&vge(e._targetInst,null,e)}function bge(e){Vhe(e,gge)}var xge=null,kge=null,wge=null;function Ige(){if(wge)return wge;var e,t,n=kge,r=n.length,a="value"in xge?xge.value:xge.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return wge=a.slice(e,1<t?1-t:void 0)}function Cge(){return!0}function Ege(){return!1}function Sge(e,t,n,r){for(var a in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(a)&&((t=e[a])?this[a]=t(n):"target"===a?this.target=r:this[a]=n[a]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Cge:Ege,this.isPropagationStopped=Ege,this}function Tge(e,t,n,r){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,e,t,n,r),a}return new this(e,t,n,r)}function Age(e){if(!(e instanceof this))throw Error(Wfe(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Nge(e){e.eventPool=[],e.getPooled=Tge,e.release=Age}Lfe(Sge.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Cge)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Cge)},persist:function(){this.isPersistent=Cge},isPersistent:Ege,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Ege,this._dispatchInstances=this._dispatchListeners=null}}),Sge.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Sge.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return Lfe(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=Lfe({},r.Interface,e),n.extend=r.extend,Nge(n),n},Nge(Sge);var _ge=Sge.extend({data:null}),Rge=Sge.extend({data:null}),Oge=[9,13,27,32],Fge=upe&&"CompositionEvent"in window,Mge=null;upe&&"documentMode"in document&&(Mge=document.documentMode);var Dge=upe&&"TextEvent"in window&&!Mge,Bge=upe&&(!Fge||Mge&&8<Mge&&11>=Mge),Pge=String.fromCharCode(32),Lge={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Uge=!1;function Vge(e,t){switch(e){case"keyup":return-1!==Oge.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Wge(e){return"object"==Ty(e=e.detail)&&"data"in e?e.data:null}var zge=!1,jge={eventTypes:Lge,extractEvents:function(e,t,n,r){var a;if(Fge)e:{switch(e){case"compositionstart":var o=Lge.compositionStart;break e;case"compositionend":o=Lge.compositionEnd;break e;case"compositionupdate":o=Lge.compositionUpdate;break e}o=void 0}else zge?Vge(e,n)&&(o=Lge.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=Lge.compositionStart);return o?(Bge&&"ko"!==n.locale&&(zge||o!==Lge.compositionStart?o===Lge.compositionEnd&&zge&&(a=Ige()):(kge="value"in(xge=r)?xge.value:xge.textContent,zge=!0)),o=_ge.getPooled(o,t,n,r),(a||null!==(a=Wge(n)))&&(o.data=a),bge(o),a=o):a=null,(e=Dge?function(e,t){switch(e){case"compositionend":return Wge(t);case"keypress":return 32!==t.which?null:(Uge=!0,Pge);case"textInput":return(e=t.data)===Pge&&Uge?null:e;default:return null}}(e,n):function(e,t){if(zge)return"compositionend"===e||!Fge&&Vge(e,t)?(e=Ige(),wge=kge=xge=null,zge=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bge&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Rge.getPooled(Lge.beforeInput,t,n,r)).data=e,bge(t)):t=null,null===a?t:null===t?a:[a,t]}},Hge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gge(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hge[e.type]:"textarea"===t}var Kge={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function qge(e,t,n){return(e=Sge.getPooled(Kge.change,e,t,n)).type="change",ppe(n),bge(e),e}var Xge=null,Qge=null;function Yge(e){jhe(e)}function $ge(e){if(nhe(dge(e)))return e}function Zge(e,t){if("change"===e)return t}var Jge=!1;function eve(){Xge&&(Xge.detachEvent("onpropertychange",tve),Qge=Xge=null)}function tve(e){if("value"===e.propertyName&&$ge(Qge))if(e=qge(Qge,e,Hhe(e)),bpe)jhe(e);else{bpe=!0;try{mpe(Yge,e)}finally{bpe=!1,kpe()}}}function nve(e,t,n){"focus"===e?(eve(),Qge=n,(Xge=t).attachEvent("onpropertychange",tve)):"blur"===e&&eve()}function rve(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $ge(Qge)}function ave(e,t){if("click"===e)return $ge(t)}function ove(e,t){if("input"===e||"change"===e)return $ge(t)}upe&&(Jge=Ghe("input")&&(!document.documentMode||9<document.documentMode));var ive={eventTypes:Kge,_isInputEventSupported:Jge,extractEvents:function(e,t,n,r){var a=t?dge(t):window,o=a.nodeName&&a.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===a.type)var i=Zge;else if(Gge(a))if(Jge)i=ove;else{i=rve;var s=nve}else(o=a.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(i=ave);if(i&&(i=i(e,t)))return qge(i,n,r);s&&s(e,a,t),"blur"===e&&(e=a._wrapperState)&&e.controlled&&"number"===a.type&&uhe(a,"number",a.value)}},sve=Sge.extend({view:null,detail:null}),uve={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cve(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=uve[e])&&!!t[e]}function lve(){return cve}var dve=0,fve=0,pve=!1,hve=!1,mve=sve.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:lve,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=dve;return dve=e.screenX,pve?"mousemove"===e.type?e.screenX-t:0:(pve=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=fve;return fve=e.screenY,hve?"mousemove"===e.type?e.screenY-t:0:(hve=!0,0)}}),gve=mve.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),vve={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},yve={eventTypes:vve,extractEvents:function(e,t,n,r,a){var o="mouseover"===e||"pointerover"===e,i="mouseout"===e||"pointerout"===e;if(o&&0==(32&a)&&(n.relatedTarget||n.fromElement)||!i&&!o)return null;if(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,i?(i=t,null!==(t=(t=n.relatedTarget||n.toElement)?cge(t):null)&&(t!==Dhe(t)||5!==t.tag&&6!==t.tag)&&(t=null)):i=null,i===t)return null;if("mouseout"===e||"mouseover"===e)var s=mve,u=vve.mouseLeave,c=vve.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=gve,u=vve.pointerLeave,c=vve.pointerEnter,l="pointer");if(e=null==i?o:dge(i),o=null==t?o:dge(t),(u=s.getPooled(u,i,n,r)).type=l+"leave",u.target=e,u.relatedTarget=o,(n=s.getPooled(c,t,n,r)).type=l+"enter",n.target=o,n.relatedTarget=e,l=t,(r=i)&&l)e:{for(c=l,i=0,e=s=r;e;e=pge(e))i++;for(e=0,t=c;t;t=pge(t))e++;for(;0<i-e;)s=pge(s),i--;for(;0<e-i;)c=pge(c),e--;for(;i--;){if(s===c||s===c.alternate)break e;s=pge(s),c=pge(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(i=r.alternate)||i!==c);)s.push(r),r=pge(r);for(r=[];l&&l!==c&&(null===(i=l.alternate)||i!==c);)r.push(l),l=pge(l);for(l=0;l<s.length;l++)vge(s[l],"bubbled",u);for(l=r.length;0<l--;)vge(r[l],"captured",n);return 0==(64&a)?[u]:[u,n]}},bve="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},xve=Object.prototype.hasOwnProperty;function kve(e,t){if(bve(e,t))return!0;if("object"!=Ty(e)||null===e||"object"!=Ty(t)||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!xve.call(t,n[r])||!bve(e[n[r]],t[n[r]]))return!1;return!0}var wve=upe&&"documentMode"in document&&11>=document.documentMode,Ive={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Cve=null,Eve=null,Sve=null,Tve=!1;function Ave(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Tve||null==Cve||Cve!==Gme(n)?null:(n="selectionStart"in(n=Cve)&&Yme(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Sve&&kve(Sve,n)?null:(Sve=n,(e=Sge.getPooled(Ive.select,Eve,e,t)).type="select",e.target=Cve,bge(e),e))}var Nve={eventTypes:Ive,extractEvents:function(e,t,n,r,a,o){if(!(o=!(a=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{a=Mhe(a),o=ipe.onSelect;for(var i=0;i<o.length;i++)if(!a.has(o[i])){a=!1;break e}a=!0}o=!a}if(o)return null;switch(a=t?dge(t):window,e){case"focus":(Gge(a)||"true"===a.contentEditable)&&(Cve=a,Eve=t,Sve=null);break;case"blur":Sve=Eve=Cve=null;break;case"mousedown":Tve=!0;break;case"contextmenu":case"mouseup":case"dragend":return Tve=!1,Ave(n,r);case"selectionchange":if(wve)break;case"keydown":case"keyup":return Ave(n,r)}return null}},_ve=Sge.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Rve=Sge.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ove=sve.extend({relatedTarget:null});function Fve(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Mve={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dve={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bve=sve.extend({key:function(e){if(e.key){var t=Mve[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Fve(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Dve[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:lve,charCode:function(e){return"keypress"===e.type?Fve(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Fve(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pve=mve.extend({dataTransfer:null}),Lve=sve.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:lve}),Uve=Sge.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Vve=mve.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Wve={eventTypes:bme,extractEvents:function(e,t,n,r){var a=xme.get(e);if(!a)return null;switch(e){case"keypress":if(0===Fve(n))return null;case"keydown":case"keyup":e=Bve;break;case"blur":case"focus":e=Ove;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=mve;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=Pve;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=Lve;break;case Ahe:case Nhe:case _he:e=_ve;break;case Rhe:e=Uve;break;case"scroll":e=sve;break;case"wheel":e=Vve;break;case"copy":case"cut":case"paste":e=Rve;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=gve;break;default:e=Sge}return bge(t=e.getPooled(a,t,n,r)),t}};if(Jfe)throw Error(Wfe(101));Jfe=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),tpe(),Qfe=fge,Yfe=lge,$fe=dge,spe({SimpleEventPlugin:Wve,EnterLeaveEventPlugin:yve,ChangeEventPlugin:ive,SelectEventPlugin:Nve,BeforeInputEventPlugin:jge});var zve=[],jve=-1;function Hve(e){0>jve||(e.current=zve[jve],zve[jve]=null,jve--)}function Gve(e,t){jve++,zve[jve]=e.current,e.current=t}var Kve={},qve={current:Kve},Xve={current:!1},Qve=Kve;function Yve(e,t){var n=e.type.contextTypes;if(!n)return Kve;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function $ve(e){return null!=e.childContextTypes}function Zve(){Hve(Xve),Hve(qve)}function Jve(e,t,n){if(qve.current!==Kve)throw Error(Wfe(168));Gve(qve,t),Gve(Xve,n)}function eye(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(Wfe(108,$pe(t)||"Unknown",a));return Lfe({},n,{},r)}function tye(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kve,Qve=qve.current,Gve(qve,e),Gve(Xve,Xve.current),!0}function nye(e,t,n){var r=e.stateNode;if(!r)throw Error(Wfe(169));n?(e=eye(e,t,Qve),r.__reactInternalMemoizedMergedChildContext=e,Hve(Xve),Hve(qve),Gve(qve,e)):Hve(Xve),Gve(Xve,n)}var rye=Vfe.unstable_runWithPriority,aye=Vfe.unstable_scheduleCallback,oye=Vfe.unstable_cancelCallback,iye=Vfe.unstable_requestPaint,sye=Vfe.unstable_now,uye=Vfe.unstable_getCurrentPriorityLevel,cye=Vfe.unstable_ImmediatePriority,lye=Vfe.unstable_UserBlockingPriority,dye=Vfe.unstable_NormalPriority,fye=Vfe.unstable_LowPriority,pye=Vfe.unstable_IdlePriority,hye={},mye=Vfe.unstable_shouldYield,gye=void 0!==iye?iye:function(){},vye=null,yye=null,bye=!1,xye=sye(),kye=1e4>xye?sye:function(){return sye()-xye};function wye(){switch(uye()){case cye:return 99;case lye:return 98;case dye:return 97;case fye:return 96;case pye:return 95;default:throw Error(Wfe(332))}}function Iye(e){switch(e){case 99:return cye;case 98:return lye;case 97:return dye;case 96:return fye;case 95:return pye;default:throw Error(Wfe(332))}}function Cye(e,t){return e=Iye(e),rye(e,t)}function Eye(e,t,n){return e=Iye(e),aye(e,t,n)}function Sye(e){return null===vye?(vye=[e],yye=aye(cye,Aye)):vye.push(e),hye}function Tye(){if(null!==yye){var e=yye;yye=null,oye(e)}Aye()}function Aye(){if(!bye&&null!==vye){bye=!0;var e=0;try{var t=vye;Cye(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),vye=null}catch(t){throw null!==vye&&(vye=vye.slice(e+1)),aye(cye,Tye),t}finally{bye=!1}}}function Nye(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function _ye(e,t){if(e&&e.defaultProps)for(var n in t=Lfe({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Rye={current:null},Oye=null,Fye=null,Mye=null;function Dye(){Mye=Fye=Oye=null}function Bye(e){var t=Rye.current;Hve(Rye),e.type._context._currentValue=t}function Pye(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function Lye(e,t){Oye=e,Mye=Fye=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(dxe=!0),e.firstContext=null)}function Uye(e,t){if(Mye!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Mye=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Fye){if(null===Oye)throw Error(Wfe(308));Fye=t,Oye.dependencies={expirationTime:0,firstContext:t,responders:null}}else Fye=Fye.next=t;return e._currentValue}var Vye=!1;function Wye(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function zye(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function jye(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function Hye(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function Gye(e,t){var n=e.alternate;null!==n&&zye(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function Kye(e,t,n,r){var a=e.updateQueue;Vye=!1;var o=a.baseQueue,i=a.shared.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}o=i,a.shared.pending=null,null!==(s=e.alternate)&&null!==(s=s.updateQueue)&&(s.baseQueue=i)}if(null!==o){s=o.next;var u=a.baseState,c=0,l=null,d=null,f=null;if(null!==s)for(var p=s;;){if((i=p.expirationTime)<r){var h={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(d=f=h,l=u):f=f.next=h,i>c&&(c=i)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),zke(i,p.suspenseConfig);e:{var m=e,g=p;switch(i=t,h=n,g.tag){case 1:if("function"==typeof(m=g.payload)){u=m.call(h,u,i);break e}u=m;break e;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null==(i="function"==typeof(m=g.payload)?m.call(h,u,i):m))break e;u=Lfe({},u,i);break e;case 2:Vye=!0}}null!==p.callback&&(e.effectTag|=32,null===(i=a.effects)?a.effects=[p]:i.push(p))}if(null===(p=p.next)||p===s){if(null===(i=a.shared.pending))break;p=o.next=i.next,i.next=s,a.baseQueue=o=i,a.shared.pending=null}}null===f?l=u:f.next=d,a.baseState=l,a.baseQueue=f,jke(c),e.expirationTime=c,e.memoizedState=u}}function qye(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=a,a=n,"function"!=typeof r)throw Error(Wfe(191,r));r.call(a)}}}var Xye=Rpe.ReactCurrentBatchConfig,Qye=(new Tx.Component).refs;function Yye(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Lfe({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var $ye={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Dhe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Nke(),a=Xye.suspense;(a=jye(r=_ke(r,e,a),a)).payload=t,null!=n&&(a.callback=n),Hye(e,a),Rke(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Nke(),a=Xye.suspense;(a=jye(r=_ke(r,e,a),a)).tag=1,a.payload=t,null!=n&&(a.callback=n),Hye(e,a),Rke(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Nke(),r=Xye.suspense;(r=jye(n=_ke(n,e,r),r)).tag=2,null!=t&&(r.callback=t),Hye(e,r),Rke(e,n)}};function Zye(e,t,n,r,a,o,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!(t.prototype&&t.prototype.isPureReactComponent&&kve(n,r)&&kve(a,o))}function Jye(e,t,n){var r=!1,a=Kve,o=t.contextType;return"object"==Ty(o)&&null!==o?o=Uye(o):(a=$ve(t)?Qve:qve.current,o=(r=null!=(r=t.contextTypes))?Yve(e,a):Kve),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=$ye,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function ebe(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&$ye.enqueueReplaceState(t,t.state,null)}function tbe(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Qye,Wye(e);var o=t.contextType;"object"==Ty(o)&&null!==o?a.context=Uye(o):(o=$ve(t)?Qve:qve.current,a.context=Yve(e,o)),Kye(e,n,a,r),a.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(Yye(e,t,o,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&$ye.enqueueReplaceState(a,a.state,null),Kye(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.effectTag|=4)}var nbe=Array.isArray;function rbe(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=Ty(e)){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(Wfe(309));var r=n.stateNode}if(!r)throw Error(Wfe(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=r.refs;t===Qye&&(t=r.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(Wfe(284));if(!n._owner)throw Error(Wfe(290,e))}return e}function abe(e,t){if("textarea"!==e.type)throw Error(Wfe(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function obe(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=cwe(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function i(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=fwe(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=rbe(e,t,n),r.return=e,r):((r=lwe(n.type,n.key,n.props,null,e.mode,r)).ref=rbe(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=pwe(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function l(e,t,n,r,o){return null===t||7!==t.tag?((t=dwe(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=fwe(""+t,e.mode,n)).return=e,t;if("object"==Ty(t)&&null!==t){switch(t.$$typeof){case Dpe:return(n=lwe(t.type,t.key,t.props,null,e.mode,n)).ref=rbe(e,null,t),n.return=e,n;case Bpe:return(t=pwe(t,e.mode,n)).return=e,t}if(nbe(t)||Ype(t))return(t=dwe(t,e.mode,n,null)).return=e,t;abe(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==a?null:s(e,t,""+n,r);if("object"==Ty(n)&&null!==n){switch(n.$$typeof){case Dpe:return n.key===a?n.type===Ppe?l(e,t,n.props.children,r,a):u(e,t,n,r):null;case Bpe:return n.key===a?c(e,t,n,r):null}if(nbe(n)||Ype(n))return null!==a?null:l(e,t,n,r,null);abe(e,n)}return null}function p(e,t,n,r,a){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"==Ty(r)&&null!==r){switch(r.$$typeof){case Dpe:return e=e.get(null===r.key?n:r.key)||null,r.type===Ppe?l(t,e,r.props.children,a,r.key):u(t,e,r,a);case Bpe:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(nbe(r)||Ype(r))return l(t,e=e.get(n)||null,r,a,null);abe(t,r)}return null}function h(a,i,s,u){for(var c=null,l=null,h=i,m=i=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(a,h,s[m],u);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(a,h),i=o(v,i,m),null===l?c=v:l.sibling=v,l=v,h=g}if(m===s.length)return n(a,h),c;if(null===h){for(;m<s.length;m++)null!==(h=d(a,s[m],u))&&(i=o(h,i,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(a,h);m<s.length;m++)null!==(g=p(h,a,m,s[m],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),i=o(g,i,m),null===l?c=g:l.sibling=g,l=g);return e&&h.forEach((function(e){return t(a,e)})),c}function m(a,i,s,u){var c=Ype(s);if("function"!=typeof c)throw Error(Wfe(150));if(null==(s=c.call(s)))throw Error(Wfe(151));for(var l=c=null,h=i,m=i=0,g=null,v=s.next();null!==h&&!v.done;m++,v=s.next()){h.index>m?(g=h,h=null):g=h.sibling;var y=f(a,h,v.value,u);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(a,h),i=o(y,i,m),null===l?c=y:l.sibling=y,l=y,h=g}if(v.done)return n(a,h),c;if(null===h){for(;!v.done;m++,v=s.next())null!==(v=d(a,v.value,u))&&(i=o(v,i,m),null===l?c=v:l.sibling=v,l=v);return c}for(h=r(a,h);!v.done;m++,v=s.next())null!==(v=p(h,a,m,v.value,u))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),i=o(v,i,m),null===l?c=v:l.sibling=v,l=v);return e&&h.forEach((function(e){return t(a,e)})),c}return function(e,r,o,s){var u="object"==Ty(o)&&null!==o&&o.type===Ppe&&null===o.key;u&&(o=o.props.children);var c="object"==Ty(o)&&null!==o;if(c)switch(o.$$typeof){case Dpe:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){switch(u.tag){case 7:if(o.type===Ppe){n(e,u.sibling),(r=a(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=a(u,o.props)).ref=rbe(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===Ppe?((r=dwe(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=lwe(o.type,o.key,o.props,null,e.mode,s)).ref=rbe(e,r,o),s.return=e,e=s)}return i(e);case Bpe:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=a(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=pwe(o,e.mode,s)).return=e,e=r}return i(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,o)).return=e,e=r):(n(e,r),(r=fwe(o,e.mode,s)).return=e,e=r),i(e);if(nbe(o))return h(e,r,o,s);if(Ype(o))return m(e,r,o,s);if(c&&abe(e,o),void 0===o&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(Wfe(152,e.displayName||e.name||"Component"))}return n(e,r)}}var ibe=obe(!0),sbe=obe(!1),ube={},cbe={current:ube},lbe={current:ube},dbe={current:ube};function fbe(e){if(e===ube)throw Error(Wfe(174));return e}function pbe(e,t){switch(Gve(dbe,t),Gve(lbe,e),Gve(cbe,ube),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:yhe(null,"");break;default:t=yhe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Hve(cbe),Gve(cbe,t)}function hbe(){Hve(cbe),Hve(lbe),Hve(dbe)}function mbe(e){fbe(dbe.current);var t=fbe(cbe.current),n=yhe(t,e.type);t!==n&&(Gve(lbe,e),Gve(cbe,n))}function gbe(e){lbe.current===e&&(Hve(cbe),Hve(lbe))}var vbe={current:0};function ybe(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function bbe(e,t){return{responder:e,props:t}}var xbe=Rpe.ReactCurrentDispatcher,kbe=Rpe.ReactCurrentBatchConfig,wbe=0,Ibe=null,Cbe=null,Ebe=null,Sbe=!1;function Tbe(){throw Error(Wfe(321))}function Abe(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bve(e[n],t[n]))return!1;return!0}function Nbe(e,t,n,r,a,o){if(wbe=o,Ibe=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,xbe.current=null===e||null===e.memoizedState?Zbe:Jbe,e=n(r,a),t.expirationTime===wbe){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(Wfe(301));o+=1,Ebe=Cbe=null,t.updateQueue=null,xbe.current=exe,e=n(r,a)}while(t.expirationTime===wbe)}if(xbe.current=$be,t=null!==Cbe&&null!==Cbe.next,wbe=0,Ebe=Cbe=Ibe=null,Sbe=!1,t)throw Error(Wfe(300));return e}function _be(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ebe?Ibe.memoizedState=Ebe=e:Ebe=Ebe.next=e,Ebe}function Rbe(){if(null===Cbe){var e=Ibe.alternate;e=null!==e?e.memoizedState:null}else e=Cbe.next;var t=null===Ebe?Ibe.memoizedState:Ebe.next;if(null!==t)Ebe=t,Cbe=e;else{if(null===e)throw Error(Wfe(310));e={memoizedState:(Cbe=e).memoizedState,baseState:Cbe.baseState,baseQueue:Cbe.baseQueue,queue:Cbe.queue,next:null},null===Ebe?Ibe.memoizedState=Ebe=e:Ebe=Ebe.next=e}return Ebe}function Obe(e,t){return"function"==typeof t?t(e):t}function Fbe(e){var t=Rbe(),n=t.queue;if(null===n)throw Error(Wfe(311));n.lastRenderedReducer=e;var r=Cbe,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var i=a.next;a.next=o.next,o.next=i}r.baseQueue=a=o,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var s=i=o=null,u=a;do{var c=u.expirationTime;if(c<wbe){var l={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(i=s=l,o=r):s=s.next=l,c>Ibe.expirationTime&&(Ibe.expirationTime=c,jke(c))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),zke(c,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==a);null===s?o=r:s.next=i,bve(r,t.memoizedState)||(dxe=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Mbe(e){var t=Rbe(),n=t.queue;if(null===n)throw Error(Wfe(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var i=a=a.next;do{o=e(o,i.action),i=i.next}while(i!==a);bve(o,t.memoizedState)||(dxe=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Dbe(e){var t=_be();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Obe,lastRenderedState:e}).dispatch=Ybe.bind(null,Ibe,e),[t.memoizedState,e]}function Bbe(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ibe.updateQueue)?(t={lastEffect:null},Ibe.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pbe(){return Rbe().memoizedState}function Lbe(e,t,n,r){var a=_be();Ibe.effectTag|=e,a.memoizedState=Bbe(1|t,n,void 0,void 0===r?null:r)}function Ube(e,t,n,r){var a=Rbe();r=void 0===r?null:r;var o=void 0;if(null!==Cbe){var i=Cbe.memoizedState;if(o=i.destroy,null!==r&&Abe(r,i.deps))return void Bbe(t,n,o,r)}Ibe.effectTag|=e,a.memoizedState=Bbe(1|t,n,o,r)}function Vbe(e,t){return Lbe(516,4,e,t)}function Wbe(e,t){return Ube(516,4,e,t)}function zbe(e,t){return Ube(4,2,e,t)}function jbe(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Hbe(e,t,n){return n=null!=n?n.concat([e]):null,Ube(4,2,jbe.bind(null,t,e),n)}function Gbe(){}function Kbe(e,t){return _be().memoizedState=[e,void 0===t?null:t],e}function qbe(e,t){var n=Rbe();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Abe(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xbe(e,t){var n=Rbe();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Abe(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qbe(e,t,n){var r=wye();Cye(98>r?98:r,(function(){e(!0)})),Cye(97<r?97:r,(function(){var r=kbe.suspense;kbe.suspense=void 0===t?null:t;try{e(!1),n()}finally{kbe.suspense=r}}))}function Ybe(e,t,n){var r=Nke(),a=Xye.suspense;a={expirationTime:r=_ke(r,e,a),suspenseConfig:a,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Ibe||null!==o&&o===Ibe)Sbe=!0,a.expirationTime=wbe,Ibe.expirationTime=wbe;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.eagerReducer=o,a.eagerState=s,bve(s,i))return}catch(e){}Rke(e,r)}}var $be={readContext:Uye,useCallback:Tbe,useContext:Tbe,useEffect:Tbe,useImperativeHandle:Tbe,useLayoutEffect:Tbe,useMemo:Tbe,useReducer:Tbe,useRef:Tbe,useState:Tbe,useDebugValue:Tbe,useResponder:Tbe,useDeferredValue:Tbe,useTransition:Tbe},Zbe={readContext:Uye,useCallback:Kbe,useContext:Uye,useEffect:Vbe,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Lbe(4,2,jbe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lbe(4,2,e,t)},useMemo:function(e,t){var n=_be();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_be();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ybe.bind(null,Ibe,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_be().memoizedState=e},useState:Dbe,useDebugValue:Gbe,useResponder:bbe,useDeferredValue:function(e,t){var n=Dbe(e),r=n[0],a=n[1];return Vbe((function(){var n=kbe.suspense;kbe.suspense=void 0===t?null:t;try{a(e)}finally{kbe.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Dbe(!1),n=t[0];return t=t[1],[Kbe(Qbe.bind(null,t,e),[t,e]),n]}},Jbe={readContext:Uye,useCallback:qbe,useContext:Uye,useEffect:Wbe,useImperativeHandle:Hbe,useLayoutEffect:zbe,useMemo:Xbe,useReducer:Fbe,useRef:Pbe,useState:function(){return Fbe(Obe)},useDebugValue:Gbe,useResponder:bbe,useDeferredValue:function(e,t){var n=Fbe(Obe),r=n[0],a=n[1];return Wbe((function(){var n=kbe.suspense;kbe.suspense=void 0===t?null:t;try{a(e)}finally{kbe.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Fbe(Obe),n=t[0];return t=t[1],[qbe(Qbe.bind(null,t,e),[t,e]),n]}},exe={readContext:Uye,useCallback:qbe,useContext:Uye,useEffect:Wbe,useImperativeHandle:Hbe,useLayoutEffect:zbe,useMemo:Xbe,useReducer:Mbe,useRef:Pbe,useState:function(){return Mbe(Obe)},useDebugValue:Gbe,useResponder:bbe,useDeferredValue:function(e,t){var n=Mbe(Obe),r=n[0],a=n[1];return Wbe((function(){var n=kbe.suspense;kbe.suspense=void 0===t?null:t;try{a(e)}finally{kbe.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Mbe(Obe),n=t[0];return t=t[1],[qbe(Qbe.bind(null,t,e),[t,e]),n]}},txe=null,nxe=null,rxe=!1;function axe(e,t){var n=swe(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function oxe(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function ixe(e){if(rxe){var t=nxe;if(t){var n=t;if(!oxe(e,t)){if(!(t=rge(n.nextSibling))||!oxe(e,t))return e.effectTag=-1025&e.effectTag|2,rxe=!1,void(txe=e);axe(txe,n)}txe=e,nxe=rge(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,rxe=!1,txe=e}}function sxe(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;txe=e}function uxe(e){if(e!==txe)return!1;if(!rxe)return sxe(e),rxe=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!ege(t,e.memoizedProps))for(t=nxe;t;)axe(e,t),t=rge(t.nextSibling);if(sxe(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Wfe(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){nxe=rge(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}nxe=null}}else nxe=txe?rge(e.stateNode.nextSibling):null;return!0}function cxe(){nxe=txe=null,rxe=!1}var lxe=Rpe.ReactCurrentOwner,dxe=!1;function fxe(e,t,n,r){t.child=null===e?sbe(t,null,n,r):ibe(t,e.child,n,r)}function pxe(e,t,n,r,a){n=n.render;var o=t.ref;return Lye(t,a),r=Nbe(e,t,n,r,o,a),null===e||dxe?(t.effectTag|=1,fxe(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),Nxe(e,t,a))}function hxe(e,t,n,r,a,o){if(null===e){var i=n.type;return"function"!=typeof i||uwe(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=lwe(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,mxe(e,t,i,r,a,o))}return i=e.child,a<o&&(a=i.memoizedProps,(n=null!==(n=n.compare)?n:kve)(a,r)&&e.ref===t.ref)?Nxe(e,t,o):(t.effectTag|=1,(e=cwe(i,r)).ref=t.ref,e.return=t,t.child=e)}function mxe(e,t,n,r,a,o){return null!==e&&kve(e.memoizedProps,r)&&e.ref===t.ref&&(dxe=!1,a<o)?(t.expirationTime=e.expirationTime,Nxe(e,t,o)):vxe(e,t,n,r,o)}function gxe(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function vxe(e,t,n,r,a){var o=$ve(n)?Qve:qve.current;return o=Yve(t,o),Lye(t,a),n=Nbe(e,t,n,r,o,a),null===e||dxe?(t.effectTag|=1,fxe(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),Nxe(e,t,a))}function yxe(e,t,n,r,a){if($ve(n)){var o=!0;tye(t)}else o=!1;if(Lye(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Jye(t,n,r),tbe(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var u=i.context,c=n.contextType;c="object"==Ty(c)&&null!==c?Uye(c):Yve(t,c=$ve(n)?Qve:qve.current);var l=n.getDerivedStateFromProps,d="function"==typeof l||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==r||u!==c)&&ebe(t,i,r,c),Vye=!1;var f=t.memoizedState;i.state=f,Kye(t,r,i,a),u=t.memoizedState,s!==r||f!==u||Xve.current||Vye?("function"==typeof l&&(Yye(t,n,l,r),u=t.memoizedState),(s=Vye||Zye(t,n,s,r,f,u,c))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.effectTag|=4)):("function"==typeof i.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=c,r=s):("function"==typeof i.componentDidMount&&(t.effectTag|=4),r=!1)}else i=t.stateNode,zye(e,t),s=t.memoizedProps,i.props=t.type===t.elementType?s:_ye(t.type,s),u=i.context,c="object"==Ty(c=n.contextType)&&null!==c?Uye(c):Yve(t,c=$ve(n)?Qve:qve.current),(d="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==r||u!==c)&&ebe(t,i,r,c),Vye=!1,u=t.memoizedState,i.state=u,Kye(t,r,i,a),f=t.memoizedState,s!==r||u!==f||Xve.current||Vye?("function"==typeof l&&(Yye(t,n,l,r),f=t.memoizedState),(l=Vye||Zye(t,n,s,r,u,f,c))?(d||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,c),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,c)),"function"==typeof i.componentDidUpdate&&(t.effectTag|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=c,r=l):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return bxe(e,t,n,r,o,a)}function bxe(e,t,n,r,a,o){gxe(e,t);var i=0!=(64&t.effectTag);if(!r&&!i)return a&&nye(t,n,!1),Nxe(e,t,o);r=t.stateNode,lxe.current=t;var s=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&i?(t.child=ibe(t,e.child,null,o),t.child=ibe(t,null,s,o)):fxe(e,t,s,o),t.memoizedState=r.state,a&&nye(t,n,!0),t.child}function xxe(e){var t=e.stateNode;t.pendingContext?Jve(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Jve(0,t.context,!1),pbe(e,t.containerInfo)}var kxe,wxe,Ixe,Cxe={dehydrated:null,retryTime:0};function Exe(e,t,n){var r,a=t.mode,o=t.pendingProps,i=vbe.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&i)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(i|=1),Gve(vbe,1&i),null===e){if(void 0!==o.fallback&&ixe(t),s){if(s=o.fallback,(o=dwe(null,a,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=dwe(s,a,n,null)).return=t,o.sibling=n,t.memoizedState=Cxe,t.child=o,n}return a=o.children,t.memoizedState=null,t.child=sbe(t,null,a,n)}if(null!==e.memoizedState){if(a=(e=e.child).sibling,s){if(o=o.fallback,(n=cwe(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(a=cwe(a,o)).return=t,n.sibling=a,n.childExpirationTime=0,t.memoizedState=Cxe,t.child=n,a}return n=ibe(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=dwe(null,a,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=dwe(s,a,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Cxe,t.child=o,n}return t.memoizedState=null,t.child=ibe(t,e,o.children,n)}function Sxe(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),Pye(e.return,t)}function Txe(e,t,n,r,a,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:a,lastEffect:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailExpiration=0,i.tailMode=a,i.lastEffect=o)}function Axe(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(fxe(e,t,r.children,n),0!=(2&(r=vbe.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Sxe(e,n);else if(19===e.tag)Sxe(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Gve(vbe,r),0==(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ybe(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Txe(t,!1,a,n,o,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ybe(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Txe(t,!0,n,null,o,t.lastEffect);break;case"together":Txe(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Nxe(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&jke(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(Wfe(153));if(null!==t.child){for(n=cwe(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=cwe(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function _xe(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Rxe(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return $ve(t.type)&&Zve(),null;case 3:return hbe(),Hve(Xve),Hve(qve),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!uxe(t)||(t.effectTag|=4),null;case 5:gbe(t),n=fbe(dbe.current);var a=t.type;if(null!==e&&null!=t.stateNode)wxe(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(Wfe(166));return null}if(e=fbe(cbe.current),uxe(t)){r=t.stateNode,a=t.type;var o=t.memoizedProps;switch(r[ige]=t,r[sge]=o,a){case"iframe":case"object":case"embed":Nme("load",r);break;case"video":case"audio":for(e=0;e<Ohe.length;e++)Nme(Ohe[e],r);break;case"source":Nme("error",r);break;case"img":case"image":case"link":Nme("error",r),Nme("load",r);break;case"form":Nme("reset",r),Nme("submit",r);break;case"details":Nme("toggle",r);break;case"input":ahe(r,o),Nme("invalid",r),jme(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Nme("invalid",r),jme(n,"onChange");break;case"textarea":fhe(r,o),Nme("invalid",r),jme(n,"onChange")}for(var i in Vme(a,o),e=null,o)if(o.hasOwnProperty(i)){var s=o[i];"children"===i?"string"==typeof s?r.textContent!==s&&(e=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(e=["children",""+s]):ope.hasOwnProperty(i)&&null!=s&&jme(n,i)}switch(a){case"input":the(r),she(r,o,!0);break;case"textarea":the(r),hhe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Hme)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(i=9===n.nodeType?n:n.ownerDocument,e===zme&&(e=vhe(a)),e===zme?"script"===a?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=i.createElement(a,{is:r.is}):(e=i.createElement(a),"select"===a&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,a),e[ige]=t,e[sge]=r,kxe(e,t),t.stateNode=e,i=Wme(a,r),a){case"iframe":case"object":case"embed":Nme("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ohe.length;s++)Nme(Ohe[s],e);s=r;break;case"source":Nme("error",e),s=r;break;case"img":case"image":case"link":Nme("error",e),Nme("load",e),s=r;break;case"form":Nme("reset",e),Nme("submit",e),s=r;break;case"details":Nme("toggle",e),s=r;break;case"input":ahe(e,r),s=rhe(e,r),Nme("invalid",e),jme(n,"onChange");break;case"option":s=che(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Lfe({},r,{value:void 0}),Nme("invalid",e),jme(n,"onChange");break;case"textarea":fhe(e,r),s=dhe(e,r),Nme("invalid",e),jme(n,"onChange");break;default:s=r}Vme(a,s);var u=s;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?Lme(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&khe(e,c):"children"===o?"string"==typeof c?("textarea"!==a||""!==c)&&whe(e,c):"number"==typeof c&&whe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(ope.hasOwnProperty(o)?null!=c&&jme(n,o):null!=c&&Ope(e,o,c,i))}switch(a){case"input":the(e),she(e,r,!1);break;case"textarea":the(e),hhe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Jpe(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?lhe(e,!!r.multiple,n,!1):null!=r.defaultValue&&lhe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=Hme)}Jme(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ixe(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(Wfe(166));n=fbe(dbe.current),fbe(cbe.current),uxe(t)?(n=t.stateNode,r=t.memoizedProps,n[ige]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ige]=t,t.stateNode=n)}return null;case 13:return Hve(vbe),r=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&uxe(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(o=t.firstEffect)?(t.firstEffect=a,a.nextEffect=o):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&vbe.current)?lke===rke&&(lke=ake):(lke!==rke&&lke!==ake||(lke=oke),0!==mke&&null!==ske&&(gwe(ske,cke),vwe(ske,mke)))),(n||r)&&(t.effectTag|=4),null);case 4:return hbe(),null;case 10:return Bye(t),null;case 17:return $ve(t.type)&&Zve(),null;case 19:if(Hve(vbe),null===(r=t.memoizedState))return null;if(a=0!=(64&t.effectTag),null===(o=r.rendering)){if(a)_xe(r,!1);else if(lke!==rke||null!==e&&0!=(64&e.effectTag))for(o=t.child;null!==o;){if(null!==(e=ybe(o))){for(t.effectTag|=64,_xe(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)o=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=o,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,o=e.dependencies,a.dependencies=null===o?null:{expirationTime:o.expirationTime,firstContext:o.firstContext,responders:o.responders}),r=r.sibling;return Gve(vbe,1&vbe.current|2),t.child}o=o.sibling}}else{if(!a)if(null!==(e=ybe(o))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),_xe(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*kye()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,_xe(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=r.last)?n.sibling=o:t.child=o,r.last=o)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=kye()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=kye(),n.sibling=null,t=vbe.current,Gve(vbe,a?1&t|2:1&t),n):null}throw Error(Wfe(156,t.tag))}function Oxe(e){switch(e.tag){case 1:$ve(e.type)&&Zve();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(hbe(),Hve(Xve),Hve(qve),0!=(64&(t=e.effectTag)))throw Error(Wfe(285));return e.effectTag=-4097&t|64,e;case 5:return gbe(e),null;case 13:return Hve(vbe),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return Hve(vbe),null;case 4:return hbe(),null;case 10:return Bye(e),null;default:return null}}function Fxe(e,t){return{value:e,source:t,stack:Zpe(t)}}kxe=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},wxe=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var i,s,u=t.stateNode;switch(fbe(cbe.current),e=null,n){case"input":o=rhe(u,o),r=rhe(u,r),e=[];break;case"option":o=che(u,o),r=che(u,r),e=[];break;case"select":o=Lfe({},o,{value:void 0}),r=Lfe({},r,{value:void 0}),e=[];break;case"textarea":o=dhe(u,o),r=dhe(u,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(u.onclick=Hme)}for(i in Vme(n,r),n=null,o)if(!r.hasOwnProperty(i)&&o.hasOwnProperty(i)&&null!=o[i])if("style"===i)for(s in u=o[i])u.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==i&&"children"!==i&&"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(ope.hasOwnProperty(i)?e||(e=[]):(e=e||[]).push(i,null));for(i in r){var c=r[i];if(u=null!=o?o[i]:void 0,r.hasOwnProperty(i)&&c!==u&&(null!=c||null!=u))if("style"===i)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(e||(e=[]),e.push(i,n)),n=c;else"dangerouslySetInnerHTML"===i?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(i,c)):"children"===i?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(i,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&(ope.hasOwnProperty(i)?(null!=c&&jme(a,i),e||u===c||(e=[])):(e=e||[]).push(i,c))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},Ixe=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var Mxe="function"==typeof WeakSet?WeakSet:Set;function Dxe(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=Zpe(n)),null!==n&&$pe(n.type),t=t.value,null!==e&&1===e.tag&&$pe(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function Bxe(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){twe(e,t)}else t.current=null}function Pxe(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:_ye(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(Wfe(163))}function Lxe(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function Uxe(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Vxe(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void Uxe(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:_ye(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&qye(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}qye(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&Jme(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&yme(n)))));case 19:case 17:case 20:case 21:return}throw Error(Wfe(163))}function Wxe(e,t,n){switch("function"==typeof owe&&owe(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Cye(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var a=t;try{n()}catch(e){twe(a,e)}}e=e.next}while(e!==r)}))}break;case 1:Bxe(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){twe(e,t)}}(t,n);break;case 5:Bxe(t);break;case 4:qxe(e,t,n)}}function zxe(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&zxe(t)}function jxe(e){return 5===e.tag||3===e.tag||4===e.tag}function Hxe(e){e:{for(var t=e.return;null!==t;){if(jxe(t)){var n=t;break e}t=t.return}throw Error(Wfe(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(Wfe(161))}16&n.effectTag&&(whe(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||jxe(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?Gxe(e,n,t):Kxe(e,n,t)}function Gxe(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Hme));else if(4!==r&&null!==(e=e.child))for(Gxe(e,t,n),e=e.sibling;null!==e;)Gxe(e,t,n),e=e.sibling}function Kxe(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Kxe(e,t,n),e=e.sibling;null!==e;)Kxe(e,t,n),e=e.sibling}function qxe(e,t,n){for(var r,a,o=t,i=!1;;){if(!i){i=o.return;e:for(;;){if(null===i)throw Error(Wfe(160));switch(r=i.stateNode,i.tag){case 5:a=!1;break e;case 3:case 4:r=r.containerInfo,a=!0;break e}i=i.return}i=!0}if(5===o.tag||6===o.tag){e:for(var s=e,u=o,c=n,l=u;;)if(Wxe(s,l,c),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}a?(s=r,u=o.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,a=!0,o.child.return=o,o=o.child;continue}}else if(Wxe(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(i=!1)}o.sibling.return=o.return,o=o.sibling}}function Xxe(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void Lxe(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,a=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[sge]=r,"input"===e&&"radio"===r.type&&null!=r.name&&ohe(n,r),Wme(e,a),t=Wme(e,r),a=0;a<o.length;a+=2){var i=o[a],s=o[a+1];"style"===i?Lme(n,s):"dangerouslySetInnerHTML"===i?khe(n,s):"children"===i?whe(n,s):Ope(n,i,s,t)}switch(e){case"input":ihe(n,r);break;case"textarea":phe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?lhe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?lhe(n,!!r.multiple,r.defaultValue,!0):lhe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(Wfe(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,yme(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,vke=kye()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,a=null!=(a=e.memoizedProps.style)&&a.hasOwnProperty("display")?a.display:null,o.style.display=Pme("display",a));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void Qxe(t);case 19:return void Qxe(t);case 17:return}throw Error(Wfe(163))}function Qxe(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Mxe),t.forEach((function(t){var r=rwe.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var Yxe="function"==typeof WeakMap?WeakMap:Map;function $xe(e,t,n){(n=jye(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){bke||(bke=!0,xke=r),Dxe(e,t)},n}function Zxe(e,t,n){(n=jye(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return Dxe(e,t),r(a)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===kke?kke=new Set([this]):kke.add(this),Dxe(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Jxe,eke=Math.ceil,tke=Rpe.ReactCurrentDispatcher,nke=Rpe.ReactCurrentOwner,rke=0,ake=3,oke=4,ike=0,ske=null,uke=null,cke=0,lke=rke,dke=null,fke=1073741823,pke=1073741823,hke=null,mke=0,gke=!1,vke=0,yke=null,bke=!1,xke=null,kke=null,wke=!1,Ike=null,Cke=90,Eke=null,Ske=0,Tke=null,Ake=0;function Nke(){return 0!=(48&ike)?1073741821-(kye()/10|0):0!==Ake?Ake:Ake=1073741821-(kye()/10|0)}function _ke(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=wye();if(0==(4&t))return 99===r?1073741823:1073741822;if(0!=(16&ike))return cke;if(null!==n)e=Nye(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Nye(e,150,100);break;case 97:case 96:e=Nye(e,5e3,250);break;case 95:e=2;break;default:throw Error(Wfe(326))}return null!==ske&&e===cke&&--e,e}function Rke(e,t){if(50<Ske)throw Ske=0,Tke=null,Error(Wfe(185));if(null!==(e=Oke(e,t))){var n=wye();1073741823===t?0!=(8&ike)&&0==(48&ike)?Bke(e):(Mke(e),0===ike&&Tye()):Mke(e),0==(4&ike)||98!==n&&99!==n||(null===Eke?Eke=new Map([[e,t]]):(void 0===(n=Eke.get(e))||n>t)&&Eke.set(e,t))}}function Oke(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,a=null;if(null===r&&3===e.tag)a=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){a=r.stateNode;break}r=r.return}return null!==a&&(ske===a&&(jke(t),lke===oke&&gwe(a,cke)),vwe(a,t)),a}function Fke(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!mwe(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function Mke(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Sye(Bke.bind(null,e));else{var t=Fke(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Nke();if(r=1073741823===t?99:1===t||2===t?95:0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var a=e.callbackPriority;if(e.callbackExpirationTime===t&&a>=r)return;n!==hye&&oye(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Sye(Bke.bind(null,e)):Eye(r,Dke.bind(null,e),{timeout:10*(1073741821-t)-kye()}),e.callbackNode=t}}}function Dke(e,t){if(Ake=0,t)return ywe(e,t=Nke()),Mke(e),null;var n=Fke(e);if(0!==n){if(t=e.callbackNode,0!=(48&ike))throw Error(Wfe(327));if(Zke(),e===ske&&n===cke||Uke(e,n),null!==uke){var r=ike;ike|=16;for(var a=Wke();;)try{Gke();break}catch(t){Vke(e,t)}if(Dye(),ike=r,tke.current=a,1===lke)throw t=dke,Uke(e,n),gwe(e,n),Mke(e),t;if(null===uke)switch(a=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=lke,ske=null,r){case rke:case 1:throw Error(Wfe(345));case 2:ywe(e,2<n?2:n);break;case ake:if(gwe(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Xke(a)),1073741823===fke&&10<(a=vke+500-kye())){if(gke){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,Uke(e,n);break}}if(0!==(o=Fke(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=tge(Qke.bind(null,e),a);break}Qke(e);break;case oke:if(gwe(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Xke(a)),gke&&(0===(a=e.lastPingedTime)||a>=n)){e.lastPingedTime=n,Uke(e,n);break}if(0!==(a=Fke(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==pke?r=10*(1073741821-pke)-kye():1073741823===fke?r=0:(r=10*(1073741821-fke)-5e3,0>(r=(a=kye())-r)&&(r=0),(n=10*(1073741821-n)-a)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eke(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=tge(Qke.bind(null,e),r);break}Qke(e);break;case 5:if(1073741823!==fke&&null!==hke){o=fke;var i=hke;if(0>=(r=0|i.busyMinDurationMs)?r=0:(a=0|i.busyDelayMs,r=(o=kye()-(10*(1073741821-o)-(0|i.timeoutMs||5e3)))<=a?0:a+r-o),10<r){gwe(e,n),e.timeoutHandle=tge(Qke.bind(null,e),r);break}}Qke(e);break;default:throw Error(Wfe(329))}if(Mke(e),e.callbackNode===t)return Dke.bind(null,e)}}return null}function Bke(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&ike))throw Error(Wfe(327));if(Zke(),e===ske&&t===cke||Uke(e,t),null!==uke){var n=ike;ike|=16;for(var r=Wke();;)try{Hke();break}catch(t){Vke(e,t)}if(Dye(),ike=n,tke.current=r,1===lke)throw n=dke,Uke(e,t),gwe(e,t),Mke(e),n;if(null!==uke)throw Error(Wfe(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,ske=null,Qke(e),Mke(e)}return null}function Pke(e,t){var n=ike;ike|=1;try{return e(t)}finally{0===(ike=n)&&Tye()}}function Lke(e,t){var n=ike;ike&=-2,ike|=8;try{return e(t)}finally{0===(ike=n)&&Tye()}}function Uke(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,nge(n)),null!==uke)for(n=uke.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&Zve();break;case 3:hbe(),Hve(Xve),Hve(qve);break;case 5:gbe(r);break;case 4:hbe();break;case 13:case 19:Hve(vbe);break;case 10:Bye(r)}n=n.return}ske=e,uke=cwe(e.current,null),cke=t,lke=rke,dke=null,pke=fke=1073741823,hke=null,mke=0,gke=!1}function Vke(e,t){for(;;){try{if(Dye(),xbe.current=$be,Sbe)for(var n=Ibe.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(wbe=0,Ebe=Cbe=Ibe=null,Sbe=!1,null===uke||null===uke.return)return lke=1,dke=t,uke=null;e:{var a=e,o=uke.return,i=uke,s=t;if(t=cke,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==s&&"object"==Ty(s)&&"function"==typeof s.then){var u=s;if(0==(2&i.mode)){var c=i.alternate;c?(i.updateQueue=c.updateQueue,i.memoizedState=c.memoizedState,i.expirationTime=c.expirationTime):(i.updateQueue=null,i.memoizedState=null)}var l=0!=(1&vbe.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var h=d.memoizedProps;f=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!l)}}if(f){var m=d.updateQueue;if(null===m){var g=new Set;g.add(u),d.updateQueue=g}else m.add(u);if(0==(2&d.mode)){if(d.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var v=jye(1073741823,null);v.tag=2,Hye(i,v)}i.expirationTime=1073741823;break e}s=void 0,i=t;var y=a.pingCache;if(null===y?(y=a.pingCache=new Yxe,s=new Set,y.set(u,s)):void 0===(s=y.get(u))&&(s=new Set,y.set(u,s)),!s.has(i)){s.add(i);var b=nwe.bind(null,a,u,i);u.then(b,b)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);s=Error(($pe(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Zpe(i))}5!==lke&&(lke=2),s=Fxe(s,i),d=o;do{switch(d.tag){case 3:u=s,d.effectTag|=4096,d.expirationTime=t,Gye(d,$xe(d,u,t));break e;case 1:u=s;var x=d.type,k=d.stateNode;if(0==(64&d.effectTag)&&("function"==typeof x.getDerivedStateFromError||null!==k&&"function"==typeof k.componentDidCatch&&(null===kke||!kke.has(k)))){d.effectTag|=4096,d.expirationTime=t,Gye(d,Zxe(d,u,t));break e}}d=d.return}while(null!==d)}uke=qke(uke)}catch(e){t=e;continue}break}}function Wke(){var e=tke.current;return tke.current=$be,null===e?$be:e}function zke(e,t){e<fke&&2<e&&(fke=e),null!==t&&e<pke&&2<e&&(pke=e,hke=t)}function jke(e){e>mke&&(mke=e)}function Hke(){for(;null!==uke;)uke=Kke(uke)}function Gke(){for(;null!==uke&&!mye();)uke=Kke(uke)}function Kke(e){var t=Jxe(e.alternate,e,cke);return e.memoizedProps=e.pendingProps,null===t&&(t=qke(e)),nke.current=null,t}function qke(e){uke=e;do{var t=uke.alternate;if(e=uke.return,0==(2048&uke.effectTag)){if(t=Rxe(t,uke,cke),1===cke||1!==uke.childExpirationTime){for(var n=0,r=uke.child;null!==r;){var a=r.expirationTime,o=r.childExpirationTime;a>n&&(n=a),o>n&&(n=o),r=r.sibling}uke.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=uke.firstEffect),null!==uke.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=uke.firstEffect),e.lastEffect=uke.lastEffect),1<uke.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=uke:e.firstEffect=uke,e.lastEffect=uke))}else{if(null!==(t=Oxe(uke)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=uke.sibling))return t;uke=e}while(null!==uke);return lke===rke&&(lke=5),null}function Xke(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Qke(e){var t=wye();return Cye(99,Yke.bind(null,e,t)),null}function Yke(e,t){do{Zke()}while(null!==Ike);if(0!=(48&ike))throw Error(Wfe(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(Wfe(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var a=Xke(n);if(e.firstPendingTime=a,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===ske&&(uke=ske=null,cke=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,a=n.firstEffect):a=n:a=n.firstEffect,null!==a){var o=ike;ike|=32,nke.current=null,$me=Ame;var i=Qme();if(Yme(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{var u=(s=(s=i.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(u&&0!==u.rangeCount){s=u.anchorNode;var c=u.anchorOffset,l=u.focusNode;u=u.focusOffset;try{s.nodeType,l.nodeType}catch(e){s=null;break e}var d=0,f=-1,p=-1,h=0,m=0,g=i,v=null;t:for(;;){for(var y;g!==s||0!==c&&3!==g.nodeType||(f=d+c),g!==l||0!==u&&3!==g.nodeType||(p=d+u),3===g.nodeType&&(d+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===i)break t;if(v===s&&++h===c&&(f=d),v===l&&++m===u&&(p=d),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}s=-1===f||-1===p?null:{start:f,end:p}}else s=null}s=s||{start:0,end:0}}else s=null;Zme={activeElementDetached:null,focusedElem:i,selectionRange:s},Ame=!1,yke=a;do{try{$ke()}catch(e){if(null===yke)throw Error(Wfe(330));twe(yke,e),yke=yke.nextEffect}}while(null!==yke);yke=a;do{try{for(i=e,s=t;null!==yke;){var b=yke.effectTag;if(16&b&&whe(yke.stateNode,""),128&b){var x=yke.alternate;if(null!==x){var k=x.ref;null!==k&&("function"==typeof k?k(null):k.current=null)}}switch(1038&b){case 2:Hxe(yke),yke.effectTag&=-3;break;case 6:Hxe(yke),yke.effectTag&=-3,Xxe(yke.alternate,yke);break;case 1024:yke.effectTag&=-1025;break;case 1028:yke.effectTag&=-1025,Xxe(yke.alternate,yke);break;case 4:Xxe(yke.alternate,yke);break;case 8:qxe(i,c=yke,s),zxe(c)}yke=yke.nextEffect}}catch(e){if(null===yke)throw Error(Wfe(330));twe(yke,e),yke=yke.nextEffect}}while(null!==yke);if(k=Zme,x=Qme(),b=k.focusedElem,s=k.selectionRange,x!==b&&b&&b.ownerDocument&&Xme(b.ownerDocument.documentElement,b)){null!==s&&Yme(b)&&(x=s.start,void 0===(k=s.end)&&(k=x),"selectionStart"in b?(b.selectionStart=x,b.selectionEnd=Math.min(k,b.value.length)):(k=(x=b.ownerDocument||document)&&x.defaultView||window).getSelection&&(k=k.getSelection(),c=b.textContent.length,i=Math.min(s.start,c),s=void 0===s.end?i:Math.min(s.end,c),!k.extend&&i>s&&(c=s,s=i,i=c),c=qme(b,i),l=qme(b,s),c&&l&&(1!==k.rangeCount||k.anchorNode!==c.node||k.anchorOffset!==c.offset||k.focusNode!==l.node||k.focusOffset!==l.offset)&&((x=x.createRange()).setStart(c.node,c.offset),k.removeAllRanges(),i>s?(k.addRange(x),k.extend(l.node,l.offset)):(x.setEnd(l.node,l.offset),k.addRange(x))))),x=[];for(k=b;k=k.parentNode;)1===k.nodeType&&x.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<x.length;b++)(k=x[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Ame=!!$me,Zme=$me=null,e.current=n,yke=a;do{try{for(b=e;null!==yke;){var w=yke.effectTag;if(36&w&&Vxe(b,yke.alternate,yke),128&w){x=void 0;var I=yke.ref;if(null!==I){var C=yke.stateNode;switch(yke.tag){case 5:x=C;break;default:x=C}"function"==typeof I?I(x):I.current=x}}yke=yke.nextEffect}}catch(e){if(null===yke)throw Error(Wfe(330));twe(yke,e),yke=yke.nextEffect}}while(null!==yke);yke=null,gye(),ike=o}else e.current=n;if(wke)wke=!1,Ike=e,Cke=t;else for(yke=a;null!==yke;)t=yke.nextEffect,yke.nextEffect=null,yke=t;if(0===(t=e.firstPendingTime)&&(kke=null),1073741823===t?e===Tke?Ske++:(Ske=0,Tke=e):Ske=0,"function"==typeof awe&&awe(n.stateNode,r),Mke(e),bke)throw bke=!1,e=xke,xke=null,e;return 0!=(8&ike)||Tye(),null}function $ke(){for(;null!==yke;){var e=yke.effectTag;0!=(256&e)&&Pxe(yke.alternate,yke),0==(512&e)||wke||(wke=!0,Eye(97,(function(){return Zke(),null}))),yke=yke.nextEffect}}function Zke(){if(90!==Cke){var e=97<Cke?97:Cke;return Cke=90,Cye(e,Jke)}}function Jke(){if(null===Ike)return!1;var e=Ike;if(Ike=null,0!=(48&ike))throw Error(Wfe(331));var t=ike;for(ike|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:Lxe(5,n),Uxe(5,n)}}catch(t){if(null===e)throw Error(Wfe(330));twe(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return ike=t,Tye(),!0}function ewe(e,t,n){Hye(e,t=$xe(e,t=Fxe(n,t),1073741823)),null!==(e=Oke(e,1073741823))&&Mke(e)}function twe(e,t){if(3===e.tag)ewe(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ewe(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===kke||!kke.has(r))){Hye(n,e=Zxe(n,e=Fxe(t,e),1073741823)),null!==(n=Oke(n,1073741823))&&Mke(n);break}}n=n.return}}function nwe(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),ske===e&&cke===n?lke===oke||lke===ake&&1073741823===fke&&kye()-vke<500?Uke(e,cke):gke=!0:mwe(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,Mke(e)))}function rwe(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(t=_ke(t=Nke(),e,null)),null!==(e=Oke(e,t))&&Mke(e)}Jxe=function(e,t,n){var r=t.expirationTime;if(null!==e){var a=t.pendingProps;if(e.memoizedProps!==a||Xve.current)dxe=!0;else{if(r<n){switch(dxe=!1,t.tag){case 3:xxe(t),cxe();break;case 5:if(mbe(t),4&t.mode&&1!==n&&a.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:$ve(t.type)&&tye(t);break;case 4:pbe(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,a=t.type._context,Gve(Rye,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Exe(e,t,n):(Gve(vbe,1&vbe.current),null!==(t=Nxe(e,t,n))?t.sibling:null);Gve(vbe,1&vbe.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return Axe(e,t,n);t.effectTag|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null),Gve(vbe,vbe.current),!r)return null}return Nxe(e,t,n)}dxe=!1}}else dxe=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,a=Yve(t,qve.current),Lye(t,n),a=Nbe(null,t,r,e,a,n),t.effectTag|=1,"object"==Ty(a)&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,$ve(r)){var o=!0;tye(t)}else o=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Wye(t);var i=r.getDerivedStateFromProps;"function"==typeof i&&Yye(t,r,i,e),a.updater=$ye,t.stateNode=a,a._reactInternalFiber=t,tbe(t,r,e,n),t=bxe(null,t,r,!0,o,n)}else t.tag=0,fxe(null,t,a,n),t=t.child;return t;case 16:e:{if(a=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(a),1!==a._status)throw a._result;switch(a=a._result,t.type=a,o=t.tag=function(e){if("function"==typeof e)return uwe(e)?1:0;if(null!=e){if((e=e.$$typeof)===jpe)return 11;if(e===Kpe)return 14}return 2}(a),e=_ye(a,e),o){case 0:t=vxe(null,t,a,e,n);break e;case 1:t=yxe(null,t,a,e,n);break e;case 11:t=pxe(null,t,a,e,n);break e;case 14:t=hxe(null,t,a,_ye(a.type,e),r,n);break e}throw Error(Wfe(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,vxe(e,t,r,a=t.elementType===r?a:_ye(r,a),n);case 1:return r=t.type,a=t.pendingProps,yxe(e,t,r,a=t.elementType===r?a:_ye(r,a),n);case 3:if(xxe(t),r=t.updateQueue,null===e||null===r)throw Error(Wfe(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,zye(e,t),Kye(t,r,null,n),(r=t.memoizedState.element)===a)cxe(),t=Nxe(e,t,n);else{if((a=t.stateNode.hydrate)&&(nxe=rge(t.stateNode.containerInfo.firstChild),txe=t,a=rxe=!0),a)for(n=sbe(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else fxe(e,t,r,n),cxe();t=t.child}return t;case 5:return mbe(t),null===e&&ixe(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,ege(r,a)?i=null:null!==o&&ege(r,o)&&(t.effectTag|=16),gxe(e,t),4&t.mode&&1!==n&&a.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(fxe(e,t,i,n),t=t.child),t;case 6:return null===e&&ixe(t),null;case 13:return Exe(e,t,n);case 4:return pbe(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ibe(t,null,r,n):fxe(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,pxe(e,t,r,a=t.elementType===r?a:_ye(r,a),n);case 7:return fxe(e,t,t.pendingProps,n),t.child;case 8:case 12:return fxe(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value;var s=t.type._context;if(Gve(Rye,s._currentValue),s._currentValue=o,null!==i)if(s=i.value,0==(o=bve(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(i.children===a.children&&!Xve.current){t=Nxe(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){i=s.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===s.tag&&((c=jye(n,null)).tag=2,Hye(s,c)),s.expirationTime<n&&(s.expirationTime=n),null!==(c=s.alternate)&&c.expirationTime<n&&(c.expirationTime=n),Pye(s.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else i=10===s.tag&&s.type===t.type?null:s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===t){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}fxe(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(o=t.pendingProps).children,Lye(t,n),r=r(a=Uye(a,o.unstable_observedBits)),t.effectTag|=1,fxe(e,t,r,n),t.child;case 14:return o=_ye(a=t.type,t.pendingProps),hxe(e,t,a,o=_ye(a.type,o),r,n);case 15:return mxe(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:_ye(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,$ve(r)?(e=!0,tye(t)):e=!1,Lye(t,n),Jye(t,r,a),tbe(t,r,a,n),bxe(null,t,r,!0,e,n);case 19:return Axe(e,t,n)}throw Error(Wfe(156,t.tag))};var awe=null,owe=null;function iwe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function swe(e,t,n,r){return new iwe(e,t,n,r)}function uwe(e){return!(!(e=e.prototype)||!e.isReactComponent)}function cwe(e,t){var n=e.alternate;return null===n?((n=swe(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function lwe(e,t,n,r,a,o){var i=2;if(r=e,"function"==typeof e)uwe(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case Ppe:return dwe(n.children,a,o,t);case zpe:i=8,a|=7;break;case Lpe:i=8,a|=1;break;case Upe:return(e=swe(12,n,t,8|a)).elementType=Upe,e.type=Upe,e.expirationTime=o,e;case Hpe:return(e=swe(13,n,t,a)).type=Hpe,e.elementType=Hpe,e.expirationTime=o,e;case Gpe:return(e=swe(19,n,t,a)).elementType=Gpe,e.expirationTime=o,e;default:if("object"==Ty(e)&&null!==e)switch(e.$$typeof){case Vpe:i=10;break e;case Wpe:i=9;break e;case jpe:i=11;break e;case Kpe:i=14;break e;case qpe:i=16,r=null;break e;case Xpe:i=22;break e}throw Error(Wfe(130,null==e?e:Ty(e),""))}return(t=swe(i,n,t,a)).elementType=e,t.type=r,t.expirationTime=o,t}function dwe(e,t,n,r){return(e=swe(7,e,r,t)).expirationTime=n,e}function fwe(e,t,n){return(e=swe(6,e,null,t)).expirationTime=n,e}function pwe(e,t,n){return(t=swe(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hwe(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function mwe(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function gwe(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function vwe(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function ywe(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function bwe(e,t,n,r){var a=t.current,o=Nke(),i=Xye.suspense;o=_ke(o,a,i);e:if(n){t:{if(Dhe(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(Wfe(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if($ve(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(Wfe(171))}if(1===n.tag){var u=n.type;if($ve(u)){n=eye(n,u,s);break e}}n=s}else n=Kve;return null===t.context?t.context=n:t.pendingContext=n,(t=jye(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),Hye(a,t),Rke(a,o),o}function xwe(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function kwe(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function wwe(e,t){kwe(e,t),(e=e.alternate)&&kwe(e,t)}function Iwe(e,t,n){var r=new hwe(e,t,n=null!=n&&!0===n.hydrate),a=swe(3,null,null,2===t?7:1===t?3:0);r.current=a,a.stateNode=r,Wye(a),e[uge]=r.current,n&&0!==t&&function(e,t){var n=Mhe(t);ume.forEach((function(e){Yhe(e,t,n)})),cme.forEach((function(e){Yhe(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Cwe(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ewe(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o._internalRoot;if("function"==typeof a){var s=a;a=function(){var e=xwe(i);s.call(e)}}bwe(t,i,e,a)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Iwe(e,0,t?{hydrate:!0}:void 0)}(n,r),i=o._internalRoot,"function"==typeof a){var u=a;a=function(){var e=xwe(i);u.call(e)}}Lke((function(){bwe(t,i,e,a)}))}return xwe(i)}function Swe(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Bpe,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Twe(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Cwe(t))throw Error(Wfe(200));return Swe(e,t,null,n)}Iwe.prototype.render=function(e){bwe(e,this._internalRoot,null,null)},Iwe.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;bwe(null,e,null,(function(){t[uge]=null}))},$he=function(e){if(13===e.tag){var t=Nye(Nke(),150,100);Rke(e,t),wwe(e,t)}},Zhe=function(e){13===e.tag&&(Rke(e,3),wwe(e,3))},Jhe=function(e){if(13===e.tag){var t=Nke();Rke(e,t=_ke(t,e,null)),wwe(e,t)}},cpe=function(e,t,n){switch(t){case"input":if(ihe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=fge(r);if(!a)throw Error(Wfe(90));nhe(r),ihe(r,a)}}}break;case"textarea":phe(e,n);break;case"select":null!=(t=n.value)&&lhe(e,!!n.multiple,t,!1)}},mpe=Pke,gpe=function(e,t,n,r,a){var o=ike;ike|=4;try{return Cye(98,e.bind(null,t,n,r,a))}finally{0===(ike=o)&&Tye()}},vpe=function(){0==(49&ike)&&(function(){if(null!==Eke){var e=Eke;Eke=null,e.forEach((function(e,t){ywe(t,e),Mke(t)})),Tye()}}(),Zke())},ype=function(e,t){var n=ike;ike|=2;try{return e(t)}finally{0===(ike=n)&&Tye()}};var Awe={Events:[lge,dge,fge,spe,ape,bge,function(e){Vhe(e,yge)},ppe,hpe,Fme,jhe,Zke,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;!function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);awe=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},owe=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(Lfe({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rpe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Lhe(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:cge,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});var Nwe={__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Awe,createPortal:Twe,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(Wfe(188));throw Error(Wfe(268,Object.keys(e)))}return null===(e=Lhe(t))?null:e.stateNode},flushSync:function(e,t){if(0!=(48&ike))throw Error(Wfe(187));var n=ike;ike|=1;try{return Cye(99,e.bind(null,t))}finally{ike=n,Tye()}},hydrate:function(e,t,n){if(!Cwe(t))throw Error(Wfe(200));return Ewe(null,e,t,!0,n)},render:function(e,t,n){if(!Cwe(t))throw Error(Wfe(200));return Ewe(null,e,t,!1,n)},unmountComponentAtNode:function(e){if(!Cwe(e))throw Error(Wfe(40));return!!e._reactRootContainer&&(Lke((function(){Ewe(null,null,e,!1,(function(){e._reactRootContainer=null,e[uge]=null}))})),!0)},unstable_batchedUpdates:Pke,unstable_createPortal:function(e,t){return Twe(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){if(!Cwe(n))throw Error(Wfe(200));if(null==e||void 0===e._reactInternalFiber)throw Error(Wfe(38));return Ewe(e,t,n,!1,r)},version:"16.14.0"},_we=0,Rwe={__interactionsRef:null,__subscriberRef:null,unstable_clear:function(e){return e()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++_we},unstable_subscribe:function(){},unstable_trace:function(e,t,n){return n()},unstable_unsubscribe:function(){},unstable_wrap:function(e){return e}},Owe=(Cq((function(e,t){})),Cq((function(e){e.exports=Rwe})),Cq((function(e,t){})),Cq((function(e){!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=Nwe}))),Fwe=!1,Mwe=Tx.createContext(null),Dwe="entering",Bwe="entered",Pwe=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(a="exited",r.appearStatus=Dwe):a=Bwe:a=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:a},r.nextCallback=null,r}Ofe(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Dwe&&n!==Bwe&&(t=Dwe):n!==Dwe&&n!==Bwe||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===Dwe?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[Owe.findDOMNode(this),r],o=a[0],i=a[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!e&&!n||Fwe?this.safeSetState({status:Bwe},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,i),this.safeSetState({status:Dwe},(function(){t.props.onEntering(o,i),t.onTransitionEnd(u,(function(){t.safeSetState({status:Bwe},(function(){t.props.onEntered(o,i)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Owe.findDOMNode(this);t&&!Fwe?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Owe.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],i=a[1];this.props.addEndListener(o,i)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Rfe(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return Tx.createElement(Mwe.Provider,{value:null},"function"==typeof n?n(e,r):Tx.cloneElement(Tx.Children.only(n),r))},t}(Tx.Component);function Lwe(){}Pwe.contextType=Mwe,Pwe.propTypes={},Pwe.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Lwe,onEntering:Lwe,onEntered:Lwe,onExit:Lwe,onExiting:Lwe,onExited:Lwe},Pwe.UNMOUNTED="unmounted",Pwe.EXITED="exited",Pwe.ENTERING=Dwe,Pwe.ENTERED=Bwe,Pwe.EXITING="exiting";var Uwe,Vwe,Wwe=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))},zwe=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=Ffe(n.className,r):n.setAttribute("class",Ffe(n.className&&n.className.baseVal||"",r)));var n,r}))},jwe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),a=r[0],o=r[1];t.removeClasses(a,"exit"),t.addClass(a,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),a=r[0],o=r[1]?"appear":"enter";t.addClass(a,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),a=r[0],o=r[1]?"appear":"enter";t.removeClasses(a,o),t.addClass(a,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,a=r?(r&&n?n+"-":"")+e:n[e];return{baseClassName:a,activeClassName:r?a+"-active":n[e+"Active"],doneClassName:r?a+"-done":n[e+"Done"]}},t}Ofe(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],a=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&a&&(r+=" "+a),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,Wwe(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,a=n.active,o=n.done;this.appliedClasses[t]={},r&&zwe(e,r),a&&zwe(e,a),o&&zwe(e,o)},n.render=function(){var e=this.props,t=(e.classNames,Rfe(e,["classNames"]));return Tx.createElement(Pwe,_fe({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(Tx.Component);jwe.defaultProps={classNames:""},jwe.propTypes={};var Hwe="out-in",Gwe="in-out",Kwe=function(e,t,n){return function(){var r;e.props[t]&&(r=e.props)[t].apply(r,arguments),n()}},qwe=((Uwe={})[Hwe]=function(e){var t=e.current,n=e.changeState;return Tx.cloneElement(t,{in:!1,onExited:Kwe(t,"onExited",(function(){n(Dwe,null)}))})},Uwe[Gwe]=function(e){var t=e.current,n=e.changeState,r=e.children;return[t,Tx.cloneElement(r,{in:!0,onEntered:Kwe(r,"onEntered",(function(){n(Dwe)}))})]},Uwe),Xwe=((Vwe={})[Hwe]=function(e){var t=e.children,n=e.changeState;return Tx.cloneElement(t,{in:!0,onEntered:Kwe(t,"onEntered",(function(){n(Bwe,Tx.cloneElement(t,{in:!0}))}))})},Vwe[Gwe]=function(e){var t=e.current,n=e.children,r=e.changeState;return[Tx.cloneElement(t,{in:!1,onExited:Kwe(t,"onExited",(function(){r(Bwe,Tx.cloneElement(n,{in:!0}))}))}),Tx.cloneElement(n,{in:!0})]},Vwe),Qwe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={status:Bwe,current:null},t.appeared=!1,t.changeState=function(e,n){void 0===n&&(n=t.state.current),t.setState({status:e,current:n})},t}Ofe(t,e);var n=t.prototype;return n.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){return null==e.children?{current:null}:t.status===Dwe&&e.mode===Gwe?{status:Dwe}:!t.current||((n=t.current)===(r=e.children)||Tx.isValidElement(n)&&Tx.isValidElement(r)&&null!=n.key&&n.key===r.key)?{current:Tx.cloneElement(e.children,{in:!0})}:{status:"exiting"};var n,r},n.render=function(){var e,t=this.props,n=t.children,r=t.mode,a=this.state,o=a.status,i=a.current,s={children:n,current:i,changeState:this.changeState,status:o};switch(o){case Dwe:e=Xwe[r](s);break;case"exiting":e=qwe[r](s);break;case Bwe:e=i}return Tx.createElement(Mwe.Provider,{value:{isMounting:!this.appeared}},e)},t}(Tx.Component);Qwe.propTypes={},Qwe.defaultProps={mode:Hwe};var Ywe=_k.IDCardSide,$we=_k.Errors;function Zwe(e){return Jwe.apply(this,arguments)}function Jwe(){return(Jwe=dq(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.image,r=t.cardType,a=t.cardSide,o=t.apiClient,e.abrupt("return",o.uploadImage({file:n,label:"id_card.".concat(r,".").concat(a)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eIe(e){return tIe.apply(this,arguments)}function tIe(){return(tIe=dq(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.imageId,r=t.cardType,a=t.apiClient,e.abrupt("return",a.requestVerifyIDCard({card_type:r,image1:{id:n}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nIe(e){return rIe.apply(this,arguments)}function rIe(){return(rIe=dq(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.apiClient,r=t.cardType,a=t.frontCardId,o=t.isCapturingFrontSide,i=t.backCardId,s=t.recordedVideos,u=s.filter((function(e){return null!==e.id})),c=s.filter((function(e){return null===e.id&&e.frames.length>0})),e.next=5,Promise.all(c.map((function(e){return n.fileService.request({frames:e.frames})})));case 5:return l=e.sent,e.abrupt("return",n.detectIDTampering({card_type:r,image:{id:a},image2:o?void 0:{id:i},videos:[].concat(bq(u.map((function(e){return{id:e.id}}))),bq(l.map((function(e){return{id:e.data.file_id}}))))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aIe(e){return oIe.apply(this,arguments)}function oIe(){return(oIe=dq(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cardType,r=t.apiClient,a=t.frontCardId,o=t.backCardId,i=t.isCapturingFrontSide,e.abrupt("return",r.readIDCard({card_type:n,image1:i?{id:a}:{id:o}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iIe(e){return sIe.apply(this,arguments)}function sIe(){return(sIe=dq(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,f,p,h,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.image,r=t.frontCardId,a=t.onError,o=t.recordedVideos,i=t.apiClient,s=t.cardType,(u=t.cardSide)!==Ywe.BACK||r){e.next=4;break}return a($we.missing_front_id_card),e.abrupt("return");case 4:return e.next=6,Zwe({image:n,cardType:s,cardSide:u,apiClient:i});case 6:if(!(c=e.sent).errors){e.next=10;break}return a(gq(gq({},$we.upload_error),{},{details:c.errors})),e.abrupt("return");case 10:return l=c.data.image_id,(p=u===Ywe.FRONT)?d=l:(d=r,f=l),e.next=15,eIe({imageId:l,cardType:s,apiClient:i});case 15:if(!(h=e.sent).errors){e.next=19;break}return a(gq(gq({},$we.sanity_check_error),{},{details:h.errors})),e.abrupt("return");case 19:return e.next=21,aIe({cardType:s,apiClient:i,frontCardId:d,backCardId:f,isCapturingFrontSide:p});case 21:if(!(m=e.sent).errors){e.next=25;break}return a(gq(gq({},$we.read_id_card_error),{},{details:m.errors})),e.abrupt("return");case 25:return e.next=27,nIe({apiClient:i,cardType:s,frontCardId:d,isCapturingFrontSide:p,backCardId:f,recordedVideos:o});case 27:if(!(g=e.sent).errors){e.next=31;break}return a(gq(gq({},$we.detect_id_tampering_error),{},{details:g.errors})),e.abrupt("return");case 31:return e.abrupt("return",{sanityResult:h.data,tamperingInfo:g.data,cardInfo:m.data});case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var uIe=_k.Errors;function cIe(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)}function lIe(e,t){return Math.sqrt(cIe(e,t))}function dIe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canvas,n=e.imgMargin,r=void 0===n?.15:n,a=t.width,o=t.height,i=r;i<1&&(i=parseInt(.5*(o+a)*i,10));var s=a+2*i,u=o+2*i,c=i,l=i,d=document.createElement("canvas");d.width=s,d.height=u;var f=d.getContext("2d");return f.fillStyle="#000000",f.fillRect(0,0,d.width,d.height),f.drawImage(t,0,0,t.width,t.height,c,l,t.width,t.height),{canvas:d,margin:i}}function fIe(e,t){var n=window.cv,r=yq(t.map((function(e){return e.location})),4),a=r[0],o=r[1],i=r[2],s=r[3],u=lIe(i,s),c=lIe(o,a),l=Math.max(u,c),d=lIe(o,i),f=lIe(a,s),p=Math.max(d,f),h=[a.x,a.y,o.x,o.y,i.x,i.y,s.x,s.y],m=[0,0,l-1,0,l-1,p-1,0,p-1],g=n.imread(e),v=new n.Mat,y=new n.Size(l,p),b=n.matFromArray(4,1,n.CV_32FC2,h),x=n.matFromArray(4,1,n.CV_32FC2,m),k=n.getPerspectiveTransform(b,x);n.warpPerspective(g,v,k,y,n.INTER_LINEAR,n.BORDER_CONSTANT,new n.Scalar);var w=new ImageData(new Uint8ClampedArray(v.data),v.cols,v.rows);return g.delete(),v.delete(),b.delete(),x.delete(),w}function pIe(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},a={x:n.x-e.x,y:n.y-e.y},o=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2)),i=Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2));return 180*Math.acos((r.x*a.x+r.y*a.y)/(o*i))/Math.PI}function hIe(e){var t=e.corners,n=e.width,r=e.height,a=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;t.forEach((function(e){var t=e.location,n=t.x,r=t.y;a=Math.min(a,n),o=Math.min(o,r),i=Math.max(i,n),s=Math.max(s,r)}));var u=.06;return!(a/n<u||o/r<u||(r-s)/r<u||(n-i)/n<u)}function mIe(){return gIe.apply(this,arguments)}function gIe(){return(gIe=dq(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s,u,c,l,d,f,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},n=t.canvas,r=t.paddingPercent,a=void 0===r?.04:r,o=n.width,i=n.height,s=Math.floor(o*a),u=Math.floor(i*a),c=o-2*s,l=i-2*u,d=document.createElement("canvas"),f=d.getContext("2d"),d.width=c,d.height=l,f.drawImage(n,s,u,c,l,0,0,c,l),e.abrupt("return",JI.isCardGlare(d));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vIe(e){for(var t=e.length,n=0;n<t;n++){var r=(n+t-1)%t,a=(n+1)%t,o=pIe(e[n].location,e[r].location,e[a].location);if(o<70||o>110)return!1}return!0}function yIe(e){return bIe.apply(this,arguments)}function bIe(){return(bIe=dq(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.blazefaceModel,r=t.predictedIdCardCanvas,a=t.frontSide,o=r.width,i=r.height,s=Math.floor(o/3),u=Math.floor(4*i/5),c=document.createElement("canvas"),l=c.getContext("2d"),c.width=s,c.height=u,l.drawImage(r,0,Math.floor(i/5),s,u,0,0,s,u),e.next=12,zw.getModelPredictions({model:n,sCanvas:c});case 12:if(d=e.sent,f=d.filter((function(e){var t=e.topLeft,n=e.bottomRight,r=yq(e.probability,1)[0],a=e.landmarks;return!(r<.9||a.length<4||_w.rectAreaRatio({small:{coords:[t,n]},big:{coords:[[0,0],[zw.SIZE,zw.SIZE]]}})<.025)})),p=f.length,!a){e.next=22;break}if(0!==p){e.next=18;break}return e.abrupt("return",uIe.id_detector_error_front_side_no_faces);case 18:if(!(p>1)){e.next=20;break}return e.abrupt("return",uIe.id_detector_error_front_side_multiple_faces);case 20:e.next=24;break;case 22:if(!(p>0)){e.next=24;break}return e.abrupt("return",uIe.id_detector_error_back_side_has_faces);case 24:return e.abrupt("return",null);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xIe=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e},kIe=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=LX(n))==n?n:0),void 0!==t&&(t=(t=LX(t))==t?t:0),xIe(LX(e),t,n)},wIe="https://unpkg.com/id-card-model@1.0.2/models/web_model/web_model_noquant/model.json",IIe="https://unpkg.com/id-card-model-testing@1.0.5/libs/opencv.js",CIe={0:"top-left",1:"top-right",2:"bottom-right",3:"bottom-left",4:"cccd.front",5:"passport",6:"cmnd_old.front",7:"cmnd_old.back",8:"cmnd_new.front",9:"cmnd_new.back",10:"cccd_new.front",11:"cccd_new.back"};function EIe(e){var t,n,r,a,o,i=e.card,s=e.corners,u=i.box,c={x:(u[1]+u[3])/2,y:(u[0]+u[2])/2},l=u[2]-u[0],d=u[1]-u[3],f=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=xq(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=n.next();return i=e.done,e})),e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(s);try{for(f.s();!(o=f.n()).done;){var p=o.value;switch(p.label){case"top-left":t||(t=p.location);break;case"top-right":n||(n=p.location);break;case"bottom-right":r||(r=p.location);break;case"bottom-left":a||(a=p.location)}}}catch(e){f.e(e)}finally{f.f()}if(![t,n,r,a].every(Boolean))return console.debug("Not qualified, corners missing"),!1;var h={x:(t.x+r.x)/2,y:(t.y+r.y)/2},m={x:(n.x+a.x)/2,y:(n.y+a.y)/2},g=cIe(c,h),v=cIe(c,m);return Math.sqrt(g)>(l+d)/8||Math.sqrt(v)>(l+d)/8?(console.debug("Not qualified, not close enough"),!1):(console.debug("Qualified"),!0)}function SIe(e){return TIe.apply(this,arguments)}function TIe(){return(TIe=dq(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,nC.loadExternalScript({url:n});case 3:return e.abrupt("return",new Promise((function(e){window.cv.onRuntimeInitialized=e})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var AIe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,a,o,i,s;return t=e,(n=[{key:"load",value:(s=dq(regeneratorRuntime.mark((function e(){var t,n,r,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.opencvUrl,r=void 0===n?IIe:n,a=t.modelUrl,e.next=3,Promise.all([SIe({url:r}),this.loadModel({modelUrl:a})]);case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"loadModel",value:(i=dq(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.modelUrl,r=void 0===n?wIe:n,e.next=3,wj.initTensorFlow();case 3:return e.next=5,m3(r);case 5:this.model=e.sent,a=this.model.inputs,o=this.model.outputs,this.boxesIndex=o.findIndex((function(e){return"Identity_3"===e.name})),this.classesIndex=o.findIndex((function(e){return"Identity_2"===e.name})),this.scoresIndex=o.findIndex((function(e){return"Identity_1"===e.name})),this.inputSize=[a[0].shape[1],a[0].shape[2]];case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"dispose",value:(o=dq(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.model&&this.model.dispose();case 1:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"predict",value:(a=dq(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,f,p,h,m,g,v,y,b,x,k,w,I,C,E,S=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.length>1&&void 0!==S[1]?S[1]:{},r=n.imgMargin,a=void 0===r?.5:r,o=n.detectThreshold,i=void 0===o?.3:o,s=n.maxNumReturns,u=void 0===s?100:s,c={},l=t.width,d=t.height,c.originalWidth=l,c.originalHeight=d,f=dIe({canvas:t,imgMargin:a}),p=f.canvas,h=f.margin,m=yq(this.inputSize,2),g=m[0],v=m[1],y=p.width/g,b=p.height/v,(x=document.createElement("canvas")).width=g,x.height=v,x.getContext("2d").drawImage(p,0,0,p.width,p.height,0,0,x.width,x.height),c.canvas=x,c.margin=h,e.next=19,this.detect(x,{detectThreshold:i,maxNumReturns:u});case 19:if(k=e.sent,w={inputImage:c,card:null},I=[],C=[],k.forEach((function(e){var t=yq(e.box,4),n=t[0],r=t[1],a=t[2],o=t[3];e.clazz<=3?I.push({clazz:e.clazz,label:e.label,score:e.score,location:{x:kIe(Math.floor((o+r)/2*y-h),0,l),y:kIe(Math.floor((n+a)/2*b-h),0,d)},scaledLocation:{x:kIe(Math.floor((o+r)/2),0,x.width),y:kIe(Math.floor((n+a)/2),0,x.height)}}):C.push({label:e.label,score:e.score,box:[kIe(Math.floor(n*b-h),0,d),kIe(Math.floor(r*y-h),0,l),kIe(Math.floor(a*b-h),0,d),kIe(Math.floor(o*y-h),0,l)]})})),I.sort((function(e,t){return t.score-e.score})),C.sort((function(e,t){return t.score-e.score})),!(C.length>0)){e.next=35;break}if(EIe({card:E=C[0],corners:I})){e.next=31;break}return console.debug("Not qualified.",E,I),e.abrupt("return",w);case 31:return I.sort((function(e,t){return e.clazz-t.clazz})),E.corners=I,w.card=E,e.abrupt("return",w);case 35:return e.abrupt("return",w);case 36:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"detect",value:(r=dq(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,f,p,h,m,g,v,y,b,x,k,w,I,C=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.length>1&&void 0!==C[1]?C[1]:{},r=n.detectThreshold,a=n.maxNumReturns,o=t.width,i=t.height,s=z$((function(){var e=t;return e instanceof tY||(e=b$(e)),aJ(s$(e,"float32"),0)})),u=this.model.execute(s),s.dispose(),e.next=8,Promise.all([u[this.boxesIndex].array(),u[this.classesIndex].data(),u[this.scoresIndex].data()]);case 8:for(c=e.sent,l=yq(c,3),d=yq(l[0],1),f=d[0],p=l[1],h=l[2],console.log("boxxess",f,p,h),m=[],g=Math.min(h.length,a),v=0;v<g;v++)(y=h[v])>r&&(x=p[v],k=null!==(b=CIe[Math.round(x)])&&void 0!==b?b:"NA",w=f[v],I=[w[0]*i,w[3]*o,w[2]*i,w[1]*o],m.push({score:y,clazz:x,box:I,label:k}));return e.abrupt("return",m);case 19:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}])&&fq(t.prototype,n),e}();function NIe(){return _Ie.apply(this,arguments)}function _Ie(){return(_Ie=dq(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.opencvUrl,r=t.modelUrl,a=new AIe,e.next=4,Promise.all([T3(),a.load({opencvUrl:n,modelUrl:r})]);case 4:return o=e.sent,i=yq(o,1),s=i[0],e.abrupt("return",{idCardModel:a,blazefaceModel:s});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var RIe=_k.Errors;function OIe(){return(OIe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var FIe="undefined"!=typeof window?Tx.useLayoutEffect:Tx.useEffect,MIe={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},DIe=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],BIe=function(e,t,n,r,a){var o=a.offsetX,i=a.offsetY,s=r?8:0,u=n.split(" "),c=e.top+e.height/2,l=e.left+e.width/2,d=t.height,f=t.width,p=c-d/2,h=l-f/2,m="",g="0%",v="0%";switch(u[0]){case"top":p-=d/2+e.height/2+s,m="rotate(180deg)  translateX(50%)",g="100%",v="50%";break;case"bottom":p+=d/2+e.height/2+s,m="rotate(0deg) translateY(-100%) translateX(-50%)",v="50%";break;case"left":h-=f/2+e.width/2+s,m=" rotate(90deg)  translateY(50%) translateX(-25%)",v="100%",g="50%";break;case"right":h+=f/2+e.width/2+s,m="rotate(-90deg)  translateY(-150%) translateX(25%)",g="50%"}switch(u[1]){case"top":p=e.top,g=e.height/2+"px";break;case"bottom":p=e.top-d+e.height,g=d-e.height/2+"px";break;case"left":h=e.left,v=e.width/2+"px";break;case"right":h=e.left-f+e.width,v=f-e.width/2+"px"}return{top:p="top"===u[0]?p-i:p+i,left:h="left"===u[0]?h-o:h+o,transform:m,arrowLeft:v,arrowTop:g}},PIe=function(e,t,n,r,a,o){var i=a.offsetX,s=a.offsetY,u={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},c=0,l=function(e){var t={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof e){var n=document.querySelector(e);null!==n&&(t=n.getBoundingClientRect())}return t}(o),d=Array.isArray(n)?n:[n];for((o||Array.isArray(n))&&(d=[].concat(d,DIe));c<d.length;){var f={top:(u=BIe(e,t,d[c],r,{offsetX:i,offsetY:s})).top,left:u.left,width:t.width,height:t.height};if(!(f.top<=l.top||f.left<=l.left||f.top+f.height>=l.top+l.height||f.left+f.width>=l.left+l.width))break;c++}return u},LIe=0,UIe=Tx.forwardRef((function(e,t){var n=e.trigger,r=void 0===n?null:n,a=e.onOpen,o=void 0===a?function(){}:a,i=e.onClose,s=void 0===i?function(){}:i,u=e.defaultOpen,c=void 0!==u&&u,l=e.open,d=void 0===l?void 0:l,f=e.disabled,p=void 0!==f&&f,h=e.nested,m=void 0!==h&&h,g=e.closeOnDocumentClick,v=void 0===g||g,y=e.repositionOnResize,b=void 0===y||y,x=e.closeOnEscape,k=void 0===x||x,w=e.on,I=void 0===w?["click"]:w,C=e.contentStyle,E=void 0===C?{}:C,S=e.arrowStyle,T=void 0===S?{}:S,A=e.overlayStyle,N=void 0===A?{}:A,_=e.className,R=void 0===_?"":_,O=e.position,F=void 0===O?"bottom center":O,M=e.modal,D=void 0!==M&&M,B=e.lockScroll,P=void 0!==B&&B,L=e.arrow,U=void 0===L||L,V=e.offsetX,W=void 0===V?0:V,z=e.offsetY,j=void 0===z?0:z,H=e.mouseEnterDelay,G=void 0===H?100:H,K=e.mouseLeaveDelay,q=void 0===K?100:K,X=e.keepTooltipInside,Q=void 0!==X&&X,Y=e.children,$=Tx.useState(d||c),Z=$[0],J=$[1],ee=Tx.useRef(null),te=Tx.useRef(null),ne=Tx.useRef(null),re=Tx.useRef(null),ae=Tx.useRef("popup-"+ ++LIe),oe=!!D||!r,ie=Tx.useRef(0);FIe((function(){return Z?(re.current=document.activeElement,ge(),me(),pe()):he(),function(){clearTimeout(ie.current)}}),[Z]),Tx.useEffect((function(){"boolean"==typeof d&&(d?se():ue())}),[d,p]);var se=function(e){Z||p||(J(!0),setTimeout((function(){return o(e)}),0))},ue=function(e){var t;Z&&!p&&(J(!1),oe&&(null===(t=re.current)||void 0===t||t.focus()),setTimeout((function(){return s(e)}),0))},ce=function(e){null==e||e.stopPropagation(),Z?ue(e):se(e)},le=function(e){clearTimeout(ie.current),ie.current=setTimeout((function(){return se(e)}),G)},de=function(e){null==e||e.preventDefault(),ce()},fe=function(e){clearTimeout(ie.current),ie.current=setTimeout((function(){return ue(e)}),q)},pe=function(){oe&&P&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},he=function(){oe&&P&&(document.getElementsByTagName("body")[0].style.overflow="auto")},me=function(){var e,t=null==te||null===(e=te.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),n=Array.prototype.slice.call(t)[0];null==n||n.focus()};Tx.useImperativeHandle(t,(function(){return{open:function(){se()},close:function(){ue()},toggle:function(){ce()}}}));var ge=function(){if(!oe&&Z&&(null==ee?void 0:ee.current)&&(null==ee?void 0:ee.current)&&(null==te?void 0:te.current)){var e,t,n=ee.current.getBoundingClientRect(),r=te.current.getBoundingClientRect(),a=PIe(n,r,F,U,{offsetX:W,offsetY:j},Q);te.current.style.top=a.top+window.scrollY+"px",te.current.style.left=a.left+window.scrollX+"px",U&&ne.current&&(ne.current.style.transform=a.transform,ne.current.style.setProperty("-ms-transform",a.transform),ne.current.style.setProperty("-webkit-transform",a.transform),ne.current.style.top=(null===(e=T.top)||void 0===e?void 0:e.toString())||a.arrowTop,ne.current.style.left=(null===(t=T.left)||void 0===t?void 0:t.toString())||a.arrowLeft)}};!function(e,t){void 0===t&&(t=!0),Tx.useEffect((function(){if(t){var n=function(t){"Escape"===t.key&&e(t)};return document.addEventListener("keyup",n),function(){t&&document.removeEventListener("keyup",n)}}}),[e,t])}(ue,k),function(e,t){void 0===t&&(t=!0),Tx.useEffect((function(){if(t){var n=function(t){if(9===t.keyCode){var n,r=null==e||null===(n=e.current)||void 0===n?void 0:n.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),a=Array.prototype.slice.call(r);if(1===a.length)return void t.preventDefault();var o=a[0],i=a[a.length-1];t.shiftKey&&document.activeElement===o?(t.preventDefault(),i.focus()):document.activeElement===i&&(t.preventDefault(),o.focus())}};return document.addEventListener("keydown",n),function(){t&&document.removeEventListener("keydown",n)}}}),[e,t])}(te,Z&&oe),function(e,t){void 0===t&&(t=!0),Tx.useEffect((function(){if(t){var n=function(){e()};return window.addEventListener("resize",n),function(){t&&window.removeEventListener("resize",n)}}}),[e,t])}(ge,b),function(e,t,n){void 0===n&&(n=!0),Tx.useEffect((function(){if(n){var r=function(n){var r=Array.isArray(e)?e:[e],a=!1;r.forEach((function(e){e.current&&!e.current.contains(n.target)||(a=!0)})),n.stopPropagation(),a||t(n)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),function(){n&&(document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r))}}}),[e,t,n])}(r?[te,ee]:[te],ue,v&&!m);var ve,ye=function(){return Tx.createElement("div",Object.assign({},(e=oe?MIe.popupContent.modal:MIe.popupContent.tooltip,t={className:"popup-content "+(""!==R?R.split(" ").map((function(e){return e+"-content"})).join(" "):""),style:OIe({},e,E,{pointerEvents:"auto"}),ref:te,onClick:function(e){e.stopPropagation()}},!D&&I.indexOf("hover")>=0&&(t.onMouseEnter=le,t.onMouseLeave=fe),t),{key:"C",role:oe?"dialog":"tooltip",id:ae.current}),U&&!oe&&Tx.createElement("div",{ref:ne,style:MIe.popupArrow},Tx.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==R?R.split(" ").map((function(e){return e+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:OIe({position:"absolute"},T)},Tx.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),Y&&"function"==typeof Y?Y(ue,Z):Y);var e,t},be=!(I.indexOf("hover")>=0),xe=oe?MIe.overlay.modal:MIe.overlay.tooltip,ke=[be&&Tx.createElement("div",{key:"O","data-testid":"overlay","data-popup":oe?"modal":"tooltip",className:"popup-overlay "+(""!==R?R.split(" ").map((function(e){return e+"-overlay"})).join(" "):""),style:OIe({},xe,N,{pointerEvents:v&&m||oe?"auto":"none"}),onClick:v&&m?ue:void 0,tabIndex:-1},oe&&ye()),!oe&&ye()];return Tx.createElement(Tx.Fragment,null,function(){for(var e={key:"T",ref:ee,"aria-describedby":ae.current},t=Array.isArray(I)?I:[I],n=0,a=t.length;n<a;n++)switch(t[n]){case"click":e.onClick=ce;break;case"right-click":e.onContextMenu=de;break;case"hover":e.onMouseEnter=le,e.onMouseLeave=fe;break;case"focus":e.onFocus=le,e.onBlur=fe}if("function"==typeof r){var o=r(Z);return!!r&&Tx.cloneElement(o,e)}return!!r&&Tx.cloneElement(r,e)}(),Z&&Owe.createPortal(ke,(null===(ve=document.getElementById("popup-root"))&&((ve=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(ve)),ve)))}));function VIe(){var e=vq(["\n  .popup-content {\n    margin: auto;\n    background: #fff;\n    width: 100%;\n    padding: 5px;\n    border: 1px solid #d7d7d7;\n    max-width: 568px;\n    border-radius: 0.25rem;\n  }\n\n  [role=tooltip].popup-content {\n    width: 200px;\n    box-shadow: 0 0 3px rgba(0, 0, 0, .16);\n    border-radius: 5px\n  }\n\n  .popup-overlay {\n    background: rgba(0, 0, 0, .5);\n    padding: 10px;\n  }\n\n  [data-popup=tooltip].popup-overlay {\n    background: transparent\n  }\n\n  .popup-arrow {\n    -webkit-filter: drop-shadow(0 -3px 3px rgba(0, 0, 0, .16));\n    filter: drop-shadow(0 -3px 3px rgba(0, 0, 0, .16));\n    color: #fff;\n    stroke-width: 2px;\n    stroke: #d7d7d7;\n    stroke-dasharray: 30px;\n    stroke-dashoffset: -54px;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0\n  }\n"]);return VIe=function(){return e},e}var WIe,zIe=sq(VIe()),jIe=function(e){var t=e.open,n=e.children;return Tx.createElement(Tx.Fragment,null,Tx.createElement(UIe,{overlayStyle:{zIndex:2e3},closeOnDocumentClick:!1,closeOnEscape:!1,modal:!0,open:t},n),Tx.createElement(zIe,null))};jIe.propTypes={open:Tk.bool,children:Tk.node},jIe.defaultProps={open:!1,children:null};var HIe="default",GIe="error",KIe=(pq(WIe={},HIe,{fill:"none",strokeWidth:2,stroke:"#f4f4f4",strokeDasharray:"7, 4",opacity:.6}),pq(WIe,GIe,{fill:"rgba(234,50,35, 0.1)",strokeWidth:2,stroke:"#ea3223"}),WIe),qIe={fill:"rgba(0,0,0, 0.6)"};function XIe(e){var t=e.className,n=e.width,r=e.height,a=e.type,o=KIe[a];return Tx.createElement("svg",{width:n,height:r,className:t},Tx.createElement("rect",{x:2,y:2,rx:10,ry:10,width:n-4,height:r-4,style:o}),Tx.createElement("path",{d:"M0,".concat(12," Q0,0 ").concat(12,",0 L0,0 Z"),style:qIe}),Tx.createElement("path",{d:"M0,".concat(r-12," Q0,").concat(r," ").concat(12,",").concat(r," L0,").concat(r," Z"),style:qIe}),Tx.createElement("path",{d:"M".concat(n-12,",").concat(r," Q").concat(n,",").concat(r," ").concat(n,",").concat(r-12," L").concat(n,",").concat(r," Z"),style:qIe}),Tx.createElement("path",{d:"M".concat(n-12,",0 Q").concat(n,",0 ").concat(n,",").concat(12," L").concat(n,",0 Z"),style:qIe}))}XIe.propTypes={className:Tk.string,width:Tk.number,height:Tk.number,type:Tk.oneOf([HIe,GIe])},XIe.defaultProps={className:"",width:300,height:200,type:HIe};var QIe=uq(["from{transform:perspective(400px);}to{transform:perspective(400px) rotateY(90deg);}"]),YIe=uq(["from{transform:perspective(400px) rotateY(-90deg);}to{transform:perspective(400px);}"]),$Ie=GK([".flipY-exit{animation-name:",";animation-duration:","ms;animation-timing-function:ease-in;}.flipY-enter{animation-name:",";animation-duration:","ms;animation-timing-function:ease-out;}"],QIe,500,YIe,500),ZIe=Object.freeze({__proto__:null,animationDuration:500,default:$Ie}),JIe=uq(["from,to{transform:translate3d(-","px,0,0);}50%{transform:translate3d(","px,0,0);}"],20,20),eCe=uq(["from,to{transform:translate3d(0,-","px,0);}50%{transform:translate3d(0,","px,0);}"],20,20),tCe=GK([".slide-horizontal{animation-name:",";animation-iteration-count:infinite;animation-duration:2000ms;animation-timing-function:linear;}.slide-vertical{animation-name:",";animation-iteration-count:infinite;animation-duration:2000ms;animation-timing-function:linear;}"],JIe,eCe),nCe=Object.freeze({__proto__:null,default:tCe}),rCe=uq(["from,to{opacity:1;}50%{opacity:0;}"]),aCe=GK([".blink{animation-name:",";animation-iteration-count:infinite;animation-duration:2000ms;animation-timing-function:linear;}"],rCe),oCe=Object.freeze({__proto__:null,default:aCe});function iCe(){var e=vq(["\n  ","\n"]);return iCe=function(){return e},e}function sCe(){var e=vq(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: ","; // must be higher than BASE_Z_INDEX and lower than other layers\n"]);return sCe=function(){return e},e}var uCe=oq.div(sCe(),1001),cCe=uq(["from{background:#000;}to{}"]),lCe=GK([".splash-enter{animation-name:",";animation-duration:","ms;animation-timing-function:ease-in;}"],cCe,300),dCe=oq.div(iCe(),lCe),fCe=function(e){var t=e.keyForTransition,n=void 0===t?0:t;return Tx.createElement(dCe,null,Tx.createElement(Qwe,null,Tx.createElement(jwe,{key:n,timeout:{enter:300,exit:0},classNames:"splash",unmountOnExit:!1},Tx.createElement(uCe,null))))},pCe=Object.freeze({__proto__:null,default:fCe}),hCe=uq(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),mCe=GK([".spin{animation-name:",";animation-iteration-count:infinite;animation-duration:1000ms;animation-timing-function:linear;}"],hCe),gCe=Object.freeze({__proto__:null,default:mCe}),vCe=Object.freeze({__proto__:null,flipY:ZIe,slide:nCe,blink:oCe,splash:pCe,spin:gCe});function yCe(){var e=vq(["\n  position: absolute;\n  top: 0;\n  left: 0;\n"]);return yCe=function(){return e},e}function bCe(){var e=vq(["\n  font-size: 18px;\n  text-align: center;\n  padding: 10px;\n"]);return bCe=function(){return e},e}function xCe(){var e=vq(["\n  position: absolute;\n  font-size: 18px;\n  text-align: center;\n  border-radius: 3px;\n  padding: 5px 10px;\n  background: #ea3223;\n  color: #fff;\n  margin: 0 10px;\n  top: ",";\n  z-index: ",";\n"]);return xCe=function(){return e},e}function kCe(){var e=vq(["\n  background: #ea3223;\n  padding: 5px 10px;\n  border-radius: 3px;\n"]);return kCe=function(){return e},e}function wCe(){var e=vq(["\n  position: absolute;\n  font-size: 16px;\n  text-align: center;\n  color: #fff;\n  top: ",";\n  z-index: ",";\n"]);return wCe=function(){return e},e}function ICe(){var e=vq(["\n  font-size: 20px;\n  margin-left: 10px;\n  color: green;\n  position: absolute;\n  left: 0;\n  top: 10px;\n  background: white;\n  z-index: ",";\n"]);return ICe=function(){return e},e}function CCe(){var e=vq(["\n  font-size: 20px;\n  margin-left: 10px;\n  color: #fff;\n"]);return CCe=function(){return e},e}function ECe(){var e=vq(["\n  display: flex;\n  align-items: center;\n"]);return ECe=function(){return e},e}function SCe(){var e=vq(["\n  transform: translateZ(1000px); // to fix rotating bug on safari\n  transform-style: preserve-3d;\n  position: absolute;\n  top: ",";\n  z-index: ",";\n"]);return SCe=function(){return e},e}function TCe(){var e=vq(["\n  color: #fff;\n  text-align: center;\n"]);return TCe=function(){return e},e}function ACe(){var e=vq(["\n  cursor: pointer;\n  text-align: center;\n  width: ","px;\n\n  img {\n    width: 100%;\n  }\n\n  z-index: ",";\n  position: fixed;\n  bottom: ","px;\n"]);return ACe=function(){return e},e}function NCe(){var e=vq(["\n  border-radius: 5px;\n  opacity: 0.7;\n  height: 38px;\n"]);return NCe=function(){return e},e}function _Ce(){var e=vq(["\n  ","\n  ","\n"]);return _Ce=function(){return e},e}var RCe=fCe,OCe=oq.div(_Ce(),$Ie,mCe),FCe=oq.img(NCe()),MCe=oq.div(ACe(),60,1020,10),DCe=oq.div(TCe()),BCe=oq.div(SCe(),(function(e){return e.y}),1020),PCe=oq.div(ECe()),LCe=oq(DCe)(CCe()),UCe=oq(DCe)(ICe(),1030),VCe=oq(DCe)(wCe(),(function(e){return e.y}),1020),WCe=oq(VCe)(kCe()),zCe=oq(DCe)(xCe(),(function(e){return e.y}),1020),jCe=oq.div(bCe()),HCe=oq(XIe)(yCe()),GCe={BTN_OK:{en:"OK",vi:"Tôi đã hiểu"},FRONT:{en:"front",vi:"trước"},BACK:{en:"back",vi:"sau"},BTN_USE_THIS_PICTURE:{en:"Use this picture",vi:"Dùng ảnh này"},BTN_TRY_AGAIN:{en:"Try again",vi:"Thử lại"}},KCe={WARMUP_INTRO:{en:"Warming up... Please wait a moment",vi:"Đang khởi động, vui lòng chờ trong giây lát..."}};function qCe(){var e=vq(["\n  margin-top: 20px;\n  width: 100%;\n  max-width: 160px;\n  height: 50px;\n  background-color: #007bff;\n  border: 0;\n  outline: none;\n  border-radius: 0.25rem;\n  color: #fff;\n  font-weight: 400;\n  cursor: pointer;\n  font-size: 1rem;\n"]);return qCe=function(){return e},e}function XCe(){var e=vq(["\n  text-align: center;\n  font-size: 1rem;\n"]);return XCe=function(){return e},e}function QCe(){var e=vq(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding: 10px;\n"]);return QCe=function(){return e},e}var YCe=_k.IDCardMessage,$Ce=oq.div(QCe()),ZCe=oq.div(XCe()),JCe=oq.button(qCe()),eEe=function(e){var t=e.onOk,n=e.maxSessionTime,r=Mk.useSDKSettings().lang;return Tx.createElement($Ce,null,Tx.createElement(ZCe,{className:"popup-message"},Ale(YCe.TIMEOUT_INSTRUCTION[r])({x:n})),Tx.createElement(JCe,{className:"popup-button",onClick:t},GCe.BTN_OK[r]))};function tEe(){var e=vq(["\n  margin: 20px 0;\n  width: 100%;\n  display: flex;\n  justify-content: space-evenly;\n"]);return tEe=function(){return e},e}function nEe(){var e=vq(["\n  width: 100%;\n  border-radius: 5px;\n"]);return nEe=function(){return e},e}function rEe(){var e=vq(["\n  margin-top: 20px;\n  width: 100%;\n  max-width: 160px;\n  height: 50px;\n  background-color: #007bff;\n  border: 0;\n  outline: none;\n  border-radius: 0.25rem;\n  color: #fff;\n  font-weight: 400;\n  cursor: pointer;\n  font-size: 1rem;\n"]);return rEe=function(){return e},e}function aEe(){var e=vq(["\n  text-align: center;\n  font-size: 1rem;\n  color: #ea3223;\n  margin-top: 10px;\n"]);return aEe=function(){return e},e}function oEe(){var e=vq(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding: 10px;\n"]);return oEe=function(){return e},e}eEe.propTypes={onOk:Tk.func,maxSessionTime:Tk.number},eEe.defaultProps={onOk:function(){},maxSessionTime:30};var iEe=oq.div(oEe()),sEe=oq.div(aEe()),uEe=oq.button(rEe()),cEe=oq.img(nEe()),lEe=oq.div(tEe()),dEe=function(e){var t=e.imageBlobTaken,n=e.onConfirm,r=e.onTryAgain,a=e.error,o=yq(Tx.useState(null),2),i=o[0],s=o[1],u=Mk.useSDKSettings().lang;return Tx.useEffect((function(){var e;return t&&(e=URL.createObjectURL(t),s(e)),function(){URL.revokeObjectURL(e)}}),[t]),Tx.createElement(iEe,null,Tx.createElement(cEe,{src:i}),a&&Tx.createElement(sEe,{className:"confirm-popup-error-message"},a.msg[u]),Tx.createElement(lEe,null,Tx.createElement(uEe,{onClick:n},GCe.BTN_USE_THIS_PICTURE[u]),Tx.createElement(uEe,{onClick:r},GCe.BTN_TRY_AGAIN[u])))};dEe.propTypes={imageBlobTaken:Tk.shape({}),error:Tk.shape({msg:Tk.shape({})}),onConfirm:Tk.func,onTryAgain:Tk.func},dEe.defaultProps={imageBlobTaken:{},error:null,onConfirm:function(){},onTryAgain:function(){}};var fEe="SESSION_TIMEOUT",pEe="CONFIRM",hEe=_k.IDCardMessage,mEe=_k.IDCardSide,gEe=_k.IDCardType,vEe=_k.Errors;function yEe(e){var t=e.frontCamera,n=e.title,r=e.description,a=e.onClose,o=e.usePortraitMask,i=e.onError,s=e.cardType,u=e.cardSide,c=e.apiCheck,l=e.onSuccess,d=e.frontCardId,f=e.enableRecording,p=e.onApiCheck,h=e.resultWarmup,m=e.enableConfirmPopup,g=yq(Tx.useState(0),2),v=g[0],y=g[1],b=u===mEe.FRONT,x=e.titleIcon||(b?"id_card_front.svg":"id_card_back.svg"),k=Pk.useAsset(x),w=yq(Tx.useState({}),2),I=w[0],C=w[1],E=I.yTitle,S=I.yDescription,T=I.yMessage,A=Pk.useAsset("ic_camera.svg"),N=yq(Tx.useState(""),2),_=N[0],R=N[1],O=Mk.useSDKSettings(),F=O.apiClient,M=O.debug,D=O.lang,B=Tx.useRef(null),P=yq(Tx.useState(null),2),L=P[0],U=P[1],V=yq(Tx.useState(""),2),W=V[0],z=V[1],j=yq(Tx.useState(!1),2),H=j[0],G=j[1],K=yq(Tx.useState(null),2),q=K[0],X=K[1],Q=yq(Tx.useState(!1),2),Y=Q[0],$=Q[1],Z=function(){var e=yq(Tx.useState(!1),2),t=e[0],n=e[1],r=yq(Tx.useState(null),2),a=r[0],o=r[1];return{showPopup:Tx.useCallback((function(e){var t=e.popupType;o(t),n(null!==t)}),[]),popupShown:t,popupType:a}}(),J=Z.showPopup,ee=Z.popupShown,te=Z.popupType,ne=Tx.useRef(null),re=Tx.useRef((function(){})),ae=yq(Tx.useState(null),2),oe=ae[0],ie=ae[1],se=Tx.useRef(!1),ue=function(e){var t=e.apiCheck,n=e.enableRecordingProp,r=Mk.useSDKSettings().apiClient,a=yq(Tx.useState(null),2),o=a[0],i=a[1];return Tx.useEffect((function(){function e(){return(e=dq(regeneratorRuntime.mark((function e(){var a,o,s,u,c,l,d,f,p,h,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},!t){e.next=5;break}return e.next=4,r.clientSettings();case 4:a=e.sent;case 5:o=mde(a,"data.settings.sdk_settings.id_detection_settings.save_frame_settings.enable",n),s=mde(a,"data.settings.sdk_settings.id_detection_settings.save_frame_settings.frames_interval_ms",190),u=mde(a,"data.settings.sdk_settings.id_detection_settings.save_frame_settings.quality_web",80),c=mde(a,"data.settings.sdk_settings.id_detection_settings.limit_time_settings.enable",!0),l=mde(a,"data.settings.sdk_settings.id_detection_settings.limit_time_settings.limit_time_second",30),d=mde(a,"data.settings.sdk_settings.id_detection_settings.limit_time_settings.video_partial_length_seconds",15),f=mde(a,"data.settings.sdk_settings.id_detection_settings.auto_capture.enable",!0),p=mde(a,"data.settings.sdk_settings.id_detection_settings.auto_capture.wait_for_best_image_time_ms",3e3),h=mde(a,"data.settings.sdk_settings.id_detection_settings.blur_check.enable",!0),m=mde(a,"data.settings.sdk_settings.id_detection_settings.blur_check.threshold",.29),i({enableRecording:o,frameCaptureIntervalMs:s,sessionTime:l,maxRecordingTimePerVideo:d,saveFrameQuality:u,enableTimers:c,enableAutoCapture:f,waitForBestImageTimeMs:p,enableBlurCheck:h,blurThreshold:m});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r,t,n]),{apiSettings:o}}({apiCheck:c,enableRecordingProp:f}).apiSettings,ce=Tx.useCallback((function(e){z(null===e?"":Ale(e.msg[D])({side:b?GCe.FRONT[D]:GCe.BACK[D]}))}),[D,b]),le=Tx.useCallback(function(){var e=dq(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.current({imageBlobTaken:t.imageBlob});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),de=function(e){var t=e.resultWarmup,n=e.refVideo,r=e.videoPlayed,a=e.cropArea,o=e.apiSettings,i=e.onError,s=e.frontSide,u=e.onAutoCaptureSuccess,c=Tx.useRef(null),l=Tx.useRef(!1),d=Tx.useRef(null),f=Tx.useRef(null),p=Tx.useRef(null),h=yq(Tx.useState(!1),2),m=h[0],g=h[1],v=Tx.useRef({imageBlob:null,takenAt:null,blurScore:null}),y=Tx.useRef({imageBlob:null,blurScore:null,error:null}),b=Tx.useRef(!1);Tx.useEffect((function(){function e(){return(e=dq(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=9;break}if(n=t){e.next=6;break}return e.next=5,NIe();case 5:n=e.sent;case 6:f.current=n.idCardModel,p.current=n.blazefaceModel,g(!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,m]);var x=Tx.useCallback((function(){!0===l.current&&(l.current=!1)}),[]),k=Tx.useCallback(function(){var e=dq(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.blurScore,r=o.blurThreshold,a=v.current,!(n>r&&kw.hasBetterBlurScore(n,a.blurScore))){e.next=9;break}return e.next=6,Iw.takePicture({canvas:c.current});case 6:a.imageBlob=e.sent,a.takenAt=(new Date).getTime(),a.blurScore=n;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o]),w=Tx.useCallback(function(){var e=dq(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.blurScore,r=y.current,!kw.hasBetterBlurScore(n,r.blurScore)){e.next=7;break}return e.next=5,Iw.takePicture({canvas:c.current});case 5:r.imageBlob=e.sent,r.blurScore=n;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),I=Tx.useCallback(dq(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.waitForBestImageTimeMs,null===(n=v.current).imageBlob){e.next=8;break}if(!((new Date).getTime()-n.takenAt>t)){e.next=8;break}return e.next=7,u(n);case 7:x();case 8:case"end":return e.stop()}}),e)}))),[u,o,x]),C=Tx.useCallback(dq(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var t=o.enableBlurCheck,n=o.blurThreshold,r=y.current;t?(b.current=!0,setTimeout((function(){b.current=!1,kw.hasBetterBlurScore(r.blurScore,n)||(r.error=RIe.id_detector_error_blur),e(r)}),3e3)):Iw.takePicture({canvas:c.current}).then((function(t){r.imageBlob=t,e(r)}))})));case 1:case"end":return e.stop()}}),e)}))),[o]),E=Tx.useCallback(dq(regeneratorRuntime.mark((function e(){var t,r,a,u,h,g,x,C,E,S,T,A,N,_,R,O,F,M,D;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&m){e.next=2;break}return e.abrupt("return");case 2:v.current={imageBlob:null,takenAt:null,blurScore:null},y.current={imageBlob:null,blurScore:null,error:null},t=o.enableAutoCapture,r=o.enableBlurCheck,a=f.current,u=p.current,h=d.current,g=n.current,l.current=!0,x=c.current,C=x.getContext("2d"),E=h.cropX,S=h.cropY,T=h.cropWidth,A=h.cropHeight,N=document.createElement("canvas"),_=N.getContext("2d");case 15:return C.drawImage(g,E,S,T,A,0,0,T,A),R=null,e.next=20,a.predict(x,{detectThreshold:.3});case 20:if(O=e.sent,console.log("result",O),!O.card){e.next=69;break}if(!hIe({corners:O.card.corners,width:T,height:A})){e.next=66;break}if(!vIe(O.card.corners)){e.next=63;break}if(F=fIe(x,O.card.corners),!((M=_w.rectAreaRatio({small:{area:F.width*F.height},big:{area:T*A}}))<.5)){e.next=33;break}R=RIe.id_detector_card_too_small,e.next=61;break;case 33:if(!(M>.8)){e.next=37;break}R=RIe.id_detector_error_incomplete,e.next=61;break;case 37:return N.width=F.width,N.height=F.height,_.putImageData(F,0,0),e.next=42,mIe({canvas:N});case 42:if(!e.sent){e.next=47;break}R=RIe.glare_detected,e.next=61;break;case 47:return e.next=49,yIe({blazefaceModel:u,predictedIdCardCanvas:N,frontSide:s});case 49:if(R=e.sent){e.next=61;break}if(!r){e.next=61;break}return e.next=54,kw.calculateBlurScore(N);case 54:if(D=e.sent,!t){e.next=58;break}return e.next=58,k({blurScore:D});case 58:if(!b.current){e.next=61;break}return e.next=61,w({blurScore:D});case 61:e.next=64;break;case 63:R=RIe.id_detector_validate_angle_error;case 64:e.next=67;break;case 66:R=RIe.id_detector_error_incomplete;case 67:e.next=70;break;case 69:R=RIe.id_detector_no_cards;case 70:return i(R),e.next=73,I();case 73:if(l.current){e.next=75;break}return e.abrupt("break",79);case 75:return e.next=77,Lk.sleep(15);case 77:e.next=15;break;case 79:case"end":return e.stop()}}),e)}))),[n,o,m,s,i,k,w,I]);return Tx.useEffect((function(){var e=n.current;function t(){return(t=dq(regeneratorRuntime.mark((function t(){var n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Iw.analyzeVideoAndWindowSizes(e,a,.05),r=n.cropWidth,o=n.cropHeight,d.current=n,(i=document.createElement("canvas")).width=r,i.height=o,c.current=i,t.next=9,E();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r&&a&&m&&function(){t.apply(this,arguments)}(),function(){x()}}),[r,a,n,x,E,m]),{refWorkingCanvas:c,stopCheckFrame:x,checkFrame:E,warmupDone:m,takePictureManually:C}}({resultWarmup:h,refVideo:B,videoPlayed:H,cropArea:q,apiSettings:ue,onError:ce,frontSide:b,onAutoCaptureSuccess:le}),fe=de.refWorkingCanvas,pe=de.stopCheckFrame,he=de.checkFrame,me=de.warmupDone,ge=de.takePictureManually,ve=function(e){var t=e.refVideo,n=e.videoPlayed,r=e.cropArea,a=e.apiSettings,o=Tx.useRef(null),i=Tx.useRef(!1),s=Tx.useRef([{id:null,frames:[]}]),u=Tx.useRef(YI.createResizer({width:960,height:640})),c=Tx.useRef(null),l=Tx.useCallback((function(){!0===i.current&&(i.current=!1)}),[]),d=Tx.useCallback((function(){s.current=[{id:null,frames:[]}]}),[]),f=Tx.useCallback((function(){var e=s.current;e[e.length-1].frames.length>0&&e.push({id:null,frames:[]})}),[]),p=Tx.useCallback(function(){var e=dq(regeneratorRuntime.mark((function e(t){var n,r,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.workingCanvas,r=u.current,o=s.current,i=r.resize({srcCanvas:n}),c=i.toDataURL("image/jpeg",a.saveFrameQuality/100).split(",")[1],o[o.length-1].frames.push({base64:c});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]),h=Tx.useCallback(dq(regeneratorRuntime.mark((function e(){var n,r,s,u,l,d,f,h,m,g,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:if(n=a.frameCaptureIntervalMs,a.enableRecording){e.next=5;break}return e.abrupt("return");case 5:r=c.current,s=t.current,i.current=!0,u=o.current,l=u.getContext("2d"),d=r.cropX,f=r.cropY,h=r.cropWidth,m=r.cropHeight,g=null;case 12:if(l.drawImage(s,d,f,h,m,0,0,h,m),!n){e.next=23;break}if(!((v=(new Date).getTime())-g>=n)){e.next=21;break}return e.next=20,p({workingCanvas:u});case 20:g=v;case 21:e.next=25;break;case 23:return e.next=25,p({workingCanvas:u});case 25:if(i.current){e.next=27;break}return e.abrupt("break",31);case 27:return e.next=29,Lk.sleep(15);case 29:e.next=12;break;case 31:case"end":return e.stop()}}),e)}))),[t,p,a]);return Tx.useEffect((function(){var e=t.current;function a(){return(a=dq(regeneratorRuntime.mark((function t(){var n,a,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Iw.analyzeVideoAndWindowSizes(e,r),a=n.cropWidth,i=n.cropHeight,c.current=n,(s=document.createElement("canvas")).width=a,s.height=i,o.current=s,t.next=9,h();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return n&&r&&function(){a.apply(this,arguments)}(),function(){l()}}),[n,r,t,l,f,h]),{refWorkingCanvas:o,stopCheckFrame:l,refRecordedVideos:s,splitVideos:f,resetRecordedVideos:d,checkFrame:h}}({refVideo:B,videoPlayed:H,cropArea:q,apiSettings:ue}),ye=ve.stopCheckFrame,be=ve.refRecordedVideos,xe=ve.splitVideos,ke=ve.resetRecordedVideos,we=ve.checkFrame;!function(e){var t=e.debug,n=e.refRecordedVideos,r=e.refWorkingCanvas,a=e.refVideo,o=e.onChange;Tx.useEffect((function(){var e;return t&&(e=setInterval((function(){var e=a.current,t=n.current,i=r.current,s=t[t.length-1],u={videoWidth:e.videoWidth,videoHeight:e.videoHeight,framesCount:s.frames.length,"window.innerWidth":window.innerWidth,"window.innerHeight":window.innerHeight,"canvas.width":null==i?void 0:i.width,"canvas.height":null==i?void 0:i.height};o(JSON.stringify(u,null,2))}),1e3)),function(){return clearInterval(e)}}),[o,t,n,r,a])}({debug:M,refRecordedVideos:be,refWorkingCanvas:fe,refVideo:B,onChange:R});var Ie=Pk.useAsset("ic_loading.png"),Ce=Tx.useCallback((function(){ye(),pe(),ke(),U(""),J({popupType:fEe})}),[ke,ye,pe,J]),Ee=Tx.useCallback((function(){xe()}),[xe]),Se=Tx.useCallback((function(e){var t=e.curTimeLeft;U(Ale(hEe.REMAINING_TIME[D])({x:t}))}),[D]),Te=function(e){var t=e.videoPlayed,n=e.lang,r=e.onAboutToTimeout,a=e.onSessionTimeout,o=e.onVideoTimeLimitReached,i=e.apiSettings,s=e.warmupDone,u=Tx.useRef(),c=yq(Tx.useState(0),2),l=c[0],d=c[1],f=Tx.useCallback((function(){clearInterval(u.current)}),[]),p=Tx.useCallback((function(){d((function(e){return e+1}))}),[]);return Tx.useEffect((function(){if(s&&t&&null!=i&&i.enableTimers){var e=i.sessionTime,n=i.maxRecordingTimePerVideo,c=0,l=e/3;u.current=setInterval((function(){var t=e-(c+=1);t<=l&&r({curTimeLeft:t}),c>0&&c%n==0&&o(),0===t&&(f(),a())}),1e3)}return function(){f()}}),[t,n,r,f,a,o,l,i,s]),{stopTimers:f,startTimers:p}}({videoPlayed:H,lang:D,onAboutToTimeout:Se,apiClient:F,apiCheck:c,onSessionTimeout:Ce,onVideoTimeLimitReached:Ee,apiSettings:ue,warmupDone:me}),Ae=Te.stopTimers,Ne=Te.startTimers,_e=Tx.useCallback(dq(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J({popupType:null}),ie(null),se.current=!1,Ne(),e.next=6,Promise.all([we(),he()]);case 6:case"end":return e.stop()}}),e)}))),[we,he,Ne,J]),Re=Tx.useCallback((function(e){var t,n,r,a,i,s,u=e.videoAreaWidth,c=e.videoAreaHeight,l=e.lostX,d=e.lostY,f=e.clientHeight;o?(a=.7*(i=c-165),n=(s=(t=d+10)+45)+i+10,r=s+20):(a=Sq.isMobile?u-6:Math.floor(.7*u),n=(s=(t=d+10)+50)+(i=Math.floor(Math.min(a/1.5,f-2*d-80-100)))+10,r=s+20);var p=Math.floor((u-a)/2)+l;X({x:p,y:s,width:a,height:i,surroundStyle:{opacity:.6,background:"#000"}}),C({yTitle:t,yDescription:n,yMessage:r}),G(!0)}),[o]),Oe=Tx.useCallback(dq(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($(!0),J({popupType:null}),t=ne.current,n={image:t,recordedVideos:null!=ue&&ue.enableRecording?be.current:[]},!c){e.next=19;break}return r=null,e.prev=6,p(),e.next=10,iIe({image:t,cardSide:u,frontCardId:d,onError:i,apiClient:F,cardType:s,recordedVideos:be.current});case 10:r=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),i(gq(gq({},vEe.api_call_error),{},{details:e.t0}));case 16:r&&l(gq(gq({},n),{},{apiResult:r})),e.next=20;break;case 19:l(n);case 20:$(!1);case 21:case"end":return e.stop()}}),e,null,[[6,13]])}))),[c,F,ue,s,u,d,i,l,p,be,J]),Fe=Tx.useCallback(dq(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},n=t.imageBlobTaken,!se.current){e.next=3;break}return e.abrupt("return");case 3:se.current=!0,$(!0),ye(),pe(),Ae(),U(""),z(""),y((function(e){return e+1})),ne.current=n,m?J({popupType:pEe}):Oe(),$(!1);case 14:case"end":return e.stop()}}),e)}))),[ye,pe,Ae,J,m,Oe]);re.current=Fe;var Me=Tx.useCallback(dq(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),e.next=3,ge();case 3:return t=e.sent,n=t.imageBlob,r=t.error,ie(r),e.next=9,Fe({imageBlobTaken:n});case 9:$(!1);case 10:case"end":return e.stop()}}),e)}))),[ge,Fe]);return Tx.createElement(OCe,null,Tx.createElement(oX,{frontCamera:t,onVideoPlayed:Re,onClose:a,flipHorizontal:t,ref:B,onError:i},!me&&Tx.createElement(jIe,{open:!0},Tx.createElement(jCe,{className:"warmup-message"},KCe.WARMUP_INTRO[D])),H?Tx.createElement(Tx.Fragment,null,M&&Tx.createElement(UCe,null,_),Tx.createElement(RCe,{keyForTransition:v}),q?Tx.createElement(hX,{x:"".concat(q.x,"px"),y:"".concat(q.y,"px"),width:"".concat(q.width,"px"),height:"".concat(q.height,"px"),surroundStyle:q.surroundStyle},Tx.createElement(HCe,{width:q.width,height:q.height,type:W?GIe:HIe})):null,Tx.createElement(BCe,{y:"".concat(E,"px")},Tx.createElement(Qwe,null,Tx.createElement(jwe,{key:n,timeout:{enter:500,exit:500},classNames:"flipY",unmountOnExit:!0},Tx.createElement(PCe,null,Tx.createElement(FCe,{src:k,alt:""}),Tx.createElement(LCe,{className:"title"},n))))),!W&&Tx.createElement(VCe,{y:"".concat(S,"px"),className:"description"},r),W&&Tx.createElement(WCe,{y:"".concat(S,"px")},W),Y?Tx.createElement(MCe,{onClick:null},Tx.createElement("img",{src:Ie,alt:"",className:"spin"})):W?null:Tx.createElement(MCe,{onClick:Me},Tx.createElement("img",{src:A,alt:""})),L&&Tx.createElement(zCe,{key:L,className:"message",y:"".concat(T,"px")},L)):null),Tx.createElement(jIe,{open:ee},te===fEe&&Tx.createElement(eEe,{onOk:_e,maxSessionTime:null==ue?void 0:ue.sessionTime}),te===pEe&&Tx.createElement(dEe,{imageBlobTaken:ne.current,error:oe,onConfirm:Oe,onTryAgain:_e})))}yEe.propTypes={frontCamera:Tk.bool,usePortraitMask:Tk.bool,cardType:Tk.string,cardSide:Tk.string,title:Tk.string,titleIcon:Tk.string,description:Tk.string,onClose:Tk.func,apiCheck:Tk.bool,onSuccess:Tk.func,onError:Tk.func,frontCardId:Tk.string,enableRecording:Tk.bool,onApiCheck:Tk.func,resultWarmup:Tk.shape({}),enableConfirmPopup:Tk.bool},yEe.defaultProps={frontCamera:!0,usePortraitMask:!1,cardType:gEe.VN,cardSide:mEe.FRONT,title:"",titleIcon:null,description:"",onClose:function(){},apiCheck:!1,onSuccess:function(){},onError:function(){},frontCardId:null,enableRecording:!1,onApiCheck:function(){},resultWarmup:null,enableConfirmPopup:!0};var bEe=Object.freeze({__proto__:null,Camera:mX}),xEe="landscape",kEe="portrait",wEe="desktop";function IEe(){var e=vq(["\n  text-align: center;\n  font-size: 20px;\n  font-weight: 600;\n"]);return IEe=function(){return e},e}var CEe=_k.Errors,EEe=oq.div(IEe());function SEe(e){var t=hq({},e),n=Mk.useSDKSettings().lang,r=CEe.wrong_orientation.msg[n],a=function(){var e=Tx.useRef(window.innerWidth>window.innerHeight?xEe:kEe),t=yq(Tx.useState(e.current),2),n=t[0],r=t[1];return Tx.useEffect((function(){function e(){window.innerWidth>window.innerHeight?r(xEe):r(kEe)}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Sq.isMobile?{curOrientation:n,initOrientation:e.current}:{curOrientation:wEe}}().curOrientation;return Tx.createElement(Tx.Fragment,null,a===xEe&&Tx.createElement(jIe,{open:!0},Tx.createElement(EEe,null,r)),(a===kEe||a===wEe)&&Tx.createElement(Afe,t))}var TEe=Sde,AEe=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(Nfe,["useLivenessDetection"]),NEe=i((function(e,t){var n,r,a,o,i;if("undefined"==typeof window||"function"!=typeof MessageChannel){var s=null,u=null,c=function(){if(null!==s)try{var e=t.unstable_now();s(!0,e),s=null}catch(e){throw setTimeout(c,0),e}},l=Date.now();t.unstable_now=function(){return Date.now()-l},n=function(e){null!==s?setTimeout(n,0,e):(s=e,setTimeout(c,0))},r=function(e,t){u=setTimeout(e,t)},a=function(){clearTimeout(u)},o=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,f=window.Date,p=window.setTimeout,h=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof d&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var g=f.now();t.unstable_now=function(){return f.now()-g}}var v=!1,y=null,b=-1,x=5,k=0;o=function(){return t.unstable_now()>=k},i=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):x=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,I=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+x;try{y(!0,e)?I.postMessage(null):(v=!1,y=null)}catch(e){throw I.postMessage(null),e}}else v=!1},n=function(e){y=e,v||(v=!0,I.postMessage(null))},r=function(e,n){b=p((function(){e(t.unstable_now())}),n)},a=function(){h(b),b=-1}}function C(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<T(a,t)))break e;e[r]=t,e[n]=a,n=r}}function E(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var o=2*(r+1)-1,i=e[o],s=o+1,u=e[s];if(void 0!==i&&0>T(i,n))void 0!==u&&0>T(u,i)?(e[r]=u,e[s]=n,r=s):(e[r]=i,e[o]=n,r=o);else{if(!(void 0!==u&&0>T(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],N=[],_=1,R=null,O=3,F=!1,M=!1,D=!1;function B(e){for(var t=E(N);null!==t;){if(null===t.callback)S(N);else{if(!(t.startTime<=e))break;S(N),t.sortIndex=t.expirationTime,C(A,t)}t=E(N)}}function P(e){if(D=!1,B(e),!M)if(null!==E(A))M=!0,n(L);else{var t=E(N);null!==t&&r(P,t.startTime-e)}}function L(e,n){M=!1,D&&(D=!1,a()),F=!0;var i=O;try{for(B(n),R=E(A);null!==R&&(!(R.expirationTime>n)||e&&!o());){var s=R.callback;if(null!==s){R.callback=null,O=R.priorityLevel;var u=s(R.expirationTime<=n);n=t.unstable_now(),"function"==typeof u?R.callback=u:R===E(A)&&S(A),B(n)}else S(A);R=E(A)}if(null!==R)var c=!0;else{var l=E(N);null!==l&&r(P,l.startTime-n),c=!1}return c}finally{R=null,O=i,F=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){M||F||(M=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return E(A)},t.unstable_next=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},t.unstable_scheduleCallback=function(e,o,i){var s=t.unstable_now();if("object"==typeof i&&null!==i){var u=i.delay;u="number"==typeof u&&0<u?s+u:s,i="number"==typeof i.timeout?i.timeout:U(e)}else i=U(e),u=s;return e={id:_++,callback:o,priorityLevel:e,startTime:u,expirationTime:i=u+i,sortIndex:-1},u>s?(e.sortIndex=u,C(N,e),null===E(A)&&e===E(N)&&(D?a():D=!0,r(P,u-s))):(e.sortIndex=i,C(A,e),M||F||(M=!0,n(L))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();B(e);var n=E(A);return n!==R&&null!==R&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<R.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}}})),_Ee=(i((function(e,t){})),i((function(e){e.exports=NEe})));function REe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Tx)throw Error(REe(227));function OEe(e,t,n,r,a,o,i,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var FEe=!1,MEe=null,DEe=!1,BEe=null,PEe={onError:function(e){FEe=!0,MEe=e}};function LEe(e,t,n,r,a,o,i,s,u){FEe=!1,MEe=null,OEe.apply(PEe,arguments)}function UEe(e,t,n,r,a,o,i,s,u){if(LEe.apply(this,arguments),FEe){if(!FEe)throw Error(REe(198));var c=MEe;FEe=!1,MEe=null,DEe||(DEe=!0,BEe=c)}}var VEe=null,WEe=null,zEe=null;function jEe(e,t,n){var r=e.type||"unknown-event";e.currentTarget=zEe(n),UEe(r,t,void 0,e),e.currentTarget=null}var HEe=null,GEe={};function KEe(){if(HEe)for(var e in GEe){var t=GEe[e],n=HEe.indexOf(e);if(!(-1<n))throw Error(REe(96,e));if(!XEe[n]){if(!t.extractEvents)throw Error(REe(97,e));for(var r in XEe[n]=t,n=t.eventTypes){var a=void 0,o=n[r],i=t,s=r;if(QEe.hasOwnProperty(s))throw Error(REe(99,s));QEe[s]=o;var u=o.phasedRegistrationNames;if(u){for(a in u)u.hasOwnProperty(a)&&qEe(u[a],i,s);a=!0}else o.registrationName?(qEe(o.registrationName,i,s),a=!0):a=!1;if(!a)throw Error(REe(98,r,e))}}}}function qEe(e,t,n){if(YEe[e])throw Error(REe(100,e));YEe[e]=t,$Ee[e]=t.eventTypes[n].dependencies}var XEe=[],QEe={},YEe={},$Ee={};function ZEe(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!GEe.hasOwnProperty(t)||GEe[t]!==r){if(GEe[t])throw Error(REe(102,t));GEe[t]=r,n=!0}}n&&KEe()}var JEe=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),eSe=null,tSe=null,nSe=null;function rSe(e){if(e=WEe(e)){if("function"!=typeof eSe)throw Error(REe(280));var t=e.stateNode;t&&(t=VEe(t),eSe(e.stateNode,e.type,t))}}function aSe(e){tSe?nSe?nSe.push(e):nSe=[e]:tSe=e}function oSe(){if(tSe){var e=tSe,t=nSe;if(nSe=tSe=null,rSe(e),t)for(e=0;e<t.length;e++)rSe(t[e])}}function iSe(e,t){return e(t)}function sSe(e,t,n,r,a){return e(t,n,r,a)}function uSe(){}var cSe=iSe,lSe=!1,dSe=!1;function fSe(){null===tSe&&null===nSe||(uSe(),oSe())}function pSe(e,t,n){if(dSe)return e(t,n);dSe=!0;try{return cSe(e,t,n)}finally{dSe=!1,fSe()}}var hSe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mSe=Object.prototype.hasOwnProperty,gSe={},vSe={};function ySe(e){return!!mSe.call(vSe,e)||!mSe.call(gSe,e)&&(hSe.test(e)?vSe[e]=!0:(gSe[e]=!0,!1))}function bSe(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function xSe(e,t,n,r){if(null==t||bSe(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kSe(e,t,n,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var wSe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){wSe[e]=new kSe(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];wSe[t]=new kSe(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){wSe[e]=new kSe(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){wSe[e]=new kSe(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){wSe[e]=new kSe(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){wSe[e]=new kSe(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){wSe[e]=new kSe(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){wSe[e]=new kSe(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){wSe[e]=new kSe(e,5,!1,e.toLowerCase(),null,!1)}));var ISe=/[\-:]([a-z])/g;function CSe(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(ISe,CSe);wSe[t]=new kSe(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(ISe,CSe);wSe[t]=new kSe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ISe,CSe);wSe[t]=new kSe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){wSe[e]=new kSe(e,1,!1,e.toLowerCase(),null,!1)})),wSe.xlinkHref=new kSe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){wSe[e]=new kSe(e,1,!1,e.toLowerCase(),null,!0)}));var ESe=Tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function SSe(e,t,n,r){var a=wSe.hasOwnProperty(t)?wSe[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(xSe(t,n,a,r)&&(n=null),r||null===a?ySe(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}ESe.hasOwnProperty("ReactCurrentDispatcher")||(ESe.ReactCurrentDispatcher={current:null}),ESe.hasOwnProperty("ReactCurrentBatchConfig")||(ESe.ReactCurrentBatchConfig={suspense:null});var TSe=/^(.*)[\\\/]/,ASe="function"==typeof Symbol&&Symbol.for,NSe=ASe?Symbol.for("react.element"):60103,_Se=ASe?Symbol.for("react.portal"):60106,RSe=ASe?Symbol.for("react.fragment"):60107,OSe=ASe?Symbol.for("react.strict_mode"):60108,FSe=ASe?Symbol.for("react.profiler"):60114,MSe=ASe?Symbol.for("react.provider"):60109,DSe=ASe?Symbol.for("react.context"):60110,BSe=ASe?Symbol.for("react.concurrent_mode"):60111,PSe=ASe?Symbol.for("react.forward_ref"):60112,LSe=ASe?Symbol.for("react.suspense"):60113,USe=ASe?Symbol.for("react.suspense_list"):60120,VSe=ASe?Symbol.for("react.memo"):60115,WSe=ASe?Symbol.for("react.lazy"):60116,zSe=ASe?Symbol.for("react.block"):60121,jSe="function"==typeof Symbol&&Symbol.iterator;function HSe(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=jSe&&e[jSe]||e["@@iterator"])?e:null}function GSe(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}function KSe(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case RSe:return"Fragment";case _Se:return"Portal";case FSe:return"Profiler";case OSe:return"StrictMode";case LSe:return"Suspense";case USe:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case DSe:return"Context.Consumer";case MSe:return"Context.Provider";case PSe:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case VSe:return KSe(e.type);case zSe:return KSe(e.render);case WSe:if(e=1===e._status?e._result:null)return KSe(e)}return null}function qSe(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,a=e._debugSource,o=KSe(e.type);n=null,r&&(n=KSe(r.type)),r=o,o="",a?o=" (at "+a.fileName.replace(TSe,"")+":"+a.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function XSe(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function QSe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function YSe(e){var t=QSe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $Se(e){e._valueTracker||(e._valueTracker=YSe(e))}function ZSe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=QSe(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function JSe(e,t){var n=t.checked;return cb({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function eTe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=XSe(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function tTe(e,t){null!=(t=t.checked)&&SSe(e,"checked",t,!1)}function nTe(e,t){tTe(e,t);var n=XSe(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?aTe(e,t.type,n):t.hasOwnProperty("defaultValue")&&aTe(e,t.type,XSe(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function rTe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function aTe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oTe(e){var t="";return Tx.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}function iTe(e,t){return e=cb({children:void 0},t),(t=oTe(t.children))&&(e.children=t),e}function sTe(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+XSe(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function uTe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(REe(91));return cb({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cTe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(REe(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(REe(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:XSe(n)}}function lTe(e,t){var n=XSe(t.value),r=XSe(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function dTe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fTe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function pTe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hTe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pTe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var mTe,gTe=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==fTe.svg||"innerHTML"in e)e.innerHTML=t;else{for((mTe=mTe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=mTe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function vTe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function yTe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bTe={animationend:yTe("Animation","AnimationEnd"),animationiteration:yTe("Animation","AnimationIteration"),animationstart:yTe("Animation","AnimationStart"),transitionend:yTe("Transition","TransitionEnd")},xTe={},kTe={};function wTe(e){if(xTe[e])return xTe[e];if(!bTe[e])return e;var t,n=bTe[e];for(t in n)if(n.hasOwnProperty(t)&&t in kTe)return xTe[e]=n[t];return e}JEe&&(kTe=document.createElement("div").style,"AnimationEvent"in window||(delete bTe.animationend.animation,delete bTe.animationiteration.animation,delete bTe.animationstart.animation),"TransitionEvent"in window||delete bTe.transitionend.transition);var ITe=wTe("animationend"),CTe=wTe("animationiteration"),ETe=wTe("animationstart"),STe=wTe("transitionend"),TTe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ATe=new("function"==typeof WeakMap?WeakMap:Map);function NTe(e){var t=ATe.get(e);return void 0===t&&(t=new Map,ATe.set(e,t)),t}function _Te(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function RTe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function OTe(e){if(_Te(e)!==e)throw Error(REe(188))}function FTe(e){var t=e.alternate;if(!t){if(null===(t=_Te(e)))throw Error(REe(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return OTe(a),e;if(o===r)return OTe(a),t;o=o.sibling}throw Error(REe(188))}if(n.return!==r.return)n=a,r=o;else{for(var i=!1,s=a.child;s;){if(s===n){i=!0,n=a,r=o;break}if(s===r){i=!0,r=a,n=o;break}s=s.sibling}if(!i){for(s=o.child;s;){if(s===n){i=!0,n=o,r=a;break}if(s===r){i=!0,r=o,n=a;break}s=s.sibling}if(!i)throw Error(REe(189))}}if(n.alternate!==r)throw Error(REe(190))}if(3!==n.tag)throw Error(REe(188));return n.stateNode.current===n?e:t}function MTe(e){if(!(e=FTe(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function DTe(e,t){if(null==t)throw Error(REe(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function BTe(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var PTe=null;function LTe(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)jEe(e,t[r],n[r]);else t&&jEe(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function UTe(e){if(null!==e&&(PTe=DTe(PTe,e)),e=PTe,PTe=null,e){if(BTe(e,LTe),PTe)throw Error(REe(95));if(DEe)throw e=BEe,DEe=!1,BEe=null,e}}function VTe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function WTe(e){if(!JEe)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var zTe=[];function jTe(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>zTe.length&&zTe.push(e)}function HTe(e,t,n,r){if(zTe.length){var a=zTe.pop();return a.topLevelType=e,a.eventSystemFlags=r,a.nativeEvent=t,a.targetInst=n,a}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function GTe(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=dNe(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var a=VTe(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,i=e.eventSystemFlags;0===n&&(i|=64);for(var s=null,u=0;u<XEe.length;u++){var c=XEe[u];c&&(c=c.extractEvents(r,t,o,a,i))&&(s=DTe(s,c))}UTe(s)}}function KTe(e,t,n){if(!n.has(e)){switch(e){case"scroll":AAe(t,"scroll",!0);break;case"focus":case"blur":AAe(t,"focus",!0),AAe(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":WTe(e)&&AAe(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===TTe.indexOf(e)&&TAe(e,t)}n.set(e,null)}}var qTe,XTe,QTe,YTe=!1,$Te=[],ZTe=null,JTe=null,eAe=null,tAe=new Map,nAe=new Map,rAe=[],aAe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),oAe="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function iAe(e,t){var n=NTe(t);aAe.forEach((function(e){KTe(e,t,n)})),oAe.forEach((function(e){KTe(e,t,n)}))}function sAe(e,t,n,r,a){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:a,container:r}}function uAe(e,t){switch(e){case"focus":case"blur":ZTe=null;break;case"dragenter":case"dragleave":JTe=null;break;case"mouseover":case"mouseout":eAe=null;break;case"pointerover":case"pointerout":tAe.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nAe.delete(t.pointerId)}}function cAe(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e=sAe(t,n,r,a,o),null!==t&&(null!==(t=fNe(t))&&XTe(t)),e):(e.eventSystemFlags|=r,e)}function lAe(e,t,n,r,a){switch(t){case"focus":return ZTe=cAe(ZTe,e,t,n,r,a),!0;case"dragenter":return JTe=cAe(JTe,e,t,n,r,a),!0;case"mouseover":return eAe=cAe(eAe,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return tAe.set(o,cAe(tAe.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,nAe.set(o,cAe(nAe.get(o)||null,e,t,n,r,a)),!0}return!1}function dAe(e){var t=dNe(e.target);if(null!==t){var n=_Te(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=RTe(n)))return e.blockedOn=t,void _Ee.unstable_runWithPriority(e.priority,(function(){QTe(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function fAe(e){if(null!==e.blockedOn)return!1;var t=OAe(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=fNe(t);return null!==n&&XTe(n),e.blockedOn=t,!1}return!0}function pAe(e,t,n){fAe(e)&&n.delete(t)}function hAe(){for(YTe=!1;0<$Te.length;){var e=$Te[0];if(null!==e.blockedOn){null!==(e=fNe(e.blockedOn))&&qTe(e);break}var t=OAe(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:$Te.shift()}null!==ZTe&&fAe(ZTe)&&(ZTe=null),null!==JTe&&fAe(JTe)&&(JTe=null),null!==eAe&&fAe(eAe)&&(eAe=null),tAe.forEach(pAe),nAe.forEach(pAe)}function mAe(e,t){e.blockedOn===t&&(e.blockedOn=null,YTe||(YTe=!0,_Ee.unstable_scheduleCallback(_Ee.unstable_NormalPriority,hAe)))}function gAe(e){function t(t){return mAe(t,e)}if(0<$Te.length){mAe($Te[0],e);for(var n=1;n<$Te.length;n++){var r=$Te[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ZTe&&mAe(ZTe,e),null!==JTe&&mAe(JTe,e),null!==eAe&&mAe(eAe,e),tAe.forEach(t),nAe.forEach(t),n=0;n<rAe.length;n++)(r=rAe[n]).blockedOn===e&&(r.blockedOn=null);for(;0<rAe.length&&null===(n=rAe[0]).blockedOn;)dAe(n),null===n.blockedOn&&rAe.shift()}var vAe={},yAe=new Map,bAe=new Map,xAe=["abort","abort",ITe,"animationEnd",CTe,"animationIteration",ETe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",STe,"transitionEnd","waiting","waiting"];function kAe(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1],o="on"+(a[0].toUpperCase()+a.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},bAe.set(r,t),yAe.set(r,o),vAe[a]=o}}kAe("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),kAe("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),kAe(xAe,2);for(var wAe="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),IAe=0;IAe<wAe.length;IAe++)bAe.set(wAe[IAe],0);var CAe=_Ee.unstable_UserBlockingPriority,EAe=_Ee.unstable_runWithPriority,SAe=!0;function TAe(e,t){AAe(t,e,!1)}function AAe(e,t,n){var r=bAe.get(t);switch(void 0===r?2:r){case 0:r=NAe.bind(null,t,1,e);break;case 1:r=_Ae.bind(null,t,1,e);break;default:r=RAe.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function NAe(e,t,n,r){lSe||uSe();var a=RAe,o=lSe;lSe=!0;try{sSe(a,e,t,n,r)}finally{(lSe=o)||fSe()}}function _Ae(e,t,n,r){EAe(CAe,RAe.bind(null,e,t,n,r))}function RAe(e,t,n,r){if(SAe)if(0<$Te.length&&-1<aAe.indexOf(e))e=sAe(null,e,t,n,r),$Te.push(e);else{var a=OAe(e,t,n,r);if(null===a)uAe(e,r);else if(-1<aAe.indexOf(e))e=sAe(a,e,t,n,r),$Te.push(e);else if(!lAe(a,e,t,n,r)){uAe(e,r),e=HTe(e,r,null,t);try{pSe(GTe,e)}finally{jTe(e)}}}}function OAe(e,t,n,r){if(null!==(n=dNe(n=VTe(r)))){var a=_Te(n);if(null===a)n=null;else{var o=a.tag;if(13===o){if(null!==(n=RTe(a)))return n;n=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}e=HTe(e,r,n,t);try{pSe(GTe,e)}finally{jTe(e)}return null}var FAe={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MAe=["Webkit","ms","Moz","O"];function DAe(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||FAe.hasOwnProperty(e)&&FAe[e]?(""+t).trim():t+"px"}function BAe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=DAe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(FAe).forEach((function(e){MAe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),FAe[t]=FAe[e]}))}));var PAe=cb({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function LAe(e,t){if(t){if(PAe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(REe(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(REe(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(REe(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(REe(62,""))}}function UAe(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VAe=fTe.html;function WAe(e,t){var n=NTe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=$Ee[t];for(var r=0;r<t.length;r++)KTe(t[r],e,n)}function zAe(){}function jAe(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function HAe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function GAe(e,t){var n,r=HAe(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=HAe(r)}}function KAe(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?KAe(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function qAe(){for(var e=window,t=jAe();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=jAe((e=t.contentWindow).document)}return t}function XAe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var QAe="$",YAe="/$",$Ae="$?",ZAe="$!",JAe=null,eNe=null;function tNe(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function nNe(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rNe="function"==typeof setTimeout?setTimeout:void 0,aNe="function"==typeof clearTimeout?clearTimeout:void 0;function oNe(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function iNe(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===QAe||n===ZAe||n===$Ae){if(0===t)return e;t--}else n===YAe&&t++}e=e.previousSibling}return null}var sNe=Math.random().toString(36).slice(2),uNe="__reactInternalInstance$"+sNe,cNe="__reactEventHandlers$"+sNe,lNe="__reactContainere$"+sNe;function dNe(e){var t=e[uNe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[lNe]||n[uNe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=iNe(e);null!==e;){if(n=e[uNe])return n;e=iNe(e)}return t}n=(e=n).parentNode}return null}function fNe(e){return!(e=e[uNe]||e[lNe])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function pNe(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(REe(33))}function hNe(e){return e[cNe]||null}function mNe(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function gNe(e,t){var n=e.stateNode;if(!n)return null;var r=VEe(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(REe(231,t,typeof n));return n}function vNe(e,t,n){(t=gNe(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=DTe(n._dispatchListeners,t),n._dispatchInstances=DTe(n._dispatchInstances,e))}function yNe(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=mNe(t);for(t=n.length;0<t--;)vNe(n[t],"captured",e);for(t=0;t<n.length;t++)vNe(n[t],"bubbled",e)}}function bNe(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=gNe(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=DTe(n._dispatchListeners,t),n._dispatchInstances=DTe(n._dispatchInstances,e))}function xNe(e){e&&e.dispatchConfig.registrationName&&bNe(e._targetInst,null,e)}function kNe(e){BTe(e,yNe)}var wNe=null,INe=null,CNe=null;function ENe(){if(CNe)return CNe;var e,t,n=INe,r=n.length,a="value"in wNe?wNe.value:wNe.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return CNe=a.slice(e,1<t?1-t:void 0)}function SNe(){return!0}function TNe(){return!1}function ANe(e,t,n,r){for(var a in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(a)&&((t=e[a])?this[a]=t(n):"target"===a?this.target=r:this[a]=n[a]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?SNe:TNe,this.isPropagationStopped=TNe,this}function NNe(e,t,n,r){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,e,t,n,r),a}return new this(e,t,n,r)}function _Ne(e){if(!(e instanceof this))throw Error(REe(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function RNe(e){e.eventPool=[],e.getPooled=NNe,e.release=_Ne}cb(ANe.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=SNe)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=SNe)},persist:function(){this.isPersistent=SNe},isPersistent:TNe,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=TNe,this._dispatchInstances=this._dispatchListeners=null}}),ANe.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ANe.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return cb(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=cb({},r.Interface,e),n.extend=r.extend,RNe(n),n},RNe(ANe);var ONe=ANe.extend({data:null}),FNe=ANe.extend({data:null}),MNe=[9,13,27,32],DNe=JEe&&"CompositionEvent"in window,BNe=null;JEe&&"documentMode"in document&&(BNe=document.documentMode);var PNe=JEe&&"TextEvent"in window&&!BNe,LNe=JEe&&(!DNe||BNe&&8<BNe&&11>=BNe),UNe=String.fromCharCode(32),VNe={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},WNe=!1;function zNe(e,t){switch(e){case"keyup":return-1!==MNe.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function jNe(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var HNe=!1;function GNe(e,t){switch(e){case"compositionend":return jNe(t);case"keypress":return 32!==t.which?null:(WNe=!0,UNe);case"textInput":return(e=t.data)===UNe&&WNe?null:e;default:return null}}function KNe(e,t){if(HNe)return"compositionend"===e||!DNe&&zNe(e,t)?(e=ENe(),CNe=INe=wNe=null,HNe=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return LNe&&"ko"!==t.locale?null:t.data;default:return null}}var qNe={eventTypes:VNe,extractEvents:function(e,t,n,r){var a;if(DNe)e:{switch(e){case"compositionstart":var o=VNe.compositionStart;break e;case"compositionend":o=VNe.compositionEnd;break e;case"compositionupdate":o=VNe.compositionUpdate;break e}o=void 0}else HNe?zNe(e,n)&&(o=VNe.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=VNe.compositionStart);return o?(LNe&&"ko"!==n.locale&&(HNe||o!==VNe.compositionStart?o===VNe.compositionEnd&&HNe&&(a=ENe()):(INe="value"in(wNe=r)?wNe.value:wNe.textContent,HNe=!0)),o=ONe.getPooled(o,t,n,r),a?o.data=a:null!==(a=jNe(n))&&(o.data=a),kNe(o),a=o):a=null,(e=PNe?GNe(e,n):KNe(e,n))?((t=FNe.getPooled(VNe.beforeInput,t,n,r)).data=e,kNe(t)):t=null,null===a?t:null===t?a:[a,t]}},XNe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function QNe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!XNe[e.type]:"textarea"===t}var YNe={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function $Ne(e,t,n){return(e=ANe.getPooled(YNe.change,e,t,n)).type="change",aSe(n),kNe(e),e}var ZNe=null,JNe=null;function e_e(e){UTe(e)}function t_e(e){if(ZSe(pNe(e)))return e}function n_e(e,t){if("change"===e)return t}var r_e=!1;function a_e(){ZNe&&(ZNe.detachEvent("onpropertychange",o_e),JNe=ZNe=null)}function o_e(e){if("value"===e.propertyName&&t_e(JNe))if(e=$Ne(JNe,e,VTe(e)),lSe)UTe(e);else{lSe=!0;try{iSe(e_e,e)}finally{lSe=!1,fSe()}}}function i_e(e,t,n){"focus"===e?(a_e(),JNe=n,(ZNe=t).attachEvent("onpropertychange",o_e)):"blur"===e&&a_e()}function s_e(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return t_e(JNe)}function u_e(e,t){if("click"===e)return t_e(t)}function c_e(e,t){if("input"===e||"change"===e)return t_e(t)}JEe&&(r_e=WTe("input")&&(!document.documentMode||9<document.documentMode));var l_e={eventTypes:YNe,_isInputEventSupported:r_e,extractEvents:function(e,t,n,r){var a=t?pNe(t):window,o=a.nodeName&&a.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===a.type)var i=n_e;else if(QNe(a))if(r_e)i=c_e;else{i=s_e;var s=i_e}else(o=a.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(i=u_e);if(i&&(i=i(e,t)))return $Ne(i,n,r);s&&s(e,a,t),"blur"===e&&(e=a._wrapperState)&&e.controlled&&"number"===a.type&&aTe(a,"number",a.value)}},d_e=ANe.extend({view:null,detail:null}),f_e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p_e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=f_e[e])&&!!t[e]}function h_e(){return p_e}var m_e=0,g_e=0,v_e=!1,y_e=!1,b_e=d_e.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:h_e,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=m_e;return m_e=e.screenX,v_e?"mousemove"===e.type?e.screenX-t:0:(v_e=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=g_e;return g_e=e.screenY,y_e?"mousemove"===e.type?e.screenY-t:0:(y_e=!0,0)}}),x_e=b_e.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),k_e={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},w_e={eventTypes:k_e,extractEvents:function(e,t,n,r,a){var o="mouseover"===e||"pointerover"===e,i="mouseout"===e||"pointerout"===e;if(o&&0==(32&a)&&(n.relatedTarget||n.fromElement)||!i&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,i)?(i=t,null!==(t=(t=n.relatedTarget||n.toElement)?dNe(t):null)&&(t!==_Te(t)||5!==t.tag&&6!==t.tag)&&(t=null)):i=null;if(i===t)return null;if("mouseout"===e||"mouseover"===e)var s=b_e,u=k_e.mouseLeave,c=k_e.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=x_e,u=k_e.pointerLeave,c=k_e.pointerEnter,l="pointer");if(e=null==i?o:pNe(i),o=null==t?o:pNe(t),(u=s.getPooled(u,i,n,r)).type=l+"leave",u.target=e,u.relatedTarget=o,(n=s.getPooled(c,t,n,r)).type=l+"enter",n.target=o,n.relatedTarget=e,l=t,(r=i)&&l)e:{for(c=l,i=0,e=s=r;e;e=mNe(e))i++;for(e=0,t=c;t;t=mNe(t))e++;for(;0<i-e;)s=mNe(s),i--;for(;0<e-i;)c=mNe(c),e--;for(;i--;){if(s===c||s===c.alternate)break e;s=mNe(s),c=mNe(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(i=r.alternate)||i!==c);)s.push(r),r=mNe(r);for(r=[];l&&l!==c&&(null===(i=l.alternate)||i!==c);)r.push(l),l=mNe(l);for(l=0;l<s.length;l++)bNe(s[l],"bubbled",u);for(l=r.length;0<l--;)bNe(r[l],"captured",n);return 0==(64&a)?[u]:[u,n]}};function I_e(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var C_e="function"==typeof Object.is?Object.is:I_e,E_e=Object.prototype.hasOwnProperty;function S_e(e,t){if(C_e(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!E_e.call(t,n[r])||!C_e(e[n[r]],t[n[r]]))return!1;return!0}var T_e=JEe&&"documentMode"in document&&11>=document.documentMode,A_e={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},N_e=null,__e=null,R_e=null,O_e=!1;function F_e(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return O_e||null==N_e||N_e!==jAe(n)?null:("selectionStart"in(n=N_e)&&XAe(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},R_e&&S_e(R_e,n)?null:(R_e=n,(e=ANe.getPooled(A_e.select,__e,e,t)).type="select",e.target=N_e,kNe(e),e))}var M_e={eventTypes:A_e,extractEvents:function(e,t,n,r,a,o){if(!(o=!(a=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{a=NTe(a),o=$Ee.onSelect;for(var i=0;i<o.length;i++)if(!a.has(o[i])){a=!1;break e}a=!0}o=!a}if(o)return null;switch(a=t?pNe(t):window,e){case"focus":(QNe(a)||"true"===a.contentEditable)&&(N_e=a,__e=t,R_e=null);break;case"blur":R_e=__e=N_e=null;break;case"mousedown":O_e=!0;break;case"contextmenu":case"mouseup":case"dragend":return O_e=!1,F_e(n,r);case"selectionchange":if(T_e)break;case"keydown":case"keyup":return F_e(n,r)}return null}},D_e=ANe.extend({animationName:null,elapsedTime:null,pseudoElement:null}),B_e=ANe.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),P_e=d_e.extend({relatedTarget:null});function L_e(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var U_e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V_e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W_e=d_e.extend({key:function(e){if(e.key){var t=U_e[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=L_e(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?V_e[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:h_e,charCode:function(e){return"keypress"===e.type?L_e(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?L_e(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),z_e=b_e.extend({dataTransfer:null}),j_e=d_e.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:h_e}),H_e=ANe.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),G_e=b_e.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),K_e={eventTypes:vAe,extractEvents:function(e,t,n,r){var a=yAe.get(e);if(!a)return null;switch(e){case"keypress":if(0===L_e(n))return null;case"keydown":case"keyup":e=W_e;break;case"blur":case"focus":e=P_e;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=b_e;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=z_e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=j_e;break;case ITe:case CTe:case ETe:e=D_e;break;case STe:e=H_e;break;case"scroll":e=d_e;break;case"wheel":e=G_e;break;case"copy":case"cut":case"paste":e=B_e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=x_e;break;default:e=ANe}return kNe(t=e.getPooled(a,t,n,r)),t}};if(HEe)throw Error(REe(101));HEe=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),KEe();var q_e=fNe;VEe=hNe,WEe=q_e,zEe=pNe,ZEe({SimpleEventPlugin:K_e,EnterLeaveEventPlugin:w_e,ChangeEventPlugin:l_e,SelectEventPlugin:M_e,BeforeInputEventPlugin:qNe});var X_e=[],Q_e=-1;function Y_e(e){0>Q_e||(e.current=X_e[Q_e],X_e[Q_e]=null,Q_e--)}function $_e(e,t){Q_e++,X_e[Q_e]=e.current,e.current=t}var Z_e={},J_e={current:Z_e},eRe={current:!1},tRe=Z_e;function nRe(e,t){var n=e.type.contextTypes;if(!n)return Z_e;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function rRe(e){return null!=(e=e.childContextTypes)}function aRe(){Y_e(eRe),Y_e(J_e)}function oRe(e,t,n){if(J_e.current!==Z_e)throw Error(REe(168));$_e(J_e,t),$_e(eRe,n)}function iRe(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(REe(108,KSe(t)||"Unknown",a));return cb({},n,{},r)}function sRe(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Z_e,tRe=J_e.current,$_e(J_e,e),$_e(eRe,eRe.current),!0}function uRe(e,t,n){var r=e.stateNode;if(!r)throw Error(REe(169));n?(e=iRe(e,t,tRe),r.__reactInternalMemoizedMergedChildContext=e,Y_e(eRe),Y_e(J_e),$_e(J_e,e)):Y_e(eRe),$_e(eRe,n)}var cRe=_Ee.unstable_runWithPriority,lRe=_Ee.unstable_scheduleCallback,dRe=_Ee.unstable_cancelCallback,fRe=_Ee.unstable_requestPaint,pRe=_Ee.unstable_now,hRe=_Ee.unstable_getCurrentPriorityLevel,mRe=_Ee.unstable_ImmediatePriority,gRe=_Ee.unstable_UserBlockingPriority,vRe=_Ee.unstable_NormalPriority,yRe=_Ee.unstable_LowPriority,bRe=_Ee.unstable_IdlePriority,xRe={},kRe=_Ee.unstable_shouldYield,wRe=void 0!==fRe?fRe:function(){},IRe=null,CRe=null,ERe=!1,SRe=pRe(),TRe=1e4>SRe?pRe:function(){return pRe()-SRe};function ARe(){switch(hRe()){case mRe:return 99;case gRe:return 98;case vRe:return 97;case yRe:return 96;case bRe:return 95;default:throw Error(REe(332))}}function NRe(e){switch(e){case 99:return mRe;case 98:return gRe;case 97:return vRe;case 96:return yRe;case 95:return bRe;default:throw Error(REe(332))}}function _Re(e,t){return e=NRe(e),cRe(e,t)}function RRe(e,t,n){return e=NRe(e),lRe(e,t,n)}function ORe(e){return null===IRe?(IRe=[e],CRe=lRe(mRe,MRe)):IRe.push(e),xRe}function FRe(){if(null!==CRe){var e=CRe;CRe=null,dRe(e)}MRe()}function MRe(){if(!ERe&&null!==IRe){ERe=!0;var e=0;try{var t=IRe;_Re(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),IRe=null}catch(t){throw null!==IRe&&(IRe=IRe.slice(e+1)),lRe(mRe,FRe),t}finally{ERe=!1}}}function DRe(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function BRe(e,t){if(e&&e.defaultProps)for(var n in t=cb({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var PRe={current:null},LRe=null,URe=null,VRe=null;function WRe(){VRe=URe=LRe=null}function zRe(e){var t=PRe.current;Y_e(PRe),e.type._context._currentValue=t}function jRe(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function HRe(e,t){LRe=e,VRe=URe=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(vFe=!0),e.firstContext=null)}function GRe(e,t){if(VRe!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(VRe=e,t=1073741823),t={context:e,observedBits:t,next:null},null===URe){if(null===LRe)throw Error(REe(308));URe=t,LRe.dependencies={expirationTime:0,firstContext:t,responders:null}}else URe=URe.next=t;return e._currentValue}var KRe=!1;function qRe(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function XRe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function QRe(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function YRe(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function $Re(e,t){var n=e.alternate;null!==n&&XRe(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function ZRe(e,t,n,r){var a=e.updateQueue;KRe=!1;var o=a.baseQueue,i=a.shared.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}o=i,a.shared.pending=null,null!==(s=e.alternate)&&(null!==(s=s.updateQueue)&&(s.baseQueue=i))}if(null!==o){s=o.next;var u=a.baseState,c=0,l=null,d=null,f=null;if(null!==s)for(var p=s;;){if((i=p.expirationTime)<r){var h={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(d=f=h,l=u):f=f.next=h,i>c&&(c=i)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),oDe(i,p.suspenseConfig);e:{var m=e,g=p;switch(i=t,h=n,g.tag){case 1:if("function"==typeof(m=g.payload)){u=m.call(h,u,i);break e}u=m;break e;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null==(i="function"==typeof(m=g.payload)?m.call(h,u,i):m))break e;u=cb({},u,i);break e;case 2:KRe=!0}}null!==p.callback&&(e.effectTag|=32,null===(i=a.effects)?a.effects=[p]:i.push(p))}if(null===(p=p.next)||p===s){if(null===(i=a.shared.pending))break;p=o.next=i.next,i.next=s,a.baseQueue=o=i,a.shared.pending=null}}null===f?l=u:f.next=d,a.baseState=l,a.baseQueue=f,iDe(c),e.expirationTime=c,e.memoizedState=u}}function JRe(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=a,a=n,"function"!=typeof r)throw Error(REe(191,r));r.call(a)}}}var eOe=ESe.ReactCurrentBatchConfig,tOe=(new Tx.Component).refs;function nOe(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:cb({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var rOe={isMounted:function(e){return!!(e=e._reactInternalFiber)&&_Te(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=GMe(),a=eOe.suspense;(a=QRe(r=KMe(r,e,a),a)).payload=t,null!=n&&(a.callback=n),YRe(e,a),qMe(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=GMe(),a=eOe.suspense;(a=QRe(r=KMe(r,e,a),a)).tag=1,a.payload=t,null!=n&&(a.callback=n),YRe(e,a),qMe(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=GMe(),r=eOe.suspense;(r=QRe(n=KMe(n,e,r),r)).tag=2,null!=t&&(r.callback=t),YRe(e,r),qMe(e,n)}};function aOe(e,t,n,r,a,o,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!S_e(n,r)||!S_e(a,o))}function oOe(e,t,n){var r=!1,a=Z_e,o=t.contextType;return"object"==typeof o&&null!==o?o=GRe(o):(a=rRe(t)?tRe:J_e.current,o=(r=null!=(r=t.contextTypes))?nRe(e,a):Z_e),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=rOe,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function iOe(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&rOe.enqueueReplaceState(t,t.state,null)}function sOe(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=tOe,qRe(e);var o=t.contextType;"object"==typeof o&&null!==o?a.context=GRe(o):(o=rRe(t)?tRe:J_e.current,a.context=nRe(e,o)),ZRe(e,n,a,r),a.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(nOe(e,t,o,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&rOe.enqueueReplaceState(a,a.state,null),ZRe(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.effectTag|=4)}var uOe=Array.isArray;function cOe(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(REe(309));var r=n.stateNode}if(!r)throw Error(REe(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=r.refs;t===tOe&&(t=r.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(REe(284));if(!n._owner)throw Error(REe(290,e))}return e}function lOe(e,t){if("textarea"!==e.type)throw Error(REe(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function dOe(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=ADe(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function i(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=RDe(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=cOe(e,t,n),r.return=e,r):((r=NDe(n.type,n.key,n.props,null,e.mode,r)).ref=cOe(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ODe(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function l(e,t,n,r,o){return null===t||7!==t.tag?((t=_De(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=RDe(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case NSe:return(n=NDe(t.type,t.key,t.props,null,e.mode,n)).ref=cOe(e,null,t),n.return=e,n;case _Se:return(t=ODe(t,e.mode,n)).return=e,t}if(uOe(t)||HSe(t))return(t=_De(t,e.mode,n,null)).return=e,t;lOe(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==a?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case NSe:return n.key===a?n.type===RSe?l(e,t,n.props.children,r,a):u(e,t,n,r):null;case _Se:return n.key===a?c(e,t,n,r):null}if(uOe(n)||HSe(n))return null!==a?null:l(e,t,n,r,null);lOe(e,n)}return null}function p(e,t,n,r,a){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case NSe:return e=e.get(null===r.key?n:r.key)||null,r.type===RSe?l(t,e,r.props.children,a,r.key):u(t,e,r,a);case _Se:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(uOe(r)||HSe(r))return l(t,e=e.get(n)||null,r,a,null);lOe(t,r)}return null}function h(a,i,s,u){for(var c=null,l=null,h=i,m=i=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(a,h,s[m],u);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(a,h),i=o(v,i,m),null===l?c=v:l.sibling=v,l=v,h=g}if(m===s.length)return n(a,h),c;if(null===h){for(;m<s.length;m++)null!==(h=d(a,s[m],u))&&(i=o(h,i,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(a,h);m<s.length;m++)null!==(g=p(h,a,m,s[m],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),i=o(g,i,m),null===l?c=g:l.sibling=g,l=g);return e&&h.forEach((function(e){return t(a,e)})),c}function m(a,i,s,u){var c=HSe(s);if("function"!=typeof c)throw Error(REe(150));if(null==(s=c.call(s)))throw Error(REe(151));for(var l=c=null,h=i,m=i=0,g=null,v=s.next();null!==h&&!v.done;m++,v=s.next()){h.index>m?(g=h,h=null):g=h.sibling;var y=f(a,h,v.value,u);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(a,h),i=o(y,i,m),null===l?c=y:l.sibling=y,l=y,h=g}if(v.done)return n(a,h),c;if(null===h){for(;!v.done;m++,v=s.next())null!==(v=d(a,v.value,u))&&(i=o(v,i,m),null===l?c=v:l.sibling=v,l=v);return c}for(h=r(a,h);!v.done;m++,v=s.next())null!==(v=p(h,a,m,v.value,u))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),i=o(v,i,m),null===l?c=v:l.sibling=v,l=v);return e&&h.forEach((function(e){return t(a,e)})),c}return function(e,r,o,s){var u="object"==typeof o&&null!==o&&o.type===RSe&&null===o.key;u&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case NSe:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){switch(u.tag){case 7:if(o.type===RSe){n(e,u.sibling),(r=a(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=a(u,o.props)).ref=cOe(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===RSe?((r=_De(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=NDe(o.type,o.key,o.props,null,e.mode,s)).ref=cOe(e,r,o),s.return=e,e=s)}return i(e);case _Se:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=a(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=ODe(o,e.mode,s)).return=e,e=r}return i(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,o)).return=e,e=r):(n(e,r),(r=RDe(o,e.mode,s)).return=e,e=r),i(e);if(uOe(o))return h(e,r,o,s);if(HSe(o))return m(e,r,o,s);if(c&&lOe(e,o),void 0===o&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(REe(152,e.displayName||e.name||"Component"))}return n(e,r)}}var fOe=dOe(!0),pOe=dOe(!1),hOe={},mOe={current:hOe},gOe={current:hOe},vOe={current:hOe};function yOe(e){if(e===hOe)throw Error(REe(174));return e}function bOe(e,t){switch($_e(vOe,t),$_e(gOe,e),$_e(mOe,hOe),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hTe(null,"");break;default:t=hTe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Y_e(mOe),$_e(mOe,t)}function xOe(){Y_e(mOe),Y_e(gOe),Y_e(vOe)}function kOe(e){yOe(vOe.current);var t=yOe(mOe.current),n=hTe(t,e.type);t!==n&&($_e(gOe,e),$_e(mOe,n))}function wOe(e){gOe.current===e&&(Y_e(mOe),Y_e(gOe))}var IOe={current:0};function COe(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===$Ae||n.data===ZAe))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function EOe(e,t){return{responder:e,props:t}}var SOe=ESe.ReactCurrentDispatcher,TOe=ESe.ReactCurrentBatchConfig,AOe=0,NOe=null,_Oe=null,ROe=null,OOe=!1;function FOe(){throw Error(REe(321))}function MOe(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!C_e(e[n],t[n]))return!1;return!0}function DOe(e,t,n,r,a,o){if(AOe=o,NOe=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,SOe.current=null===e||null===e.memoizedState?aFe:oFe,e=n(r,a),t.expirationTime===AOe){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(REe(301));o+=1,ROe=_Oe=null,t.updateQueue=null,SOe.current=iFe,e=n(r,a)}while(t.expirationTime===AOe)}if(SOe.current=rFe,t=null!==_Oe&&null!==_Oe.next,AOe=0,ROe=_Oe=NOe=null,OOe=!1,t)throw Error(REe(300));return e}function BOe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ROe?NOe.memoizedState=ROe=e:ROe=ROe.next=e,ROe}function POe(){if(null===_Oe){var e=NOe.alternate;e=null!==e?e.memoizedState:null}else e=_Oe.next;var t=null===ROe?NOe.memoizedState:ROe.next;if(null!==t)ROe=t,_Oe=e;else{if(null===e)throw Error(REe(310));e={memoizedState:(_Oe=e).memoizedState,baseState:_Oe.baseState,baseQueue:_Oe.baseQueue,queue:_Oe.queue,next:null},null===ROe?NOe.memoizedState=ROe=e:ROe=ROe.next=e}return ROe}function LOe(e,t){return"function"==typeof t?t(e):t}function UOe(e){var t=POe(),n=t.queue;if(null===n)throw Error(REe(311));n.lastRenderedReducer=e;var r=_Oe,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var i=a.next;a.next=o.next,o.next=i}r.baseQueue=a=o,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var s=i=o=null,u=a;do{var c=u.expirationTime;if(c<AOe){var l={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(i=s=l,o=r):s=s.next=l,c>NOe.expirationTime&&(NOe.expirationTime=c,iDe(c))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),oDe(c,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==a);null===s?o=r:s.next=i,C_e(r,t.memoizedState)||(vFe=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function VOe(e){var t=POe(),n=t.queue;if(null===n)throw Error(REe(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var i=a=a.next;do{o=e(o,i.action),i=i.next}while(i!==a);C_e(o,t.memoizedState)||(vFe=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function WOe(e){var t=BOe();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:LOe,lastRenderedState:e}).dispatch=nFe.bind(null,NOe,e),[t.memoizedState,e]}function zOe(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=NOe.updateQueue)?(t={lastEffect:null},NOe.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jOe(){return POe().memoizedState}function HOe(e,t,n,r){var a=BOe();NOe.effectTag|=e,a.memoizedState=zOe(1|t,n,void 0,void 0===r?null:r)}function GOe(e,t,n,r){var a=POe();r=void 0===r?null:r;var o=void 0;if(null!==_Oe){var i=_Oe.memoizedState;if(o=i.destroy,null!==r&&MOe(r,i.deps))return void zOe(t,n,o,r)}NOe.effectTag|=e,a.memoizedState=zOe(1|t,n,o,r)}function KOe(e,t){return HOe(516,4,e,t)}function qOe(e,t){return GOe(516,4,e,t)}function XOe(e,t){return GOe(4,2,e,t)}function QOe(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function YOe(e,t,n){return n=null!=n?n.concat([e]):null,GOe(4,2,QOe.bind(null,t,e),n)}function $Oe(){}function ZOe(e,t){return BOe().memoizedState=[e,void 0===t?null:t],e}function JOe(e,t){var n=POe();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&MOe(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function eFe(e,t){var n=POe();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&MOe(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function tFe(e,t,n){var r=ARe();_Re(98>r?98:r,(function(){e(!0)})),_Re(97<r?97:r,(function(){var r=TOe.suspense;TOe.suspense=void 0===t?null:t;try{e(!1),n()}finally{TOe.suspense=r}}))}function nFe(e,t,n){var r=GMe(),a=eOe.suspense;a={expirationTime:r=KMe(r,e,a),suspenseConfig:a,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===NOe||null!==o&&o===NOe)OOe=!0,a.expirationTime=AOe,NOe.expirationTime=AOe;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.eagerReducer=o,a.eagerState=s,C_e(s,i))return}catch(e){}qMe(e,r)}}var rFe={readContext:GRe,useCallback:FOe,useContext:FOe,useEffect:FOe,useImperativeHandle:FOe,useLayoutEffect:FOe,useMemo:FOe,useReducer:FOe,useRef:FOe,useState:FOe,useDebugValue:FOe,useResponder:FOe,useDeferredValue:FOe,useTransition:FOe},aFe={readContext:GRe,useCallback:ZOe,useContext:GRe,useEffect:KOe,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,HOe(4,2,QOe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return HOe(4,2,e,t)},useMemo:function(e,t){var n=BOe();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=BOe();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=nFe.bind(null,NOe,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},BOe().memoizedState=e},useState:WOe,useDebugValue:$Oe,useResponder:EOe,useDeferredValue:function(e,t){var n=WOe(e),r=n[0],a=n[1];return KOe((function(){var n=TOe.suspense;TOe.suspense=void 0===t?null:t;try{a(e)}finally{TOe.suspense=n}}),[e,t]),r},useTransition:function(e){var t=WOe(!1),n=t[0];return t=t[1],[ZOe(tFe.bind(null,t,e),[t,e]),n]}},oFe={readContext:GRe,useCallback:JOe,useContext:GRe,useEffect:qOe,useImperativeHandle:YOe,useLayoutEffect:XOe,useMemo:eFe,useReducer:UOe,useRef:jOe,useState:function(){return UOe(LOe)},useDebugValue:$Oe,useResponder:EOe,useDeferredValue:function(e,t){var n=UOe(LOe),r=n[0],a=n[1];return qOe((function(){var n=TOe.suspense;TOe.suspense=void 0===t?null:t;try{a(e)}finally{TOe.suspense=n}}),[e,t]),r},useTransition:function(e){var t=UOe(LOe),n=t[0];return t=t[1],[JOe(tFe.bind(null,t,e),[t,e]),n]}},iFe={readContext:GRe,useCallback:JOe,useContext:GRe,useEffect:qOe,useImperativeHandle:YOe,useLayoutEffect:XOe,useMemo:eFe,useReducer:VOe,useRef:jOe,useState:function(){return VOe(LOe)},useDebugValue:$Oe,useResponder:EOe,useDeferredValue:function(e,t){var n=VOe(LOe),r=n[0],a=n[1];return qOe((function(){var n=TOe.suspense;TOe.suspense=void 0===t?null:t;try{a(e)}finally{TOe.suspense=n}}),[e,t]),r},useTransition:function(e){var t=VOe(LOe),n=t[0];return t=t[1],[JOe(tFe.bind(null,t,e),[t,e]),n]}},sFe=null,uFe=null,cFe=!1;function lFe(e,t){var n=EDe(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function dFe(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function fFe(e){if(cFe){var t=uFe;if(t){var n=t;if(!dFe(e,t)){if(!(t=oNe(n.nextSibling))||!dFe(e,t))return e.effectTag=-1025&e.effectTag|2,cFe=!1,void(sFe=e);lFe(sFe,n)}sFe=e,uFe=oNe(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,cFe=!1,sFe=e}}function pFe(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;sFe=e}function hFe(e){if(e!==sFe)return!1;if(!cFe)return pFe(e),cFe=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!nNe(t,e.memoizedProps))for(t=uFe;t;)lFe(e,t),t=oNe(t.nextSibling);if(pFe(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(REe(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===YAe){if(0===t){uFe=oNe(e.nextSibling);break e}t--}else n!==QAe&&n!==ZAe&&n!==$Ae||t++}e=e.nextSibling}uFe=null}}else uFe=sFe?oNe(e.stateNode.nextSibling):null;return!0}function mFe(){uFe=sFe=null,cFe=!1}var gFe=ESe.ReactCurrentOwner,vFe=!1;function yFe(e,t,n,r){t.child=null===e?pOe(t,null,n,r):fOe(t,e.child,n,r)}function bFe(e,t,n,r,a){n=n.render;var o=t.ref;return HRe(t,a),r=DOe(e,t,n,r,o,a),null===e||vFe?(t.effectTag|=1,yFe(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),BFe(e,t,a))}function xFe(e,t,n,r,a,o){if(null===e){var i=n.type;return"function"!=typeof i||SDe(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=NDe(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,kFe(e,t,i,r,a,o))}return i=e.child,a<o&&(a=i.memoizedProps,(n=null!==(n=n.compare)?n:S_e)(a,r)&&e.ref===t.ref)?BFe(e,t,o):(t.effectTag|=1,(e=ADe(i,r)).ref=t.ref,e.return=t,t.child=e)}function kFe(e,t,n,r,a,o){return null!==e&&S_e(e.memoizedProps,r)&&e.ref===t.ref&&(vFe=!1,a<o)?(t.expirationTime=e.expirationTime,BFe(e,t,o)):IFe(e,t,n,r,o)}function wFe(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function IFe(e,t,n,r,a){var o=rRe(n)?tRe:J_e.current;return o=nRe(t,o),HRe(t,a),n=DOe(e,t,n,r,o,a),null===e||vFe?(t.effectTag|=1,yFe(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),BFe(e,t,a))}function CFe(e,t,n,r,a){if(rRe(n)){var o=!0;sRe(t)}else o=!1;if(HRe(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),oOe(t,n,r),sOe(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var u=i.context,c=n.contextType;"object"==typeof c&&null!==c?c=GRe(c):c=nRe(t,c=rRe(n)?tRe:J_e.current);var l=n.getDerivedStateFromProps,d="function"==typeof l||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==r||u!==c)&&iOe(t,i,r,c),KRe=!1;var f=t.memoizedState;i.state=f,ZRe(t,r,i,a),u=t.memoizedState,s!==r||f!==u||eRe.current||KRe?("function"==typeof l&&(nOe(t,n,l,r),u=t.memoizedState),(s=KRe||aOe(t,n,s,r,f,u,c))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.effectTag|=4)):("function"==typeof i.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=c,r=s):("function"==typeof i.componentDidMount&&(t.effectTag|=4),r=!1)}else i=t.stateNode,XRe(e,t),s=t.memoizedProps,i.props=t.type===t.elementType?s:BRe(t.type,s),u=i.context,"object"==typeof(c=n.contextType)&&null!==c?c=GRe(c):c=nRe(t,c=rRe(n)?tRe:J_e.current),(d="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==r||u!==c)&&iOe(t,i,r,c),KRe=!1,u=t.memoizedState,i.state=u,ZRe(t,r,i,a),f=t.memoizedState,s!==r||u!==f||eRe.current||KRe?("function"==typeof l&&(nOe(t,n,l,r),f=t.memoizedState),(l=KRe||aOe(t,n,s,r,u,f,c))?(d||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,c),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,c)),"function"==typeof i.componentDidUpdate&&(t.effectTag|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=c,r=l):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return EFe(e,t,n,r,o,a)}function EFe(e,t,n,r,a,o){wFe(e,t);var i=0!=(64&t.effectTag);if(!r&&!i)return a&&uRe(t,n,!1),BFe(e,t,o);r=t.stateNode,gFe.current=t;var s=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&i?(t.child=fOe(t,e.child,null,o),t.child=fOe(t,null,s,o)):yFe(e,t,s,o),t.memoizedState=r.state,a&&uRe(t,n,!0),t.child}function SFe(e){var t=e.stateNode;t.pendingContext?oRe(0,t.pendingContext,t.pendingContext!==t.context):t.context&&oRe(0,t.context,!1),bOe(e,t.containerInfo)}var TFe,AFe,NFe,_Fe,RFe={dehydrated:null,retryTime:0};function OFe(e,t,n){var r,a=t.mode,o=t.pendingProps,i=IOe.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&i)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(i|=1),$_e(IOe,1&i),null===e){if(void 0!==o.fallback&&fFe(t),s){if(s=o.fallback,(o=_De(null,a,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=_De(s,a,n,null)).return=t,o.sibling=n,t.memoizedState=RFe,t.child=o,n}return a=o.children,t.memoizedState=null,t.child=pOe(t,null,a,n)}if(null!==e.memoizedState){if(a=(e=e.child).sibling,s){if(o=o.fallback,(n=ADe(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(a=ADe(a,o)).return=t,n.sibling=a,n.childExpirationTime=0,t.memoizedState=RFe,t.child=n,a}return n=fOe(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=_De(null,a,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=_De(s,a,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=RFe,t.child=o,n}return t.memoizedState=null,t.child=fOe(t,e,o.children,n)}function FFe(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),jRe(e.return,t)}function MFe(e,t,n,r,a,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:a,lastEffect:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailExpiration=0,i.tailMode=a,i.lastEffect=o)}function DFe(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(yFe(e,t,r.children,n),0!=(2&(r=IOe.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&FFe(e,n);else if(19===e.tag)FFe(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if($_e(IOe,r),0==(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===COe(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),MFe(t,!1,a,n,o,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===COe(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}MFe(t,!0,n,null,o,t.lastEffect);break;case"together":MFe(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function BFe(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&iDe(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(REe(153));if(null!==t.child){for(n=ADe(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ADe(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function PFe(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function LFe(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return rRe(t.type)&&aRe(),null;case 3:return xOe(),Y_e(eRe),Y_e(J_e),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!hFe(t)||(t.effectTag|=4),AFe(t),null;case 5:wOe(t),n=yOe(vOe.current);var a=t.type;if(null!==e&&null!=t.stateNode)NFe(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(REe(166));return null}if(e=yOe(mOe.current),hFe(t)){r=t.stateNode,a=t.type;var o=t.memoizedProps;switch(r[uNe]=t,r[cNe]=o,a){case"iframe":case"object":case"embed":TAe("load",r);break;case"video":case"audio":for(e=0;e<TTe.length;e++)TAe(TTe[e],r);break;case"source":TAe("error",r);break;case"img":case"image":case"link":TAe("error",r),TAe("load",r);break;case"form":TAe("reset",r),TAe("submit",r);break;case"details":TAe("toggle",r);break;case"input":eTe(r,o),TAe("invalid",r),WAe(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!o.multiple},TAe("invalid",r),WAe(n,"onChange");break;case"textarea":cTe(r,o),TAe("invalid",r),WAe(n,"onChange")}for(var i in LAe(a,o),e=null,o)if(o.hasOwnProperty(i)){var s=o[i];"children"===i?"string"==typeof s?r.textContent!==s&&(e=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(e=["children",""+s]):YEe.hasOwnProperty(i)&&null!=s&&WAe(n,i)}switch(a){case"input":$Se(r),rTe(r,o,!0);break;case"textarea":$Se(r),dTe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=zAe)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(i=9===n.nodeType?n:n.ownerDocument,e===VAe&&(e=pTe(a)),e===VAe?"script"===a?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=i.createElement(a,{is:r.is}):(e=i.createElement(a),"select"===a&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,a),e[uNe]=t,e[cNe]=r,TFe(e,t,!1,!1),t.stateNode=e,i=UAe(a,r),a){case"iframe":case"object":case"embed":TAe("load",e),s=r;break;case"video":case"audio":for(s=0;s<TTe.length;s++)TAe(TTe[s],e);s=r;break;case"source":TAe("error",e),s=r;break;case"img":case"image":case"link":TAe("error",e),TAe("load",e),s=r;break;case"form":TAe("reset",e),TAe("submit",e),s=r;break;case"details":TAe("toggle",e),s=r;break;case"input":eTe(e,r),s=JSe(e,r),TAe("invalid",e),WAe(n,"onChange");break;case"option":s=iTe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=cb({},r,{value:void 0}),TAe("invalid",e),WAe(n,"onChange");break;case"textarea":cTe(e,r),s=uTe(e,r),TAe("invalid",e),WAe(n,"onChange");break;default:s=r}LAe(a,s);var u=s;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?BAe(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&gTe(e,c):"children"===o?"string"==typeof c?("textarea"!==a||""!==c)&&vTe(e,c):"number"==typeof c&&vTe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(YEe.hasOwnProperty(o)?null!=c&&WAe(n,o):null!=c&&SSe(e,o,c,i))}switch(a){case"input":$Se(e),rTe(e,r,!1);break;case"textarea":$Se(e),dTe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+XSe(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?sTe(e,!!r.multiple,n,!1):null!=r.defaultValue&&sTe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=zAe)}tNe(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)_Fe(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(REe(166));n=yOe(vOe.current),yOe(mOe.current),hFe(t)?(n=t.stateNode,r=t.memoizedProps,n[uNe]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[uNe]=t,t.stateNode=n)}return null;case 13:return Y_e(IOe),r=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&hFe(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(o=t.firstEffect)?(t.firstEffect=a,a.nextEffect=o):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&IOe.current)?EMe===mMe&&(EMe=yMe):(EMe!==mMe&&EMe!==yMe||(EMe=bMe),0!==_Me&&null!==wMe&&(DDe(wMe,CMe),BDe(wMe,_Me)))),(n||r)&&(t.effectTag|=4),null);case 4:return xOe(),AFe(t),null;case 10:return zRe(t),null;case 17:return rRe(t.type)&&aRe(),null;case 19:if(Y_e(IOe),null===(r=t.memoizedState))return null;if(a=0!=(64&t.effectTag),null===(o=r.rendering)){if(a)PFe(r,!1);else if(EMe!==mMe||null!==e&&0!=(64&e.effectTag))for(o=t.child;null!==o;){if(null!==(e=COe(o))){for(t.effectTag|=64,PFe(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)o=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=o,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,o=e.dependencies,a.dependencies=null===o?null:{expirationTime:o.expirationTime,firstContext:o.firstContext,responders:o.responders}),r=r.sibling;return $_e(IOe,1&IOe.current|2),t.child}o=o.sibling}}else{if(!a)if(null!==(e=COe(o))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),PFe(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*TRe()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,PFe(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=r.last)?n.sibling=o:t.child=o,r.last=o)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=TRe()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=TRe(),n.sibling=null,t=IOe.current,$_e(IOe,a?1&t|2:1&t),n):null}throw Error(REe(156,t.tag))}function UFe(e){switch(e.tag){case 1:rRe(e.type)&&aRe();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(xOe(),Y_e(eRe),Y_e(J_e),0!=(64&(t=e.effectTag)))throw Error(REe(285));return e.effectTag=-4097&t|64,e;case 5:return wOe(e),null;case 13:return Y_e(IOe),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return Y_e(IOe),null;case 4:return xOe(),null;case 10:return zRe(e),null;default:return null}}function VFe(e,t){return{value:e,source:t,stack:qSe(t)}}TFe=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},AFe=function(){},NFe=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var i,s,u=t.stateNode;switch(yOe(mOe.current),e=null,n){case"input":o=JSe(u,o),r=JSe(u,r),e=[];break;case"option":o=iTe(u,o),r=iTe(u,r),e=[];break;case"select":o=cb({},o,{value:void 0}),r=cb({},r,{value:void 0}),e=[];break;case"textarea":o=uTe(u,o),r=uTe(u,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(u.onclick=zAe)}for(i in LAe(n,r),n=null,o)if(!r.hasOwnProperty(i)&&o.hasOwnProperty(i)&&null!=o[i])if("style"===i)for(s in u=o[i])u.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==i&&"children"!==i&&"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(YEe.hasOwnProperty(i)?e||(e=[]):(e=e||[]).push(i,null));for(i in r){var c=r[i];if(u=null!=o?o[i]:void 0,r.hasOwnProperty(i)&&c!==u&&(null!=c||null!=u))if("style"===i)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(e||(e=[]),e.push(i,n)),n=c;else"dangerouslySetInnerHTML"===i?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(i,c)):"children"===i?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(i,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&(YEe.hasOwnProperty(i)?(null!=c&&WAe(a,i),e||u===c||(e=[])):(e=e||[]).push(i,c))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},_Fe=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var WFe="function"==typeof WeakSet?WeakSet:Set;function zFe(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=qSe(n)),null!==n&&KSe(n.type),t=t.value,null!==e&&1===e.tag&&KSe(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function jFe(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){yDe(e,t)}}function HFe(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){yDe(e,t)}else t.current=null}function GFe(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:BRe(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(REe(163))}function KFe(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function qFe(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function XFe(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void qFe(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:BRe(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&JRe(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}JRe(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&tNe(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&gAe(n)))));case 19:case 17:case 20:case 21:return}throw Error(REe(163))}function QFe(e,t,n){switch("function"==typeof wDe&&wDe(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;_Re(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var a=t;try{n()}catch(e){yDe(a,e)}}e=e.next}while(e!==r)}))}break;case 1:HFe(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&jFe(t,n);break;case 5:HFe(t);break;case 4:tMe(e,t,n)}}function YFe(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&YFe(t)}function $Fe(e){return 5===e.tag||3===e.tag||4===e.tag}function ZFe(e){e:{for(var t=e.return;null!==t;){if($Fe(t)){var n=t;break e}t=t.return}throw Error(REe(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(REe(161))}16&n.effectTag&&(vTe(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||$Fe(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?JFe(e,n,t):eMe(e,n,t)}function JFe(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=zAe));else if(4!==r&&null!==(e=e.child))for(JFe(e,t,n),e=e.sibling;null!==e;)JFe(e,t,n),e=e.sibling}function eMe(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(eMe(e,t,n),e=e.sibling;null!==e;)eMe(e,t,n),e=e.sibling}function tMe(e,t,n){for(var r,a,o=t,i=!1;;){if(!i){i=o.return;e:for(;;){if(null===i)throw Error(REe(160));switch(r=i.stateNode,i.tag){case 5:a=!1;break e;case 3:case 4:r=r.containerInfo,a=!0;break e}i=i.return}i=!0}if(5===o.tag||6===o.tag){e:for(var s=e,u=o,c=n,l=u;;)if(QFe(s,l,c),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}a?(s=r,u=o.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,a=!0,o.child.return=o,o=o.child;continue}}else if(QFe(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(i=!1)}o.sibling.return=o.return,o=o.sibling}}function nMe(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void KFe(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,a=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[cNe]=r,"input"===e&&"radio"===r.type&&null!=r.name&&tTe(n,r),UAe(e,a),t=UAe(e,r),a=0;a<o.length;a+=2){var i=o[a],s=o[a+1];"style"===i?BAe(n,s):"dangerouslySetInnerHTML"===i?gTe(n,s):"children"===i?vTe(n,s):SSe(n,i,s,t)}switch(e){case"input":nTe(n,r);break;case"textarea":lTe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?sTe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?sTe(n,!!r.multiple,r.defaultValue,!0):sTe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(REe(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,gAe(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,OMe=TRe()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,a=null!=(a=e.memoizedProps.style)&&a.hasOwnProperty("display")?a.display:null,o.style.display=DAe("display",a));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void rMe(t);case 19:return void rMe(t);case 17:return}throw Error(REe(163))}function rMe(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new WFe),t.forEach((function(t){var r=xDe.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var aMe="function"==typeof WeakMap?WeakMap:Map;function oMe(e,t,n){(n=QRe(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){DMe||(DMe=!0,BMe=r),zFe(e,t)},n}function iMe(e,t,n){(n=QRe(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return zFe(e,t),r(a)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===PMe?PMe=new Set([this]):PMe.add(this),zFe(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var sMe,uMe=Math.ceil,cMe=ESe.ReactCurrentDispatcher,lMe=ESe.ReactCurrentOwner,dMe=0,fMe=8,pMe=16,hMe=32,mMe=0,gMe=1,vMe=2,yMe=3,bMe=4,xMe=5,kMe=dMe,wMe=null,IMe=null,CMe=0,EMe=mMe,SMe=null,TMe=1073741823,AMe=1073741823,NMe=null,_Me=0,RMe=!1,OMe=0,FMe=500,MMe=null,DMe=!1,BMe=null,PMe=null,LMe=!1,UMe=null,VMe=90,WMe=null,zMe=0,jMe=null,HMe=0;function GMe(){return(kMe&(pMe|hMe))!==dMe?1073741821-(TRe()/10|0):0!==HMe?HMe:HMe=1073741821-(TRe()/10|0)}function KMe(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=ARe();if(0==(4&t))return 99===r?1073741823:1073741822;if((kMe&pMe)!==dMe)return CMe;if(null!==n)e=DRe(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=DRe(e,150,100);break;case 97:case 96:e=DRe(e,5e3,250);break;case 95:e=2;break;default:throw Error(REe(326))}return null!==wMe&&e===CMe&&--e,e}function qMe(e,t){if(50<zMe)throw zMe=0,jMe=null,Error(REe(185));if(null!==(e=XMe(e,t))){var n=ARe();1073741823===t?(kMe&fMe)!==dMe&&(kMe&(pMe|hMe))===dMe?ZMe(e):(YMe(e),kMe===dMe&&FRe()):YMe(e),(4&kMe)===dMe||98!==n&&99!==n||(null===WMe?WMe=new Map([[e,t]]):(void 0===(n=WMe.get(e))||n>t)&&WMe.set(e,t))}}function XMe(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,a=null;if(null===r&&3===e.tag)a=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){a=r.stateNode;break}r=r.return}return null!==a&&(wMe===a&&(iDe(t),EMe===bMe&&DDe(a,CMe)),BDe(a,t)),a}function QMe(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!MDe(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function YMe(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=ORe(ZMe.bind(null,e));else{var t=QMe(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=GMe();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var a=e.callbackPriority;if(e.callbackExpirationTime===t&&a>=r)return;n!==xRe&&dRe(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?ORe(ZMe.bind(null,e)):RRe(r,$Me.bind(null,e),{timeout:10*(1073741821-t)-TRe()}),e.callbackNode=t}}}function $Me(e,t){if(HMe=0,t)return PDe(e,t=GMe()),YMe(e),null;var n=QMe(e);if(0!==n){if(t=e.callbackNode,(kMe&(pMe|hMe))!==dMe)throw Error(REe(327));if(mDe(),e===wMe&&n===CMe||nDe(e,n),null!==IMe){var r=kMe;kMe|=pMe;for(var a=aDe();;)try{uDe();break}catch(t){rDe(e,t)}if(WRe(),kMe=r,cMe.current=a,EMe===gMe)throw t=SMe,nDe(e,n),DDe(e,n),YMe(e),t;if(null===IMe)switch(a=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=EMe,wMe=null,r){case mMe:case gMe:throw Error(REe(345));case vMe:PDe(e,2<n?2:n);break;case yMe:if(DDe(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=dDe(a)),1073741823===TMe&&10<(a=OMe+FMe-TRe())){if(RMe){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,nDe(e,n);break}}if(0!==(o=QMe(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=rNe(fDe.bind(null,e),a);break}fDe(e);break;case bMe:if(DDe(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=dDe(a)),RMe&&(0===(a=e.lastPingedTime)||a>=n)){e.lastPingedTime=n,nDe(e,n);break}if(0!==(a=QMe(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==AMe?r=10*(1073741821-AMe)-TRe():1073741823===TMe?r=0:(r=10*(1073741821-TMe)-5e3,0>(r=(a=TRe())-r)&&(r=0),(n=10*(1073741821-n)-a)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uMe(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=rNe(fDe.bind(null,e),r);break}fDe(e);break;case xMe:if(1073741823!==TMe&&null!==NMe){o=TMe;var i=NMe;if(0>=(r=0|i.busyMinDurationMs)?r=0:(a=0|i.busyDelayMs,r=(o=TRe()-(10*(1073741821-o)-(0|i.timeoutMs||5e3)))<=a?0:a+r-o),10<r){DDe(e,n),e.timeoutHandle=rNe(fDe.bind(null,e),r);break}}fDe(e);break;default:throw Error(REe(329))}if(YMe(e),e.callbackNode===t)return $Me.bind(null,e)}}return null}function ZMe(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(kMe&(pMe|hMe))!==dMe)throw Error(REe(327));if(mDe(),e===wMe&&t===CMe||nDe(e,t),null!==IMe){var n=kMe;kMe|=pMe;for(var r=aDe();;)try{sDe();break}catch(t){rDe(e,t)}if(WRe(),kMe=n,cMe.current=r,EMe===gMe)throw n=SMe,nDe(e,t),DDe(e,t),YMe(e),n;if(null!==IMe)throw Error(REe(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,wMe=null,fDe(e),YMe(e)}return null}function JMe(){if(null!==WMe){var e=WMe;WMe=null,e.forEach((function(e,t){PDe(t,e),YMe(t)})),FRe()}}function eDe(e,t){var n=kMe;kMe|=1;try{return e(t)}finally{(kMe=n)===dMe&&FRe()}}function tDe(e,t){var n=kMe;kMe&=-2,kMe|=fMe;try{return e(t)}finally{(kMe=n)===dMe&&FRe()}}function nDe(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aNe(n)),null!==IMe)for(n=IMe.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&aRe();break;case 3:xOe(),Y_e(eRe),Y_e(J_e);break;case 5:wOe(r);break;case 4:xOe();break;case 13:case 19:Y_e(IOe);break;case 10:zRe(r)}n=n.return}wMe=e,IMe=ADe(e.current,null),CMe=t,EMe=mMe,SMe=null,AMe=TMe=1073741823,NMe=null,_Me=0,RMe=!1}function rDe(e,t){for(;;){try{if(WRe(),SOe.current=rFe,OOe)for(var n=NOe.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(AOe=0,ROe=_Oe=NOe=null,OOe=!1,null===IMe||null===IMe.return)return EMe=gMe,SMe=t,IMe=null;e:{var a=e,o=IMe.return,i=IMe,s=t;if(t=CMe,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var u=s;if(0==(2&i.mode)){var c=i.alternate;c?(i.updateQueue=c.updateQueue,i.memoizedState=c.memoizedState,i.expirationTime=c.expirationTime):(i.updateQueue=null,i.memoizedState=null)}var l=0!=(1&IOe.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var h=d.memoizedProps;f=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!l)}}if(f){var m=d.updateQueue;if(null===m){var g=new Set;g.add(u),d.updateQueue=g}else m.add(u);if(0==(2&d.mode)){if(d.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var v=QRe(1073741823,null);v.tag=2,YRe(i,v)}i.expirationTime=1073741823;break e}s=void 0,i=t;var y=a.pingCache;if(null===y?(y=a.pingCache=new aMe,s=new Set,y.set(u,s)):void 0===(s=y.get(u))&&(s=new Set,y.set(u,s)),!s.has(i)){s.add(i);var b=bDe.bind(null,a,u,i);u.then(b,b)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);s=Error((KSe(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+qSe(i))}EMe!==xMe&&(EMe=vMe),s=VFe(s,i),d=o;do{switch(d.tag){case 3:u=s,d.effectTag|=4096,d.expirationTime=t,$Re(d,oMe(d,u,t));break e;case 1:u=s;var x=d.type,k=d.stateNode;if(0==(64&d.effectTag)&&("function"==typeof x.getDerivedStateFromError||null!==k&&"function"==typeof k.componentDidCatch&&(null===PMe||!PMe.has(k)))){d.effectTag|=4096,d.expirationTime=t,$Re(d,iMe(d,u,t));break e}}d=d.return}while(null!==d)}IMe=lDe(IMe)}catch(e){t=e;continue}break}}function aDe(){var e=cMe.current;return cMe.current=rFe,null===e?rFe:e}function oDe(e,t){e<TMe&&2<e&&(TMe=e),null!==t&&e<AMe&&2<e&&(AMe=e,NMe=t)}function iDe(e){e>_Me&&(_Me=e)}function sDe(){for(;null!==IMe;)IMe=cDe(IMe)}function uDe(){for(;null!==IMe&&!kRe();)IMe=cDe(IMe)}function cDe(e){var t=sMe(e.alternate,e,CMe);return e.memoizedProps=e.pendingProps,null===t&&(t=lDe(e)),lMe.current=null,t}function lDe(e){IMe=e;do{var t=IMe.alternate;if(e=IMe.return,0==(2048&IMe.effectTag)){if(t=LFe(t,IMe,CMe),1===CMe||1!==IMe.childExpirationTime){for(var n=0,r=IMe.child;null!==r;){var a=r.expirationTime,o=r.childExpirationTime;a>n&&(n=a),o>n&&(n=o),r=r.sibling}IMe.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=IMe.firstEffect),null!==IMe.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=IMe.firstEffect),e.lastEffect=IMe.lastEffect),1<IMe.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=IMe:e.firstEffect=IMe,e.lastEffect=IMe))}else{if(null!==(t=UFe(IMe)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=IMe.sibling))return t;IMe=e}while(null!==IMe);return EMe===mMe&&(EMe=xMe),null}function dDe(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function fDe(e){var t=ARe();return _Re(99,pDe.bind(null,e,t)),null}function pDe(e,t){do{mDe()}while(null!==UMe);if((kMe&(pMe|hMe))!==dMe)throw Error(REe(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(REe(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var a=dDe(n);if(e.firstPendingTime=a,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===wMe&&(IMe=wMe=null,CMe=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,a=n.firstEffect):a=n:a=n.firstEffect,null!==a){var o=kMe;kMe|=hMe,lMe.current=null,JAe=SAe;var i=qAe();if(XAe(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{var u=(s=(s=i.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(u&&0!==u.rangeCount){s=u.anchorNode;var c=u.anchorOffset,l=u.focusNode;u=u.focusOffset;try{s.nodeType,l.nodeType}catch(e){s=null;break e}var d=0,f=-1,p=-1,h=0,m=0,g=i,v=null;t:for(;;){for(var y;g!==s||0!==c&&3!==g.nodeType||(f=d+c),g!==l||0!==u&&3!==g.nodeType||(p=d+u),3===g.nodeType&&(d+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===i)break t;if(v===s&&++h===c&&(f=d),v===l&&++m===u&&(p=d),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}s=-1===f||-1===p?null:{start:f,end:p}}else s=null}s=s||{start:0,end:0}}else s=null;eNe={activeElementDetached:null,focusedElem:i,selectionRange:s},SAe=!1,MMe=a;do{try{hDe()}catch(e){if(null===MMe)throw Error(REe(330));yDe(MMe,e),MMe=MMe.nextEffect}}while(null!==MMe);MMe=a;do{try{for(i=e,s=t;null!==MMe;){var b=MMe.effectTag;if(16&b&&vTe(MMe.stateNode,""),128&b){var x=MMe.alternate;if(null!==x){var k=x.ref;null!==k&&("function"==typeof k?k(null):k.current=null)}}switch(1038&b){case 2:ZFe(MMe),MMe.effectTag&=-3;break;case 6:ZFe(MMe),MMe.effectTag&=-3,nMe(MMe.alternate,MMe);break;case 1024:MMe.effectTag&=-1025;break;case 1028:MMe.effectTag&=-1025,nMe(MMe.alternate,MMe);break;case 4:nMe(MMe.alternate,MMe);break;case 8:tMe(i,c=MMe,s),YFe(c)}MMe=MMe.nextEffect}}catch(e){if(null===MMe)throw Error(REe(330));yDe(MMe,e),MMe=MMe.nextEffect}}while(null!==MMe);if(k=eNe,x=qAe(),b=k.focusedElem,s=k.selectionRange,x!==b&&b&&b.ownerDocument&&KAe(b.ownerDocument.documentElement,b)){null!==s&&XAe(b)&&(x=s.start,void 0===(k=s.end)&&(k=x),"selectionStart"in b?(b.selectionStart=x,b.selectionEnd=Math.min(k,b.value.length)):(k=(x=b.ownerDocument||document)&&x.defaultView||window).getSelection&&(k=k.getSelection(),c=b.textContent.length,i=Math.min(s.start,c),s=void 0===s.end?i:Math.min(s.end,c),!k.extend&&i>s&&(c=s,s=i,i=c),c=GAe(b,i),l=GAe(b,s),c&&l&&(1!==k.rangeCount||k.anchorNode!==c.node||k.anchorOffset!==c.offset||k.focusNode!==l.node||k.focusOffset!==l.offset)&&((x=x.createRange()).setStart(c.node,c.offset),k.removeAllRanges(),i>s?(k.addRange(x),k.extend(l.node,l.offset)):(x.setEnd(l.node,l.offset),k.addRange(x))))),x=[];for(k=b;k=k.parentNode;)1===k.nodeType&&x.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<x.length;b++)(k=x[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}SAe=!!JAe,eNe=JAe=null,e.current=n,MMe=a;do{try{for(b=e;null!==MMe;){var w=MMe.effectTag;if(36&w&&XFe(b,MMe.alternate,MMe),128&w){x=void 0;var I=MMe.ref;if(null!==I){var C=MMe.stateNode;switch(MMe.tag){case 5:x=C;break;default:x=C}"function"==typeof I?I(x):I.current=x}}MMe=MMe.nextEffect}}catch(e){if(null===MMe)throw Error(REe(330));yDe(MMe,e),MMe=MMe.nextEffect}}while(null!==MMe);MMe=null,wRe(),kMe=o}else e.current=n;if(LMe)LMe=!1,UMe=e,VMe=t;else for(MMe=a;null!==MMe;)t=MMe.nextEffect,MMe.nextEffect=null,MMe=t;if(0===(t=e.firstPendingTime)&&(PMe=null),1073741823===t?e===jMe?zMe++:(zMe=0,jMe=e):zMe=0,"function"==typeof kDe&&kDe(n.stateNode,r),YMe(e),DMe)throw DMe=!1,e=BMe,BMe=null,e;return(kMe&fMe)!==dMe||FRe(),null}function hDe(){for(;null!==MMe;){var e=MMe.effectTag;0!=(256&e)&&GFe(MMe.alternate,MMe),0==(512&e)||LMe||(LMe=!0,RRe(97,(function(){return mDe(),null}))),MMe=MMe.nextEffect}}function mDe(){if(90!==VMe){var e=97<VMe?97:VMe;return VMe=90,_Re(e,gDe)}}function gDe(){if(null===UMe)return!1;var e=UMe;if(UMe=null,(kMe&(pMe|hMe))!==dMe)throw Error(REe(331));var t=kMe;for(kMe|=hMe,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:KFe(5,n),qFe(5,n)}}catch(t){if(null===e)throw Error(REe(330));yDe(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return kMe=t,FRe(),!0}function vDe(e,t,n){YRe(e,t=oMe(e,t=VFe(n,t),1073741823)),null!==(e=XMe(e,1073741823))&&YMe(e)}function yDe(e,t){if(3===e.tag)vDe(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){vDe(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===PMe||!PMe.has(r))){YRe(n,e=iMe(n,e=VFe(t,e),1073741823)),null!==(n=XMe(n,1073741823))&&YMe(n);break}}n=n.return}}function bDe(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),wMe===e&&CMe===n?EMe===bMe||EMe===yMe&&1073741823===TMe&&TRe()-OMe<FMe?nDe(e,CMe):RMe=!0:MDe(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,YMe(e)))}function xDe(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=KMe(t=GMe(),e,null)),null!==(e=XMe(e,t))&&YMe(e)}sMe=function(e,t,n){var r=t.expirationTime;if(null!==e){var a=t.pendingProps;if(e.memoizedProps!==a||eRe.current)vFe=!0;else{if(r<n){switch(vFe=!1,t.tag){case 3:SFe(t),mFe();break;case 5:if(kOe(t),4&t.mode&&1!==n&&a.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:rRe(t.type)&&sRe(t);break;case 4:bOe(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,a=t.type._context,$_e(PRe,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?OFe(e,t,n):($_e(IOe,1&IOe.current),null!==(t=BFe(e,t,n))?t.sibling:null);$_e(IOe,1&IOe.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return DFe(e,t,n);t.effectTag|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null),$_e(IOe,IOe.current),!r)return null}return BFe(e,t,n)}vFe=!1}}else vFe=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,a=nRe(t,J_e.current),HRe(t,n),a=DOe(null,t,r,e,a,n),t.effectTag|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,rRe(r)){var o=!0;sRe(t)}else o=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,qRe(t);var i=r.getDerivedStateFromProps;"function"==typeof i&&nOe(t,r,i,e),a.updater=rOe,t.stateNode=a,a._reactInternalFiber=t,sOe(t,r,e,n),t=EFe(null,t,r,!0,o,n)}else t.tag=0,yFe(null,t,a,n),t=t.child;return t;case 16:e:{if(a=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,GSe(a),1!==a._status)throw a._result;switch(a=a._result,t.type=a,o=t.tag=TDe(a),e=BRe(a,e),o){case 0:t=IFe(null,t,a,e,n);break e;case 1:t=CFe(null,t,a,e,n);break e;case 11:t=bFe(null,t,a,e,n);break e;case 14:t=xFe(null,t,a,BRe(a.type,e),r,n);break e}throw Error(REe(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,IFe(e,t,r,a=t.elementType===r?a:BRe(r,a),n);case 1:return r=t.type,a=t.pendingProps,CFe(e,t,r,a=t.elementType===r?a:BRe(r,a),n);case 3:if(SFe(t),r=t.updateQueue,null===e||null===r)throw Error(REe(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,XRe(e,t),ZRe(t,r,null,n),(r=t.memoizedState.element)===a)mFe(),t=BFe(e,t,n);else{if((a=t.stateNode.hydrate)&&(uFe=oNe(t.stateNode.containerInfo.firstChild),sFe=t,a=cFe=!0),a)for(n=pOe(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else yFe(e,t,r,n),mFe();t=t.child}return t;case 5:return kOe(t),null===e&&fFe(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,nNe(r,a)?i=null:null!==o&&nNe(r,o)&&(t.effectTag|=16),wFe(e,t),4&t.mode&&1!==n&&a.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(yFe(e,t,i,n),t=t.child),t;case 6:return null===e&&fFe(t),null;case 13:return OFe(e,t,n);case 4:return bOe(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=fOe(t,null,r,n):yFe(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,bFe(e,t,r,a=t.elementType===r?a:BRe(r,a),n);case 7:return yFe(e,t,t.pendingProps,n),t.child;case 8:case 12:return yFe(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value;var s=t.type._context;if($_e(PRe,s._currentValue),s._currentValue=o,null!==i)if(s=i.value,0===(o=C_e(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(i.children===a.children&&!eRe.current){t=BFe(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){i=s.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===s.tag&&((c=QRe(n,null)).tag=2,YRe(s,c)),s.expirationTime<n&&(s.expirationTime=n),null!==(c=s.alternate)&&c.expirationTime<n&&(c.expirationTime=n),jRe(s.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else i=10===s.tag&&s.type===t.type?null:s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===t){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}yFe(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(o=t.pendingProps).children,HRe(t,n),r=r(a=GRe(a,o.unstable_observedBits)),t.effectTag|=1,yFe(e,t,r,n),t.child;case 14:return o=BRe(a=t.type,t.pendingProps),xFe(e,t,a,o=BRe(a.type,o),r,n);case 15:return kFe(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:BRe(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,rRe(r)?(e=!0,sRe(t)):e=!1,HRe(t,n),oOe(t,r,a),sOe(t,r,a,n),EFe(null,t,r,!0,e,n);case 19:return DFe(e,t,n)}throw Error(REe(156,t.tag))};var kDe=null,wDe=null;function IDe(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);kDe=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},wDe=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}return!0}function CDe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function EDe(e,t,n,r){return new CDe(e,t,n,r)}function SDe(e){return!(!(e=e.prototype)||!e.isReactComponent)}function TDe(e){if("function"==typeof e)return SDe(e)?1:0;if(null!=e){if((e=e.$$typeof)===PSe)return 11;if(e===VSe)return 14}return 2}function ADe(e,t){var n=e.alternate;return null===n?((n=EDe(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function NDe(e,t,n,r,a,o){var i=2;if(r=e,"function"==typeof e)SDe(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case RSe:return _De(n.children,a,o,t);case BSe:i=8,a|=7;break;case OSe:i=8,a|=1;break;case FSe:return(e=EDe(12,n,t,8|a)).elementType=FSe,e.type=FSe,e.expirationTime=o,e;case LSe:return(e=EDe(13,n,t,a)).type=LSe,e.elementType=LSe,e.expirationTime=o,e;case USe:return(e=EDe(19,n,t,a)).elementType=USe,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case MSe:i=10;break e;case DSe:i=9;break e;case PSe:i=11;break e;case VSe:i=14;break e;case WSe:i=16,r=null;break e;case zSe:i=22;break e}throw Error(REe(130,null==e?e:typeof e,""))}return(t=EDe(i,n,t,a)).elementType=e,t.type=r,t.expirationTime=o,t}function _De(e,t,n,r){return(e=EDe(7,e,r,t)).expirationTime=n,e}function RDe(e,t,n){return(e=EDe(6,e,null,t)).expirationTime=n,e}function ODe(e,t,n){return(t=EDe(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function FDe(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function MDe(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function DDe(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function BDe(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function PDe(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function LDe(e,t,n,r){var a=t.current,o=GMe(),i=eOe.suspense;o=KMe(o,a,i);e:if(n){t:{if(_Te(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(REe(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(rRe(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(REe(171))}if(1===n.tag){var u=n.type;if(rRe(u)){n=iRe(n,u,s);break e}}n=s}else n=Z_e;return null===t.context?t.context=n:t.pendingContext=n,(t=QRe(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),YRe(a,t),qMe(a,o),o}function UDe(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function VDe(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function WDe(e,t){VDe(e,t),(e=e.alternate)&&VDe(e,t)}function zDe(e,t,n){var r=new FDe(e,t,n=null!=n&&!0===n.hydrate),a=EDe(3,null,null,2===t?7:1===t?3:0);r.current=a,a.stateNode=r,qRe(a),e[lNe]=r.current,n&&0!==t&&iAe(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function jDe(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function HDe(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new zDe(e,0,t?{hydrate:!0}:void 0)}function GDe(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o._internalRoot;if("function"==typeof a){var s=a;a=function(){var e=UDe(i);s.call(e)}}LDe(t,i,e,a)}else{if(o=n._reactRootContainer=HDe(n,r),i=o._internalRoot,"function"==typeof a){var u=a;a=function(){var e=UDe(i);u.call(e)}}tDe((function(){LDe(t,i,e,a)}))}return UDe(i)}function KDe(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_Se,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qDe(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!jDe(t))throw Error(REe(200));return KDe(e,t,null,n)}zDe.prototype.render=function(e){LDe(e,this._internalRoot,null,null)},zDe.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;LDe(null,e,null,(function(){t[lNe]=null}))},qTe=function(e){if(13===e.tag){var t=DRe(GMe(),150,100);qMe(e,t),WDe(e,t)}},XTe=function(e){13===e.tag&&(qMe(e,3),WDe(e,3))},QTe=function(e){if(13===e.tag){var t=GMe();qMe(e,t=KMe(t,e,null)),WDe(e,t)}},eSe=function(e,t,n){switch(t){case"input":if(nTe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=hNe(r);if(!a)throw Error(REe(90));ZSe(r),nTe(r,a)}}}break;case"textarea":lTe(e,n);break;case"select":null!=(t=n.value)&&sTe(e,!!n.multiple,t,!1)}},iSe=eDe,sSe=function(e,t,n,r,a){var o=kMe;kMe|=4;try{return _Re(98,e.bind(null,t,n,r,a))}finally{(kMe=o)===dMe&&FRe()}},uSe=function(){(kMe&(1|pMe|hMe))===dMe&&(JMe(),mDe())},cSe=function(e,t){var n=kMe;kMe|=2;try{return e(t)}finally{(kMe=n)===dMe&&FRe()}};var XDe={Events:[fNe,pNe,hNe,ZEe,QEe,kNe,function(e){BTe(e,xNe)},aSe,oSe,RAe,UTe,mDe,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;IDe(cb({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ESe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=MTe(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:dNe,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});var QDe=XDe,YDe=qDe,$De=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(REe(188));throw Error(REe(268,Object.keys(e)))}return e=null===(e=MTe(t))?null:e.stateNode},ZDe=function(e,t){if((kMe&(pMe|hMe))!==dMe)throw Error(REe(187));var n=kMe;kMe|=1;try{return _Re(99,e.bind(null,t))}finally{kMe=n,FRe()}},JDe=function(e,t,n){if(!jDe(t))throw Error(REe(200));return GDe(null,e,t,!0,n)},eBe=function(e,t,n){if(!jDe(t))throw Error(REe(200));return GDe(null,e,t,!1,n)},tBe=function(e){if(!jDe(e))throw Error(REe(40));return!!e._reactRootContainer&&(tDe((function(){GDe(null,null,e,!1,(function(){e._reactRootContainer=null,e[lNe]=null}))})),!0)},nBe=eDe,rBe=function(e,t){return qDe(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},aBe=function(e,t,n,r){if(!jDe(n))throw Error(REe(200));if(null==e||void 0===e._reactInternalFiber)throw Error(REe(38));return GDe(e,t,n,!1,r)},oBe="16.14.0",iBe={__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:QDe,createPortal:YDe,findDOMNode:$De,flushSync:ZDe,hydrate:JDe,render:eBe,unmountComponentAtNode:tBe,unstable_batchedUpdates:nBe,unstable_createPortal:rBe,unstable_renderSubtreeIntoContainer:aBe,version:oBe},sBe=0,uBe=null,cBe=null,lBe=function(e){return e()},dBe=function(){return null},fBe=function(){return++sBe},pBe=function(){},hBe=function(e,t,n){return n()},mBe=function(){},gBe=function(e){return e},vBe={__interactionsRef:uBe,__subscriberRef:cBe,unstable_clear:lBe,unstable_getCurrent:dBe,unstable_getThreadID:fBe,unstable_subscribe:pBe,unstable_trace:hBe,unstable_unsubscribe:mBe,unstable_wrap:gBe},yBe=(i((function(e,t){})),i((function(e){e.exports=vBe})),i((function(e,t){})),i((function(e){!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=iBe}))),bBe=function(e,t,n,r,a,o,i,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,o,i,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}},xBe=bBe,kBe=i((function(e,t){!function(e,t){t=t&&t.hasOwnProperty("default")?t.default:t;var n=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/read_id_card_info_sync",e,t)},e}(),r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};
/*! *****************************************************************************
	  Copyright (c) Microsoft Corporation. All rights reserved.
	  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	  this file except in compliance with the License. You may obtain a copy of the
	  License at http://www.apache.org/licenses/LICENSE-2.0

	  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	  MERCHANTABLITY OR NON-INFRINGEMENT.

	  See the Apache Version 2.0 License for specific language governing permissions
	  and limitations under the License.
	  ***************************************************************************** */function o(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}function i(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function s(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var c=function(){function e(e){this.httpClient=e}return e.prototype.uploadImage=function(e){return this.httpClient.postFormData("/v1/images",e)},e.prototype.request=function(e){var t="application/pdf"===e.file.type;return this.httpClient.postFormData(t?"/v1/files":"/v1/images",e)},e.prototype.requestWithHeaders=function(e,t){return this.httpClient.postFormData("/v1/images",e,t)},e.prototype.download=function(e){return s(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.downloadFile("/v1/images/"+e)];case 1:return t=n.sent(),[4,URL.createObjectURL(t)];case 2:return[2,n.sent()]}}))}))},e.prototype.updateMetadata=function(e,t){return this.httpClient.patch("/v1/images/"+e,t)},e}(),l=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/files",e,t)},e.prototype.uploadFile=function(e){return this.httpClient.postFormData("/v1/files",e)},e.prototype.requestWithHeaders=function(e,t){return this.httpClient.postFormData("/v1/files",e,t)},e}(),d=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/compare_faces_sync",e,t)},e}(),f=function(){function e(e){this.httpClient=e}return e.prototype.getClientSettings=function(){return this.httpClient.get("/v1/client_settings")},e.prototype.request=function(){return this.httpClient.get("/v1/client_settings")},e}(),p=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/verify_face_liveness_sync",e,t)},e}(),h=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/verify_id_card_sanity_sync",e,t)},e}(),m=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/verify_portrait_sanity_sync",e,t)},e}(),g=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/detect_id_card_tampering_sync",e,t)},e.prototype.requestWithAuthHeaders=function(e,t){return this.httpClient.post("/v1/detect_id_card_tampering_sync",e,t)},e}(),v=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/search_faces_sync",e,t)},e.prototype.indexFaces=function(e,t){return this.httpClient.post("/v1/index_faces_sync",e,t)},e.prototype.deleteFaces=function(e,t){return this.httpClient.post("/v1/delete_faces",e,t)},e.prototype.downloadFaceImage=function(e){return s(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.downloadFile("/v1/face_images/"+e)];case 1:return t=n.sent(),[2,URL.createObjectURL(t)]}}))}))},e}(),y=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.postFormData("/v1/convert_pdf_sync",e,t)},e}(),b=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/ekyc_pdf",e,t)},e}(),x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==a?a:"undefined"!=typeof self?self:{};function k(e,t){return e(t={exports:{}},t.exports),t.exports}var w=k((function(e){var t,n;t=x,n=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var n=e.shift();e[0]=n+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<e.length;r++){var a=e[r];if("string"!=typeof a)throw new TypeError("Url must be a string. Received "+a);""!==a&&(r>0&&(a=a.replace(/^[\/]+/,"")),a=r<e.length-1?a.replace(/[\/]+$/,""):a.replace(/[\/]+$/,"/"),t.push(a))}var o=t.join("/"),i=(o=o.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return i.shift()+(i.length>0?"?":"")+i.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=n():t.urljoin=n()}));function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var C=function(e,t,n,r){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var o=/\+/g;e=e.split(t);var i=1e3;r&&"number"==typeof r.maxKeys&&(i=r.maxKeys);var s=e.length;i>0&&s>i&&(s=i);for(var u=0;u<s;++u){var c,l,d,f,p=e[u].replace(o,"%20"),h=p.indexOf(n);h>=0?(c=p.substr(0,h),l=p.substr(h+1)):(c=p,l=""),d=decodeURIComponent(c),f=decodeURIComponent(l),I(a,d)?Array.isArray(a[d])?a[d].push(f):a[d]=[a[d],f]:a[d]=f}return a},E=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},S=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(r){var a=encodeURIComponent(E(r))+n;return Array.isArray(e[r])?e[r].map((function(e){return a+encodeURIComponent(E(e))})).join(t):a+encodeURIComponent(E(e[r]))})).join(t):r?encodeURIComponent(E(r))+n+encodeURIComponent(E(e)):""},T=k((function(e,t){t.decode=t.parse=C,t.encode=t.stringify=S})),A=(T.decode,T.parse,T.encode,T.stringify),N=function(){function e(e){this.authorizer=e.authorizer,this.domain=e.domain,this.onError=e.onError,this.configHeaders=e.headers}return e.prototype.get=function(e,t,n){var r=new URL(this.resolveUrl(e));return t&&(r.search=A(t)),this.request(r.toString(),{requestPath:e,method:"GET",headers:n})},e.prototype.post=function(e,t,n){var a=this.resolveUrl(e);return this.request(a,{requestPath:e,method:"POST",body:JSON.stringify(t),headers:r({"Content-Type":"application/json"},n)})},e.prototype.postFormData=function(e,t,n){var r,a=t instanceof FormData?t:(r=t,Object.entries(r).reduce((function(e,t){var n=t[0],r=t[1];return Array.isArray(r)?r.forEach((function(t,a){return e.append(n+"["+a+"]",r)})):!(r instanceof Object)||r instanceof File||r instanceof Date||r instanceof Blob?e.append(n,r):Object.entries(r).forEach((function(t,a){return e.append(n+"["+a+"]",r[a])})),e}),new FormData)),o=this.resolveUrl(e);return this.request(o,{requestPath:e,method:"POST",body:a,headers:n})},e.prototype.patch=function(e,t,n){var a=this.resolveUrl(e);return this.request(a,{requestPath:e,method:"PATCH",body:JSON.stringify(t),headers:r({"Content-Type":"application/json"},n)})},e.prototype.delete=function(e,t,n){var a=this.resolveUrl(e);return this.request(a,{requestPath:e,method:"DELETE",body:JSON.stringify(t),headers:r({"Content-Type":"application/json"},n)})},e.prototype.downloadFile=function(e){var t=this.resolveUrl(e);return this.request(t,{requestPath:e,method:"GET"},"blob")},e.prototype.request=function(e,t,n){return void 0===n&&(n="json"),s(this,void 0,void 0,(function(){var a,o,i,s;return u(this,(function(u){switch(u.label){case 0:return a={},o={},this.authorizer&&(a=this.authorizer.getHeaders(t)),this.configHeaders&&(o=this.configHeaders),t.headers=r(r(r({},t.headers),a),o),[4,fetch(e,t)];case 1:return i=u.sent(),[4,"blob"===n?i.blob():i.json()];case 2:if((s=u.sent()).errors&&this.onError)throw this.onError(s.errors),s;return[2,s]}}))}))},e.prototype.resolveUrl=function(e){return w(this.domain,e)},e}(),_=function(){function e(e){this.mocks=e}return e.prototype.get=function(e,t){return this.findInMocks(e,t)},e.prototype.post=function(e,t){return this.findInMocks(e)},e.prototype.postFormData=function(e,t){return this.findInMocks(e)},e.prototype.patch=function(e,t){return this.findInMocks(e)},e.prototype.delete=function(e,t){return this.findInMocks(e)},e.prototype.downloadFile=function(e){return this.findInMocks(e)},e.prototype.resolveUrl=function(e){return this.mocks.resolveUrl?this.mocks.resolveUrl(e):e},e.prototype.findInMocks=function(e,t){return s(this,void 0,void 0,(function(){return u(this,(function(n){return this.mocks[e]?"function"==typeof this.mocks[e]?[2,Promise.resolve(this.mocks[e](t))]:[2,Promise.resolve(this.mocks[e])]:[2,Promise.reject(new Error(e+" is not presented in mocks"))]}))}))},e}(),R=k((function(e,t){var n;e.exports=n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},a=r.lib={},o=a.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},i=a.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,a=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<a;o++){var i=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=i<<24-(r+o)%4*8}else for(o=0;o<a;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],a=function(t){t=t;var n=987654321,r=4294967295;return function(){var a=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return a/=4294967296,(a+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var s=a(4294967296*(n||e.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new i.init(r,t)}}),s=r.enc={},u=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var o=t[a>>>2]>>>24-a%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new i.init(n,t/2)}},c=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var o=t[a>>>2]>>>24-a%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new i.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=a.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,o=this.blockSize,s=a/(4*o),u=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*o,c=e.min(4*u,a);if(u){for(var l=0;l<u;l+=o)this._doProcessBlock(r,l);var d=r.splice(0,u);n.sigBytes-=c}return new i.init(d,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(a.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math)})),O=k((function(e,t){var n,r,a;e.exports=(r=(n=a=R).lib.WordArray,n.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var a=[],o=0;o<n;o+=3)for(var i=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)a.push(r.charAt(i>>>6*(3-s)&63));var u=r.charAt(64);if(u)for(;a.length%4;)a.push(u);return a.join("")},parse:function(e){var t=e.length,n=this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var o=0;o<n.length;o++)a[n.charCodeAt(o)]=o}var i=n.charAt(64);if(i){var s=e.indexOf(i);-1!==s&&(t=s)}return function(e,t,n){for(var a=[],o=0,i=0;i<t;i++)if(i%4){var s=n[e.charCodeAt(i-1)]<<i%4*2,u=n[e.charCodeAt(i)]>>>6-i%4*2;a[o>>>2]|=(s|u)<<24-o%4*8,o++}return r.create(a,o)}(e,t,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},a.enc.Base64)})),F=(k((function(e,t){var n;e.exports=(n=R,function(e){var t=n,r=t.lib,a=r.WordArray,o=r.Hasher,i=t.algo,s=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,a=0;a<64;)t(r)&&(a<8&&(s[a]=n(e.pow(r,.5))),u[a]=n(e.pow(r,1/3)),a++),r++}();var c=[],l=i.SHA256=o.extend({_doReset:function(){this._hash=new a.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],o=n[2],i=n[3],s=n[4],l=n[5],d=n[6],f=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var h=c[p-15],m=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=c[p-2],v=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[p]=m+c[p-7]+v+c[p-16]}var y=r&a^r&o^a&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),x=f+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&d)+u[p]+c[p];f=d,d=l,l=s,s=i+x|0,i=o,o=a,a=r,r=x+(b+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+o|0,n[3]=n[3]+i|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;return n[a>>>5]|=128<<24-a%32,n[14+(a+64>>>9<<4)]=e.floor(r/4294967296),n[15+(a+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),n.SHA256)})),k((function(e,t){var n,r,a;e.exports=(r=(n=R).lib.Base,a=n.enc.Utf8,void(n.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),i=this._iKey=t.clone(),s=o.words,u=i.words,c=0;c<n;c++)s[c]^=1549556828,u[c]^=909522486;o.sigBytes=i.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))})),k((function(e,t){e.exports=R.HmacSHA256}))),M=function(){function e(e,t){this.accessKey=e,this.keySecret=t}return e.prototype.getHeaders=function(e){var t=function(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+(0===(n=e.getTimezoneOffset())?"Z":(r=n>0?"-":"+",n=Math.abs(n),r+t(Math.floor(n/60))+":"+t(n%60)));var n,r}(new Date);return{Authorization:this.generateAuthorization(e.requestPath,e.method,t),"X-TV-Timestamp":t}},e.prototype.generateAuthorization=function(e,t,n){var r=this.computeStringToSign(e,t,n),a=O.stringify(this.computeSignature(r));return this.formatAuthToken("TV",a)},e.prototype.formatAuthToken=function(e,t){return e+" "+this.accessKey+":"+t},e.prototype.computeStringToSign=function(e,t,n){return t+"\n"+e+"\n"+n},e.prototype.computeSignature=function(e){return F(e,this.keySecret)},e}();function D(e){switch(e){case"testing":return"https://tv-testing.trustingsocial.com/api";case"staging":return"https://tv-staging.trustingsocial.com/api";case"production":return"https://vn-vision.trustingsocial.com/api";default:return e}}function B(e,t,n,r){void 0===n&&(n="production");var a=(void 0===r?{}:r).headers,o=new M(e,t),i=D(n);return new N({authorizer:o,domain:i,headers:a})}var P=function(){function e(e){void 0===e&&(e="production");var t=new N({domain:D(e)});this.imagesService=new c(t),this.detectIDTamperingService=new g(t)}return e.prototype.uploadImage=function(e,t){return this.imagesService.requestWithHeaders(e,t)},e.prototype.detectTampering=function(e,t){return this.detectIDTamperingService.requestWithAuthHeaders(e,t)},e}();function L(e){var t=e.headerIndex;return function(e,n,a){var o=a.value,i=r({},a);return i.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return s(this,void 0,void 0,(function(){var n,a,i,s;return u(this,(function(u){switch(u.label){case 0:return this.transactionEnabled?[4,this.transactionManager.begin()]:[3,4];case 1:return n=u.sent(),a=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r}(e),(i=r({},a[t]))["X-TV-Transaction"]=n,a[t]=i,[4,o.apply(this,a)];case 2:return s=u.sent(),[4,this.transactionManager.end()];case 3:return u.sent(),[2,s];case 4:return[4,o.apply(this,e)];case 5:return[2,u.sent()]}}))}))},i}}function U(e){return void 0===e&&(e={encryptedField:"data"}),function(t,n,a){var o=a.value,i=r({},a);return i.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return s(this,void 0,void 0,(function(){var n,r;return u(this,(function(a){switch(a.label){case 0:return[4,o.apply(this,t)];case 1:return n=a.sent(),this.encryptionEnabled&&"string"==typeof n[e.encryptedField]?(r=this.encryptionService.decrypt(n[e.encryptedField],{transactionID:this.transactionManager.currentTransactionID}),[2,JSON.parse(r)]):[2,n]}}))}))},i}}var V=function(){function e(e){this.httpClient=e,this.transactionID="",this.totalTransactions=0,this.currentTransaction=0}return Object.defineProperty(e.prototype,"currentTransactionID",{get:function(){return this.transactionID},enumerable:!0,configurable:!0}),e.prototype.begin=function(){return s(this,void 0,void 0,(function(){var e,t,n=this;return u(this,(function(r){switch(r.label){case 0:return e=this.totalTransactions++,[4,new Promise((function(t,r){var a=window.performance.now(),o=setInterval((function(){e===n.currentTransaction&&(clearInterval(o),t(!0)),window.performance.now()-a>=3e3&&(clearInterval(o),r(new Error("Transaction timeout")))}),100)}))];case 1:return r.sent(),[4,this.httpClient.post("/v1/transactions",{})];case 2:return t=r.sent().data,this.transactionID=t.id,[2,t.id]}}))}))},e.prototype.end=function(){return s(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v1/transactions/"+this.transactionID+"/finish")];case 1:return e=t.sent(),this.transactionID="",this.currentTransaction++,[2,e]}}))}))},e}(),W={options:{usePureJavaScript:!1}},z={},j=z,H={};z.encode=function(e,t,n){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==n&&"number"!=typeof n)throw new TypeError('"maxline" must be a number.');var r="";if(e instanceof Uint8Array){var a=0,o=t.length,i=t.charAt(0),s=[0];for(a=0;a<e.length;++a){for(var u=0,c=e[a];u<s.length;++u)c+=s[u]<<8,s[u]=c%o,c=c/o|0;for(;c>0;)s.push(c%o),c=c/o|0}for(a=0;0===e[a]&&a<e.length-1;++a)r+=i;for(a=s.length-1;a>=0;--a)r+=t[s[a]]}else r=function(e,t){var n=0,r=t.length,a=t.charAt(0),o=[0];for(n=0;n<e.length();++n){for(var i=0,s=e.at(n);i<o.length;++i)s+=o[i]<<8,o[i]=s%r,s=s/r|0;for(;s>0;)o.push(s%r),s=s/r|0}var u="";for(n=0;0===e.at(n)&&n<e.length()-1;++n)u+=a;for(n=o.length-1;n>=0;--n)u+=t[o[n]];return u}(e,t);if(n){var l=new RegExp(".{1,"+n+"}","g");r=r.match(l).join("\r\n")}return r},z.decode=function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');var n=H[t];if(!n){n=H[t]=[];for(var r=0;r<t.length;++r)n[t.charCodeAt(r)]=r}e=e.replace(/\s/g,"");var a=t.length,o=t.charAt(0),i=[0];for(r=0;r<e.length;r++){var s=n[e.charCodeAt(r)];if(void 0===s)return;for(var u=0,c=s;u<i.length;++u)c+=i[u]*a,i[u]=255&c,c>>=8;for(;c>0;)i.push(255&c),c>>=8}for(var l=0;e[l]===o&&l<e.length-1;++l)i.push(0);return"undefined"!=typeof Buffer?Buffer.from(i.reverse()):new Uint8Array(i.reverse())},k((function(e){var t=e.exports=W.util=W.util||{};function n(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function r(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(t.isArrayBuffer(e)||t.isArrayBufferView(e))if("undefined"!=typeof Buffer&&e instanceof Buffer)this.data=e.toString("binary");else{var n=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,n)}catch(e){for(var a=0;a<n.length;++a)this.putByte(n[a])}}else(e instanceof r||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return t.nextTick=process.nextTick,void("function"==typeof setImmediate?t.setImmediate=setImmediate:t.setImmediate=t.nextTick);if("function"==typeof setImmediate)return t.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(t.nextTick=function(e){return setImmediate(e)});if(t.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",n=[];t.setImmediate=function(t){n.push(t),1===n.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(t){if(t.source===window&&t.data===e){t.stopPropagation();var r=n.slice();n.length=0,r.forEach((function(e){e()}))}}),!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),a=!0,o=document.createElement("div");n=[],new MutationObserver((function(){var e=n.slice();n.length=0,e.forEach((function(e){e()}))})).observe(o,{attributes:!0});var i=t.setImmediate;t.setImmediate=function(e){Date.now()-r>15?(r=Date.now(),i(e)):(n.push(e),1===n.length&&o.setAttribute("a",a=!a))}}t.nextTick=t.setImmediate}(),t.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,t.globalScope=t.isNodejs?x:"undefined"==typeof self?window:self,t.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},t.isArrayBufferView=function(e){return e&&t.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},t.ByteBuffer=r,t.ByteStringBuffer=r,t.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},t.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},t.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},t.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},t.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var n=this.data;t>0;)1&t&&(n+=e),(t>>>=1)>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this},t.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},t.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(t.encodeUtf8(e))},t.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},t.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},t.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},t.ByteStringBuffer.prototype.putInt=function(e,t){n(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},t.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},t.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},t.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},t.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},t.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},t.ByteStringBuffer.prototype.getInt=function(e){n(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},t.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},t.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},t.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},t.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},t.ByteStringBuffer.prototype.copy=function(){var e=t.createBuffer(this.data);return e.read=this.read,e},t.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},t.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},t.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},t.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e},t.ByteStringBuffer.prototype.toString=function(){return t.decodeUtf8(this.bytes())},t.DataBuffer=function(e,n){n=n||{},this.read=n.readOffset||0,this.growSize=n.growSize||1024;var r=t.isArrayBuffer(e),a=t.isArrayBufferView(e);if(r||a)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in n?n.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in n&&(this.write=n.writeOffset)},t.DataBuffer.prototype.length=function(){return this.write-this.read},t.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},t.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+t);return r.set(n),this.data=new DataView(r.buffer),this},t.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},t.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this},t.DataBuffer.prototype.putBytes=function(e,n){if(t.isArrayBufferView(e)){var r=(a=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-a.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(a),this.write+=r,this}if(t.isArrayBuffer(e)){var a=new Uint8Array(e);return this.accommodate(a.byteLength),new Uint8Array(this.data.buffer).set(a,this.write),this.write+=a.byteLength,this}if(e instanceof t.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&t.isArrayBufferView(e.data))return a=new Uint8Array(e.data.byteLength,e.read,e.length()),this.accommodate(a.byteLength),new Uint8Array(e.data.byteLength,this.write).set(a),this.write+=a.byteLength,this;if(e instanceof t.ByteStringBuffer&&(e=e.data,n="binary"),n=n||"binary","string"==typeof e){var o;if("hex"===n)return this.accommodate(Math.ceil(e.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.hex.decode(e,o,this.write),this;if("base64"===n)return this.accommodate(3*Math.ceil(e.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.base64.decode(e,o,this.write),this;if("utf8"===n&&(e=t.encodeUtf8(e),n="binary"),"binary"===n||"raw"===n)return this.accommodate(e.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.raw.decode(o),this;if("utf16"===n)return this.accommodate(2*e.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=t.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+n)}throw Error("Invalid parameter: "+e)},t.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},t.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},t.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},t.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},t.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},t.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},t.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},t.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},t.DataBuffer.prototype.putInt=function(e,t){n(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},t.DataBuffer.prototype.putSignedInt=function(e,t){return n(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},t.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},t.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},t.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},t.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},t.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},t.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},t.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},t.DataBuffer.prototype.getInt=function(e){n(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},t.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},t.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},t.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},t.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},t.DataBuffer.prototype.copy=function(){return new t.DataBuffer(this)},t.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},t.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},t.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},t.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+="0"),e+=n.toString(16)}return e},t.DataBuffer.prototype.toString=function(e){var n=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return t.binary.raw.encode(n);if("hex"===e)return t.binary.hex.encode(n);if("base64"===e)return t.binary.base64.encode(n);if("utf8"===e)return t.text.utf8.decode(n);if("utf16"===e)return t.text.utf16.decode(n);throw new Error("Invalid encoding: "+e)},t.createBuffer=function(e,n){return n=n||"raw",void 0!==e&&"utf8"===n&&(e=t.encodeUtf8(e)),new t.ByteBuffer(e)},t.fillString=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>>=1)>0&&(e+=e);return n},t.xorBytes=function(e,t,n){for(var r="",a="",o="",i=0,s=0;n>0;--n,++i)a=e.charCodeAt(i)^t.charCodeAt(i),s>=10&&(r+=o,o="",s=0),o+=String.fromCharCode(a),++s;return r+o},t.hexToBytes=function(e){var t="",n=0;for(!0&e.length&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},t.bytesToHex=function(e){return t.createBuffer(e).toHex()},t.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";t.encode64=function(e,t){for(var n,r,o,i="",s="",u=0;u<e.length;)n=e.charCodeAt(u++),r=e.charCodeAt(u++),o=e.charCodeAt(u++),i+=a.charAt(n>>2),i+=a.charAt((3&n)<<4|r>>4),isNaN(r)?i+="==":(i+=a.charAt((15&r)<<2|o>>6),i+=isNaN(o)?"=":a.charAt(63&o)),t&&i.length>t&&(s+=i.substr(0,t)+"\r\n",i=i.substr(t));return s+i},t.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,n,r,a,i="",s=0;s<e.length;)t=o[e.charCodeAt(s++)-43],n=o[e.charCodeAt(s++)-43],r=o[e.charCodeAt(s++)-43],a=o[e.charCodeAt(s++)-43],i+=String.fromCharCode(t<<2|n>>4),64!==r&&(i+=String.fromCharCode((15&n)<<4|r>>2),64!==a&&(i+=String.fromCharCode((3&r)<<6|a)));return i},t.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},t.decodeUtf8=function(e){return decodeURIComponent(escape(e))},t.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:j.encode,decode:j.decode}},t.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},t.binary.raw.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length));for(var a=n=n||0,o=0;o<e.length;++o)r[a++]=e.charCodeAt(o);return t?a-n:r},t.binary.hex.encode=t.bytesToHex,t.binary.hex.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/2)));var a=0,o=n=n||0;for(1&e.length&&(a=1,r[o++]=parseInt(e[0],16));a<e.length;a+=2)r[o++]=parseInt(e.substr(a,2),16);return t?o-n:r},t.binary.base64.encode=function(e,t){for(var n,r,o,i="",s="",u=0;u<e.byteLength;)n=e[u++],r=e[u++],o=e[u++],i+=a.charAt(n>>2),i+=a.charAt((3&n)<<4|r>>4),isNaN(r)?i+="==":(i+=a.charAt((15&r)<<2|o>>6),i+=isNaN(o)?"=":a.charAt(63&o)),t&&i.length>t&&(s+=i.substr(0,t)+"\r\n",i=i.substr(t));return s+i},t.binary.base64.decode=function(e,t,n){var r,a,i,s,u=t;u||(u=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var c=0,l=n=n||0;c<e.length;)r=o[e.charCodeAt(c++)-43],a=o[e.charCodeAt(c++)-43],i=o[e.charCodeAt(c++)-43],s=o[e.charCodeAt(c++)-43],u[l++]=r<<2|a>>4,64!==i&&(u[l++]=(15&a)<<4|i>>2,64!==s&&(u[l++]=(3&i)<<6|s));return t?l-n:u.subarray(0,l)},t.binary.base58.encode=function(e,n){return t.binary.baseN.encode(e,i,n)},t.binary.base58.decode=function(e,n){return t.binary.baseN.decode(e,i,n)},t.text={utf8:{},utf16:{}},t.text.utf8.encode=function(e,n,r){e=t.encodeUtf8(e);var a=n;a||(a=new Uint8Array(e.length));for(var o=r=r||0,i=0;i<e.length;++i)a[o++]=e.charCodeAt(i);return n?o-r:a},t.text.utf8.decode=function(e){return t.decodeUtf8(String.fromCharCode.apply(null,e))},t.text.utf16.encode=function(e,t,n){var r=t;r||(r=new Uint8Array(2*e.length));for(var a=new Uint16Array(r.buffer),o=n=n||0,i=n,s=0;s<e.length;++s)a[i++]=e.charCodeAt(s),o+=2;return t?o-n:r},t.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},t.deflate=function(e,n,r){if(n=t.decode64(e.deflate(t.encode64(n)).rval),r){var a=2;32&n.charCodeAt(1)&&(a=6),n=n.substring(a,n.length-4)}return n},t.inflate=function(e,n,r){var a=e.inflate(t.encode64(n)).rval;return null===a?null:t.decode64(a)};var s=function(e,n,r){if(!e)throw new Error("WebStorage not available.");var a;if(null===r?a=e.removeItem(n):(r=t.encode64(JSON.stringify(r)),a=e.setItem(n,r)),void 0!==a&&!0!==a.rval){var o=new Error(a.error.message);throw o.id=a.error.id,o.name=a.error.name,o}},u=function(e,n){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(n);if(e.init)if(null===r.rval){if(r.error){var a=new Error(r.error.message);throw a.id=r.error.id,a.name=r.error.name,a}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(t.decode64(r))),r},c=function(e,t,n,r){var a=u(e,t);null===a&&(a={}),a[n]=r,s(e,t,a)},l=function(e,t,n){var r=u(e,t);return null!==r&&(r=n in r?r[n]:null),r},d=function(e,t,n){var r=u(e,t);if(null!==r&&n in r){delete r[n];var a=!0;for(var o in r){a=!1;break}a&&(r=null),s(e,t,r)}},f=function(e,t){s(e,t,null)},p=function(e,t,n){var r,a=null;void 0===n&&(n=["web","flash"]);var o=!1,i=null;for(var s in n){r=n[s];try{if("flash"===r||"both"===r){if(null===t[0])throw new Error("Flash local storage not available.");a=e.apply(this,t),o="flash"===r}"web"!==r&&"both"!==r||(t[0]=localStorage,a=e.apply(this,t),o=!0)}catch(e){i=e}if(o)break}if(!o)throw i;return a};t.setItem=function(e,t,n,r,a){p(c,arguments,a)},t.getItem=function(e,t,n,r){return p(l,arguments,r)},t.removeItem=function(e,t,n,r){p(d,arguments,r)},t.clearItems=function(e,t,n){p(f,arguments,n)},t.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var n=t.exec(e),r=null===n?null:{full:e,scheme:n[1],host:n[2],port:n[3],path:n[4]};return r&&(r.fullHost=r.host,r.port?(80!==r.port&&"http"===r.scheme||443!==r.port&&"https"===r.scheme)&&(r.fullHost+=":"+r.port):"http"===r.scheme?r.port=80:"https"===r.scheme&&(r.port=443),r.full=r.scheme+"://"+r.fullHost),r};var h=null;t.getQueryVariables=function(e){var t,n=function(e){for(var t={},n=e.split("&"),r=0;r<n.length;r++){var a,o,i=n[r].indexOf("=");i>0?(a=n[r].substring(0,i),o=n[r].substring(i+1)):(a=n[r],o=null),a in t||(t[a]=[]),a in Object.prototype||null===o||t[a].push(unescape(o))}return t};return void 0===e?(null===h&&(h="undefined"!=typeof window&&window.location&&window.location.search?n(window.location.search.substring(1)):{}),t=h):t=n(e),t},t.parseFragment=function(e){var n=e,r="",a=e.indexOf("?");a>0&&(n=e.substring(0,a),r=e.substring(a+1));var o=n.split("/");return o.length>0&&""===o[0]&&o.shift(),{pathString:n,queryString:r,path:o,query:""===r?{}:t.getQueryVariables(r)}},t.makeRequest=function(e){var n=t.parseFragment(e),r={path:n.pathString,query:n.queryString,getPath:function(e){return void 0===e?n.path:n.path[e]},getQuery:function(e,t){var r;return void 0===e?r=n.query:(r=n.query[e])&&void 0!==t&&(r=r[t]),r},getQueryLast:function(e,t){var n=r.getQuery(e);return n?n[n.length-1]:t}};return r},t.makeLink=function(e,t,n){e=jQuery.isArray(e)?e.join("/"):e;var r=jQuery.param(t||{});return n=n||"",e+(r.length>0?"?"+r:"")+(n.length>0?"#"+n:"")},t.setPath=function(e,t,n){if("object"==typeof e&&null!==e)for(var r=0,a=t.length;r<a;){var o=t[r++];if(r==a)e[o]=n;else{var i=o in e;(!i||i&&"object"!=typeof e[o]||i&&null===e[o])&&(e[o]={}),e=e[o]}}},t.getPath=function(e,t,n){for(var r=0,a=t.length,o=!0;o&&r<a&&"object"==typeof e&&null!==e;){var i=t[r++];(o=i in e)&&(e=e[i])}return o?e:n},t.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var n=0,r=t.length;n<r;){var a=t[n++];if(n==r)delete e[a];else{if(!(a in e)||"object"!=typeof e[a]||null===e[a])break;e=e[a]}}},t.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.format=function(e){for(var t,n,r=/%./g,a=0,o=[],i=0;t=r.exec(e);){(n=e.substring(i,r.lastIndex-2)).length>0&&o.push(n),i=r.lastIndex;var s=t[0][1];switch(s){case"s":case"o":a<arguments.length?o.push(arguments[1+a++]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+s+"?>")}}return o.push(e.substring(i)),o.join("")},t.formatNumber=function(e,t,n,r){var a=e,o=isNaN(t=Math.abs(t))?2:t,i=void 0===n?",":n,s=void 0===r?".":r,u=a<0?"-":"",c=parseInt(a=Math.abs(+a||0).toFixed(o),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+s:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(o?i+Math.abs(a-c).toFixed(o).slice(2):"")},t.formatSize=function(e){return e>=1073741824?t.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?t.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?t.formatNumber(e/1024,0)+" KiB":t.formatNumber(e,0)+" bytes"},t.bytesFromIP=function(e){return-1!==e.indexOf(".")?t.bytesFromIPv4(e):-1!==e.indexOf(":")?t.bytesFromIPv6(e):null},t.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var n=t.createBuffer(),r=0;r<e.length;++r){var a=parseInt(e[r],10);if(isNaN(a))return null;n.putByte(a)}return n.getBytes()},t.bytesFromIPv6=function(e){for(var n=0,r=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++n,!0}))).length+n),a=t.createBuffer(),o=0;o<8;++o)if(e[o]&&0!==e[o].length){var i=t.hexToBytes(e[o]);i.length<2&&a.putByte(0),a.putBytes(i)}else a.fillWithByte(0,r),r=0;return a.getBytes()},t.bytesToIP=function(e){return 4===e.length?t.bytesToIPv4(e):16===e.length?t.bytesToIPv6(e):null},t.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")},t.bytesToIPv6=function(e){if(16!==e.length)return null;for(var n=[],r=[],a=0,o=0;o<e.length;o+=2){for(var i=t.bytesToHex(e[o]+e[o+1]);"0"===i[0]&&"0"!==i;)i=i.substr(1);if("0"===i){var s=r[r.length-1],u=n.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[a].end-r[a].start&&(a=r.length-1)):r.push({start:u,end:u})}n.push(i)}if(r.length>0){var c=r[a];c.end-c.start>0&&(n.splice(c.start,c.end-c.start+1,""),0===c.start&&n.unshift(""),7===c.end&&n.push(""))}return n.join(":")},t.estimateCores=function(e,n){if("function"==typeof e&&(n=e,e={}),e=e||{},"cores"in t&&!e.update)return n(null,t.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return t.cores=navigator.hardwareConcurrency,n(null,t.cores);if("undefined"==typeof Worker)return t.cores=1,n(null,t.cores);if("undefined"==typeof Blob)return t.cores=2,n(null,t.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){var t=Date.now(),n=t+4;self.postMessage({st:t,et:n})}))}.toString(),")()"],{type:"application/javascript"}));!function e(a,o,i){if(0===o){var s=Math.floor(a.reduce((function(e,t){return e+t}),0)/a.length);return t.cores=Math.max(1,s),URL.revokeObjectURL(r),n(null,t.cores)}!function(e,t){for(var n=[],a=[],o=0;o<e;++o){var i=new Worker(r);i.addEventListener("message",(function(r){if(a.push(r.data),a.length===e){for(var o=0;o<e;++o)n[o].terminate();t(null,a)}})),n.push(i)}for(o=0;o<e;++o)n[o].postMessage(o)}(i,(function(t,n){a.push(function(e,t){for(var n=[],r=0;r<e;++r)for(var a=t[r],o=n[r]=[],i=0;i<e;++i)if(r!==i){var s=t[i];(a.st>s.st&&a.st<s.et||s.st>a.st&&s.st<a.et)&&o.push(i)}return n.reduce((function(e,t){return Math.max(e,t.length)}),0)}(i,n)),e(a,o-1,i)}))}([],5,16)}})),W.cipher=W.cipher||{},W.cipher.algorithms=W.cipher.algorithms||{},W.cipher.createCipher=function(e,t){var n=e;if("string"==typeof n&&(n=W.cipher.getAlgorithm(n))&&(n=n()),!n)throw new Error("Unsupported algorithm: "+e);return new W.cipher.BlockCipher({algorithm:n,key:t,decrypt:!1})},W.cipher.createDecipher=function(e,t){var n=e;if("string"==typeof n&&(n=W.cipher.getAlgorithm(n))&&(n=n()),!n)throw new Error("Unsupported algorithm: "+e);return new W.cipher.BlockCipher({algorithm:n,key:t,decrypt:!0})},W.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),W.cipher.algorithms[e]=t},W.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in W.cipher.algorithms?W.cipher.algorithms[e]:null};var G=W.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};function K(e,t){W.cipher.registerAlgorithm(e,(function(){return new W.aes.Algorithm(e,t)}))}G.prototype.start=function(e){e=e||{};var t={};for(var n in e)t[n]=e[n];t.decrypt=this._decrypt,this._finish=!1,this._input=W.util.createBuffer(),this.output=e.output||W.util.createBuffer(),this.mode.start(t)},G.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},G.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))},k((function(e){W.cipher=W.cipher||{};var t=e.exports=W.cipher.modes=W.cipher.modes||{};function n(e,t){if("string"==typeof e&&(e=W.util.createBuffer(e)),W.util.isArray(e)&&e.length>4){var n=e;e=W.util.createBuffer();for(var r=0;r<n.length;++r)e.putByte(n[r])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!W.util.isArray(e)){var a=[],o=t/4;for(r=0;r<o;++r)a.push(e.getInt32());e=a}return e}function r(e){e[e.length-1]=e[e.length-1]+1&4294967295}function a(e){return[e/4294967296|0,4294967295&e]}t.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.ecb.prototype.start=function(e){},t.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},t.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},t.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},t.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return!(r>this.blockSize<<2||(e.truncate(r),0))},t.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},t.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)t.putInt32(this._outBlock[r]);this._prev=this._outBlock},t.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)t.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)},t.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},t.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return!(r>this.blockSize<<2||(e.truncate(r),0))},t.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=W.util.createBuffer(),this._partialBytes=0},t.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.cfb.prototype.encrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32()^this._outBlock[a],t.putInt32(this._inBlock[a]);else{var o=(this.blockSize-r)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32()^this._outBlock[a],this._partialOutput.putInt32(this._partialBlock[a]);if(o>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},t.cfb.prototype.decrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32(),t.putInt32(this._inBlock[a]^this._outBlock[a]);else{var o=(this.blockSize-r)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[a]^this._outBlock[a]);if(o>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},t.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=W.util.createBuffer(),this._partialBytes=0},t.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ofb.prototype.encrypt=function(e,t,n){var r=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]),this._inBlock[a]=this._outBlock[a];else{var o=(this.blockSize-r)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(o>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._outBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},t.ofb.prototype.decrypt=t.ofb.prototype.encrypt,t.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=W.util.createBuffer(),this._partialBytes=0},t.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ctr.prototype.encrypt=function(e,t,n){var a=e.length();if(0===a)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize)for(var o=0;o<this._ints;++o)t.putInt32(e.getInt32()^this._outBlock[o]);else{var i=(this.blockSize-a)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(i>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!n)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}r(this._inBlock)},t.ctr.prototype.decrypt=t.ctr.prototype.encrypt,t.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=W.util.createBuffer(),this._partialBytes=0,this._R=3774873600},t.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,n=W.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?W.util.createBuffer(e.additionalData):W.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=W.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=n.length();if(12===o)this._j0=[n.getInt32(),n.getInt32(),n.getInt32(),1];else{for(this._j0=[0,0,0,0];n.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*o)))}this._inBlock=this._j0.slice(0),r(this._inBlock),this._partialBytes=0,t=W.util.createBuffer(t),this._aDataLength=a(8*t.length());var i=t.length()%this.blockSize;for(i&&t.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},t.gcm.prototype.encrypt=function(e,t,n){var a=e.length();if(0===a)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize){for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^=e.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-a)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(i<=0||n){if(n){var s=a%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),r(this._inBlock)},t.gcm.prototype.decrypt=function(e,t,n){var a=e.length();if(a<this.blockSize&&!(n&&a>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),r(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^this._hashBlock[o]);a<this.blockSize?this._cipherLength+=a%this.blockSize:this._cipherLength+=this.blockSize},t.gcm.prototype.afterFinish=function(e,t){var n=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=W.util.createBuffer();var r=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,r);var o=[];this.cipher.encrypt(this._j0,o);for(var i=0;i<this._ints;++i)this.tag.putInt32(this._s[i]^o[i]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n},t.gcm.prototype.multiply=function(e,t){for(var n=[0,0,0,0],r=t.slice(0),a=0;a<128;++a)e[a/32|0]&1<<31-a%32&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r);return n},t.gcm.prototype.pow=function(e,t){for(var n=1&e[3],r=3;r>0;--r)t[r]=e[r]>>>1|(1&e[r-1])<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)},t.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],n=0;n<32;++n){var r=e[n/8|0]>>>4*(7-n%8)&15,a=this._m[n][r];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t},t.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)},t.gcm.prototype.generateHashTable=function(e,t){for(var n=8/t,r=4*n,a=16*n,o=new Array(a),i=0;i<a;++i){var s=[0,0,0,0],u=(r-1-i%r)*t;s[i/r|0]=1<<t-1<<u,o[i]=this.generateSubHashTable(this.multiply(s,e),t)}return o},t.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,r=n>>>1,a=new Array(n);a[r]=e.slice(0);for(var o=r>>>1;o>0;)this.pow(a[2*o],a[o]=[]),o>>=1;for(o=2;o<r;){for(var i=1;i<o;++i){var s=a[o],u=a[i];a[o+i]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}o*=2}for(a[0]=[0,0,0,0],o=r+1;o<n;++o){var c=a[o^r];a[o]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return a}})),W.aes=W.aes||{},W.aes.startEncrypting=function(e,t,n,r){var a=re({key:e,output:n,decrypt:!1,mode:r});return a.start(t),a},W.aes.createEncryptionCipher=function(e,t){return re({key:e,output:null,decrypt:!1,mode:t})},W.aes.startDecrypting=function(e,t,n,r){var a=re({key:e,output:n,decrypt:!0,mode:r});return a.start(t),a},W.aes.createDecryptionCipher=function(e,t){return re({key:e,output:null,decrypt:!0,mode:t})},W.aes.Algorithm=function(e,t){Z||ee();var n=this;n.name=e,n.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return ne(n._w,e,t,!1)},decrypt:function(e,t){return ne(n._w,e,t,!0)}}}),n._init=!1},W.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,n=e.key;if("string"!=typeof n||16!==n.length&&24!==n.length&&32!==n.length){if(W.util.isArray(n)&&(16===n.length||24===n.length||32===n.length)){t=n,n=W.util.createBuffer();for(var r=0;r<t.length;++r)n.putByte(t[r])}}else n=W.util.createBuffer(n);if(!W.util.isArray(n)){t=n,n=[];var a=t.length();if(16===a||24===a||32===a)for(a>>>=2,r=0;r<a;++r)n.push(t.getInt32())}if(!W.util.isArray(n)||4!==n.length&&6!==n.length&&8!==n.length)throw new Error("Invalid key parameter.");var o=this.mode.name,i=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=te(n,e.decrypt&&!i),this._init=!0}},W.aes._expandKey=function(e,t){return Z||ee(),te(e,t)},W.aes._updateBlock=ne,K("AES-ECB",W.cipher.modes.ecb),K("AES-CBC",W.cipher.modes.cbc),K("AES-CFB",W.cipher.modes.cfb),K("AES-OFB",W.cipher.modes.ofb),K("AES-CTR",W.cipher.modes.ctr),K("AES-GCM",W.cipher.modes.gcm);var q,X,Q,Y,$,Z=!1,J=4;function ee(){Z=!0,Q=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;for(q=new Array(256),X=new Array(256),Y=new Array(4),$=new Array(4),t=0;t<4;++t)Y[t]=new Array(256),$[t]=new Array(256);var n,r,a,o,i,s,u,c=0,l=0;for(t=0;t<256;++t){o=(o=l^l<<1^l<<2^l<<3^l<<4)>>8^255&o^99,q[c]=o,X[o]=c,s=(i=e[o])<<24^o<<16^o<<8^o^i,u=((n=e[c])^(r=e[n])^(a=e[r]))<<24^(c^a)<<16^(c^r^a)<<8^c^n^a;for(var d=0;d<4;++d)Y[d][c]=s,$[d][o]=u,s=s<<24|s>>>8,u=u<<24|u>>>8;0===c?c=l=1:(c=n^e[e[e[n^a]]],l^=e[e[l]])}}function te(e,t){for(var n,r=e.slice(0),a=1,o=r.length,i=J*(o+6+1),s=o;s<i;++s)n=r[s-1],s%o==0?(n=q[n>>>16&255]<<24^q[n>>>8&255]<<16^q[255&n]<<8^q[n>>>24]^Q[a]<<24,a++):o>6&&s%o==4&&(n=q[n>>>24]<<24^q[n>>>16&255]<<16^q[n>>>8&255]<<8^q[255&n]),r[s]=r[s-o]^n;if(t){for(var u,c=$[0],l=$[1],d=$[2],f=$[3],p=r.slice(0),h=(s=0,(i=r.length)-J);s<i;s+=J,h-=J)if(0===s||s===i-J)p[s]=r[h],p[s+1]=r[h+3],p[s+2]=r[h+2],p[s+3]=r[h+1];else for(var m=0;m<J;++m)u=r[h+m],p[s+(3&-m)]=c[q[u>>>24]]^l[q[u>>>16&255]]^d[q[u>>>8&255]]^f[q[255&u]];r=p}return r}function ne(e,t,n,r){var a,o,i,s,u,c,l,d,f,p,h,m,g=e.length/4-1;r?(a=$[0],o=$[1],i=$[2],s=$[3],u=X):(a=Y[0],o=Y[1],i=Y[2],s=Y[3],u=q),c=t[0]^e[0],l=t[r?3:1]^e[1],d=t[2]^e[2],f=t[r?1:3]^e[3];for(var v=3,y=1;y<g;++y)p=a[c>>>24]^o[l>>>16&255]^i[d>>>8&255]^s[255&f]^e[++v],h=a[l>>>24]^o[d>>>16&255]^i[f>>>8&255]^s[255&c]^e[++v],m=a[d>>>24]^o[f>>>16&255]^i[c>>>8&255]^s[255&l]^e[++v],f=a[f>>>24]^o[c>>>16&255]^i[l>>>8&255]^s[255&d]^e[++v],c=p,l=h,d=m;n[0]=u[c>>>24]<<24^u[l>>>16&255]<<16^u[d>>>8&255]<<8^u[255&f]^e[++v],n[r?3:1]=u[l>>>24]<<24^u[d>>>16&255]<<16^u[f>>>8&255]<<8^u[255&c]^e[++v],n[2]=u[d>>>24]<<24^u[f>>>16&255]<<16^u[c>>>8&255]<<8^u[255&l]^e[++v],n[r?1:3]=u[f>>>24]<<24^u[c>>>16&255]<<16^u[l>>>8&255]<<8^u[255&d]^e[++v]}function re(e){var t,n="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),r=(t=e.decrypt?W.cipher.createDecipher(n,e.key):W.cipher.createCipher(n,e.key)).start;return t.start=function(e,n){var a=null;n instanceof W.util.ByteBuffer&&(a=n,n={}),(n=n||{}).output=a,n.iv=e,r.call(t,n)},t}function ae(e,t){W.cipher.registerAlgorithm(e,(function(){return new W.des.Algorithm(e,t)}))}k((function(e){W.pki=W.pki||{};var t=e.exports=W.pki.oids=W.oids=W.oids||{};function n(e,n){t[e]=n,t[n]=e}function r(e,n){t[e]=n}n("1.2.840.113549.1.1.1","rsaEncryption"),n("1.2.840.113549.1.1.4","md5WithRSAEncryption"),n("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),n("1.2.840.113549.1.1.7","RSAES-OAEP"),n("1.2.840.113549.1.1.8","mgf1"),n("1.2.840.113549.1.1.9","pSpecified"),n("1.2.840.113549.1.1.10","RSASSA-PSS"),n("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),n("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),n("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),n("1.3.101.112","EdDSA25519"),n("1.2.840.10040.4.3","dsa-with-sha1"),n("1.3.14.3.2.7","desCBC"),n("1.3.14.3.2.26","sha1"),n("2.16.840.1.101.3.4.2.1","sha256"),n("2.16.840.1.101.3.4.2.2","sha384"),n("2.16.840.1.101.3.4.2.3","sha512"),n("1.2.840.113549.2.5","md5"),n("1.2.840.113549.1.7.1","data"),n("1.2.840.113549.1.7.2","signedData"),n("1.2.840.113549.1.7.3","envelopedData"),n("1.2.840.113549.1.7.4","signedAndEnvelopedData"),n("1.2.840.113549.1.7.5","digestedData"),n("1.2.840.113549.1.7.6","encryptedData"),n("1.2.840.113549.1.9.1","emailAddress"),n("1.2.840.113549.1.9.2","unstructuredName"),n("1.2.840.113549.1.9.3","contentType"),n("1.2.840.113549.1.9.4","messageDigest"),n("1.2.840.113549.1.9.5","signingTime"),n("1.2.840.113549.1.9.6","counterSignature"),n("1.2.840.113549.1.9.7","challengePassword"),n("1.2.840.113549.1.9.8","unstructuredAddress"),n("1.2.840.113549.1.9.14","extensionRequest"),n("1.2.840.113549.1.9.20","friendlyName"),n("1.2.840.113549.1.9.21","localKeyId"),n("1.2.840.113549.1.9.22.1","x509Certificate"),n("1.2.840.113549.1.12.10.1.1","keyBag"),n("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),n("1.2.840.113549.1.12.10.1.3","certBag"),n("1.2.840.113549.1.12.10.1.4","crlBag"),n("1.2.840.113549.1.12.10.1.5","secretBag"),n("1.2.840.113549.1.12.10.1.6","safeContentsBag"),n("1.2.840.113549.1.5.13","pkcs5PBES2"),n("1.2.840.113549.1.5.12","pkcs5PBKDF2"),n("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),n("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),n("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),n("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),n("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),n("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),n("1.2.840.113549.2.7","hmacWithSHA1"),n("1.2.840.113549.2.8","hmacWithSHA224"),n("1.2.840.113549.2.9","hmacWithSHA256"),n("1.2.840.113549.2.10","hmacWithSHA384"),n("1.2.840.113549.2.11","hmacWithSHA512"),n("1.2.840.113549.3.7","des-EDE3-CBC"),n("2.16.840.1.101.3.4.1.2","aes128-CBC"),n("2.16.840.1.101.3.4.1.22","aes192-CBC"),n("2.16.840.1.101.3.4.1.42","aes256-CBC"),n("2.5.4.3","commonName"),n("2.5.4.5","serialName"),n("2.5.4.6","countryName"),n("2.5.4.7","localityName"),n("2.5.4.8","stateOrProvinceName"),n("2.5.4.9","streetAddress"),n("2.5.4.10","organizationName"),n("2.5.4.11","organizationalUnitName"),n("2.5.4.13","description"),n("2.5.4.15","businessCategory"),n("2.5.4.17","postalCode"),n("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),n("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),n("2.16.840.1.113730.1.1","nsCertType"),n("2.16.840.1.113730.1.13","nsComment"),r("2.5.29.1","authorityKeyIdentifier"),r("2.5.29.2","keyAttributes"),r("2.5.29.3","certificatePolicies"),r("2.5.29.4","keyUsageRestriction"),r("2.5.29.5","policyMapping"),r("2.5.29.6","subtreesConstraint"),r("2.5.29.7","subjectAltName"),r("2.5.29.8","issuerAltName"),r("2.5.29.9","subjectDirectoryAttributes"),r("2.5.29.10","basicConstraints"),r("2.5.29.11","nameConstraints"),r("2.5.29.12","policyConstraints"),r("2.5.29.13","basicConstraints"),n("2.5.29.14","subjectKeyIdentifier"),n("2.5.29.15","keyUsage"),r("2.5.29.16","privateKeyUsagePeriod"),n("2.5.29.17","subjectAltName"),n("2.5.29.18","issuerAltName"),n("2.5.29.19","basicConstraints"),r("2.5.29.20","cRLNumber"),r("2.5.29.21","cRLReason"),r("2.5.29.22","expirationDate"),r("2.5.29.23","instructionCode"),r("2.5.29.24","invalidityDate"),r("2.5.29.25","cRLDistributionPoints"),r("2.5.29.26","issuingDistributionPoint"),r("2.5.29.27","deltaCRLIndicator"),r("2.5.29.28","issuingDistributionPoint"),r("2.5.29.29","certificateIssuer"),r("2.5.29.30","nameConstraints"),n("2.5.29.31","cRLDistributionPoints"),n("2.5.29.32","certificatePolicies"),r("2.5.29.33","policyMappings"),r("2.5.29.34","policyConstraints"),n("2.5.29.35","authorityKeyIdentifier"),r("2.5.29.36","policyConstraints"),n("2.5.29.37","extKeyUsage"),r("2.5.29.46","freshestCRL"),r("2.5.29.54","inhibitAnyPolicy"),n("1.3.6.1.4.1.11129.2.4.2","timestampList"),n("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),n("1.3.6.1.5.5.7.3.1","serverAuth"),n("1.3.6.1.5.5.7.3.2","clientAuth"),n("1.3.6.1.5.5.7.3.3","codeSigning"),n("1.3.6.1.5.5.7.3.4","emailProtection"),n("1.3.6.1.5.5.7.3.8","timeStamping")})),k((function(e){var t=e.exports=W.asn1=W.asn1||{};function n(e,t,n){if(n>t){var r=new Error("Too few bytes to parse DER.");throw r.available=e.length(),r.remaining=t,r.requested=n,r}}t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(e,n,r,a,o){if(W.util.isArray(a)){for(var i=[],s=0;s<a.length;++s)void 0!==a[s]&&i.push(a[s]);a=i}var u={tagClass:e,type:n,constructed:r,composed:r||W.util.isArray(a),value:a};return o&&"bitStringContents"in o&&(u.bitStringContents=o.bitStringContents,u.original=t.copy(u)),u},t.copy=function(e,n){var r;if(W.util.isArray(e)){r=[];for(var a=0;a<e.length;++a)r.push(t.copy(e[a],n));return r}return"string"==typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:t.copy(e.value,n)},n&&!n.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},t.equals=function(e,n,r){if(W.util.isArray(e)){if(!W.util.isArray(n))return!1;if(e.length!==n.length)return!1;for(var a=0;a<e.length;++a)if(!t.equals(e[a],n[a]))return!1;return!0}if(typeof e!=typeof n)return!1;if("string"==typeof e)return e===n;var o=e.tagClass===n.tagClass&&e.type===n.type&&e.constructed===n.constructed&&e.composed===n.composed&&t.equals(e.value,n.value);return r&&r.includeBitStringContents&&(o=o&&e.bitStringContents===n.bitStringContents),o},t.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};var r=function(e,t){var r=e.getByte();if(t--,128!==r){var a;if(128&r){var o=127&r;n(e,t,o),a=e.getInt(o<<3)}else a=r;if(a<0)throw new Error("Negative length: "+a);return a}};t.fromDer=function(e,a){return void 0===a&&(a={strict:!0,decodeBitStrings:!0}),"boolean"==typeof a&&(a={strict:a,decodeBitStrings:!0}),"strict"in a||(a.strict=!0),"decodeBitStrings"in a||(a.decodeBitStrings=!0),"string"==typeof e&&(e=W.util.createBuffer(e)),function e(a,o,i,s){var u;n(a,o,2);var c=a.getByte();o--;var l=192&c,d=31&c;u=a.length();var f,p,h=r(a,o);if(o-=u-a.length(),void 0!==h&&h>o){if(s.strict){var m=new Error("Too few bytes to read ASN.1 value.");throw m.available=a.length(),m.remaining=o,m.requested=h,m}h=o}var g=32==(32&c);if(g)if(f=[],void 0===h)for(;;){if(n(a,o,2),a.bytes(2)===String.fromCharCode(0,0)){a.getBytes(2),o-=2;break}u=a.length(),f.push(e(a,o,i+1,s)),o-=u-a.length()}else for(;h>0;)u=a.length(),f.push(e(a,h,i+1,s)),o-=u-a.length(),h-=u-a.length();if(void 0===f&&l===t.Class.UNIVERSAL&&d===t.Type.BITSTRING&&(p=a.bytes(h)),void 0===f&&s.decodeBitStrings&&l===t.Class.UNIVERSAL&&d===t.Type.BITSTRING&&h>1){var v=a.read,y=o,b=0;if(d===t.Type.BITSTRING&&(n(a,o,1),b=a.getByte(),o--),0===b)try{u=a.length();var x=e(a,o,i+1,{verbose:s.verbose,strict:!0,decodeBitStrings:!0}),k=u-a.length();o-=k,d==t.Type.BITSTRING&&k++;var w=x.tagClass;k!==h||w!==t.Class.UNIVERSAL&&w!==t.Class.CONTEXT_SPECIFIC||(f=[x])}catch(e){}void 0===f&&(a.read=v,o=y)}if(void 0===f){if(void 0===h){if(s.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");h=o}if(d===t.Type.BMPSTRING)for(f="";h>0;h-=2)n(a,o,2),f+=String.fromCharCode(a.getInt16()),o-=2;else f=a.getBytes(h)}var I=void 0===p?null:{bitStringContents:p};return t.create(l,d,g,f,I)}(e,e.length(),0,a)},t.toDer=function(e){var n=W.util.createBuffer(),r=e.tagClass|e.type,a=W.util.createBuffer(),o=!1;if("bitStringContents"in e&&(o=!0,e.original&&(o=t.equals(e,e.original))),o)a.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:a.putByte(0);for(var i=0;i<e.value.length;++i)void 0!==e.value[i]&&a.putBuffer(t.toDer(e.value[i]))}else if(e.type===t.Type.BMPSTRING)for(i=0;i<e.value.length;++i)a.putInt16(e.value.charCodeAt(i));else e.type===t.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?a.putBytes(e.value.substr(1)):a.putBytes(e.value);if(n.putByte(r),a.length()<=127)n.putByte(127&a.length());else{var s=a.length(),u="";do{u+=String.fromCharCode(255&s),s>>>=8}while(s>0);for(n.putByte(128|u.length),i=u.length-1;i>=0;--i)n.putByte(u.charCodeAt(i))}return n.putBuffer(a),n},t.oidToDer=function(e){var t,n,r,a,o=e.split("."),i=W.util.createBuffer();i.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var s=2;s<o.length;++s){t=!0,n=[],r=parseInt(o[s],10);do{a=127&r,r>>>=7,t||(a|=128),n.push(a),t=!1}while(r>0);for(var u=n.length-1;u>=0;--u)i.putByte(n[u])}return i},t.derToOid=function(e){var t;"string"==typeof e&&(e=W.util.createBuffer(e));var n=e.getByte();t=Math.floor(n/40)+"."+n%40;for(var r=0;e.length()>0;)r<<=7,128&(n=e.getByte())?r+=127&n:(t+="."+(r+n),r=0);return t},t.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(e.substr(2,2),10)-1,a=parseInt(e.substr(4,2),10),o=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),s=0;if(e.length>11){var u=e.charAt(10),c=10;"+"!==u&&"-"!==u&&(s=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(n,r,a),t.setUTCHours(o,i,s,0),c&&("+"===(u=e.charAt(c))||"-"===u)){var l=60*parseInt(e.substr(c+1,2),10)+parseInt(e.substr(c+4,2),10);l*=6e4,"+"===u?t.setTime(+t-l):t.setTime(+t+l)}return t},t.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),r=parseInt(e.substr(4,2),10)-1,a=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),i=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),u=0,c=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var d=e.length-5,f=e.charAt(d);return"+"!==f&&"-"!==f||(c=60*parseInt(e.substr(d+1,2),10)+parseInt(e.substr(d+4,2),10),c*=6e4,"+"===f&&(c*=-1),l=!0),"."===e.charAt(14)&&(u=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(n,r,a),t.setUTCHours(o,i,s,u),t.setTime(+t+c)):(t.setFullYear(n,r,a),t.setHours(o,i,s,u)),t},t.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",n=[];n.push((""+e.getUTCFullYear()).substr(2)),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+"Z"},t.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",n=[];n.push(""+e.getUTCFullYear()),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+"Z"},t.integerToDer=function(e){var t=W.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=e,n},t.derToInteger=function(e){"string"==typeof e&&(e=W.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},t.validate=function(e,n,r,a){var o=!1;if(e.tagClass!==n.tagClass&&void 0!==n.tagClass||e.type!==n.type&&void 0!==n.type)a&&(e.tagClass!==n.tagClass&&a.push("["+n.name+'] Expected tag class "'+n.tagClass+'", got "'+e.tagClass+'"'),e.type!==n.type&&a.push("["+n.name+'] Expected type "'+n.type+'", got "'+e.type+'"'));else if(e.constructed===n.constructed||void 0===n.constructed){if(o=!0,n.value&&W.util.isArray(n.value))for(var i=0,s=0;o&&s<n.value.length;++s)o=n.value[s].optional||!1,e.value[i]&&((o=t.validate(e.value[i],n.value[s],r,a))?++i:n.value[s].optional&&(o=!0)),!o&&a&&a.push("["+n.name+'] Tag class "'+n.tagClass+'", type "'+n.type+'" expected value length "'+n.value.length+'", got "'+e.value.length+'"');if(o&&r&&(n.capture&&(r[n.capture]=e.value),n.captureAsn1&&(r[n.captureAsn1]=e),n.captureBitStringContents&&"bitStringContents"in e&&(r[n.captureBitStringContents]=e.bitStringContents),n.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)r[n.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[n.captureBitStringValue]=e.bitStringContents.slice(1)}}else a&&a.push("["+n.name+'] Expected constructed "'+n.constructed+'", got "'+e.constructed+'"');return o};var a=/[^\\u0000-\\u00ff]/;t.prettyPrint=function(e,n,r){var o="";r=r||2,(n=n||0)>0&&(o+="\n");for(var i="",s=0;s<n*r;++s)i+=" ";switch(o+=i+"Tag: ",e.tagClass){case t.Class.UNIVERSAL:o+="Universal:";break;case t.Class.APPLICATION:o+="Application:";break;case t.Class.CONTEXT_SPECIFIC:o+="Context-Specific:";break;case t.Class.PRIVATE:o+="Private:"}if(e.tagClass===t.Class.UNIVERSAL)switch(o+=e.type,e.type){case t.Type.NONE:o+=" (None)";break;case t.Type.BOOLEAN:o+=" (Boolean)";break;case t.Type.INTEGER:o+=" (Integer)";break;case t.Type.BITSTRING:o+=" (Bit string)";break;case t.Type.OCTETSTRING:o+=" (Octet string)";break;case t.Type.NULL:o+=" (Null)";break;case t.Type.OID:o+=" (Object Identifier)";break;case t.Type.ODESC:o+=" (Object Descriptor)";break;case t.Type.EXTERNAL:o+=" (External or Instance of)";break;case t.Type.REAL:o+=" (Real)";break;case t.Type.ENUMERATED:o+=" (Enumerated)";break;case t.Type.EMBEDDED:o+=" (Embedded PDV)";break;case t.Type.UTF8:o+=" (UTF8)";break;case t.Type.ROID:o+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:o+=" (Sequence)";break;case t.Type.SET:o+=" (Set)";break;case t.Type.PRINTABLESTRING:o+=" (Printable String)";break;case t.Type.IA5String:o+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:o+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:o+=" (Generalized time)";break;case t.Type.BMPSTRING:o+=" (BMP String)"}else o+=e.type;if(o+="\n",o+=i+"Constructed: "+e.constructed+"\n",e.composed){var u=0,c="";for(s=0;s<e.value.length;++s)void 0!==e.value[s]&&(u+=1,c+=t.prettyPrint(e.value[s],n+1,r),s+1<e.value.length&&(c+=","));o+=i+"Sub values: "+u+c}else{if(o+=i+"Value: ",e.type===t.Type.OID){var l=t.derToOid(e.value);o+=l,W.pki&&W.pki.oids&&l in W.pki.oids&&(o+=" ("+W.pki.oids[l]+") ")}if(e.type===t.Type.INTEGER)try{o+=t.derToInteger(e.value)}catch(t){o+="0x"+W.util.bytesToHex(e.value)}else if(e.type===t.Type.BITSTRING){if(e.value.length>1?o+="0x"+W.util.bytesToHex(e.value.slice(1)):o+="(none)",e.value.length>0){var d=e.value.charCodeAt(0);1==d?o+=" (1 unused bit shown)":d>1&&(o+=" ("+d+" unused bits shown)")}}else e.type===t.Type.OCTETSTRING?(a.test(e.value)||(o+="("+e.value+") "),o+="0x"+W.util.bytesToHex(e.value)):e.type===t.Type.UTF8?o+=W.util.decodeUtf8(e.value):e.type===t.Type.PRINTABLESTRING||e.type===t.Type.IA5String?o+=e.value:a.test(e.value)?o+="0x"+W.util.bytesToHex(e.value):0===e.value.length?o+="[null]":o+=e.value}return o}})),W.md=W.md||{},W.md.algorithms=W.md.algorithms||{},k((function(e){(e.exports=W.hmac=W.hmac||{}).create=function(){var e=null,t=null,n=null,r=null,a={start:function(a,o){if(null!==a)if("string"==typeof a){if(!((a=a.toLowerCase())in W.md.algorithms))throw new Error('Unknown hash algorithm "'+a+'"');t=W.md.algorithms[a].create()}else t=a;if(null===o)o=e;else{if("string"==typeof o)o=W.util.createBuffer(o);else if(W.util.isArray(o)){var i=o;o=W.util.createBuffer();for(var s=0;s<i.length;++s)o.putByte(i[s])}var u=o.length();for(u>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),n=W.util.createBuffer(),r=W.util.createBuffer(),u=o.length(),s=0;s<u;++s)i=o.at(s),n.putByte(54^i),r.putByte(92^i);if(u<t.blockLength)for(i=t.blockLength-u,s=0;s<i;++s)n.putByte(54),r.putByte(92);e=o,n=n.bytes(),r=r.bytes()}t.start(),t.update(n)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(r),t.update(e),t.digest()}};return a.digest=a.getMac,a}})),k((function(e){var t=e.exports=W.md5=W.md5||{};W.md.md5=W.md.algorithms.md5=t,t.create=function(){i||function(){n=String.fromCharCode(128),n+=W.util.fillString(String.fromCharCode(0),64),r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],a=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],o=new Array(64);for(var e=0;e<64;++e)o[e]=Math.floor(4294967296*Math.abs(Math.sin(e+1)));i=!0}();var e=null,t=W.util.createBuffer(),u=new Array(16),c={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){c.messageLength=0,c.fullMessageLength=c.messageLength64=[];for(var n=c.messageLengthSize/4,r=0;r<n;++r)c.fullMessageLength.push(0);return t=W.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},c}};return c.start(),c.update=function(n,r){"utf8"===r&&(n=W.util.encodeUtf8(n));var a=n.length;c.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=c.fullMessageLength.length-1;o>=0;--o)c.fullMessageLength[o]+=a[1],a[1]=a[0]+(c.fullMessageLength[o]/4294967296>>>0),c.fullMessageLength[o]=c.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(n),s(e,u,t),(t.read>2048||0===t.length())&&t.compact(),c},c.digest=function(){var r=W.util.createBuffer();r.putBytes(t.bytes());var a=c.fullMessageLength[c.fullMessageLength.length-1]+c.messageLengthSize&c.blockLength-1;r.putBytes(n.substr(0,c.blockLength-a));for(var o,i=0,l=c.fullMessageLength.length-1;l>=0;--l)i=(o=8*c.fullMessageLength[l]+i)/4294967296>>>0,r.putInt32Le(o>>>0);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};s(d,u,r);var f=W.util.createBuffer();return f.putInt32Le(d.h0),f.putInt32Le(d.h1),f.putInt32Le(d.h2),f.putInt32Le(d.h3),f},c};var n=null,r=null,a=null,o=null,i=!1;function s(e,t,n){for(var i,s,u,c,l,d,f,p=n.length();p>=64;){for(s=e.h0,u=e.h1,c=e.h2,l=e.h3,f=0;f<16;++f)t[f]=n.getInt32Le(),i=s+(l^u&(c^l))+o[f]+t[f],s=l,l=c,c=u,u+=i<<(d=a[f])|i>>>32-d;for(;f<32;++f)i=s+(c^l&(u^c))+o[f]+t[r[f]],s=l,l=c,c=u,u+=i<<(d=a[f])|i>>>32-d;for(;f<48;++f)i=s+(u^c^l)+o[f]+t[r[f]],s=l,l=c,c=u,u+=i<<(d=a[f])|i>>>32-d;for(;f<64;++f)i=s+(c^(u|~l))+o[f]+t[r[f]],s=l,l=c,c=u,u+=i<<(d=a[f])|i>>>32-d;e.h0=e.h0+s|0,e.h1=e.h1+u|0,e.h2=e.h2+c|0,e.h3=e.h3+l|0,p-=64}}})),k((function(e){var t=e.exports=W.pem=W.pem||{};function n(e){for(var t=e.name+": ",n=[],r=function(e,t){return" "+t},a=0;a<e.values.length;++a)n.push(e.values[a].replace(/^(\S+\r\n)/,r));t+=n.join(",")+"\r\n";var o=0,i=-1;for(a=0;a<t.length;++a,++o)if(o>65&&-1!==i){var s=t[i];","===s?(++i,t=t.substr(0,i)+"\r\n "+t.substr(i)):t=t.substr(0,i)+"\r\n"+s+t.substr(i+1),o=a-i-1,i=-1,++a}else" "!==t[a]&&"\t"!==t[a]&&","!==t[a]||(i=a);return t}function r(e){return e.replace(/^\s+/,"")}t.encode=function(e,t){t=t||{};var r,a="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(a+=n(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(a+=n(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),a+=n(r)),e.headers)for(var o=0;o<e.headers.length;++o)a+=n(e.headers[o]);return e.procType&&(a+="\r\n"),(a+=W.util.encode64(e.body,t.maxline||64)+"\r\n")+"-----END "+e.type+"-----\r\n"},t.decode=function(e){for(var t,n=[],a=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,o=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/;t=a.exec(e);){var s={type:t[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:W.util.decode64(t[3])};if(n.push(s),t[2]){for(var u=t[2].split(i),c=0;t&&c<u.length;){for(var l=u[c].replace(/\s+$/,""),d=c+1;d<u.length;++d){var f=u[d];if(!/\s/.test(f[0]))break;l+=f,c=d}if(t=l.match(o)){for(var p={name:t[1],values:[]},h=t[2].split(","),m=0;m<h.length;++m)p.values.push(r(h[m]));if(s.procType)if(s.contentDomain||"Content-Domain"!==p.name)if(s.dekInfo||"DEK-Info"!==p.name)s.headers.push(p);else{if(0===p.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');s.dekInfo={algorithm:h[0],parameters:h[1]||null}}else s.contentDomain=h[0]||"";else{if("Proc-Type"!==p.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==p.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');s.procType={version:h[0],type:h[1]}}}++c}if("ENCRYPTED"===s.procType&&!s.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===n.length)throw new Error("Invalid PEM formatted message.");return n}})),W.des=W.des||{},W.des.startEncrypting=function(e,t,n,r){var a=he({key:e,output:n,decrypt:!1,mode:r||(null===t?"ECB":"CBC")});return a.start(t),a},W.des.createEncryptionCipher=function(e,t){return he({key:e,output:null,decrypt:!1,mode:t})},W.des.startDecrypting=function(e,t,n,r){var a=he({key:e,output:n,decrypt:!0,mode:r||(null===t?"ECB":"CBC")});return a.start(t),a},W.des.createDecryptionCipher=function(e,t){return he({key:e,output:null,decrypt:!0,mode:t})},W.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return pe(n._keys,e,t,!1)},decrypt:function(e,t){return pe(n._keys,e,t,!0)}}}),n._init=!1},W.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=W.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,n=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],a=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],i=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=e.length()>8?3:1,v=[],y=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,x=0;x<g;x++){var k=e.getInt32(),w=e.getInt32();k^=(t=252645135&(k>>>4^w))<<4,k^=t=65535&((w^=t)>>>-16^k),k^=(t=858993459&(k>>>2^(w^=t<<-16)))<<2,k^=t=65535&((w^=t)>>>-16^k),k^=(t=1431655765&(k>>>1^(w^=t<<-16)))<<1,k^=t=16711935&((w^=t)>>>8^k),t=(k^=(t=1431655765&(k>>>1^(w^=t<<8)))<<1)<<8|(w^=t)>>>20&240,k=w<<24|w<<8&16711680|w>>>8&65280|w>>>24&240,w=t;for(var I=0;I<y.length;++I){y[I]?(k=k<<2|k>>>26,w=w<<2|w>>>26):(k=k<<1|k>>>27,w=w<<1|w>>>27);var C=n[(k&=-15)>>>28]|r[k>>>24&15]|a[k>>>20&15]|o[k>>>16&15]|i[k>>>12&15]|s[k>>>8&15]|u[k>>>4&15],E=c[(w&=-15)>>>28]|l[w>>>24&15]|d[w>>>20&15]|f[w>>>16&15]|p[w>>>12&15]|h[w>>>8&15]|m[w>>>4&15];t=65535&(E>>>16^C),v[b++]=C^t,v[b++]=E^t<<16}}return v}(t),this._init=!0}},ae("DES-ECB",W.cipher.modes.ecb),ae("DES-CBC",W.cipher.modes.cbc),ae("DES-CFB",W.cipher.modes.cfb),ae("DES-OFB",W.cipher.modes.ofb),ae("DES-CTR",W.cipher.modes.ctr),ae("3DES-ECB",W.cipher.modes.ecb),ae("3DES-CBC",W.cipher.modes.cbc),ae("3DES-CFB",W.cipher.modes.cfb),ae("3DES-OFB",W.cipher.modes.ofb),ae("3DES-CTR",W.cipher.modes.ctr);var oe=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],ie=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],se=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],ue=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],ce=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],le=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],de=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],fe=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function pe(e,t,n,r){var a,o,i=32===e.length?3:9;a=3===i?r?[30,-2,-2]:[0,32,2]:r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s=t[0],u=t[1];s^=(o=252645135&(s>>>4^u))<<4,s^=(o=65535&(s>>>16^(u^=o)))<<16,s^=o=858993459&((u^=o)>>>2^s),s^=o=16711935&((u^=o<<2)>>>8^s),s=(s^=(o=1431655765&(s>>>1^(u^=o<<8)))<<1)<<1|s>>>31,u=(u^=o)<<1|u>>>31;for(var c=0;c<i;c+=3){for(var l=a[c+1],d=a[c+2],f=a[c];f!=l;f+=d){var p=u^e[f],h=(u>>>4|u<<28)^e[f+1];o=s,s=u,u=o^(ie[p>>>24&63]|ue[p>>>16&63]|le[p>>>8&63]|fe[63&p]|oe[h>>>24&63]|se[h>>>16&63]|ce[h>>>8&63]|de[63&h])}o=s,s=u,u=o}u=u>>>1|u<<31,u^=o=1431655765&((s=s>>>1|s<<31)>>>1^u),u^=(o=16711935&(u>>>8^(s^=o<<1)))<<8,u^=(o=858993459&(u>>>2^(s^=o)))<<2,u^=o=65535&((s^=o)>>>16^u),u^=o=252645135&((s^=o<<16)>>>4^u),s^=o<<4,n[0]=s,n[1]=u}function he(e){var t,n="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),r=(t=e.decrypt?W.cipher.createDecipher(n,e.key):W.cipher.createCipher(n,e.key)).start;return t.start=function(e,n){var a=null;n instanceof W.util.ByteBuffer&&(a=n,n={}),(n=n||{}).output=a,n.iv=e,r.call(t,n)},t}var me,ge=W.pkcs5=W.pkcs5||{};W.util.isNodejs&&!W.options.usePureJavaScript&&(me=t),W.pbkdf2=ge.pbkdf2=function(e,t,n,r,a,o){if("function"==typeof a&&(o=a,a=null),W.util.isNodejs&&!W.options.usePureJavaScript&&me.pbkdf2&&(null===a||"object"!=typeof a)&&(me.pbkdf2Sync.length>4||!a||"sha1"===a))return"string"!=typeof a&&(a="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),o?4===me.pbkdf2Sync.length?me.pbkdf2(e,t,n,r,(function(e,t){if(e)return o(e);o(null,t.toString("binary"))})):me.pbkdf2(e,t,n,r,a,(function(e,t){if(e)return o(e);o(null,t.toString("binary"))})):4===me.pbkdf2Sync.length?me.pbkdf2Sync(e,t,n,r).toString("binary"):me.pbkdf2Sync(e,t,n,r,a).toString("binary");if(null==a&&(a="sha1"),"string"==typeof a){if(!(a in W.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=W.md[a].create()}var i=a.digestLength;if(r>4294967295*i){var s=new Error("Derived key is too long.");if(o)return o(s);throw s}var u=Math.ceil(r/i),c=r-(u-1)*i,l=W.hmac.create();l.start(a,e);var d,f,p,h="";if(!o){for(var m=1;m<=u;++m){l.start(null,null),l.update(t),l.update(W.util.int32ToBytes(m)),d=p=l.digest().getBytes();for(var g=2;g<=n;++g)l.start(null,null),l.update(p),f=l.digest().getBytes(),d=W.util.xorBytes(d,f,i),p=f;h+=m<u?d:d.substr(0,c)}return h}function v(){if(m>u)return o(null,h);l.start(null,null),l.update(t),l.update(W.util.int32ToBytes(m)),d=p=l.digest().getBytes(),g=2,y()}function y(){if(g<=n)return l.start(null,null),l.update(p),f=l.digest().getBytes(),d=W.util.xorBytes(d,f,i),p=f,++g,W.util.setImmediate(y);h+=m<u?d:d.substr(0,c),++m,v()}m=1,v()},k((function(e){var t=e.exports=W.sha256=W.sha256||{};W.md.sha256=W.md.algorithms.sha256=t,t.create=function(){r||(n=String.fromCharCode(128),n+=W.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=!0);var e=null,t=W.util.createBuffer(),i=new Array(64),s={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var n=s.messageLengthSize/4,r=0;r<n;++r)s.fullMessageLength.push(0);return t=W.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},s}};return s.start(),s.update=function(n,r){"utf8"===r&&(n=W.util.encodeUtf8(n));var a=n.length;s.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=s.fullMessageLength.length-1;u>=0;--u)s.fullMessageLength[u]+=a[1],a[1]=a[0]+(s.fullMessageLength[u]/4294967296>>>0),s.fullMessageLength[u]=s.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(n),o(e,i,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var r=W.util.createBuffer();r.putBytes(t.bytes());var a,u=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize&s.blockLength-1;r.putBytes(n.substr(0,s.blockLength-u));for(var c=8*s.fullMessageLength[0],l=0;l<s.fullMessageLength.length-1;++l)c+=(a=8*s.fullMessageLength[l+1])/4294967296>>>0,r.putInt32(c>>>0),c=a>>>0;r.putInt32(c);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};o(d,i,r);var f=W.util.createBuffer();return f.putInt32(d.h0),f.putInt32(d.h1),f.putInt32(d.h2),f.putInt32(d.h3),f.putInt32(d.h4),f.putInt32(d.h5),f.putInt32(d.h6),f.putInt32(d.h7),f},s};var n=null,r=!1,a=null;function o(e,t,n){for(var r,o,i,s,u,c,l,d,f,p,h,m,g,v=n.length();v>=64;){for(u=0;u<16;++u)t[u]=n.getInt32();for(;u<64;++u)r=((r=t[u-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,o=((o=t[u-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,t[u]=r+t[u-7]+o+t[u-16]|0;for(c=e.h0,l=e.h1,d=e.h2,f=e.h3,p=e.h4,h=e.h5,m=e.h6,g=e.h7,u=0;u<64;++u)i=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),s=c&l|d&(c^l),r=g+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(m^p&(h^m))+a[u]+t[u],g=m,m=h,h=p,p=f+r>>>0,f=d,d=l,l=c,c=r+(o=i+s)>>>0;e.h0=e.h0+c|0,e.h1=e.h1+l|0,e.h2=e.h2+d|0,e.h3=e.h3+f|0,e.h4=e.h4+p|0,e.h5=e.h5+h|0,e.h6=e.h6+m|0,e.h7=e.h7+g|0,v-=64}}})),k((function(e){var n=null;!W.util.isNodejs||W.options.usePureJavaScript||process.versions["node-webkit"]||(n=t),(e.exports=W.prng=W.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,a=new Array(32),o=0;o<32;++o)a[o]=r.create();function i(){if(t.pools[0].messageLength>=32)return s();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),s()}function s(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var n=1,r=0;r<32;++r)t.reseeds%n==0&&(e.update(t.pools[r].digest().getBytes()),t.pools[r].start()),n<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var a=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(a),t.generated=0}function u(e){var t=null,n=W.util.globalScope,r=n.crypto||n.msCrypto;r&&r.getRandomValues&&(t=function(e){return r.getRandomValues(e)});var a=W.util.createBuffer();if(t)for(;a.length()<e;){var o=Math.max(1,Math.min(e-a.length(),65536)/4),i=new Uint32Array(Math.floor(o));try{t(i);for(var s=0;s<i.length;++s)a.putInt32(i[s])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(a.length()<e)for(var u,c,l,d=Math.floor(65536*Math.random());a.length()<e;)for(c=16807*(65535&d),c+=(32767&(u=16807*(d>>16)))<<16,d=4294967295&(c=(2147483647&(c+=u>>15))+(c>>31)),s=0;s<3;++s)l=d>>>(s<<3),l^=Math.floor(256*Math.random()),a.putByte(String.fromCharCode(255&l));return a.getBytes(e)}return t.pools=a,t.pool=0,t.generate=function(e,n){if(!n)return t.generateSync(e);var r=t.plugin.cipher,a=t.plugin.increment,o=t.plugin.formatKey,i=t.plugin.formatSeed,u=W.util.createBuffer();t.key=null,function c(l){if(l)return n(l);if(u.length()>=e)return n(null,u.getBytes(e));if(t.generated>1048575&&(t.key=null),null===t.key)return W.util.nextTick((function(){!function(e){if(t.pools[0].messageLength>=32)return s(),e();var n=32-t.pools[0].messageLength<<5;t.seedFile(n,(function(n,r){if(n)return e(n);t.collect(r),s(),e()}))}(c)}));var d=r(t.key,t.seed);t.generated+=d.length,u.putBytes(d),t.key=o(r(t.key,a(t.seed))),t.seed=i(r(t.key,t.seed)),W.util.setImmediate(c)}()},t.generateSync=function(e){var n=t.plugin.cipher,r=t.plugin.increment,a=t.plugin.formatKey,o=t.plugin.formatSeed;t.key=null;for(var s=W.util.createBuffer();s.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&i();var u=n(t.key,t.seed);t.generated+=u.length,s.putBytes(u),t.key=a(n(t.key,r(t.seed))),t.seed=o(n(t.key,t.seed))}return s.getBytes(e)},n?(t.seedFile=function(e,t){n.randomBytes(e,(function(e,n){if(e)return t(e);t(null,n.toString())}))},t.seedFileSync=function(e){return n.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,u(e))}catch(e){t(e)}},t.seedFileSync=u),t.collect=function(e){for(var n=e.length,r=0;r<n;++r)t.pools[t.pool].update(e.substr(r,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,n){for(var r="",a=0;a<n;a+=8)r+=String.fromCharCode(e>>a&255);t.collect(r)},t.registerWorker=function(e){e===self?t.seedFile=function(e,t){self.addEventListener("message",(function e(n){var r=n.data;r.forge&&r.forge.prng&&(self.removeEventListener("message",e),t(r.forge.prng.err,r.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:e}}})}:e.addEventListener("message",(function(n){var r=n.data;r.forge&&r.forge.prng&&t.seedFile(r.forge.prng.needed,(function(t,n){e.postMessage({forge:{prng:{err:t,bytes:n}}})}))}))},t}})),k((function(e){W.random&&W.random.getBytes?e.exports=W.random:function(t){var n={},r=new Array(4),a=W.util.createBuffer();function o(){var e=W.prng.create(n);return e.getBytes=function(t,n){return e.generate(t,n)},e.getBytesSync=function(t){return e.generate(t)},e}n.formatKey=function(e){var t=W.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),W.aes._expandKey(e,!1)},n.formatSeed=function(e){var t=W.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},n.cipher=function(e,t){return W.aes._updateBlock(e,t,r,!1),a.putInt32(r[0]),a.putInt32(r[1]),a.putInt32(r[2]),a.putInt32(r[3]),a.getBytes()},n.increment=function(e){return++e[3],e},n.md=W.md.sha256;var i=o(),s=null,u=W.util.globalScope,c=u.crypto||u.msCrypto;if(c&&c.getRandomValues&&(s=function(e){return c.getRandomValues(e)}),!W.util.isNodejs&&!s){if(i.collectInt(+new Date,32),"undefined"!=typeof navigator){var l="";for(var d in navigator)try{"string"==typeof navigator[d]&&(l+=navigator[d])}catch(e){}i.collect(l),l=null}t&&(t().mousemove((function(e){i.collectInt(e.clientX,16),i.collectInt(e.clientY,16)})),t().keypress((function(e){i.collectInt(e.charCode,8)})))}if(W.random)for(var d in i)W.random[d]=i[d];else W.random=i;W.random.createInstance=o,e.exports=W.random}("undefined"!=typeof jQuery?jQuery:null)}));var ve=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],ye=[1,2,3,5],be=function(e,t){return e<<t&65535|(65535&e)>>16-t},xe=function(e,t){return(65535&e)>>t|e<<16-t&65535};W.rc2=W.rc2||{},W.rc2.expandKey=function(e,t){"string"==typeof e&&(e=W.util.createBuffer(e)),t=t||128;var n,r=e,a=e.length(),o=t,i=Math.ceil(o/8),s=255>>(7&o);for(n=a;n<128;n++)r.putByte(ve[r.at(n-1)+r.at(n-a)&255]);for(r.setAt(128-i,ve[r.at(128-i)&s]),n=127-i;n>=0;n--)r.setAt(n,ve[r.at(n+1)^r.at(n+i)]);return r};var ke,we=function(e,t,n){var r,a,o,i,s=!1,u=null,c=null,l=null,d=[];for(e=W.rc2.expandKey(e,t),o=0;o<64;o++)d.push(e.getInt16Le());n?(r=function(e){for(o=0;o<4;o++)e[o]+=d[i]+(e[(o+3)%4]&e[(o+2)%4])+(~e[(o+3)%4]&e[(o+1)%4]),e[o]=be(e[o],ye[o]),i++},a=function(e){for(o=0;o<4;o++)e[o]+=d[63&e[(o+3)%4]]}):(r=function(e){for(o=3;o>=0;o--)e[o]=xe(e[o],ye[o]),e[o]-=d[i]+(e[(o+3)%4]&e[(o+2)%4])+(~e[(o+3)%4]&e[(o+1)%4]),i--},a=function(e){for(o=3;o>=0;o--)e[o]-=d[63&e[(o+3)%4]]});var f=function(e){var t=[];for(o=0;o<4;o++){var r=u.getInt16Le();null!==l&&(n?r^=l.getInt16Le():l.putInt16Le(r)),t.push(65535&r)}i=n?0:63;for(var a=0;a<e.length;a++)for(var s=0;s<e[a][0];s++)e[a][1](t);for(o=0;o<4;o++)null!==l&&(n?l.putInt16Le(t[o]):t[o]^=l.getInt16Le()),c.putInt16Le(t[o])},p=null;return p={start:function(e,t){e&&"string"==typeof e&&(e=W.util.createBuffer(e)),s=!1,u=W.util.createBuffer(),c=t||new W.util.createBuffer,l=e,p.output=c},update:function(e){for(s||u.putBuffer(e);u.length()>=8;)f([[5,r],[1,a],[6,r],[1,a],[5,r]])},finish:function(e){var t=!0;if(n)if(e)t=e(8,u,!n);else{var r=8===u.length()?8:8-u.length();u.fillWithByte(r,r)}if(t&&(s=!0,p.update()),!n&&(t=0===u.length()))if(e)t=e(8,c,!n);else{var a=c.length(),o=c.at(a-1);o>a?t=!1:c.truncate(o)}return t}}};function Ie(e,t,n){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function Ce(){return new Ie(null)}function Ee(e,t,n,r,a,o){for(var i=16383&t,s=t>>14;--o>=0;){var u=16383&this.data[e],c=this.data[e++]>>14,l=s*u+c*i;a=((u=i*u+((16383&l)<<14)+n.data[r]+a)>>28)+(l>>14)+s*c,n.data[r++]=268435455&u}return a}W.rc2.startEncrypting=function(e,t,n){var r=W.rc2.createEncryptionCipher(e,128);return r.start(t,n),r},W.rc2.createEncryptionCipher=function(e,t){return we(e,t,!0)},W.rc2.startDecrypting=function(e,t,n){var r=W.rc2.createDecryptionCipher(e,128);return r.start(t,n),r},W.rc2.createDecryptionCipher=function(e,t){return we(e,t,!1)},W.jsbn=W.jsbn||{},W.jsbn.BigInteger=Ie,"undefined"==typeof navigator?(Ie.prototype.am=Ee,ke=28):"Microsoft Internet Explorer"==navigator.appName?(Ie.prototype.am=function(e,t,n,r,a,o){for(var i=32767&t,s=t>>15;--o>=0;){var u=32767&this.data[e],c=this.data[e++]>>15,l=s*u+c*i;a=((u=i*u+((32767&l)<<15)+n.data[r]+(1073741823&a))>>>30)+(l>>>15)+s*c+(a>>>30),n.data[r++]=1073741823&u}return a},ke=30):"Netscape"!=navigator.appName?(Ie.prototype.am=function(e,t,n,r,a,o){for(;--o>=0;){var i=t*this.data[e++]+n.data[r]+a;a=Math.floor(i/67108864),n.data[r++]=67108863&i}return a},ke=26):(Ie.prototype.am=Ee,ke=28),Ie.prototype.DB=ke,Ie.prototype.DM=(1<<ke)-1,Ie.prototype.DV=1<<ke,Ie.prototype.FV=Math.pow(2,52),Ie.prototype.F1=52-ke,Ie.prototype.F2=2*ke-52;var Se,Te,Ae="0123456789abcdefghijklmnopqrstuvwxyz",Ne=new Array;for(Se="0".charCodeAt(0),Te=0;Te<=9;++Te)Ne[Se++]=Te;for(Se="a".charCodeAt(0),Te=10;Te<36;++Te)Ne[Se++]=Te;for(Se="A".charCodeAt(0),Te=10;Te<36;++Te)Ne[Se++]=Te;function _e(e){return Ae.charAt(e)}function Re(e,t){var n=Ne[e.charCodeAt(t)];return null==n?-1:n}function Oe(e){var t=Ce();return t.fromInt(e),t}function Fe(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function Me(e){this.m=e}function De(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Be(e,t){return e&t}function Pe(e,t){return e|t}function Le(e,t){return e^t}function Ue(e,t){return e&~t}function Ve(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function We(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function ze(){}function je(e){return e}function He(e){this.r2=Ce(),this.q3=Ce(),Ie.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}Me.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},Me.prototype.revert=function(e){return e},Me.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},Me.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},Me.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},De.prototype.convert=function(e){var t=Ce();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(Ie.ZERO)>0&&this.m.subTo(t,t),t},De.prototype.revert=function(e){var t=Ce();return e.copyTo(t),this.reduce(t),t},De.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e.data[t],r=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},De.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},De.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Ie.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},Ie.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},Ie.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,a=!1,o=0;--r>=0;){var i=8==n?255&e[r]:Re(e,r);i<0?"-"==e.charAt(r)&&(a=!0):(a=!1,0==o?this.data[this.t++]=i:o+n>this.DB?(this.data[this.t-1]|=(i&(1<<this.DB-o)-1)<<o,this.data[this.t++]=i>>this.DB-o):this.data[this.t-1]|=i<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&Ie.ZERO.subTo(this,this)},Ie.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},Ie.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s},Ie.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s},Ie.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,a=this.DB-r,o=(1<<a)-1,i=Math.floor(e/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t.data[n+i+1]=this.data[n]>>a|s,s=(this.data[n]&o)<<r;for(n=i-1;n>=0;--n)t.data[n]=0;t.data[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()},Ie.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,a=this.DB-r,o=(1<<r)-1;t.data[0]=this.data[n]>>r;for(var i=n+1;i<this.t;++i)t.data[i-n-1]|=(this.data[i]&o)<<a,t.data[i-n]=this.data[i]>>r;r>0&&(t.data[this.t-n-1]|=(this.s&o)<<a),t.t=this.t-n,t.clamp()}},Ie.prototype.subTo=function(e,t){for(var n=0,r=0,a=Math.min(e.t,this.t);n<a;)r+=this.data[n]-e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t.data[n++]=this.DV+r:r>0&&(t.data[n++]=r),t.t=n,t.clamp()},Ie.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),a=n.t;for(t.t=a+r.t;--a>=0;)t.data[a]=0;for(a=0;a<r.t;++a)t.data[a+n.t]=n.am(0,r.data[a],t,a,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&Ie.ZERO.subTo(t,t)},Ie.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e.data[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()},Ie.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var a=this.abs();if(a.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=Ce());var o=Ce(),i=this.s,s=e.s,u=this.DB-Fe(r.data[r.t-1]);u>0?(r.lShiftTo(u,o),a.lShiftTo(u,n)):(r.copyTo(o),a.copyTo(n));var c=o.t,l=o.data[c-1];if(0!=l){var d=l*(1<<this.F1)+(c>1?o.data[c-2]>>this.F2:0),f=this.FV/d,p=(1<<this.F1)/d,h=1<<this.F2,m=n.t,g=m-c,v=null==t?Ce():t;for(o.dlShiftTo(g,v),n.compareTo(v)>=0&&(n.data[n.t++]=1,n.subTo(v,n)),Ie.ONE.dlShiftTo(c,v),v.subTo(o,o);o.t<c;)o.data[o.t++]=0;for(;--g>=0;){var y=n.data[--m]==l?this.DM:Math.floor(n.data[m]*f+(n.data[m-1]+h)*p);if((n.data[m]+=o.am(0,y,n,g,0,c))<y)for(o.dlShiftTo(g,v),n.subTo(v,n);n.data[m]<--y;)n.subTo(v,n)}null!=t&&(n.drShiftTo(c,t),i!=s&&Ie.ZERO.subTo(t,t)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),i<0&&Ie.ZERO.subTo(n,n)}}},Ie.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},Ie.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},Ie.prototype.exp=function(e,t){if(e>4294967295||e<1)return Ie.ONE;var n=Ce(),r=Ce(),a=t.convert(this),o=Fe(e)-1;for(a.copyTo(n);--o>=0;)if(t.sqrTo(n,r),(e&1<<o)>0)t.mulTo(r,a,n);else{var i=n;n=r,r=i}return t.revert(n)},Ie.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,a=!1,o="",i=this.t,s=this.DB-i*this.DB%t;if(i-- >0)for(s<this.DB&&(n=this.data[i]>>s)>0&&(a=!0,o=_e(n));i>=0;)s<t?(n=(this.data[i]&(1<<s)-1)<<t-s,n|=this.data[--i]>>(s+=this.DB-t)):(n=this.data[i]>>(s-=t)&r,s<=0&&(s+=this.DB,--i)),n>0&&(a=!0),a&&(o+=_e(n));return a?o:"0"},Ie.prototype.negate=function(){var e=Ce();return Ie.ZERO.subTo(this,e),e},Ie.prototype.abs=function(){return this.s<0?this.negate():this},Ie.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this.data[n]-e.data[n]))return t;return 0},Ie.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Fe(this.data[this.t-1]^this.s&this.DM)},Ie.prototype.mod=function(e){var t=Ce();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(Ie.ZERO)>0&&e.subTo(t,t),t},Ie.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new Me(t):new De(t),this.exp(e,n)},Ie.ZERO=Oe(0),Ie.ONE=Oe(1),ze.prototype.convert=je,ze.prototype.revert=je,ze.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},ze.prototype.sqrTo=function(e,t){e.squareTo(t)},He.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Ce();return e.copyTo(t),this.reduce(t),t},He.prototype.revert=function(e){return e},He.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},He.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},He.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var Ge=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Ke=(1<<26)/Ge[Ge.length-1];if(Ie.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},Ie.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=Oe(n),a=Ce(),o=Ce(),i="";for(this.divRemTo(r,a,o);a.signum()>0;)i=(n+o.intValue()).toString(e).substr(1)+i,a.divRemTo(r,a,o);return o.intValue().toString(e)+i},Ie.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),a=!1,o=0,i=0,s=0;s<e.length;++s){var u=Re(e,s);u<0?"-"==e.charAt(s)&&0==this.signum()&&(a=!0):(i=t*i+u,++o>=n&&(this.dMultiply(r),this.dAddOffset(i,0),o=0,i=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(i,0)),a&&Ie.ZERO.subTo(this,this)},Ie.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(Ie.ONE.shiftLeft(e-1),Pe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(Ie.ONE.shiftLeft(e-1),this);else{var r=new Array,a=7&e;r.length=1+(e>>3),t.nextBytes(r),a>0?r[0]&=(1<<a)-1:r[0]=0,this.fromString(r,256)}},Ie.prototype.bitwiseTo=function(e,t,n){var r,a,o=Math.min(e.t,this.t);for(r=0;r<o;++r)n.data[r]=t(this.data[r],e.data[r]);if(e.t<this.t){for(a=e.s&this.DM,r=o;r<this.t;++r)n.data[r]=t(this.data[r],a);n.t=this.t}else{for(a=this.s&this.DM,r=o;r<e.t;++r)n.data[r]=t(a,e.data[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},Ie.prototype.changeBit=function(e,t){var n=Ie.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},Ie.prototype.addTo=function(e,t){for(var n=0,r=0,a=Math.min(e.t,this.t);n<a;)r+=this.data[n]+e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t.data[n++]=r:r<-1&&(t.data[n++]=this.DV+r),t.t=n,t.clamp()},Ie.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},Ie.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},Ie.prototype.multiplyLowerTo=function(e,t,n){var r,a=Math.min(this.t+e.t,t);for(n.s=0,n.t=a;a>0;)n.data[--a]=0;for(r=n.t-this.t;a<r;++a)n.data[a+this.t]=this.am(0,e.data[a],n,a,0,this.t);for(r=Math.min(e.t,t);a<r;++a)this.am(0,e.data[a],n,a,0,t-a);n.clamp()},Ie.prototype.multiplyUpperTo=function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n.data[this.t+r-t]=this.am(t-r,e.data[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},Ie.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this.data[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this.data[r])%e;return n},Ie.prototype.millerRabin=function(e){var t=this.subtract(Ie.ONE),n=t.getLowestSetBit();if(n<=0)return!1;for(var r,a=t.shiftRight(n),o={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},i=0;i<e;++i){do{r=new Ie(this.bitLength(),o)}while(r.compareTo(Ie.ONE)<=0||r.compareTo(t)>=0);var s=r.modPow(a,this);if(0!=s.compareTo(Ie.ONE)&&0!=s.compareTo(t)){for(var u=1;u++<n&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(Ie.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},Ie.prototype.clone=function(){var e=Ce();return this.copyTo(e),e},Ie.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},Ie.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},Ie.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},Ie.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},Ie.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,a=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[a++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==a&&(128&this.s)!=(128&n)&&++a,(a>0||n!=this.s)&&(t[a++]=n);return t},Ie.prototype.equals=function(e){return 0==this.compareTo(e)},Ie.prototype.min=function(e){return this.compareTo(e)<0?this:e},Ie.prototype.max=function(e){return this.compareTo(e)>0?this:e},Ie.prototype.and=function(e){var t=Ce();return this.bitwiseTo(e,Be,t),t},Ie.prototype.or=function(e){var t=Ce();return this.bitwiseTo(e,Pe,t),t},Ie.prototype.xor=function(e){var t=Ce();return this.bitwiseTo(e,Le,t),t},Ie.prototype.andNot=function(e){var t=Ce();return this.bitwiseTo(e,Ue,t),t},Ie.prototype.not=function(){for(var e=Ce(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},Ie.prototype.shiftLeft=function(e){var t=Ce();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},Ie.prototype.shiftRight=function(e){var t=Ce();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},Ie.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+Ve(this.data[e]);return this.s<0?this.t*this.DB:-1},Ie.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=We(this.data[n]^t);return e},Ie.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},Ie.prototype.setBit=function(e){return this.changeBit(e,Pe)},Ie.prototype.clearBit=function(e){return this.changeBit(e,Ue)},Ie.prototype.flipBit=function(e){return this.changeBit(e,Le)},Ie.prototype.add=function(e){var t=Ce();return this.addTo(e,t),t},Ie.prototype.subtract=function(e){var t=Ce();return this.subTo(e,t),t},Ie.prototype.multiply=function(e){var t=Ce();return this.multiplyTo(e,t),t},Ie.prototype.divide=function(e){var t=Ce();return this.divRemTo(e,t,null),t},Ie.prototype.remainder=function(e){var t=Ce();return this.divRemTo(e,null,t),t},Ie.prototype.divideAndRemainder=function(e){var t=Ce(),n=Ce();return this.divRemTo(e,t,n),new Array(t,n)},Ie.prototype.modPow=function(e,t){var n,r,a=e.bitLength(),o=Oe(1);if(a<=0)return o;n=a<18?1:a<48?3:a<144?4:a<768?5:6,r=a<8?new Me(t):t.isEven()?new He(t):new De(t);var i=new Array,s=3,u=n-1,c=(1<<n)-1;if(i[1]=r.convert(this),n>1){var l=Ce();for(r.sqrTo(i[1],l);s<=c;)i[s]=Ce(),r.mulTo(l,i[s-2],i[s]),s+=2}var d,f,p=e.t-1,h=!0,m=Ce();for(a=Fe(e.data[p])-1;p>=0;){for(a>=u?d=e.data[p]>>a-u&c:(d=(e.data[p]&(1<<a+1)-1)<<u-a,p>0&&(d|=e.data[p-1]>>this.DB+a-u)),s=n;0==(1&d);)d>>=1,--s;if((a-=s)<0&&(a+=this.DB,--p),h)i[d].copyTo(o),h=!1;else{for(;s>1;)r.sqrTo(o,m),r.sqrTo(m,o),s-=2;s>0?r.sqrTo(o,m):(f=o,o=m,m=f),r.mulTo(m,i[d],o)}for(;p>=0&&0==(e.data[p]&1<<a);)r.sqrTo(o,m),f=o,o=m,m=f,--a<0&&(a=this.DB-1,--p)}return r.revert(o)},Ie.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return Ie.ZERO;for(var n=e.clone(),r=this.clone(),a=Oe(1),o=Oe(0),i=Oe(0),s=Oe(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);n.compareTo(r)>=0?(n.subTo(r,n),t&&a.subTo(i,a),o.subTo(s,o)):(r.subTo(n,r),t&&i.subTo(a,i),s.subTo(o,s))}return 0!=r.compareTo(Ie.ONE)?Ie.ZERO:s.compareTo(e)>=0?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s},Ie.prototype.pow=function(e){return this.exp(e,new ze)},Ie.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var a=t.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return t;for(a<o&&(o=a),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(a=t.getLowestSetBit())>0&&t.rShiftTo(a,t),(a=n.getLowestSetBit())>0&&n.rShiftTo(a,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},Ie.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n.data[0]<=Ge[Ge.length-1]){for(t=0;t<Ge.length;++t)if(n.data[0]==Ge[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<Ge.length;){for(var r=Ge[t],a=t+1;a<Ge.length&&r<Ke;)r*=Ge[a++];for(r=n.modInt(r);t<a;)if(r%Ge[t++]==0)return!1}return n.millerRabin(e)},k((function(e){var t=e.exports=W.sha1=W.sha1||{};W.md.sha1=W.md.algorithms.sha1=t,t.create=function(){r||(n=String.fromCharCode(128),n+=W.util.fillString(String.fromCharCode(0),64),r=!0);var e=null,t=W.util.createBuffer(),o=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,r=0;r<n;++r)i.fullMessageLength.push(0);return t=W.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(n,r){"utf8"===r&&(n=W.util.encodeUtf8(n));var s=n.length;i.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=s[1],s[1]=s[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(n),a(e,o,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var r=W.util.createBuffer();r.putBytes(t.bytes());var s,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;r.putBytes(n.substr(0,i.blockLength-u));for(var c=8*i.fullMessageLength[0],l=0;l<i.fullMessageLength.length-1;++l)c+=(s=8*i.fullMessageLength[l+1])/4294967296>>>0,r.putInt32(c>>>0),c=s>>>0;r.putInt32(c);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};a(d,o,r);var f=W.util.createBuffer();return f.putInt32(d.h0),f.putInt32(d.h1),f.putInt32(d.h2),f.putInt32(d.h3),f.putInt32(d.h4),f},i};var n=null,r=!1;function a(e,t,n){for(var r,a,o,i,s,u,c,l=n.length();l>=64;){for(a=e.h0,o=e.h1,i=e.h2,s=e.h3,u=e.h4,c=0;c<16;++c)r=n.getInt32(),t[c]=r,r=(a<<5|a>>>27)+(s^o&(i^s))+u+1518500249+r,u=s,s=i,i=(o<<30|o>>>2)>>>0,o=a,a=r;for(;c<20;++c)r=(r=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|r>>>31,t[c]=r,r=(a<<5|a>>>27)+(s^o&(i^s))+u+1518500249+r,u=s,s=i,i=(o<<30|o>>>2)>>>0,o=a,a=r;for(;c<32;++c)r=(r=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|r>>>31,t[c]=r,r=(a<<5|a>>>27)+(o^i^s)+u+1859775393+r,u=s,s=i,i=(o<<30|o>>>2)>>>0,o=a,a=r;for(;c<40;++c)r=(r=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|r>>>30,t[c]=r,r=(a<<5|a>>>27)+(o^i^s)+u+1859775393+r,u=s,s=i,i=(o<<30|o>>>2)>>>0,o=a,a=r;for(;c<60;++c)r=(r=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|r>>>30,t[c]=r,r=(a<<5|a>>>27)+(o&i|s&(o^i))+u+2400959708+r,u=s,s=i,i=(o<<30|o>>>2)>>>0,o=a,a=r;for(;c<80;++c)r=(r=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|r>>>30,t[c]=r,r=(a<<5|a>>>27)+(o^i^s)+u+3395469782+r,u=s,s=i,i=(o<<30|o>>>2)>>>0,o=a,a=r;e.h0=e.h0+a|0,e.h1=e.h1+o|0,e.h2=e.h2+i|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,l-=64}}})),k((function(e){var t=e.exports=W.pkcs1=W.pkcs1||{};function n(e,t,n){n||(n=W.md.sha1.create());for(var r="",a=Math.ceil(t/n.digestLength),o=0;o<a;++o){var i=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);n.start(),n.update(e+i),r+=n.digest().getBytes()}return r.substring(0,t)}t.encode_rsa_oaep=function(e,t,r){var a,o,i,s;"string"==typeof r?(a=r,o=arguments[3]||void 0,i=arguments[4]||void 0):r&&(a=r.label||void 0,o=r.seed||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),i?i.start():i=W.md.sha1.create(),s||(s=i);var u=Math.ceil(e.n.bitLength()/8),c=u-2*i.digestLength-2;if(t.length>c)throw(h=new Error("RSAES-OAEP input message length is too long.")).length=t.length,h.maxLength=c,h;a||(a=""),i.update(a,"raw");for(var l=i.digest(),d="",f=c-t.length,p=0;p<f;p++)d+="\0";var h,m=l.getBytes()+d+""+t;if(o){if(o.length!==i.digestLength)throw(h=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=o.length,h.digestLength=i.digestLength,h}else o=W.random.getBytes(i.digestLength);var g=n(o,u-i.digestLength-1,s),v=W.util.xorBytes(m,g,m.length),y=n(v,i.digestLength,s);return"\0"+W.util.xorBytes(o,y,o.length)+v},t.decode_rsa_oaep=function(e,t,r){var a,o,i;"string"==typeof r?(a=r,o=arguments[3]||void 0):r&&(a=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(i=r.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s)throw(g=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,g.expectedLength=s,g;if(void 0===o?o=W.md.sha1.create():o.start(),i||(i=o),s<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");a||(a=""),o.update(a,"raw");for(var u=o.digest().getBytes(),c=t.charAt(0),l=t.substring(1,o.digestLength+1),d=t.substring(1+o.digestLength),f=n(d,o.digestLength,i),p=n(W.util.xorBytes(l,f,l.length),s-o.digestLength-1,i),h=W.util.xorBytes(d,p,d.length),m=h.substring(0,o.digestLength),g="\0"!==c,v=0;v<o.digestLength;++v)g|=u.charAt(v)!==m.charAt(v);for(var y=1,b=o.digestLength,x=o.digestLength;x<h.length;x++){var k=h.charCodeAt(x);g|=k&(y?65534:0),b+=y&=1&k^1}if(g||1!==h.charCodeAt(b))throw new Error("Invalid RSAES-OAEP padding.");return h.substring(b+1)}})),k((function(e){!function(){if(W.prime)e.exports=W.prime;else{var t=e.exports=W.prime=W.prime||{},n=W.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],a=new n(null);a.fromInt(30);var o=function(e,t){return e|t};t.generateProbablePrime=function(e,t,r){"function"==typeof t&&(r=t,t={});var a=(t=t||{}).algorithm||"PRIMEINC";"string"==typeof a&&(a={name:a}),a.options=a.options||{};var o=t.prng||W.random,u={nextBytes:function(e){for(var t=o.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}};if("PRIMEINC"===a.name)return function(e,t,r,a){return"workers"in r?function(e,t,r,a){if("undefined"==typeof Worker)return i(e,t,r,a);var o=s(e,t),u=r.workers,c=r.workLoad||100,l=30*c/8,d=r.workerScript||"forge/prime.worker.js";if(-1===u)return W.util.estimateCores((function(e,t){e&&(t=2),u=t-1,f()}));function f(){u=Math.max(1,u);for(var r=[],i=0;i<u;++i)r[i]=new Worker(d);for(i=0;i<u;++i)r[i].addEventListener("message",p);var f=!1;function p(i){if(!f){var u=i.data;if(u.found){for(var d=0;d<r.length;++d)r[d].terminate();return f=!0,a(null,new n(u.prime,16))}o.bitLength()>e&&(o=s(e,t));var p=o.toString(16);i.target.postMessage({hex:p,workLoad:c}),o.dAddOffset(l,0)}}}f()}(e,t,r,a):i(e,t,r,a)}(e,u,a.options,r);throw new Error("Invalid prime generation algorithm: "+a.name)}}function i(e,t,n,a){var o=s(e,t),i=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(o.bitLength());"millerRabinTests"in n&&(i=n.millerRabinTests);var u=10;"maxBlockTime"in n&&(u=n.maxBlockTime),function e(t,n,a,o,i,u,c){var l=+new Date;do{if(t.bitLength()>n&&(t=s(n,a)),t.isProbablePrime(i))return c(null,t);t.dAddOffset(r[o++%8],0)}while(u<0||+new Date-l<u);W.util.setImmediate((function(){e(t,n,a,o,i,u,c)}))}(o,e,t,0,i,u,a)}function s(e,t){var r=new n(e,t),i=e-1;return r.testBit(i)||r.bitwiseTo(n.ONE.shiftLeft(i),o,r),r.dAddOffset(31-r.mod(a).byteValue(),0),r}}()})),void 0===qe)var qe=W.jsbn.BigInteger;var Xe=W.util.isNodejs?t:null,Qe=W.asn1,Ye=W.util;W.pki=W.pki||{},W.pki.rsa=W.rsa=W.rsa||{};var $e=W.pki,Ze=[6,4,2,4,2,4,6,2],Je={name:"PrivateKeyInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},et={name:"RSAPrivateKey",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},tt={name:"RSAPublicKey",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},nt=W.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},rt=function(e){var t;if(!(e.algorithm in $e.oids)){var n=new Error("Unknown message digest algorithm.");throw n.algorithm=e.algorithm,n}t=$e.oids[e.algorithm];var r=Qe.oidToDer(t).getBytes(),a=Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[]),o=Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[]);o.value.push(Qe.create(Qe.Class.UNIVERSAL,Qe.Type.OID,!1,r)),o.value.push(Qe.create(Qe.Class.UNIVERSAL,Qe.Type.NULL,!1,""));var i=Qe.create(Qe.Class.UNIVERSAL,Qe.Type.OCTETSTRING,!1,e.digest().getBytes());return a.value.push(o),a.value.push(i),Qe.toDer(a).getBytes()},at=function(e,t,n){if(n)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var r;t.dP||(t.dP=t.d.mod(t.p.subtract(qe.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(qe.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{r=new qe(W.util.bytesToHex(W.random.getBytes(t.n.bitLength()/8)),16)}while(r.compareTo(t.n)>=0||!r.gcd(t.n).equals(qe.ONE));for(var a=(e=e.multiply(r.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),o=e.mod(t.q).modPow(t.dQ,t.q);a.compareTo(o)<0;)a=a.add(t.p);var i=a.subtract(o).multiply(t.qInv).mod(t.p).multiply(t.q).add(o);return i.multiply(r.modInverse(t.n)).mod(t.n)};function ot(e,t,n){var r=W.util.createBuffer(),a=Math.ceil(t.n.bitLength()/8);if(e.length>a-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=e.length,o.max=a-11,o}r.putByte(0),r.putByte(n);var i,s=a-3-e.length;if(0===n||1===n){i=0===n?0:255;for(var u=0;u<s;++u)r.putByte(i)}else for(;s>0;){var c=0,l=W.random.getBytes(s);for(u=0;u<s;++u)0===(i=l.charCodeAt(u))?++c:r.putByte(i);s=c}return r.putByte(0),r.putBytes(e),r}function it(e,t,n,r){var a=Math.ceil(t.n.bitLength()/8),o=W.util.createBuffer(e),i=o.getByte(),s=o.getByte();if(0!==i||n&&0!==s&&1!==s||!n&&2!=s||n&&0===s&&void 0===r)throw new Error("Encryption block is invalid.");var u=0;if(0===s){u=a-3-r;for(var c=0;c<u;++c)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===s)for(u=0;o.length()>1;){if(255!==o.getByte()){--o.read;break}++u}else if(2===s)for(u=0;o.length()>1;){if(0===o.getByte()){--o.read;break}++u}if(0!==o.getByte()||u!==a-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function st(e,t,n){"function"==typeof t&&(n=t,t={});var r={algorithm:{name:(t=t||{}).algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};function a(){o(e.pBits,(function(t,r){return t?n(t):(e.p=r,null!==e.q?i(t,e.q):void o(e.qBits,i))}))}function o(e,t){W.prime.generateProbablePrime(e,r,t)}function i(t,r){if(t)return n(t);if(e.q=r,e.p.compareTo(e.q)<0){var s=e.p;e.p=e.q,e.q=s}if(0!==e.p.subtract(qe.ONE).gcd(e.e).compareTo(qe.ONE))return e.p=null,void a();if(0!==e.q.subtract(qe.ONE).gcd(e.e).compareTo(qe.ONE))return e.q=null,void o(e.qBits,i);if(e.p1=e.p.subtract(qe.ONE),e.q1=e.q.subtract(qe.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(qe.ONE))return e.p=e.q=null,void a();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void o(e.qBits,i);var u=e.e.modInverse(e.phi);e.keys={privateKey:$e.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:$e.rsa.setPublicKey(e.n,e.e)},n(null,e.keys)}"prng"in t&&(r.prng=t.prng),a()}function ut(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var n=W.util.hexToBytes(t);return n.length>1&&(0===n.charCodeAt(0)&&0==(128&n.charCodeAt(1))||255===n.charCodeAt(0)&&128==(128&n.charCodeAt(1)))?n.substr(1):n}function ct(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function lt(e){return W.util.isNodejs&&"function"==typeof Xe[e]}function dt(e){return void 0!==Ye.globalScope&&"object"==typeof Ye.globalScope.crypto&&"object"==typeof Ye.globalScope.crypto.subtle&&"function"==typeof Ye.globalScope.crypto.subtle[e]}function ft(e){return void 0!==Ye.globalScope&&"object"==typeof Ye.globalScope.msCrypto&&"object"==typeof Ye.globalScope.msCrypto.subtle&&"function"==typeof Ye.globalScope.msCrypto.subtle[e]}function pt(e){for(var t=W.util.hexToBytes(e.toString(16)),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}if($e.rsa.encrypt=function(e,t,n){var r,a=n,o=Math.ceil(t.n.bitLength()/8);!1!==n&&!0!==n?(a=2===n,r=ot(e,t,n)):(r=W.util.createBuffer()).putBytes(e);for(var i=new qe(r.toHex(),16),s=at(i,t,a).toString(16),u=W.util.createBuffer(),c=o-Math.ceil(s.length/2);c>0;)u.putByte(0),--c;return u.putBytes(W.util.hexToBytes(s)),u.getBytes()},$e.rsa.decrypt=function(e,t,n,r){var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var o=new Error("Encrypted message length is invalid.");throw o.length=e.length,o.expected=a,o}var i=new qe(W.util.createBuffer(e).toHex(),16);if(i.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var s=at(i,t,n).toString(16),u=W.util.createBuffer(),c=a-Math.ceil(s.length/2);c>0;)u.putByte(0),--c;return u.putBytes(W.util.hexToBytes(s)),!1!==r?it(u.getBytes(),t,n):u.getBytes()},$e.rsa.createKeyPairGenerationState=function(e,t,n){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048;var r,a=(n=n||{}).prng||W.random,o={nextBytes:function(e){for(var t=a.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}},i=n.algorithm||"PRIMEINC";if("PRIMEINC"!==i)throw new Error("Invalid key generation algorithm: "+i);return(r={algorithm:i,state:0,bits:e,rng:o,eInt:t||65537,e:new qe(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(r.eInt),r},$e.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var n=new qe(null);n.fromInt(30);for(var r,a=0,o=function(e,t){return e|t},i=+new Date,s=0;null===e.keys&&(t<=0||s<t);){if(0===e.state){var u=null===e.p?e.pBits:e.qBits,c=u-1;0===e.pqState?(e.num=new qe(u,e.rng),e.num.testBit(c)||e.num.bitwiseTo(qe.ONE.shiftLeft(c),o,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),a=0,++e.pqState):1===e.pqState?e.num.bitLength()>u?e.pqState=0:e.num.isProbablePrime(ct(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(Ze[a++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(qe.ONE).gcd(e.e).compareTo(qe.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(qe.ONE),e.q1=e.q.subtract(qe.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(qe.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var l=e.e.modInverse(e.phi);e.keys={privateKey:$e.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:$e.rsa.setPublicKey(e.n,e.e)}}s+=(r=+new Date)-i,i=r}return null!==e.keys},$e.rsa.generateKeyPair=function(e,t,n,r){if(1===arguments.length?"object"==typeof e?(n=e,e=void 0):"function"==typeof e&&(r=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(r=t,t=void 0):"number"!=typeof t&&(n=t,t=void 0):(n=e,r=t,e=void 0,t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof n&&(r=n,n=void 0):(r=n,n=t,t=void 0)),n=n||{},void 0===e&&(e=n.bits||2048),void 0===t&&(t=n.e||65537),!n.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(r){if(lt("generateKeyPair"))return Xe.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,n){if(e)return r(e);r(null,{privateKey:$e.privateKeyFromPem(n),publicKey:$e.publicKeyFromPem(t)})}));if(dt("generateKey")&&dt("exportKey"))return Ye.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:pt(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return Ye.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){r(e)})).then((function(e){if(e){var t=$e.privateKeyFromAsn1(Qe.fromDer(W.util.createBuffer(e)));r(null,{privateKey:t,publicKey:$e.setRsaPublicKey(t.n,t.e)})}}));if(ft("generateKey")&&ft("exportKey")){var a=Ye.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:pt(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return a.oncomplete=function(e){var t=e.target.result,n=Ye.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);n.oncomplete=function(e){var t=e.target.result,n=$e.privateKeyFromAsn1(Qe.fromDer(W.util.createBuffer(t)));r(null,{privateKey:n,publicKey:$e.setRsaPublicKey(n.n,n.e)})},n.onerror=function(e){r(e)}},void(a.onerror=function(e){r(e)})}}else if(lt("generateKeyPairSync")){var o=Xe.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:$e.privateKeyFromPem(o.privateKey),publicKey:$e.publicKeyFromPem(o.publicKey)}}var i=$e.rsa.createKeyPairGenerationState(e,t,n);if(!r)return $e.rsa.stepKeyPairGenerationState(i,0),i.keys;st(i,n,r)},$e.setRsaPublicKey=$e.rsa.setPublicKey=function(e,t){var n={n:e,e:t,encrypt:function(e,t,r){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,n){return ot(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return W.pkcs1.encode_rsa_oaep(t,e,r)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var a=t.encode(e,n,!0);return $e.rsa.encrypt(a,n,!0)},verify:function(e,t,r){"string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===r?r={verify:function(e,t){return t=it(t,n,!0),e===Qe.fromDer(t).value[1].value}}:"NONE"!==r&&"NULL"!==r&&null!==r||(r={verify:function(e,t){return e===it(t,n,!0)}});var a=$e.rsa.decrypt(t,n,!0,!1);return r.verify(e,a,n.n.bitLength())}};return n},$e.setRsaPrivateKey=$e.rsa.setPrivateKey=function(e,t,n,r,a,o,i,s){var u={n:e,e:t,d:n,p:r,q:a,dP:o,dQ:i,qInv:s,decrypt:function(e,t,n){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var r=$e.rsa.decrypt(e,u,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:it};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return W.pkcs1.decode_rsa_oaep(t,e,n)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(r,u,!1)},sign:function(e,t){var n=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:rt},n=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},n=1);var r=t.encode(e,u.n.bitLength());return $e.rsa.encrypt(r,u,n)}};return u},$e.wrapRsaPrivateKey=function(e){return Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,Qe.integerToDer(0).getBytes()),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[Qe.create(Qe.Class.UNIVERSAL,Qe.Type.OID,!1,Qe.oidToDer($e.oids.rsaEncryption).getBytes()),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.NULL,!1,"")]),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.OCTETSTRING,!1,Qe.toDer(e).getBytes())])},$e.privateKeyFromAsn1=function(e){var t,n,r,a,o,i,s,u,c={},l=[];if(Qe.validate(e,Je,c,l)&&(e=Qe.fromDer(W.util.createBuffer(c.privateKey))),c={},l=[],!Qe.validate(e,et,c,l)){var d=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw d.errors=l,d}return t=W.util.createBuffer(c.privateKeyModulus).toHex(),n=W.util.createBuffer(c.privateKeyPublicExponent).toHex(),r=W.util.createBuffer(c.privateKeyPrivateExponent).toHex(),a=W.util.createBuffer(c.privateKeyPrime1).toHex(),o=W.util.createBuffer(c.privateKeyPrime2).toHex(),i=W.util.createBuffer(c.privateKeyExponent1).toHex(),s=W.util.createBuffer(c.privateKeyExponent2).toHex(),u=W.util.createBuffer(c.privateKeyCoefficient).toHex(),$e.setRsaPrivateKey(new qe(t,16),new qe(n,16),new qe(r,16),new qe(a,16),new qe(o,16),new qe(i,16),new qe(s,16),new qe(u,16))},$e.privateKeyToAsn1=$e.privateKeyToRSAPrivateKey=function(e){return Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,Qe.integerToDer(0).getBytes()),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.n)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.e)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.d)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.p)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.q)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.dP)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.dQ)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.qInv))])},$e.publicKeyFromAsn1=function(e){var t={},n=[];if(Qe.validate(e,nt,t,n)){var r,a=Qe.derToOid(t.publicKeyOid);if(a!==$e.oids.rsaEncryption)throw(r=new Error("Cannot read public key. Unknown OID.")).oid=a,r;e=t.rsaPublicKey}if(n=[],!Qe.validate(e,tt,t,n))throw(r=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=n,r;var o=W.util.createBuffer(t.publicKeyModulus).toHex(),i=W.util.createBuffer(t.publicKeyExponent).toHex();return $e.setRsaPublicKey(new qe(o,16),new qe(i,16))},$e.publicKeyToAsn1=$e.publicKeyToSubjectPublicKeyInfo=function(e){return Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[Qe.create(Qe.Class.UNIVERSAL,Qe.Type.OID,!1,Qe.oidToDer($e.oids.rsaEncryption).getBytes()),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.NULL,!1,"")]),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.BITSTRING,!1,[$e.publicKeyToRSAPublicKey(e)])])},$e.publicKeyToRSAPublicKey=function(e){return Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.n)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.e))])},void 0===ht)var ht=W.jsbn.BigInteger;var mt=W.asn1,gt=W.pki=W.pki||{},vt=(gt.pbe=W.pbe=W.pbe||{},gt.oids),yt={name:"EncryptedPrivateKeyInfo",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},bt={name:"PBES2Algorithms",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},xt={name:"pkcs-12PbeParams",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,capture:"iterations"}]};function kt(e,t){return e.start().update(t).digest().getBytes()}function wt(e){var t;if(e){if(!(t=gt.oids[mt.derToOid(e)])){var n=new Error("Unsupported PRF OID.");throw n.oid=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}}else t="hmacWithSHA1";return It(t)}function It(e){var t=W.md;switch(e){case"hmacWithSHA224":t=W.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}gt.encryptPrivateKeyInfo=function(e,t,n){(n=n||{}).saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var r,a,o,i=W.random.getBytesSync(n.saltSize),s=n.count,u=mt.integerToDer(s);if(0===n.algorithm.indexOf("aes")||"des"===n.algorithm){var c,l,d;switch(n.algorithm){case"aes128":r=16,c=16,l=vt["aes128-CBC"],d=W.aes.createEncryptionCipher;break;case"aes192":r=24,c=16,l=vt["aes192-CBC"],d=W.aes.createEncryptionCipher;break;case"aes256":r=32,c=16,l=vt["aes256-CBC"],d=W.aes.createEncryptionCipher;break;case"des":r=8,c=8,l=vt.desCBC,d=W.des.createEncryptionCipher;break;default:throw(v=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=n.algorithm,v}var f="hmacWith"+n.prfAlgorithm.toUpperCase(),p=It(f),h=W.pkcs5.pbkdf2(t,i,s,r,p),m=W.random.getBytesSync(c);(y=d(h)).start(m),y.update(mt.toDer(e)),y.finish(),o=y.output.getBytes();var g=function(e,t,n,r){var a=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,e),mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,t.getBytes())]);return"hmacWithSHA1"!==r&&a.value.push(mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,W.util.hexToBytes(n.toString(16))),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(gt.oids[r]).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.NULL,!1,"")])),a}(i,u,r,f);a=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(vt.pkcs5PBES2).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(vt.pkcs5PBKDF2).getBytes()),g]),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(l).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,m)])])])}else{var v;if("3des"!==n.algorithm)throw(v=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=n.algorithm,v;r=24;var y,b=new W.util.ByteBuffer(i);h=gt.pbe.generatePkcs12Key(t,b,1,s,r),m=gt.pbe.generatePkcs12Key(t,b,2,s,r),(y=W.des.createEncryptionCipher(h)).start(m),y.update(mt.toDer(e)),y.finish(),o=y.output.getBytes(),a=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(vt["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,i),mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,u.getBytes())])])}return mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[a,mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,o)])},gt.decryptPrivateKeyInfo=function(e,t){var n=null,r={},a=[];if(!mt.validate(e,yt,r,a)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=a,o}var i=mt.derToOid(r.encryptionOid),s=gt.pbe.getCipher(i,r.encryptionParams,t),u=W.util.createBuffer(r.encryptedData);return s.update(u),s.finish()&&(n=mt.fromDer(s.output)),n},gt.encryptedPrivateKeyToPem=function(e,t){var n={type:"ENCRYPTED PRIVATE KEY",body:mt.toDer(e).getBytes()};return W.pem.encode(n,{maxline:t})},gt.encryptedPrivateKeyFromPem=function(e){var t=W.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return mt.fromDer(t.body)},gt.encryptRsaPrivateKey=function(e,t,n){if(!(n=n||{}).legacy){var r=gt.wrapRsaPrivateKey(gt.privateKeyToAsn1(e));return r=gt.encryptPrivateKeyInfo(r,t,n),gt.encryptedPrivateKeyToPem(r)}var a,o,i,s;switch(n.algorithm){case"aes128":a="AES-128-CBC",i=16,o=W.random.getBytesSync(16),s=W.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",i=24,o=W.random.getBytesSync(16),s=W.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",i=32,o=W.random.getBytesSync(16),s=W.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",i=24,o=W.random.getBytesSync(8),s=W.des.createEncryptionCipher;break;case"des":a="DES-CBC",i=8,o=W.random.getBytesSync(8),s=W.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw u.algorithm=n.algorithm,u}var c=s(W.pbe.opensslDeriveBytes(t,o.substr(0,8),i));c.start(o),c.update(mt.toDer(gt.privateKeyToAsn1(e))),c.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:W.util.bytesToHex(o).toUpperCase()},body:c.output.getBytes()};return W.pem.encode(l)},gt.decryptRsaPrivateKey=function(e,t){var n=null,r=W.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==r.type&&"PRIVATE KEY"!==r.type&&"RSA PRIVATE KEY"!==r.type)throw(i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=i,i;if(r.procType&&"ENCRYPTED"===r.procType.type){var a,o;switch(r.dekInfo.algorithm){case"DES-CBC":a=8,o=W.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,o=W.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,o=W.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,o=W.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,o=W.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,o=function(e){return W.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":a=8,o=function(e){return W.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":a=16,o=function(e){return W.rc2.createDecryptionCipher(e,128)};break;default:var i;throw(i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+r.dekInfo.algorithm+'".')).algorithm=r.dekInfo.algorithm,i}var s=W.util.hexToBytes(r.dekInfo.parameters),u=o(W.pbe.opensslDeriveBytes(t,s.substr(0,8),a));if(u.start(s),u.update(W.util.createBuffer(r.body)),!u.finish())return n;n=u.output.getBytes()}else n=r.body;return null!==(n="ENCRYPTED PRIVATE KEY"===r.type?gt.decryptPrivateKeyInfo(mt.fromDer(n),t):mt.fromDer(n))&&(n=gt.privateKeyFromAsn1(n)),n},gt.pbe.generatePkcs12Key=function(e,t,n,r,a,o){var i,s;if(null==o){if(!("sha1"in W.md))throw new Error('"sha1" hash algorithm unavailable.');o=W.md.sha1.create()}var u=o.digestLength,c=o.blockLength,l=new W.util.ByteBuffer,d=new W.util.ByteBuffer;if(null!=e){for(s=0;s<e.length;s++)d.putInt16(e.charCodeAt(s));d.putInt16(0)}var f=d.length(),p=t.length(),h=new W.util.ByteBuffer;h.fillWithByte(n,c);var m=c*Math.ceil(p/c),g=new W.util.ByteBuffer;for(s=0;s<m;s++)g.putByte(t.at(s%p));var v=c*Math.ceil(f/c),y=new W.util.ByteBuffer;for(s=0;s<v;s++)y.putByte(d.at(s%f));var b=g;b.putBuffer(y);for(var x=Math.ceil(a/u),k=1;k<=x;k++){var w=new W.util.ByteBuffer;w.putBytes(h.bytes()),w.putBytes(b.bytes());for(var I=0;I<r;I++)o.start(),o.update(w.getBytes()),w=o.digest();var C=new W.util.ByteBuffer;for(s=0;s<c;s++)C.putByte(w.at(s%u));var E=Math.ceil(p/c)+Math.ceil(f/c),S=new W.util.ByteBuffer;for(i=0;i<E;i++){var T=new W.util.ByteBuffer(b.getBytes(c)),A=511;for(s=C.length()-1;s>=0;s--)A>>=8,A+=C.at(s)+T.at(s),T.setAt(s,255&A);S.putBuffer(T)}b=S,l.putBuffer(w)}return l.truncate(l.length()-a),l},gt.pbe.getCipher=function(e,t,n){switch(e){case gt.oids.pkcs5PBES2:return gt.pbe.getCipherForPBES2(e,t,n);case gt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case gt.oids["pbewithSHAAnd40BitRC2-CBC"]:return gt.pbe.getCipherForPKCS12PBE(e,t,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=e,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}},gt.pbe.getCipherForPBES2=function(e,t,n){var r,a={},o=[];if(!mt.validate(t,bt,a,o))throw(r=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=o,r;if((e=mt.derToOid(a.kdfOid))!==gt.oids.pkcs5PBKDF2)throw(r=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,r.supportedOids=["pkcs5PBKDF2"],r;if((e=mt.derToOid(a.encOid))!==gt.oids["aes128-CBC"]&&e!==gt.oids["aes192-CBC"]&&e!==gt.oids["aes256-CBC"]&&e!==gt.oids["des-EDE3-CBC"]&&e!==gt.oids.desCBC)throw(r=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,r.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],r;var i,s,u=a.kdfSalt,c=W.util.createBuffer(a.kdfIterationCount);switch(c=c.getInt(c.length()<<3),gt.oids[e]){case"aes128-CBC":i=16,s=W.aes.createDecryptionCipher;break;case"aes192-CBC":i=24,s=W.aes.createDecryptionCipher;break;case"aes256-CBC":i=32,s=W.aes.createDecryptionCipher;break;case"des-EDE3-CBC":i=24,s=W.des.createDecryptionCipher;break;case"desCBC":i=8,s=W.des.createDecryptionCipher}var l=wt(a.prfOid),d=W.pkcs5.pbkdf2(n,u,c,i,l),f=a.encIv,p=s(d);return p.start(f),p},gt.pbe.getCipherForPKCS12PBE=function(e,t,n){var r={},a=[];if(!mt.validate(t,xt,r,a))throw(l=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,l;var o,i,s,u=W.util.createBuffer(r.salt),c=W.util.createBuffer(r.iterations);switch(c=c.getInt(c.length()<<3),e){case gt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:o=24,i=8,s=W.des.startDecrypting;break;case gt.oids["pbewithSHAAnd40BitRC2-CBC"]:o=5,i=8,s=function(e,t){var n=W.rc2.createDecryptionCipher(e,40);return n.start(t,null),n};break;default:var l;throw(l=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,l}var d=wt(r.prfOid),f=gt.pbe.generatePkcs12Key(n,u,1,c,o,d);return d.start(),s(f,gt.pbe.generatePkcs12Key(n,u,2,c,i,d))},gt.pbe.opensslDeriveBytes=function(e,t,n,r){if(null==r){if(!("md5"in W.md))throw new Error('"md5" hash algorithm unavailable.');r=W.md.md5.create()}null===t&&(t="");for(var a=[kt(r,e+t)],o=16,i=1;o<n;++i,o+=16)a.push(kt(r,a[i-1]+e+t));return a.join("").substr(0,n)},k((function(e){var t=W.asn1,n=e.exports=W.pkcs7asn1=W.pkcs7asn1||{};W.pkcs7=W.pkcs7||{},W.pkcs7.asn1=n;var r={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};n.contentInfoValidator=r;var a={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};n.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},n.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var o={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};n.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},r,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[o]}]},n.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}})),k((function(e){W.mgf=W.mgf||{},(e.exports=W.mgf.mgf1=W.mgf1=W.mgf1||{}).create=function(e){return{generate:function(t,n){for(var r=new W.util.ByteBuffer,a=Math.ceil(n/e.digestLength),o=0;o<a;o++){var i=new W.util.ByteBuffer;i.putInt32(o),e.start(),e.update(t+i.getBytes()),r.putBuffer(e.digest())}return r.truncate(r.length()-n),r.getBytes()}}}})),W.mgf=W.mgf||{},W.mgf.mgf1=W.mgf1,k((function(e){(e.exports=W.pss=W.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,n=e.md,r=e.mgf,a=n.digestLength,o=e.salt||null;if("string"==typeof o&&(o=W.util.createBuffer(o)),"saltLength"in e)t=e.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");t=o.length()}if(null!==o&&o.length()!==t)throw new Error("Given salt length does not match length of given salt.");var i=e.prng||W.random;return{encode:function(e,s){var u,c,l=s-1,d=Math.ceil(l/8),f=e.digest().getBytes();if(d<a+t+2)throw new Error("Message is too long to encrypt.");c=null===o?i.getBytesSync(t):o.bytes();var p=new W.util.ByteBuffer;p.fillWithByte(0,8),p.putBytes(f),p.putBytes(c),n.start(),n.update(p.getBytes());var h=n.digest().getBytes(),m=new W.util.ByteBuffer;m.fillWithByte(0,d-t-a-2),m.putByte(1),m.putBytes(c);var g=m.getBytes(),v=d-a-1,y=r.generate(h,v),b="";for(u=0;u<v;u++)b+=String.fromCharCode(g.charCodeAt(u)^y.charCodeAt(u));var x=65280>>8*d-l&255;return(b=String.fromCharCode(b.charCodeAt(0)&~x)+b.substr(1))+h+String.fromCharCode(188)},verify:function(e,o,i){var s,u=i-1,c=Math.ceil(u/8);if(o=o.substr(-c),c<a+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(c-1))throw new Error("Encoded message does not end in 0xBC.");var l=c-a-1,d=o.substr(0,l),f=o.substr(l,a),p=65280>>8*c-u&255;if(0!=(d.charCodeAt(0)&p))throw new Error("Bits beyond keysize not zero as expected.");var h=r.generate(f,l),m="";for(s=0;s<l;s++)m+=String.fromCharCode(d.charCodeAt(s)^h.charCodeAt(s));m=String.fromCharCode(m.charCodeAt(0)&~p)+m.substr(1);var g=c-a-t-2;for(s=0;s<g;s++)if(0!==m.charCodeAt(s))throw new Error("Leftmost octets not zero as expected");if(1!==m.charCodeAt(g))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var v=m.substr(-t),y=new W.util.ByteBuffer;return y.fillWithByte(0,8),y.putBytes(e),y.putBytes(v),n.start(),n.update(y.getBytes()),f===n.digest().getBytes()}}}})),k((function(e){var t=W.asn1,n=e.exports=W.pki=W.pki||{},r=n.oids,a={};a.CN=r.commonName,a.commonName="CN",a.C=r.countryName,a.countryName="C",a.L=r.localityName,a.localityName="L",a.ST=r.stateOrProvinceName,a.stateOrProvinceName="ST",a.O=r.organizationName,a.organizationName="O",a.OU=r.organizationalUnitName,a.organizationalUnitName="OU",a.E=r.emailAddress,a.emailAddress="E";var o=W.pki.rsa.publicKeyValidator,i={name:"Certificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},o,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},s={name:"rsapss",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},u={name:"CertificationRequestInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},o,{name:"CertificationRequestInfo.attributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0}]}]}]},c={name:"CertificationRequest",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[u,{name:"CertificationRequest.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function l(e,t){"string"==typeof t&&(t={shortName:t});for(var n,r=null,a=0;null===r&&a<e.attributes.length;++a)n=e.attributes[a],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}n.RDNAttributesAsArray=function(e,n){for(var o,i,s,u=[],c=0;c<e.value.length;++c){o=e.value[c];for(var l=0;l<o.value.length;++l)s={},i=o.value[l],s.type=t.derToOid(i.value[0].value),s.value=i.value[1].value,s.valueTagClass=i.value[1].type,s.type in r&&(s.name=r[s.type],s.name in a&&(s.shortName=a[s.name])),n&&(n.update(s.type),n.update(s.value)),u.push(s)}return u},n.CRIAttributesAsArray=function(e){for(var o=[],i=0;i<e.length;++i)for(var s=e[i],u=t.derToOid(s.value[0].value),c=s.value[1].value,l=0;l<c.length;++l){var d={};if(d.type=u,d.value=c[l].value,d.valueTagClass=c[l].type,d.type in r&&(d.name=r[d.type],d.name in a&&(d.shortName=a[d.name])),d.type===r.extensionRequest){d.extensions=[];for(var f=0;f<d.value.length;++f)d.extensions.push(n.certificateExtensionFromAsn1(d.value[f]))}o.push(d)}return o};var d=function(e,n,a){var o={};if(e!==r["RSASSA-PSS"])return o;a&&(o={hash:{algorithmOid:r.sha1},mgf:{algorithmOid:r.mgf1,hash:{algorithmOid:r.sha1}},saltLength:20});var i={},u=[];if(!t.validate(n,s,i,u)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=u,c}return void 0!==i.hashOid&&(o.hash=o.hash||{},o.hash.algorithmOid=t.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(o.mgf=o.mgf||{},o.mgf.algorithmOid=t.derToOid(i.maskGenOid),o.mgf.hash=o.mgf.hash||{},o.mgf.hash.algorithmOid=t.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(o.saltLength=i.saltLength.charCodeAt(0)),o};function f(e){for(var n,r,a=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),o=e.attributes,i=0;i<o.length;++i){var s=(n=o[i]).value,u=t.Type.PRINTABLESTRING;"valueTagClass"in n&&(u=n.valueTagClass)===t.Type.UTF8&&(s=W.util.encodeUtf8(s)),r=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.type).getBytes()),t.create(t.Class.UNIVERSAL,u,!1,s)])]),a.value.push(r)}return a}function p(e){for(var o,i=0;i<e.length;++i){if(void 0===(o=e[i]).name&&(o.type&&o.type in n.oids?o.name=n.oids[o.type]:o.shortName&&o.shortName in a&&(o.name=n.oids[a[o.shortName]])),void 0===o.type){if(!o.name||!(o.name in n.oids))throw(u=new Error("Attribute type not specified.")).attribute=o,u;o.type=n.oids[o.name]}if(void 0===o.shortName&&o.name&&o.name in a&&(o.shortName=a[o.name]),o.type===r.extensionRequest&&(o.valueConstructed=!0,o.valueTagClass=t.Type.SEQUENCE,!o.value&&o.extensions)){o.value=[];for(var s=0;s<o.extensions.length;++s)o.value.push(n.certificateExtensionToAsn1(h(o.extensions[s])))}var u;if(void 0===o.value)throw(u=new Error("Attribute value not specified.")).attribute=o,u}}function h(e,a){if(a=a||{},void 0===e.name&&e.id&&e.id in n.oids&&(e.name=n.oids[e.id]),void 0===e.id){if(!e.name||!(e.name in n.oids))throw(x=new Error("Extension ID not specified.")).extension=e,x;e.id=n.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var o=0,i=0,s=0;e.digitalSignature&&(i|=128,o=7),e.nonRepudiation&&(i|=64,o=6),e.keyEncipherment&&(i|=32,o=5),e.dataEncipherment&&(i|=16,o=4),e.keyAgreement&&(i|=8,o=3),e.keyCertSign&&(i|=4,o=2),e.cRLSign&&(i|=2,o=1),e.encipherOnly&&(i|=1,o=0),e.decipherOnly&&(s|=128,o=7);var u=String.fromCharCode(o);0!==s?u+=String.fromCharCode(i)+String.fromCharCode(s):0!==i&&(u+=String.fromCharCode(i)),e.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,u)}else if("basicConstraints"===e.name)e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var c=e.value.value;for(var l in e)!0===e[l]&&(l in r?c.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r[l]).getBytes())):-1!==l.indexOf(".")&&c.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(l).getBytes())))}else if("nsCertType"===e.name)o=0,i=0,e.client&&(i|=128,o=7),e.server&&(i|=64,o=6),e.email&&(i|=32,o=5),e.objsign&&(i|=16,o=4),e.reserved&&(i|=8,o=3),e.sslCA&&(i|=4,o=2),e.emailCA&&(i|=2,o=1),e.objCA&&(i|=1,o=0),u=String.fromCharCode(o),0!==i&&(u+=String.fromCharCode(i)),e.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,u);else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var d=0;d<e.altNames.length;++d){if(u=(v=e.altNames[d]).value,7===v.type&&v.ip){if(null===(u=W.util.bytesFromIP(v.ip)))throw(x=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,x}else 8===v.type&&(u=v.oid?t.oidToDer(t.oidToDer(v.oid)):t.oidToDer(u));e.value.value.push(t.create(t.Class.CONTEXT_SPECIFIC,v.type,!1,u))}}else if("nsComment"===e.name&&a.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=t.create(t.Class.UNIVERSAL,t.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&a.cert){var p=a.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=p.toHex(),e.value=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,p.getBytes())}else if("authorityKeyIdentifier"===e.name&&a.cert){if(e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),c=e.value.value,e.keyIdentifier){var h=!0===e.keyIdentifier?a.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;c.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!1,h))}if(e.authorityCertIssuer){var m=[t.create(t.Class.CONTEXT_SPECIFIC,4,!0,[f(!0===e.authorityCertIssuer?a.cert.issuer:e.authorityCertIssuer)])];c.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,m))}if(e.serialNumber){var g=W.util.hexToBytes(!0===e.serialNumber?a.cert.serialNumber:e.serialNumber);c.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if("cRLDistributionPoints"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),c=e.value.value;var v,y=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),b=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(d=0;d<e.altNames.length;++d){if(u=(v=e.altNames[d]).value,7===v.type&&v.ip){if(null===(u=W.util.bytesFromIP(v.ip)))throw(x=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,x}else 8===v.type&&(u=v.oid?t.oidToDer(t.oidToDer(v.oid)):t.oidToDer(u));b.value.push(t.create(t.Class.CONTEXT_SPECIFIC,v.type,!1,u))}y.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[b])),c.push(y)}var x;if(void 0===e.value)throw(x=new Error("Extension value not specified.")).extension=e,x;return e}function m(e,n){switch(e){case r["RSASSA-PSS"]:var a=[];return void 0!==n.hash.algorithmOid&&a.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])),void 0!==n.mgf.algorithmOid&&a.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.mgf.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.mgf.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])])),void 0!==n.saltLength&&a.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(n.saltLength).getBytes())])),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,a);default:return t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")}}function g(e){var n=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return n;for(var r=e.attributes,a=0;a<r.length;++a){var o=r[a],i=o.value,s=t.Type.UTF8;"valueTagClass"in o&&(s=o.valueTagClass),s===t.Type.UTF8&&(i=W.util.encodeUtf8(i));var u=!1;"valueConstructed"in o&&(u=o.valueConstructed);var c=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(o.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,s,u,i)])]);n.value.push(c)}return n}n.certificateFromPem=function(e,r,a){var o=W.pem.decode(e)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=o.type,i}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=t.fromDer(o.body,a);return n.certificateFromAsn1(s,r)},n.certificateToPem=function(e,r){var a={type:"CERTIFICATE",body:t.toDer(n.certificateToAsn1(e)).getBytes()};return W.pem.encode(a,{maxline:r})},n.publicKeyFromPem=function(e){var r=W.pem.decode(e)[0];if("PUBLIC KEY"!==r.type&&"RSA PUBLIC KEY"!==r.type){var a=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw a.headerType=r.type,a}if(r.procType&&"ENCRYPTED"===r.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=t.fromDer(r.body);return n.publicKeyFromAsn1(o)},n.publicKeyToPem=function(e,r){var a={type:"PUBLIC KEY",body:t.toDer(n.publicKeyToAsn1(e)).getBytes()};return W.pem.encode(a,{maxline:r})},n.publicKeyToRSAPublicKeyPem=function(e,r){var a={type:"RSA PUBLIC KEY",body:t.toDer(n.publicKeyToRSAPublicKey(e)).getBytes()};return W.pem.encode(a,{maxline:r})},n.getPublicKeyFingerprint=function(e,r){var a,o=(r=r||{}).md||W.md.sha1.create();switch(r.type||"RSAPublicKey"){case"RSAPublicKey":a=t.toDer(n.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":a=t.toDer(n.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+r.type+'".')}o.start(),o.update(a);var i=o.digest();if("hex"===r.encoding){var s=i.toHex();return r.delimiter?s.match(/.{2}/g).join(r.delimiter):s}if("binary"===r.encoding)return i.getBytes();if(r.encoding)throw new Error('Unknown encoding "'+r.encoding+'".');return i},n.certificationRequestFromPem=function(e,r,a){var o=W.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==o.type){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=o.type,i}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=t.fromDer(o.body,a);return n.certificationRequestFromAsn1(s,r)},n.certificationRequestToPem=function(e,r){var a={type:"CERTIFICATE REQUEST",body:t.toDer(n.certificationRequestToAsn1(e)).getBytes()};return W.pem.encode(a,{maxline:r})},n.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return l(e.issuer,t)},e.issuer.addField=function(t){p([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return l(e.subject,t)},e.subject.addField=function(t){p([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,n){p(t),e.subject.attributes=t,delete e.subject.uniqueId,n&&(e.subject.uniqueId=n),e.subject.hash=null},e.setIssuer=function(t,n){p(t),e.issuer.attributes=t,delete e.issuer.uniqueId,n&&(e.issuer.uniqueId=n),e.issuer.hash=null},e.setExtensions=function(t){for(var n=0;n<t.length;++n)h(t[n],{cert:e});e.extensions=t},e.getExtension=function(t){"string"==typeof t&&(t={name:t});for(var n,r=null,a=0;null===r&&a<e.extensions.length;++a)n=e.extensions[a],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(a,o){e.md=o||W.md.sha1.create();var i=r[e.md.algorithm+"WithRSAEncryption"];if(!i){var s=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw s.algorithm=e.md.algorithm,s}e.signatureOid=e.siginfo.algorithmOid=i,e.tbsCertificate=n.getTBSCertificate(e);var u=t.toDer(e.tbsCertificate);e.md.update(u.getBytes()),e.signature=a.sign(e.md)},e.verify=function(a){var o=!1;if(!e.issued(a)){var i=a.issuer,s=e.subject;throw(h=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.")).expectedIssuer=i.attributes,h.actualIssuer=s.attributes,h}var u=a.md;if(null===u){if(a.signatureOid in r)switch(r[a.signatureOid]){case"sha1WithRSAEncryption":u=W.md.sha1.create();break;case"md5WithRSAEncryption":u=W.md.md5.create();break;case"sha256WithRSAEncryption":u=W.md.sha256.create();break;case"sha384WithRSAEncryption":u=W.md.sha384.create();break;case"sha512WithRSAEncryption":u=W.md.sha512.create();break;case"RSASSA-PSS":u=W.md.sha256.create()}if(null===u)throw(h=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=a.signatureOid,h;var c=a.tbsCertificate||n.getTBSCertificate(a),l=t.toDer(c);u.update(l.getBytes())}if(null!==u){var d;switch(a.signatureOid){case r.sha1WithRSAEncryption:d=void 0;break;case r["RSASSA-PSS"]:var f,p,h;if(void 0===(f=r[a.signatureParameters.mgf.hash.algorithmOid])||void 0===W.md[f])throw(h=new Error("Unsupported MGF hash function.")).oid=a.signatureParameters.mgf.hash.algorithmOid,h.name=f,h;if(void 0===(p=r[a.signatureParameters.mgf.algorithmOid])||void 0===W.mgf[p])throw(h=new Error("Unsupported MGF function.")).oid=a.signatureParameters.mgf.algorithmOid,h.name=p,h;if(p=W.mgf[p].create(W.md[f].create()),void 0===(f=r[a.signatureParameters.hash.algorithmOid])||void 0===W.md[f])throw{message:"Unsupported RSASSA-PSS hash function.",oid:a.signatureParameters.hash.algorithmOid,name:f};d=W.pss.create(W.md[f].create(),p,a.signatureParameters.saltLength)}o=e.publicKey.verify(u.digest().getBytes(),a.signature,d)}return o},e.isIssuer=function(t){var n=!1,r=e.issuer,a=t.subject;if(r.hash&&a.hash)n=r.hash===a.hash;else if(r.attributes.length===a.attributes.length){var o,i;n=!0;for(var s=0;n&&s<r.attributes.length;++s)o=r.attributes[s],i=a.attributes[s],o.type===i.type&&o.value===i.value||(n=!1)}return n},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return n.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=r.subjectKeyIdentifier,n=0;n<e.extensions.length;++n){var a=e.extensions[n];if(a.id===t){var o=e.generateSubjectKeyIdentifier().getBytes();return W.util.hexToBytes(a.subjectKeyIdentifier)===o}}return!1},e},n.certificateFromAsn1=function(e,a){var o={},s=[];if(!t.validate(e,i,o,s))throw(h=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.")).errors=s,h;if(t.derToOid(o.publicKeyOid)!==n.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=n.createCertificate();u.version=o.certVersion?o.certVersion.charCodeAt(0):0;var c=W.util.createBuffer(o.certSerialNumber);u.serialNumber=c.toHex(),u.signatureOid=W.asn1.derToOid(o.certSignatureOid),u.signatureParameters=d(u.signatureOid,o.certSignatureParams,!0),u.siginfo.algorithmOid=W.asn1.derToOid(o.certinfoSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,o.certinfoSignatureParams,!1),u.signature=o.certSignature;var f=[];if(void 0!==o.certValidity1UTCTime&&f.push(t.utcTimeToDate(o.certValidity1UTCTime)),void 0!==o.certValidity2GeneralizedTime&&f.push(t.generalizedTimeToDate(o.certValidity2GeneralizedTime)),void 0!==o.certValidity3UTCTime&&f.push(t.utcTimeToDate(o.certValidity3UTCTime)),void 0!==o.certValidity4GeneralizedTime&&f.push(t.generalizedTimeToDate(o.certValidity4GeneralizedTime)),f.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(f.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=f[0],u.validity.notAfter=f[1],u.tbsCertificate=o.tbsCertificate,a){var h;if(u.md=null,u.signatureOid in r)switch(r[u.signatureOid]){case"sha1WithRSAEncryption":u.md=W.md.sha1.create();break;case"md5WithRSAEncryption":u.md=W.md.md5.create();break;case"sha256WithRSAEncryption":u.md=W.md.sha256.create();break;case"sha384WithRSAEncryption":u.md=W.md.sha384.create();break;case"sha512WithRSAEncryption":u.md=W.md.sha512.create();break;case"RSASSA-PSS":u.md=W.md.sha256.create()}if(null===u.md)throw(h=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=u.signatureOid,h;var m=t.toDer(u.tbsCertificate);u.md.update(m.getBytes())}var g=W.md.sha1.create();u.issuer.getField=function(e){return l(u.issuer,e)},u.issuer.addField=function(e){p([e]),u.issuer.attributes.push(e)},u.issuer.attributes=n.RDNAttributesAsArray(o.certIssuer,g),o.certIssuerUniqueId&&(u.issuer.uniqueId=o.certIssuerUniqueId),u.issuer.hash=g.digest().toHex();var v=W.md.sha1.create();return u.subject.getField=function(e){return l(u.subject,e)},u.subject.addField=function(e){p([e]),u.subject.attributes.push(e)},u.subject.attributes=n.RDNAttributesAsArray(o.certSubject,v),o.certSubjectUniqueId&&(u.subject.uniqueId=o.certSubjectUniqueId),u.subject.hash=v.digest().toHex(),o.certExtensions?u.extensions=n.certificateExtensionsFromAsn1(o.certExtensions):u.extensions=[],u.publicKey=n.publicKeyFromAsn1(o.subjectPublicKeyInfo),u},n.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var a=e.value[r],o=0;o<a.value.length;++o)t.push(n.certificateExtensionFromAsn1(a.value[o]));return t},n.certificateExtensionFromAsn1=function(e){var n={};if(n.id=t.derToOid(e.value[0].value),n.critical=!1,e.value[1].type===t.Type.BOOLEAN?(n.critical=0!==e.value[1].value.charCodeAt(0),n.value=e.value[2].value):n.value=e.value[1].value,n.id in r)if(n.name=r[n.id],"keyUsage"===n.name){var a=0,o=0;(s=t.fromDer(n.value)).value.length>1&&(a=s.value.charCodeAt(1),o=s.value.length>2?s.value.charCodeAt(2):0),n.digitalSignature=128==(128&a),n.nonRepudiation=64==(64&a),n.keyEncipherment=32==(32&a),n.dataEncipherment=16==(16&a),n.keyAgreement=8==(8&a),n.keyCertSign=4==(4&a),n.cRLSign=2==(2&a),n.encipherOnly=1==(1&a),n.decipherOnly=128==(128&o)}else if("basicConstraints"===n.name){(s=t.fromDer(n.value)).value.length>0&&s.value[0].type===t.Type.BOOLEAN?n.cA=0!==s.value[0].value.charCodeAt(0):n.cA=!1;var i=null;s.value.length>0&&s.value[0].type===t.Type.INTEGER?i=s.value[0].value:s.value.length>1&&(i=s.value[1].value),null!==i&&(n.pathLenConstraint=t.derToInteger(i))}else if("extKeyUsage"===n.name)for(var s=t.fromDer(n.value),u=0;u<s.value.length;++u){var c=t.derToOid(s.value[u].value);c in r?n[r[c]]=!0:n[c]=!0}else if("nsCertType"===n.name)a=0,(s=t.fromDer(n.value)).value.length>1&&(a=s.value.charCodeAt(1)),n.client=128==(128&a),n.server=64==(64&a),n.email=32==(32&a),n.objsign=16==(16&a),n.reserved=8==(8&a),n.sslCA=4==(4&a),n.emailCA=2==(2&a),n.objCA=1==(1&a);else if("subjectAltName"===n.name||"issuerAltName"===n.name){var l;n.altNames=[],s=t.fromDer(n.value);for(var d=0;d<s.value.length;++d){var f={type:(l=s.value[d]).type,value:l.value};switch(n.altNames.push(f),l.type){case 1:case 2:case 6:break;case 7:f.ip=W.util.bytesToIP(l.value);break;case 8:f.oid=t.derToOid(l.value)}}}else"subjectKeyIdentifier"===n.name&&(s=t.fromDer(n.value),n.subjectKeyIdentifier=W.util.bytesToHex(s.value));return n},n.certificationRequestFromAsn1=function(e,a){var o={},i=[];if(!t.validate(e,c,o,i))throw(u=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.")).errors=i,u;if(t.derToOid(o.publicKeyOid)!==n.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=n.createCertificationRequest();if(s.version=o.csrVersion?o.csrVersion.charCodeAt(0):0,s.signatureOid=W.asn1.derToOid(o.csrSignatureOid),s.signatureParameters=d(s.signatureOid,o.csrSignatureParams,!0),s.siginfo.algorithmOid=W.asn1.derToOid(o.csrSignatureOid),s.siginfo.parameters=d(s.siginfo.algorithmOid,o.csrSignatureParams,!1),s.signature=o.csrSignature,s.certificationRequestInfo=o.certificationRequestInfo,a){var u;if(s.md=null,s.signatureOid in r)switch(r[s.signatureOid]){case"sha1WithRSAEncryption":s.md=W.md.sha1.create();break;case"md5WithRSAEncryption":s.md=W.md.md5.create();break;case"sha256WithRSAEncryption":s.md=W.md.sha256.create();break;case"sha384WithRSAEncryption":s.md=W.md.sha384.create();break;case"sha512WithRSAEncryption":s.md=W.md.sha512.create();break;case"RSASSA-PSS":s.md=W.md.sha256.create()}if(null===s.md)throw(u=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=s.signatureOid,u;var f=t.toDer(s.certificationRequestInfo);s.md.update(f.getBytes())}var h=W.md.sha1.create();return s.subject.getField=function(e){return l(s.subject,e)},s.subject.addField=function(e){p([e]),s.subject.attributes.push(e)},s.subject.attributes=n.RDNAttributesAsArray(o.certificationRequestInfoSubject,h),s.subject.hash=h.digest().toHex(),s.publicKey=n.publicKeyFromAsn1(o.subjectPublicKeyInfo),s.getAttribute=function(e){return l(s,e)},s.addAttribute=function(e){p([e]),s.attributes.push(e)},s.attributes=n.CRIAttributesAsArray(o.certificationRequestInfoAttributes||[]),s},n.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return l(e.subject,t)},e.subject.addField=function(t){p([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return l(e,t)},e.addAttribute=function(t){p([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){p(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){p(t),e.attributes=t},e.sign=function(a,o){e.md=o||W.md.sha1.create();var i=r[e.md.algorithm+"WithRSAEncryption"];if(!i){var s=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw s.algorithm=e.md.algorithm,s}e.signatureOid=e.siginfo.algorithmOid=i,e.certificationRequestInfo=n.getCertificationRequestInfo(e);var u=t.toDer(e.certificationRequestInfo);e.md.update(u.getBytes()),e.signature=a.sign(e.md)},e.verify=function(){var a=!1,o=e.md;if(null===o){if(e.signatureOid in r)switch(r[e.signatureOid]){case"sha1WithRSAEncryption":o=W.md.sha1.create();break;case"md5WithRSAEncryption":o=W.md.md5.create();break;case"sha256WithRSAEncryption":o=W.md.sha256.create();break;case"sha384WithRSAEncryption":o=W.md.sha384.create();break;case"sha512WithRSAEncryption":o=W.md.sha512.create();break;case"RSASSA-PSS":o=W.md.sha256.create()}if(null===o)throw(d=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=e.signatureOid,d;var i=e.certificationRequestInfo||n.getCertificationRequestInfo(e),s=t.toDer(i);o.update(s.getBytes())}if(null!==o){var u;switch(e.signatureOid){case r.sha1WithRSAEncryption:break;case r["RSASSA-PSS"]:var c,l,d;if(void 0===(c=r[e.signatureParameters.mgf.hash.algorithmOid])||void 0===W.md[c])throw(d=new Error("Unsupported MGF hash function.")).oid=e.signatureParameters.mgf.hash.algorithmOid,d.name=c,d;if(void 0===(l=r[e.signatureParameters.mgf.algorithmOid])||void 0===W.mgf[l])throw(d=new Error("Unsupported MGF function.")).oid=e.signatureParameters.mgf.algorithmOid,d.name=l,d;if(l=W.mgf[l].create(W.md[c].create()),void 0===(c=r[e.signatureParameters.hash.algorithmOid])||void 0===W.md[c])throw(d=new Error("Unsupported RSASSA-PSS hash function.")).oid=e.signatureParameters.hash.algorithmOid,d.name=c,d;u=W.pss.create(W.md[c].create(),l,e.signatureParameters.saltLength)}a=e.publicKey.verify(o.digest().getBytes(),e.signature,u)}return a},e};var v=new Date("1950-01-01T00:00:00Z"),y=new Date("2050-01-01T00:00:00Z");function b(e){return e>=v&&e<y?t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(e)):t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(e))}n.getTBSCertificate=function(e){var r=b(e.validity.notBefore),a=b(e.validity.notAfter),o=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,W.util.hexToBytes(e.serialNumber)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.siginfo.algorithmOid).getBytes()),m(e.siginfo.algorithmOid,e.siginfo.parameters)]),f(e.issuer),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r,a]),f(e.subject),n.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&o.value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&o.value.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&o.value.push(n.certificateExtensionsToAsn1(e.extensions)),o},n.getCertificationRequestInfo=function(e){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),f(e.subject),n.publicKeyToAsn1(e.publicKey),g(e)])},n.distinguishedNameToAsn1=function(e){return f(e)},n.certificateToAsn1=function(e){var r=e.tbsCertificate||n.getTBSCertificate(e);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureOid).getBytes()),m(e.signatureOid,e.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},n.certificateExtensionsToAsn1=function(e){var r=t.create(t.Class.CONTEXT_SPECIFIC,3,!0,[]),a=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);r.value.push(a);for(var o=0;o<e.length;++o)a.value.push(n.certificateExtensionToAsn1(e[o]));return r},n.certificateExtensionToAsn1=function(e){var n=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);n.value.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.id).getBytes())),e.critical&&n.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!=typeof e.value&&(r=t.toDer(r).getBytes()),n.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r)),n},n.certificationRequestToAsn1=function(e){var r=e.certificationRequestInfo||n.getCertificationRequestInfo(e);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureOid).getBytes()),m(e.signatureOid,e.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},n.createCaStore=function(e){var r={certs:{}};function a(e){return o(e),r.certs[e.hash]||null}function o(e){if(!e.hash){var t=W.md.sha1.create();e.attributes=n.RDNAttributesAsArray(f(e),t),e.hash=t.digest().toHex()}}if(r.getIssuer=function(e){return a(e.issuer)},r.addCertificate=function(e){if("string"==typeof e&&(e=W.pki.certificateFromPem(e)),o(e.subject),!r.hasCertificate(e))if(e.subject.hash in r.certs){var t=r.certs[e.subject.hash];W.util.isArray(t)||(t=[t]),t.push(e),r.certs[e.subject.hash]=t}else r.certs[e.subject.hash]=e},r.hasCertificate=function(e){"string"==typeof e&&(e=W.pki.certificateFromPem(e));var r=a(e.subject);if(!r)return!1;W.util.isArray(r)||(r=[r]);for(var o=t.toDer(n.certificateToAsn1(e)).getBytes(),i=0;i<r.length;++i)if(o===t.toDer(n.certificateToAsn1(r[i])).getBytes())return!0;return!1},r.listAllCertificates=function(){var e=[];for(var t in r.certs)if(r.certs.hasOwnProperty(t)){var n=r.certs[t];if(W.util.isArray(n))for(var a=0;a<n.length;++a)e.push(n[a]);else e.push(n)}return e},r.removeCertificate=function(e){var i;if("string"==typeof e&&(e=W.pki.certificateFromPem(e)),o(e.subject),!r.hasCertificate(e))return null;var s=a(e.subject);if(!W.util.isArray(s))return i=r.certs[e.subject.hash],delete r.certs[e.subject.hash],i;for(var u=t.toDer(n.certificateToAsn1(e)).getBytes(),c=0;c<s.length;++c)u===t.toDer(n.certificateToAsn1(s[c])).getBytes()&&(i=s[c],s.splice(c,1));return 0===s.length&&delete r.certs[e.subject.hash],i},e)for(var i=0;i<e.length;++i){var s=e[i];r.addCertificate(s)}return r},n.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},n.verifyCertificateChain=function(e,t,r){"function"==typeof r&&(r={verify:r}),r=r||{};var a=(t=t.slice(0)).slice(0),o=r.validityCheckDate;void 0===o&&(o=new Date);var i=!0,s=null,u=0;do{var c=t.shift(),l=null,d=!1;if(o&&(o<c.validity.notBefore||o>c.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:n.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:o}),null===s){if(null===(l=t[0]||e.getIssuer(c))&&c.isIssuer(c)&&(d=!0,l=c),l){var f=l;W.util.isArray(f)||(f=[f]);for(var p=!1;!p&&f.length>0;){l=f.shift();try{p=l.verify(c)}catch(e){}}p||(s={message:"Certificate signature is invalid.",error:n.certificateError.bad_certificate})}null!==s||l&&!d||e.hasCertificate(c)||(s={message:"Certificate is not trusted.",error:n.certificateError.unknown_ca})}if(null===s&&l&&!c.isIssuer(l)&&(s={message:"Certificate issuer is invalid.",error:n.certificateError.bad_certificate}),null===s)for(var h={keyUsage:!0,basicConstraints:!0},m=0;null===s&&m<c.extensions.length;++m){var g=c.extensions[m];!g.critical||g.name in h||(s={message:"Certificate has an unsupported critical extension.",error:n.certificateError.unsupported_certificate})}if(null===s&&(!i||0===t.length&&(!l||d))){var v=c.getExtension("basicConstraints"),y=c.getExtension("keyUsage");null!==y&&(y.keyCertSign&&null!==v||(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:n.certificateError.bad_certificate})),null!==s||null===v||v.cA||(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:n.certificateError.bad_certificate}),null===s&&null!==y&&"pathLenConstraint"in v&&u-1>v.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:n.certificateError.bad_certificate})}var b=null===s||s.error,x=r.verify?r.verify(b,u,a):b;if(!0!==x)throw!0===b&&(s={message:"The application rejected the certificate.",error:n.certificateError.bad_certificate}),(x||0===x)&&("object"!=typeof x||W.util.isArray(x)?"string"==typeof x&&(s.error=x):(x.message&&(s.message=x.message),x.error&&(s.error=x.error))),s;s=null,i=!1,++u}while(t.length>0);return!0}})),k((function(e){var t=W.asn1,n=W.pki,r=e.exports=W.pkcs12=W.pkcs12||{},a={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},o={name:"PFX",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},a,{name:"PFX.macData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},i={name:"SafeBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},s={name:"Attribute",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,capture:"values"}]},u={name:"CertBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:t.Class.UNIVERSAL,type:t.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function c(e,t,n,r){for(var a=[],o=0;o<e.length;o++)for(var i=0;i<e[o].safeBags.length;i++){var s=e[o].safeBags[i];void 0!==r&&s.type!==r||(null!==t?void 0!==s.attributes[t]&&s.attributes[t].indexOf(n)>=0&&a.push(s):a.push(s))}return a}function l(e){if(e.composed||e.constructed){for(var t=W.util.createBuffer(),n=0;n<e.value.length;++n)t.putBytes(e.value[n].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function d(e,r){var a={},o=[];if(!t.validate(e,W.pkcs7.asn1.encryptedDataValidator,a,o))throw(i=new Error("Cannot read EncryptedContentInfo.")).errors=o,i;var i,s=t.derToOid(a.contentType);if(s!==n.oids.data)throw(i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=s,i;s=t.derToOid(a.encAlgorithm);var u=n.pbe.getCipher(s,a.encParameter,r),c=l(a.encryptedContentAsn1),d=W.util.createBuffer(c.value);if(u.update(d),!u.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return u.output.getBytes()}function f(e,r,a){if(!r&&0===e.length)return[];if((e=t.fromDer(e,r)).tagClass!==t.Class.UNIVERSAL||e.type!==t.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var o=[],s=0;s<e.value.length;s++){var c=e.value[s],l={},d=[];if(!t.validate(c,i,l,d))throw(v=new Error("Cannot read SafeBag.")).errors=d,v;var f,h,m={type:t.derToOid(l.bagId),attributes:p(l.bagAttributes)};o.push(m);var g=l.bagValue.value[0];switch(m.type){case n.oids.pkcs8ShroudedKeyBag:if(null===(g=n.decryptPrivateKeyInfo(g,a)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case n.oids.keyBag:try{m.key=n.privateKeyFromAsn1(g)}catch(e){m.key=null,m.asn1=g}continue;case n.oids.certBag:f=u,h=function(){if(t.derToOid(l.certId)!==n.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=t.derToOid(l.certId),e}var a=t.fromDer(l.cert,r);try{m.cert=n.certificateFromAsn1(a,!0)}catch(e){m.cert=null,m.asn1=a}};break;default:var v;throw(v=new Error("Unsupported PKCS#12 SafeBag type.")).oid=m.type,v}if(void 0!==f&&!t.validate(g,f,l,d))throw(v=new Error("Cannot read PKCS#12 "+f.name)).errors=d,v;h()}return o}function p(e){var r={};if(void 0!==e)for(var a=0;a<e.length;++a){var o={},i=[];if(!t.validate(e[a],s,o,i)){var u=new Error("Cannot read PKCS#12 BagAttribute.");throw u.errors=i,u}var c=t.derToOid(o.oid);if(void 0!==n.oids[c]){r[n.oids[c]]=[];for(var l=0;l<o.values.length;++l)r[n.oids[c]].push(o.values[l].value)}}return r}r.pkcs12FromAsn1=function(e,i,s){"string"==typeof i?(s=i,i=!0):void 0===i&&(i=!0);var u={};if(!t.validate(e,o,u,[]))throw(p=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=p,p;var p,h={version:u.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,n={};return"localKeyId"in e?t=e.localKeyId:"localKeyIdHex"in e&&(t=W.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!("friendlyName"in e)&&"bagType"in e&&(n[e.bagType]=c(h.safeContents,null,null,e.bagType)),void 0!==t&&(n.localKeyId=c(h.safeContents,"localKeyId",t,e.bagType)),"friendlyName"in e&&(n.friendlyName=c(h.safeContents,"friendlyName",e.friendlyName,e.bagType)),n},getBagsByFriendlyName:function(e,t){return c(h.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return c(h.safeContents,"localKeyId",e,t)}};if(3!==u.version.charCodeAt(0))throw(p=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=u.version.charCodeAt(0),p;if(t.derToOid(u.contentType)!==n.oids.data)throw(p=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=t.derToOid(u.contentType),p;var m=u.content.value[0];if(m.tagClass!==t.Class.UNIVERSAL||m.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(m=l(m),u.mac){var g=null,v=0,y=t.derToOid(u.macAlgorithm);switch(y){case n.oids.sha1:g=W.md.sha1.create(),v=20;break;case n.oids.sha256:g=W.md.sha256.create(),v=32;break;case n.oids.sha384:g=W.md.sha384.create(),v=48;break;case n.oids.sha512:g=W.md.sha512.create(),v=64;break;case n.oids.md5:g=W.md.md5.create(),v=16}if(null===g)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+y);var b=new W.util.ByteBuffer(u.macSalt),x="macIterations"in u?parseInt(W.util.bytesToHex(u.macIterations),16):1,k=r.generateKey(s,b,3,x,v,g),w=W.hmac.create();if(w.start(g,k),w.update(m.value),w.getMac().getBytes()!==u.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(e,r,o,i){if((r=t.fromDer(r,o)).tagClass!==t.Class.UNIVERSAL||r.type!==t.Type.SEQUENCE||!0!==r.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var s=0;s<r.value.length;s++){var u=r.value[s],c={},p=[];if(!t.validate(u,a,c,p))throw(v=new Error("Cannot read ContentInfo.")).errors=p,v;var h={encrypted:!1},m=null,g=c.content.value[0];switch(t.derToOid(c.contentType)){case n.oids.data:if(g.tagClass!==t.Class.UNIVERSAL||g.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");m=l(g).value;break;case n.oids.encryptedData:m=d(g,i),h.encrypted=!0;break;default:var v;throw(v=new Error("Unsupported PKCS#12 contentType.")).contentType=t.derToOid(c.contentType),v}h.safeBags=f(m,o,i),e.safeContents.push(h)}}(h,m.value,i,s),h},r.toPkcs12Asn1=function(e,a,o,i){(i=i||{}).saltSize=i.saltSize||8,i.count=i.count||2048,i.algorithm=i.algorithm||i.encAlgorithm||"aes128","useMac"in i||(i.useMac=!0),"localKeyId"in i||(i.localKeyId=null),"generateLocalKeyId"in i||(i.generateLocalKeyId=!0);var s,u=i.localKeyId;if(null!==u)u=W.util.hexToBytes(u);else if(i.generateLocalKeyId)if(a){var c=W.util.isArray(a)?a[0]:a;"string"==typeof c&&(c=n.certificateFromPem(c)),(S=W.md.sha1.create()).update(t.toDer(n.certificateToAsn1(c)).getBytes()),u=S.digest().getBytes()}else u=W.random.getBytes(20);var l=[];null!==u&&l.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.localKeyId).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,u)])])),"friendlyName"in i&&l.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.friendlyName).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.BMPSTRING,!1,i.friendlyName)])])),l.length>0&&(s=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,l));var d=[],f=[];null!==a&&(f=W.util.isArray(a)?a:[a]);for(var p=[],h=0;h<f.length;++h){"string"==typeof(a=f[h])&&(a=n.certificateFromPem(a));var m=0===h?s:void 0,g=n.certificateToAsn1(a),v=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.certBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.x509Certificate).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(g).getBytes())])])]),m]);p.push(v)}if(p.length>0){var y=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,p),b=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(y).getBytes())])]);d.push(b)}var x=null;if(null!==e){var k=n.wrapRsaPrivateKey(n.privateKeyToAsn1(e));x=null===o?t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.keyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[k]),s]):t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.pkcs8ShroudedKeyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[n.encryptPrivateKeyInfo(k,o,i)]),s]);var w=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[x]),I=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(w).getBytes())])]);d.push(I)}var C,E=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,d);if(i.useMac){var S=W.md.sha1.create(),T=new W.util.ByteBuffer(W.random.getBytes(i.saltSize)),A=i.count,N=(e=r.generateKey(o,T,3,A,20),W.hmac.create());N.start(S,e),N.update(t.toDer(E).getBytes());var _=N.getMac();C=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.sha1).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,_.getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,T.getBytes()),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(A).getBytes())])}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(3).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(E).getBytes())])]),C])},r.generateKey=W.pbe.generatePkcs12Key})),k((function(e){var t=W.asn1,n=e.exports=W.pki=W.pki||{};n.pemToDer=function(e){var t=W.pem.decode(e)[0];if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return W.util.createBuffer(t.body)},n.privateKeyFromPem=function(e){var r=W.pem.decode(e)[0];if("PRIVATE KEY"!==r.type&&"RSA PRIVATE KEY"!==r.type){var a=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw a.headerType=r.type,a}if(r.procType&&"ENCRYPTED"===r.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var o=t.fromDer(r.body);return n.privateKeyFromAsn1(o)},n.privateKeyToPem=function(e,r){var a={type:"RSA PRIVATE KEY",body:t.toDer(n.privateKeyToAsn1(e)).getBytes()};return W.pem.encode(a,{maxline:r})},n.privateKeyInfoToPem=function(e,n){var r={type:"PRIVATE KEY",body:t.toDer(e).getBytes()};return W.pem.encode(r,{maxline:n})}}));var Ct=function(e,t,n,r){var a=W.util.createBuffer(),o=e.length>>1,i=o+(1&e.length),s=e.substr(0,i),u=e.substr(o,i),c=W.util.createBuffer(),l=W.hmac.create();n=t+n;var d=Math.ceil(r/16),f=Math.ceil(r/20);l.start("MD5",s);var p=W.util.createBuffer();c.putBytes(n);for(var h=0;h<d;++h)l.start(null,null),l.update(c.getBytes()),c.putBuffer(l.digest()),l.start(null,null),l.update(c.bytes()+n),p.putBuffer(l.digest());l.start("SHA1",u);var m=W.util.createBuffer();for(c.clear(),c.putBytes(n),h=0;h<f;++h)l.start(null,null),l.update(c.getBytes()),c.putBuffer(l.digest()),l.start(null,null),l.update(c.bytes()+n),m.putBuffer(l.digest());return a.putBytes(W.util.xorBytes(p.getBytes(),m.getBytes(),r)),a},Et=function(e,t,n){var r=!1;try{var a=e.deflate(t.fragment.getBytes());t.fragment=W.util.createBuffer(a),t.length=a.length,r=!0}catch(e){}return r},St=function(e,t,n){var r=!1;try{var a=e.inflate(t.fragment.getBytes());t.fragment=W.util.createBuffer(a),t.length=a.length,r=!0}catch(e){}return r},Tt=function(e,t){var n=0;switch(t){case 1:n=e.getByte();break;case 2:n=e.getInt16();break;case 3:n=e.getInt24();break;case 4:n=e.getInt32()}return W.util.createBuffer(e.getBytes(n))},At=function(e,t,n){e.putInt(n.length(),t<<3),e.putBuffer(n)},Nt={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};Nt.SupportedVersions=[Nt.Versions.TLS_1_1,Nt.Versions.TLS_1_0],Nt.Version=Nt.SupportedVersions[0],Nt.MaxFragment=15360,Nt.ConnectionEnd={server:0,client:1},Nt.PRFAlgorithm={tls_prf_sha256:0},Nt.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},Nt.CipherType={stream:0,block:1,aead:2},Nt.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},Nt.CompressionMethod={none:0,deflate:1},Nt.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},Nt.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},Nt.Alert={},Nt.Alert.Level={warning:1,fatal:2},Nt.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},Nt.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},Nt.CipherSuites={},Nt.getCipherSuite=function(e){var t=null;for(var n in Nt.CipherSuites){var r=Nt.CipherSuites[n];if(r.id[0]===e.charCodeAt(0)&&r.id[1]===e.charCodeAt(1)){t=r;break}}return t},Nt.handleUnexpected=function(e,t){!e.open&&e.entity===Nt.ConnectionEnd.client||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.unexpected_message}})},Nt.handleHelloRequest=function(e,t,n){!e.handshaking&&e.handshakes>0&&(Nt.queue(e,Nt.createAlert(e,{level:Nt.Alert.Level.warning,description:Nt.Alert.Description.no_renegotiation})),Nt.flush(e)),e.process()},Nt.parseHelloMessage=function(e,t,n){var r=null,a=e.entity===Nt.ConnectionEnd.client;if(n<38)e.error(e,{message:a?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.illegal_parameter}});else{var o=t.fragment,i=o.length();if(r={version:{major:o.getByte(),minor:o.getByte()},random:W.util.createBuffer(o.getBytes(32)),session_id:Tt(o,1),extensions:[]},a?(r.cipher_suite=o.getBytes(2),r.compression_method=o.getByte()):(r.cipher_suites=Tt(o,2),r.compression_methods=Tt(o,1)),(i=n-(i-o.length()))>0){for(var s=Tt(o,2);s.length()>0;)r.extensions.push({type:[s.getByte(),s.getByte()],data:Tt(s,2)});if(!a)for(var u=0;u<r.extensions.length;++u){var c=r.extensions[u];if(0===c.type[0]&&0===c.type[1])for(var l=Tt(c.data,2);l.length()>0&&0===l.getByte();)e.session.extensions.server_name.serverNameList.push(Tt(l,2).getBytes())}}if(e.session.version&&(r.version.major!==e.session.version.major||r.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.protocol_version}});if(a)e.session.cipherSuite=Nt.getCipherSuite(r.cipher_suite);else for(var d=W.util.createBuffer(r.cipher_suites.bytes());d.length()>0&&(e.session.cipherSuite=Nt.getCipherSuite(d.getBytes(2)),null===e.session.cipherSuite););if(null===e.session.cipherSuite)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.handshake_failure},cipherSuite:W.util.bytesToHex(r.cipher_suite)});e.session.compressionMethod=a?r.compression_method:Nt.CompressionMethod.none}return r},Nt.createSecurityParameters=function(e,t){var n=e.entity===Nt.ConnectionEnd.client,r=t.random.bytes(),a=n?e.session.sp.client_random:r,o=n?r:Nt.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:Nt.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:a,server_random:o}},Nt.handleServerHello=function(e,t,n){var r=Nt.parseHelloMessage(e,t,n);if(!e.fail){if(!(r.version.minor<=e.version.minor))return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.protocol_version}});e.version.minor=r.version.minor,e.session.version=e.version;var a=r.session_id.bytes();a.length>0&&a===e.session.id?(e.expect=Mt,e.session.resuming=!0,e.session.sp.server_random=r.random.bytes()):(e.expect=_t,e.session.resuming=!1,Nt.createSecurityParameters(e,r)),e.session.id=a,e.process()}},Nt.handleClientHello=function(e,t,n){var r=Nt.parseHelloMessage(e,t,n);if(!e.fail){var a=r.session_id.bytes(),o=null;if(e.sessionCache&&(null===(o=e.sessionCache.getSession(a))?a="":(o.version.major!==r.version.major||o.version.minor>r.version.minor)&&(o=null,a="")),0===a.length&&(a=W.random.getBytes(32)),e.session.id=a,e.session.clientHelloVersion=r.version,e.session.sp={},o)e.version=e.session.version=o.version,e.session.sp=o.sp;else{for(var i,s=1;s<Nt.SupportedVersions.length&&!((i=Nt.SupportedVersions[s]).minor<=r.version.minor);++s);e.version={major:i.major,minor:i.minor},e.session.version=e.version}null!==o?(e.expect=Wt,e.session.resuming=!0,e.session.sp.client_random=r.random.bytes()):(e.expect=!1!==e.verifyClient?Lt:Ut,e.session.resuming=!1,Nt.createSecurityParameters(e,r)),e.open=!0,Nt.queue(e,Nt.createRecord(e,{type:Nt.ContentType.handshake,data:Nt.createServerHello(e)})),e.session.resuming?(Nt.queue(e,Nt.createRecord(e,{type:Nt.ContentType.change_cipher_spec,data:Nt.createChangeCipherSpec()})),e.state.pending=Nt.createConnectionState(e),e.state.current.write=e.state.pending.write,Nt.queue(e,Nt.createRecord(e,{type:Nt.ContentType.handshake,data:Nt.createFinished(e)}))):(Nt.queue(e,Nt.createRecord(e,{type:Nt.ContentType.handshake,data:Nt.createCertificate(e)})),e.fail||(Nt.queue(e,Nt.createRecord(e,{type:Nt.ContentType.handshake,data:Nt.createServerKeyExchange(e)})),!1!==e.verifyClient&&Nt.queue(e,Nt.createRecord(e,{type:Nt.ContentType.handshake,data:Nt.createCertificateRequest(e)})),Nt.queue(e,Nt.createRecord(e,{type:Nt.ContentType.handshake,data:Nt.createServerHelloDone(e)})))),Nt.flush(e),e.process()}},Nt.handleCertificate=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.illegal_parameter}});var r,a,o=t.fragment,i={certificate_list:Tt(o,3)},s=[];try{for(;i.certificate_list.length()>0;)r=Tt(i.certificate_list,3),a=W.asn1.fromDer(r),r=W.pki.certificateFromAsn1(a,!0),s.push(r)}catch(t){return e.error(e,{message:"Could not parse certificate list.",cause:t,send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.bad_certificate}})}var u=e.entity===Nt.ConnectionEnd.client;!u&&!0!==e.verifyClient||0!==s.length?0===s.length?e.expect=u?Rt:Ut:(u?e.session.serverCertificate=s[0]:e.session.clientCertificate=s[0],Nt.verifyCertificateChain(e,s)&&(e.expect=u?Rt:Ut)):e.error(e,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.illegal_parameter}}),e.process()},Nt.handleServerKeyExchange=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.unsupported_certificate}});e.expect=Ot,e.process()},Nt.handleClientKeyExchange=function(e,t,n){if(n<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.unsupported_certificate}});var r=t.fragment,a={enc_pre_master_secret:Tt(r,2).getBytes()},o=null;if(e.getPrivateKey)try{o=e.getPrivateKey(e,e.session.serverCertificate),o=W.pki.privateKeyFromPem(o)}catch(t){e.error(e,{message:"Could not get private key.",cause:t,send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.internal_error}})}if(null===o)return e.error(e,{message:"No private key set.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.internal_error}});try{var i=e.session.sp;i.pre_master_secret=o.decrypt(a.enc_pre_master_secret);var s=e.session.clientHelloVersion;if(s.major!==i.pre_master_secret.charCodeAt(0)||s.minor!==i.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(e){i.pre_master_secret=W.random.getBytes(48)}e.expect=Wt,null!==e.session.clientCertificate&&(e.expect=Vt),e.process()},Nt.handleCertificateRequest=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.illegal_parameter}});var r=t.fragment,a={certificate_types:Tt(r,1),certificate_authorities:Tt(r,2)};e.session.certificateRequest=a,e.expect=Ft,e.process()},Nt.handleCertificateVerify=function(e,t,n){if(n<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.illegal_parameter}});var r=t.fragment;r.read-=4;var a=r.bytes();r.read+=4;var o={signature:Tt(r,2).getBytes()},i=W.util.createBuffer();i.putBuffer(e.session.md5.digest()),i.putBuffer(e.session.sha1.digest()),i=i.getBytes();try{if(!e.session.clientCertificate.publicKey.verify(i,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(a),e.session.sha1.update(a)}catch(t){return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.handshake_failure}})}e.expect=Wt,e.process()},Nt.handleServerHelloDone=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.record_overflow}});if(null===e.serverCertificate){var r={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.insufficient_security}},a=e.verify(e,r.alert.description,0,[]);if(!0!==a)return(a||0===a)&&("object"!=typeof a||W.util.isArray(a)?"number"==typeof a&&(r.alert.description=a):(a.message&&(r.message=a.message),a.alert&&(r.alert.description=a.alert))),e.error(e,r)}null!==e.session.certificateRequest&&(t=Nt.createRecord(e,{type:Nt.ContentType.handshake,data:Nt.createCertificate(e)}),Nt.queue(e,t)),t=Nt.createRecord(e,{type:Nt.ContentType.handshake,data:Nt.createClientKeyExchange(e)}),Nt.queue(e,t),e.expect=Pt;var o=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&Nt.queue(e,Nt.createRecord(e,{type:Nt.ContentType.handshake,data:Nt.createCertificateVerify(e,t)})),Nt.queue(e,Nt.createRecord(e,{type:Nt.ContentType.change_cipher_spec,data:Nt.createChangeCipherSpec()})),e.state.pending=Nt.createConnectionState(e),e.state.current.write=e.state.pending.write,Nt.queue(e,Nt.createRecord(e,{type:Nt.ContentType.handshake,data:Nt.createFinished(e)})),e.expect=Mt,Nt.flush(e),e.process()};if(null===e.session.certificateRequest||null===e.session.clientCertificate)return o(e,null);Nt.getClientSignature(e,o)},Nt.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.illegal_parameter}});var n=e.entity===Nt.ConnectionEnd.client;(e.session.resuming&&n||!e.session.resuming&&!n)&&(e.state.pending=Nt.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&n||e.session.resuming&&!n)&&(e.state.pending=null),e.expect=n?Dt:zt,e.process()},Nt.handleFinished=function(e,t,n){var r=t.fragment;r.read-=4;var a=r.bytes();r.read+=4;var o=t.fragment.getBytes();(r=W.util.createBuffer()).putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest());var i=e.entity===Nt.ConnectionEnd.client,s=i?"server finished":"client finished",u=e.session.sp;if((r=Ct(u.master_secret,s,r.getBytes(),12)).getBytes()!==o)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.decrypt_error}});e.session.md5.update(a),e.session.sha1.update(a),(e.session.resuming&&i||!e.session.resuming&&!i)&&(Nt.queue(e,Nt.createRecord(e,{type:Nt.ContentType.change_cipher_spec,data:Nt.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,Nt.queue(e,Nt.createRecord(e,{type:Nt.ContentType.handshake,data:Nt.createFinished(e)}))),e.expect=i?Bt:jt,e.handshaking=!1,++e.handshakes,e.peerCertificate=i?e.session.serverCertificate:e.session.clientCertificate,Nt.flush(e),e.isConnected=!0,e.connected(e),e.process()},Nt.handleAlert=function(e,t){var n,r=t.fragment,a={level:r.getByte(),description:r.getByte()};switch(a.description){case Nt.Alert.Description.close_notify:n="Connection closed.";break;case Nt.Alert.Description.unexpected_message:n="Unexpected message.";break;case Nt.Alert.Description.bad_record_mac:n="Bad record MAC.";break;case Nt.Alert.Description.decryption_failed:n="Decryption failed.";break;case Nt.Alert.Description.record_overflow:n="Record overflow.";break;case Nt.Alert.Description.decompression_failure:n="Decompression failed.";break;case Nt.Alert.Description.handshake_failure:n="Handshake failure.";break;case Nt.Alert.Description.bad_certificate:n="Bad certificate.";break;case Nt.Alert.Description.unsupported_certificate:n="Unsupported certificate.";break;case Nt.Alert.Description.certificate_revoked:n="Certificate revoked.";break;case Nt.Alert.Description.certificate_expired:n="Certificate expired.";break;case Nt.Alert.Description.certificate_unknown:n="Certificate unknown.";break;case Nt.Alert.Description.illegal_parameter:n="Illegal parameter.";break;case Nt.Alert.Description.unknown_ca:n="Unknown certificate authority.";break;case Nt.Alert.Description.access_denied:n="Access denied.";break;case Nt.Alert.Description.decode_error:n="Decode error.";break;case Nt.Alert.Description.decrypt_error:n="Decrypt error.";break;case Nt.Alert.Description.export_restriction:n="Export restriction.";break;case Nt.Alert.Description.protocol_version:n="Unsupported protocol version.";break;case Nt.Alert.Description.insufficient_security:n="Insufficient security.";break;case Nt.Alert.Description.internal_error:n="Internal error.";break;case Nt.Alert.Description.user_canceled:n="User canceled.";break;case Nt.Alert.Description.no_renegotiation:n="Renegotiation not supported.";break;default:n="Unknown error."}if(a.description===Nt.Alert.Description.close_notify)return e.close();e.error(e,{message:n,send:!1,origin:e.entity===Nt.ConnectionEnd.client?"server":"client",alert:a}),e.process()},Nt.handleHandshake=function(e,t){var n=t.fragment,r=n.getByte(),a=n.getInt24();if(a>n.length())return e.fragmented=t,t.fragment=W.util.createBuffer(),n.read-=4,e.process();e.fragmented=null,n.read-=4;var o=n.bytes(a+4);n.read+=4,r in an[e.entity][e.expect]?(e.entity!==Nt.ConnectionEnd.server||e.open||e.fail||(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:W.md.md5.create(),sha1:W.md.sha1.create()}),r!==Nt.HandshakeType.hello_request&&r!==Nt.HandshakeType.certificate_verify&&r!==Nt.HandshakeType.finished&&(e.session.md5.update(o),e.session.sha1.update(o)),an[e.entity][e.expect][r](e,t,a)):Nt.handleUnexpected(e,t)},Nt.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},Nt.handleHeartbeat=function(e,t){var n=t.fragment,r=n.getByte(),a=n.getInt16(),o=n.getBytes(a);if(r===Nt.HeartbeatMessageType.heartbeat_request){if(e.handshaking||a>o.length)return e.process();Nt.queue(e,Nt.createRecord(e,{type:Nt.ContentType.heartbeat,data:Nt.createHeartbeat(Nt.HeartbeatMessageType.heartbeat_response,o)})),Nt.flush(e)}else if(r===Nt.HeartbeatMessageType.heartbeat_response){if(o!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,W.util.createBuffer(o))}e.process()};var _t=1,Rt=2,Ot=3,Ft=4,Mt=5,Dt=6,Bt=7,Pt=8,Lt=1,Ut=2,Vt=3,Wt=4,zt=5,jt=6,Ht=Nt.handleUnexpected,Gt=Nt.handleChangeCipherSpec,Kt=Nt.handleAlert,qt=Nt.handleHandshake,Xt=Nt.handleApplicationData,Qt=Nt.handleHeartbeat,Yt=[];Yt[Nt.ConnectionEnd.client]=[[Ht,Kt,qt,Ht,Qt],[Ht,Kt,qt,Ht,Qt],[Ht,Kt,qt,Ht,Qt],[Ht,Kt,qt,Ht,Qt],[Ht,Kt,qt,Ht,Qt],[Gt,Kt,Ht,Ht,Qt],[Ht,Kt,qt,Ht,Qt],[Ht,Kt,qt,Xt,Qt],[Ht,Kt,qt,Ht,Qt]],Yt[Nt.ConnectionEnd.server]=[[Ht,Kt,qt,Ht,Qt],[Ht,Kt,qt,Ht,Qt],[Ht,Kt,qt,Ht,Qt],[Ht,Kt,qt,Ht,Qt],[Gt,Kt,Ht,Ht,Qt],[Ht,Kt,qt,Ht,Qt],[Ht,Kt,qt,Xt,Qt],[Ht,Kt,qt,Ht,Qt]];var $t=Nt.handleHelloRequest,Zt=Nt.handleServerHello,Jt=Nt.handleCertificate,en=Nt.handleServerKeyExchange,tn=Nt.handleCertificateRequest,nn=Nt.handleServerHelloDone,rn=Nt.handleFinished,an=[];an[Nt.ConnectionEnd.client]=[[Ht,Ht,Zt,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Jt,en,tn,nn,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,en,tn,nn,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,tn,nn,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,nn,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,rn],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht]];var on=Nt.handleClientHello,sn=Nt.handleClientKeyExchange,un=Nt.handleCertificateVerify;an[Nt.ConnectionEnd.server]=[[Ht,on,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Jt,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,sn,Ht,Ht,Ht,Ht],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,un,Ht,Ht,Ht,Ht,Ht],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,rn],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht]],Nt.generateKeys=function(e,t){var n=Ct,r=t.client_random+t.server_random;e.session.resuming||(t.master_secret=n(t.pre_master_secret,"master secret",r,48).bytes(),t.pre_master_secret=null),r=t.server_random+t.client_random;var a=2*t.mac_key_length+2*t.enc_key_length,o=e.version.major===Nt.Versions.TLS_1_0.major&&e.version.minor===Nt.Versions.TLS_1_0.minor;o&&(a+=2*t.fixed_iv_length);var i=n(t.master_secret,"key expansion",r,a),s={client_write_MAC_key:i.getBytes(t.mac_key_length),server_write_MAC_key:i.getBytes(t.mac_key_length),client_write_key:i.getBytes(t.enc_key_length),server_write_key:i.getBytes(t.enc_key_length)};return o&&(s.client_write_IV=i.getBytes(t.fixed_iv_length),s.server_write_IV=i.getBytes(t.fixed_iv_length)),s},Nt.createConnectionState=function(e){var t=e.entity===Nt.ConnectionEnd.client,n=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},r={read:n(),write:n()};if(r.read.update=function(e,t){return r.read.cipherFunction(t,r.read)?r.read.compressFunction(e,t,r.read)||e.error(e,{message:"Could not decompress record.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.decompression_failure}}):e.error(e,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.bad_record_mac}}),!e.fail},r.write.update=function(e,t){return r.write.compressFunction(e,t,r.write)?r.write.cipherFunction(t,r.write)||e.error(e,{message:"Could not encrypt record.",send:!1,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.internal_error}}):e.error(e,{message:"Could not compress record.",send:!1,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.internal_error}}),!e.fail},e.session){var a=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(a),a.keys=Nt.generateKeys(e,a),r.read.macKey=t?a.keys.server_write_MAC_key:a.keys.client_write_MAC_key,r.write.macKey=t?a.keys.client_write_MAC_key:a.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(r,e,a),a.compression_algorithm){case Nt.CompressionMethod.none:break;case Nt.CompressionMethod.deflate:r.read.compressFunction=St,r.write.compressFunction=Et;break;default:throw new Error("Unsupported compression algorithm.")}}return r},Nt.createRandom=function(){var e=new Date,t=+e+6e4*e.getTimezoneOffset(),n=W.util.createBuffer();return n.putInt32(t),n.putBytes(W.random.getBytes(28)),n},Nt.createRecord=function(e,t){return t.data?{type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data}:null},Nt.createAlert=function(e,t){var n=W.util.createBuffer();return n.putByte(t.level),n.putByte(t.description),Nt.createRecord(e,{type:Nt.ContentType.alert,data:n})},Nt.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=W.util.createBuffer(),n=0;n<e.cipherSuites.length;++n){var r=e.cipherSuites[n];t.putByte(r.id[0]),t.putByte(r.id[1])}var a=t.length(),o=W.util.createBuffer();o.putByte(Nt.CompressionMethod.none);var i=o.length(),s=W.util.createBuffer();if(e.virtualHost){var u=W.util.createBuffer();u.putByte(0),u.putByte(0);var c=W.util.createBuffer();c.putByte(0),At(c,2,W.util.createBuffer(e.virtualHost));var l=W.util.createBuffer();At(l,2,c),At(u,2,l),s.putBuffer(u)}var d=s.length();d>0&&(d+=2);var f=e.session.id,p=f.length+1+2+4+28+2+a+1+i+d,h=W.util.createBuffer();return h.putByte(Nt.HandshakeType.client_hello),h.putInt24(p),h.putByte(e.version.major),h.putByte(e.version.minor),h.putBytes(e.session.sp.client_random),At(h,1,W.util.createBuffer(f)),At(h,2,t),At(h,1,o),d>0&&At(h,2,s),h},Nt.createServerHello=function(e){var t=e.session.id,n=t.length+1+2+4+28+2+1,r=W.util.createBuffer();return r.putByte(Nt.HandshakeType.server_hello),r.putInt24(n),r.putByte(e.version.major),r.putByte(e.version.minor),r.putBytes(e.session.sp.server_random),At(r,1,W.util.createBuffer(t)),r.putByte(e.session.cipherSuite.id[0]),r.putByte(e.session.cipherSuite.id[1]),r.putByte(e.session.compressionMethod),r},Nt.createCertificate=function(e){var t,n=e.entity===Nt.ConnectionEnd.client,r=null;e.getCertificate&&(t=n?e.session.certificateRequest:e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,t));var a=W.util.createBuffer();if(null!==r)try{W.util.isArray(r)||(r=[r]);for(var o=null,i=0;i<r.length;++i){var s=W.pem.decode(r[i])[0];if("CERTIFICATE"!==s.type&&"X509 CERTIFICATE"!==s.type&&"TRUSTED CERTIFICATE"!==s.type){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=s.type,u}if(s.procType&&"ENCRYPTED"===s.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=W.util.createBuffer(s.body);null===o&&(o=W.asn1.fromDer(c.bytes(),!1));var l=W.util.createBuffer();At(l,3,c),a.putBuffer(l)}r=W.pki.certificateFromAsn1(o),n?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(t){return e.error(e,{message:"Could not send certificate list.",cause:t,send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.bad_certificate}})}var d=3+a.length(),f=W.util.createBuffer();return f.putByte(Nt.HandshakeType.certificate),f.putInt24(d),At(f,3,a),f},Nt.createClientKeyExchange=function(e){var t=W.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(W.random.getBytes(46));var n=e.session.sp;n.pre_master_secret=t.getBytes();var r=(t=e.session.serverCertificate.publicKey.encrypt(n.pre_master_secret)).length+2,a=W.util.createBuffer();return a.putByte(Nt.HandshakeType.client_key_exchange),a.putInt24(r),a.putInt16(t.length),a.putBytes(t),a},Nt.createServerKeyExchange=function(e){return W.util.createBuffer()},Nt.getClientSignature=function(e,t){var n=W.util.createBuffer();n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest()),n=n.getBytes(),e.getSignature=e.getSignature||function(e,t,n){var r=null;if(e.getPrivateKey)try{r=e.getPrivateKey(e,e.session.clientCertificate),r=W.pki.privateKeyFromPem(r)}catch(t){e.error(e,{message:"Could not get private key.",cause:t,send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.internal_error}})}null===r?e.error(e,{message:"No private key set.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.internal_error}}):t=r.sign(t,null),n(e,t)},e.getSignature(e,n,t)},Nt.createCertificateVerify=function(e,t){var n=t.length+2,r=W.util.createBuffer();return r.putByte(Nt.HandshakeType.certificate_verify),r.putInt24(n),r.putInt16(t.length),r.putBytes(t),r},Nt.createCertificateRequest=function(e){var t=W.util.createBuffer();t.putByte(1);var n=W.util.createBuffer();for(var r in e.caStore.certs){var a=e.caStore.certs[r],o=W.pki.distinguishedNameToAsn1(a.subject),i=W.asn1.toDer(o);n.putInt16(i.length()),n.putBuffer(i)}var s=1+t.length()+2+n.length(),u=W.util.createBuffer();return u.putByte(Nt.HandshakeType.certificate_request),u.putInt24(s),At(u,1,t),At(u,2,n),u},Nt.createServerHelloDone=function(e){var t=W.util.createBuffer();return t.putByte(Nt.HandshakeType.server_hello_done),t.putInt24(0),t},Nt.createChangeCipherSpec=function(){var e=W.util.createBuffer();return e.putByte(1),e},Nt.createFinished=function(e){var t=W.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var n=e.entity===Nt.ConnectionEnd.client,r=e.session.sp,a=n?"client finished":"server finished";t=Ct(r.master_secret,a,t.getBytes(),12);var o=W.util.createBuffer();return o.putByte(Nt.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o},Nt.createHeartbeat=function(e,t,n){void 0===n&&(n=t.length);var r=W.util.createBuffer();r.putByte(e),r.putInt16(n),r.putBytes(t);var a=r.length(),o=Math.max(16,a-n-3);return r.putBytes(W.random.getBytes(o)),r},Nt.queue=function(e,t){if(t&&(0!==t.fragment.length()||t.type!==Nt.ContentType.handshake&&t.type!==Nt.ContentType.alert&&t.type!==Nt.ContentType.change_cipher_spec)){if(t.type===Nt.ContentType.handshake){var n=t.fragment.bytes();e.session.md5.update(n),e.session.sha1.update(n),n=null}var r;if(t.fragment.length()<=Nt.MaxFragment)r=[t];else{r=[];for(var a=t.fragment.bytes();a.length>Nt.MaxFragment;)r.push(Nt.createRecord(e,{type:t.type,data:W.util.createBuffer(a.slice(0,Nt.MaxFragment))})),a=a.slice(Nt.MaxFragment);a.length>0&&r.push(Nt.createRecord(e,{type:t.type,data:W.util.createBuffer(a)}))}for(var o=0;o<r.length&&!e.fail;++o){var i=r[o];e.state.current.write.update(e,i)&&e.records.push(i)}}},Nt.flush=function(e){for(var t=0;t<e.records.length;++t){var n=e.records[t];e.tlsData.putByte(n.type),e.tlsData.putByte(n.version.major),e.tlsData.putByte(n.version.minor),e.tlsData.putInt16(n.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var cn=function(e){switch(e){case!0:return!0;case W.pki.certificateError.bad_certificate:return Nt.Alert.Description.bad_certificate;case W.pki.certificateError.unsupported_certificate:return Nt.Alert.Description.unsupported_certificate;case W.pki.certificateError.certificate_revoked:return Nt.Alert.Description.certificate_revoked;case W.pki.certificateError.certificate_expired:return Nt.Alert.Description.certificate_expired;case W.pki.certificateError.certificate_unknown:return Nt.Alert.Description.certificate_unknown;case W.pki.certificateError.unknown_ca:return Nt.Alert.Description.unknown_ca;default:return Nt.Alert.Description.bad_certificate}};for(var ln in Nt.verifyCertificateChain=function(e,t){try{var n={};for(var r in e.verifyOptions)n[r]=e.verifyOptions[r];n.verify=function(t,n,r){cn(t);var a=e.verify(e,t,n,r);if(!0!==a){if("object"==typeof a&&!W.util.isArray(a)){var o=new Error("The application rejected the certificate.");throw o.send=!0,o.alert={level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.bad_certificate},a.message&&(o.message=a.message),a.alert&&(o.alert.description=a.alert),o}a!==t&&(a=function(e){switch(e){case!0:return!0;case Nt.Alert.Description.bad_certificate:return W.pki.certificateError.bad_certificate;case Nt.Alert.Description.unsupported_certificate:return W.pki.certificateError.unsupported_certificate;case Nt.Alert.Description.certificate_revoked:return W.pki.certificateError.certificate_revoked;case Nt.Alert.Description.certificate_expired:return W.pki.certificateError.certificate_expired;case Nt.Alert.Description.certificate_unknown:return W.pki.certificateError.certificate_unknown;case Nt.Alert.Description.unknown_ca:return W.pki.certificateError.unknown_ca;default:return W.pki.certificateError.bad_certificate}}(a))}return a},W.pki.verifyCertificateChain(e.caStore,t,n)}catch(t){var a=t;("object"!=typeof a||W.util.isArray(a))&&(a={send:!0,alert:{level:Nt.Alert.Level.fatal,description:cn(t)}}),"send"in a||(a.send=!0),"alert"in a||(a.alert={level:Nt.Alert.Level.fatal,description:cn(a.error)}),e.error(e,a)}return!e.fail},Nt.createSessionCache=function(e,t){var n=null;if(e&&e.getSession&&e.setSession&&e.order)n=e;else{for(var r in(n={}).cache=e||{},n.capacity=Math.max(t||100,1),n.order=[],e)n.order.length<=t?n.order.push(r):delete e[r];n.getSession=function(e){var t=null,r=null;if(e?r=W.util.bytesToHex(e):n.order.length>0&&(r=n.order[0]),null!==r&&r in n.cache)for(var a in t=n.cache[r],delete n.cache[r],n.order)if(n.order[a]===r){n.order.splice(a,1);break}return t},n.setSession=function(e,t){if(n.order.length===n.capacity){var r=n.order.shift();delete n.cache[r]}r=W.util.bytesToHex(e),n.order.push(r),n.cache[r]=t}}return n},Nt.createConnection=function(e){var t=null;t=e.caStore?W.util.isArray(e.caStore)?W.pki.createCaStore(e.caStore):e.caStore:W.pki.createCaStore();var n=e.cipherSuites||null;if(null===n)for(var r in n=[],Nt.CipherSuites)n.push(Nt.CipherSuites[r]);var a=e.server?Nt.ConnectionEnd.server:Nt.ConnectionEnd.client,o=e.sessionCache?Nt.createSessionCache(e.sessionCache):null,i={version:{major:Nt.Version.major,minor:Nt.Version.minor},entity:a,sessionId:e.sessionId,caStore:t,sessionCache:o,cipherSuites:n,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(e,t,n,r){return t},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:W.util.createBuffer(),tlsData:W.util.createBuffer(),data:W.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(t,n){n.origin=n.origin||(t.entity===Nt.ConnectionEnd.client?"client":"server"),n.send&&(Nt.queue(t,Nt.createAlert(t,n.alert)),Nt.flush(t));var r=!1!==n.fatal;r&&(t.fail=!0),e.error(t,n),r&&t.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null,reset:function(e){i.version={major:Nt.Version.major,minor:Nt.Version.minor},i.record=null,i.session=null,i.peerCertificate=null,i.state={pending:null,current:null},i.expect=(Nt.ConnectionEnd.client,0),i.fragmented=null,i.records=[],i.open=!1,i.handshakes=0,i.handshaking=!1,i.isConnected=!1,i.fail=!(e||void 0===e),i.input.clear(),i.tlsData.clear(),i.data.clear(),i.state.current=Nt.createConnectionState(i)}};return i.reset(),i.handshake=function(e){if(i.entity!==Nt.ConnectionEnd.client)i.error(i,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(i.handshaking)i.error(i,{message:"Handshake already in progress.",fatal:!1});else{i.fail&&!i.open&&0===i.handshakes&&(i.fail=!1),i.handshaking=!0;var t=null;(e=e||"").length>0&&(i.sessionCache&&(t=i.sessionCache.getSession(e)),null===t&&(e="")),0===e.length&&i.sessionCache&&null!==(t=i.sessionCache.getSession())&&(e=t.id),i.session={id:e,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:W.md.md5.create(),sha1:W.md.sha1.create()},t&&(i.version=t.version,i.session.sp=t.sp),i.session.sp.client_random=Nt.createRandom().getBytes(),i.open=!0,Nt.queue(i,Nt.createRecord(i,{type:Nt.ContentType.handshake,data:Nt.createClientHello(i)})),Nt.flush(i)}},i.process=function(e){var t=0;return e&&i.input.putBytes(e),i.fail||(null!==i.record&&i.record.ready&&i.record.fragment.isEmpty()&&(i.record=null),null===i.record&&(t=function(e){var t=0,n=e.input,r=n.length();if(r<5)t=5-r;else{e.record={type:n.getByte(),version:{major:n.getByte(),minor:n.getByte()},length:n.getInt16(),fragment:W.util.createBuffer(),ready:!1};var a=e.record.version.major===e.version.major;a&&e.session&&e.session.version&&(a=e.record.version.minor===e.version.minor),a||e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.protocol_version}})}return t}(i)),i.fail||null===i.record||i.record.ready||(t=function(e){var t=0,n=e.input,r=n.length();return r<e.record.length?t=e.record.length-r:(e.record.fragment.putBytes(n.getBytes(e.record.length)),n.compact(),e.state.current.read.update(e,e.record)&&(null!==e.fragmented&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:"Invalid fragmented record.",send:!0,alert:{level:Nt.Alert.Level.fatal,description:Nt.Alert.Description.unexpected_message}})),e.record.ready=!0)),t}(i)),!i.fail&&null!==i.record&&i.record.ready&&function(e,t){var n=t.type-Nt.ContentType.change_cipher_spec,r=Yt[e.entity][e.expect];n in r?r[n](e,t):Nt.handleUnexpected(e,t)}(i,i.record)),t},i.prepare=function(e){return Nt.queue(i,Nt.createRecord(i,{type:Nt.ContentType.application_data,data:W.util.createBuffer(e)})),Nt.flush(i)},i.prepareHeartbeatRequest=function(e,t){return e instanceof W.util.ByteBuffer&&(e=e.bytes()),void 0===t&&(t=e.length),i.expectedHeartbeatPayload=e,Nt.queue(i,Nt.createRecord(i,{type:Nt.ContentType.heartbeat,data:Nt.createHeartbeat(Nt.HeartbeatMessageType.heartbeat_request,e,t)})),Nt.flush(i)},i.close=function(e){if(!i.fail&&i.sessionCache&&i.session){var t={id:i.session.id,version:i.session.version,sp:i.session.sp};t.sp.keys=null,i.sessionCache.setSession(t.id,t)}i.open&&(i.open=!1,i.input.clear(),(i.isConnected||i.handshaking)&&(i.isConnected=i.handshaking=!1,Nt.queue(i,Nt.createAlert(i,{level:Nt.Alert.Level.warning,description:Nt.Alert.Description.close_notify})),Nt.flush(i)),i.closed(i)),i.reset(e)},i},W.tls=W.tls||{},Nt)"function"!=typeof Nt[ln]&&(W.tls[ln]=Nt[ln]);W.tls.prf_tls1=Ct,W.tls.hmac_sha1=function(e,t,n){var r=W.hmac.create();r.start("SHA1",e);var a=W.util.createBuffer();return a.putInt32(t[0]),a.putInt32(t[1]),a.putByte(n.type),a.putByte(n.version.major),a.putByte(n.version.minor),a.putInt16(n.length),a.putBytes(n.fragment.bytes()),r.update(a.getBytes()),r.digest().getBytes()},W.tls.createSessionCache=Nt.createSessionCache,W.tls.createConnection=Nt.createConnection,k((function(e){var t=e.exports=W.tls;function n(e,n,a){var o=n.entity===W.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:W.cipher.createDecipher("AES-CBC",o?a.keys.server_write_key:a.keys.client_write_key),iv:o?a.keys.server_write_IV:a.keys.client_write_IV},e.write.cipherState={init:!1,cipher:W.cipher.createCipher("AES-CBC",o?a.keys.client_write_key:a.keys.server_write_key),iv:o?a.keys.client_write_IV:a.keys.server_write_IV},e.read.cipherFunction=i,e.write.cipherFunction=r,e.read.macLength=e.write.macLength=a.mac_length,e.read.macFunction=e.write.macFunction=t.hmac_sha1}function r(e,n){var r,o=!1,i=n.macFunction(n.macKey,n.sequenceNumber,e);e.fragment.putBytes(i),n.updateSequenceNumber(),r=e.version.minor===t.Versions.TLS_1_0.minor?n.cipherState.init?null:n.cipherState.iv:W.random.getBytesSync(16),n.cipherState.init=!0;var s=n.cipherState.cipher;return s.start({iv:r}),e.version.minor>=t.Versions.TLS_1_1.minor&&s.output.putBytes(r),s.update(e.fragment),s.finish(a)&&(e.fragment=s.output,e.length=e.fragment.length(),o=!0),o}function a(e,t,n){if(!n){var r=e-t.length()%e;t.fillWithByte(r-1,r)}return!0}function o(e,t,n){var r=!0;if(n){for(var a=t.length(),o=t.last(),i=a-1-o;i<a-1;++i)r=r&&t.at(i)==o;r&&t.truncate(o+1)}return r}function i(e,n){var r,a=!1;r=e.version.minor===t.Versions.TLS_1_0.minor?n.cipherState.init?null:n.cipherState.iv:e.fragment.getBytes(16),n.cipherState.init=!0;var i=n.cipherState.cipher;i.start({iv:r}),i.update(e.fragment),a=i.finish(o);var s=n.macLength,u=W.random.getBytesSync(s),c=i.output.length();c>=s?(e.fragment=i.output.getBytes(c-s),u=i.output.getBytes(s)):e.fragment=i.output.getBytes(),e.fragment=W.util.createBuffer(e.fragment),e.length=e.fragment.length();var l=n.macFunction(n.macKey,n.sequenceNumber,e);return n.updateSequenceNumber(),function(e,t,n){var r=W.hmac.create();return r.start("SHA1",e),r.update(t),t=r.digest().getBytes(),r.start(null,null),r.update(n),t===(n=r.digest().getBytes())}(n.macKey,u,l)&&a}t.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,e.cipher_type=t.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=t.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:n},t.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,e.cipher_type=t.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=t.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:n}})),W.debug=W.debug||{},W.debug.storage={},W.debug.get=function(e,t){var n;return void 0===e?n=W.debug.storage:e in W.debug.storage&&(n=void 0===t?W.debug.storage[e]:W.debug.storage[e][t]),n},W.debug.set=function(e,t,n){e in W.debug.storage||(W.debug.storage[e]={}),W.debug.storage[e][t]=n},W.debug.clear=function(e,t){void 0===e?W.debug.storage={}:e in W.debug.storage&&(void 0===t?delete W.debug.storage[e]:delete W.debug.storage[e][t])},k((function(e){var t=e.exports=W.sha512=W.sha512||{};W.md.sha512=W.md.algorithms.sha512=t;var n=W.sha384=W.sha512.sha384=W.sha512.sha384||{};n.create=function(){return t.create("SHA-384")},W.md.sha384=W.md.algorithms.sha384=n,W.sha512.sha256=W.sha512.sha256||{create:function(){return t.create("SHA-512/256")}},W.md["sha512/256"]=W.md.algorithms["sha512/256"]=W.sha512.sha256,W.sha512.sha224=W.sha512.sha224||{create:function(){return t.create("SHA-512/224")}},W.md["sha512/224"]=W.md.algorithms["sha512/224"]=W.sha512.sha224,t.create=function(e){if(a||(r=String.fromCharCode(128),r+=W.util.fillString(String.fromCharCode(0),128),o=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(i={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],i["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],i["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],i["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0),void 0===e&&(e="SHA-512"),!(e in i))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=i[e],n=null,u=W.util.createBuffer(),c=new Array(80),l=0;l<80;++l)c[l]=new Array(2);var d=64;switch(e){case"SHA-384":d=48;break;case"SHA-512/256":d=32;break;case"SHA-512/224":d=28}var f={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:d,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){f.messageLength=0,f.fullMessageLength=f.messageLength128=[];for(var e=f.messageLengthSize/4,r=0;r<e;++r)f.fullMessageLength.push(0);for(u=W.util.createBuffer(),n=new Array(t.length),r=0;r<t.length;++r)n[r]=t[r].slice(0);return f}};return f.start(),f.update=function(e,t){"utf8"===t&&(e=W.util.encodeUtf8(e));var r=e.length;f.messageLength+=r,r=[r/4294967296>>>0,r>>>0];for(var a=f.fullMessageLength.length-1;a>=0;--a)f.fullMessageLength[a]+=r[1],r[1]=r[0]+(f.fullMessageLength[a]/4294967296>>>0),f.fullMessageLength[a]=f.fullMessageLength[a]>>>0,r[0]=r[1]/4294967296>>>0;return u.putBytes(e),s(n,c,u),(u.read>2048||0===u.length())&&u.compact(),f},f.digest=function(){var t=W.util.createBuffer();t.putBytes(u.bytes());var a,o=f.fullMessageLength[f.fullMessageLength.length-1]+f.messageLengthSize&f.blockLength-1;t.putBytes(r.substr(0,f.blockLength-o));for(var i=8*f.fullMessageLength[0],l=0;l<f.fullMessageLength.length-1;++l)i+=(a=8*f.fullMessageLength[l+1])/4294967296>>>0,t.putInt32(i>>>0),i=a>>>0;t.putInt32(i);var d=new Array(n.length);for(l=0;l<n.length;++l)d[l]=n[l].slice(0);s(d,c,t);var p,h=W.util.createBuffer();for(p="SHA-512"===e?d.length:"SHA-384"===e?d.length-2:d.length-4,l=0;l<p;++l)h.putInt32(d[l][0]),l===p-1&&"SHA-512/224"===e||h.putInt32(d[l][1]);return h},f};var r=null,a=!1,o=null,i=null;function s(e,t,n){for(var r,a,i,s,u,c,l,d,f,p,h,m,g,v,y,b,x,k,w,I,C,E,S,T,A,N,_,R,O,F,M,D,B,P=n.length();P>=128;){for(_=0;_<16;++_)t[_][0]=n.getInt32()>>>0,t[_][1]=n.getInt32()>>>0;for(;_<80;++_)r=(((R=(F=t[_-2])[0])>>>19|(O=F[1])<<13)^(O>>>29|R<<3)^R>>>6)>>>0,a=((R<<13|O>>>19)^(O<<3|R>>>29)^(R<<26|O>>>6))>>>0,i=(((R=(D=t[_-15])[0])>>>1|(O=D[1])<<31)^(R>>>8|O<<24)^R>>>7)>>>0,s=((R<<31|O>>>1)^(R<<24|O>>>8)^(R<<25|O>>>7))>>>0,M=t[_-7],B=t[_-16],O=a+M[1]+s+B[1],t[_][0]=r+M[0]+i+B[0]+(O/4294967296>>>0)>>>0,t[_][1]=O>>>0;for(h=e[0][0],m=e[0][1],g=e[1][0],v=e[1][1],y=e[2][0],b=e[2][1],x=e[3][0],k=e[3][1],w=e[4][0],I=e[4][1],C=e[5][0],E=e[5][1],S=e[6][0],T=e[6][1],A=e[7][0],N=e[7][1],_=0;_<80;++_)l=((w>>>14|I<<18)^(w>>>18|I<<14)^(I>>>9|w<<23))>>>0,d=(S^w&(C^S))>>>0,u=((h>>>28|m<<4)^(m>>>2|h<<30)^(m>>>7|h<<25))>>>0,c=((h<<4|m>>>28)^(m<<30|h>>>2)^(m<<25|h>>>7))>>>0,f=(h&g|y&(h^g))>>>0,p=(m&v|b&(m^v))>>>0,O=N+(((w<<18|I>>>14)^(w<<14|I>>>18)^(I<<23|w>>>9))>>>0)+((T^I&(E^T))>>>0)+o[_][1]+t[_][1],r=A+l+d+o[_][0]+t[_][0]+(O/4294967296>>>0)>>>0,a=O>>>0,i=u+f+((O=c+p)/4294967296>>>0)>>>0,s=O>>>0,A=S,N=T,S=C,T=E,C=w,E=I,w=x+r+((O=k+a)/4294967296>>>0)>>>0,I=O>>>0,x=y,k=b,y=g,b=v,g=h,v=m,h=r+i+((O=a+s)/4294967296>>>0)>>>0,m=O>>>0;O=e[0][1]+m,e[0][0]=e[0][0]+h+(O/4294967296>>>0)>>>0,e[0][1]=O>>>0,O=e[1][1]+v,e[1][0]=e[1][0]+g+(O/4294967296>>>0)>>>0,e[1][1]=O>>>0,O=e[2][1]+b,e[2][0]=e[2][0]+y+(O/4294967296>>>0)>>>0,e[2][1]=O>>>0,O=e[3][1]+k,e[3][0]=e[3][0]+x+(O/4294967296>>>0)>>>0,e[3][1]=O>>>0,O=e[4][1]+I,e[4][0]=e[4][0]+w+(O/4294967296>>>0)>>>0,e[4][1]=O>>>0,O=e[5][1]+E,e[5][0]=e[5][0]+C+(O/4294967296>>>0)>>>0,e[5][1]=O>>>0,O=e[6][1]+T,e[6][0]=e[6][0]+S+(O/4294967296>>>0)>>>0,e[6][1]=O>>>0,O=e[7][1]+N,e[7][0]=e[7][0]+A+(O/4294967296>>>0)>>>0,e[7][1]=O>>>0,P-=128}}}));var dn=W.asn1,fn={privateKeyValidator:{name:"PrivateKeyInfo",tagClass:dn.Class.UNIVERSAL,type:dn.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:dn.Class.UNIVERSAL,type:dn.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:dn.Class.UNIVERSAL,type:dn.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:dn.Class.UNIVERSAL,type:dn.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:dn.Class.UNIVERSAL,type:dn.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},publicKeyValidator:{name:"SubjectPublicKeyInfo",tagClass:dn.Class.UNIVERSAL,type:dn.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:dn.Class.UNIVERSAL,type:dn.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:dn.Class.UNIVERSAL,type:dn.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:dn.Class.UNIVERSAL,type:dn.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}},pn=fn.publicKeyValidator,hn=fn.privateKeyValidator;if(void 0===mn)var mn=W.jsbn.BigInteger;var gn=W.util.ByteBuffer,vn="undefined"==typeof Buffer?Uint8Array:Buffer;W.pki=W.pki||{},W.pki.ed25519=W.ed25519=W.ed25519||{};var yn=W.ed25519;function bn(e){var t=e.message;if(t instanceof Uint8Array||t instanceof vn)return t;var n=e.encoding;if(void 0===t){if(!e.md)throw new TypeError('"options.message" or "options.md" not specified.');t=e.md.digest().getBytes(),n="binary"}if("string"==typeof t&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if("string"==typeof t){if("undefined"!=typeof Buffer)return Buffer.from(t,n);t=new gn(t,n)}else if(!(t instanceof gn))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var r=new vn(t.length()),a=0;a<r.length;++a)r[a]=t.at(a);return r}yn.constants={},yn.constants.PUBLIC_KEY_BYTE_LENGTH=32,yn.constants.PRIVATE_KEY_BYTE_LENGTH=64,yn.constants.SEED_BYTE_LENGTH=32,yn.constants.SIGN_BYTE_LENGTH=64,yn.constants.HASH_BYTE_LENGTH=64,yn.generateKeyPair=function(e){var t=(e=e||{}).seed;if(void 0===t)t=W.random.getBytesSync(yn.constants.SEED_BYTE_LENGTH);else if("string"==typeof t){if(t.length!==yn.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+yn.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=bn({message:t,encoding:"binary"});for(var n=new vn(yn.constants.PUBLIC_KEY_BYTE_LENGTH),r=new vn(yn.constants.PRIVATE_KEY_BYTE_LENGTH),a=0;a<32;++a)r[a]=t[a];return function(e,t){var n,r=[jn(),jn(),jn(),jn()],a=An(t,32);for(a[0]&=248,a[31]&=127,a[31]|=64,Un(r,a),Fn(e,r),n=0;n<32;++n)t[n+32]=e[n]}(n,r),{publicKey:n,privateKey:r}},yn.privateKeyFromAsn1=function(e){var t={},n=[];if(!W.asn1.validate(e,hn,t,n)){var r=new Error("Invalid Key.");throw r.errors=n,r}var a=W.asn1.derToOid(t.privateKeyOid),o=W.oids.EdDSA25519;if(a!==o)throw new Error('Invalid OID "'+a+'"; OID must be "'+o+'".');var i=t.privateKey;return{privateKeyBytes:bn({message:W.asn1.fromDer(i).value,encoding:"binary"})}},yn.publicKeyFromAsn1=function(e){var t={},n=[];if(!W.asn1.validate(e,pn,t,n)){var r=new Error("Invalid Key.");throw r.errors=n,r}var a=W.asn1.derToOid(t.publicKeyOid),o=W.oids.EdDSA25519;if(a!==o)throw new Error('Invalid OID "'+a+'"; OID must be "'+o+'".');var i=t.ed25519PublicKey;if(i.length!==yn.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return bn({message:i,encoding:"binary"})},yn.publicKeyFromPrivateKey=function(e){var t=bn({message:(e=e||{}).privateKey,encoding:"binary"});if(t.length!==yn.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+yn.constants.PRIVATE_KEY_BYTE_LENGTH);for(var n=new vn(yn.constants.PUBLIC_KEY_BYTE_LENGTH),r=0;r<n.length;++r)n[r]=t[32+r];return n},yn.sign=function(e){var t=bn(e=e||{}),n=bn({message:e.privateKey,encoding:"binary"});if(n.length===yn.constants.SEED_BYTE_LENGTH)n=yn.generateKeyPair({seed:n}).privateKey;else if(n.length!==yn.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+yn.constants.SEED_BYTE_LENGTH+" or "+yn.constants.PRIVATE_KEY_BYTE_LENGTH);var r=new vn(yn.constants.SIGN_BYTE_LENGTH+t.length);!function(e,t,n,r){var a,o,i=new Float64Array(64),s=[jn(),jn(),jn(),jn()],u=An(r,32);for(u[0]&=248,u[31]&=127,u[31]|=64,a=0;a<n;++a)e[64+a]=t[a];for(a=0;a<32;++a)e[32+a]=u[32+a];var c=An(e.subarray(32),n+32);for(_n(c),Un(s,c),Fn(e,s),a=32;a<64;++a)e[a]=r[a];var l=An(e,n+64);for(_n(l),a=32;a<64;++a)i[a]=0;for(a=0;a<32;++a)i[a]=c[a];for(a=0;a<32;++a)for(o=0;o<32;o++)i[a+o]+=l[a]*u[o];Nn(e.subarray(32),i)}(r,t,t.length,n);for(var a=new vn(yn.constants.SIGN_BYTE_LENGTH),o=0;o<a.length;++o)a[o]=r[o];return a},yn.verify=function(e){var t=bn(e=e||{});if(void 0===e.signature)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var n=bn({message:e.signature,encoding:"binary"});if(n.length!==yn.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+yn.constants.SIGN_BYTE_LENGTH);var r=bn({message:e.publicKey,encoding:"binary"});if(r.length!==yn.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+yn.constants.PUBLIC_KEY_BYTE_LENGTH);var a,o=new vn(yn.constants.SIGN_BYTE_LENGTH+t.length),i=new vn(yn.constants.SIGN_BYTE_LENGTH+t.length);for(a=0;a<yn.constants.SIGN_BYTE_LENGTH;++a)o[a]=n[a];for(a=0;a<t.length;++a)o[a+yn.constants.SIGN_BYTE_LENGTH]=t[a];return function(e,t,n,r){var a,o=new vn(32),i=[jn(),jn(),jn(),jn()],s=[jn(),jn(),jn(),jn()];if(n<64)return-1;if(function(e,t){var n=jn(),r=jn(),a=jn(),o=jn(),i=jn(),s=jn(),u=jn();return Vn(e[2],kn),function(e,t){var n;for(n=0;n<16;++n)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}(e[1],t),Kn(a,e[1]),qn(o,a,wn),Gn(a,a,e[2]),Hn(o,e[2],o),Kn(i,o),Kn(s,i),qn(u,s,i),qn(n,u,a),qn(n,n,o),function(e,t){var n,r=jn();for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)Kn(r,r),1!==n&&qn(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}(n,n),qn(n,n,a),qn(n,n,o),qn(n,n,o),qn(e[0],n,o),Kn(r,e[0]),qn(r,r,o),Dn(r,a)&&qn(e[0],e[0],Tn),Kn(r,e[0]),qn(r,r,o),Dn(r,a)?-1:(Pn(e[0])===t[31]>>7&&Gn(e[0],xn,e[0]),qn(e[3],e[0],e[1]),0)}(s,r))return-1;for(a=0;a<n;++a)e[a]=t[a];for(a=0;a<32;++a)e[a+32]=r[a];var u=An(e,n);if(_n(u),Ln(i,s,u),Un(s,t.subarray(32)),Rn(i,s),Fn(o,i),n-=64,Bn(t,0,o,0)){for(a=0;a<n;++a)e[a]=0;return-1}for(a=0;a<n;++a)e[a]=t[a+64];return n}(i,o,o.length,r)>=0};var xn=jn(),kn=jn([1]),wn=jn([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),In=jn([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Cn=jn([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),En=jn([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Sn=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Tn=jn([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function An(e,t){var n=W.md.sha512.create(),r=new gn(e);n.update(r.getBytes(t),"binary");var a=n.digest().getBytes();if("undefined"!=typeof Buffer)return Buffer.from(a,"binary");for(var o=new vn(yn.constants.HASH_BYTE_LENGTH),i=0;i<64;++i)o[i]=a.charCodeAt(i);return o}function Nn(e,t){var n,r,a,o;for(r=63;r>=32;--r){for(n=0,a=r-32,o=r-12;a<o;++a)t[a]+=n-16*t[r]*Sn[a-(r-32)],n=t[a]+128>>8,t[a]-=256*n;t[a]+=n,t[r]=0}for(n=0,a=0;a<32;++a)t[a]+=n-(t[31]>>4)*Sn[a],n=t[a]>>8,t[a]&=255;for(a=0;a<32;++a)t[a]-=n*Sn[a];for(r=0;r<32;++r)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function _n(e){for(var t=new Float64Array(64),n=0;n<64;++n)t[n]=e[n],e[n]=0;Nn(e,t)}function Rn(e,t){var n=jn(),r=jn(),a=jn(),o=jn(),i=jn(),s=jn(),u=jn(),c=jn(),l=jn();Gn(n,e[1],e[0]),Gn(l,t[1],t[0]),qn(n,n,l),Hn(r,e[0],e[1]),Hn(l,t[0],t[1]),qn(r,r,l),qn(a,e[3],t[3]),qn(a,a,In),qn(o,e[2],t[2]),Hn(o,o,o),Gn(i,r,n),Gn(s,o,a),Hn(u,o,a),Hn(c,r,n),qn(e[0],i,s),qn(e[1],c,u),qn(e[2],u,s),qn(e[3],i,c)}function On(e,t,n){for(var r=0;r<4;++r)zn(e[r],t[r],n)}function Fn(e,t){var n=jn(),r=jn(),a=jn();!function(e,t){var n,r=jn();for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)Kn(r,r),2!==n&&4!==n&&qn(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}(a,t[2]),qn(n,t[0],a),qn(r,t[1],a),Mn(e,r),e[31]^=Pn(n)<<7}function Mn(e,t){var n,r,a,o=jn(),i=jn();for(n=0;n<16;++n)i[n]=t[n];for(Wn(i),Wn(i),Wn(i),r=0;r<2;++r){for(o[0]=i[0]-65517,n=1;n<15;++n)o[n]=i[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=i[15]-32767-(o[14]>>16&1),a=o[15]>>16&1,o[14]&=65535,zn(i,o,1-a)}for(n=0;n<16;n++)e[2*n]=255&i[n],e[2*n+1]=i[n]>>8}function Dn(e,t){var n=new vn(32),r=new vn(32);return Mn(n,e),Mn(r,t),Bn(n,0,r,0)}function Bn(e,t,n,r){return function(e,t,n,r,a){var o,i=0;for(o=0;o<a;++o)i|=e[t+o]^n[r+o];return(1&i-1>>>8)-1}(e,t,n,r,32)}function Pn(e){var t=new vn(32);return Mn(t,e),1&t[0]}function Ln(e,t,n){var r,a;for(Vn(e[0],xn),Vn(e[1],kn),Vn(e[2],kn),Vn(e[3],xn),a=255;a>=0;--a)On(e,t,r=n[a/8|0]>>(7&a)&1),Rn(t,e),Rn(e,e),On(e,t,r)}function Un(e,t){var n=[jn(),jn(),jn(),jn()];Vn(n[0],Cn),Vn(n[1],En),Vn(n[2],kn),qn(n[3],Cn,En),Ln(e,n,t)}function Vn(e,t){var n;for(n=0;n<16;n++)e[n]=0|t[n]}function Wn(e){var t,n,r=1;for(t=0;t<16;++t)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-65536*r;e[0]+=r-1+37*(r-1)}function zn(e,t,n){for(var r,a=~(n-1),o=0;o<16;++o)r=a&(e[o]^t[o]),e[o]^=r,t[o]^=r}function jn(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;++t)n[t]=e[t];return n}function Hn(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]+n[r]}function Gn(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]-n[r]}function Kn(e,t){qn(e,t,t)}function qn(e,t,n){var r,a,o=0,i=0,s=0,u=0,c=0,l=0,d=0,f=0,p=0,h=0,m=0,g=0,v=0,y=0,b=0,x=0,k=0,w=0,I=0,C=0,E=0,S=0,T=0,A=0,N=0,_=0,R=0,O=0,F=0,M=0,D=0,B=n[0],P=n[1],L=n[2],U=n[3],V=n[4],W=n[5],z=n[6],j=n[7],H=n[8],G=n[9],K=n[10],q=n[11],X=n[12],Q=n[13],Y=n[14],$=n[15];o+=(r=t[0])*B,i+=r*P,s+=r*L,u+=r*U,c+=r*V,l+=r*W,d+=r*z,f+=r*j,p+=r*H,h+=r*G,m+=r*K,g+=r*q,v+=r*X,y+=r*Q,b+=r*Y,x+=r*$,i+=(r=t[1])*B,s+=r*P,u+=r*L,c+=r*U,l+=r*V,d+=r*W,f+=r*z,p+=r*j,h+=r*H,m+=r*G,g+=r*K,v+=r*q,y+=r*X,b+=r*Q,x+=r*Y,k+=r*$,s+=(r=t[2])*B,u+=r*P,c+=r*L,l+=r*U,d+=r*V,f+=r*W,p+=r*z,h+=r*j,m+=r*H,g+=r*G,v+=r*K,y+=r*q,b+=r*X,x+=r*Q,k+=r*Y,w+=r*$,u+=(r=t[3])*B,c+=r*P,l+=r*L,d+=r*U,f+=r*V,p+=r*W,h+=r*z,m+=r*j,g+=r*H,v+=r*G,y+=r*K,b+=r*q,x+=r*X,k+=r*Q,w+=r*Y,I+=r*$,c+=(r=t[4])*B,l+=r*P,d+=r*L,f+=r*U,p+=r*V,h+=r*W,m+=r*z,g+=r*j,v+=r*H,y+=r*G,b+=r*K,x+=r*q,k+=r*X,w+=r*Q,I+=r*Y,C+=r*$,l+=(r=t[5])*B,d+=r*P,f+=r*L,p+=r*U,h+=r*V,m+=r*W,g+=r*z,v+=r*j,y+=r*H,b+=r*G,x+=r*K,k+=r*q,w+=r*X,I+=r*Q,C+=r*Y,E+=r*$,d+=(r=t[6])*B,f+=r*P,p+=r*L,h+=r*U,m+=r*V,g+=r*W,v+=r*z,y+=r*j,b+=r*H,x+=r*G,k+=r*K,w+=r*q,I+=r*X,C+=r*Q,E+=r*Y,S+=r*$,f+=(r=t[7])*B,p+=r*P,h+=r*L,m+=r*U,g+=r*V,v+=r*W,y+=r*z,b+=r*j,x+=r*H,k+=r*G,w+=r*K,I+=r*q,C+=r*X,E+=r*Q,S+=r*Y,T+=r*$,p+=(r=t[8])*B,h+=r*P,m+=r*L,g+=r*U,v+=r*V,y+=r*W,b+=r*z,x+=r*j,k+=r*H,w+=r*G,I+=r*K,C+=r*q,E+=r*X,S+=r*Q,T+=r*Y,A+=r*$,h+=(r=t[9])*B,m+=r*P,g+=r*L,v+=r*U,y+=r*V,b+=r*W,x+=r*z,k+=r*j,w+=r*H,I+=r*G,C+=r*K,E+=r*q,S+=r*X,T+=r*Q,A+=r*Y,N+=r*$,m+=(r=t[10])*B,g+=r*P,v+=r*L,y+=r*U,b+=r*V,x+=r*W,k+=r*z,w+=r*j,I+=r*H,C+=r*G,E+=r*K,S+=r*q,T+=r*X,A+=r*Q,N+=r*Y,_+=r*$,g+=(r=t[11])*B,v+=r*P,y+=r*L,b+=r*U,x+=r*V,k+=r*W,w+=r*z,I+=r*j,C+=r*H,E+=r*G,S+=r*K,T+=r*q,A+=r*X,N+=r*Q,_+=r*Y,R+=r*$,v+=(r=t[12])*B,y+=r*P,b+=r*L,x+=r*U,k+=r*V,w+=r*W,I+=r*z,C+=r*j,E+=r*H,S+=r*G,T+=r*K,A+=r*q,N+=r*X,_+=r*Q,R+=r*Y,O+=r*$,y+=(r=t[13])*B,b+=r*P,x+=r*L,k+=r*U,w+=r*V,I+=r*W,C+=r*z,E+=r*j,S+=r*H,T+=r*G,A+=r*K,N+=r*q,_+=r*X,R+=r*Q,O+=r*Y,F+=r*$,b+=(r=t[14])*B,x+=r*P,k+=r*L,w+=r*U,I+=r*V,C+=r*W,E+=r*z,S+=r*j,T+=r*H,A+=r*G,N+=r*K,_+=r*q,R+=r*X,O+=r*Q,F+=r*Y,M+=r*$,x+=(r=t[15])*B,i+=38*(w+=r*L),s+=38*(I+=r*U),u+=38*(C+=r*V),c+=38*(E+=r*W),l+=38*(S+=r*z),d+=38*(T+=r*j),f+=38*(A+=r*H),p+=38*(N+=r*G),h+=38*(_+=r*K),m+=38*(R+=r*q),g+=38*(O+=r*X),v+=38*(F+=r*Q),y+=38*(M+=r*Y),b+=38*(D+=r*$),o=(r=(o+=38*(k+=r*P))+(a=1)+65535)-65536*(a=Math.floor(r/65536)),i=(r=i+a+65535)-65536*(a=Math.floor(r/65536)),s=(r=s+a+65535)-65536*(a=Math.floor(r/65536)),u=(r=u+a+65535)-65536*(a=Math.floor(r/65536)),c=(r=c+a+65535)-65536*(a=Math.floor(r/65536)),l=(r=l+a+65535)-65536*(a=Math.floor(r/65536)),d=(r=d+a+65535)-65536*(a=Math.floor(r/65536)),f=(r=f+a+65535)-65536*(a=Math.floor(r/65536)),p=(r=p+a+65535)-65536*(a=Math.floor(r/65536)),h=(r=h+a+65535)-65536*(a=Math.floor(r/65536)),m=(r=m+a+65535)-65536*(a=Math.floor(r/65536)),g=(r=g+a+65535)-65536*(a=Math.floor(r/65536)),v=(r=v+a+65535)-65536*(a=Math.floor(r/65536)),y=(r=y+a+65535)-65536*(a=Math.floor(r/65536)),b=(r=b+a+65535)-65536*(a=Math.floor(r/65536)),x=(r=x+a+65535)-65536*(a=Math.floor(r/65536)),o=(r=(o+=a-1+37*(a-1))+(a=1)+65535)-65536*(a=Math.floor(r/65536)),i=(r=i+a+65535)-65536*(a=Math.floor(r/65536)),s=(r=s+a+65535)-65536*(a=Math.floor(r/65536)),u=(r=u+a+65535)-65536*(a=Math.floor(r/65536)),c=(r=c+a+65535)-65536*(a=Math.floor(r/65536)),l=(r=l+a+65535)-65536*(a=Math.floor(r/65536)),d=(r=d+a+65535)-65536*(a=Math.floor(r/65536)),f=(r=f+a+65535)-65536*(a=Math.floor(r/65536)),p=(r=p+a+65535)-65536*(a=Math.floor(r/65536)),h=(r=h+a+65535)-65536*(a=Math.floor(r/65536)),m=(r=m+a+65535)-65536*(a=Math.floor(r/65536)),g=(r=g+a+65535)-65536*(a=Math.floor(r/65536)),v=(r=v+a+65535)-65536*(a=Math.floor(r/65536)),y=(r=y+a+65535)-65536*(a=Math.floor(r/65536)),b=(r=b+a+65535)-65536*(a=Math.floor(r/65536)),x=(r=x+a+65535)-65536*(a=Math.floor(r/65536)),o+=a-1+37*(a-1),e[0]=o,e[1]=i,e[2]=s,e[3]=u,e[4]=c,e[5]=l,e[6]=d,e[7]=f,e[8]=p,e[9]=h,e[10]=m,e[11]=g,e[12]=v,e[13]=y,e[14]=b,e[15]=x}W.kem=W.kem||{};var Xn=W.jsbn.BigInteger;function Qn(e,t,n,r){e.generate=function(e,a){for(var o=new W.util.ByteBuffer,i=Math.ceil(a/r)+n,s=new W.util.ByteBuffer,u=n;u<i;++u){s.putInt32(u),t.start(),t.update(e+s.getBytes());var c=t.digest();o.putBytes(c.getBytes(r))}return o.truncate(o.length()-a),o.getBytes()}}W.kem.rsa={},W.kem.rsa.create=function(e,t){var n=(t=t||{}).prng||W.random;return{encrypt:function(t,r){var a,o=Math.ceil(t.n.bitLength()/8);do{a=new Xn(W.util.bytesToHex(n.getBytesSync(o)),16).mod(t.n)}while(a.compareTo(Xn.ONE)<=0);var i=o-(a=W.util.hexToBytes(a.toString(16))).length;return i>0&&(a=W.util.fillString(String.fromCharCode(0),i)+a),{encapsulation:t.encrypt(a,"NONE"),key:e.generate(a,r)}},decrypt:function(t,n,r){var a=t.decrypt(n,"NONE");return e.generate(a,r)}}},W.kem.kdf1=function(e,t){Qn(this,e,0,t||e.digestLength)},W.kem.kdf2=function(e,t){Qn(this,e,1,t||e.digestLength)},W.log=W.log||{},W.log.levels=["none","error","warning","info","debug","verbose","max"];var Yn={},$n=[],Zn=null;W.log.LEVEL_LOCKED=2,W.log.NO_LEVEL_CHECK=4,W.log.INTERPOLATE=8;for(var Jn=0;Jn<W.log.levels.length;++Jn){var er=W.log.levels[Jn];Yn[er]={index:Jn,name:er.toUpperCase()}}W.log.logMessage=function(e){for(var t=Yn[e.level].index,n=0;n<$n.length;++n){var r=$n[n];r.flags&W.log.NO_LEVEL_CHECK?r.f(e):t<=Yn[r.level].index&&r.f(r,e)}},W.log.prepareStandard=function(e){"standard"in e||(e.standard=Yn[e.level].name+" ["+e.category+"] "+e.message)},W.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]||e.arguments),e.full=W.util.format.apply(this,t)}},W.log.prepareStandardFull=function(e){"standardFull"in e||(W.log.prepareStandard(e),e.standardFull=e.standard)};var tr=["error","warning","info","debug","verbose"];for(Jn=0;Jn<tr.length;++Jn)!function(e){W.log[e]=function(t,n){var r=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:e,category:t,message:n,arguments:r};W.log.logMessage(a)}}(tr[Jn]);if(W.log.makeLogger=function(e){var t={flags:0,f:e};return W.log.setLevel(t,"none"),t},W.log.setLevel=function(e,t){var n=!1;if(e&&!(e.flags&W.log.LEVEL_LOCKED))for(var r=0;r<W.log.levels.length;++r)if(t==W.log.levels[r]){e.level=t,n=!0;break}return n},W.log.lock=function(e,t){void 0===t||t?e.flags|=W.log.LEVEL_LOCKED:e.flags&=~W.log.LEVEL_LOCKED},W.log.addLogger=function(e){$n.push(e)},"undefined"!=typeof console&&"log"in console){var nr;if(console.error&&console.warn&&console.info&&console.debug){var rr={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},ar=function(e,t){W.log.prepareStandard(t);var n=rr[t.level],r=[t.standard];r=r.concat(t.arguments.slice()),n.apply(console,r)};nr=W.log.makeLogger(ar)}else ar=function(e,t){W.log.prepareStandardFull(t),console.log(t.standardFull)},nr=W.log.makeLogger(ar);W.log.setLevel(nr,"debug"),W.log.addLogger(nr),Zn=nr}else console={log:function(){}};if(null!==Zn){var or=W.util.getQueryVariables();"console.level"in or&&W.log.setLevel(Zn,or["console.level"].slice(-1)[0]),"console.lock"in or&&"true"==or["console.lock"].slice(-1)[0]&&W.log.lock(Zn)}W.log.consoleLogger=Zn,k((function(e){var t=W.asn1,n=e.exports=W.pkcs7=W.pkcs7||{};function r(e){var r={},a=[];if(!t.validate(e,n.asn1.recipientInfoValidator,r,a)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=a,o}return{version:r.version.charCodeAt(0),issuer:W.pki.RDNAttributesAsArray(r.issuer),serialNumber:W.util.createBuffer(r.serial).toHex(),encryptedContent:{algorithm:t.derToOid(r.encAlgorithm),parameter:r.encParameter.value,content:r.encKey}}}function a(e){for(var n,r=[],a=0;a<e.length;++a)r.push((n=e[a],t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(n.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[W.pki.distinguishedNameToAsn1({attributes:n.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,W.util.hexToBytes(n.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.encryptedContent.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.encryptedContent.content)])));return r}function o(e){var n=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[W.pki.distinguishedNameToAsn1({attributes:e.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,W.util.hexToBytes(e.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.digestAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&n.value.push(e.authenticatedAttributesAsn1),n.value.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])),n.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[]),a=0;a<e.unauthenticatedAttributes.length;++a){var o=e.unauthenticatedAttributes[a];r.values.push(i(o))}n.value.push(r)}return n}function i(e){var n;if(e.type===W.pki.oids.contentType)n=t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.value).getBytes());else if(e.type===W.pki.oids.messageDigest)n=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===W.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),a=new Date("2050-01-01T00:00:00Z"),o=e.value;if("string"==typeof o){var i=Date.parse(o);o=isNaN(i)?13===o.length?t.utcTimeToDate(o):t.generalizedTimeToDate(o):new Date(i)}n=o>=r&&o<a?t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(o)):t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(o))}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[n])])}function s(e,n,r){var a={};if(!t.validate(n,r,a,[])){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}if(t.derToOid(a.contentType)!==W.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(a.encryptedContent){var i="";if(W.util.isArray(a.encryptedContent))for(var s=0;s<a.encryptedContent.length;++s){if(a.encryptedContent[s].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");i+=a.encryptedContent[s].value}else i=a.encryptedContent;e.encryptedContent={algorithm:t.derToOid(a.encAlgorithm),parameter:W.util.createBuffer(a.encParameter.value),content:W.util.createBuffer(i)}}if(a.content){if(i="",W.util.isArray(a.content))for(s=0;s<a.content.length;++s){if(a.content[s].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");i+=a.content[s].value}else i=a.content;e.content=W.util.createBuffer(i)}return e.version=a.version.charCodeAt(0),e.rawCapture=a,a}function u(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case W.pki.oids["aes128-CBC"]:case W.pki.oids["aes192-CBC"]:case W.pki.oids["aes256-CBC"]:t=W.aes.createDecryptionCipher(e.encryptedContent.key);break;case W.pki.oids.desCBC:case W.pki.oids["des-EDE3-CBC"]:t=W.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}n.messageFromPem=function(e){var r=W.pem.decode(e)[0];if("PKCS7"!==r.type){var a=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw a.headerType=r.type,a}if(r.procType&&"ENCRYPTED"===r.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=t.fromDer(r.body);return n.messageFromAsn1(o)},n.messageToPem=function(e,n){var r={type:"PKCS7",body:t.toDer(e.toAsn1()).getBytes()};return W.pem.encode(r,{maxline:n})},n.messageFromAsn1=function(e){var r={},a=[];if(!t.validate(e,n.asn1.contentInfoValidator,r,a)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=a,o}var i,s=t.derToOid(r.contentType);switch(s){case W.pki.oids.envelopedData:i=n.createEnvelopedData();break;case W.pki.oids.encryptedData:i=n.createEncryptedData();break;case W.pki.oids.signedData:i=n.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+s+" is not (yet) supported.")}return i.fromAsn1(r.content.value[0]),i},n.createSignedData=function(){var e=null;return e={type:W.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(s(e,t,n.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var r=e.rawCapture.certificates.value,a=0;a<r.length;++a)e.certificates.push(W.pki.certificateFromAsn1(r[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],r=0;r<e.certificates.length;++r)n.push(W.pki.certificateToAsn1(e.certificates[r]));var a=[],o=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&o.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,n)),a.length>0&&o.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,a)),o.value[0].value.push(t.create(t.Class.UNIVERSAL,t.Type.SET,!0,e.signerInfos)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),o])},addSigner:function(t){var n=t.issuer,r=t.serialNumber;if(t.certificate){var a=t.certificate;"string"==typeof a&&(a=W.pki.certificateFromPem(a)),n=a.issuer.attributes,r=a.serialNumber}var o=t.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof o&&(o=W.pki.privateKeyFromPem(o));var i=t.digestAlgorithm||W.pki.oids.sha1;switch(i){case W.pki.oids.sha1:case W.pki.oids.sha256:case W.pki.oids.sha384:case W.pki.oids.sha512:case W.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+i)}var s=t.authenticatedAttributes||[];if(s.length>0){for(var u=!1,c=!1,l=0;l<s.length;++l){var d=s[l];if(u||d.type!==W.pki.oids.contentType){if(c||d.type!==W.pki.oids.messageDigest);else if(c=!0,u)break}else if(u=!0,c)break}if(!u||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:n,serialNumber:r,digestAlgorithm:i,signatureAlgorithm:W.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:s,unauthenticatedAttributes:[]})},sign:function(n){var r;n=n||{},("object"!=typeof e.content||null===e.contentInfo)&&(e.contentInfo=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(W.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof W.util.ByteBuffer?r=e.content.bytes():"string"==typeof e.content&&(r=W.util.encodeUtf8(e.content)),n.detached?e.detachedContent=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r):e.contentInfo.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r)])))),0!==e.signers.length&&function(n){var r;if(!(r=e.detachedContent?e.detachedContent:(r=e.contentInfo.value[1]).value[0]))throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=t.derToOid(e.contentInfo.value[0].value),s=t.toDer(r);for(var u in s.getByte(),t.getBerValueLength(s),s=s.getBytes(),n)n[u].start().update(s);for(var c=new Date,l=0;l<e.signers.length;++l){var d=e.signers[l];if(0===d.authenticatedAttributes.length){if(a!==W.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[]),p=0;p<d.authenticatedAttributes.length;++p){var h=d.authenticatedAttributes[p];h.type===W.pki.oids.messageDigest?h.value=n[d.digestAlgorithm].digest():h.type===W.pki.oids.signingTime&&(h.value||(h.value=c)),f.value.push(i(h)),d.authenticatedAttributesAsn1.value.push(i(h))}s=t.toDer(f).getBytes(),d.md.start().update(s)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],n=0;n<e.length;++n)t.push(o(e[n]));return t}(e.signers)}(function(){for(var n={},r=0;r<e.signers.length;++r){var a=e.signers[r];(o=a.digestAlgorithm)in n||(n[o]=W.md[W.pki.oids[o]].create()),0===a.authenticatedAttributes.length?a.md=n[o]:a.md=W.md[W.pki.oids[o]].create()}for(var o in e.digestAlgorithmIdentifiers=[],n)e.digestAlgorithmIdentifiers.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(o).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]));return n}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=W.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},n.createEncryptedData=function(){var e=null;return e={type:W.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:W.pki.oids["aes256-CBC"]},fromAsn1:function(t){s(e,t,n.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),u(e)}}},n.createEnvelopedData=function(){var e=null;return e={type:W.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:W.pki.oids["aes256-CBC"]},fromAsn1:function(t){var a=s(e,t,n.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],n=0;n<e.length;++n)t.push(r(e[n]));return t}(a.recipientInfos.value)},toAsn1:function(){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,a(e.recipients)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,(n=e.encryptedContent,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(W.pki.oids.data).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.parameter.getBytes())]),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.content.getBytes())])]))])])]);var n},findRecipient:function(t){for(var n=t.issuer.attributes,r=0;r<e.recipients.length;++r){var a=e.recipients[r],o=a.issuer;if(a.serialNumber===t.serialNumber&&o.length===n.length){for(var i=!0,s=0;s<n.length;++s)if(o[s].type!==n[s].type||o[s].value!==n[s].value){i=!1;break}if(i)return a}}return null},decrypt:function(t,n){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==n)switch(t.encryptedContent.algorithm){case W.pki.oids.rsaEncryption:case W.pki.oids.desCBC:var r=n.decrypt(t.encryptedContent.content);e.encryptedContent.key=W.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}u(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:W.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(void 0===e.encryptedContent.content){var r,a,o;switch(n=n||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,n){case W.pki.oids["aes128-CBC"]:r=16,a=16,o=W.aes.createEncryptionCipher;break;case W.pki.oids["aes192-CBC"]:r=24,a=16,o=W.aes.createEncryptionCipher;break;case W.pki.oids["aes256-CBC"]:r=32,a=16,o=W.aes.createEncryptionCipher;break;case W.pki.oids["des-EDE3-CBC"]:r=24,a=8,o=W.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(void 0===t)t=W.util.createBuffer(W.random.getBytes(r));else if(t.length()!=r)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+r+".");e.encryptedContent.algorithm=n,e.encryptedContent.key=t,e.encryptedContent.parameter=W.util.createBuffer(W.random.getBytes(a));var i=o(t);if(i.start(e.encryptedContent.parameter.copy()),i.update(e.content),!i.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=i.output}for(var s=0;s<e.recipients.length;++s){var u=e.recipients[s];if(void 0===u.encryptedContent.content)switch(u.encryptedContent.algorithm){case W.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}}}})),k((function(e){var t=e.exports=W.ssh=W.ssh||{};function n(e,t){var n=t.toString(16);n[0]>="8"&&(n="00"+n);var r=W.util.hexToBytes(n);e.putInt32(r.length),e.putBytes(r)}function r(e,t){e.putInt32(t.length),e.putString(t)}function a(){for(var e=W.md.sha1.create(),t=arguments.length,n=0;n<t;++n)e.update(arguments[n]);return e.digest()}t.privateKeyToPutty=function(e,t,o){var i=""===(t=t||"")?"none":"aes256-cbc",s="PuTTY-User-Key-File-2: ssh-rsa\r\n";s+="Encryption: "+i+"\r\n",s+="Comment: "+(o=o||"")+"\r\n";var u=W.util.createBuffer();r(u,"ssh-rsa"),n(u,e.e),n(u,e.n);var c=W.util.encode64(u.bytes(),64),l=Math.floor(c.length/66)+1;s+="Public-Lines: "+l+"\r\n",s+=c;var d,f=W.util.createBuffer();if(n(f,e.d),n(f,e.p),n(f,e.q),n(f,e.qInv),t){var p=f.length()+16-1;p-=p%16;var h=a(f.bytes());h.truncate(h.length()-p+f.length()),f.putBuffer(h);var m=W.util.createBuffer();m.putBuffer(a("\0\0\0\0",t)),m.putBuffer(a("\0\0\0",t));var g=W.aes.createEncryptionCipher(m.truncate(8),"CBC");g.start(W.util.createBuffer().fillWithByte(0,16)),g.update(f.copy()),g.finish();var v=g.output;v.truncate(16),d=W.util.encode64(v.bytes(),64)}else d=W.util.encode64(f.bytes(),64);s+="\r\nPrivate-Lines: "+(l=Math.floor(d.length/66)+1)+"\r\n",s+=d;var y=a("putty-private-key-file-mac-key",t),b=W.util.createBuffer();r(b,"ssh-rsa"),r(b,i),r(b,o),b.putInt32(u.length()),b.putBuffer(u),b.putInt32(f.length()),b.putBuffer(f);var x=W.hmac.create();return x.start("sha1",y),x.update(b.bytes()),s+"\r\nPrivate-MAC: "+x.digest().toHex()+"\r\n"},t.publicKeyToOpenSSH=function(e,t){t=t||"";var a=W.util.createBuffer();return r(a,"ssh-rsa"),n(a,e.e),n(a,e.n),"ssh-rsa "+W.util.encode64(a.bytes())+" "+t},t.privateKeyToOpenSSH=function(e,t){return t?W.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):W.pki.privateKeyToPem(e)},t.getPublicKeyFingerprint=function(e,t){var a=(t=t||{}).md||W.md.md5.create(),o=W.util.createBuffer();r(o,"ssh-rsa"),n(o,e.e),n(o,e.n),a.start(),a.update(o.getBytes());var i=a.digest();if("hex"===t.encoding){var s=i.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}if("binary"===t.encoding)return i.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return i}}));var ir="forge.task",sr={},ur=0;W.debug.set(ir,"tasks",sr);var cr={};W.debug.set(ir,"queues",cr);var lr="ready",dr="running",fr="blocked",pr="sleeping",hr="done",mr="error",gr={ready:{}};gr.ready.stop=lr,gr.ready.start=dr,gr.ready.cancel=hr,gr.ready.fail=mr,gr.running={},gr.running.stop=lr,gr.running.start=dr,gr.running.block=fr,gr.running.unblock=dr,gr.running.sleep=pr,gr.running.wakeup=dr,gr.running.cancel=hr,gr.running.fail=mr,gr.blocked={},gr.blocked.stop=fr,gr.blocked.start=fr,gr.blocked.block=fr,gr.blocked.unblock=fr,gr.blocked.sleep=fr,gr.blocked.wakeup=fr,gr.blocked.cancel=hr,gr.blocked.fail=mr,gr.sleeping={},gr.sleeping.stop=pr,gr.sleeping.start=pr,gr.sleeping.block=pr,gr.sleeping.unblock=pr,gr.sleeping.sleep=pr,gr.sleeping.wakeup=pr,gr.sleeping.cancel=hr,gr.sleeping.fail=mr,gr.done={},gr.done.stop=hr,gr.done.start=hr,gr.done.block=hr,gr.done.unblock=hr,gr.done.sleep=hr,gr.done.wakeup=hr,gr.done.cancel=hr,gr.done.fail=mr,gr.error={},gr.error.stop=mr,gr.error.start=mr,gr.error.block=mr,gr.error.unblock=mr,gr.error.sleep=mr,gr.error.wakeup=mr,gr.error.cancel=mr,gr.error.fail=mr;var vr=function(e){this.id=-1,this.name=e.name||"?",this.parent=e.parent||null,this.run=e.run,this.subtasks=[],this.error=!1,this.state=lr,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=ur++,sr[this.id]=this};vr.prototype.debug=function(e){e=e||"",W.log.debug(ir,e,"[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",cr)},vr.prototype.next=function(e,t){"function"==typeof e&&(t=e,e=this.name);var n=new vr({run:t,name:e,parent:this});return n.state=dr,n.type=this.type,n.successCallback=this.successCallback||null,n.failureCallback=this.failureCallback||null,this.subtasks.push(n),this},vr.prototype.parallel=function(e,t){return W.util.isArray(e)&&(t=e,e=this.name),this.next(e,(function(n){var r=n;r.block(t.length);for(var a=function(e,n){W.task.start({type:e,run:function(e){t[n](e)},success:function(e){r.unblock()},failure:function(e){r.unblock()}})},o=0;o<t.length;o++)a(e+"__parallel-"+n.id+"-"+o,o)}))},vr.prototype.stop=function(){this.state=gr[this.state].stop},vr.prototype.start=function(){this.error=!1,this.state=gr[this.state].start,this.state===dr&&(this.start=new Date,this.run(this),yr(this,0))},vr.prototype.block=function(e){e=void 0===e?1:e,this.blocks+=e,this.blocks>0&&(this.state=gr[this.state].block)},vr.prototype.unblock=function(e){return e=void 0===e?1:e,this.blocks-=e,0===this.blocks&&this.state!==hr&&(this.state=dr,yr(this,0)),this.blocks},vr.prototype.sleep=function(e){e=void 0===e?0:e,this.state=gr[this.state].sleep;var t=this;this.timeoutId=setTimeout((function(){t.timeoutId=null,t.state=dr,yr(t,0)}),e)},vr.prototype.wait=function(e){e.wait(this)},vr.prototype.wakeup=function(){this.state===pr&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=dr,yr(this,0))},vr.prototype.cancel=function(){this.state=gr[this.state].cancel,this.permitsNeeded=0,null!==this.timeoutId&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},vr.prototype.fail=function(e){if(this.error=!0,br(this,!0),e)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,yr(e,0);else{if(null!==this.parent){for(var t=this.parent;null!==t.parent;)t.error=this.error,t.swapTime=this.swapTime,t.userData=this.userData,t=t.parent;br(t,!0)}this.failureCallback&&this.failureCallback(this)}};var yr=function(e,t){var n=t>30||+new Date-e.swapTime>20,r=function(t){if(t++,e.state===dr)if(n&&(e.swapTime=+new Date),e.subtasks.length>0){var r=e.subtasks.shift();r.error=e.error,r.swapTime=e.swapTime,r.userData=e.userData,r.run(r),r.error||yr(r,t)}else br(e),e.error||null!==e.parent&&(e.parent.error=e.error,e.parent.swapTime=e.swapTime,e.parent.userData=e.userData,yr(e.parent,t))};n?setTimeout(r,0):r(t)},br=function(e,t){e.state=hr,delete sr[e.id],null===e.parent&&(e.type in cr?0===cr[e.type].length?W.log.error(ir,"[%s][%s] task queue empty [%s]",e.id,e.name,e.type):cr[e.type][0]!==e?W.log.error(ir,"[%s][%s] task not first in queue [%s]",e.id,e.name,e.type):(cr[e.type].shift(),0===cr[e.type].length?delete cr[e.type]:cr[e.type][0].start()):W.log.error(ir,"[%s][%s] task queue missing [%s]",e.id,e.name,e.type),t||(e.error&&e.failureCallback?e.failureCallback(e):!e.error&&e.successCallback&&e.successCallback(e)))};W.task=W.task||{},W.task.start=function(e){var t=new vr({run:e.run,name:e.name||"?"});t.type=e.type,t.successCallback=e.success||null,t.failureCallback=e.failure||null,t.type in cr?cr[e.type].push(t):(cr[t.type]=[t],function(e){e.error=!1,e.state=gr[e.state].start,setTimeout((function(){e.state===dr&&(e.swapTime=+new Date,e.run(e),yr(e,0))}),0)}(t))},W.task.cancel=function(e){e in cr&&(cr[e]=[cr[e][0]])},W.task.createCondition=function(){var e={tasks:{},wait:function(t){t.id in e.tasks||(t.block(),e.tasks[t.id]=t)},notify:function(){var t=e.tasks;for(var n in e.tasks={},t)t[n].unblock()}};return e};var xr=W,kr=function(){function e(e){this.secretKey=e}return e.prototype.encrypt=function(e,t){throw new Error("Method not implemented.")},e.prototype.decrypt=function(e,t){return function(e,t,n){void 0===n&&(n=xr.util.createBuffer(Uint8Array.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]).buffer));var r,a,o=xr.cipher.createDecipher("AES-CBC",t);return o.start({iv:n}),o.update(xr.util.createBuffer(xr.util.hexToBytes(e))),a=(r=o.output.data).charCodeAt(r.length-1),r.slice(0,-a)}(e,(n=this.secretKey,r=t.transactionID,""+n.slice(0,16)+r.slice(0,16)));var n,r},e}(),wr=function(){function e(e,t,r,a){void 0===r&&(r="production"),void 0===a&&(a={supportTransaction:!1,enableEncryption:!1}),this.transactionEnabled=a.supportTransaction||!1,this.encryptionEnabled=a.enableEncryption||!1;var o=B(e,t,r,{headers:a.httpHeaders});this.transactionManager=new V(o),this.encryptionService=new kr(t),this.compareFaceService=new d(o),this.clientSettingsService=new f(o),this.convertPDFService=new y(o),this.ekycPDFService=new b(o),this.readIDCardService=new n(o),this.requestVerifyIDCardService=new h(o),this.requestVerifyPortraitSerivce=new m(o),this.imagesService=new c(o),this.fileService=new l(o),this.verifyFaceLivenessService=new p(o),this.searchFaceService=new v(o),this.detectIDTamperingService=new g(o)}return e.prototype.enableTransaction=function(){this.transactionEnabled=!0},e.prototype.disableTransaction=function(){this.transactionEnabled=!1},e.prototype.enableEncryption=function(){this.encryptionEnabled=!0},e.prototype.disableEncryption=function(){this.encryptionEnabled=!1},e.prototype.compareFaces=function(e,t){return this.compareFaceService.request(e,t)},e.prototype.clientSettings=function(){return this.clientSettingsService.request()},e.prototype.uploadImage=function(e){return this.imagesService.request(e)},e.prototype.uploadFile=function(e){return this.fileService.uploadFile(e)},e.prototype.convertPDF=function(e,t){return this.convertPDFService.request(e,t)},e.prototype.ekycPDF=function(e,t){return this.ekycPDFService.request(e,t)},e.prototype.readIDCard=function(e,t){return this.readIDCardService.request(e,t)},e.prototype.requestVerifyIDCard=function(e,t){return this.requestVerifyIDCardService.request(e,t)},e.prototype.requestVerifyPortrait=function(e,t){return this.requestVerifyPortraitSerivce.request(e,t)},e.prototype.verifyFaceLiveness=function(e,t){return this.verifyFaceLivenessService.request(e,t)},e.prototype.searchFaces=function(e,t){return this.searchFaceService.request(e,t)},e.prototype.deleteFaces=function(e,t){return this.searchFaceService.deleteFaces(e,t)},e.prototype.indexFaces=function(e,t){return this.searchFaceService.indexFaces(e,t)},e.prototype.downloadFaceImage=function(e){return this.searchFaceService.downloadFaceImage(e)},e.prototype.downloadImage=function(e){return this.imagesService.download(e)},e.prototype.updateMetadata=function(e,t){return this.imagesService.updateMetadata(e,t)},e.prototype.detectIDTampering=function(e,t){return this.detectIDTamperingService.request(e,t)},o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"compareFaces",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"convertPDF",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"readIDCard",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"requestVerifyIDCard",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"requestVerifyPortrait",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"verifyFaceLiveness",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"searchFaces",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"deleteFaces",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"indexFaces",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"detectIDTampering",null),e}();e.ReadIDCard=n,e.UploadImage=c,e.UploadFile=l,e.CompareFaces=d,e.ClientSettings=f,e.VerifyFaceLiveness=p,e.RequestVerifyIDCard=h,e.RequestVerifyPortrait=m,e.DetectIDTampering=g,e.SearchFaces=v,e.ConvertPDF=y,e.EkycPDF=b,e.HttpClient=N,e.MockClient=_,e.TVAuthorizer=M,e.createHelpers=function(e,t,n){void 0===n&&(n="production");var r=new M(e,t),a=function(e){switch(e){case"testing":return"https://tv-testing.trustingsocial.com/api";case"staging":return"https://tv-staging.trustingsocial.com/api";case"production":default:return"https://vn-vision.trustingsocial.com/api"}}(n);return new N({authorizer:r,domain:a})},e.createHttpClient=B,e.SimpleTrustVisionAPI=P,e.default=wr,Object.defineProperty(e,"__esModule",{value:!0})}(t,r.default)})),wBe=o(kBe),IBe="https://unpkg.com/@tsocial/tvweb-sdk@latest/assets",CBe=tC.getUAMetadata(),EBe=function(){function e(t){var n=this,r=t.container,a=t.lang,o=void 0===a?"en":a,i=t.assetRoot,s=void 0===i?IBe:i;_y(this,e),Fy(this,"checkCamera",(function(e){var t=e.frontCamera,r=void 0===t||t;return new Promise((function(e){yBe.render(Tx.createElement(Mk.SDKSettingsProvider,{value:{lang:n.lang,assetRoot:n.assetRoot}},Tx.createElement(oX,{checkCameraMode:!0,frontCamera:r,onVideoPlayed:function(){n.destroyView(),e(null)},onClose:n.destroyView,onError:function(t){n.destroyView(),e(t)}})),n.container)}))})),Fy(this,"runWarmUpReadIDCard",function(){var e=Ny(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,NIe(t);case 2:n.resultWarmUpReadIDCard=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Fy(this,"destroyView",(function(){yBe.unmountComponentAtNode(n.container)})),xBe(r,"container is a required parameter"),this.container=r,this.lang=o,this.assetRoot=s,this.resultWarmUpReadIDCard=null}return Oy(e,[{key:"readIDCard",value:function(e){var t=e.accessKey,n=e.secretKey,r=e.apiUrl,a=Wy(e,["accessKey","secretKey","apiUrl"]),o=new wBe(t,n,r,{httpHeaders:CBe});yBe.render(Tx.createElement(Mk.SDKSettingsProvider,{value:{lang:this.lang,assetRoot:this.assetRoot,apiClient:o,debug:!1}},Tx.createElement(yEe,My({onClose:this.destroyView},a,{resultWarmup:this.resultWarmUpReadIDCard}))),this.container)}},{key:"livenessDetection",value:function(e){var t=e.apiCheck,n=e.mode,r=e.accessKey,a=e.secretKey,o=e.apiUrl,i=e.onLivenessDetectionDone,s=e.onError,u=Wy(e,["apiCheck","mode","accessKey","secretKey","apiUrl","onLivenessDetectionDone","onError"]),c=new wBe(r,a,o,{httpHeaders:CBe});yBe.render(Tx.createElement(Mk.SDKSettingsProvider,{value:{lang:this.lang,assetRoot:this.assetRoot,apiClient:c}},Tx.createElement(SEe,My({},u,{apiCheck:t,mode:n,onLivenessDetectionDone:i,onClose:this.destroyView,onError:s}))),this.container)}},{key:"compareFaces",value:function(e){var t=e.accessKey,n=e.secretKey,r=e.apiUrl,a=e.image1,o=e.image2,i=e.onSuccess,s=e.onError;new wBe(t,n,r,{httpHeaders:CBe}).compareFaces({image1:{id:a},image2:{id:o}}).then((function(e){i(e)})).catch((function(e){s(e)}))}}]),e}();e.Animations=vCe,e.AssetUtils=Pk,e.AsyncUtils=Lk,e.BASE_Z_INDEX=jq,e.BlurUtils=kw,e.Camera=oX,e.CameraUtils=Iw,e.CommonUtils=Ew,e.Constants=_k,e.CoordinateUtils=_w,e.CropAreaOverlayWrapper=hX,e.FaceUtils=Lw,e.GlareUtils=JI,e.Icons=bEe,e.ImageUtils=YI,e.LivenessDetection=SEe,e.LivenessDetectionComponents=AEe,e.LoadResourceUtils=nC,e.MobileDetect=Aq,e.ModelUtils=wj,e.PlacementArea=fX,e.PredictionUtils=zw,e.ProgressCircle=Xde,e.ReadIDCard=yEe,e.SDK=EBe,e.SettingsContext=Mk,e.UserAgentUtils=tC,e.useLivenessDetection=TEe,e.warmUp=NIe,Object.defineProperty(e,"__esModule",{value:!0})}));
