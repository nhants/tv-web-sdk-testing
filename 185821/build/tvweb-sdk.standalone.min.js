!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("crypto")):"function"==typeof define&&define.amd?define(["exports","crypto"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TVWebSDK={},e.crypto)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t),a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return s(null==t&&n.path)}},n.exports),n.exports}function s(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var u=function(e){return e&&e.Math==Math&&e},c=u("object"==typeof globalThis&&globalThis)||u("object"==typeof window&&window)||u("object"==typeof self&&self)||u("object"==typeof a&&a)||function(){return this}()||Function("return this")(),l=function(e){try{return!!e()}catch(e){return!0}},d=!l((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),p={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,h=f&&!p.call({1:2},1),m=h?function(e){var t=f(this,e);return!!t&&t.enumerable}:p,g={f:m},v=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},y={}.toString,b=function(e){return y.call(e).slice(8,-1)},x="".split,k=l((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==b(e)?x.call(e,""):Object(e)}:Object,w=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},I=function(e){return k(w(e))},C=function(e){return"object"==typeof e?null!==e:"function"==typeof e},S=function(e,t){if(!C(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!C(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!C(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!C(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},E={}.hasOwnProperty,T=function(e,t){return E.call(e,t)},N=c.document,A=C(N)&&C(N.createElement),_=function(e){return A?N.createElement(e):{}},R=!d&&!l((function(){return 7!=Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a})),O=Object.getOwnPropertyDescriptor,F=d?O:function(e,t){if(e=I(e),t=S(t,!0),R)try{return O(e,t)}catch(e){}if(T(e,t))return v(!g.f.call(e,t),e[t])},M={f:F},D=function(e){if(!C(e))throw TypeError(String(e)+" is not an object");return e},B=Object.defineProperty,P=d?B:function(e,t,n){if(D(e),t=S(t,!0),D(n),R)try{return B(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e},L={f:P},U=d?function(e,t,n){return L.f(e,t,v(1,n))}:function(e,t,n){return e[t]=n,e},V=function(e,t){try{U(c,e,t)}catch(n){c[e]=t}return t},W="__core-js_shared__",z=c[W]||V(W,{}),j=z,H=Function.toString;"function"!=typeof j.inspectSource&&(j.inspectSource=function(e){return H.call(e)});var G,q,K,X=j.inspectSource,Q=c.WeakMap,Y="function"==typeof Q&&/native code/.test(X(Q)),$=!1,Z=i((function(e){(e.exports=function(e,t){return j[e]||(j[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),J=0,ee=Math.random(),te=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++J+ee).toString(36)},ne=Z("keys"),re=function(e){return ne[e]||(ne[e]=te(e))},ae={},oe=c.WeakMap,ie=function(e){return K(e)?q(e):G(e,{})},se=function(e){return function(t){var n;if(!C(t)||(n=q(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(Y){var ue=j.state||(j.state=new oe),ce=ue.get,le=ue.has,de=ue.set;G=function(e,t){return t.facade=e,de.call(ue,e,t),t},q=function(e){return ce.call(ue,e)||{}},K=function(e){return le.call(ue,e)}}else{var pe=re("state");ae[pe]=!0,G=function(e,t){return t.facade=e,U(e,pe,t),t},q=function(e){return T(e,pe)?e[pe]:{}},K=function(e){return T(e,pe)}}var fe,he={set:G,get:q,has:K,enforce:ie,getterFor:se},me=i((function(e){var t=he.get,n=he.enforce,r=String(String).split("String");(e.exports=function(e,t,a,o){var i,s=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof a&&("string"!=typeof t||T(a,"name")||U(a,"name",t),(i=n(a)).source||(i.source=r.join("string"==typeof t?t:""))),e!==c?(s?!l&&e[t]&&(u=!0):delete e[t],u?e[t]=a:U(e,t,a)):u?e[t]=a:V(t,a)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||X(this)}))})),ge=c,ve=function(e){return"function"==typeof e?e:void 0},ye=function(e,t){return arguments.length<2?ve(ge[e])||ve(c[e]):ge[e]&&ge[e][t]||c[e]&&c[e][t]},be=Math.ceil,xe=Math.floor,ke=function(e){return isNaN(e=+e)?0:(e>0?xe:be)(e)},we=Math.min,Ie=function(e){return e>0?we(ke(e),9007199254740991):0},Ce=Math.max,Se=Math.min,Ee=function(e,t){var n=ke(e);return n<0?Ce(n+t,0):Se(n,t)},Te=function(e){return function(t,n,r){var a,o=I(t),i=Ie(o.length),s=Ee(r,i);if(e&&n!=n){for(;i>s;)if((a=o[s++])!=a)return!0}else for(;i>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},Ne={includes:Te(!0),indexOf:Te(!1)},Ae=Ne.indexOf,_e=function(e,t){var n,r=I(e),a=0,o=[];for(n in r)!T(ae,n)&&T(r,n)&&o.push(n);for(;t.length>a;)T(r,n=t[a++])&&(~Ae(o,n)||o.push(n));return o},Re=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Oe=Re.concat("length","prototype"),Fe=Object.getOwnPropertyNames||function(e){return _e(e,Oe)},Me={f:Fe},De=Object.getOwnPropertySymbols,Be={f:De},Pe=ye("Reflect","ownKeys")||function(e){var t=Me.f(D(e)),n=Be.f;return n?t.concat(n(e)):t},Le=function(e,t){for(var n=Pe(t),r=L.f,a=M.f,o=0;o<n.length;o++){var i=n[o];T(e,i)||r(e,i,a(t,i))}},Ue=/#|\.prototype\./,Ve=function(e,t){var n=ze[We(e)];return n==He||n!=je&&("function"==typeof t?l(t):!!t)},We=Ve.normalize=function(e){return String(e).replace(Ue,".").toLowerCase()},ze=Ve.data={},je=Ve.NATIVE="N",He=Ve.POLYFILL="P",Ge=Ve,qe=M.f,Ke=function(e,t){var n,r,a,o,i,s=e.target,u=e.global,l=e.stat;if(n=u?c:l?c[s]||V(s,{}):(c[s]||{}).prototype)for(r in t){if(o=t[r],a=e.noTargetGet?(i=qe(n,r))&&i.value:n[r],!Ge(u?r:s+(l?".":"#")+r,e.forced)&&void 0!==a){if(typeof o==typeof a)continue;Le(o,a)}(e.sham||a&&a.sham)&&U(o,"sham",!0),me(n,r,o,e)}},Xe=!!Object.getOwnPropertySymbols&&!l((function(){return!String(Symbol())})),Qe=Xe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ye=Array.isArray||function(e){return"Array"==b(e)},$e=function(e){return Object(w(e))},Ze=Object.keys||function(e){return _e(e,Re)},Je=d?Object.defineProperties:function(e,t){D(e);for(var n,r=Ze(t),a=r.length,o=0;a>o;)L.f(e,n=r[o++],t[n]);return e},et=ye("document","documentElement"),tt=">",nt="<",rt="prototype",at="script",ot=re("IE_PROTO"),it=function(){},st=function(e){return nt+at+tt+e+nt+"/"+at+tt},ut=function(e){e.write(st("")),e.close();var t=e.parentWindow.Object;return e=null,t},ct=function(){var e,t=_("iframe"),n="java"+at+":";return t.style.display="none",et.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(st("document.F=Object")),e.close(),e.F},lt=function(){try{fe=document.domain&&new ActiveXObject("htmlfile")}catch(e){}lt=fe?ut(fe):ct();for(var e=Re.length;e--;)delete lt[rt][Re[e]];return lt()};ae[ot]=!0;var dt=Object.create||function(e,t){var n;return null!==e?(it[rt]=D(e),n=new it,it[rt]=null,n[ot]=e):n=lt(),void 0===t?n:Je(n,t)},pt=Me.f,ft={}.toString,ht="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],mt=function(e){try{return pt(e)}catch(e){return ht.slice()}},gt=function(e){return ht&&"[object Window]"==ft.call(e)?mt(e):pt(I(e))},vt={f:gt},yt=Z("wks"),bt=c.Symbol,xt=Qe?bt:bt&&bt.withoutSetter||te,kt=function(e){return T(yt,e)||(Xe&&T(bt,e)?yt[e]=bt[e]:yt[e]=xt("Symbol."+e)),yt[e]},wt=kt,It={f:wt},Ct=L.f,St=function(e){var t=ge.Symbol||(ge.Symbol={});T(t,e)||Ct(t,e,{value:It.f(e)})},Et=L.f,Tt=kt("toStringTag"),Nt=function(e,t,n){e&&!T(e=n?e:e.prototype,Tt)&&Et(e,Tt,{configurable:!0,value:t})},At=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},_t=function(e,t,n){if(At(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}},Rt=kt("species"),Ot=function(e,t){var n;return Ye(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Ye(n.prototype)?C(n)&&null===(n=n[Rt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},Ft=[].push,Mt=function(e){var t=1==e,n=2==e,r=3==e,a=4==e,o=6==e,i=7==e,s=5==e||o;return function(u,c,l,d){for(var p,f,h=$e(u),m=k(h),g=_t(c,l,3),v=Ie(m.length),y=0,b=d||Ot,x=t?b(u,v):n||i?b(u,0):void 0;v>y;y++)if((s||y in m)&&(f=g(p=m[y],y,h),e))if(t)x[y]=f;else if(f)switch(e){case 3:return!0;case 5:return p;case 6:return y;case 2:Ft.call(x,p)}else switch(e){case 4:return!1;case 7:Ft.call(x,p)}return o?-1:r||a?a:x}},Dt={forEach:Mt(0),map:Mt(1),filter:Mt(2),some:Mt(3),every:Mt(4),find:Mt(5),findIndex:Mt(6),filterOut:Mt(7)},Bt=Dt.forEach,Pt=re("hidden"),Lt="Symbol",Ut="prototype",Vt=kt("toPrimitive"),Wt=he.set,zt=he.getterFor(Lt),jt=Object[Ut],Ht=c.Symbol,Gt=ye("JSON","stringify"),qt=M.f,Kt=L.f,Xt=vt.f,Qt=g.f,Yt=Z("symbols"),$t=Z("op-symbols"),Zt=Z("string-to-symbol-registry"),Jt=Z("symbol-to-string-registry"),en=Z("wks"),tn=c.QObject,nn=!tn||!tn[Ut]||!tn[Ut].findChild,rn=d&&l((function(){return 7!=dt(Kt({},"a",{get:function(){return Kt(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=qt(jt,t);r&&delete jt[t],Kt(e,t,n),r&&e!==jt&&Kt(jt,t,r)}:Kt,an=function(e,t){var n=Yt[e]=dt(Ht[Ut]);return Wt(n,{type:Lt,tag:e,description:t}),d||(n.description=t),n},on=Qe?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Ht},sn=function(e,t,n){e===jt&&sn($t,t,n),D(e);var r=S(t,!0);return D(n),T(Yt,r)?(n.enumerable?(T(e,Pt)&&e[Pt][r]&&(e[Pt][r]=!1),n=dt(n,{enumerable:v(0,!1)})):(T(e,Pt)||Kt(e,Pt,v(1,{})),e[Pt][r]=!0),rn(e,r,n)):Kt(e,r,n)},un=function(e,t){D(e);var n=I(t),r=Ze(n).concat(fn(n));return Bt(r,(function(t){d&&!ln.call(n,t)||sn(e,t,n[t])})),e},cn=function(e,t){return void 0===t?dt(e):un(dt(e),t)},ln=function(e){var t=S(e,!0),n=Qt.call(this,t);return!(this===jt&&T(Yt,t)&&!T($t,t))&&(!(n||!T(this,t)||!T(Yt,t)||T(this,Pt)&&this[Pt][t])||n)},dn=function(e,t){var n=I(e),r=S(t,!0);if(n!==jt||!T(Yt,r)||T($t,r)){var a=qt(n,r);return!a||!T(Yt,r)||T(n,Pt)&&n[Pt][r]||(a.enumerable=!0),a}},pn=function(e){var t=Xt(I(e)),n=[];return Bt(t,(function(e){T(Yt,e)||T(ae,e)||n.push(e)})),n},fn=function(e){var t=e===jt,n=Xt(t?$t:I(e)),r=[];return Bt(n,(function(e){!T(Yt,e)||t&&!T(jt,e)||r.push(Yt[e])})),r};if(Xe||(me((Ht=function(){if(this instanceof Ht)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=te(e),n=function(e){this===jt&&n.call($t,e),T(this,Pt)&&T(this[Pt],t)&&(this[Pt][t]=!1),rn(this,t,v(1,e))};return d&&nn&&rn(jt,t,{configurable:!0,set:n}),an(t,e)})[Ut],"toString",(function(){return zt(this).tag})),me(Ht,"withoutSetter",(function(e){return an(te(e),e)})),g.f=ln,L.f=sn,M.f=dn,Me.f=vt.f=pn,Be.f=fn,It.f=function(e){return an(kt(e),e)},d&&(Kt(Ht[Ut],"description",{configurable:!0,get:function(){return zt(this).description}}),me(jt,"propertyIsEnumerable",ln,{unsafe:!0}))),Ke({global:!0,wrap:!0,forced:!Xe,sham:!Xe},{Symbol:Ht}),Bt(Ze(en),(function(e){St(e)})),Ke({target:Lt,stat:!0,forced:!Xe},{for:function(e){var t=String(e);if(T(Zt,t))return Zt[t];var n=Ht(t);return Zt[t]=n,Jt[n]=t,n},keyFor:function(e){if(!on(e))throw TypeError(e+" is not a symbol");if(T(Jt,e))return Jt[e]},useSetter:function(){nn=!0},useSimple:function(){nn=!1}}),Ke({target:"Object",stat:!0,forced:!Xe,sham:!d},{create:cn,defineProperty:sn,defineProperties:un,getOwnPropertyDescriptor:dn}),Ke({target:"Object",stat:!0,forced:!Xe},{getOwnPropertyNames:pn,getOwnPropertySymbols:fn}),Ke({target:"Object",stat:!0,forced:l((function(){Be.f(1)}))},{getOwnPropertySymbols:function(e){return Be.f($e(e))}}),Gt){var hn=!Xe||l((function(){var e=Ht();return"[null]"!=Gt([e])||"{}"!=Gt({a:e})||"{}"!=Gt(Object(e))}));Ke({target:"JSON",stat:!0,forced:hn},{stringify:function(e,t,n){for(var r,a=[e],o=1;arguments.length>o;)a.push(arguments[o++]);if(r=t,(C(t)||void 0!==e)&&!on(e))return Ye(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!on(t))return t}),a[1]=t,Gt.apply(null,a)}})}Ht[Ut][Vt]||U(Ht[Ut],Vt,Ht[Ut].valueOf),Nt(Ht,Lt),ae[Pt]=!0,St("asyncIterator");var mn=L.f,gn=c.Symbol;if(d&&"function"==typeof gn&&(!("description"in gn.prototype)||void 0!==gn().description)){var vn={},yn=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof yn?new gn(e):void 0===e?gn():gn(e);return""===e&&(vn[t]=!0),t};Le(yn,gn);var bn=yn.prototype=gn.prototype;bn.constructor=yn;var xn=bn.toString,kn="Symbol(test)"==String(gn("test")),wn=/^Symbol\((.*)\)[^)]+$/;mn(bn,"description",{configurable:!0,get:function(){var e=C(this)?this.valueOf():this,t=xn.call(e);if(T(vn,e))return"";var n=kn?t.slice(7,-1):t.replace(wn,"$1");return""===n?void 0:n}}),Ke({global:!0,forced:!0},{Symbol:yn})}St("hasInstance"),St("isConcatSpreadable"),St("iterator"),St("match"),St("matchAll"),St("replace"),St("search"),St("species"),St("split"),St("toPrimitive"),St("toStringTag"),St("unscopables");var In=!l((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Cn=re("IE_PROTO"),Sn=Object.prototype,En=In?Object.getPrototypeOf:function(e){return e=$e(e),T(e,Cn)?e[Cn]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Sn:null},Tn=function(e){if(!C(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e},Nn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return D(n),Tn(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),An={},_n=kt("iterator"),Rn=Array.prototype,On=function(e){return void 0!==e&&(An.Array===e||Rn[_n]===e)},Fn=kt("toStringTag"),Mn={};Mn[Fn]="z";var Dn="[object z]"===String(Mn),Bn=kt("toStringTag"),Pn="Arguments"==b(function(){return arguments}()),Ln=function(e,t){try{return e[t]}catch(e){}},Un=Dn?b:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=Ln(t=Object(e),Bn))?n:Pn?b(t):"Object"==(r=b(t))&&"function"==typeof t.callee?"Arguments":r},Vn=kt("iterator"),Wn=function(e){if(null!=e)return e[Vn]||e["@@iterator"]||An[Un(e)]},zn=function(e){var t=e.return;if(void 0!==t)return D(t.call(e)).value},jn=function(e,t){this.stopped=e,this.result=t},Hn=function(e,t,n){var r,a,o,i,s,u,c,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),h=_t(t,l,1+d+f),m=function(e){return r&&zn(r),new jn(!0,e)},g=function(e){return d?(D(e),f?h(e[0],e[1],m):h(e[0],e[1])):f?h(e,m):h(e)};if(p)r=e;else{if("function"!=typeof(a=Wn(e)))throw TypeError("Target is not iterable");if(On(a)){for(o=0,i=Ie(e.length);i>o;o++)if((s=g(e[o]))&&s instanceof jn)return s;return new jn(!1)}r=a.call(e)}for(u=r.next;!(c=u.call(r)).done;){try{s=g(c.value)}catch(e){throw zn(r),e}if("object"==typeof s&&s&&s instanceof jn)return s}return new jn(!1)},Gn=function(e,t){var n=this;if(!(n instanceof Gn))return new Gn(e,t);Nn&&(n=Nn(new Error(void 0),En(n))),void 0!==t&&U(n,"message",String(t));var r=[];return Hn(e,r.push,{that:r}),U(n,"errors",r),n};Gn.prototype=dt(Error.prototype,{constructor:v(5,Gn),message:v(5,""),name:v(5,"AggregateError")}),Ke({global:!0},{AggregateError:Gn});var qn=function(e,t,n,r){try{return r?t(D(n)[0],n[1]):t(n)}catch(t){throw zn(e),t}},Kn=function(e,t,n){var r=S(t);r in e?L.f(e,r,v(0,n)):e[r]=n},Xn=function(e){var t,n,r,a,o,i,s=$e(e),u="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,d=void 0!==l,p=Wn(s),f=0;if(d&&(l=_t(l,c>2?arguments[2]:void 0,2)),null==p||u==Array&&On(p))for(n=new u(t=Ie(s.length));t>f;f++)i=d?l(s[f],f):s[f],Kn(n,f,i);else for(o=(a=p.call(s)).next,n=new u;!(r=o.call(a)).done;f++)i=d?qn(a,l,[r.value,f],!0):r.value,Kn(n,f,i);return n.length=f,n},Qn=kt("iterator"),Yn=!1;try{var $n=0,Zn={next:function(){return{done:!!$n++}},return:function(){Yn=!0}};Zn[Qn]=function(){return this},Array.from(Zn,(function(){throw 2}))}catch(e){}var Jn=function(e,t){if(!t&&!Yn)return!1;var n=!1;try{var r={};r[Qn]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},er=!Jn((function(e){Array.from(e)}));Ke({target:"Array",stat:!0,forced:er},{from:Xn}),Ke({target:"Array",stat:!0},{isArray:Ye});var tr=l((function(){function e(){}return!(Array.of.call(e)instanceof e)}));Ke({target:"Array",stat:!0,forced:tr},{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)Kn(n,e,arguments[e++]);return n.length=t,n}});var nr,rr,ar=ye("navigator","userAgent")||"",or=c.process,ir=or&&or.versions,sr=ir&&ir.v8;sr?rr=(nr=sr.split("."))[0]+nr[1]:ar&&(!(nr=ar.match(/Edge\/(\d+)/))||nr[1]>=74)&&(nr=ar.match(/Chrome\/(\d+)/))&&(rr=nr[1]);var ur=rr&&+rr,cr=kt("species"),lr=function(e){return ur>=51||!l((function(){var t=[];return(t.constructor={})[cr]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},dr=kt("isConcatSpreadable"),pr=9007199254740991,fr="Maximum allowed index exceeded",hr=ur>=51||!l((function(){var e=[];return e[dr]=!1,e.concat()[0]!==e})),mr=lr("concat"),gr=function(e){if(!C(e))return!1;var t=e[dr];return void 0!==t?!!t:Ye(e)},vr=!hr||!mr;Ke({target:"Array",proto:!0,forced:vr},{concat:function(e){var t,n,r,a,o,i=$e(this),s=Ot(i,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(gr(o=-1===t?i:arguments[t])){if(u+(a=Ie(o.length))>pr)throw TypeError(fr);for(n=0;n<a;n++,u++)n in o&&Kn(s,u,o[n])}else{if(u>=pr)throw TypeError(fr);Kn(s,u++,o)}return s.length=u,s}});var yr=Math.min,br=[].copyWithin||function(e,t){var n=$e(this),r=Ie(n.length),a=Ee(e,r),o=Ee(t,r),i=arguments.length>2?arguments[2]:void 0,s=yr((void 0===i?r:Ee(i,r))-o,r-a),u=1;for(o<a&&a<o+s&&(u=-1,o+=s-1,a+=s-1);s-- >0;)o in n?n[a]=n[o]:delete n[a],a+=u,o+=u;return n},xr=kt("unscopables"),kr=Array.prototype;null==kr[xr]&&L.f(kr,xr,{configurable:!0,value:dt(null)});var wr=function(e){kr[xr][e]=!0};Ke({target:"Array",proto:!0},{copyWithin:br}),wr("copyWithin");var Ir=function(e,t){var n=[][e];return!!n&&l((function(){n.call(null,t||function(){throw 1},1)}))},Cr=Object.defineProperty,Sr={},Er=function(e){throw e},Tr=function(e,t){if(T(Sr,e))return Sr[e];t||(t={});var n=[][e],r=!!T(t,"ACCESSORS")&&t.ACCESSORS,a=T(t,0)?t[0]:Er,o=T(t,1)?t[1]:void 0;return Sr[e]=!!n&&!l((function(){if(r&&!d)return!0;var e={length:-1};r?Cr(e,1,{enumerable:!0,get:Er}):e[1]=1,n.call(e,a,o)}))},Nr=Dt.every,Ar=Ir("every"),_r=Tr("every");Ke({target:"Array",proto:!0,forced:!Ar||!_r},{every:function(e){return Nr(this,e,arguments.length>1?arguments[1]:void 0)}});var Rr=function(e){for(var t=$e(this),n=Ie(t.length),r=arguments.length,a=Ee(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,i=void 0===o?n:Ee(o,n);i>a;)t[a++]=e;return t};Ke({target:"Array",proto:!0},{fill:Rr}),wr("fill");var Or=Dt.filter,Fr=lr("filter"),Mr=Tr("filter");Ke({target:"Array",proto:!0,forced:!Fr||!Mr},{filter:function(e){return Or(this,e,arguments.length>1?arguments[1]:void 0)}});var Dr=Dt.find,Br="find",Pr=!0,Lr=Tr(Br);Br in[]&&Array(1)[Br]((function(){Pr=!1})),Ke({target:"Array",proto:!0,forced:Pr||!Lr},{find:function(e){return Dr(this,e,arguments.length>1?arguments[1]:void 0)}}),wr(Br);var Ur=Dt.findIndex,Vr="findIndex",Wr=!0,zr=Tr(Vr);Vr in[]&&Array(1)[Vr]((function(){Wr=!1})),Ke({target:"Array",proto:!0,forced:Wr||!zr},{findIndex:function(e){return Ur(this,e,arguments.length>1?arguments[1]:void 0)}}),wr(Vr);var jr=function(e,t,n,r,a,o,i,s){for(var u,c=a,l=0,d=!!i&&_t(i,s,3);l<r;){if(l in n){if(u=d?d(n[l],l,t):n[l],o>0&&Ye(u))c=jr(e,t,u,Ie(u.length),c,o-1)-1;else{if(c>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[c]=u}c++}l++}return c},Hr=jr;Ke({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=$e(this),n=Ie(t.length),r=Ot(t,0);return r.length=Hr(r,t,t,n,0,void 0===e?1:ke(e)),r}}),Ke({target:"Array",proto:!0},{flatMap:function(e){var t,n=$e(this),r=Ie(n.length);return At(e),(t=Ot(n,0)).length=Hr(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}});var Gr=Dt.forEach,qr=Ir("forEach"),Kr=Tr("forEach"),Xr=qr&&Kr?[].forEach:function(e){return Gr(this,e,arguments.length>1?arguments[1]:void 0)};Ke({target:"Array",proto:!0,forced:[].forEach!=Xr},{forEach:Xr});var Qr=Ne.includes,Yr=Tr("indexOf",{ACCESSORS:!0,1:0});Ke({target:"Array",proto:!0,forced:!Yr},{includes:function(e){return Qr(this,e,arguments.length>1?arguments[1]:void 0)}}),wr("includes");var $r=Ne.indexOf,Zr=[].indexOf,Jr=!!Zr&&1/[1].indexOf(1,-0)<0,ea=Ir("indexOf"),ta=Tr("indexOf",{ACCESSORS:!0,1:0});Ke({target:"Array",proto:!0,forced:Jr||!ea||!ta},{indexOf:function(e){return Jr?Zr.apply(this,arguments)||0:$r(this,e,arguments.length>1?arguments[1]:void 0)}});var na=[].join,ra=k!=Object,aa=Ir("join",",");Ke({target:"Array",proto:!0,forced:ra||!aa},{join:function(e){return na.call(I(this),void 0===e?",":e)}});var oa=Math.min,ia=[].lastIndexOf,sa=!!ia&&1/[1].lastIndexOf(1,-0)<0,ua=Ir("lastIndexOf"),ca=Tr("indexOf",{ACCESSORS:!0,1:0}),la=sa||!ua||!ca,da=la?function(e){if(sa)return ia.apply(this,arguments)||0;var t=I(this),n=Ie(t.length),r=n-1;for(arguments.length>1&&(r=oa(r,ke(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:ia;Ke({target:"Array",proto:!0,forced:da!==[].lastIndexOf},{lastIndexOf:da});var pa=Dt.map,fa=lr("map"),ha=Tr("map");Ke({target:"Array",proto:!0,forced:!fa||!ha},{map:function(e){return pa(this,e,arguments.length>1?arguments[1]:void 0)}});var ma=function(e){return function(t,n,r,a){At(n);var o=$e(t),i=k(o),s=Ie(o.length),u=e?s-1:0,c=e?-1:1;if(r<2)for(;;){if(u in i){a=i[u],u+=c;break}if(u+=c,e?u<0:s<=u)throw TypeError("Reduce of empty array with no initial value")}for(;e?u>=0:s>u;u+=c)u in i&&(a=n(a,i[u],u,o));return a}},ga={left:ma(!1),right:ma(!0)},va="process"==b(c.process),ya=ga.left,ba=Ir("reduce"),xa=Tr("reduce",{1:0}),ka=!va&&ur>79&&ur<83;Ke({target:"Array",proto:!0,forced:!ba||!xa||ka},{reduce:function(e){return ya(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var wa=ga.right,Ia=Ir("reduceRight"),Ca=Tr("reduce",{1:0}),Sa=!va&&ur>79&&ur<83;Ke({target:"Array",proto:!0,forced:!Ia||!Ca||Sa},{reduceRight:function(e){return wa(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Ea=[].reverse,Ta=[1,2];Ke({target:"Array",proto:!0,forced:String(Ta)===String(Ta.reverse())},{reverse:function(){return Ye(this)&&(this.length=this.length),Ea.call(this)}});var Na=lr("slice"),Aa=Tr("slice",{ACCESSORS:!0,0:0,1:2}),_a=kt("species"),Ra=[].slice,Oa=Math.max;Ke({target:"Array",proto:!0,forced:!Na||!Aa},{slice:function(e,t){var n,r,a,o=I(this),i=Ie(o.length),s=Ee(e,i),u=Ee(void 0===t?i:t,i);if(Ye(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Ye(n.prototype)?C(n)&&null===(n=n[_a])&&(n=void 0):n=void 0,n===Array||void 0===n))return Ra.call(o,s,u);for(r=new(void 0===n?Array:n)(Oa(u-s,0)),a=0;s<u;s++,a++)s in o&&Kn(r,a,o[s]);return r.length=a,r}});var Fa=Dt.some,Ma=Ir("some"),Da=Tr("some");Ke({target:"Array",proto:!0,forced:!Ma||!Da},{some:function(e){return Fa(this,e,arguments.length>1?arguments[1]:void 0)}});var Ba=[],Pa=Ba.sort,La=l((function(){Ba.sort(void 0)})),Ua=l((function(){Ba.sort(null)})),Va=Ir("sort"),Wa=La||!Ua||!Va;Ke({target:"Array",proto:!0,forced:Wa},{sort:function(e){return void 0===e?Pa.call($e(this)):Pa.call($e(this),At(e))}});var za=lr("splice"),ja=Tr("splice",{ACCESSORS:!0,0:0,1:2}),Ha=Math.max,Ga=Math.min,qa=9007199254740991,Ka="Maximum allowed length exceeded";Ke({target:"Array",proto:!0,forced:!za||!ja},{splice:function(e,t){var n,r,a,o,i,s,u=$e(this),c=Ie(u.length),l=Ee(e,c),d=arguments.length;if(0===d?n=r=0:1===d?(n=0,r=c-l):(n=d-2,r=Ga(Ha(ke(t),0),c-l)),c+n-r>qa)throw TypeError(Ka);for(a=Ot(u,r),o=0;o<r;o++)(i=l+o)in u&&Kn(a,o,u[i]);if(a.length=r,n<r){for(o=l;o<c-r;o++)s=o+n,(i=o+r)in u?u[s]=u[i]:delete u[s];for(o=c;o>c-r+n;o--)delete u[o-1]}else if(n>r)for(o=c-r;o>l;o--)s=o+n-1,(i=o+r-1)in u?u[s]=u[i]:delete u[s];for(o=0;o<n;o++)u[o+l]=arguments[o+2];return u.length=c-r+n,a}});var Xa=kt("species"),Qa=function(e){var t=ye(e),n=L.f;d&&t&&!t[Xa]&&n(t,Xa,{configurable:!0,get:function(){return this}})};Qa("Array"),wr("flat"),wr("flatMap");var Ya,$a,Za,Ja=kt("iterator"),eo=!1,to=function(){return this};[].keys&&("next"in(Za=[].keys())?($a=En(En(Za)))!==Object.prototype&&(Ya=$a):eo=!0),null==Ya&&(Ya={}),T(Ya,Ja)||U(Ya,Ja,to);var no={IteratorPrototype:Ya,BUGGY_SAFARI_ITERATORS:eo},ro=no.IteratorPrototype,ao=function(){return this},oo=function(e,t,n){var r=t+" Iterator";return e.prototype=dt(ro,{next:v(1,n)}),Nt(e,r,!1),An[r]=ao,e},io=no.IteratorPrototype,so=no.BUGGY_SAFARI_ITERATORS,uo=kt("iterator"),co="keys",lo="values",po="entries",fo=function(){return this},ho=function(e,t,n,r,a,o,i){oo(n,t,r);var s,u,c,l=function(e){if(e===a&&m)return m;if(!so&&e in f)return f[e];switch(e){case co:case lo:case po:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",p=!1,f=e.prototype,h=f[uo]||f["@@iterator"]||a&&f[a],m=!so&&h||l(a),g="Array"==t&&f.entries||h;if(g&&(s=En(g.call(new e)),io!==Object.prototype&&s.next&&(En(s)!==io&&(Nn?Nn(s,io):"function"!=typeof s[uo]&&U(s,uo,fo)),Nt(s,d,!0))),a==lo&&h&&h.name!==lo&&(p=!0,m=function(){return h.call(this)}),f[uo]!==m&&U(f,uo,m),An[t]=m,a)if(u={values:l(lo),keys:o?m:l(co),entries:l(po)},i)for(c in u)(so||p||!(c in f))&&me(f,c,u[c]);else Ke({target:t,proto:!0,forced:so||p},u);return u},mo="Array Iterator",go=he.set,vo=he.getterFor(mo),yo=ho(Array,"Array",(function(e,t){go(this,{type:mo,target:I(e),index:0,kind:t})}),(function(){var e=vo(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");An.Arguments=An.Array,wr("keys"),wr("values"),wr("entries");var bo=[].slice,xo={},ko=function(e,t,n){if(!(t in xo)){for(var r=[],a=0;a<t;a++)r[a]="a["+a+"]";xo[t]=Function("C,a","return new C("+r.join(",")+")")}return xo[t](e,n)},wo=Function.bind||function(e){var t=At(this),n=bo.call(arguments,1),r=function(){var a=n.concat(bo.call(arguments));return this instanceof r?ko(t,a.length,a):t.apply(e,a)};return C(t.prototype)&&(r.prototype=t.prototype),r};Ke({target:"Function",proto:!0},{bind:wo});var Io=L.f,Co=Function.prototype,So=Co.toString,Eo=/^\s*function ([^ (]*)/,To="name";d&&!(To in Co)&&Io(Co,To,{configurable:!0,get:function(){try{return So.call(this).match(Eo)[1]}catch(e){return""}}});var No=kt("hasInstance"),Ao=Function.prototype;No in Ao||L.f(Ao,No,{value:function(e){if("function"!=typeof this||!C(e))return!1;if(!C(this.prototype))return e instanceof this;for(;e=En(e);)if(this.prototype===e)return!0;return!1}}),Ke({global:!0},{globalThis:c});var _o=Object.assign,Ro=Object.defineProperty,Oo=!_o||l((function(){if(d&&1!==_o({b:1},_o(Ro({},"a",{enumerable:!0,get:function(){Ro(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=_o({},e)[n]||Ze(_o({},t)).join("")!=r}))?function(e,t){for(var n=$e(e),r=arguments.length,a=1,o=Be.f,i=g.f;r>a;)for(var s,u=k(arguments[a++]),c=o?Ze(u).concat(o(u)):Ze(u),l=c.length,p=0;l>p;)s=c[p++],d&&!i.call(u,s)||(n[s]=u[s]);return n}:_o;Ke({target:"Object",stat:!0,forced:Object.assign!==Oo},{assign:Oo}),Ke({target:"Object",stat:!0,sham:!d},{create:dt}),Ke({target:"Object",stat:!0,forced:!d,sham:!d},{defineProperty:L.f}),Ke({target:"Object",stat:!0,forced:!d,sham:!d},{defineProperties:Je});var Fo=g.f,Mo=function(e){return function(t){for(var n,r=I(t),a=Ze(r),o=a.length,i=0,s=[];o>i;)n=a[i++],d&&!Fo.call(r,n)||s.push(e?[n,r[n]]:r[n]);return s}},Do={entries:Mo(!0),values:Mo(!1)},Bo=Do.entries;Ke({target:"Object",stat:!0},{entries:function(e){return Bo(e)}});var Po=!l((function(){return Object.isExtensible(Object.preventExtensions({}))})),Lo=i((function(e){var t=L.f,n=te("meta"),r=0,a=Object.isExtensible||function(){return!0},o=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},i=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!C(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!T(e,n)){if(!a(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!T(e,n)){if(!a(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return Po&&i.REQUIRED&&a(e)&&!T(e,n)&&o(e),e}};ae[n]=!0})),Uo=Lo.onFreeze,Vo=Object.freeze,Wo=l((function(){Vo(1)}));Ke({target:"Object",stat:!0,forced:Wo,sham:!Po},{freeze:function(e){return Vo&&C(e)?Vo(Uo(e)):e}}),Ke({target:"Object",stat:!0},{fromEntries:function(e){var t={};return Hn(e,(function(e,n){Kn(t,e,n)}),{AS_ENTRIES:!0}),t}});var zo=M.f,jo=l((function(){zo(1)})),Ho=!d||jo;Ke({target:"Object",stat:!0,forced:Ho,sham:!d},{getOwnPropertyDescriptor:function(e,t){return zo(I(e),t)}}),Ke({target:"Object",stat:!0,sham:!d},{getOwnPropertyDescriptors:function(e){for(var t,n,r=I(e),a=M.f,o=Pe(r),i={},s=0;o.length>s;)void 0!==(n=a(r,t=o[s++]))&&Kn(i,t,n);return i}});var Go=vt.f,qo=l((function(){return!Object.getOwnPropertyNames(1)}));Ke({target:"Object",stat:!0,forced:qo},{getOwnPropertyNames:Go});var Ko=l((function(){En(1)}));Ke({target:"Object",stat:!0,forced:Ko,sham:!In},{getPrototypeOf:function(e){return En($e(e))}});var Xo=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};Ke({target:"Object",stat:!0},{is:Xo});var Qo=Object.isExtensible,Yo=l((function(){Qo(1)}));Ke({target:"Object",stat:!0,forced:Yo},{isExtensible:function(e){return!!C(e)&&(!Qo||Qo(e))}});var $o=Object.isFrozen,Zo=l((function(){$o(1)}));Ke({target:"Object",stat:!0,forced:Zo},{isFrozen:function(e){return!C(e)||!!$o&&$o(e)}});var Jo=Object.isSealed,ei=l((function(){Jo(1)}));Ke({target:"Object",stat:!0,forced:ei},{isSealed:function(e){return!C(e)||!!Jo&&Jo(e)}});var ti=l((function(){Ze(1)}));Ke({target:"Object",stat:!0,forced:ti},{keys:function(e){return Ze($e(e))}});var ni=Lo.onFreeze,ri=Object.preventExtensions,ai=l((function(){ri(1)}));Ke({target:"Object",stat:!0,forced:ai,sham:!Po},{preventExtensions:function(e){return ri&&C(e)?ri(ni(e)):e}});var oi=Lo.onFreeze,ii=Object.seal,si=l((function(){ii(1)}));Ke({target:"Object",stat:!0,forced:si,sham:!Po},{seal:function(e){return ii&&C(e)?ii(oi(e)):e}}),Ke({target:"Object",stat:!0},{setPrototypeOf:Nn});var ui=Do.values;Ke({target:"Object",stat:!0},{values:function(e){return ui(e)}});var ci=Dn?{}.toString:function(){return"[object "+Un(this)+"]"};Dn||me(Object.prototype,"toString",ci,{unsafe:!0});var li=!l((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete c[e]}));d&&Ke({target:"Object",proto:!0,forced:li},{__defineGetter__:function(e,t){L.f($e(this),e,{get:At(t),enumerable:!0,configurable:!0})}}),d&&Ke({target:"Object",proto:!0,forced:li},{__defineSetter__:function(e,t){L.f($e(this),e,{set:At(t),enumerable:!0,configurable:!0})}});var di=M.f;d&&Ke({target:"Object",proto:!0,forced:li},{__lookupGetter__:function(e){var t,n=$e(this),r=S(e,!0);do{if(t=di(n,r))return t.get}while(n=En(n))}});var pi=M.f;d&&Ke({target:"Object",proto:!0,forced:li},{__lookupSetter__:function(e){var t,n=$e(this),r=S(e,!0);do{if(t=pi(n,r))return t.set}while(n=En(n))}});var fi=String.fromCharCode,hi=String.fromCodePoint,mi=!!hi&&1!=hi.length;Ke({target:"String",stat:!0,forced:mi},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],Ee(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?fi(t):fi(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}}),Ke({target:"String",stat:!0},{raw:function(e){for(var t=I(e.raw),n=Ie(t.length),r=arguments.length,a=[],o=0;n>o;)a.push(String(t[o++])),o<r&&a.push(String(arguments[o]));return a.join("")}});var gi=function(e){return function(t,n){var r,a,o=String(w(t)),i=ke(n),s=o.length;return i<0||i>=s?e?"":void 0:(r=o.charCodeAt(i))<55296||r>56319||i+1===s||(a=o.charCodeAt(i+1))<56320||a>57343?e?o.charAt(i):r:e?o.slice(i,i+2):a-56320+(r-55296<<10)+65536}},vi={codeAt:gi(!1),charAt:gi(!0)},yi=vi.codeAt;Ke({target:"String",proto:!0},{codePointAt:function(e){return yi(this,e)}});var bi,xi=kt("match"),ki=function(e){var t;return C(e)&&(void 0!==(t=e[xi])?!!t:"RegExp"==b(e))},wi=function(e){if(ki(e))throw TypeError("The method doesn't accept regular expressions");return e},Ii=kt("match"),Ci=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Ii]=!1,"/./"[e](t)}catch(e){}}return!1},Si=M.f,Ei="".endsWith,Ti=Math.min,Ni=Ci("endsWith"),Ai=!(Ni||(bi=Si(String.prototype,"endsWith"),!bi||bi.writable));Ke({target:"String",proto:!0,forced:!Ai&&!Ni},{endsWith:function(e){var t=String(w(this));wi(e);var n=arguments.length>1?arguments[1]:void 0,r=Ie(t.length),a=void 0===n?r:Ti(Ie(n),r),o=String(e);return Ei?Ei.call(t,o,a):t.slice(a-o.length,a)===o}}),Ke({target:"String",proto:!0,forced:!Ci("includes")},{includes:function(e){return!!~String(w(this)).indexOf(wi(e),arguments.length>1?arguments[1]:void 0)}});var _i=function(){var e=D(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function Ri(e,t){return RegExp(e,t)}var Oi=l((function(){var e=Ri("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Fi=l((function(){var e=Ri("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),Mi={UNSUPPORTED_Y:Oi,BROKEN_CARET:Fi},Di=RegExp.prototype.exec,Bi=String.prototype.replace,Pi=Di,Li=function(){var e=/a/,t=/b*/g;return Di.call(e,"a"),Di.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Ui=Mi.UNSUPPORTED_Y||Mi.BROKEN_CARET,Vi=void 0!==/()??/.exec("")[1],Wi=Li||Vi||Ui;Wi&&(Pi=function(e){var t,n,r,a,o=this,i=Ui&&o.sticky,s=_i.call(o),u=o.source,c=0,l=e;return i&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),l=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(u="(?: "+u+")",l=" "+l,c++),n=new RegExp("^(?:"+u+")",s)),Vi&&(n=new RegExp("^"+u+"$(?!\\s)",s)),Li&&(t=o.lastIndex),r=Di.call(i?n:o,l),i?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:Li&&r&&(o.lastIndex=o.global?r.index+r[0].length:t),Vi&&r&&r.length>1&&Bi.call(r[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r});var zi=Pi;Ke({target:"RegExp",proto:!0,forced:/./.exec!==zi},{exec:zi});var ji=kt("species"),Hi=!l((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Gi="$0"==="a".replace(/./,"$0"),qi=kt("replace"),Ki=!!/./[qi]&&""===/./[qi]("a","$0"),Xi=!l((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Qi=function(e,t,n,r){var a=kt(e),o=!l((function(){var t={};return t[a]=function(){return 7},7!=""[e](t)})),i=o&&!l((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[ji]=function(){return n},n.flags="",n[a]=/./[a]),n.exec=function(){return t=!0,null},n[a](""),!t}));if(!o||!i||"replace"===e&&(!Hi||!Gi||Ki)||"split"===e&&!Xi){var s=/./[a],u=n(a,""[e],(function(e,t,n,r,a){return t.exec===zi?o&&!a?{done:!0,value:s.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Gi,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Ki}),c=u[0],d=u[1];me(String.prototype,e,c),me(RegExp.prototype,a,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)})}r&&U(RegExp.prototype[a],"sham",!0)},Yi=vi.charAt,$i=function(e,t,n){return t+(n?Yi(e,t).length:1)},Zi=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==b(e))throw TypeError("RegExp#exec called on incompatible receiver");return zi.call(e,t)};Qi("match",1,(function(e,t,n){return[function(t){var n=w(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=D(e),o=String(this);if(!a.global)return Zi(a,o);var i=a.unicode;a.lastIndex=0;for(var s,u=[],c=0;null!==(s=Zi(a,o));){var l=String(s[0]);u[c]=l,""===l&&(a.lastIndex=$i(o,Ie(a.lastIndex),i)),c++}return 0===c?null:u}]}));var Ji=kt("species"),es=function(e,t){var n,r=D(e).constructor;return void 0===r||null==(n=D(r)[Ji])?t:At(n)},ts=kt("matchAll"),ns="RegExp String",rs=ns+" Iterator",as=he.set,os=he.getterFor(rs),is=RegExp.prototype,ss=is.exec,us="".matchAll,cs=!!us&&!l((function(){"a".matchAll(/./)})),ls=function(e,t){var n,r=e.exec;if("function"==typeof r){if("object"!=typeof(n=r.call(e,t)))throw TypeError("Incorrect exec result");return n}return ss.call(e,t)},ds=oo((function(e,t,n,r){as(this,{type:rs,regexp:e,string:t,global:n,unicode:r,done:!1})}),ns,(function(){var e=os(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,r=ls(t,n);return null===r?{value:void 0,done:e.done=!0}:e.global?(""==String(r[0])&&(t.lastIndex=$i(n,Ie(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),ps=function(e){var t,n,r,a,o,i,s=D(this),u=String(e);return t=es(s,RegExp),void 0===(n=s.flags)&&s instanceof RegExp&&!("flags"in is)&&(n=_i.call(s)),r=void 0===n?"":String(n),a=new t(t===RegExp?s.source:s,r),o=!!~r.indexOf("g"),i=!!~r.indexOf("u"),a.lastIndex=Ie(s.lastIndex),new ds(a,u,o,i)};Ke({target:"String",proto:!0,forced:cs},{matchAll:function(e){var t,n,r=w(this);if(null!=e){if(ki(e)&&!~String(w("flags"in is?e.flags:_i.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(cs)return us.apply(r,arguments);if(void 0===(n=e[ts])&&$&&"RegExp"==b(e)&&(n=ps),null!=n)return At(n).call(e,r)}else if(cs)return us.apply(r,arguments);return t=String(r),new RegExp(e,"g")[ts](t)}}),ts in is||U(is,ts,ps);var fs="".repeat||function(e){var t=String(w(this)),n="",r=ke(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},hs=Math.ceil,ms=function(e){return function(t,n,r){var a,o,i=String(w(t)),s=i.length,u=void 0===r?" ":String(r),c=Ie(n);return c<=s||""==u?i:(a=c-s,(o=fs.call(u,hs(a/u.length))).length>a&&(o=o.slice(0,a)),e?i+o:o+i)}},gs={start:ms(!1),end:ms(!0)},vs=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(ar),ys=gs.end;Ke({target:"String",proto:!0,forced:vs},{padEnd:function(e){return ys(this,e,arguments.length>1?arguments[1]:void 0)}});var bs=gs.start;Ke({target:"String",proto:!0,forced:vs},{padStart:function(e){return bs(this,e,arguments.length>1?arguments[1]:void 0)}}),Ke({target:"String",proto:!0},{repeat:fs});var xs=Math.max,ks=Math.min,ws=Math.floor,Is=/\$([$&'`]|\d\d?|<[^>]*>)/g,Cs=/\$([$&'`]|\d\d?)/g,Ss=function(e){return void 0===e?e:String(e)};Qi("replace",2,(function(e,t,n,r){var a=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,i=a?"$":"$0";return[function(n,r){var a=w(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!a&&o||"string"==typeof r&&-1===r.indexOf(i)){var u=n(t,e,this,r);if(u.done)return u.value}var c=D(e),l=String(this),d="function"==typeof r;d||(r=String(r));var p=c.global;if(p){var f=c.unicode;c.lastIndex=0}for(var h=[];;){var m=Zi(c,l);if(null===m)break;if(h.push(m),!p)break;""===String(m[0])&&(c.lastIndex=$i(l,Ie(c.lastIndex),f))}for(var g="",v=0,y=0;y<h.length;y++){m=h[y];for(var b=String(m[0]),x=xs(ks(ke(m.index),l.length),0),k=[],w=1;w<m.length;w++)k.push(Ss(m[w]));var I=m.groups;if(d){var C=[b].concat(k,x,l);void 0!==I&&C.push(I);var S=String(r.apply(void 0,C))}else S=s(b,l,x,k,I,r);x>=v&&(g+=l.slice(v,x)+S,v=x+b.length)}return g+l.slice(v)}];function s(e,n,r,a,o,i){var s=r+e.length,u=a.length,c=Cs;return void 0!==o&&(o=$e(o),c=Is),t.call(i,c,(function(t,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":c=o[i.slice(1,-1)];break;default:var l=+i;if(0===l)return t;if(l>u){var d=ws(l/10);return 0===d?t:d<=u?void 0===a[d-1]?i.charAt(1):a[d-1]+i.charAt(1):t}c=a[l-1]}return void 0===c?"":c}))}})),Qi("search",1,(function(e,t,n){return[function(t){var n=w(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=D(e),o=String(this),i=a.lastIndex;Xo(i,0)||(a.lastIndex=0);var s=Zi(a,o);return Xo(a.lastIndex,i)||(a.lastIndex=i),null===s?-1:s.index}]}));var Es=[].push,Ts=Math.min,Ns=4294967295,As=!l((function(){return!RegExp(Ns,"y")}));Qi("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(w(this)),a=void 0===n?Ns:n>>>0;if(0===a)return[];if(void 0===e)return[r];if(!ki(e))return t.call(r,e,a);for(var o,i,s,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,d=new RegExp(e.source,c+"g");(o=zi.call(d,r))&&!((i=d.lastIndex)>l&&(u.push(r.slice(l,o.index)),o.length>1&&o.index<r.length&&Es.apply(u,o.slice(1)),s=o[0].length,l=i,u.length>=a));)d.lastIndex===o.index&&d.lastIndex++;return l===r.length?!s&&d.test("")||u.push(""):u.push(r.slice(l)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=w(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,a,n):r.call(String(a),t,n)},function(e,a){var o=n(r,e,this,a,r!==t);if(o.done)return o.value;var i=D(e),s=String(this),u=es(i,RegExp),c=i.unicode,l=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(As?"y":"g"),d=new u(As?i:"^(?:"+i.source+")",l),p=void 0===a?Ns:a>>>0;if(0===p)return[];if(0===s.length)return null===Zi(d,s)?[s]:[];for(var f=0,h=0,m=[];h<s.length;){d.lastIndex=As?h:0;var g,v=Zi(d,As?s:s.slice(h));if(null===v||(g=Ts(Ie(d.lastIndex+(As?0:h)),s.length))===f)h=$i(s,h,c);else{if(m.push(s.slice(f,h)),m.length===p)return m;for(var y=1;y<=v.length-1;y++)if(m.push(v[y]),m.length===p)return m;h=f=g}}return m.push(s.slice(f)),m}]}),!As);var _s=M.f,Rs="".startsWith,Os=Math.min,Fs=Ci("startsWith"),Ms=!Fs&&!!function(){var e=_s(String.prototype,"startsWith");return e&&!e.writable}();Ke({target:"String",proto:!0,forced:!Ms&&!Fs},{startsWith:function(e){var t=String(w(this));wi(e);var n=Ie(Os(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return Rs?Rs.call(t,r,n):t.slice(n,n+r.length)===r}});var Ds="\t\n\v\f\r                　\u2028\u2029\ufeff",Bs="["+Ds+"]",Ps=RegExp("^"+Bs+Bs+"*"),Ls=RegExp(Bs+Bs+"*$"),Us=function(e){return function(t){var n=String(w(t));return 1&e&&(n=n.replace(Ps,"")),2&e&&(n=n.replace(Ls,"")),n}},Vs={start:Us(1),end:Us(2),trim:Us(3)},Ws="​᠎",zs=function(e){return l((function(){return!!Ds[e]()||Ws[e]()!=Ws||Ds[e].name!==e}))},js=Vs.trim;Ke({target:"String",proto:!0,forced:zs("trim")},{trim:function(){return js(this)}});var Hs=Vs.start,Gs=zs("trimStart"),qs=Gs?function(){return Hs(this)}:"".trimStart;Ke({target:"String",proto:!0,forced:Gs},{trimStart:qs,trimLeft:qs});var Ks=Vs.end,Xs=zs("trimEnd"),Qs=Xs?function(){return Ks(this)}:"".trimEnd;Ke({target:"String",proto:!0,forced:Xs},{trimEnd:Qs,trimRight:Qs});var Ys=vi.charAt,$s="String Iterator",Zs=he.set,Js=he.getterFor($s);ho(String,"String",(function(e){Zs(this,{type:$s,string:String(e),index:0})}),(function(){var e,t=Js(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=Ys(n,r),t.index+=e.length,{value:e,done:!1})}));var eu=/"/g,tu=function(e,t,n,r){var a=String(w(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+String(r).replace(eu,"&quot;")+'"'),o+">"+a+"</"+t+">"},nu=function(e){return l((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))};Ke({target:"String",proto:!0,forced:nu("anchor")},{anchor:function(e){return tu(this,"a","name",e)}}),Ke({target:"String",proto:!0,forced:nu("big")},{big:function(){return tu(this,"big","","")}}),Ke({target:"String",proto:!0,forced:nu("blink")},{blink:function(){return tu(this,"blink","","")}}),Ke({target:"String",proto:!0,forced:nu("bold")},{bold:function(){return tu(this,"b","","")}}),Ke({target:"String",proto:!0,forced:nu("fixed")},{fixed:function(){return tu(this,"tt","","")}}),Ke({target:"String",proto:!0,forced:nu("fontcolor")},{fontcolor:function(e){return tu(this,"font","color",e)}}),Ke({target:"String",proto:!0,forced:nu("fontsize")},{fontsize:function(e){return tu(this,"font","size",e)}}),Ke({target:"String",proto:!0,forced:nu("italics")},{italics:function(){return tu(this,"i","","")}}),Ke({target:"String",proto:!0,forced:nu("link")},{link:function(e){return tu(this,"a","href",e)}}),Ke({target:"String",proto:!0,forced:nu("small")},{small:function(){return tu(this,"small","","")}}),Ke({target:"String",proto:!0,forced:nu("strike")},{strike:function(){return tu(this,"strike","","")}}),Ke({target:"String",proto:!0,forced:nu("sub")},{sub:function(){return tu(this,"sub","","")}}),Ke({target:"String",proto:!0,forced:nu("sup")},{sup:function(){return tu(this,"sup","","")}});var ru=kt("replace"),au=RegExp.prototype;Ke({target:"String",proto:!0},{replaceAll:function e(t,n){var r,a,o,i,s,u,c,l=w(this);if(null!=t){if(ki(t)&&!~String(w("flags"in au?t.flags:_i.call(t))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(r=t[ru]))return r.call(t,l,n)}if(a=String(l),""===(o=String(t)))return e.call(a,/(?:)/g,n);if(i=a.split(o),"function"!=typeof n)return i.join(String(n));for(u=(s=i[0]).length,c=1;c<i.length;c++)s+=String(n(o,u,a)),u+=o.length+i[c].length,s+=i[c];return s}});var ou=function(e,t,n){var r,a;return Nn&&"function"==typeof(r=t.constructor)&&r!==n&&C(a=r.prototype)&&a!==n.prototype&&Nn(e,a),e},iu=L.f,su=Me.f,uu=he.set,cu=kt("match"),lu=c.RegExp,du=lu.prototype,pu=/a/g,fu=/a/g,hu=new lu(pu)!==pu,mu=Mi.UNSUPPORTED_Y,gu=d&&Ge("RegExp",!hu||mu||l((function(){return fu[cu]=!1,lu(pu)!=pu||lu(fu)==fu||"/a/i"!=lu(pu,"i")})));if(gu){for(var vu=function(e,t){var n,r=this instanceof vu,a=ki(e),o=void 0===t;if(!r&&a&&e.constructor===vu&&o)return e;hu?a&&!o&&(e=e.source):e instanceof vu&&(o&&(t=_i.call(e)),e=e.source),mu&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var i=ou(hu?new lu(e,t):lu(e,t),r?this:du,vu);return mu&&n&&uu(i,{sticky:n}),i},yu=function(e){e in vu||iu(vu,e,{configurable:!0,get:function(){return lu[e]},set:function(t){lu[e]=t}})},bu=su(lu),xu=0;bu.length>xu;)yu(bu[xu++]);du.constructor=vu,vu.prototype=du,me(c,"RegExp",vu)}Qa("RegExp");var ku=Mi.UNSUPPORTED_Y;d&&("g"!=/./g.flags||ku)&&L.f(RegExp.prototype,"flags",{configurable:!0,get:_i});var wu=Mi.UNSUPPORTED_Y,Iu=L.f,Cu=he.get,Su=RegExp.prototype;d&&wu&&Iu(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==Su){if(this instanceof RegExp)return!!Cu(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}});var Eu=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),Tu=/./.test;Ke({target:"RegExp",proto:!0,forced:!Eu},{test:function(e){if("function"!=typeof this.exec)return Tu.call(this,e);var t=this.exec(e);if(null!==t&&!C(t))throw new Error("RegExp exec method returned something other than an Object or null");return!!t}});var Nu="toString",Au=RegExp.prototype,_u=Au[Nu],Ru=l((function(){return"/a/b"!=_u.call({source:"a",flags:"b"})})),Ou=_u.name!=Nu;(Ru||Ou)&&me(RegExp.prototype,Nu,(function(){var e=D(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in Au)?_i.call(e):n)}),{unsafe:!0});var Fu=Vs.trim,Mu=c.parseInt,Du=/^[+-]?0[Xx]/,Bu=8!==Mu(Ds+"08")||22!==Mu(Ds+"0x16"),Pu=Bu?function(e,t){var n=Fu(String(e));return Mu(n,t>>>0||(Du.test(n)?16:10))}:Mu;Ke({global:!0,forced:parseInt!=Pu},{parseInt:Pu});var Lu=Vs.trim,Uu=c.parseFloat,Vu=1/Uu(Ds+"-0")!=-1/0,Wu=Vu?function(e){var t=Lu(String(e)),n=Uu(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Uu;Ke({global:!0,forced:parseFloat!=Wu},{parseFloat:Wu});var zu=Me.f,ju=M.f,Hu=L.f,Gu=Vs.trim,qu="Number",Ku=c[qu],Xu=Ku.prototype,Qu=b(dt(Xu))==qu,Yu=function(e){var t,n,r,a,o,i,s,u,c=S(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=Gu(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+c}for(i=(o=c.slice(2)).length,s=0;s<i;s++)if((u=o.charCodeAt(s))<48||u>a)return NaN;return parseInt(o,r)}return+c};if(Ge(qu,!Ku(" 0o1")||!Ku("0b1")||Ku("+0x1"))){for(var $u,Zu=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof Zu&&(Qu?l((function(){Xu.valueOf.call(n)})):b(n)!=qu)?ou(new Ku(Yu(t)),n,Zu):Yu(t)},Ju=d?zu(Ku):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),ec=0;Ju.length>ec;ec++)T(Ku,$u=Ju[ec])&&!T(Zu,$u)&&Hu(Zu,$u,ju(Ku,$u));Zu.prototype=Xu,Xu.constructor=Zu,me(c,qu,Zu)}Ke({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)});var tc=c.isFinite,nc=Number.isFinite||function(e){return"number"==typeof e&&tc(e)};Ke({target:"Number",stat:!0},{isFinite:nc});var rc=Math.floor,ac=function(e){return!C(e)&&isFinite(e)&&rc(e)===e};Ke({target:"Number",stat:!0},{isInteger:ac}),Ke({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var oc=Math.abs;Ke({target:"Number",stat:!0},{isSafeInteger:function(e){return ac(e)&&oc(e)<=9007199254740991}}),Ke({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),Ke({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991}),Ke({target:"Number",stat:!0,forced:Number.parseFloat!=Wu},{parseFloat:Wu}),Ke({target:"Number",stat:!0,forced:Number.parseInt!=Pu},{parseInt:Pu});var ic=function(e){if("number"!=typeof e&&"Number"!=b(e))throw TypeError("Incorrect invocation");return+e},sc=1..toFixed,uc=Math.floor,cc=function(e,t,n){return 0===t?n:t%2==1?cc(e,t-1,n*e):cc(e*e,t/2,n)},lc=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t},dc=sc&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){sc.call({})}));Ke({target:"Number",proto:!0,forced:dc},{toFixed:function(e){var t,n,r,a,o=ic(this),i=ke(e),s=[0,0,0,0,0,0],u="",c="0",l=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*s[n],s[n]=r%1e7,r=uc(r/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=s[t],s[t]=uc(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==s[e]){var n=String(s[e]);t=""===t?n:t+fs.call("0",7-n.length)+n}return t};if(i<0||i>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(u="-",o=-o),o>1e-21)if(n=(t=lc(o*cc(2,69,1))-69)<0?o*cc(2,-t,1):o/cc(2,t,1),n*=4503599627370496,(t=52-t)>0){for(l(0,n),r=i;r>=7;)l(1e7,0),r-=7;for(l(cc(10,r,1),0),r=t-1;r>=23;)d(1<<23),r-=23;d(1<<r),l(1,1),d(2),c=p()}else l(0,n),l(1<<-t,0),c=p()+fs.call("0",i);return c=i>0?u+((a=c.length)<=i?"0."+fs.call("0",i-a)+c:c.slice(0,a-i)+"."+c.slice(a-i)):u+c}});var pc=1..toPrecision,fc=l((function(){return"1"!==pc.call(1,void 0)}))||!l((function(){pc.call({})}));Ke({target:"Number",proto:!0,forced:fc},{toPrecision:function(e){return void 0===e?pc.call(ic(this)):pc.call(ic(this),e)}});var hc=Math.log,mc=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:hc(1+e)},gc=Math.acosh,vc=Math.log,yc=Math.sqrt,bc=Math.LN2,xc=!gc||710!=Math.floor(gc(Number.MAX_VALUE))||gc(1/0)!=1/0;Ke({target:"Math",stat:!0,forced:xc},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?vc(e)+bc:mc(e-1+yc(e-1)*yc(e+1))}});var kc=Math.asinh,wc=Math.log,Ic=Math.sqrt;function Cc(e){return isFinite(e=+e)&&0!=e?e<0?-Cc(-e):wc(e+Ic(e*e+1)):e}Ke({target:"Math",stat:!0,forced:!(kc&&1/kc(0)>0)},{asinh:Cc});var Sc=Math.atanh,Ec=Math.log;Ke({target:"Math",stat:!0,forced:!(Sc&&1/Sc(-0)<0)},{atanh:function(e){return 0==(e=+e)?e:Ec((1+e)/(1-e))/2}});var Tc=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1},Nc=Math.abs,Ac=Math.pow;Ke({target:"Math",stat:!0},{cbrt:function(e){return Tc(e=+e)*Ac(Nc(e),1/3)}});var _c=Math.floor,Rc=Math.log,Oc=Math.LOG2E;Ke({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-_c(Rc(e+.5)*Oc):32}});var Fc=Math.expm1,Mc=Math.exp,Dc=!Fc||Fc(10)>22025.465794806718||Fc(10)<22025.465794806718||-2e-17!=Fc(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Mc(e)-1}:Fc,Bc=Math.cosh,Pc=Math.abs,Lc=Math.E;Ke({target:"Math",stat:!0,forced:!Bc||Bc(710)===1/0},{cosh:function(e){var t=Dc(Pc(e)-1)+1;return(t+1/(t*Lc*Lc))*(Lc/2)}}),Ke({target:"Math",stat:!0,forced:Dc!=Math.expm1},{expm1:Dc});var Uc=Math.abs,Vc=Math.pow,Wc=Vc(2,-52),zc=Vc(2,-23),jc=Vc(2,127)*(2-zc),Hc=Vc(2,-126),Gc=function(e){return e+1/Wc-1/Wc},qc=Math.fround||function(e){var t,n,r=Uc(e),a=Tc(e);return r<Hc?a*Gc(r/Hc/zc)*Hc*zc:(n=(t=(1+zc/Wc)*r)-(t-r))>jc||n!=n?a*(1/0):a*n};Ke({target:"Math",stat:!0},{fround:qc});var Kc=Math.hypot,Xc=Math.abs,Qc=Math.sqrt,Yc=!!Kc&&Kc(1/0,NaN)!==1/0;Ke({target:"Math",stat:!0,forced:Yc},{hypot:function(e,t){for(var n,r,a=0,o=0,i=arguments.length,s=0;o<i;)s<(n=Xc(arguments[o++]))?(a=a*(r=s/n)*r+1,s=n):a+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*Qc(a)}});var $c=Math.imul,Zc=l((function(){return-5!=$c(4294967295,5)||2!=$c.length}));Ke({target:"Math",stat:!0,forced:Zc},{imul:function(e,t){var n=65535,r=+e,a=+t,o=n&r,i=n&a;return 0|o*i+((n&r>>>16)*i+o*(n&a>>>16)<<16>>>0)}});var Jc=Math.log,el=Math.LOG10E;Ke({target:"Math",stat:!0},{log10:function(e){return Jc(e)*el}}),Ke({target:"Math",stat:!0},{log1p:mc});var tl=Math.log,nl=Math.LN2;Ke({target:"Math",stat:!0},{log2:function(e){return tl(e)/nl}}),Ke({target:"Math",stat:!0},{sign:Tc});var rl=Math.abs,al=Math.exp,ol=Math.E,il=l((function(){return-2e-17!=Math.sinh(-2e-17)}));Ke({target:"Math",stat:!0,forced:il},{sinh:function(e){return rl(e=+e)<1?(Dc(e)-Dc(-e))/2:(al(e-1)-al(-e-1))*(ol/2)}});var sl=Math.exp;Ke({target:"Math",stat:!0},{tanh:function(e){var t=Dc(e=+e),n=Dc(-e);return t==1/0?1:n==1/0?-1:(t-n)/(sl(e)+sl(-e))}}),Nt(Math,"Math",!0);var ul=Math.ceil,cl=Math.floor;Ke({target:"Math",stat:!0},{trunc:function(e){return(e>0?cl:ul)(e)}}),Ke({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var ll=l((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));Ke({target:"Date",proto:!0,forced:ll},{toJSON:function(e){var t=$e(this),n=S(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}});var dl=gs.start,pl=Math.abs,fl=Date.prototype,hl=fl.getTime,ml=fl.toISOString,gl=l((function(){return"0385-07-25T07:06:39.999Z"!=ml.call(new Date(-50000000000001))}))||!l((function(){ml.call(new Date(NaN))}))?function(){if(!isFinite(hl.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+dl(pl(t),r?6:4,0)+"-"+dl(e.getUTCMonth()+1,2,0)+"-"+dl(e.getUTCDate(),2,0)+"T"+dl(e.getUTCHours(),2,0)+":"+dl(e.getUTCMinutes(),2,0)+":"+dl(e.getUTCSeconds(),2,0)+"."+dl(n,3,0)+"Z"}:ml;Ke({target:"Date",proto:!0,forced:Date.prototype.toISOString!==gl},{toISOString:gl});var vl=Date.prototype,yl="Invalid Date",bl="toString",xl=vl[bl],kl=vl.getTime;new Date(NaN)+""!=yl&&me(vl,bl,(function(){var e=kl.call(this);return e==e?xl.call(this):yl}));var wl=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return S(D(this),"number"!==e)},Il=kt("toPrimitive"),Cl=Date.prototype;Il in Cl||U(Cl,Il,wl);var Sl=ye("JSON","stringify"),El=/[\uD800-\uDFFF]/g,Tl=/^[\uD800-\uDBFF]$/,Nl=/^[\uDC00-\uDFFF]$/,Al=function(e,t,n){var r=n.charAt(t-1),a=n.charAt(t+1);return Tl.test(e)&&!Nl.test(a)||Nl.test(e)&&!Tl.test(r)?"\\u"+e.charCodeAt(0).toString(16):e},_l=l((function(){return'"\\udf06\\ud834"'!==Sl("\udf06\ud834")||'"\\udead"'!==Sl("\udead")}));Sl&&Ke({target:"JSON",stat:!0,forced:_l},{stringify:function(e,t,n){var r=Sl.apply(null,arguments);return"string"==typeof r?r.replace(El,Al):r}}),Nt(c.JSON,"JSON",!0);var Rl,Ol,Fl,Ml=c.Promise,Dl=function(e,t,n){for(var r in t)me(e,r,t[r],n);return e},Bl=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Pl=/(iphone|ipod|ipad).*applewebkit/i.test(ar),Ll=c.location,Ul=c.setImmediate,Vl=c.clearImmediate,Wl=c.process,zl=c.MessageChannel,jl=c.Dispatch,Hl=0,Gl={},ql="onreadystatechange",Kl=function(e){if(Gl.hasOwnProperty(e)){var t=Gl[e];delete Gl[e],t()}},Xl=function(e){return function(){Kl(e)}},Ql=function(e){Kl(e.data)},Yl=function(e){c.postMessage(e+"",Ll.protocol+"//"+Ll.host)};Ul&&Vl||(Ul=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Gl[++Hl]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},Rl(Hl),Hl},Vl=function(e){delete Gl[e]},va?Rl=function(e){Wl.nextTick(Xl(e))}:jl&&jl.now?Rl=function(e){jl.now(Xl(e))}:zl&&!Pl?(Fl=(Ol=new zl).port2,Ol.port1.onmessage=Ql,Rl=_t(Fl.postMessage,Fl,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts&&Ll&&"file:"!==Ll.protocol&&!l(Yl)?(Rl=Yl,c.addEventListener("message",Ql,!1)):Rl=ql in _("script")?function(e){et.appendChild(_("script"))[ql]=function(){et.removeChild(this),Kl(e)}}:function(e){setTimeout(Xl(e),0)});var $l,Zl,Jl,ed,td,nd,rd,ad,od={set:Ul,clear:Vl},id=M.f,sd=od.set,ud=c.MutationObserver||c.WebKitMutationObserver,cd=c.document,ld=c.process,dd=c.Promise,pd=id(c,"queueMicrotask"),fd=pd&&pd.value;fd||($l=function(){var e,t;for(va&&(e=ld.domain)&&e.exit();Zl;){t=Zl.fn,Zl=Zl.next;try{t()}catch(e){throw Zl?ed():Jl=void 0,e}}Jl=void 0,e&&e.enter()},!Pl&&!va&&ud&&cd?(td=!0,nd=cd.createTextNode(""),new ud($l).observe(nd,{characterData:!0}),ed=function(){nd.data=td=!td}):dd&&dd.resolve?(rd=dd.resolve(void 0),ad=rd.then,ed=function(){ad.call(rd,$l)}):ed=va?function(){ld.nextTick($l)}:function(){sd.call(c,$l)});var hd,md,gd,vd,yd=fd||function(e){var t={fn:e,next:void 0};Jl&&(Jl.next=t),Zl||(Zl=t,ed()),Jl=t},bd=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=At(t),this.reject=At(n)},xd=function(e){return new bd(e)},kd={f:xd},wd=function(e,t){if(D(e),C(t)&&t.constructor===e)return t;var n=kd.f(e);return(0,n.resolve)(t),n.promise},Id=function(e,t){var n=c.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))},Cd=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Sd=od.set,Ed=kt("species"),Td="Promise",Nd=he.get,Ad=he.set,_d=he.getterFor(Td),Rd=Ml,Od=c.TypeError,Fd=c.document,Md=c.process,Dd=ye("fetch"),Bd=kd.f,Pd=Bd,Ld=!!(Fd&&Fd.createEvent&&c.dispatchEvent),Ud="function"==typeof PromiseRejectionEvent,Vd="unhandledrejection",Wd="rejectionhandled",zd=0,jd=1,Hd=2,Gd=1,qd=2,Kd=Ge(Td,(function(){if(!(X(Rd)!==String(Rd))){if(66===ur)return!0;if(!va&&!Ud)return!0}if(ur>=51&&/native code/.test(Rd))return!1;var e=Rd.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[Ed]=t,!(e.then((function(){}))instanceof t)})),Xd=Kd||!Jn((function(e){Rd.all(e).catch((function(){}))})),Qd=function(e){var t;return!(!C(e)||"function"!=typeof(t=e.then))&&t},Yd=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;yd((function(){for(var r=e.value,a=e.state==jd,o=0;n.length>o;){var i,s,u,c=n[o++],l=a?c.ok:c.fail,d=c.resolve,p=c.reject,f=c.domain;try{l?(a||(e.rejection===qd&&ep(e),e.rejection=Gd),!0===l?i=r:(f&&f.enter(),i=l(r),f&&(f.exit(),u=!0)),i===c.promise?p(Od("Promise-chain cycle")):(s=Qd(i))?s.call(i,d,p):d(i)):p(r)}catch(e){f&&!u&&f.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Zd(e)}))}},$d=function(e,t,n){var r,a;Ld?((r=Fd.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},!Ud&&(a=c["on"+e])?a(r):e===Vd&&Id("Unhandled promise rejection",n)},Zd=function(e){Sd.call(c,(function(){var t,n=e.facade,r=e.value;if(Jd(e)&&(t=Cd((function(){va?Md.emit("unhandledRejection",r,n):$d(Vd,n,r)})),e.rejection=va||Jd(e)?qd:Gd,t.error))throw t.value}))},Jd=function(e){return e.rejection!==Gd&&!e.parent},ep=function(e){Sd.call(c,(function(){var t=e.facade;va?Md.emit("rejectionHandled",t):$d(Wd,t,e.value)}))},tp=function(e,t,n){return function(r){e(t,r,n)}},np=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=Hd,Yd(e,!0))},rp=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Od("Promise can't be resolved itself");var r=Qd(t);r?yd((function(){var n={done:!1};try{r.call(t,tp(rp,n,e),tp(np,n,e))}catch(t){np(n,t,e)}})):(e.value=t,e.state=jd,Yd(e,!1))}catch(t){np({done:!1},t,e)}}};Kd&&(Rd=function(e){Bl(this,Rd,Td),At(e),hd.call(this);var t=Nd(this);try{e(tp(rp,t),tp(np,t))}catch(e){np(t,e)}},(hd=function(e){Ad(this,{type:Td,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:zd,value:void 0})}).prototype=Dl(Rd.prototype,{then:function(e,t){var n=_d(this),r=Bd(es(this,Rd));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=va?Md.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=zd&&Yd(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),md=function(){var e=new hd,t=Nd(e);this.promise=e,this.resolve=tp(rp,t),this.reject=tp(np,t)},kd.f=Bd=function(e){return e===Rd||e===gd?new md(e):Pd(e)},"function"==typeof Ml&&(vd=Ml.prototype.then,me(Ml.prototype,"then",(function(e,t){var n=this;return new Rd((function(e,t){vd.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof Dd&&Ke({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return wd(Rd,Dd.apply(c,arguments))}}))),Ke({global:!0,wrap:!0,forced:Kd},{Promise:Rd}),Nt(Rd,Td,!1),Qa(Td),gd=ye(Td),Ke({target:Td,stat:!0,forced:Kd},{reject:function(e){var t=Bd(this);return t.reject.call(void 0,e),t.promise}}),Ke({target:Td,stat:!0,forced:Kd},{resolve:function(e){return wd(this,e)}}),Ke({target:Td,stat:!0,forced:Xd},{all:function(e){var t=this,n=Bd(t),r=n.resolve,a=n.reject,o=Cd((function(){var n=At(t.resolve),o=[],i=0,s=1;Hn(e,(function(e){var u=i++,c=!1;o.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,o[u]=e,--s||r(o))}),a)})),--s||r(o)}));return o.error&&a(o.value),n.promise},race:function(e){var t=this,n=Bd(t),r=n.reject,a=Cd((function(){var a=At(t.resolve);Hn(e,(function(e){a.call(t,e).then(n.resolve,r)}))}));return a.error&&r(a.value),n.promise}}),Ke({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=kd.f(t),r=n.resolve,a=n.reject,o=Cd((function(){var n=At(t.resolve),a=[],o=0,i=1;Hn(e,(function(e){var s=o++,u=!1;a.push(void 0),i++,n.call(t,e).then((function(e){u||(u=!0,a[s]={status:"fulfilled",value:e},--i||r(a))}),(function(e){u||(u=!0,a[s]={status:"rejected",reason:e},--i||r(a))}))})),--i||r(a)}));return o.error&&a(o.value),n.promise}});var ap="No one promise resolved";Ke({target:"Promise",stat:!0},{any:function(e){var t=this,n=kd.f(t),r=n.resolve,a=n.reject,o=Cd((function(){var n=At(t.resolve),o=[],i=0,s=1,u=!1;Hn(e,(function(e){var c=i++,l=!1;o.push(void 0),s++,n.call(t,e).then((function(e){l||u||(u=!0,r(e))}),(function(e){l||u||(l=!0,o[c]=e,--s||a(new(ye("AggregateError"))(o,ap)))}))})),--s||a(new(ye("AggregateError"))(o,ap))}));return o.error&&a(o.value),n.promise}});var op=!!Ml&&l((function(){Ml.prototype.finally.call({then:function(){}},(function(){}))}));Ke({target:"Promise",proto:!0,real:!0,forced:op},{finally:function(e){var t=es(this,ye("Promise")),n="function"==typeof e;return this.then(n?function(n){return wd(t,e()).then((function(){return n}))}:e,n?function(n){return wd(t,e()).then((function(){throw n}))}:e)}}),"function"!=typeof Ml||Ml.prototype.finally||me(Ml.prototype,"finally",ye("Promise").prototype.finally);var ip=function(e,t,n){var r=-1!==e.indexOf("Map"),a=-1!==e.indexOf("Weak"),o=r?"set":"add",i=c[e],s=i&&i.prototype,u=i,d={},p=function(e){var t=s[e];me(s,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(a&&!C(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return a&&!C(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(a&&!C(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Ge(e,"function"!=typeof i||!(a||s.forEach&&!l((function(){(new i).entries().next()})))))u=n.getConstructor(t,e,r,o),Lo.REQUIRED=!0;else if(Ge(e,!0)){var f=new u,h=f[o](a?{}:-0,1)!=f,m=l((function(){f.has(1)})),g=Jn((function(e){new i(e)})),v=!a&&l((function(){for(var e=new i,t=5;t--;)e[o](t,t);return!e.has(-0)}));g||((u=t((function(t,n){Bl(t,u,e);var a=ou(new i,t,u);return null!=n&&Hn(n,a[o],{that:a,AS_ENTRIES:r}),a}))).prototype=s,s.constructor=u),(m||v)&&(p("delete"),p("has"),r&&p("get")),(v||h)&&p(o),a&&s.clear&&delete s.clear}return d[e]=u,Ke({global:!0,forced:u!=i},d),Nt(u,e),a||n.setStrong(u,e,r),u},sp=L.f,up=Lo.fastKey,cp=he.set,lp=he.getterFor,dp={getConstructor:function(e,t,n,r){var a=e((function(e,o){Bl(e,a,t),cp(e,{type:t,index:dt(null),first:void 0,last:void 0,size:0}),d||(e.size=0),null!=o&&Hn(o,e[r],{that:e,AS_ENTRIES:n})})),o=lp(t),i=function(e,t,n){var r,a,i=o(e),u=s(e,t);return u?u.value=n:(i.last=u={index:a=up(t,!0),key:t,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=u),r&&(r.next=u),d?i.size++:e.size++,"F"!==a&&(i.index[a]=u)),e},s=function(e,t){var n,r=o(e),a=up(t);if("F"!==a)return r.index[a];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Dl(a.prototype,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,d?e.size=0:this.size=0},delete:function(e){var t=this,n=o(t),r=s(t,e);if(r){var a=r.next,i=r.previous;delete n.index[r.index],r.removed=!0,i&&(i.next=a),a&&(a.previous=i),n.first==r&&(n.first=a),n.last==r&&(n.last=i),d?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=o(this),r=_t(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),Dl(a.prototype,n?{get:function(e){var t=s(this,e);return t&&t.value},set:function(e,t){return i(this,0===e?0:e,t)}}:{add:function(e){return i(this,e=0===e?0:e,e)}}),d&&sp(a.prototype,"size",{get:function(){return o(this).size}}),a},setStrong:function(e,t,n){var r=t+" Iterator",a=lp(t),o=lp(r);ho(e,t,(function(e,t){cp(this,{type:r,target:e,state:a(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Qa(t)}},pp=(ip("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),dp),ip("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),dp),Lo.getWeakData),fp=he.set,hp=he.getterFor,mp=Dt.find,gp=Dt.findIndex,vp=0,yp=function(e){return e.frozen||(e.frozen=new bp)},bp=function(){this.entries=[]},xp=function(e,t){return mp(e.entries,(function(e){return e[0]===t}))};bp.prototype={get:function(e){var t=xp(this,e);if(t)return t[1]},has:function(e){return!!xp(this,e)},set:function(e,t){var n=xp(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=gp(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}};var kp={getConstructor:function(e,t,n,r){var a=e((function(e,o){Bl(e,a,t),fp(e,{type:t,id:vp++,frozen:void 0}),null!=o&&Hn(o,e[r],{that:e,AS_ENTRIES:n})})),o=hp(t),i=function(e,t,n){var r=o(e),a=pp(D(t),!0);return!0===a?yp(r).set(t,n):a[r.id]=n,e};return Dl(a.prototype,{delete:function(e){var t=o(this);if(!C(e))return!1;var n=pp(e);return!0===n?yp(t).delete(e):n&&T(n,t.id)&&delete n[t.id]},has:function(e){var t=o(this);if(!C(e))return!1;var n=pp(e);return!0===n?yp(t).has(e):n&&T(n,t.id)}}),Dl(a.prototype,n?{get:function(e){var t=o(this);if(C(e)){var n=pp(e);return!0===n?yp(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return i(this,e,t)}}:{add:function(e){return i(this,e,!0)}}),a}};i((function(e){var t,n=he.enforce,r=!c.ActiveXObject&&"ActiveXObject"in c,a=Object.isExtensible,o=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},i=e.exports=ip("WeakMap",o,kp);if(Y&&r){t=kp.getConstructor(o,"WeakMap",!0),Lo.REQUIRED=!0;var s=i.prototype,u=s.delete,l=s.has,d=s.get,p=s.set;Dl(s,{delete:function(e){if(C(e)&&!a(e)){var r=n(this);return r.frozen||(r.frozen=new t),u.call(this,e)||r.frozen.delete(e)}return u.call(this,e)},has:function(e){if(C(e)&&!a(e)){var r=n(this);return r.frozen||(r.frozen=new t),l.call(this,e)||r.frozen.has(e)}return l.call(this,e)},get:function(e){if(C(e)&&!a(e)){var r=n(this);return r.frozen||(r.frozen=new t),l.call(this,e)?d.call(this,e):r.frozen.get(e)}return d.call(this,e)},set:function(e,r){if(C(e)&&!a(e)){var o=n(this);o.frozen||(o.frozen=new t),l.call(this,e)?p.call(this,e,r):o.frozen.set(e,r)}else p.call(this,e,r);return this}})}}));ip("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),kp);var wp="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Ip=function(e){if(void 0===e)return 0;var t=ke(e),n=Ie(t);if(t!==n)throw RangeError("Wrong length or index");return n},Cp=1/0,Sp=Math.abs,Ep=Math.pow,Tp=Math.floor,Np=Math.log,Ap=Math.LN2,_p=function(e,t,n){var r,a,o,i=new Array(n),s=8*n-t-1,u=(1<<s)-1,c=u>>1,l=23===t?Ep(2,-24)-Ep(2,-77):0,d=e<0||0===e&&1/e<0?1:0,p=0;for((e=Sp(e))!=e||e===Cp?(a=e!=e?1:0,r=u):(r=Tp(Np(e)/Ap),e*(o=Ep(2,-r))<1&&(r--,o*=2),(e+=r+c>=1?l/o:l*Ep(2,1-c))*o>=2&&(r++,o/=2),r+c>=u?(a=0,r=u):r+c>=1?(a=(e*o-1)*Ep(2,t),r+=c):(a=e*Ep(2,c-1)*Ep(2,t),r=0));t>=8;i[p++]=255&a,a/=256,t-=8);for(r=r<<t|a,s+=t;s>0;i[p++]=255&r,r/=256,s-=8);return i[--p]|=128*d,i},Rp=function(e,t){var n,r=e.length,a=8*r-t-1,o=(1<<a)-1,i=o>>1,s=a-7,u=r-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;n=256*n+e[u],u--,s-=8);if(0===l)l=1-i;else{if(l===o)return n?NaN:c?-Cp:Cp;n+=Ep(2,t),l-=i}return(c?-1:1)*n*Ep(2,l-t)},Op={pack:_p,unpack:Rp},Fp=Me.f,Mp=L.f,Dp=he.get,Bp=he.set,Pp="ArrayBuffer",Lp="DataView",Up="prototype",Vp="Wrong length",Wp="Wrong index",zp=c[Pp],jp=zp,Hp=c[Lp],Gp=Hp&&Hp[Up],qp=Object.prototype,Kp=c.RangeError,Xp=Op.pack,Qp=Op.unpack,Yp=function(e){return[255&e]},$p=function(e){return[255&e,e>>8&255]},Zp=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Jp=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},ef=function(e){return Xp(e,23,4)},tf=function(e){return Xp(e,52,8)},nf=function(e,t){Mp(e[Up],t,{get:function(){return Dp(this)[t]}})},rf=function(e,t,n,r){var a=Ip(n),o=Dp(e);if(a+t>o.byteLength)throw Kp(Wp);var i=Dp(o.buffer).bytes,s=a+o.byteOffset,u=i.slice(s,s+t);return r?u:u.reverse()},af=function(e,t,n,r,a,o){var i=Ip(n),s=Dp(e);if(i+t>s.byteLength)throw Kp(Wp);for(var u=Dp(s.buffer).bytes,c=i+s.byteOffset,l=r(+a),d=0;d<t;d++)u[c+d]=l[o?d:t-d-1]};if(wp){if(!l((function(){zp(1)}))||!l((function(){new zp(-1)}))||l((function(){return new zp,new zp(1.5),new zp(NaN),zp.name!=Pp}))){for(var of,sf=(jp=function(e){return Bl(this,jp),new zp(Ip(e))})[Up]=zp[Up],uf=Fp(zp),cf=0;uf.length>cf;)(of=uf[cf++])in jp||U(jp,of,zp[of]);sf.constructor=jp}Nn&&En(Gp)!==qp&&Nn(Gp,qp);var lf=new Hp(new jp(2)),df=Gp.setInt8;lf.setInt8(0,2147483648),lf.setInt8(1,2147483649),!lf.getInt8(0)&&lf.getInt8(1)||Dl(Gp,{setInt8:function(e,t){df.call(this,e,t<<24>>24)},setUint8:function(e,t){df.call(this,e,t<<24>>24)}},{unsafe:!0})}else jp=function(e){Bl(this,jp,Pp);var t=Ip(e);Bp(this,{bytes:Rr.call(new Array(t),0),byteLength:t}),d||(this.byteLength=t)},Hp=function(e,t,n){Bl(this,Hp,Lp),Bl(e,jp,Lp);var r=Dp(e).byteLength,a=ke(t);if(a<0||a>r)throw Kp("Wrong offset");if(a+(n=void 0===n?r-a:Ie(n))>r)throw Kp(Vp);Bp(this,{buffer:e,byteLength:n,byteOffset:a}),d||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},d&&(nf(jp,"byteLength"),nf(Hp,"buffer"),nf(Hp,"byteLength"),nf(Hp,"byteOffset")),Dl(Hp[Up],{getInt8:function(e){return rf(this,1,e)[0]<<24>>24},getUint8:function(e){return rf(this,1,e)[0]},getInt16:function(e){var t=rf(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=rf(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Jp(rf(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return Jp(rf(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return Qp(rf(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return Qp(rf(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){af(this,1,e,Yp,t)},setUint8:function(e,t){af(this,1,e,Yp,t)},setInt16:function(e,t){af(this,2,e,$p,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){af(this,2,e,$p,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){af(this,4,e,Zp,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){af(this,4,e,Zp,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){af(this,4,e,ef,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){af(this,8,e,tf,t,arguments.length>2?arguments[2]:void 0)}});Nt(jp,Pp),Nt(Hp,Lp);var pf={ArrayBuffer:jp,DataView:Hp},ff="ArrayBuffer",hf=pf[ff],mf=c[ff];Ke({global:!0,forced:mf!==hf},{ArrayBuffer:hf}),Qa(ff);var gf,vf=L.f,yf=c.Int8Array,bf=yf&&yf.prototype,xf=c.Uint8ClampedArray,kf=xf&&xf.prototype,wf=yf&&En(yf),If=bf&&En(bf),Cf=Object.prototype,Sf=Cf.isPrototypeOf,Ef=kt("toStringTag"),Tf=te("TYPED_ARRAY_TAG"),Nf=wp&&!!Nn&&"Opera"!==Un(c.opera),Af=!1,_f={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Rf={BigInt64Array:8,BigUint64Array:8},Of=function(e){if(!C(e))return!1;var t=Un(e);return"DataView"===t||T(_f,t)||T(Rf,t)},Ff=function(e){if(!C(e))return!1;var t=Un(e);return T(_f,t)||T(Rf,t)},Mf=function(e){if(Ff(e))return e;throw TypeError("Target is not a typed array")},Df=function(e){if(Nn){if(Sf.call(wf,e))return e}else for(var t in _f)if(T(_f,gf)){var n=c[t];if(n&&(e===n||Sf.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},Bf=function(e,t,n){if(d){if(n)for(var r in _f){var a=c[r];a&&T(a.prototype,e)&&delete a.prototype[e]}If[e]&&!n||me(If,e,n?t:Nf&&bf[e]||t)}},Pf=function(e,t,n){var r,a;if(d){if(Nn){if(n)for(r in _f)(a=c[r])&&T(a,e)&&delete a[e];if(wf[e]&&!n)return;try{return me(wf,e,n?t:Nf&&yf[e]||t)}catch(e){}}for(r in _f)!(a=c[r])||a[e]&&!n||me(a,e,t)}};for(gf in _f)c[gf]||(Nf=!1);if((!Nf||"function"!=typeof wf||wf===Function.prototype)&&(wf=function(){throw TypeError("Incorrect invocation")},Nf))for(gf in _f)c[gf]&&Nn(c[gf],wf);if((!Nf||!If||If===Cf)&&(If=wf.prototype,Nf))for(gf in _f)c[gf]&&Nn(c[gf].prototype,If);if(Nf&&En(kf)!==If&&Nn(kf,If),d&&!T(If,Ef))for(gf in Af=!0,vf(If,Ef,{get:function(){return C(this)?this[Tf]:void 0}}),_f)c[gf]&&U(c[gf],Tf,gf);var Lf={NATIVE_ARRAY_BUFFER_VIEWS:Nf,TYPED_ARRAY_TAG:Af&&Tf,aTypedArray:Mf,aTypedArrayConstructor:Df,exportTypedArrayMethod:Bf,exportTypedArrayStaticMethod:Pf,isView:Of,isTypedArray:Ff,TypedArray:wf,TypedArrayPrototype:If},Uf=Lf.NATIVE_ARRAY_BUFFER_VIEWS;Ke({target:"ArrayBuffer",stat:!0,forced:!Uf},{isView:Lf.isView});var Vf=pf.ArrayBuffer,Wf=pf.DataView,zf=Vf.prototype.slice,jf=l((function(){return!new Vf(2).slice(1,void 0).byteLength}));Ke({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:jf},{slice:function(e,t){if(void 0!==zf&&void 0===t)return zf.call(D(this),e);for(var n=D(this).byteLength,r=Ee(e,n),a=Ee(void 0===t?n:t,n),o=new(es(this,Vf))(Ie(a-r)),i=new Wf(this),s=new Wf(o),u=0;r<a;)s.setUint8(u++,i.getUint8(r++));return o}}),Ke({global:!0,forced:!wp},{DataView:pf.DataView});var Hf=Lf.NATIVE_ARRAY_BUFFER_VIEWS,Gf=c.ArrayBuffer,qf=c.Int8Array,Kf=!Hf||!l((function(){qf(1)}))||!l((function(){new qf(-1)}))||!Jn((function(e){new qf,new qf(null),new qf(1.5),new qf(e)}),!0)||l((function(){return 1!==new qf(new Gf(2),1,void 0).length})),Xf=function(e){var t=ke(e);if(t<0)throw RangeError("The argument can't be less than 0");return t},Qf=function(e,t){var n=Xf(e);if(n%t)throw RangeError("Wrong offset");return n},Yf=Lf.aTypedArrayConstructor,$f=function(e){var t,n,r,a,o,i,s=$e(e),u=arguments.length,c=u>1?arguments[1]:void 0,l=void 0!==c,d=Wn(s);if(null!=d&&!On(d))for(i=(o=d.call(s)).next,s=[];!(a=i.call(o)).done;)s.push(a.value);for(l&&u>2&&(c=_t(c,arguments[2],2)),n=Ie(s.length),r=new(Yf(this))(n),t=0;n>t;t++)r[t]=l?c(s[t],t):s[t];return r},Zf=i((function(e){var t=Me.f,n=Dt.forEach,r=he.get,a=he.set,o=L.f,i=M.f,s=Math.round,u=c.RangeError,l=pf.ArrayBuffer,p=pf.DataView,f=Lf.NATIVE_ARRAY_BUFFER_VIEWS,h=Lf.TYPED_ARRAY_TAG,m=Lf.TypedArray,g=Lf.TypedArrayPrototype,y=Lf.aTypedArrayConstructor,b=Lf.isTypedArray,x="BYTES_PER_ELEMENT",k="Wrong length",w=function(e,t){for(var n=0,r=t.length,a=new(y(e))(r);r>n;)a[n]=t[n++];return a},I=function(e,t){o(e,t,{get:function(){return r(this)[t]}})},E=function(e){var t;return e instanceof l||"ArrayBuffer"==(t=Un(e))||"SharedArrayBuffer"==t},N=function(e,t){return b(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},A=function(e,t){return N(e,t=S(t,!0))?v(2,e[t]):i(e,t)},_=function(e,t,n){return!(N(e,t=S(t,!0))&&C(n)&&T(n,"value"))||T(n,"get")||T(n,"set")||n.configurable||T(n,"writable")&&!n.writable||T(n,"enumerable")&&!n.enumerable?o(e,t,n):(e[t]=n.value,e)};d?(f||(M.f=A,L.f=_,I(g,"buffer"),I(g,"byteOffset"),I(g,"byteLength"),I(g,"length")),Ke({target:"Object",stat:!0,forced:!f},{getOwnPropertyDescriptor:A,defineProperty:_}),e.exports=function(e,i,d){var v=e.match(/\d+$/)[0]/8,y=e+(d?"Clamped":"")+"Array",I="get"+e,S="set"+e,T=c[y],N=T,A=N&&N.prototype,_={},R=function(e,t){o(e,t,{get:function(){return function(e,t){var n=r(e);return n.view[I](t*v+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var a=r(e);d&&(n=(n=s(n))<0?0:n>255?255:255&n),a.view[S](t*v+a.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};f?Kf&&(N=i((function(e,t,n,r){return Bl(e,N,y),ou(C(t)?E(t)?void 0!==r?new T(t,Qf(n,v),r):void 0!==n?new T(t,Qf(n,v)):new T(t):b(t)?w(N,t):$f.call(N,t):new T(Ip(t)),e,N)})),Nn&&Nn(N,m),n(t(T),(function(e){e in N||U(N,e,T[e])})),N.prototype=A):(N=i((function(e,t,n,r){Bl(e,N,y);var o,i,s,c=0,d=0;if(C(t)){if(!E(t))return b(t)?w(N,t):$f.call(N,t);o=t,d=Qf(n,v);var f=t.byteLength;if(void 0===r){if(f%v)throw u(k);if((i=f-d)<0)throw u(k)}else if((i=Ie(r)*v)+d>f)throw u(k);s=i/v}else s=Ip(t),o=new l(i=s*v);for(a(e,{buffer:o,byteOffset:d,byteLength:i,length:s,view:new p(o)});c<s;)R(e,c++)})),Nn&&Nn(N,m),A=N.prototype=dt(g)),A.constructor!==N&&U(A,"constructor",N),h&&U(A,h,y),_[y]=N,Ke({global:!0,forced:N!=T,sham:!f},_),x in N||U(N,x,v),x in A||U(A,x,v),Qa(y)}):e.exports=function(){}}));Zf("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zf("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zf("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0),Zf("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zf("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zf("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zf("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zf("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Zf("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var Jf=Lf.exportTypedArrayStaticMethod;Jf("from",$f,Kf);var eh=Lf.aTypedArrayConstructor,th=Lf.exportTypedArrayStaticMethod;th("of",(function(){for(var e=0,t=arguments.length,n=new(eh(this))(t);t>e;)n[e]=arguments[e++];return n}),Kf);var nh=Lf.aTypedArray,rh=Lf.exportTypedArrayMethod;rh("copyWithin",(function(e,t){return br.call(nh(this),e,t,arguments.length>2?arguments[2]:void 0)}));var ah=Dt.every,oh=Lf.aTypedArray,ih=Lf.exportTypedArrayMethod;ih("every",(function(e){return ah(oh(this),e,arguments.length>1?arguments[1]:void 0)}));var sh=Lf.aTypedArray,uh=Lf.exportTypedArrayMethod;uh("fill",(function(e){return Rr.apply(sh(this),arguments)}));var ch=Dt.filter,lh=Lf.aTypedArray,dh=Lf.aTypedArrayConstructor,ph=Lf.exportTypedArrayMethod;ph("filter",(function(e){for(var t=ch(lh(this),e,arguments.length>1?arguments[1]:void 0),n=es(this,this.constructor),r=0,a=t.length,o=new(dh(n))(a);a>r;)o[r]=t[r++];return o}));var fh=Dt.find,hh=Lf.aTypedArray,mh=Lf.exportTypedArrayMethod;mh("find",(function(e){return fh(hh(this),e,arguments.length>1?arguments[1]:void 0)}));var gh=Dt.findIndex,vh=Lf.aTypedArray,yh=Lf.exportTypedArrayMethod;yh("findIndex",(function(e){return gh(vh(this),e,arguments.length>1?arguments[1]:void 0)}));var bh=Dt.forEach,xh=Lf.aTypedArray,kh=Lf.exportTypedArrayMethod;kh("forEach",(function(e){bh(xh(this),e,arguments.length>1?arguments[1]:void 0)}));var wh=Ne.includes,Ih=Lf.aTypedArray,Ch=Lf.exportTypedArrayMethod;Ch("includes",(function(e){return wh(Ih(this),e,arguments.length>1?arguments[1]:void 0)}));var Sh=Ne.indexOf,Eh=Lf.aTypedArray,Th=Lf.exportTypedArrayMethod;Th("indexOf",(function(e){return Sh(Eh(this),e,arguments.length>1?arguments[1]:void 0)}));var Nh=kt("iterator"),Ah=c.Uint8Array,_h=yo.values,Rh=yo.keys,Oh=yo.entries,Fh=Lf.aTypedArray,Mh=Lf.exportTypedArrayMethod,Dh=Ah&&Ah.prototype[Nh],Bh=!!Dh&&("values"==Dh.name||null==Dh.name),Ph=function(){return _h.call(Fh(this))};Mh("entries",(function(){return Oh.call(Fh(this))})),Mh("keys",(function(){return Rh.call(Fh(this))})),Mh("values",Ph,!Bh),Mh(Nh,Ph,!Bh);var Lh=Lf.aTypedArray,Uh=Lf.exportTypedArrayMethod,Vh=[].join;Uh("join",(function(e){return Vh.apply(Lh(this),arguments)}));var Wh=Lf.aTypedArray,zh=Lf.exportTypedArrayMethod;zh("lastIndexOf",(function(e){return da.apply(Wh(this),arguments)}));var jh=Dt.map,Hh=Lf.aTypedArray,Gh=Lf.aTypedArrayConstructor,qh=Lf.exportTypedArrayMethod;qh("map",(function(e){return jh(Hh(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(Gh(es(e,e.constructor)))(t)}))}));var Kh=ga.left,Xh=Lf.aTypedArray,Qh=Lf.exportTypedArrayMethod;Qh("reduce",(function(e){return Kh(Xh(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Yh=ga.right,$h=Lf.aTypedArray,Zh=Lf.exportTypedArrayMethod;Zh("reduceRight",(function(e){return Yh($h(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Jh=Lf.aTypedArray,em=Lf.exportTypedArrayMethod,tm=Math.floor;em("reverse",(function(){for(var e,t=this,n=Jh(t).length,r=tm(n/2),a=0;a<r;)e=t[a],t[a++]=t[--n],t[n]=e;return t}));var nm=Lf.aTypedArray,rm=Lf.exportTypedArrayMethod,am=l((function(){new Int8Array(1).set({})}));rm("set",(function(e){nm(this);var t=Qf(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=$e(e),a=Ie(r.length),o=0;if(a+t>n)throw RangeError("Wrong length");for(;o<a;)this[t+o]=r[o++]}),am);var om=Lf.aTypedArray,im=Lf.aTypedArrayConstructor,sm=Lf.exportTypedArrayMethod,um=[].slice,cm=l((function(){new Int8Array(1).slice()}));sm("slice",(function(e,t){for(var n=um.call(om(this),e,t),r=es(this,this.constructor),a=0,o=n.length,i=new(im(r))(o);o>a;)i[a]=n[a++];return i}),cm);var lm=Dt.some,dm=Lf.aTypedArray,pm=Lf.exportTypedArrayMethod;pm("some",(function(e){return lm(dm(this),e,arguments.length>1?arguments[1]:void 0)}));var fm=Lf.aTypedArray,hm=Lf.exportTypedArrayMethod,mm=[].sort;hm("sort",(function(e){return mm.call(fm(this),e)}));var gm=Lf.aTypedArray,vm=Lf.exportTypedArrayMethod;vm("subarray",(function(e,t){var n=gm(this),r=n.length,a=Ee(e,r);return new(es(n,n.constructor))(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,Ie((void 0===t?r:Ee(t,r))-a))}));var ym=c.Int8Array,bm=Lf.aTypedArray,xm=Lf.exportTypedArrayMethod,km=[].toLocaleString,wm=[].slice,Im=!!ym&&l((function(){km.call(new ym(1))})),Cm=l((function(){return[1,2].toLocaleString()!=new ym([1,2]).toLocaleString()}))||!l((function(){ym.prototype.toLocaleString.call([1,2])}));xm("toLocaleString",(function(){return km.apply(Im?wm.call(bm(this)):bm(this),arguments)}),Cm);var Sm=Lf.exportTypedArrayMethod,Em=c.Uint8Array,Tm=Em&&Em.prototype||{},Nm=[].toString,Am=[].join;l((function(){Nm.call({})}))&&(Nm=function(){return Am.call(this)});var _m=Tm.toString!=Nm;Sm("toString",Nm,_m);var Rm=ye("Reflect","apply"),Om=Function.apply,Fm=!l((function(){Rm((function(){}))}));Ke({target:"Reflect",stat:!0,forced:Fm},{apply:function(e,t,n){return At(e),D(n),Rm?Rm(e,t,n):Om.call(e,t,n)}});var Mm=ye("Reflect","construct"),Dm=l((function(){function e(){}return!(Mm((function(){}),[],e)instanceof e)})),Bm=!l((function(){Mm((function(){}))})),Pm=Dm||Bm;Ke({target:"Reflect",stat:!0,forced:Pm,sham:Pm},{construct:function(e,t){At(e),D(t);var n=arguments.length<3?e:At(arguments[2]);if(Bm&&!Dm)return Mm(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(wo.apply(e,r))}var a=n.prototype,o=dt(C(a)?a:Object.prototype),i=Function.apply.call(e,o,t);return C(i)?i:o}});var Lm=l((function(){Reflect.defineProperty(L.f({},1,{value:1}),1,{value:2})}));Ke({target:"Reflect",stat:!0,forced:Lm,sham:!d},{defineProperty:function(e,t,n){D(e);var r=S(t,!0);D(n);try{return L.f(e,r,n),!0}catch(e){return!1}}});var Um=M.f;function Vm(e,t){var n,r,a=arguments.length<3?e:arguments[2];return D(e)===a?e[t]:(n=M.f(e,t))?T(n,"value")?n.value:void 0===n.get?void 0:n.get.call(a):C(r=En(e))?Vm(r,t,a):void 0}Ke({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=Um(D(e),t);return!(n&&!n.configurable)&&delete e[t]}}),Ke({target:"Reflect",stat:!0},{get:Vm}),Ke({target:"Reflect",stat:!0,sham:!d},{getOwnPropertyDescriptor:function(e,t){return M.f(D(e),t)}}),Ke({target:"Reflect",stat:!0,sham:!In},{getPrototypeOf:function(e){return En(D(e))}}),Ke({target:"Reflect",stat:!0},{has:function(e,t){return t in e}});var Wm=Object.isExtensible;function zm(e,t,n){var r,a,o=arguments.length<4?e:arguments[3],i=M.f(D(e),t);if(!i){if(C(a=En(e)))return zm(a,t,n,o);i=v(0)}if(T(i,"value")){if(!1===i.writable||!C(o))return!1;if(r=M.f(o,t)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,L.f(o,t,r)}else L.f(o,t,v(0,n));return!0}return void 0!==i.set&&(i.set.call(o,n),!0)}Ke({target:"Reflect",stat:!0},{isExtensible:function(e){return D(e),!Wm||Wm(e)}}),Ke({target:"Reflect",stat:!0},{ownKeys:Pe}),Ke({target:"Reflect",stat:!0,sham:!Po},{preventExtensions:function(e){D(e);try{var t=ye("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}});var jm=l((function(){var e=function(){},t=L.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}));Ke({target:"Reflect",stat:!0,forced:jm},{set:zm}),Nn&&Ke({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){D(e),Tn(t);try{return Nn(e,t),!0}catch(e){return!1}}}),Ke({global:!0},{Reflect:{}}),Nt(c.Reflect,"Reflect",!0);var Hm={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Gm in Hm){var qm=c[Gm],Km=qm&&qm.prototype;if(Km&&Km.forEach!==Xr)try{U(Km,"forEach",Xr)}catch(e){Km.forEach=Xr}}var Xm=kt("iterator"),Qm=kt("toStringTag"),Ym=yo.values;for(var $m in Hm){var Zm=c[$m],Jm=Zm&&Zm.prototype;if(Jm){if(Jm[Xm]!==Ym)try{U(Jm,Xm,Ym)}catch(e){Jm[Xm]=Ym}if(Jm[Qm]||U(Jm,Qm,$m),Hm[$m])for(var eg in yo)if(Jm[eg]!==yo[eg])try{U(Jm,eg,yo[eg])}catch(e){Jm[eg]=yo[eg]}}}var tg=!c.setImmediate||!c.clearImmediate;Ke({global:!0,bind:!0,enumerable:!0,forced:tg},{setImmediate:od.set,clearImmediate:od.clear});var ng=c.process;Ke({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=va&&ng.domain;yd(t?t.bind(e):e)}});var rg=[].slice,ag=/MSIE .\./.test(ar),og=function(e){return function(t,n){var r=arguments.length>2,a=r?rg.call(arguments,2):void 0;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,a)}:t,n)}};Ke({global:!0,bind:!0,forced:ag},{setTimeout:og(c.setTimeout),setInterval:og(c.setInterval)});var ig=kt("iterator"),sg=!l((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),$&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[ig]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),ug=2147483647,cg=36,lg=1,dg=26,pg=38,fg=700,hg=72,mg=128,gg="-",vg=/[^\0-\u007E]/,yg=/[.\u3002\uFF0E\uFF61]/g,bg="Overflow: input needs wider integers to process",xg=cg-lg,kg=Math.floor,wg=String.fromCharCode,Ig=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&a)<<10)+(1023&o)+65536):(t.push(a),n--)}else t.push(a)}return t},Cg=function(e){return e+22+75*(e<26)},Sg=function(e,t,n){var r=0;for(e=n?kg(e/fg):e>>1,e+=kg(e/t);e>xg*dg>>1;r+=cg)e=kg(e/xg);return kg(r+(xg+1)*e/(e+pg))},Eg=function(e){var t,n,r=[],a=(e=Ig(e)).length,o=mg,i=0,s=hg;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(wg(n));var u=r.length,c=u;for(u&&r.push(gg);c<a;){var l=ug;for(t=0;t<e.length;t++)(n=e[t])>=o&&n<l&&(l=n);var d=c+1;if(l-o>kg((ug-i)/d))throw RangeError(bg);for(i+=(l-o)*d,o=l,t=0;t<e.length;t++){if((n=e[t])<o&&++i>ug)throw RangeError(bg);if(n==o){for(var p=i,f=cg;;f+=cg){var h=f<=s?lg:f>=s+dg?dg:f-s;if(p<h)break;var m=p-h,g=cg-h;r.push(wg(Cg(h+m%g))),p=kg(m/g)}r.push(wg(Cg(p))),s=Sg(i,d,c==u),i=0,++c}}++i,++o}return r.join("")},Tg=function(e){var t,n,r=[],a=e.toLowerCase().replace(yg,".").split(".");for(t=0;t<a.length;t++)n=a[t],r.push(vg.test(n)?"xn--"+Eg(n):n);return r.join(".")},Ng=function(e){var t=Wn(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return D(t.call(e))},Ag=ye("fetch"),_g=ye("Headers"),Rg=kt("iterator"),Og="URLSearchParams",Fg=Og+"Iterator",Mg=he.set,Dg=he.getterFor(Og),Bg=he.getterFor(Fg),Pg=/\+/g,Lg=Array(4),Ug=function(e){return Lg[e-1]||(Lg[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},Vg=function(e){try{return decodeURIComponent(e)}catch(t){return e}},Wg=function(e){var t=e.replace(Pg," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(Ug(n--),Vg);return t}},zg=/[!'()~]|%20/g,jg={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Hg=function(e){return jg[e]},Gg=function(e){return encodeURIComponent(e).replace(zg,Hg)},qg=function(e,t){if(t)for(var n,r,a=t.split("&"),o=0;o<a.length;)(n=a[o++]).length&&(r=n.split("="),e.push({key:Wg(r.shift()),value:Wg(r.join("="))}))},Kg=function(e){this.entries.length=0,qg(this.entries,e)},Xg=function(e,t){if(e<t)throw TypeError("Not enough arguments")},Qg=oo((function(e,t){Mg(this,{type:Fg,iterator:Ng(Dg(e).entries),kind:t})}),"Iterator",(function(){var e=Bg(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),Yg=function(){Bl(this,Yg,Og);var e,t,n,r,a,o,i,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(Mg(l,{type:Og,entries:d,updateURL:function(){},updateSearchParams:Kg}),void 0!==c)if(C(c))if("function"==typeof(e=Wn(c)))for(n=(t=e.call(c)).next;!(r=n.call(t)).done;){if((i=(o=(a=Ng(D(r.value))).next).call(a)).done||(s=o.call(a)).done||!o.call(a).done)throw TypeError("Expected sequence with length 2");d.push({key:i.value+"",value:s.value+""})}else for(u in c)T(c,u)&&d.push({key:u,value:c[u]+""});else qg(d,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},$g=Yg.prototype;Dl($g,{append:function(e,t){Xg(arguments.length,2);var n=Dg(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){Xg(arguments.length,1);for(var t=Dg(this),n=t.entries,r=e+"",a=0;a<n.length;)n[a].key===r?n.splice(a,1):a++;t.updateURL()},get:function(e){Xg(arguments.length,1);for(var t=Dg(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Xg(arguments.length,1);for(var t=Dg(this).entries,n=e+"",r=[],a=0;a<t.length;a++)t[a].key===n&&r.push(t[a].value);return r},has:function(e){Xg(arguments.length,1);for(var t=Dg(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Xg(arguments.length,1);for(var n,r=Dg(this),a=r.entries,o=!1,i=e+"",s=t+"",u=0;u<a.length;u++)(n=a[u]).key===i&&(o?a.splice(u--,1):(o=!0,n.value=s));o||a.push({key:i,value:s}),r.updateURL()},sort:function(){var e,t,n,r=Dg(this),a=r.entries,o=a.slice();for(a.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(a[t].key>e.key){a.splice(t,0,e);break}t===n&&a.push(e)}r.updateURL()},forEach:function(e){for(var t,n=Dg(this).entries,r=_t(e,arguments.length>1?arguments[1]:void 0,3),a=0;a<n.length;)r((t=n[a++]).value,t.key,this)},keys:function(){return new Qg(this,"keys")},values:function(){return new Qg(this,"values")},entries:function(){return new Qg(this,"entries")}},{enumerable:!0}),me($g,Rg,$g.entries),me($g,"toString",(function(){for(var e,t=Dg(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(Gg(e.key)+"="+Gg(e.value));return n.join("&")}),{enumerable:!0}),Nt(Yg,Og),Ke({global:!0,forced:!sg},{URLSearchParams:Yg}),sg||"function"!=typeof Ag||"function"!=typeof _g||Ke({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,a=[e];return arguments.length>1&&(C(t=arguments[1])&&(n=t.body,Un(n)===Og&&((r=t.headers?new _g(t.headers):new _g).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=dt(t,{body:v(0,String(n)),headers:v(0,r)}))),a.push(t)),Ag.apply(this,a)}});var Zg,Jg={URLSearchParams:Yg,getState:Dg},ev=vi.codeAt,tv=c.URL,nv=Jg.URLSearchParams,rv=Jg.getState,av=he.set,ov=he.getterFor("URL"),iv=Math.floor,sv=Math.pow,uv="Invalid authority",cv="Invalid scheme",lv="Invalid host",dv="Invalid port",pv=/[A-Za-z]/,fv=/[\d+-.A-Za-z]/,hv=/\d/,mv=/^(0x|0X)/,gv=/^[0-7]+$/,vv=/^\d+$/,yv=/^[\dA-Fa-f]+$/,bv=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,xv=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,kv=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,wv=/[\u0009\u000A\u000D]/g,Iv=function(e,t){var n,r,a;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return lv;if(!(n=Sv(t.slice(1,-1))))return lv;e.host=n}else if(Mv(e)){if(t=Tg(t),bv.test(t))return lv;if(null===(n=Cv(t)))return lv;e.host=n}else{if(xv.test(t))return lv;for(n="",r=Xn(t),a=0;a<r.length;a++)n+=Ov(r[a],Nv);e.host=n}},Cv=function(e){var t,n,r,a,o,i,s,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(a=u[r]))return e;if(o=10,a.length>1&&"0"==a.charAt(0)&&(o=mv.test(a)?16:8,a=a.slice(8==o?1:2)),""===a)i=0;else{if(!(10==o?vv:8==o?gv:yv).test(a))return e;i=parseInt(a,o)}n.push(i)}for(r=0;r<t;r++)if(i=n[r],r==t-1){if(i>=sv(256,5-t))return null}else if(i>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*sv(256,3-r);return s},Sv=function(e){var t,n,r,a,o,i,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,d=0,p=function(){return e.charAt(d)};if(":"==p()){if(":"!=e.charAt(1))return;d+=2,l=++c}for(;p();){if(8==c)return;if(":"!=p()){for(t=n=0;n<4&&yv.test(p());)t=16*t+parseInt(p(),16),d++,n++;if("."==p()){if(0==n)return;if(d-=n,c>6)return;for(r=0;p();){if(a=null,r>0){if(!("."==p()&&r<4))return;d++}if(!hv.test(p()))return;for(;hv.test(p());){if(o=parseInt(p(),10),null===a)a=o;else{if(0==a)return;a=10*a+o}if(a>255)return;d++}u[c]=256*u[c]+a,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==p()){if(d++,!p())return}else if(p())return;u[c++]=t}else{if(null!==l)return;d++,l=++c}}if(null!==l)for(i=c-l,c=7;0!=c&&i>0;)s=u[c],u[c--]=u[l+i-1],u[l+--i]=s;else if(8!=c)return;return u},Ev=function(e){for(var t=null,n=1,r=null,a=0,o=0;o<8;o++)0!==e[o]?(a>n&&(t=r,n=a),r=null,a=0):(null===r&&(r=o),++a);return a>n&&(t=r,n=a),t},Tv=function(e){var t,n,r,a;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=iv(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=Ev(e),n=0;n<8;n++)a&&0===e[n]||(a&&(a=!1),r===n?(t+=n?":":"::",a=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},Nv={},Av=Oo({},Nv,{" ":1,'"':1,"<":1,">":1,"`":1}),_v=Oo({},Av,{"#":1,"?":1,"{":1,"}":1}),Rv=Oo({},_v,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ov=function(e,t){var n=ev(e,0);return n>32&&n<127&&!T(t,e)?e:encodeURIComponent(e)},Fv={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Mv=function(e){return T(Fv,e.scheme)},Dv=function(e){return""!=e.username||""!=e.password},Bv=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Pv=function(e,t){var n;return 2==e.length&&pv.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},Lv=function(e){var t;return e.length>1&&Pv(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Uv=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Pv(t[0],!0)||t.pop()},Vv=function(e){return"."===e||"%2e"===e.toLowerCase()},Wv=function(e){return".."===(e=e.toLowerCase())||"%2e."===e||".%2e"===e||"%2e%2e"===e},zv={},jv={},Hv={},Gv={},qv={},Kv={},Xv={},Qv={},Yv={},$v={},Zv={},Jv={},ey={},ty={},ny={},ry={},ay={},oy={},iy={},sy={},uy={},cy=function(e,t,n,r){var a,o,i,s,u=n||zv,c=0,l="",d=!1,p=!1,f=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(kv,"")),t=t.replace(wv,""),a=Xn(t);c<=a.length;){switch(o=a[c],u){case zv:if(!o||!pv.test(o)){if(n)return cv;u=Hv;continue}l+=o.toLowerCase(),u=jv;break;case jv:if(o&&(fv.test(o)||"+"==o||"-"==o||"."==o))l+=o.toLowerCase();else{if(":"!=o){if(n)return cv;l="",u=Hv,c=0;continue}if(n&&(Mv(e)!=T(Fv,l)||"file"==l&&(Dv(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=l,n)return void(Mv(e)&&Fv[e.scheme]==e.port&&(e.port=null));l="","file"==e.scheme?u=ty:Mv(e)&&r&&r.scheme==e.scheme?u=Gv:Mv(e)?u=Qv:"/"==a[c+1]?(u=qv,c++):(e.cannotBeABaseURL=!0,e.path.push(""),u=iy)}break;case Hv:if(!r||r.cannotBeABaseURL&&"#"!=o)return cv;if(r.cannotBeABaseURL&&"#"==o){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,u=uy;break}u="file"==r.scheme?ty:Kv;continue;case Gv:if("/"!=o||"/"!=a[c+1]){u=Kv;continue}u=Yv,c++;break;case qv:if("/"==o){u=$v;break}u=oy;continue;case Kv:if(e.scheme=r.scheme,o==Zg)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==o||"\\"==o&&Mv(e))u=Xv;else if("?"==o)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",u=sy;else{if("#"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),u=oy;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",u=uy}break;case Xv:if(!Mv(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,u=oy;continue}u=$v}else u=Yv;break;case Qv:if(u=Yv,"/"!=o||"/"!=l.charAt(c+1))continue;c++;break;case Yv:if("/"!=o&&"\\"!=o){u=$v;continue}break;case $v:if("@"==o){d&&(l="%40"+l),d=!0,i=Xn(l);for(var h=0;h<i.length;h++){var m=i[h];if(":"!=m||f){var g=Ov(m,Rv);f?e.password+=g:e.username+=g}else f=!0}l=""}else if(o==Zg||"/"==o||"?"==o||"#"==o||"\\"==o&&Mv(e)){if(d&&""==l)return uv;c-=Xn(l).length+1,l="",u=Zv}else l+=o;break;case Zv:case Jv:if(n&&"file"==e.scheme){u=ry;continue}if(":"!=o||p){if(o==Zg||"/"==o||"?"==o||"#"==o||"\\"==o&&Mv(e)){if(Mv(e)&&""==l)return lv;if(n&&""==l&&(Dv(e)||null!==e.port))return;if(s=Iv(e,l))return s;if(l="",u=ay,n)return;continue}"["==o?p=!0:"]"==o&&(p=!1),l+=o}else{if(""==l)return lv;if(s=Iv(e,l))return s;if(l="",u=ey,n==Jv)return}break;case ey:if(!hv.test(o)){if(o==Zg||"/"==o||"?"==o||"#"==o||"\\"==o&&Mv(e)||n){if(""!=l){var v=parseInt(l,10);if(v>65535)return dv;e.port=Mv(e)&&v===Fv[e.scheme]?null:v,l=""}if(n)return;u=ay;continue}return dv}l+=o;break;case ty:if(e.scheme="file","/"==o||"\\"==o)u=ny;else{if(!r||"file"!=r.scheme){u=oy;continue}if(o==Zg)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==o)e.host=r.host,e.path=r.path.slice(),e.query="",u=sy;else{if("#"!=o){Lv(a.slice(c).join(""))||(e.host=r.host,e.path=r.path.slice(),Uv(e)),u=oy;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",u=uy}}break;case ny:if("/"==o||"\\"==o){u=ry;break}r&&"file"==r.scheme&&!Lv(a.slice(c).join(""))&&(Pv(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),u=oy;continue;case ry:if(o==Zg||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&Pv(l))u=oy;else if(""==l){if(e.host="",n)return;u=ay}else{if(s=Iv(e,l))return s;if("localhost"==e.host&&(e.host=""),n)return;l="",u=ay}continue}l+=o;break;case ay:if(Mv(e)){if(u=oy,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=Zg&&(u=oy,"/"!=o))continue}else e.fragment="",u=uy;else e.query="",u=sy;break;case oy:if(o==Zg||"/"==o||"\\"==o&&Mv(e)||!n&&("?"==o||"#"==o)){if(Wv(l)?(Uv(e),"/"==o||"\\"==o&&Mv(e)||e.path.push("")):Vv(l)?"/"==o||"\\"==o&&Mv(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Pv(l)&&(e.host&&(e.host=""),l=l.charAt(0)+":"),e.path.push(l)),l="","file"==e.scheme&&(o==Zg||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",u=sy):"#"==o&&(e.fragment="",u=uy)}else l+=Ov(o,_v);break;case iy:"?"==o?(e.query="",u=sy):"#"==o?(e.fragment="",u=uy):o!=Zg&&(e.path[0]+=Ov(o,Nv));break;case sy:n||"#"!=o?o!=Zg&&("'"==o&&Mv(e)?e.query+="%27":e.query+="#"==o?"%23":Ov(o,Nv)):(e.fragment="",u=uy);break;case uy:o!=Zg&&(e.fragment+=Ov(o,Av))}c++}},ly=function(e){var t,n,r=Bl(this,ly,"URL"),a=arguments.length>1?arguments[1]:void 0,o=String(e),i=av(r,{type:"URL"});if(void 0!==a)if(a instanceof ly)t=ov(a);else if(n=cy(t={},String(a)))throw TypeError(n);if(n=cy(i,o,null,t))throw TypeError(n);var s=i.searchParams=new nv,u=rv(s);u.updateSearchParams(i.query),u.updateURL=function(){i.query=String(s)||null},d||(r.href=py.call(r),r.origin=fy.call(r),r.protocol=hy.call(r),r.username=my.call(r),r.password=gy.call(r),r.host=vy.call(r),r.hostname=yy.call(r),r.port=by.call(r),r.pathname=xy.call(r),r.search=ky.call(r),r.searchParams=wy.call(r),r.hash=Iy.call(r))},dy=ly.prototype,py=function(){var e=ov(this),t=e.scheme,n=e.username,r=e.password,a=e.host,o=e.port,i=e.path,s=e.query,u=e.fragment,c=t+":";return null!==a?(c+="//",Dv(e)&&(c+=n+(r?":"+r:"")+"@"),c+=Tv(a),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?i[0]:i.length?"/"+i.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},fy=function(){var e=ov(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Mv(e)?t+"://"+Tv(e.host)+(null!==n?":"+n:""):"null"},hy=function(){return ov(this).scheme+":"},my=function(){return ov(this).username},gy=function(){return ov(this).password},vy=function(){var e=ov(this),t=e.host,n=e.port;return null===t?"":null===n?Tv(t):Tv(t)+":"+n},yy=function(){var e=ov(this).host;return null===e?"":Tv(e)},by=function(){var e=ov(this).port;return null===e?"":String(e)},xy=function(){var e=ov(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},ky=function(){var e=ov(this).query;return e?"?"+e:""},wy=function(){return ov(this).searchParams},Iy=function(){var e=ov(this).fragment;return e?"#"+e:""},Cy=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(d&&Je(dy,{href:Cy(py,(function(e){var t=ov(this),n=String(e),r=cy(t,n);if(r)throw TypeError(r);rv(t.searchParams).updateSearchParams(t.query)})),origin:Cy(fy),protocol:Cy(hy,(function(e){var t=ov(this);cy(t,String(e)+":",zv)})),username:Cy(my,(function(e){var t=ov(this),n=Xn(String(e));if(!Bv(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=Ov(n[r],Rv)}})),password:Cy(gy,(function(e){var t=ov(this),n=Xn(String(e));if(!Bv(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=Ov(n[r],Rv)}})),host:Cy(vy,(function(e){var t=ov(this);t.cannotBeABaseURL||cy(t,String(e),Zv)})),hostname:Cy(yy,(function(e){var t=ov(this);t.cannotBeABaseURL||cy(t,String(e),Jv)})),port:Cy(by,(function(e){var t=ov(this);Bv(t)||(""==(e=String(e))?t.port=null:cy(t,e,ey))})),pathname:Cy(xy,(function(e){var t=ov(this);t.cannotBeABaseURL||(t.path=[],cy(t,e+"",ay))})),search:Cy(ky,(function(e){var t=ov(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",cy(t,e,sy)),rv(t.searchParams).updateSearchParams(t.query)})),searchParams:Cy(wy),hash:Cy(Iy,(function(e){var t=ov(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",cy(t,e,uy)):t.fragment=null}))}),me(dy,"toJSON",(function(){return py.call(this)}),{enumerable:!0}),me(dy,"toString",(function(){return py.call(this)}),{enumerable:!0}),tv){var Sy=tv.createObjectURL,Ey=tv.revokeObjectURL;Sy&&me(ly,"createObjectURL",(function(e){return Sy.apply(tv,arguments)})),Ey&&me(ly,"revokeObjectURL",(function(e){return Ey.apply(tv,arguments)}))}Nt(ly,"URL"),Ke({global:!0,forced:!sg,sham:!d},{URL:ly}),Ke({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});i((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),i=new N(r||[]);return o._invoke=function(e,t,n){var r=d;return function(a,o){if(r===f)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw o;return _()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=S(i,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?h:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,i),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",m={};function g(){}function v(){}function y(){}var b={};b[o]=function(){return this};var x=Object.getPrototypeOf,k=x&&x(x(A([])));k&&k!==n&&r.call(k,o)&&(b=k);var w=y.prototype=g.prototype=Object.create(b);function I(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(a,o,i,s){var u=l(e[a],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(d).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,s)}))}s(u.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function A(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:_}}function _(){return{value:t,done:!0}}return v.prototype=w.constructor=y,y.constructor=v,v.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},I(C.prototype),C.prototype[i]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new C(c(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},I(w),u(w,s,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function Ty(e){return(Ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ny(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function Ay(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ny(o,r,a,i,s,"next",e)}function s(e){Ny(o,r,a,i,s,"throw",e)}i(void 0)}))}}function _y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ry(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oy(e,t,n){return t&&Ry(e.prototype,t),n&&Ry(e,n),e}function Fy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function My(){return(My=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dy(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Py(e,t)}function By(e){return(By=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Py(e,t){return(Py=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ly(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Uy(e,t,n){return(Uy=Ly()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Py(a,n.prototype),a}).apply(null,arguments)}function Vy(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Wy(e,t){if(null==e)return{};var n,r,a=Vy(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function zy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jy(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?zy(e):t}function Hy(e){var t=Ly();return function(){var n,r=By(e);if(t){var a=By(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return jy(this,n)}}function Gy(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=By(e)););return e}function qy(e,t,n){return(qy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Gy(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function Ky(e,t){return Yy(e)||Zy(e,t)||Jy(e,t)||nb()}function Xy(e){return Qy(e)||$y(e)||Jy(e)||tb()}function Qy(e){if(Array.isArray(e))return eb(e)}function Yy(e){if(Array.isArray(e))return e}function $y(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Zy(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}function Jy(e,t){if(e){if("string"==typeof e)return eb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eb(e,t):void 0}}function eb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rb(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Jy(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}
/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/var ab=Object.getOwnPropertySymbols,ob=Object.prototype.hasOwnProperty,ib=Object.prototype.propertyIsEnumerable;function sb(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function ub(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}var cb=ub()?Object.assign:function(e,t){for(var n,r,a=sb(e),o=1;o<arguments.length;o++){for(var i in n=Object(arguments[o]))ob.call(n,i)&&(a[i]=n[i]);if(ab){r=ab(n);for(var s=0;s<r.length;s++)ib.call(n,r[s])&&(a[r[s]]=n[r[s]])}}return a},lb="function"==typeof Symbol&&Symbol.for,db=lb?Symbol.for("react.element"):60103,pb=lb?Symbol.for("react.portal"):60106,fb=lb?Symbol.for("react.fragment"):60107,hb=lb?Symbol.for("react.strict_mode"):60108,mb=lb?Symbol.for("react.profiler"):60114,gb=lb?Symbol.for("react.provider"):60109,vb=lb?Symbol.for("react.context"):60110,yb=lb?Symbol.for("react.forward_ref"):60112,bb=lb?Symbol.for("react.suspense"):60113,xb=lb?Symbol.for("react.memo"):60115,kb=lb?Symbol.for("react.lazy"):60116,wb="function"==typeof Symbol&&Symbol.iterator;function Ib(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sb={};function Eb(e,t,n){this.props=e,this.context=t,this.refs=Sb,this.updater=n||Cb}function Tb(){}function Nb(e,t,n){this.props=e,this.context=t,this.refs=Sb,this.updater=n||Cb}Eb.prototype.isReactComponent={},Eb.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(Ib(85));this.updater.enqueueSetState(this,e,t,"setState")},Eb.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},Tb.prototype=Eb.prototype;var Ab=Nb.prototype=new Tb;Ab.constructor=Nb,cb(Ab,Eb.prototype),Ab.isPureReactComponent=!0;var _b={current:null},Rb=Object.prototype.hasOwnProperty,Ob={key:!0,ref:!0,__self:!0,__source:!0};function Fb(e,t,n){var r,a={},o=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(o=""+t.key),t)Rb.call(t,r)&&!Ob.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:db,type:e,key:o,ref:i,props:a,_owner:_b.current}}function Mb(e,t){return{$$typeof:db,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Db(e){return"object"==typeof e&&null!==e&&e.$$typeof===db}function Bb(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}var Pb=/\/+/g,Lb=[];function Ub(e,t,n,r){if(Lb.length){var a=Lb.pop();return a.result=e,a.keyPrefix=t,a.func=n,a.context=r,a.count=0,a}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function Vb(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>Lb.length&&Lb.push(e)}function Wb(e,t,n,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var o=!1;if(null===e)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case db:case pb:o=!0}}if(o)return n(r,e,""===t?"."+jb(e,0):t),1;if(o=0,t=""===t?".":t+":",Array.isArray(e))for(var i=0;i<e.length;i++){var s=t+jb(a=e[i],i);o+=Wb(a,s,n,r)}else if(null===e||"object"!=typeof e?s=null:s="function"==typeof(s=wb&&e[wb]||e["@@iterator"])?s:null,"function"==typeof s)for(e=s.call(e),i=0;!(a=e.next()).done;)o+=Wb(a=a.value,s=t+jb(a,i++),n,r);else if("object"===a)throw n=""+e,Error(Ib(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return o}function zb(e,t,n){return null==e?0:Wb(e,"",t,n)}function jb(e,t){return"object"==typeof e&&null!==e&&null!=e.key?Bb(e.key):t.toString(36)}function Hb(e,t){e.func.call(e.context,t,e.count++)}function Gb(e,t,n){var r=e.result,a=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?qb(e,r,n,(function(e){return e})):null!=e&&(Db(e)&&(e=Mb(e,a+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(Pb,"$&/")+"/")+n)),r.push(e))}function qb(e,t,n,r,a){var o="";null!=n&&(o=(""+n).replace(Pb,"$&/")+"/"),zb(e,Gb,t=Ub(t,o,r,a)),Vb(t)}var Kb={current:null};function Xb(){var e=Kb.current;if(null===e)throw Error(Ib(321));return e}var Qb={ReactCurrentDispatcher:Kb,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:_b,IsSomeRendererActing:{current:!1},assign:cb},Yb={map:function(e,t,n){if(null==e)return e;var r=[];return qb(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;zb(e,Hb,t=Ub(null,null,t,n)),Vb(t)},count:function(e){return zb(e,(function(){return null}),null)},toArray:function(e){var t=[];return qb(e,t,null,(function(e){return e})),t},only:function(e){if(!Db(e))throw Error(Ib(143));return e}},$b=Eb,Zb=fb,Jb=mb,ex=Nb,tx=hb,nx=bb,rx=Qb,ax=function(e,t,n){if(null==e)throw Error(Ib(267,e));var r=cb({},e.props),a=e.key,o=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,i=_b.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)Rb.call(t,u)&&!Ob.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var c=0;c<u;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:db,type:e.type,key:a,ref:o,props:r,_owner:i}},ox=function(e,t){return void 0===t&&(t=null),(e={$$typeof:vb,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:gb,_context:e},e.Consumer=e},ix=Fb,sx=function(e){var t=Fb.bind(null,e);return t.type=e,t},ux=function(){return{current:null}},cx=function(e){return{$$typeof:yb,render:e}},lx=Db,dx=function(e){return{$$typeof:kb,_ctor:e,_status:-1,_result:null}},px=function(e,t){return{$$typeof:xb,type:e,compare:void 0===t?null:t}},fx=function(e,t){return Xb().useCallback(e,t)},hx=function(e,t){return Xb().useContext(e,t)},mx=function(){},gx=function(e,t){return Xb().useEffect(e,t)},vx=function(e,t,n){return Xb().useImperativeHandle(e,t,n)},yx=function(e,t){return Xb().useLayoutEffect(e,t)},bx=function(e,t){return Xb().useMemo(e,t)},xx=function(e,t,n){return Xb().useReducer(e,t,n)},kx=function(e){return Xb().useRef(e)},wx=function(e){return Xb().useState(e)},Ix="16.14.0",Cx={Children:Yb,Component:$b,Fragment:Zb,Profiler:Jb,PureComponent:ex,StrictMode:tx,Suspense:nx,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:rx,cloneElement:ax,createContext:ox,createElement:ix,createFactory:sx,createRef:ux,forwardRef:cx,isValidElement:lx,lazy:dx,memo:px,useCallback:fx,useContext:hx,useDebugValue:mx,useEffect:gx,useImperativeHandle:vx,useLayoutEffect:yx,useMemo:bx,useReducer:xx,useRef:kx,useState:wx,version:Ix},Sx="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ex=Sx,Tx=(i((function(e,t){})),i((function(e){e.exports=Cx}))),Nx="function"==typeof Symbol&&Symbol.for,Ax=Nx?Symbol.for("react.element"):60103,_x=Nx?Symbol.for("react.portal"):60106,Rx=Nx?Symbol.for("react.fragment"):60107,Ox=Nx?Symbol.for("react.strict_mode"):60108,Fx=Nx?Symbol.for("react.profiler"):60114,Mx=Nx?Symbol.for("react.provider"):60109,Dx=Nx?Symbol.for("react.context"):60110,Bx=Nx?Symbol.for("react.async_mode"):60111,Px=Nx?Symbol.for("react.concurrent_mode"):60111,Lx=Nx?Symbol.for("react.forward_ref"):60112,Ux=Nx?Symbol.for("react.suspense"):60113,Vx=Nx?Symbol.for("react.suspense_list"):60120,Wx=Nx?Symbol.for("react.memo"):60115,zx=Nx?Symbol.for("react.lazy"):60116,jx=Nx?Symbol.for("react.block"):60121,Hx=Nx?Symbol.for("react.fundamental"):60117,Gx=Nx?Symbol.for("react.responder"):60118,qx=Nx?Symbol.for("react.scope"):60119;function Kx(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Ax:switch(e=e.type){case Bx:case Px:case Rx:case Fx:case Ox:case Ux:return e;default:switch(e=e&&e.$$typeof){case Dx:case Lx:case zx:case Wx:case Mx:return e;default:return t}}case _x:return t}}}function Xx(e){return Kx(e)===Px}var Qx=Bx,Yx=Px,$x=Dx,Zx=Mx,Jx=Ax,ek=Lx,tk=Rx,nk=zx,rk=Wx,ak=_x,ok=Fx,ik=Ox,sk=Ux,uk=function(e){return Xx(e)||Kx(e)===Bx},ck=Xx,lk=function(e){return Kx(e)===Dx},dk=function(e){return Kx(e)===Mx},pk=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Ax},fk=function(e){return Kx(e)===Lx},hk=function(e){return Kx(e)===Rx},mk=function(e){return Kx(e)===zx},gk=function(e){return Kx(e)===Wx},vk=function(e){return Kx(e)===_x},yk=function(e){return Kx(e)===Fx},bk=function(e){return Kx(e)===Ox},xk=function(e){return Kx(e)===Ux},kk=function(e){return"string"==typeof e||"function"==typeof e||e===Rx||e===Px||e===Fx||e===Ox||e===Ux||e===Vx||"object"==typeof e&&null!==e&&(e.$$typeof===zx||e.$$typeof===Wx||e.$$typeof===Mx||e.$$typeof===Dx||e.$$typeof===Lx||e.$$typeof===Hx||e.$$typeof===Gx||e.$$typeof===qx||e.$$typeof===jx)},wk=Kx,Ik={AsyncMode:Qx,ConcurrentMode:Yx,ContextConsumer:$x,ContextProvider:Zx,Element:Jx,ForwardRef:ek,Fragment:tk,Lazy:nk,Memo:rk,Portal:ak,Profiler:ok,StrictMode:ik,Suspense:sk,isAsyncMode:uk,isConcurrentMode:ck,isContextConsumer:lk,isContextProvider:dk,isElement:pk,isForwardRef:fk,isFragment:hk,isLazy:mk,isMemo:gk,isPortal:vk,isProfiler:yk,isStrictMode:bk,isSuspense:xk,isValidElementType:kk,typeOf:wk};i((function(e,t){})),i((function(e){e.exports=Ik})),Function.call.bind(Object.prototype.hasOwnProperty);function Ck(){}function Sk(){}Sk.resetWarningCache=Ck;var Ek=function(){function e(e,t,n,r,a,o){if(o!==Ex){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Sk,resetWarningCache:Ck};return n.PropTypes=n,n},Tk=i((function(e){e.exports=Ek()})),Nk={not_supported:{code:"not_supported",msg:{en:"Camera is not well-supported on this device/browser. Please try another one.",vi:"Camera không được hỗ trợ. Vui lòng thử trình duyệt hoặc thiết bị khác."}},wrong_orientation:{code:"wrong_orientation",msg:{en:"You are using landscape mode. Please rotate screen to portrait mode and retry.",vi:"Bạn đang sử dụng chế độ màn hình xoay ngang. Vui lòng quay màn hình theo chiều dọc và thực hiện lại."}},unable_to_load_model:{code:"unable_to_load_model",msg:{en:"Unable to load model on this device/browser. Please try another one.",vi:"Không thể load model. Vui lòng thử trình duyệt hoặc thiết bị khác."}},no_permission:{code:"no_permission",msg:{en:"Please grant the permission to access the camera.",vi:"Vui lòng cấp quyền để truy cập camera."}},no_face:{code:"no_face",msg:{en:"Face not found",vi:"Không tìm thấy khuôn mặt"}},partial_face:{code:"partial_face",msg:{en:"Face out of the box",vi:"Không tìm thấy toàn bộ khuôn mặt"}},multiple_faces:{code:"multiple_faces",msg:{en:"Too many faces",vi:"Quá nhiều khuôn mặt"}},face_too_small:{code:"face_too_small",msg:{en:"Face too small",vi:"Khuôn mặt quá nhỏ"}},face_too_large:{code:"face_too_large",msg:{en:"Face too large",vi:"Khuôn mặt quá to"}},face_out_of_box:{code:"face_out_of_box",msg:{en:"Face is out of box",vi:"Khuôn mặt không nằm trọn vẹn trong khung ảnh"}},liveness_too_fast:{code:"liveness_too_fast",msg:{en:"Please turn your face SLOWLY",vi:"Vui lòng quay CHẬM lại"}},liveness_terminated:{code:"liveness_terminated",msg:{en:"Please try again.",vi:"Vui lòng thực hiện lại."}},liveness_terminated_face_tracking:{code:"liveness_terminated_face_tracking",msg:{en:"You need to turn your face SLOWLY.\nPlease try again.",vi:"Bạn cần quay CHẬM lại.\nVui lòng thực hiện lại."}},liveness_terminated_no_face:{code:"liveness_terminated_no_face",msg:{en:"Your face was missing for too long.\nPlease try again.",vi:"Khuôn mặt không nằm trong khung hình.\nXin vui lòng thử lại."}},liveness_terminated_time_out:{code:"liveness_terminated_time_out",msg:{en:"You need to complete gestures as instructed within <%= x %> seconds.\nPlease try again.",vi:"Bạn cần hoàn thành động tác theo chỉ dẫn trong <%= x %> giây.\nXin vui lòng thử lại."}},card_sanity_not_good:{code:"card_sanity_not_good",msg:{en:"Card sanity not good",vi:"Card sanity chưa đạt"}},api_call_error:{code:"api_call_error",msg:{en:"Api call error",vi:"Lỗi call api"}},upload_error:{code:"upload_error",msg:{en:"Upload error",vi:"Lỗi upload"}},sanity_check_error:{code:"sanity_check_error",msg:{en:"Sanity check error",vi:"Lỗi check sanity"}},read_id_card_error:{code:"read_id_card_error",msg:{en:"Read id card error",vi:"Lỗi read id card"}},detect_id_tampering_error:{code:"detect_id_tampering_error",msg:{en:"Detect id tampering error",vi:"Lỗi detect id tampering"}},missing_front_id_card:{code:"missing_front_id_card",msg:{en:"Missing front id",vi:"Không tìm thấy front id"}},server_error:{code:"server_error",msg:"Server error"},client_web_setting_not_found:{code:"client_web_setting_not_found",msg:"Client Web Setting Not Found"},id_detector_validate_angle_error:{code:"id_detector_validate_angle_error",msg:{en:"Please place ID card straight, not tilted",vi:"Vui lòng đặt giấy tờ thẳng, không bị nghiêng khi chụp"}},id_detector_no_cards:{code:"id_detector_no_cards",msg:{en:"Please capture the <%= side %> side of ID card\n (occupy 50-80% of the frame)",vi:"Vui lòng chụp mặt <%= side %> của giấy tờ\n (chiếm 50-80% khung hình)"}},id_detector_card_too_small:{code:"id_detector_card_too_small",msg:{en:"Please move ID card CLOSER\n (occupy 50-80% of the frame)",vi:"Vui lòng đưa giấy tờ lại GẦN hơn\n (chiếm 50-80% khung hình)"}},id_detector_error_incomplete:{code:"id_detector_error_incomplete",msg:{en:"Please move ID card FARTHER\n (occupy 50-80% of the frame)",vi:"Vui lòng đưa giấy tờ ra XA hơn\n (chiếm 50-80% khung hình)"}},glare_detected:{code:"glare_detected",msg:{en:"Glare is detected. Please adjust the shooting angle",vi:"Ảnh bị chói / lóa. Vui lòng điều chỉnh góc chụp."}},id_detector_error_front_side_no_faces:{code:"id_detector_error_front_side_no_faces",msg:{en:"Please capture the front side of ID card",vi:"Vui lòng chụp mặt trước của giấy tờ"}},id_detector_error_front_side_multiple_faces:{code:"id_detector_error_front_side_multiple_faces",msg:{en:"Please capture the front side of one ID card only (remove other items out of the frame)",vi:"Vui lòng chụp mặt trước 1 giấy tờ duy nhất"}},id_detector_error_back_side_has_faces:{code:"id_detector_error_back_side_has_faces",msg:{en:"Please capture the back side of ID card",vi:"Vui lòng chụp mặt sau của giấy tờ"}}},Ak={FRONTAL:"frontal",LEFT:"left",RIGHT:"right",UP:"up",DOWN:"down"},_k=Object.freeze({__proto__:null,ErrorDuration:{SHORT:500,LONG:1500,TERMINATE:3e3},Errors:Nk,FaceDirection:Ak,Mode:{ACTIVE:"active",PASSIVE:"passive"},Messages:{REMAIN_TIME:{en:"Remaining time: <%= x %> seconds",vi:"Thời gian còn lại: <%= x %> giây"}},IDCardSide:{FRONT:"front",BACK:"back"},IDCardType:{VN:"vn.national_id"},IDCardMessage:{REMAINING_TIME:{en:"Remaining time: <%= x %> seconds",vi:"Thời gian còn lại: <%= x %> giây"},TIMEOUT_INSTRUCTION:{en:"You need to take the picture within <%= x %> seconds.\nPlease try again.",vi:"Bạn cần hoàn thành việc chụp giấy tờ trong <%= x %> giây.\nVui lòng thử lại."}}}),Rk=Tx.createContext();function Ok(e){var t=e.value,n=e.children;return Tx.createElement(Rk.Provider,{value:t},n)}function Fk(){var e=Tx.useContext(Rk);if(void 0===e)throw new Error("useSDKSettings must be used within a SDKSettingsProvider");return e}Ok.propTypes={value:Tk.shape({lang:Tk.string,assetRoot:Tk.string,apiClient:Tk.shape({})}).isRequired,children:Tk.node.isRequired};var Mk=Object.freeze({__proto__:null,SDKSettingsProvider:Ok,useSDKSettings:Fk});function Dk(e,t){return e&&!e.endsWith("/")?[e,"/",t].join(""):[e,t].join("")}function Bk(){var e=Fk();return null==e?void 0:e.assetRoot}var Pk=Object.freeze({__proto__:null,getAsset:Dk,useAssetRoot:Bk,useAsset:function(e){return Dk(Bk(),e)}}),Lk=Object.freeze({__proto__:null,sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))}});function Uk(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function Vk(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Uk(o,r,a,i,s,"next",e)}function s(e){Uk(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Wk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zk(Object(n),!0).forEach((function(t){Wk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||qk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gk(e){return function(e){if(Array.isArray(e))return Kk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||qk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qk(e,t){if(e){if("string"==typeof e)return Kk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kk(e,t):void 0}}function Kk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xk(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=qk(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}var Qk=Symbol("Comlink.proxy"),Yk=Symbol("Comlink.endpoint"),$k=Symbol("Comlink.releaseProxy"),Zk=Symbol("Comlink.thrown"),Jk=function(e){return"object"==Ty(e)&&null!==e||"function"==typeof e},ew=new Map([["proxy",{canHandle:function(e){return Jk(e)&&e[Qk]},serialize:function(e){var t=new MessageChannel,n=t.port1,r=t.port2;return tw(e,n),[r,[r]]},deserialize:function(e){return e.start(),rw(e)}}],["throw",{canHandle:function(e){return Jk(e)&&Zk in e},serialize:function(e){var t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function tw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;t.addEventListener("message",(function n(r){if(r&&r.data){var a,o=Object.assign({path:[]},r.data),i=o.id,s=o.type,u=o.path,c=(r.data.argumentList||[]).map(cw);try{var l=u.slice(0,-1).reduce((function(e,t){return e[t]}),e),d=u.reduce((function(e,t){return e[t]}),e);switch(s){case"GET":a=d;break;case"SET":l[u.slice(-1)[0]]=cw(r.data.value),a=!0;break;case"APPLY":a=d.apply(l,c);break;case"CONSTRUCT":a=function(e){return Object.assign(e,Fy({},Qk,!0))}(Uy(d,Xy(c)));break;case"ENDPOINT":var p=new MessageChannel,f=p.port1,h=p.port2;tw(e,h),a=function(e,t){return sw.set(e,t),e}(f,[f]);break;case"RELEASE":a=void 0;break;default:return}}catch(e){a=Fy({value:e},Zk,0)}Promise.resolve(a).catch((function(e){return Fy({value:e},Zk,0)})).then((function(e){var r=Ky(uw(e),2),a=r[0],o=r[1];t.postMessage(Object.assign(Object.assign({},a),{id:i}),o),"RELEASE"===s&&(t.removeEventListener("message",n),nw(t))}))}})),t.start&&t.start()}function nw(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function rw(e,t){return ow(e,[],t)}function aw(e){if(e)throw new Error("Proxy has been released and is not useable")}function ow(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=!1,a=new Proxy(n,{get:function(n,o){if(aw(r),o===$k)return function(){return lw(e,{type:"RELEASE",path:t.map((function(e){return e.toString()}))}).then((function(){nw(e),r=!0}))};if("then"===o){if(0===t.length)return{then:function(){return a}};var i=lw(e,{type:"GET",path:t.map((function(e){return e.toString()}))}).then(cw);return i.then.bind(i)}return ow(e,[].concat(Xy(t),[o]))},set:function(n,a,o){aw(r);var i=Ky(uw(o),2),s=i[0],u=i[1];return lw(e,{type:"SET",path:[].concat(Xy(t),[a]).map((function(e){return e.toString()})),value:s},u).then(cw)},apply:function(n,a,o){aw(r);var i=t[t.length-1];if(i===Yk)return lw(e,{type:"ENDPOINT"}).then(cw);if("bind"===i)return ow(e,t.slice(0,-1));var s=Ky(iw(o),2),u=s[0],c=s[1];return lw(e,{type:"APPLY",path:t.map((function(e){return e.toString()})),argumentList:u},c).then(cw)},construct:function(n,a){aw(r);var o=Ky(iw(a),2),i=o[0],s=o[1];return lw(e,{type:"CONSTRUCT",path:t.map((function(e){return e.toString()})),argumentList:i},s).then(cw)}});return a}function iw(e){var t,n=e.map(uw);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var sw=new WeakMap;function uw(e){var t,n=rb(ew);try{for(n.s();!(t=n.n()).done;){var r=Ky(t.value,2),a=r[0],o=r[1];if(o.canHandle(e)){var i=Ky(o.serialize(e),2);return[{type:"HANDLER",name:a,value:i[0]},i[1]]}}}catch(e){n.e(e)}finally{n.f()}return[{type:"RAW",value:e},sw.get(e)||[]]}function cw(e){switch(e.type){case"HANDLER":return ew.get(e.name).deserialize(e.value);case"RAW":return e.value}}function lw(e,t,n){return new Promise((function(r){var a=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)}))}var dw=function(){if(!window.Worker)return null;var e=new Blob(['const t=Symbol("Comlink.proxy"),e=Symbol("Comlink.endpoint"),r=Symbol("Comlink.releaseProxy"),n=Symbol("Comlink.thrown"),a=t=>"object"==typeof t&&null!==t||"function"==typeof t,o=new Map([["proxy",{canHandle:e=>a(e)&&e[t],serialize(t){const{port1:e,port2:r}=new MessageChannel;return i(t,e),[r,[r]]},deserialize(t){return t.start(),s(t,[],e);var e}}],["throw",{canHandle:t=>a(t)&&n in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function i(e,r=self){r.addEventListener("message",(function a(o){if(!o||!o.data)return;const{id:c,type:s,path:l}=Object.assign({path:[]},o.data),p=(o.data.argumentList||[]).map(m);let g;try{const r=l.slice(0,-1).reduce(((t,e)=>t[e]),e),n=l.reduce(((t,e)=>t[e]),e);switch(s){case"GET":g=n;break;case"SET":r[l.slice(-1)[0]]=m(o.data.value),g=!0;break;case"APPLY":g=n.apply(r,p);break;case"CONSTRUCT":g=function(e){return Object.assign(e,{[t]:!0})}(new n(...p));break;case"ENDPOINT":{const{port1:t,port2:r}=new MessageChannel;i(e,r),g=function(t,e){return f.set(t,e),t}(t,[t])}break;case"RELEASE":g=void 0;break;default:return}}catch(t){g={value:t,[n]:0}}Promise.resolve(g).catch((t=>({value:t,[n]:0}))).then((t=>{const[e,n]=h(t);r.postMessage(Object.assign(Object.assign({},e),{id:c}),n),"RELEASE"===s&&(r.removeEventListener("message",a),u(r))}))})),r.start&&r.start()}function u(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function c(t){if(t)throw new Error("Proxy has been released and is not useable")}function s(t,n=[],a=function(){}){let o=!1;const i=new Proxy(a,{get(e,a){if(c(o),a===r)return()=>p(t,{type:"RELEASE",path:n.map((t=>t.toString()))}).then((()=>{u(t),o=!0}));if("then"===a){if(0===n.length)return{then:()=>i};const e=p(t,{type:"GET",path:n.map((t=>t.toString()))}).then(m);return e.then.bind(e)}return s(t,[...n,a])},set(e,r,a){c(o);const[i,u]=h(a);return p(t,{type:"SET",path:[...n,r].map((t=>t.toString())),value:i},u).then(m)},apply(r,a,i){c(o);const u=n[n.length-1];if(u===e)return p(t,{type:"ENDPOINT"}).then(m);if("bind"===u)return s(t,n.slice(0,-1));const[f,h]=l(i);return p(t,{type:"APPLY",path:n.map((t=>t.toString())),argumentList:f},h).then(m)},construct(e,r){c(o);const[a,i]=l(r);return p(t,{type:"CONSTRUCT",path:n.map((t=>t.toString())),argumentList:a},i).then(m)}});return i}function l(t){const e=t.map(h);return[e.map((t=>t[0])),(r=e.map((t=>t[1])),Array.prototype.concat.apply([],r))];var r}const f=new WeakMap;function h(t){for(const[e,r]of o)if(r.canHandle(t)){const[n,a]=r.serialize(t);return[{type:"HANDLER",name:e,value:n},a]}return[{type:"RAW",value:t},f.get(t)||[]]}function m(t){switch(t.type){case"HANDLER":return o.get(t.name).deserialize(t.value);case"RAW":return t.value}}function p(t,e,r){return new Promise((n=>{const a=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function e(r){r.data&&r.data.id&&r.data.id===a&&(t.removeEventListener("message",e),n(r.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:a},e),r)}))}var g=[[0,1,0],[1,-4,1],[0,1,0]];function d(t,e,r,n){return t[4*(r*e+n)]}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance. In order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var E="frontal",S="left",w="right",M="up",k="down",A=0,_=1,R=2;function L(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t,2),a=n[0],o=n[1],i=b(e,2),u=i[0],c=i[1],s=[a[0],o[0]],l=[a[1],o[1]];return s[0]+r<=u[0]&&c[0]<=s[1]-r&&l[0]+r<=u[1]&&c[1]<=l[1]-.8*r?R:s[0]<=u[0]||c[0]<=s[1]||l[0]<=u[1]||c[1]<=l[1]?_:A}var N={code:"no_face",msg:{en:"Face not found",vi:"Không tìm thấy khuôn mặt"}},P={code:"partial_face",msg:{en:"Face out of the box",vi:"Không tìm thấy toàn bộ khuôn mặt"}},O={code:"multiple_faces",msg:{en:"Too many faces",vi:"Quá nhiều khuôn mặt"}},j={code:"face_too_small",msg:{en:"Face too small",vi:"Khuôn mặt quá nhỏ"}},T={code:"face_too_large",msg:{en:"Face too large",vi:"Khuôn mặt quá to"}},C={code:"face_out_of_box",msg:{en:"Face is out of box",vi:"Khuôn mặt không nằm trọn vẹn trong khung ảnh"}};function F(t){return Math.pow(Math.pow(t[0],2)+Math.pow(t[1],2),.5)}function x(t,e){return[t[0]-e[0],t[1]-e[1]]}function I(t,e,r,n){var a=r*(4*e)+4*n;return{r:t[a],g:t[a+1],b:t[a+2]}}i({calculateBlurScoreFunc:function(t){for(var e=t.data,r=t.reducedWidth,n=t.reducedHeight,a=0;a<e.length;a+=4){var o=(e[a]+e[a+1]+e[a+2])/3;e[a]=o}for(var i=0,u=0,c=n-1,s=r-1,l=1;l<c;l++)for(var f=1;f<s;f++){var h=g[0][0]*d(e,r,f-1,l-1)+g[0][1]*d(e,r,f,l-1)+g[0][2]*d(e,r,f+1,l-1)+g[1][0]*d(e,r,f-1,l)+g[1][1]*d(e,r,f,l)+g[1][2]*d(e,r,f+1,l)+g[2][0]*d(e,r,f-1,l+1)+g[2][1]*d(e,r,f,l+1)+g[2][2]*d(e,r,f+1,l+1);(h=Math.abs(h))>25&&i++,h>15&&h<25&&u++}var m=0;return i+u!==0&&(m=i/(i+u)),m},calculateFaceDirectionFunc:function(t){var e=t.landmarks,r=t.getPerfectFrontal,n=function(t){var e,r,n,a,o,i,u,c=b(t,4),s=c[0],l=c[1],f=c[2],h=c[3],m=x(l,s),p=F(m),g=(a=l,e=[(n=s)[0]+a[0],n[1]+a[1]],r=2,[e[0]/r,e[1]/r]),d=x(f,g),v=F(x(h,f)),y=x(h,g),E=F(y),S=(d[0]*y[0]+d[1]*y[1])/E,w=v/E;if(p>.5*E)o=(d[0]*m[0]+d[1]*m[1])/p/p;else{var M=F(x(d,function(t,e){return[t[0]*e,t[1]*e]}(y,S/E)));u=y,o=((i=d)[0]*u[1]-u[0]*i[1]>=0?1:-1)*M/p}return{left_right_score:o,up_down_score:w}}(e),a=n.left_right_score,o=n.up_down_score,i=b(e,3),u=i[0],c=i[1],s=i[2],l=c[0]-s[0],f=u[0]-s[0],h=r?.1:.3,m=o>.7,p=o<.42,g=a>=.35&&a<=.6,d=a<=-.35&&a>=-.6;return o>=.42&&o<=.7&&a>-h&&a<h&&l*f<0?{gesture:E,leftRightScore:a}:m&&!d&&!g?{gesture:M,leftRightScore:a}:p&&!d&&!g?{gesture:k,leftRightScore:a}:g&&!m&&!p?{gesture:w,leftRightScore:a}:d&&!m&&!p?{gesture:S,leftRightScore:a}:null},validatePredictionsFunc:function(t){var e,r,n,a,o,i,u,c,s,l,f,h,m,p,g,d,y,E,S,w,M,k,F,x,I,z,H,D,K,G,W,q,U=t.predictions,B=t.width,Y=[[0,0],[B,t.height]],Q=U.reduce((function(t,e){var r=e.topLeft,n=e.bottomRight,a=e.probability,o=e.landmarks;a<.9||o.length<6||function(t){var e=t.small,r=e.coords,n=e.area,a=t.big,o=a.coords,i=a.area,u=n;if(!u){var c=b(r,2),s=c[0],l=c[1];u=(l[0]-s[0])*(l[1]-s[1])}var f=i;if(!f){var h=b(o,2),m=h[0],p=h[1];f=(p[0]-m[0])*(p[1]-m[1])}return u/f}({small:{coords:[r,n]},big:{coords:Y}})<=.025?t[A].push(e):t[L(Y,[r,n])].push(e);return t}),(v(e={},_,[]),v(e,R,[]),v(e,A,[]),e)),X=Q[R].length,$=Q[_].length;if(0===X)r=$>0?P:N;else if(X+$>1)r=O;else{var J=n=Q[R][0],V=J.topLeft,Z=J.bottomRight,tt=(F=Y,x=b([V,Z],2),I=x[0],z=x[1],H=b(F,2),D=H[0],K=H[1],G=z[0]-I[0],W=z[1]-I[1],q=K[0]-D[0],G/q<W/q?G/q:W/q);tt<.4&&(r=j),tt>.61&&(r=T),L(Y,(a=n.landmarks,u=a[0],c=a[1],s=a[2],l=a[3],f=a[4],h=a[5],m=.5*(u[1]+c[1]),p=m+1.5*(m-l[1]),g=l[1]-1.2*(s[1]-l[1]),d=[u[0],c[0],s[0],l[0],f[0],h[0]],y=Math.min.apply(Math,d),E=Math.min(p,g),S=Math.max.apply(Math,d),w=Math.max(p,g),M=Math.abs(l[0]-f[0])/Math.abs(l[0]-h[0]),k=l[0]-f[0]<0&&h[0]-l[0]>.05*(S-y),l[0]-f[0]>0&&h[0]-l[0]<-.05*(S-y)?(o=.2,i=.1):k?(o=.1,i=.2):M>2||M<.5?(o=.15,i=.15):(o=.05,i=.05),[[y-o*(S-y),E],[S+i*(S-y),w]]),.05*B)!==R&&(r=C)}return{error:r,fullFace:n}},checkCardBlur:function(t){var e=t.data,r=t.width,n=t.height,a=function(t,e,r){for(var n=0,a=[],o=1;o<r-1;o++)for(var i=1;i<e-1;i++){var u=t[o-1][i-1],c=t[o][i-1],s=t[o+1][i-1],l=t[o-1][i],f=t[o][i],h=t[o+1][i],m=t[o-1][i+1],p=t[o][i+1],g=t[o+1][i+1],d=Number.parseInt(0*u+1*c+0*s,10),v=Number.parseInt(1*l+-4*f+1*h,10),b=Number.parseInt(0*m+1*p+0*g,10),y=Number.parseInt(Math.abs(d+v+b),10);a.push(y),n+=y}var E=a.length,S=n/E,w=0;a.forEach((function(t){w+=(t-S)*(t-S)}));var M=Math.sqrt(w/E);return{lapAvg:S,lapStd:M}}(function(t,e,r){for(var n=[],a=0;a<r+2;a++)for(var o=0;o<e+2;o++){n[a]||(n[a]=[]),0!==o&&0!==a&&o!==e+1&&a!==r+1||(n[a][o]=1);var i=I(t,e,a-1,o-1),u=i.r,c=i.g,s=i.b,l=Number.parseInt(Math.round(.299*u+.587*c+.114*s),10);n[a][o]=l}n[0]=n[2],n[r+1]=n[r-1];for(var f=0;f<r+2;f++)n[f][0]=n[f][2],n[f][e+1]=n[f][e-1];return n}(e,r,n),r+2,n+2);return function(t,e){return e<=18.553622245788574?e<=11.523502826690674?t<=-.05309182405471802?1:.5:t<=.2395537868142128?.29069767441860467:.8333333333333334:e<=23.69584369659424?e<=23.6335506439209?.10606060606060606:1:e<=33.88881301879883?.03896103896103896:0}(a.lapAvg,a.lapStd)},detectGlare:function(t,e,r){return function(t,e,r){for(var n=0,a=r[1],o=r[3],i=r[0],u=r[2],c=a;c<o;c++)for(var s=i;s<u;s++){var l=I(t,e,c,s),f=l.r,h=l.g,m=l.b;f>=245&&m>=245&&h>245&&(n+=1)}return n}(t,e,function(t,e){var r=Math.floor(.025*t),n=t-r,a=Math.floor(.025*e);return[r,a,n,e-a]}(e,r))/(e*r)>=.001}});']),t=URL.createObjectURL(e);return rw(new Worker(t))}(),pw=[[0,1,0],[1,-4,1],[0,1,0]];function fw(e,t,n,r){return e[4*(n*t+r)]}function hw(e){for(var t=e.data,n=e.reducedWidth,r=e.reducedHeight,a=0;a<t.length;a+=4){var o=(t[a]+t[a+1]+t[a+2])/3;t[a]=o}for(var i=0,s=0,u=r-1,c=n-1,l=1;l<u;l++)for(var d=1;d<c;d++){var p=pw[0][0]*fw(t,n,d-1,l-1)+pw[0][1]*fw(t,n,d,l-1)+pw[0][2]*fw(t,n,d+1,l-1)+pw[1][0]*fw(t,n,d-1,l)+pw[1][1]*fw(t,n,d,l)+pw[1][2]*fw(t,n,d+1,l)+pw[2][0]*fw(t,n,d-1,l+1)+pw[2][1]*fw(t,n,d,l+1)+pw[2][2]*fw(t,n,d+1,l+1);(p=Math.abs(p))>25&&i++,p>15&&p<25&&s++}var f=0;return i+s!==0&&(f=i/(i+s)),f}function mw(e,t,n,r){var a=n*(4*t)+4*r;return{r:e[a],g:e[a+1],b:e[a+2]}}function gw(e){var t=e.data,n=e.width,r=e.height,a=function(e,t,n){for(var r=0,a=[],o=1;o<n-1;o++)for(var i=1;i<t-1;i++){var s=e[o-1][i-1],u=e[o][i-1],c=e[o+1][i-1],l=e[o-1][i],d=e[o][i],p=e[o+1][i],f=e[o-1][i+1],h=e[o][i+1],m=e[o+1][i+1],g=Number.parseInt(0*s+1*u+0*c,10),v=Number.parseInt(1*l+-4*d+1*p,10),y=Number.parseInt(0*f+1*h+0*m,10),b=Number.parseInt(Math.abs(g+v+y),10);a.push(b),r+=b}var x=a.length,k=r/x,w=0;a.forEach((function(e){w+=(e-k)*(e-k)}));var I=Math.sqrt(w/x);return{lapAvg:k,lapStd:I}}(function(e,t,n){for(var r=[],a=0;a<n+2;a++)for(var o=0;o<t+2;o++){r[a]||(r[a]=[]),0!==o&&0!==a&&o!==t+1&&a!==n+1||(r[a][o]=1);var i=mw(e,t,a-1,o-1),s=i.r,u=i.g,c=i.b,l=Number.parseInt(Math.round(.299*s+.587*u+.114*c),10);r[a][o]=l}r[0]=r[2],r[n+1]=r[n-1];for(var d=0;d<n+2;d++)r[d][0]=r[d][2],r[d][t+1]=r[d][t-1];return r}(t,n,r),n+2,r+2);return function(e,t){return t<=18.553622245788574?t<=11.523502826690674?e<=-.05309182405471802?1:.5:e<=.2395537868142128?.29069767441860467:.8333333333333334:t<=23.69584369659424?t<=23.6335506439209?.10606060606060606:1:t<=33.88881301879883?.03896103896103896:0}(a.lapAvg,a.lapStd)}function vw(e){var t=e.width,n=e.height,r=e.getContext("2d"),a=Math.floor(t/2.8),o=Math.floor(n/2.8),i=t-a,s=n-o;return{data:r.getImageData(Math.floor(a/2),Math.floor(o/2),i,s).data,reducedWidth:i,reducedHeight:s}}function yw(){return(yw=Vk(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=vw(t),dw){e.next=3;break}return e.abrupt("return",hw(n));case 3:return e.abrupt("return",dw.calculateBlurScoreFunc(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bw(e){var t=document.createElement("canvas"),n=200,r=e.width*(n/e.width);t.width=r,t.height=n;var a=t.getContext("2d");return a.drawImage(e,0,0,r,n),{data:a.getImageData(0,0,r,n).data,width:r,height:n}}function xw(){return(xw=Vk(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=bw(t),dw){e.next=3;break}return e.abrupt("return",gw(n));case 3:return e.abrupt("return",dw.checkCardBlur(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kw=Object.freeze({__proto__:null,BLUR_CARD_THRESHOLD:.29069767441860467,calculateBlurScore:function(e){return yw.apply(this,arguments)},hasBetterBlurScore:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return e-t>n},calculateCardBlurScore:function(e){return xw.apply(this,arguments)}});function ww(e){var t,n,r,a,o,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=s.x,c=s.y,l=s.width,d=s.height,p=e.videoWidth,f=e.videoHeight,h=window.innerWidth,m=window.innerHeight,g=h/m,v=p/f;g<v?(o=u*(r=p/h),i=(c-(t=(m-h/v)/2))*(a=f/(m-2*t))):(o=(u-(n=(h-m*v)/2))*(r=p/(h-2*n)),i=c*(a=f/m));var y=Math.floor(l*r),b=Math.floor(d*a);return{lostX:n,lostY:t,cropWidth:y,cropHeight:b,cropX:o,cropY:i}}var Iw=Object.freeze({__proto__:null,analyzeVideoAndWindowSizes:ww,takePicture:function(e){var t,n=e.canvas,r=e.video,a=e.cropArea;if(n)t=n;else{var o=ww(r,a),i=o.cropWidth,s=o.cropHeight,u=o.cropX,c=o.cropY,l=(t=document.createElement("canvas")).getContext("2d");t.width=i,t.height=s,l.drawImage(r,u,c,i,s,0,0,i,s)}return new Promise((function(e){t.toBlob(e,"image/jpeg",1)}))}}),Cw=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e},Sw=Object.freeze({__proto__:null,shuffleArray:Cw}),Ew={NONE:0,PARTIAL:1,FULL:2};function Tw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Hk(e,2),a=r[0],o=r[1],i=Hk(t,2),s=i[0],u=i[1],c=[a[0],o[0]],l=[a[1],o[1]];return c[0]+n<=s[0]&&u[0]<=c[1]-n&&l[0]+n<=s[1]&&u[1]<=l[1]-.8*n?Ew.FULL:c[0]<=s[0]||u[0]<=c[1]||l[0]<=s[1]||u[1]<=l[1]?Ew.PARTIAL:Ew.NONE}function Nw(e){var t=e.small,n=t.coords,r=t.area,a=e.big,o=a.coords,i=a.area,s=r;if(!s){var u=Hk(n,2),c=u[0],l=u[1];s=(l[0]-c[0])*(l[1]-c[1])}var d=i;if(!d){var p=Hk(o,2),f=p[0],h=p[1];d=(h[0]-f[0])*(h[1]-f[1])}return s/d}function Aw(e,t){var n=Hk(e,2),r=n[0],a=n[1],o=Hk(t,2),i=o[0],s=o[1],u=a[0]-r[0],c=a[1]-r[1],l=s[0]-i[0];return u/l<c/l?u/l:c/l}var _w=Object.freeze({__proto__:null,ContainMode:Ew,rectContains:Tw,rectAreaRatio:Nw,rectEdgeRatio:Aw,isFaceCenter:function(e,t){var n=Hk(e,2),r=n[0],a=n[1],o=Hk(t,2),i=o[0],s=o[1],u=a[0]-r[0],c=a[1]-r[1],l=s[0]-i[0],d=Math.abs(r[0]-(l-u)/2)/l<.2,p=Math.abs(r[1]-(l-c)/2)/l<.2;return!(!d||!p)}});function Rw(e){return Math.pow(Math.pow(e[0],2)+Math.pow(e[1],2),.5)}function Ow(e,t){return[e[0]-t[0],e[1]-t[1]]}function Fw(e){var t=e.landmarks,n=e.getPerfectFrontal,r=function(e){var t,n,r,a,o,i,s=Hk(e,4),u=s[0],c=s[1],l=s[2],d=s[3],p=Ow(c,u),f=Rw(p),h=(r=c,2,[(t=[(n=u)[0]+r[0],n[1]+r[1]])[0]/2,t[1]/2]),m=Ow(l,h),g=Rw(Ow(d,l)),v=Ow(d,h),y=Rw(v),b=(m[0]*v[0]+m[1]*v[1])/y,x=g/y;if(f>.5*y)a=(m[0]*p[0]+m[1]*p[1])/f/f;else{var k=Rw(Ow(m,function(e,t){return[e[0]*t,e[1]*t]}(v,b/y)));i=v,a=((o=m)[0]*i[1]-i[0]*o[1]>=0?1:-1)*k/f}return{left_right_score:a,up_down_score:x}}(t),a=r.left_right_score,o=r.up_down_score,i=Hk(t,3),s=i[0],u=i[1],c=i[2],l=u[0]-c[0],d=s[0]-c[0],p=n?.1:.3,f=o>.7,h=o<.42,m=a>=.35&&a<=.6,g=a<=-.35&&a>=-.6;return o>=.42&&o<=.7&&a>-p&&a<p&&l*d<0?{gesture:Ak.FRONTAL,leftRightScore:a}:!f||g||m?!h||g||m?!m||f||h?!g||f||h?null:{gesture:Ak.LEFT,leftRightScore:a}:{gesture:Ak.RIGHT,leftRightScore:a}:{gesture:Ak.DOWN,leftRightScore:a}:{gesture:Ak.UP,leftRightScore:a}}function Mw(e){var t,n,r,a,o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,w,I=e.predictions,C=e.width,S=[[0,0],[C,e.height]],E=I.reduce((function(e,t){var n=t.topLeft,r=t.bottomRight,a=t.probability,o=t.landmarks;return a<.9||o.length<6||Nw({small:{coords:[n,r]},big:{coords:S}})<=.025?e[Ew.NONE].push(t):e[Tw(S,[n,r])].push(t),e}),(Wk(t={},Ew.PARTIAL,[]),Wk(t,Ew.FULL,[]),Wk(t,Ew.NONE,[]),t)),T=E[Ew.FULL].length,N=E[Ew.PARTIAL].length;if(0===T)n=N>0?Nk.partial_face:Nk.no_face;else if(T+N>1)n=Nk.multiple_faces;else{var A=r=E[Ew.FULL][0],_=Aw([A.topLeft,A.bottomRight],S);_<.4&&(n=Nk.face_too_small),_>.61&&(n=Nk.face_too_large),Tw(S,(s=(a=r.landmarks)[0],u=a[1],c=a[2],l=a[3],d=a[4],p=a[5],h=(f=.5*(s[1]+u[1]))+1.5*(f-l[1]),m=l[1]-1.2*(c[1]-l[1]),g=[s[0],u[0],c[0],l[0],d[0],p[0]],v=Math.min.apply(Math,g),y=Math.min(h,m),b=Math.max.apply(Math,g),x=Math.max(h,m),k=Math.abs(l[0]-d[0])/Math.abs(l[0]-p[0]),w=l[0]-d[0]<0&&p[0]-l[0]>.05*(b-v),l[0]-d[0]>0&&p[0]-l[0]<-.05*(b-v)?(o=.2,i=.1):w?(o=.1,i=.2):k>2||k<.5?(o=.15,i=.15):(o=.05,i=.05),[[v-o*(b-v),y],[b+i*(b-v),x]]),.05*C)!==Ew.FULL&&(n=Nk.face_out_of_box)}return{error:n,fullFace:r}}function Dw(e,t){var n=t.customInstructions,r=t.customIcon,a=t.customDirectionIcon,o=t.customStepTimeConstraints,i={};return null!=n&&n[e]&&(i.instructions=n[e]),null!=r&&r[e]&&(i.icon=r[e]),null!=a&&a[e]&&(i.directionIcon=a[e]),null!=o&&o[e]&&(i.stepTimeConstraints=o[e]),i}function Bw(){return(Bw=Vk(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dw){e.next=2;break}return e.abrupt("return",Mw(t));case 2:return e.abrupt("return",dw.validatePredictionsFunc(t));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pw(){return(Pw=Vk(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dw){e.next=2;break}return e.abrupt("return",Fw(t));case 2:return e.abrupt("return",dw.calculateFaceDirectionFunc(t));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lw=Object.freeze({__proto__:null,initFaceVerificationData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.assetRoot,n=void 0===t?"/":t,r=e.customInstructions,a=e.customIcon,o=e.customDirectionIcon,i=e.customStepTimeConstraints;return{curStepIndex:0,steps:[].concat(Gk(Cw([jk({name:Ak.LEFT,instructions:{en:"Turn your face to the left",vi:"Quay mặt chậm qua trái"},image:{blob:null,imageId:null,objUrl:null,blurScore:null,leftRightScore:null},frontalFaceImage:{blob:null,imageId:null,blurScore:null,leftRightScore:null},icon:Dk(n,"ic_face_left.svg"),directionIcon:Dk(n,"arrow_left.svg"),directionIconAnimation:"slide-horizontal",firstFrameSpottedAt:null,stepTimeConstraints:{delayTime:null}},Dw(Ak.LEFT,{customInstructions:r,customIcon:a,customDirectionIcon:o,customStepTimeConstraints:i})),jk({name:Ak.RIGHT,instructions:{en:"Turn your face to the right",vi:"Quay mặt chậm qua phải"},image:{blob:null,imageId:null,objUrl:null,blurScore:null,leftRightScore:null},frontalFaceImage:{blob:null,imageId:null,blurScore:null,leftRightScore:null},icon:Dk(n,"ic_face_right.svg"),directionIcon:Dk(n,"arrow_right.svg"),directionIconAnimation:"slide-horizontal",firstFrameSpottedAt:null,stepTimeConstraints:{delayTime:null}},Dw(Ak.RIGHT,{customInstructions:r,customIcon:a,customDirectionIcon:o,customStepTimeConstraints:i})),jk({name:Ak.UP,instructions:{en:"Turn your face up",vi:"Ngước mặt chậm lên trên"},image:{blob:null,imageId:null,objUrl:null,blurScore:null,leftRightScore:null},frontalFaceImage:{blob:null,imageId:null,blurScore:null,leftRightScore:null},icon:Dk(n,"ic_face_up.svg"),directionIcon:Dk(n,"arrow_up.svg"),directionIconAnimation:"slide-vertical",firstFrameSpottedAt:null,stepTimeConstraints:{delayTime:null}},Dw(Ak.UP,{customInstructions:r,customIcon:a,customDirectionIcon:o,customStepTimeConstraints:i}))])),[jk({name:Ak.FRONTAL,instructions:{en:"Look straight into the camera",vi:"Nhìn thẳng camera"},image:{blob:null,imageId:null,objUrl:null,blurScore:null,leftRightScore:null},frontalFaceImage:{blob:null,imageId:null,blurScore:null,leftRightScore:null},icon:Dk(n,"ic_face_frontal.svg"),directionIcon:Dk(n,"frontal.svg"),directionIconAnimation:"blink",firstFrameSpottedAt:null,stepTimeConstraints:{delayTime:null}},Dw(Ak.FRONTAL,{customInstructions:r,customIcon:a,customDirectionIcon:o,customStepTimeConstraints:i}))])}},validatePredictions:function(e){return Bw.apply(this,arguments)},calculateFaceDirection:function(e){return Pw.apply(this,arguments)},faceTracker:function(){var e=[],t=[],n=[],r=[],a=[],o=0,i=0;function s(){i=o,n=Gk(e),r=Gk(t)}return function(u,c){var l=u.topLeft,d=u.bottomRight,p=u.landmarks,f=[],h=Hk(l,2);f[0]=h[0],f[1]=h[1];var m=Hk(d,2);f[2]=m[0],f[3]=m[1];var g=[],v=[];p.forEach((function(e,t){var n=Hk(e,2);g[t]=n[0],v[t]=n[1]})),o=Date.now();var y=f[2]-f[0];if(e=[].concat(g),t=[].concat(v),!n.length&&!r.length||c)return s(),{score:0,time:o};for(var b=0;b<6;b++)a[b]=Math.sqrt((e[b]-n[b])*(e[b]-n[b])+(t[b]-r[b])*(t[b]-r[b]));for(var x=0;x<6;x++)a[x]/=(o-i)*y;for(var k=0,w=0;w<6;w++)k+=a[w];return k/=6,s(),{score:k,time:o}}}}),Uw=document.createElement("canvas"),Vw=Uw.getContext("2d");Uw.width=128,Uw.height=128;var Ww=function(){var e=Vk(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.model,r=t.sCanvas,Vw.drawImage(r,0,0,Uw.width,Uw.height),e.abrupt("return",n.estimateFaces(Uw,!1,!1,!0));case 3:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),zw=Object.freeze({__proto__:null,SIZE:128,getModelPredictions:Ww}),jw=Object.getOwnPropertySymbols,Hw=Object.prototype.hasOwnProperty,Gw=Object.prototype.propertyIsEnumerable;function qw(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var Kw=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,a=qw(e),o=1;o<arguments.length;o++){for(var i in n=Object(arguments[o]))Hw.call(n,i)&&(a[i]=n[i]);if(jw){r=jw(n);for(var s=0;s<r.length;s++)Gw.call(n,r[s])&&(a[r[s]]=n[r[s]])}}return a},Xw=arguments[3],Qw=arguments[4],Yw=arguments[5],$w=JSON.stringify,Zw=function(e,t){for(var n,r=Object.keys(Yw),a=0,o=r.length;a<o;a++){var i=r[a],s=Yw[i].exports;if(s===e||s&&s.default===e){n=i;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var u={};for(a=0,o=r.length;a<o;a++)u[i=r[a]]=i;Qw[n]=["function(require,module,exports){"+e+"(self); }",u]}var c=Math.floor(Math.pow(16,8)*Math.random()).toString(16),l={};l[n]=n,Qw[c]=["function(require,module,exports){var f = require("+$w(n)+");(f.default ? f.default : f)(self);}",l];var d={};!function e(t){for(var n in d[t]=!0,Qw[t][1]){var r=Qw[t][1][n];d[r]||e(r)}}(c);var p="("+Xw+")({"+Object.keys(d).map((function(e){return $w(e)+":["+Qw[e][0]+","+$w(Qw[e][1])+"]"})).join(",")+"},{},["+$w(c)+"])",f=window.URL||window.webkitURL||window.mozURL||window.msURL,h=new Blob([p],{type:"text/javascript"});if(t&&t.bare)return h;var m=f.createObjectURL(h),g=new Worker(m);return g.objectURL=m,g},Jw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function eI(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}function tI(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var nI,rI=eI((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}})),aI={js:!0,wasm:!0};function oI(e){if(!(this instanceof oI))return new oI(e);var t=Kw({},aI,e||{});if(this.options=t,this.__cache={},this.__init_promise=null,this.__modules=t.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}oI.prototype.has_wasm=function(){if(void 0!==nI)return nI;if(nI=!1,"undefined"==typeof WebAssembly)return nI;try{var e=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),t=new WebAssembly.Module(e);return 0!==new WebAssembly.Instance(t,{}).exports.test(4)&&(nI=!0),nI}catch(e){}return nI},oI.prototype.use=function(e){return this.__modules[e.name]=e,this.options.wasm&&this.has_wasm()&&e.wasm_fn?this[e.name]=e.wasm_fn:this[e.name]=e.fn,this},oI.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error('mathlib: only "wasm" was enabled, but it\'s not supported'));var e=this;return this.__init_promise=Promise.all(Object.keys(e.__modules).map((function(t){var n=e.__modules[t];return e.options.wasm&&e.has_wasm()&&n.wasm_fn?e.__wasm[t]?null:WebAssembly.compile(e.__base64decode(n.wasm_src)).then((function(n){e.__wasm[t]=n})):null}))).then((function(){return e})),this.__init_promise},oI.prototype.__base64decode=function(e){for(var t=e.replace(/[\r\n=]/g,""),n=t.length,r=new Uint8Array(3*n>>2),a=0,o=0,i=0;i<n;i++)i%4==0&&i&&(r[o++]=a>>16&255,r[o++]=a>>8&255,r[o++]=255&a),a=a<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t.charAt(i));var s=n%4*6;return 0===s?(r[o++]=a>>16&255,r[o++]=a>>8&255,r[o++]=255&a):18===s?(r[o++]=a>>10&255,r[o++]=a>>2&255):12===s&&(r[o++]=a>>4&255),r},oI.prototype.__reallocate=function(e){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(e/65536)}),this.__memory;var t=this.__memory.buffer.byteLength;return t<e&&this.__memory.grow(Math.ceil((e-t)/65536)),this.__memory},oI.prototype.__instance=function(e,t,n){if(t&&this.__reallocate(t),!this.__wasm[e]){var r=this.__modules[e];this.__wasm[e]=new WebAssembly.Module(this.__base64decode(r.wasm_src))}if(!this.__cache[e]){var a={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[e]=new WebAssembly.Instance(this.__wasm[e],{env:Kw(a,n||{})})}return this.__cache[e]},oI.prototype.__align=function(e,t){var n=e%(t=t||8);return e+(n?t-n:0)};var iI,sI,uI,cI,lI,dI,pI=oI;function fI(e,t,n,r,a,o){var i,s,u,c,l,d,p,f,h,m,g,v,y,b;for(h=0;h<o;h++){for(p=h,f=0,c=l=(i=e[d=h*a])*r[6],g=r[0],v=r[1],y=r[4],b=r[5],m=0;m<a;m++)u=(s=e[d])*g+i*v+c*y+l*b,l=c,c=u,i=s,n[f]=c,f++,d++;for(f--,p+=o*(a-1),c=l=(i=e[--d])*r[7],s=i,g=r[2],v=r[3],m=a-1;m>=0;m--)u=s*g+i*v+c*y+l*b,l=c,c=u,i=s,s=e[d],t[p]=n[f]+c,d--,f--,p-=o}}var hI=function(e,t,n,r){if(r){var a=new Uint16Array(e.length),o=new Float32Array(Math.max(t,n)),i=function(e){e<.5&&(e=.5);var t=Math.exp(.527076)/e,n=Math.exp(-t),r=Math.exp(-2*t),a=(1-n)*(1-n)/(1+2*t*n-r);return iI=a,sI=a*(t-1)*n,uI=a*(t+1)*n,cI=-a*r,lI=2*n,dI=-r,new Float32Array([iI,sI,uI,cI,lI,dI,(iI+sI)/(1-lI-dI),(uI+cI)/(1-lI-dI)])}(r);fI(e,a,o,i,t,n),fI(a,e,o,i,n,t)}},mI={name:"unsharp_mask",fn:function(e,t,n,r,a,o){var i,s,u,c,l,d,p,f,h,m,g,v,y;if(!(0===r||a<.5)){a>2&&(a=2);var b=function(e,t,n){for(var r,a,o,i,s,u=t*n,c=new Uint16Array(u),l=0;l<u;l++)r=e[4*l],a=e[4*l+1],o=e[4*l+2],s=r>=a&&r>=o?r:a>=o&&a>=r?a:o,i=r<=a&&r<=o?r:a<=o&&a<=r?a:o,c[l]=257*(s+i)>>1;return c}(e,t,n),x=new Uint16Array(b);hI(x,t,n,a);for(var k=r/100*4096+.5|0,w=257*o|0,I=t*n,C=0;C<I;C++)v=2*(b[C]-x[C]),Math.abs(v)>=w&&(i=e[y=4*C],s=e[y+1],u=e[y+2],d=257*((f=i>=s&&i>=u?i:s>=i&&s>=u?s:u)+(p=i<=s&&i<=u?i:s<=i&&s<=u?s:u))>>1,p===f?c=l=0:(l=d<=32767?4095*(f-p)/(f+p)|0:4095*(f-p)/(510-f-p)|0,c=i===f?65535*(s-u)/(6*(f-p))|0:s===f?21845+(65535*(u-i)/(6*(f-p))|0):43690+(65535*(i-s)/(6*(f-p))|0)),(d+=k*v+2048>>12)>65535?d=65535:d<0&&(d=0),0===l?i=s=u=d>>8:(h=2*d-(m=d<=32767?d*(4096+l)+2048>>12:d+((65535-d)*l+2048>>12))>>8,m>>=8,i=(g=c+21845&65535)>=43690?h:g>=32767?h+(6*(m-h)*(43690-g)+32768>>16):g>=10922?m:h+(6*(m-h)*g+32768>>16),s=(g=65535&c)>=43690?h:g>=32767?h+(6*(m-h)*(43690-g)+32768>>16):g>=10922?m:h+(6*(m-h)*g+32768>>16),u=(g=c-21845&65535)>=43690?h:g>=32767?h+(6*(m-h)*(43690-g)+32768>>16):g>=10922?m:h+(6*(m-h)*g+32768>>16)),e[y]=i,e[y+1]=s,e[y+2]=u)}},wasm_fn:function(e,t,n,r,a,o){if(!(0===r||a<.5)){a>2&&(a=2);var i=t*n,s=4*i,u=2*i,c=2*i,l=4*Math.max(t,n),d=s,p=d+u,f=p+c,h=f+c,m=h+l,g=this.__instance("unsharp_mask",s+u+2*c+l+32,{exp:Math.exp}),v=new Uint32Array(e.buffer);new Uint32Array(this.__memory.buffer).set(v);var y=g.exports.hsl_l16||g.exports._hsl_l16;y(0,d,t,n),(y=g.exports.blurMono16||g.exports._blurMono16)(d,p,f,h,m,t,n,a),(y=g.exports.unsharp||g.exports._unsharp)(0,0,d,p,t,n,r,o),v.set(new Uint32Array(this.__memory.buffer,0,i))}},wasm_src:"AGFzbQEAAAABMQZgAXwBfGACfX8AYAZ/f39/f38AYAh/f39/f39/fQBgBH9/f38AYAh/f39/f39/fwACGQIDZW52A2V4cAAAA2VudgZtZW1vcnkCAAEDBgUBAgMEBQQEAXAAAAdMBRZfX2J1aWxkX2dhdXNzaWFuX2NvZWZzAAEOX19nYXVzczE2X2xpbmUAAgpibHVyTW9ubzE2AAMHaHNsX2wxNgAEB3Vuc2hhcnAABQkBAAqJEAXZAQEGfAJAIAFE24a6Q4Ia+z8gALujIgOaEAAiBCAEoCIGtjgCECABIANEAAAAAAAAAMCiEAAiBbaMOAIUIAFEAAAAAAAA8D8gBKEiAiACoiAEIAMgA6CiRAAAAAAAAPA/oCAFoaMiArY4AgAgASAEIANEAAAAAAAA8L+gIAKioiIHtjgCBCABIAQgA0QAAAAAAADwP6AgAqKiIgO2OAIIIAEgBSACoiIEtow4AgwgASACIAegIAVEAAAAAAAA8D8gBqGgIgKjtjgCGCABIAMgBKEgAqO2OAIcCwu3AwMDfwR9CHwCQCADKgIUIQkgAyoCECEKIAMqAgwhCyADKgIIIQwCQCAEQX9qIgdBAEgiCA0AIAIgAC8BALgiDSADKgIYu6IiDiAJuyIQoiAOIAq7IhGiIA0gAyoCBLsiEqIgAyoCALsiEyANoqCgoCIPtjgCACACQQRqIQIgAEECaiEAIAdFDQAgBCEGA0AgAiAOIBCiIA8iDiARoiANIBKiIBMgAC8BALgiDaKgoKAiD7Y4AgAgAkEEaiECIABBAmohACAGQX9qIgZBAUoNAAsLAkAgCA0AIAEgByAFbEEBdGogAEF+ai8BACIIuCINIAu7IhGiIA0gDLsiEqKgIA0gAyoCHLuiIg4gCrsiE6KgIA4gCbsiFKKgIg8gAkF8aioCALugqzsBACAHRQ0AIAJBeGohAiAAQXxqIQBBACAFQQF0ayEHIAEgBSAEQQF0QXxqbGohBgNAIAghAyAALwEAIQggBiANIBGiIAO4Ig0gEqKgIA8iECAToqAgDiAUoqAiDyACKgIAu6CrOwEAIAYgB2ohBiAAQX5qIQAgAkF8aiECIBAhDiAEQX9qIgRBAUoNAAsLCwvfAgIDfwZ8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIgyaEAAiDSANoCIPtjgCECAEIAxEAAAAAAAAAMCiEAAiDraMOAIUIAREAAAAAAAA8D8gDaEiCyALoiANIAwgDKCiRAAAAAAAAPA/oCAOoaMiC7Y4AgAgBCANIAxEAAAAAAAA8L+gIAuioiIQtjgCBCAEIA0gDEQAAAAAAADwP6AgC6KiIgy2OAIIIAQgDiALoiINtow4AgwgBCALIBCgIA5EAAAAAAAA8D8gD6GgIgujtjgCGCAEIAwgDaEgC6O2OAIcIAYEQCAFQQF0IQogBiEJIAIhCANAIAAgCCADIAQgBSAGEAIgACAKaiEAIAhBAmohCCAJQX9qIgkNAAsLIAVFDQAgBkEBdCEIIAUhAANAIAIgASADIAQgBiAFEAIgAiAIaiECIAFBAmohASAAQX9qIgANAAsLC7wBAQV/IAMgAmwiAwRAQQAgA2shBgNAIAAoAgAiBEEIdiIHQf8BcSECAn8gBEH/AXEiAyAEQRB2IgRB/wFxIgVPBEAgAyIIIAMgAk8NARoLIAQgBCAHIAIgA0kbIAIgBUkbQf8BcQshCAJAIAMgAk0EQCADIAVNDQELIAQgByAEIAMgAk8bIAIgBUsbQf8BcSEDCyAAQQRqIQAgASADIAhqQYECbEEBdjsBACABQQJqIQEgBkEBaiIGDQALCwvTBgEKfwJAIAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6CqIQ0gBSAEbCILBEAgB0GBAmwhDgNAQQAgAi8BACADLwEAayIGQQF0IgdrIAcgBkEASBsgDk8EQCAAQQJqLQAAIQUCfyAALQAAIgYgAEEBai0AACIESSIJRQRAIAYiCCAGIAVPDQEaCyAFIAUgBCAEIAVJGyAGIARLGwshCAJ/IAYgBE0EQCAGIgogBiAFTQ0BGgsgBSAFIAQgBCAFSxsgCRsLIgogCGoiD0GBAmwiEEEBdiERQQAhDAJ/QQAiCSAIIApGDQAaIAggCmsiCUH/H2wgD0H+AyAIayAKayAQQYCABEkbbSEMIAYgCEYEQCAEIAVrQf//A2wgCUEGbG0MAQsgBSAGayAGIARrIAQgCEYiBhtB//8DbCAJQQZsbUHVqgFBqtUCIAYbagshCSARIAcgDWxBgBBqQQx1aiIGQQAgBkEAShsiBkH//wMgBkH//wNIGyEGAkACfwJAIAxB//8DcSIFBEAgBkH//wFKDQEgBUGAIGogBmxBgBBqQQx2DAILIAZBCHYiBiEFIAYhBAwCCyAFIAZB//8Dc2xBgBBqQQx2IAZqCyIFQQh2IQcgBkEBdCAFa0EIdiIGIQQCQCAJQdWqAWpB//8DcSIFQanVAksNACAFQf//AU8EQEGq1QIgBWsgByAGa2xBBmxBgIACakEQdiAGaiEEDAELIAchBCAFQanVAEsNACAFIAcgBmtsQQZsQYCAAmpBEHYgBmohBAsCfyAGIgUgCUH//wNxIghBqdUCSw0AGkGq1QIgCGsgByAGa2xBBmxBgIACakEQdiAGaiAIQf//AU8NABogByIFIAhBqdUASw0AGiAIIAcgBmtsQQZsQYCAAmpBEHYgBmoLIQUgCUGr1QJqQf//A3EiCEGp1QJLDQAgCEH//wFPBEBBqtUCIAhrIAcgBmtsQQZsQYCAAmpBEHYgBmohBgwBCyAIQanVAEsEQCAHIQYMAQsgCCAHIAZrbEEGbEGAgAJqQRB2IAZqIQYLIAEgBDoAACABQQFqIAU6AAAgAUECaiAGOgAACyADQQJqIQMgAkECaiECIABBBGohACABQQRqIQEgC0F/aiILDQALCwsL"},gI=[{win:.5,filter:function(e){return e>=-.5&&e<.5?1:0}},{win:1,filter:function(e){if(e<=-1||e>=1)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},{win:2,filter:function(e){if(e<=-2||e>=2)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},{win:3,filter:function(e){if(e<=-3||e>=3)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}}];function vI(e){return Math.round(16383*e)}var yI=function(e,t,n,r,a){var o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,w=gI[e].filter,I=1/r,C=Math.min(1,r),S=gI[e].win/C,E=Math.floor(2*(S+1)),T=new Int16Array((E+2)*n),N=0,A=!T.subarray||!T.set;for(o=0;o<n;o++){for(i=(o+.5)*I+a,s=Math.max(0,Math.floor(i-S)),c=(u=Math.min(t-1,Math.ceil(i+S)))-s+1,l=new Float32Array(c),d=new Int16Array(c),p=0,f=s,h=0;f<=u;f++,h++)p+=m=w((f+.5-i)*C),l[h]=m;for(g=0,h=0;h<l.length;h++)g+=v=l[h]/p,d[h]=vI(v);for(d[n>>1]+=vI(1-g),y=0;y<d.length&&0===d[y];)y++;if(y<d.length){for(b=d.length-1;b>0&&0===d[b];)b--;if(x=s+y,k=b-y+1,T[N++]=x,T[N++]=k,A)for(h=y;h<=b;h++)T[N++]=d[h];else T.set(d.subarray(y,b+1),N),N+=k}else T[N++]=0,T[N++]=0}return T};function bI(e){return e<0?0:e>255?255:e}var xI=function(e,t,n,r,a,o){var i,s,u,c,l,d,p,f,h,m,g,v=0,y=0;for(h=0;h<r;h++){for(l=0,m=0;m<a;m++){for(d=o[l++],p=o[l++],f=v+4*d|0,i=s=u=c=0;p>0;p--)c=c+(g=o[l++])*e[f+3]|0,u=u+g*e[f+2]|0,s=s+g*e[f+1]|0,i=i+g*e[f]|0,f=f+4|0;t[y+3]=bI(c+8192>>14),t[y+2]=bI(u+8192>>14),t[y+1]=bI(s+8192>>14),t[y]=bI(i+8192>>14),y=y+4*r|0}y=4*(h+1)|0,v=(h+1)*n*4|0}},kI=function(e,t,n,r,a,o){var i,s,u,c,l,d,p,f,h,m,g,v=0,y=0;for(h=0;h<r;h++){for(l=0,m=0;m<a;m++){for(d=o[l++],p=o[l++],f=v+4*d|0,i=s=u=c=0;p>0;p--)c=c+(g=o[l++])*e[f+3]|0,u=u+g*e[f+2]|0,s=s+g*e[f+1]|0,i=i+g*e[f]|0,f=f+4|0;t[y+3]=bI(c+8192>>14),t[y+2]=bI(u+8192>>14),t[y+1]=bI(s+8192>>14),t[y]=bI(i+8192>>14),y=y+4*r|0}y=4*(h+1)|0,v=(h+1)*n*4|0}},wI=!0;try{wI=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(Rx){}function II(e,t,n){if(wI)t.set(function(e){return new Uint8Array(e.buffer,0,e.byteLength)}(e),n);else for(var r=n,a=0;a<e.length;a++){var o=e[a];t[r++]=255&o,t[r++]=o>>8&255}}var CI={name:"resize",fn:function(e){var t=e.src,n=e.width,r=e.height,a=e.toWidth,o=e.toHeight,i=e.scaleX||e.toWidth/e.width,s=e.scaleY||e.toHeight/e.height,u=e.offsetX||0,c=e.offsetY||0,l=e.dest||new Uint8Array(a*o*4),d=void 0===e.quality?3:e.quality,p=e.alpha||!1,f=yI(d,n,a,i,u),h=yI(d,r,o,s,c),m=new Uint8Array(a*r*4);return xI(t,m,n,r,a,f),kI(m,l,r,a,o,h),p||function(e,t,n){for(var r=3,a=t*n*4|0;r<a;)e[r]=255,r=r+4|0}(l,a,o),l},wasm_fn:function(e){var t=e.src,n=e.width,r=e.height,a=e.toWidth,o=e.toHeight,i=e.scaleX||e.toWidth/e.width,s=e.scaleY||e.toHeight/e.height,u=e.offsetX||0,c=e.offsetY||0,l=e.dest||new Uint8Array(a*o*4),d=void 0===e.quality?3:e.quality,p=e.alpha||!1,f=yI(d,n,a,i,u),h=yI(d,r,o,s,c),m=this.__align(0+Math.max(t.byteLength,l.byteLength)),g=this.__align(m+r*a*4),v=this.__align(g+f.byteLength),y=v+h.byteLength,b=this.__instance("resize",y),x=new Uint8Array(this.__memory.buffer),k=new Uint32Array(this.__memory.buffer),w=new Uint32Array(t.buffer);return k.set(w),II(f,x,g),II(h,x,v),(b.exports.convolveHV||b.exports._convolveHV)(g,v,m,n,r,a,o),new Uint32Array(l.buffer).set(new Uint32Array(this.__memory.buffer,0,o*a)),p||function(e,t,n){for(var r=3,a=t*n*4|0;r<a;)e[r]=255,r=r+4|0}(l,a,o),l},wasm_src:"AGFzbQEAAAABFAJgBn9/f39/fwBgB39/f39/f38AAg8BA2VudgZtZW1vcnkCAAEDAwIAAQQEAXAAAAcZAghjb252b2x2ZQAACmNvbnZvbHZlSFYAAQkBAArmAwLBAwEQfwJAIANFDQAgBEUNACAFQQRqIRVBACEMQQAhDQNAIA0hDkEAIRFBACEHA0AgB0ECaiESAn8gBSAHQQF0IgdqIgZBAmouAQAiEwRAQQAhCEEAIBNrIRQgFSAHaiEPIAAgDCAGLgEAakECdGohEEEAIQlBACEKQQAhCwNAIBAoAgAiB0EYdiAPLgEAIgZsIAtqIQsgB0H/AXEgBmwgCGohCCAHQRB2Qf8BcSAGbCAKaiEKIAdBCHZB/wFxIAZsIAlqIQkgD0ECaiEPIBBBBGohECAUQQFqIhQNAAsgEiATagwBC0EAIQtBACEKQQAhCUEAIQggEgshByABIA5BAnRqIApBgMAAakEOdSIGQf8BIAZB/wFIG0EQdEGAgPwHcUEAIAZBAEobIAtBgMAAakEOdSIGQf8BIAZB/wFIG0EYdEEAIAZBAEobciAJQYDAAGpBDnUiBkH/ASAGQf8BSBtBCHRBgP4DcUEAIAZBAEobciAIQYDAAGpBDnUiBkH/ASAGQf8BSBtB/wFxQQAgBkEAShtyNgIAIA4gA2ohDiARQQFqIhEgBEcNAAsgDCACaiEMIA1BAWoiDSADRw0ACwsLIQACQEEAIAIgAyAEIAUgABAAIAJBACAEIAUgBiABEAALCw=="};function SI(e){var t=e||[],n={js:t.indexOf("js")>=0,wasm:t.indexOf("wasm")>=0};pI.call(this,n),this.features={js:n.js,wasm:n.wasm&&this.has_wasm()},this.use(mI),this.use(CI)}rI(SI,pI),SI.prototype.resizeAndUnsharp=function(e,t){var n=this.resize(e,t);return e.unsharpAmount&&this.unsharp_mask(n,e.toWidth,e.toHeight,e.unsharpAmount,e.unsharpRadius,e.unsharpThreshold),n};var EI=SI;function TI(e,t){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=t||2e3}TI.prototype.acquire=function(){var e,t=this;return 0!==this.available.length?e=this.available.pop():((e=this.create()).id=this.lastId++,e.release=function(){return t.release(e)}),this.acquired[e.id]=e,e},TI.prototype.release=function(e){var t=this;delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout((function(){return t.gc()}),100))},TI.prototype.gc=function(){var e=this,t=Date.now();this.available=this.available.filter((function(n){return!(t-n.lastUsed>e.idle&&(n.destroy(),1))})),0!==this.available.length?this.timeoutId=setTimeout((function(){return e.gc()}),100):this.timeoutId=0};var NI=TI;function AI(e){return Object.prototype.toString.call(e)}var _I=function(e){var t=AI(e);return"[object HTMLCanvasElement]"===t||"[object OffscreenCanvas]"===t||"[object Canvas]"===t},RI=function(e){return"[object HTMLImageElement]"===AI(e)},OI=function(e){return"[object ImageBitmap]"===AI(e)},FI=function(e){var t=0,n=[];function r(){t<e&&n.length&&(t++,n.shift()())}return function(e){return new Promise((function(a,o){n.push((function(){e().then((function(e){a(e),t--,r()}),(function(e){o(e),t--,r()}))})),r()}))}},MI=function(e){switch(e){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},DI=function(e){return Promise.resolve().then((function(){if("undefined"==typeof createImageBitmap)return!1;var t=e(100,100);return createImageBitmap(t,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then((function(e){var n=10===e.width;return e.close(),t=null,n}))})).catch((function(){return!1}))},BI=function(){var e,t=EI;onmessage=function(n){var r=n.data.opts;e||(e=new t(n.data.features));var a=e.resizeAndUnsharp(r);postMessage({result:a},[a.buffer])}};function PI(e){var t=Math.round(e);return Math.abs(e-t)<1e-5?t:Math.floor(e)}function LI(e){var t=Math.round(e);return Math.abs(e-t)<1e-5?t:Math.ceil(e)}var UI={},VI=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(VI=navigator.userAgent.indexOf("Safari")>=0)}catch(Rx){}var WI=1;"undefined"!=typeof navigator&&(WI=Math.min(navigator.hardwareConcurrency||1,4));var zI,jI,HI={tile:1024,concurrency:WI,features:["js","wasm","ww"],idle:2e3,createCanvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}},GI={quality:3,alpha:!1,unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0};function qI(){return{value:Zw(BI),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;e&&e.revokeObjectURL&&this.value.objectURL&&e.revokeObjectURL(this.value.objectURL)}}}}function KI(e){if(!(this instanceof KI))return new KI(e);this.options=Kw({},HI,e||{});var t="lk_".concat(this.options.concurrency);this.__limit=UI[t]||FI(this.options.concurrency),UI[t]||(UI[t]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}KI.prototype.init=function(){var e=this;if(this.__initPromise)return this.__initPromise;if(!1!==zI&&!0!==zI&&(zI=!1,"undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray))try{new ImageData(new Uint8ClampedArray(400),10,10),zI=!0}catch(t){}!1!==jI&&!0!==jI&&(jI=!1,"undefined"!=typeof ImageBitmap&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?jI=!0:this.debug("ImageBitmap does not support .close(), disabled")));var t=this.options.features.slice();if(t.indexOf("all")>=0&&(t=["cib","wasm","js","ww"]),this.__requested_features=t,this.__mathlib=new EI(t),t.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)try{Zw((function(){})).terminate(),this.features.ww=!0;var n="wp_".concat(JSON.stringify(this.options));UI[n]?this.__workersPool=UI[n]:(this.__workersPool=new NI(qI,this.options.idle),UI[n]=this.__workersPool)}catch(t){}var r,a=this.__mathlib.init().then((function(t){Kw(e.features,t.features)}));return r=jI?DI(this.options.createCanvas).then((function(n){e.features.cib&&t.indexOf("cib")<0?e.debug("createImageBitmap() resize supported, but disabled by config"):t.indexOf("cib")>=0&&(e.features.cib=n)})):Promise.resolve(!1),this.__initPromise=Promise.all([a,r]).then((function(){return e})),this.__initPromise},KI.prototype.resize=function(e,t,n){var r=this;this.debug("Start resize...");var a=Kw({},GI);if(isNaN(n)?n&&(a=Kw(a,n)):a=Kw(a,{quality:n}),a.toWidth=t.width,a.toHeight=t.height,a.width=e.naturalWidth||e.width,a.height=e.naturalHeight||e.height,0===t.width||0===t.height)return Promise.reject(new Error("Invalid output size: ".concat(t.width,"x").concat(t.height)));a.unsharpRadius>2&&(a.unsharpRadius=2);var o=!1,i=null;a.cancelToken&&(i=a.cancelToken.then((function(e){throw o=!0,e}),(function(e){throw o=!0,e})));var s=Math.ceil(Math.max(3,2.5*a.unsharpRadius|0));return this.init().then((function(){if(o)return i;if(r.features.cib){var n=t.getContext("2d",{alpha:Boolean(a.alpha)});return r.debug("Resize via createImageBitmap()"),createImageBitmap(e,{resizeWidth:a.toWidth,resizeHeight:a.toHeight,resizeQuality:MI(a.quality)}).then((function(e){if(o)return i;if(!a.unsharpAmount)return n.drawImage(e,0,0),e.close(),n=null,r.debug("Finished!"),t;r.debug("Unsharp result");var s=r.options.createCanvas(a.toWidth,a.toHeight),u=s.getContext("2d",{alpha:Boolean(a.alpha)});u.drawImage(e,0,0),e.close();var c=u.getImageData(0,0,a.toWidth,a.toHeight);return r.__mathlib.unsharp_mask(c.data,a.toWidth,a.toHeight,a.unsharpAmount,a.unsharpRadius,a.unsharpThreshold),n.putImageData(c,0,0),s.width=s.height=0,c=u=s=n=null,r.debug("Finished!"),t}))}var u={},c=function(e){return Promise.resolve().then((function(){return r.features.ww?new Promise((function(t,n){var a=r.__workersPool.acquire();i&&i.catch((function(e){return n(e)})),a.value.onmessage=function(e){a.release(),e.data.err?n(e.data.err):t(e.data.result)},a.value.postMessage({opts:e,features:r.__requested_features,preload:{wasm_nodule:r.__mathlib.__}},[e.src.buffer])})):r.__mathlib.resizeAndUnsharp(e,u)}))},l=function(e,t,n){var a,u,l,d=!1,p=function(t){return r.__limit((function(){if(o)return i;var s;if(_I(e))r.debug("Get tile pixel data"),s=a.getImageData(t.x,t.y,t.width,t.height);else{r.debug("Draw tile imageBitmap/image to temporary canvas");var d=r.options.createCanvas(t.width,t.height),p=d.getContext("2d",{alpha:Boolean(n.alpha)});p.globalCompositeOperation="copy",p.drawImage(u||e,t.x,t.y,t.width,t.height,0,0,t.width,t.height),r.debug("Get tile pixel data"),s=p.getImageData(0,0,t.width,t.height),d.width=d.height=0,p=d=null}var f={src:s.data,width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};return r.debug("Invoke resize math"),Promise.resolve().then((function(){return c(f)})).then((function(e){if(o)return i;var n;if(s=null,r.debug("Convert raw rgba tile result to ImageData"),zI)n=new ImageData(new Uint8ClampedArray(e),t.toWidth,t.toHeight);else if((n=l.createImageData(t.toWidth,t.toHeight)).data.set)n.data.set(e);else for(var a=n.data.length-1;a>=0;a--)n.data[a]=e[a];return r.debug("Draw tile"),VI?l.putImageData(n,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth+1e-5,t.toInnerHeight+1e-5):l.putImageData(n,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),null}))}))};return Promise.resolve().then((function(){if(l=t.getContext("2d",{alpha:Boolean(n.alpha)}),_I(e))return a=e.getContext("2d",{alpha:Boolean(n.alpha)}),null;if(OI(e))return u=e,d=!0,null;if(RI(e))return jI?(r.debug("Decode image via createImageBitmap"),createImageBitmap(e).then((function(e){u=e})).catch((function(e){return null}))):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')})).then((function(){if(o)return i;r.debug("Calculate tiles");var e=function(e){var t,n,r,a,o,i,s=e.toWidth/e.width,u=e.toHeight/e.height,c=PI(e.srcTileSize*s)-2*e.destTileBorder,l=PI(e.srcTileSize*u)-2*e.destTileBorder;if(c<1||l<1)throw new Error("Internal error in pica: target tile width/height is too small.");var d,p=[];for(a=0;a<e.toHeight;a+=l)for(r=0;r<e.toWidth;r+=c)(t=r-e.destTileBorder)<0&&(t=0),t+(o=r+c+e.destTileBorder-t)>=e.toWidth&&(o=e.toWidth-t),(n=a-e.destTileBorder)<0&&(n=0),n+(i=a+l+e.destTileBorder-n)>=e.toHeight&&(i=e.toHeight-n),d={toX:t,toY:n,toWidth:o,toHeight:i,toInnerX:r,toInnerY:a,toInnerWidth:c,toInnerHeight:l,offsetX:t/s-PI(t/s),offsetY:n/u-PI(n/u),scaleX:s,scaleY:u,x:PI(t/s),y:PI(n/u),width:LI(o/s),height:LI(i/u)},p.push(d);return p}({width:n.width,height:n.height,srcTileSize:r.options.tile,toWidth:n.toWidth,toHeight:n.toHeight,destTileBorder:s}).map((function(e){return p(e)}));function a(){u&&(d||u.close(),u=null)}return r.debug("Process tiles"),Promise.all(e).then((function(){return r.debug("Finished!"),a(),t}),(function(e){throw a(),e}))}))};return function e(t,n,a,s){if(o)return i;var u,c=Ky(t.shift(),2),d=c[0],p=c[1],f=0===t.length;return s=Kw({},s,{toWidth:d,toHeight:p,quality:f?s.quality:Math.min(1,s.quality)}),f||(u=r.options.createCanvas(d,p)),l(n,f?a:u,s).then((function(){return f?a:(s.width=d,s.height=p,e(t,u,a,s))})).then((function(e){return u&&(u.width=u.height=0),e}))}(function(e,t,n,r,a,o){var i=n/e,s=r/t,u=(2*o+2+1)/a;if(u>.5)return[[n,r]];var c=Math.ceil(Math.log(Math.min(i,s))/Math.log(u));if(c<=1)return[[n,r]];for(var l=[],d=0;d<c;d++){var p=Math.round(Math.pow(Math.pow(e,c-d-1)*Math.pow(n,d+1),1/c)),f=Math.round(Math.pow(Math.pow(t,c-d-1)*Math.pow(r,d+1),1/c));l.push([p,f])}return l}(a.width,a.height,a.toWidth,a.toHeight,r.options.tile,s),e,t,a)}))},KI.prototype.resizeBuffer=function(e){var t=this,n=Kw({},GI,e);return this.init().then((function(){return t.__mathlib.resizeAndUnsharp(n)}))},KI.prototype.toBlob=function(e,t,n){return t=t||"image/png",new Promise((function(r){if(e.toBlob)e.toBlob((function(e){return r(e)}),t,n);else if(e.convertToBlob)r(e.convertToBlob({type:t,quality:n}));else{for(var a=atob(e.toDataURL(t,n).split(",")[1]),o=a.length,i=new Uint8Array(o),s=0;s<o;s++)i[s]=a.charCodeAt(s);r(new Blob([i],{type:t}))}}))},KI.prototype.debug=function(){};var XI=new KI,QI=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.minSize,a=void 0===r?720:r,o=e/t;return e>t?{desW:Math.floor(a*o),desH:a}:{desW:a,desH:Math.floor(a/o)}},YI=Object.freeze({__proto__:null,scaleImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minSize,r=void 0===n?720:n;return new Promise((function(t){var n=URL.createObjectURL(e),a=new Image;a.src=n;var o=document.createElement("canvas");a.onload=function(){if(a.width&&a.height&&(a.width<r||a.height<r)){var e=QI(a.width,a.height,{minSize:r}),n=e.desW,i=e.desH;o.width=n,o.height=i,XI.resize(a,o).then((function(e){return XI.toBlob(e,"image/jpeg",1)})).then((function(e){return t(e)}))}else t(null)}}))},createResizer:function(e){var t=e.width,n=e.height,r=document.createElement("canvas"),a=r.getContext("2d");return r.width=t,r.height=n,{resize:function(e){var t=e.srcCanvas;return a.drawImage(t,0,0,r.width,r.height),r}}}});function $I(e,t,n){return function(e,t,n){for(var r=0,a=n[1],o=n[3],i=n[0],s=n[2],u=a;u<o;u++)for(var c=i;c<s;c++){var l=mw(e,t,u,c),d=l.r,p=l.g,f=l.b;d>=245&&f>=245&&p>245&&(r+=1)}return r}(e,t,function(e,t){var n=Math.floor(.025*e),r=e-n,a=Math.floor(.025*t);return[n,a,r,t-a]}(t,n))/(t*n)>=.001}function ZI(){return(ZI=Vk(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getContext("2d"),r=n.getImageData(0,0,t.width,t.height),a=r.data,dw){e.next=5;break}return e.abrupt("return",$I(a,r.width,r.height));case 5:return e.abrupt("return",dw.detectGlare(a,r.width,r.height));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var JI=Object.freeze({__proto__:null,isCardGlare:function(e){return ZI.apply(this,arguments)}}),eC=eI((function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){e.exports={BROWSER_TYPES:{CHROME:"Chrome",FIREFOX:"Firefox",OPERA:"Opera",YANDEX:"Yandex",SAFARI:"Safari",INTERNET_EXPLORER:"Internet Explorer",EDGE:"Edge",CHROMIUM:"Chromium",IE:"IE",MOBILE_SAFARI:"Mobile Safari",EDGE_CHROMIUM:"Edge Chromium"},DEVICE_TYPES:{MOBILE:"mobile",TABLET:"tablet",SMART_TV:"smarttv",CONSOLE:"console",WEARABLE:"wearable",BROWSER:void 0},OS_TYPES:{IOS:"iOS",ANDROID:"Android",WINDOWS_PHONE:"Windows Phone",WINDOWS:"Windows",MAC_OS:"Mac OS"},defaultData:{isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1}}},function(e,t,n){var r,a=n(2),o=n(0),i=o.BROWSER_TYPES,s=o.OS_TYPES,u=o.DEVICE_TYPES,c=n(4),l=c.checkType,d=c.broPayload,p=c.mobilePayload,f=c.wearPayload,h=c.consolePayload,m=c.stvPayload,g=c.getNavigatorInstance,v=c.isIOS13Check,y=new a,b=y.getBrowser(),x=y.getDevice(),k=y.getEngine(),w=y.getOS(),I=y.getUA(),C=i.CHROME,S=i.CHROMIUM,E=i.IE,T=i.INTERNET_EXPLORER,N=i.OPERA,A=i.FIREFOX,_=i.SAFARI,R=i.EDGE,O=i.YANDEX,F=i.MOBILE_SAFARI,M=u.MOBILE,D=u.TABLET,B=u.SMART_TV,P=u.BROWSER,L=u.WEARABLE,U=u.CONSOLE,V=s.ANDROID,W=s.WINDOWS_PHONE,z=s.IOS,j=s.WINDOWS,H=s.MAC_OS,G=function(){return w.name===s.WINDOWS&&"10"===w.version&&"string"==typeof I&&-1!==I.indexOf("Edg/")},q=function(){return b.name===R},K=function(){return v("iPad")},X=x.type===B,Q=x.type===U,Y=x.type===L,$=b.name===F||K(),Z=b.name===S,J=function(){switch(x.type){case M:case D:return!0;default:return!1}}()||K(),ee=x.type===M,te=x.type===D||K(),ne=x.type===P,re=w.name===V,ae=w.name===W,oe=w.name===z||K(),ie=b.name===C,se=b.name===A,ue=b.name===_||b.name===F,ce=b.name===N,le=b.name===T||b.name===E,de=w.version?w.version:"none",pe=w.name?w.name:"none",fe=b.major,he=b.version,me=b.name,ge=x.vendor?x.vendor:"none",ve=x.model?x.model:"none",ye=k.name,be=k.version,xe=I,ke=q()||G(),we=b.name===O,Ie=x.type,Ce=(r=g())&&(/iPad|iPhone|iPod/.test(r.platform)||"MacIntel"===r.platform&&r.maxTouchPoints>1)&&!window.MSStream,Se=K(),Ee=v("iPhone"),Te=v("iPod"),Ne=function(){var e=g(),t=e&&e.userAgent.toLowerCase();return"string"==typeof t&&/electron/.test(t)}(),Ae=G(),_e=q(),Re=w.name===j,Oe=w.name===H,Fe=l(x.type);e.exports={deviceDetect:function(){var e=Fe.isBrowser,t=Fe.isMobile,n=Fe.isTablet,r=Fe.isSmartTV,a=Fe.isConsole,o=Fe.isWearable;return e?d(e,b,k,w,I):r?m(r,k,w,I):a?h(a,k,w,I):t||n?p(Fe,x,w,I):o?f(o,k,w,I):void 0},isSmartTV:X,isConsole:Q,isWearable:Y,isMobileSafari:$,isChromium:Z,isMobile:J,isMobileOnly:ee,isTablet:te,isBrowser:ne,isAndroid:re,isWinPhone:ae,isIOS:oe,isChrome:ie,isFirefox:se,isSafari:ue,isOpera:ce,isIE:le,osVersion:de,osName:pe,fullBrowserVersion:fe,browserVersion:he,browserName:me,mobileVendor:ge,mobileModel:ve,engineName:ye,engineVersion:be,getUA:xe,isEdge:ke,isYandex:we,deviceType:Ie,isIOS13:Ce,isIPad13:Se,isIPhone13:Ee,isIPod13:Te,isElectron:Ne,isEdgeChromium:Ae,isLegacyEdge:_e,isWindows:Re,isMacOs:Oe}},function(e,t,n){var r;
/*!
	     * UAParser.js v0.7.18
	     * Lightweight JavaScript-based User-Agent string parser
	     * https://github.com/faisalman/ua-parser-js
	     *
	     * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
	     * Dual licensed under GPLv2 or MIT
	     */!function(a,o){var i="function",s="undefined",u="object",c="model",l="name",d="type",p="vendor",f="version",h="architecture",m="console",g="mobile",v="tablet",y="smarttv",b="wearable",x={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},k={rgx:function(e,t){for(var n,r,a,s,c,l,d=0;d<t.length&&!c;){var p=t[d],f=t[d+1];for(n=r=0;n<p.length&&!c;)if(c=p[n++].exec(e))for(a=0;a<f.length;a++)l=c[++r],Ty(s=f[a])===u&&s.length>0?2==s.length?Ty(s[1])==i?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3==s.length?Ty(s[1])!==i||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):o:this[s[0]]=l?s[1].call(this,l,s[2]):o:4==s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):o):this[s]=l||o;d+=2}},str:function(e,t){for(var n in t)if(Ty(t[n])===u&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(x.has(t[n][r],e))return"?"===n?o:n}else if(x.has(t[n],e))return"?"===n?o:n;return e}},w={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},I={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[l,f],[/(opios)[\/\s]+([\w\.]+)/i],[[l,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[l,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[l,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[l,"IE"],f],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[l,"Edge"],f],[/(yabrowser)\/([\w\.]+)/i],[[l,"Yandex"],f],[/(puffin)\/([\w\.]+)/i],[[l,"Puffin"],f],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[l,"UCBrowser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],f],[/(micromessenger)\/([\w\.]+)/i],[[l,"WeChat"],f],[/(qqbrowserlite)\/([\w\.]+)/i],[l,f],[/(QQ)\/([\d\.]+)/i],[l,f],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[l,f],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[l,f],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[l,f],[/(MetaSr)[\/\s]?([\w\.]+)/i],[l],[/(LBBROWSER)/i],[l],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[l,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[f,[l,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[f,[l,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[l,/(.+)/,"$1 WebView"],f],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[l,/(.+(?:g|us))(.+)/,"$1 $2"],f],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[l,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[l,f],[/(dolfin)\/([\w\.]+)/i],[[l,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[l,"Chrome"],f],[/(coast)\/([\w\.]+)/i],[[l,"Opera Coast"],f],[/fxios\/([\w\.-]+)/i],[f,[l,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[l,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,l],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[l,"GSA"],f],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[l,[f,k.str,w.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[l,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[l,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[l,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,x.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[h,/ower/,"",x.lowerize]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[h,x.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[c,p,[d,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[c,[p,"Apple"],[d,v]],[/(apple\s{0,1}tv)/i],[[c,"Apple TV"],[p,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[p,c,[d,v]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[c,[p,"Amazon"],[d,v]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[c,k.str,w.device.amazon.model],[p,"Amazon"],[d,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[c,p,[d,g]],[/\((ip[honed|\s\w*]+);/i],[c,[p,"Apple"],[d,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[p,c,[d,g]],[/\(bb10;\s(\w+)/i],[c,[p,"BlackBerry"],[d,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[c,[p,"Asus"],[d,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[p,"Sony"],[c,"Xperia Tablet"],[d,v]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[c,[p,"Sony"],[d,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[p,c,[d,m]],[/android.+;\s(shield)\sbuild/i],[c,[p,"Nvidia"],[d,m]],[/(playstation\s[34portablevi]+)/i],[c,[p,"Sony"],[d,m]],[/(sprint\s(\w+))/i],[[p,k.str,w.device.sprint.vendor],[c,k.str,w.device.sprint.model],[d,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[p,c,[d,v]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[p,[c,/_/g," "],[d,g]],[/(nexus\s9)/i],[c,[p,"HTC"],[d,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[c,[p,"Huawei"],[d,g]],[/(microsoft);\s(lumia[\s\w]+)/i],[p,c,[d,g]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[c,[p,"Microsoft"],[d,m]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[p,"Microsoft"],[d,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[c,[p,"Motorola"],[d,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[c,[p,"Motorola"],[d,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[p,x.trim],[c,x.trim],[d,y]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[p,"Samsung"],[d,y]],[/\(dtv[\);].+(aquos)/i],[c,[p,"Sharp"],[d,y]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[p,"Samsung"],c,[d,v]],[/smart-tv.+(samsung)/i],[p,[d,y],c],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[p,"Samsung"],c,[d,g]],[/sie-(\w*)/i],[c,[p,"Siemens"],[d,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[p,"Nokia"],c,[d,g]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[c,[p,"Acer"],[d,v]],[/android.+([vl]k\-?\d{3})\s+build/i],[c,[p,"LG"],[d,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[p,"LG"],c,[d,v]],[/(lg) netcast\.tv/i],[p,c,[d,y]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[c,[p,"LG"],[d,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[c,[p,"Lenovo"],[d,v]],[/linux;.+((jolla));/i],[p,c,[d,g]],[/((pebble))app\/[\d\.]+\s/i],[p,c,[d,b]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[p,c,[d,g]],[/crkey/i],[[c,"Chromecast"],[p,"Google"]],[/android.+;\s(glass)\s\d/i],[c,[p,"Google"],[d,b]],[/android.+;\s(pixel c)\s/i],[c,[p,"Google"],[d,v]],[/android.+;\s(pixel xl|pixel)\s/i],[c,[p,"Google"],[d,g]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[c,/_/g," "],[p,"Xiaomi"],[d,g]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[c,/_/g," "],[p,"Xiaomi"],[d,v]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[c,[p,"Meizu"],[d,v]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[c,[p,"OnePlus"],[d,g]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[c,[p,"RCA"],[d,v]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[c,[p,"Dell"],[d,v]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[c,[p,"Verizon"],[d,v]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[p,"Barnes & Noble"],c,[d,v]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[c,[p,"NuVision"],[d,v]],[/android.+;\s(k88)\sbuild/i],[c,[p,"ZTE"],[d,v]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[c,[p,"Swiss"],[d,g]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[c,[p,"Swiss"],[d,v]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[c,[p,"Zeki"],[d,v]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[p,"Dragon Touch"],c,[d,v]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[c,[p,"Insignia"],[d,v]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[c,[p,"NextBook"],[d,v]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[p,"Voice"],c,[d,g]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[p,"LvTel"],c,[d,g]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[c,[p,"Envizen"],[d,v]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[p,c,[d,v]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[c,[p,"MachSpeed"],[d,v]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[p,c,[d,v]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[c,[p,"Rotor"],[d,v]],[/android.+(KS(.+))\s+build/i],[c,[p,"Amazon"],[d,v]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[p,c,[d,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[d,x.lowerize],p,c],[/(android[\w\.\s\-]{0,9});.+build/i],[c,[p,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[l,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,f],[/rv\:([\w\.]{1,9}).+(gecko)/i],[f,l]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[l,[f,k.str,w.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[f,k.str,w.os.windows.version]],[/\((bb)(10);/i],[[l,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[l,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[l,"Symbian"],f],[/\((series40);/i],[l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[l,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],f],[/(sunos)\s?([\w\.\d]*)/i],[[l,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[l,f],[/(haiku)\s(\w+)/i],[l,f],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[f,/_/g,"."],[l,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[l,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[l,f]]},C=function e(t,n){if("object"==Ty(t)&&(n=t,t=o),!(this instanceof e))return new e(t,n).getResult();var r=t||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),i=n?x.extend(I,n):I;return this.getBrowser=function(){var e={name:o,version:o};return k.rgx.call(e,r,i.browser),e.major=x.major(e.version),e},this.getCPU=function(){var e={architecture:o};return k.rgx.call(e,r,i.cpu),e},this.getDevice=function(){var e={vendor:o,model:o,type:o};return k.rgx.call(e,r,i.device),e},this.getEngine=function(){var e={name:o,version:o};return k.rgx.call(e,r,i.engine),e},this.getOS=function(){var e={name:o,version:o};return k.rgx.call(e,r,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};C.VERSION="0.7.18",C.BROWSER={NAME:l,MAJOR:"major",VERSION:f},C.CPU={ARCHITECTURE:h},C.DEVICE={MODEL:c,VENDOR:p,TYPE:d,CONSOLE:m,MOBILE:g,SMARTTV:y,TABLET:v,WEARABLE:b,EMBEDDED:"embedded"},C.ENGINE={NAME:l,VERSION:f},C.OS={NAME:l,VERSION:f},Ty(t)!==s?(Ty(e)!==s&&e.exports&&(t=e.exports=C),t.UAParser=C):n(3)?(r=function(){return C}.call(t,n,t,e))===o||(e.exports=r):a&&(a.UAParser=C);var S=a&&(a.jQuery||a.Zepto);if(Ty(S)!==s){var E=new C;S.ua=E.getResult(),S.ua.get=function(){return E.getUA()},S.ua.set=function(e){E.setUA(e);var t=E.getResult();for(var n in t)S.ua[n]=t[n]}}}("object"==("undefined"==typeof window?"undefined":Ty(window))?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),o=a.DEVICE_TYPES,i=a.defaultData,s=t.getNavigatorInstance=function(){return!("undefined"==typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},u=t.isIOS13Check=function(e){var t=s();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)};e.exports={checkType:function(e){switch(e){case o.MOBILE:return{isMobile:!0};case o.TABLET:return{isTablet:!0};case o.SMART_TV:return{isSmartTV:!0};case o.CONSOLE:return{isConsole:!0};case o.WEARABLE:return{isWearable:!0};case o.BROWSER:return{isBrowser:!0};default:return i}},broPayload:function(e,t,n,r,a){return{isBrowser:e,browserMajorVersion:t.major,browserFullVersion:t.version,browserName:t.name,engineName:n.name||!1,engineVersion:n.version,osName:r.name,osVersion:r.version,userAgent:a}},mobilePayload:function(e,t,n,a){return r({},e,{vendor:t.vendor,model:t.model,os:n.name,osVersion:n.version,ua:a})},stvPayload:function(e,t,n,r){return{isSmartTV:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},consolePayload:function(e,t,n,r){return{isConsole:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},wearPayload:function(e,t,n,r){return{isWearable:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},getNavigatorInstance:s,isIOS13Check:u}}])})),tC=Object.freeze({__proto__:null,getUAMetadata:function(){return{"X-TV-Device-Model":"".concat(eC.browserName," ").concat(eC.browserVersion),"X-TV-OS-Version":"".concat(eC.osName," ").concat(eC.osVersion),"X-TV-OS-Platform":eC.isMobile?"".concat(eC.osName.toLowerCase(),"_web"):"web"}}}),nC=Object.freeze({__proto__:null,loadExternalScript:function(e){var t=e.url;return new Promise((function(e){var n=document.createElement("script");n.onload=e,n.src=t,document.head.appendChild(n)}))}}),rC=function(){function e(t,n){_y(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return Oy(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),aC=function(){function e(){_y(this,e)}return Oy(e,[{key:"refCount",value:function(e){return oC("refCount")}},{key:"incRef",value:function(e){return oC("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return oC("time")}},{key:"read",value:function(e){return oC("read")}},{key:"readSync",value:function(e){return oC("readSync")}},{key:"numDataIds",value:function(){return oC("numDataIds")}},{key:"disposeData",value:function(e,t){return oC("disposeData")}},{key:"write",value:function(e,t,n){return oC("write")}},{key:"move",value:function(e,t,n,r,a){return oC("move")}},{key:"memory",value:function(){return oC("memory")}},{key:"floatPrecision",value:function(){return oC("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return oC("dispose")}}]),e}();function oC(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen"))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function iC(e,t,n){return Math.max(e,Math.min(t,n))}function sC(e){return e%2==0?e:e+1}function uC(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function cC(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function lC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";cC(fC(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function dC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||CC(e)&&!n)for(var r=0;r<e.length;++r)dC(e[r],t,n);else t.push(e);return t}function pC(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function fC(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function hC(e){return e%1==0}function mC(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function gC(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function vC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var o=0;!function i(){if(e())r();else{o++;var s=t(o);null!=n&&o>=n?a():setTimeout(i,s)}}()}))}function yC(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when there are 0 elements"));if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got ".concat(t," / ").concat(n));var o=e.slice();return o[r]=t/n,o}function bC(e,t){var n=t.length;return cC((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but got axis ").concat(e)})),cC(e.every((function(e){return hC(e)})),(function(){return"All values in axis param must be integers but got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function xC(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:bC(t,e).sort(),i=0,s=0;s<e.length;++s){if(null!=o){if(o[i]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==o[i]||o[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function kC(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function wC(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function IC(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function CC(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function SC(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function EC(e){return"string"==typeof e||e instanceof String}function TC(e){return Array.isArray(e)?TC(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":"number"==typeof e?"float32":EC(e)?"string":function(e){return"boolean"==typeof e}(e)?"bool":"float32"}function NC(e){return!!(e&&e.constructor&&e.call&&e.apply)}function AC(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function _C(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function RC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var o=t[0]*(r?2:1),i=0;i<o;i++)a[i]=n[e+i];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=RC(e+l*c,u,n,r);return a}function OC(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return RC(0,e,t,n)}function FC(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function MC(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return OC(e,new Float32Array(n));if("int32"===t)return OC(e,new Int32Array(n));if("bool"===t)return OC(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function DC(e){e.forEach((function(t){cC(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape [".concat(e,"].")}))}))}function BC(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function PC(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function LC(e){return e&&e.then&&"function"==typeof e.then}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var UC=function(){function e(t){_y(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=VC,this.populateURLFlags()}var t;return Oy(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&console.warn("Platform ".concat(this.platformName," has already been set. Overwriting the platform with ").concat(t,".")),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:(t=Ay(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t in this.flags,e.t0){e.next=5;break}return e.next=4,this.evaluateFlag(t);case 4:this.flags[t]=e.sent;case 5:return e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(LC(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. Please use getAsync() instead."));return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t=this.getQueryParams(this.global.location.search);"tfjsflags"in t&&t.tfjsflags.split(",").forEach((function(t){var n=Ky(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}},{key:"features",get:function(){return this.flags}}]),e}();function VC(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function WC(){return jC}var zC,jC=null;function HC(){if(null==zC){var e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof global)e=global;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}zC=e}return zC}function GC(e,t){var n=function(){var e=HC();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var qC=GC("kernelRegistry",(function(){return new Map})),KC=GC("gradRegistry",(function(){return new Map}));function XC(e,t){var n=ZC(e,t);return qC.get(n)}function QC(e){return KC.get(e)}function YC(e){for(var t=qC.entries(),n=[];;){var r=t.next(),a=r.done,o=r.value;if(a)break;var i=Ky(o,2),s=i[0],u=i[1];Ky(s.split("_"),1)[0]===e&&n.push(u)}return n}function $C(e){var t=e.kernelName,n=e.backendName,r=ZC(t,n);qC.has(r)&&console.warn("The kernel '".concat(t,"' for backend '").concat(n,"' is already registered")),qC.set(r,e)}function ZC(e,t){return"".concat(t,"_").concat(e)}var JC=tS,eS=null;try{eS=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(Rx){}function tS(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function nS(e){return!0===(e&&e.__isLong__)}tS.prototype.__isLong__,Object.defineProperty(tS.prototype,"__isLong__",{value:!0}),tS.isLong=nS;var rS={},aS={};function oS(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=aS[e])?r:(n=sS(e,(0|e)<0?-1:0,!0),a&&(aS[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=rS[e])?r:(n=sS(e,e<0?-1:0,!1),a&&(rS[e]=n),n)}function iS(e,t){if(isNaN(e))return t?gS:mS;if(t){if(e<0)return gS;if(e>=pS)return kS}else{if(e<=-fS)return wS;if(e+1>=fS)return xS}return e<0?iS(-e,t).neg():sS(e%dS|0,e/dS|0,t)}function sS(e,t,n){return new tS(e,t,n)}tS.fromInt=oS,tS.fromNumber=iS,tS.fromBits=sS;var uS=Math.pow;function cS(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return mS;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return cS(e.substring(1),t,n).neg();for(var a=iS(uS(n,8)),o=mS,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),u=parseInt(e.substring(i,i+s),n);if(s<8){var c=iS(uS(n,s));o=o.mul(c).add(iS(u))}else o=(o=o.mul(a)).add(iS(u))}return o.unsigned=t,o}function lS(e,t){return"number"==typeof e?iS(e,t):"string"==typeof e?cS(e,t):sS(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}tS.fromString=cS,tS.fromValue=lS;var dS=4294967296,pS=dS*dS,fS=pS/2,hS=oS(1<<24),mS=oS(0);tS.ZERO=mS;var gS=oS(0,!0);tS.UZERO=gS;var vS=oS(1);tS.ONE=vS;var yS=oS(1,!0);tS.UONE=yS;var bS=oS(-1);tS.NEG_ONE=bS;var xS=sS(-1,2147483647,!1);tS.MAX_VALUE=xS;var kS=sS(-1,-1,!0);tS.MAX_UNSIGNED_VALUE=kS;var wS=sS(0,-2147483648,!1);tS.MIN_VALUE=wS;var IS=tS.prototype;IS.toInt=function(){return this.unsigned?this.low>>>0:this.low},IS.toNumber=function(){return this.unsigned?(this.high>>>0)*dS+(this.low>>>0):this.high*dS+(this.low>>>0)},IS.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(wS)){var t=iS(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=iS(uS(e,6),this.unsigned),o=this,i="";;){var s=o.div(a),u=(o.sub(s.mul(a)).toInt()>>>0).toString(e);if((o=s).isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}},IS.getHighBits=function(){return this.high},IS.getHighBitsUnsigned=function(){return this.high>>>0},IS.getLowBits=function(){return this.low},IS.getLowBitsUnsigned=function(){return this.low>>>0},IS.getNumBitsAbs=function(){if(this.isNegative())return this.eq(wS)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},IS.isZero=function(){return 0===this.high&&0===this.low},IS.eqz=IS.isZero,IS.isNegative=function(){return!this.unsigned&&this.high<0},IS.isPositive=function(){return this.unsigned||this.high>=0},IS.isOdd=function(){return 1==(1&this.low)},IS.isEven=function(){return 0==(1&this.low)},IS.equals=function(e){return nS(e)||(e=lS(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},IS.eq=IS.equals,IS.notEquals=function(e){return!this.eq(e)},IS.neq=IS.notEquals,IS.ne=IS.notEquals,IS.lessThan=function(e){return this.comp(e)<0},IS.lt=IS.lessThan,IS.lessThanOrEqual=function(e){return this.comp(e)<=0},IS.lte=IS.lessThanOrEqual,IS.le=IS.lessThanOrEqual,IS.greaterThan=function(e){return this.comp(e)>0},IS.gt=IS.greaterThan,IS.greaterThanOrEqual=function(e){return this.comp(e)>=0},IS.gte=IS.greaterThanOrEqual,IS.ge=IS.greaterThanOrEqual,IS.compare=function(e){if(nS(e)||(e=lS(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},IS.comp=IS.compare,IS.negate=function(){return!this.unsigned&&this.eq(wS)?wS:this.not().add(vS)},IS.neg=IS.negate,IS.add=function(e){nS(e)||(e=lS(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,a=65535&this.low,o=e.high>>>16,i=65535&e.high,s=e.low>>>16,u=0,c=0,l=0,d=0;return l+=(d+=a+(65535&e.low))>>>16,c+=(l+=r+s)>>>16,u+=(c+=n+i)>>>16,u+=t+o,sS((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},IS.subtract=function(e){return nS(e)||(e=lS(e)),this.add(e.neg())},IS.sub=IS.subtract,IS.multiply=function(e){if(this.isZero())return mS;if(nS(e)||(e=lS(e)),eS)return sS(eS.mul(this.low,this.high,e.low,e.high),eS.get_high(),this.unsigned);if(e.isZero())return mS;if(this.eq(wS))return e.isOdd()?wS:mS;if(e.eq(wS))return this.isOdd()?wS:mS;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(hS)&&e.lt(hS))return iS(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,a=65535&this.low,o=e.high>>>16,i=65535&e.high,s=e.low>>>16,u=65535&e.low,c=0,l=0,d=0,p=0;return d+=(p+=a*u)>>>16,l+=(d+=r*u)>>>16,d&=65535,l+=(d+=a*s)>>>16,c+=(l+=n*u)>>>16,l&=65535,c+=(l+=r*s)>>>16,l&=65535,c+=(l+=a*i)>>>16,c+=t*u+n*s+r*i+a*o,sS((d&=65535)<<16|(p&=65535),(c&=65535)<<16|(l&=65535),this.unsigned)},IS.mul=IS.multiply,IS.divide=function(e){if(nS(e)||(e=lS(e)),e.isZero())throw Error("division by zero");var t,n,r;if(eS)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?sS((this.unsigned?eS.div_u:eS.div_s)(this.low,this.high,e.low,e.high),eS.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?gS:mS;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return gS;if(e.gt(this.shru(1)))return yS;r=gS}else{if(this.eq(wS))return e.eq(vS)||e.eq(bS)?wS:e.eq(wS)?vS:(t=this.shr(1).div(e).shl(1)).eq(mS)?e.isNegative()?vS:bS:(n=this.sub(e.mul(t)),r=t.add(n.div(e)));if(e.eq(wS))return this.unsigned?gS:mS;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=mS}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(t)/Math.LN2),o=a<=48?1:uS(2,a-48),i=iS(t),s=i.mul(e);s.isNegative()||s.gt(n);)s=(i=iS(t-=o,this.unsigned)).mul(e);i.isZero()&&(i=vS),r=r.add(i),n=n.sub(s)}return r},IS.div=IS.divide,IS.modulo=function(e){return nS(e)||(e=lS(e)),eS?sS((this.unsigned?eS.rem_u:eS.rem_s)(this.low,this.high,e.low,e.high),eS.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},IS.mod=IS.modulo,IS.rem=IS.modulo,IS.not=function(){return sS(~this.low,~this.high,this.unsigned)},IS.and=function(e){return nS(e)||(e=lS(e)),sS(this.low&e.low,this.high&e.high,this.unsigned)},IS.or=function(e){return nS(e)||(e=lS(e)),sS(this.low|e.low,this.high|e.high,this.unsigned)},IS.xor=function(e){return nS(e)||(e=lS(e)),sS(this.low^e.low,this.high^e.high,this.unsigned)},IS.shiftLeft=function(e){return nS(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?sS(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):sS(0,this.low<<e-32,this.unsigned)},IS.shl=IS.shiftLeft,IS.shiftRight=function(e){return nS(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?sS(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):sS(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},IS.shr=IS.shiftRight,IS.shiftRightUnsigned=function(e){if(nS(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?sS(this.low>>>e|t<<32-e,t>>>e,this.unsigned):sS(32===e?t:t>>>e-32,0,this.unsigned)},IS.shru=IS.shiftRightUnsigned,IS.shr_u=IS.shiftRightUnsigned,IS.toSigned=function(){return this.unsigned?sS(this.low,this.high,!1):this},IS.toUnsigned=function(){return this.unsigned?this:sS(this.low,this.high,!0)},IS.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},IS.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},IS.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},tS.fromBytes=function(e,t,n){return n?tS.fromBytesLE(e,t):tS.fromBytesBE(e,t)},tS.fromBytesLE=function(e,t){return new tS(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},tS.fromBytesBE=function(e,t){return new tS(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var CS=JC||Object.freeze(Object.assign(Object.create(null),JC,{default:JC}));function SS(e){return CS.fromString(e,!0,16)}var ES=SS("c3a5c85c97cb3127"),TS=SS("b492b66fbe98f273"),NS=SS("9ae16a3b2f90404f");function AS(e){return e.xor(e.shru(47))}function _S(e,t,n){var r=e.slice(t,t+n);return CS.fromBytes(Array.from(r),!0,!0)}function RS(e,t){return _S(e,t,8)}function OS(e,t){return _S(e,t,4)}function FS(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function MS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:SS("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function DS(e,t,n,r){return function(e,t,n,r,a,o){a=a.add(e),o=FS(o.add(a).add(r),21);var i=a;return a=(a=a.add(t)).add(n),o=o.add(FS(a,44)),[a.add(r),o.add(i)]}(RS(e,t),RS(e,t+8),RS(e,t+16),RS(e,t+24),n,r)}function BS(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,r=CS.fromNumber(81,!0);if(n<=32)return n<=16?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=NS.add(2*t),r=RS(e,0).add(NS),a=RS(e,t-8);return MS(FS(a,37).mul(n).add(r),FS(r,25).add(a).mul(n),n)}if(t>=4){var o=NS.add(2*t);return MS(OS(e,0).shl(3).add(t),OS(e,t-4),o)}if(t>0){var i=e[0]+(e[t>>1]<<8),s=t+(e[t-1]<<2);return AS(NS.mul(i).xor(ES.mul(s))).mul(NS)}return NS}(e,n):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=NS.add(2*t),r=RS(e,0).mul(TS),a=RS(e,8),o=RS(e,t-8).mul(n),i=RS(e,t-16).mul(NS);return MS(FS(r.add(a),43).add(FS(o,30)).add(i),r.add(FS(a.add(NS),18)).add(o),n)}(e,n);if(n<=64)return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=NS.add(2*t),r=RS(e,0).mul(NS),a=RS(e,8),o=RS(e,t-8).mul(n),i=RS(e,t-16).mul(NS),s=FS(r.add(a),43).add(FS(o,30)).add(i),u=MS(s,r.add(FS(a.add(NS),18)).add(o),n),c=RS(e,16).mul(n),l=RS(e,24),d=s.add(RS(e,t-32)).mul(n),p=u.add(RS(e,t-24)).mul(n);return MS(FS(c.add(l),43).add(FS(d,30)).add(p),c.add(FS(l.add(r),18)).add(d),n)}(e,n);var a=r,o=r.mul(TS).add(113),i=AS(o.mul(NS).add(113)).mul(NS),s=[CS.UZERO,CS.UZERO],u=[CS.UZERO,CS.UZERO];a=a.mul(NS).add(RS(e,0));var c=0,l=64*(n-1>>6),d=l+(n-1&63)-63;do{var p;a=FS(a.add(o).add(s[0]).add(RS(e,c+8)),37).mul(TS),o=FS(o.add(s[1]).add(RS(e,c+48)),42).mul(TS),a=a.xor(u[1]),o=o.add(s[0]).add(RS(e,c+40)),i=FS(i.add(u[0]),33).mul(TS),s=DS(e,c,s[1].mul(TS),a.add(u[0])),u=DS(e,c+32,i.add(u[1]),o.add(RS(e,c+16))),i=(p=[a,i])[0],a=p[1],c+=64}while(c!==l);var f=TS.add(i.and(255).shl(1));return c=d,u[0]=u[0].add(n-1&63),s[0]=s[0].add(u[0]),u[0]=u[0].add(s[0]),a=FS(a.add(o).add(s[0]).add(RS(e,c+8)),37).mul(f),o=FS(o.add(s[1]).add(RS(e,c+48)),42).mul(f),a=a.xor(u[1].mul(9)),o=o.add(s[0].mul(9).add(RS(e,c+40))),i=FS(i.add(u[0]),33).mul(f),s=DS(e,c,s[1].mul(f),a.add(u[0])),u=DS(e,c+32,i.add(u[1]),o.add(RS(e,c+16))),i=(t=[a,i])[0],a=t[1],MS(MS(s[0],u[0],f).add(AS(o).mul(ES)).add(i),MS(s[1],u[1],f).add(a),f)
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function PS(e,t){return"string"===t?VS(e):LS([e],t)}function LS(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=dC(e)),WC().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function US(){return WC().platform.now()}function VS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",WC().platform.encode(e,t)}function WS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",WC().platform.decode(e,t)
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var zS=function(){function e(t,n){_y(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new HS)}return Oy(e,[{key:"profileKernel",value:function(e,t,n){var r,a,o=function(){r=n()},i=US();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();var s,u=rb(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(e){u.e(e)}finally{u.f()}a=Promise.resolve({kernelMs:US()-i})}if(WC().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(t){var n=r[t];n.data().then((function(t){jS(t,n.dtype,e)}))},l=0;l<r.length;l++)c(l);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,o=e.inputs,i=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,i]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],o,r[2])}))}))}}]),e}();function jS(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}return!1}var HS=function(){function e(){_y(this,e)}return Oy(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,o){var i="number"==typeof r?gC("".concat(r,"ms"),9):r.error,s=gC(e,25),u=t.rank,c=t.size,l=gC(t.shape.toString(),14),d="";for(var p in a){var f=a[p];if(null!=f){var h=f.shape||t.shape,m=h.length;d+="".concat(p,": ").concat(m,"D ").concat(m>0?h:""," ")}}console.log("%c".concat(s,"\t%c").concat(i,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function GS(e,t,n,r){var a=_C(t),o=function(e,t,n,r){var a=pC(t),o=r[r.length-1],i=new Array(o).fill(0),s=t.length,u="complex64"===n?QS(e):e;if(s>1)for(var c=0;c<a/o;c++)for(var l=c*o,d=0;d<o;d++)i[d]=Math.max(i[d],qS(u[l+d],0,n).length);return i}(e,t,n,a),i=t.length,s=XS(e,t,n,a,o),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(i)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function qS(e,t,n){return gC(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ").concat(parseFloat(e[1].toFixed(7)),"j"):EC(e)?"'".concat(e,"'"):"bool"===n?KS(e):parseFloat(e.toFixed(7)).toString(),t)}function KS(e){return 0===e?"false":"true"}function XS(e,t,n,r,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i="complex64"===n?2:1,s=t[0],u=t.length;if(0===u)return"complex64"===n?[qS(QS(e)[0],0,n)]:"bool"===n?[KS(e[0])]:[e[0].toString()];if(1===u){if(s>20){var c=3*i,l=Array.from(e.slice(0,c)),d=Array.from(e.slice((s-3)*i,s*i));return"complex64"===n&&(l=QS(l),d=QS(d)),["["+l.map((function(e,t){return qS(e,a[t],n)})).join(", ")+", ..., "+d.map((function(e,t){return qS(e,a[s-3+t],n)})).join(", ")+"]"]}return["["+("complex64"===n?QS(e):Array.from(e)).map((function(e,t){return qS(e,a[t],n)})).join(", ")+"]"]}var p=t.slice(1),f=r.slice(1),h=r[0]*i,m=[];if(s>20){for(var g=0;g<3;g++){var v=g*h,y=v+h;m.push.apply(m,Xy(XS(e.slice(v,y),p,n,f,a,!1)))}m.push("...");for(var b=s-3;b<s;b++){var x=b*h,k=x+h;m.push.apply(m,Xy(XS(e.slice(x,k),p,n,f,a,b===s-1)))}}else for(var w=0;w<s;w++){var I=w*h,C=I+h;m.push.apply(m,Xy(XS(e.slice(I,C),p,n,f,a,w===s-1)))}var S=2===u?",":"";m[0]="["+m[0]+S;for(var E=1;E<m.length-1;E++)m[E]=" "+m[E]+S;for(var T=",\n",N=2;N<u;N++)T+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(o?"":T),m}function QS(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var YS=function(){function e(t,n,r){var a=this;if(_y(this,e),this.dtype=n,this.shape=t.slice(),this.size=pC(t),null!=r){var o=r.length;cC(o===this.size,(function(){return"Length of values '".concat(o,"' does not match the size inferred by the shape '").concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||wC(n,this.size),this.strides=_C(t)}return Oy(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),cC(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must match the rank (").concat(t.rank,")")}));var o=this.locToIndex(r);this.values[o]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,o=t;a<o.length;a++){var i=o[a];if(i<0||i>=this.shape[r]){var s="Requested out of range element at ".concat(t,".   Buffer shape=").concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"toTensor",value:function(){return $S().makeTensor(this.values,this.shape,this.dtype)}},{key:"rank",get:function(){return this.shape.length}}]),e}(),$S=null,ZS=null,JS=function(){function e(t,n,r,a){_y(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=pC(t),this.strides=_C(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}var t,n,r,a;return Oy(e,[{key:"buffer",value:(a=Ay(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",ZS.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"bufferSync",value:function(){return ZS.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:(r=Ay(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",OC(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"arraySync",value:function(){return OC(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:(n=Ay(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=$S().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return WS(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])}))),function(){return n.apply(this,arguments)})},{key:"dataSync",value:function(){this.throwIfDisposed();var e=$S().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return WS(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:(t=Ay(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,$S().read(this.dataId);case 3:return t=e.sent,e.abrupt("return","string"===this.dtype?t:new Uint8Array(t.buffer));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dispose",value:function(){this.isDisposed||($S().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ZS.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),ZS.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return GS(this.dataSync(),this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),ZS.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),$S().makeVariable(this,e,t,n)}},{key:"rank",get:function(){return this.shape.length}},{key:"isDisposed",get:function(){return this.isDisposedInternal}}]),e}();Object.defineProperty(JS,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),GC("Tensor",(function(){return JS}));var eE,tE,nE,rE,aE,oE=function(e){Dy(n,e);var t=Hy(n);function n(e,r,a,o){var i;return _y(this,n),(i=t.call(this,e.shape,e.dtype,e.dataId,o)).trainable=r,i.name=a,i}return Oy(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and previous value (").concat(this.dtype,") must match"));if(!fC(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and previous value (").concat(this.shape,") must match"));$S().disposeTensor(this),this.dataId=e.dataId,$S().incRef(this,null)}},{key:"dispose",value:function(){$S().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(JS);
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */Object.defineProperty(oE,Symbol.hasInstance,{value:function(e){return e instanceof JS&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(eE||(eE={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(tE||(tE={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(nE||(nE={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(rE||(rE={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(aE||(aE={}));var iE={float32:rE,int32:tE,bool:nE,complex64:aE};function sE(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return iE[e][t]}function uE(e){return sE(e,"int32")}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function cE(e){var t=[];return lE(e,t,new Set),t}function lE(e,t,n){if(null!=e)if(e instanceof JS)t.push(e);else if(r=e,Array.isArray(r)||"object"==Ty(r)){var r,a=e;
/**
	   * @license
	   * Copyright 2018 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */for(var o in a){var i=a[o];n.has(i)||(n.add(i),lE(i,t,n))}}}function dE(e){return null!=e.kernelName}var pE=function(){function e(){_y(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return Oy(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),fE=function(){function e(t){_y(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new pE}var t,n,r,a;return Oy(e,[{key:"ready",value:(a=Ay(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=17;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=14;break}return e.next=13,this.setBackend(r);case 13:return e.abrupt("return",void e.sent);case 14:n++,e.next=6;break;case 17:throw new Error("Could not initialize any backends, all backend initializations failed.");case 18:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(console.warn("".concat(e," backend was already registered. Reusing existing backend factory.")),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:(r=Ay(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=14;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=11;break}return e.next=8,r;case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=r;case 12:if(e.t0){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",(this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new zS(this.backendInstance),!0));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setupRegisteredKernels",value:function(){var e=this;YC(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;YC(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof aC||"function"!=typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,o=r.then((function(n){return!(a<t.pendingBackendInitId||(t.registry[e]=n,t.pendingBackendInit=null,0))})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend ".concat(e," failed")),console.warn(n.stack||n.message)),!1}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}catch(n){return console.warn("Initialization of backend ".concat(e," failed")),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,o=r.asyncInit;if(o||a)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=mE.runKernel("Identity",{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e};return mE.runKernel("Cast",t,{dtype:"float32"})}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,null==XC(e,this.backendName))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-o;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak (").concat(i," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,o=[],i=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=dE(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(dE(e)){var l=e.kernelName,d=e.inputs,p=e.attrs;null==this.backendName&&this.backend;var f=XC(l,this.backendName);cC(null!=f,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=f.kernelFunc({inputs:d,attrs:p,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(i){var s=a.getTensorsForGradient(l,d,n);o=a.saveTensorsForBackwardMode(s)}return n}}else{var h=e.forwardFunc,m=function(e){i&&(o=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return h(a.backend,m)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var g,v=e.inputs,y=e.attrs,b=dE(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(g=a.profiler.profileKernel(c,v,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(g),t=g.outputs):t=n()})),i&&this.addTapeNode(c,v,t,b,o,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(v).map((function(e){return null!=v[e]?v[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=QC(e);if(null!=r){var a,o=r.inputsToSave||[],i=r.outputsToSave||[];r.saveAllInputs?(cC(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=o.map((function(e){return t[e]}));var s=n.filter((function(e,t){return i[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&EC(e[0])&&(a=e.map((function(e){return VS(e)})));var o=r.write(a,t,n),i=new JS(t,n,o,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){var s=this.state.tensorInfo.get(o),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return i}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a=new JS(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new oE(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*SC(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof oE||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*SC(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:(n=Ay(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=5,t();case 5:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Xy(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=rb(this.state.activeProfile.kernels),e.prev=11,a.s();case 13:if((o=a.n()).done){e.next=23;break}return i=o.value,e.next=17,i.kernelTimeMs;case 17:return i.kernelTimeMs=e.sent,e.next=20,i.extraInfo;case 20:i.extraInfo=e.sent;case 21:e.next=13;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(11),a.e(e.t0);case 28:return e.prev=28,a.f(),e.finish(28);case 31:return e.abrupt("return",this.state.activeProfile);case 32:case"end":return e.stop()}}),e,this,[[11,25,28,31]])}))),function(e){return n.apply(this,arguments)})},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,o){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=QC(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=FC(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,o)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=cE(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||r.has(o.id)||o.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(cC(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));cC(o instanceof JS,(function(){return"The result y returned by f() must be a tensor."}));var i=function(e,t,n){for(var r={},a={},o=0;o<t.length;o++)r[t[o].id]=!0;for(var i=0;i<e.length;i++){var s=e[i],u=s.inputs;for(var c in u){for(var l=u[c],d=!1,p=0;p<t.length;p++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var f={};f[n.id]=!0;for(var h={},m=e.length-1;m>=0;m--)for(var g=e[m],v=g.inputs,y=0;y<g.outputs.length;y++)if(f[g.outputs[y].id]){for(var b in v)f[v[b].id]=!0,h[g.id]=!0;break}for(var x=[],k=0;k<e.length;k++){var w=e[k];if(a[w.id]&&h[w.id]){var I={};for(var C in w.inputs){var S=w.inputs[C];r[S.id]&&(I[C]=S)}var E=Object.assign({},w);E.inputs=I,E.outputs=w.outputs,x.push(E)}}return x}(this.state.activeTape,t,o);if(!a&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?function(e){var t=function(e,t){for(var n=FC(e,"float32"),r=0;r<n.length;r++)n[r]=1;return n}(pC(e));return mE.makeTensor(t,e,"float32")}(o.shape):n,function(e,t,n,a){for(var o=function(n){var o=t[n],i=[];if(o.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for ".concat(o.kernelName,"."));var s=o.gradient(i),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". Available gradients found: ").concat(Object.keys(s),"."));var n=function(e){return r.tidy(e)}((function(){return s[t]()}));if("float32"!==n.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ").concat(t," must have 'float32' dtype, but has '").concat(n.dtype,"'"));var i=o.inputs[t];if(!fC(n.shape,i.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input '").concat(t,"' has shape '").concat(n.shape,"', which does not match the shape of the input '").concat(i.shape,"'"));if(null==e[i.id])e[i.id]=n;else{var u=e[i.id];e[i.id]=a(u,n),u.dispose()}};for(var c in o.inputs)u(c)},i=t.length-1;i>=0;i--)o(i)}
/**
	         * @license
	         * Copyright 2018 Google LLC. All Rights Reserved.
	         * Licensed under the Apache License, Version 2.0 (the "License");
	         * you may not use this file except in compliance with the License.
	         * You may obtain a copy of the License at
	         *
	         * http://www.apache.org/licenses/LICENSE-2.0
	         *
	         * Unless required by applicable law or agreed to in writing, software
	         * distributed under the License is distributed on an "AS IS" BASIS,
	         * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	         * See the License for the specific language governing permissions and
	         * limitations under the License.
	         * =============================================================================
	         */(e,i,0,gE);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=rb(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(e){n.e(e)}finally{n.f()}})),r.state.activeTape=null),{value:o,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return cC(NC(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o;cC(r.every((function(e){return e instanceof JS})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};return r.forEach((function(e,t){i[t]=e})),t.runKernelFunc({forwardFunc:function(t,n){return cC((o=e.apply(void 0,r.concat([n]))).value instanceof JS,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),cC(NC(o.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),o.value},backwardsFunc:function(e,t){var n=o.gradFunc(e,t),a=Array.isArray(n)?n:[n];cC(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),cC(a.every((function(e){return e instanceof JS})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return a.forEach((function(e,t){i[t]=function(){return e}})),i},inputs:i})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"time",value:(t=Ay(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=US(),e.next=3,this.backend.time(t);case 3:return r=e.sent,e.abrupt("return",(r.wallMs=US()-n,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new pE,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));this.setBackend(t)}return this.backendInstance}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}}]),e}();function hE(){var e,t=HC();if(null==t._tfengine){var n=new UC(t);t._tfengine=new fE(n)}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
return e=t._tfengine.ENV,jC=e,$S=function(){return t._tfengine},t._tfengine}fE.nextTensorId=0,fE.nextVariableId=0;var mE=hE();function gE(e,t){var n={a:e,b:t};return mE.runKernel("Add",n)}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function vE(e){if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function yE(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var bE=WC();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function xE(e,t){var n=e;if(CC(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||CC(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&WC().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&kE(e,r,[]),r}function kE(e,t,n){if(n=n||[],Array.isArray(e)||CC(e)){cC(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, but is an array of ").concat(e.length," elements")})),cC(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," elements, but has ").concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)kE(e[a],r,n.concat(a))}else cC(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, but should be an array/TypedArray of ").concat(t[0]," elements")}))}function wE(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must be ").concat(e," tensor, but got ").concat(t," tensor"))}}function IE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof JS)return wE(r,e.dtype,t,n),e;var a=TC(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),wE(r,a,t,n),null==e||!CC(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var o=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a Tensor or TensorLike, but got '").concat(o,"'"))}var i=xE(e,a);CC(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?LS(e,a):dC(e,[],!0);return mE.makeTensor(s,i,a)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function CE(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with ".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var a=function(){mE.startScope(n);try{var e=r.apply(void 0,arguments);return LC(e)&&console.error("Cannot return a Promise inside of tidy."),mE.endScope(e),e}catch(e){throw mE.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}bE.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),bE.registerFlag("IS_BROWSER",(function(){return yE()})),bE.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),bE.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),bE.registerFlag("PROD",(function(){return!1})),bE.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return bE.getBool("DEBUG")})),bE.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),bE.registerFlag("IS_TEST",(function(){return!1})),bE.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),bE.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1}));var SE=CE({complex_:function(e,t){var n=IE(e,"real","complex"),r=IE(t,"imag","complex");lC(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", must match in call to tf.complex()."));var a={real:n,imag:r};return mE.runKernel("Complex",a)}}),EE="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function TE(e){return EE?Buffer.byteLength(e):new Blob([e]).size}function NE(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:TE(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:TE(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var AE=function(){function e(){_y(this,e),this.saveRouters=[],this.loadRouters=[]}return Oy(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function _E(){if(!WC().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function RE(e){var t=e.result;t.createObjectStore("models_store",{keyPath:"modelPath"}),t.createObjectStore("model_info_store",{keyPath:"modelPath"})}var OE=function(){function e(t){if(_y(this,e),this.indexedDB=_E(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}var t,n;return Oy(e,[{key:"save",value:(n=Ay(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=Ay(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return RE(a)},a.onsuccess=function(){var o=a.result;if(null==t){var i=o.transaction("models_store","readonly"),s=i.objectStore("models_store").get(n.modelPath);s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' in IndexedDB.")));e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},i.oncomplete=function(){return o.close()}}else{var u,c=NE(t),l=o.transaction("model_info_store","readwrite"),d=l.objectStore("model_info_store"),p=d.put({modelPath:n.modelPath,modelArtifactsInfo:c});p.onsuccess=function(){var a=(u=o.transaction("models_store","readwrite")).objectStore("models_store").put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(d=l.objectStore("model_info_store")).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(a.error)},t.onerror=function(e){return o.close(),r(a.error)}}},p.onerror=function(e){return o.close(),r(p.error)},l.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();OE.URL_SCHEME="indexeddb://";var FE=function(e){return WC().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(OE.URL_SCHEME)?(t=e.slice(OE.URL_SCHEME.length),new OE(t)):null;var t};AE.registerSaveRouter(FE),AE.registerLoadRouter(FE);var ME=function(){function e(){_y(this,e),this.indexedDB=_E()}var t,n;return Oy(e,[{key:"listModels",value:(n=Ay(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return RE(r)},r.onsuccess=function(){var t=r.result,a=t.transaction("model_info_store","readonly"),o=a.objectStore("model_info_store").getAll();o.onsuccess=function(){var t,n={},r=rb(o.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(e){r.e(e)}finally{r.f()}e(n)},o.onerror=function(e){return t.close(),n(o.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"removeModel",value:(t=Ay(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(t=(n=t).startsWith(OE.URL_SCHEME)?n.slice(OE.URL_SCHEME.length):n,new Promise((function(e,n){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return RE(a)},a.onsuccess=function(){var r,o=a.result,i=o.transaction("model_info_store","readwrite"),s=i.objectStore("model_info_store"),u=s.get(t);u.onsuccess=function(){if(null==u.result)return o.close(),n(new Error("Cannot find model with path '".concat(t,"' in IndexedDB.")));var a=s.delete(t),i=function(){var a=(r=o.transaction("models_store","readwrite")).objectStore("models_store").delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return n(u.error)}};a.onsuccess=i,a.onerror=function(e){return i(),o.close(),n(u.error)}},u.onerror=function(e){return o.close(),n(u.error)},i.oncomplete=function(){null==r?o.close():r.oncomplete=function(){return o.close()}}},a.onerror=function(e){return n(a.error)}}))));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),DE="tensorflowjs_models",BE="info",PE="model_topology",LE="weight_specs",UE="weight_data",VE="model_metadata";
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function WE(e){return{info:[DE,e,BE].join("/"),topology:[DE,e,PE].join("/"),weightSpecs:[DE,e,LE].join("/"),weightData:[DE,e,UE].join("/"),modelMetadata:[DE,e,VE].join("/")}}function zE(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function jE(e){var t=e.split("/");if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join("/")}var HE=function(){function e(t){if(_y(this,e),!WC().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=WE(this.modelPath)}var t,n;return Oy(e,[{key:"save",value:(n=Ay(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=NE(t),e.prev=3,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(EE)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(t.weightData)),o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},e.abrupt("return",(this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:a}));case 9:throw e.prev=9,e.t0=e.catch(3),zE(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=").concat(a.modelTopologyBytes,", weightSpecsBytes=").concat(a.weightSpecsBytes,", weightDataBytes=").concat(a.weightDataBytes,"."));case 12:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=Ay(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=8;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' is missing."));case 8:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=12;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' are missing."));case 12:if(n.weightSpecs=a,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(o),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,null!=i.signature&&(n.signature=i.signature),null!=i.userDefinedMetadata&&(n.userDefinedMetadata=i.userDefinedMetadata),null!=i.modelInitializer&&(n.modelInitializer=i.modelInitializer),null!=i.trainingConfig&&(n.trainingConfig=i.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=18;break}throw new Error("In local storage, the binary weight values of model '".concat(this.modelPath,"' are missing."));case 18:return e.abrupt("return",(n.weightData=function(e){if(EE){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(s),n));case 19:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();HE.URL_SCHEME="localstorage://";var GE=function(e){return WC().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(HE.URL_SCHEME)?(t=e.slice(HE.URL_SCHEME.length),new HE(t)):null;var t};AE.registerSaveRouter(GE),AE.registerLoadRouter(GE);var qE=function(){function e(){_y(this,e),cC(WC().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),cC("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}var t,n;return Oy(e,[{key:"listModels",value:(n=Ay(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=DE+"/",r="/"+BE,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(n)&&o.endsWith(r)&&(t[jE(o)]=JSON.parse(this.LS.getItem(o)));return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"removeModel",value:(t=Ay(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=WE(t=(n=t).startsWith(HE.URL_SCHEME)?n.slice(HE.URL_SCHEME.length):n),null!=this.LS.getItem(r.info)){e.next=3;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 3:return a=JSON.parse(this.LS.getItem(r.info)),e.abrupt("return",(zE(r),a));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),KE=function(){function e(){_y(this,e),this.managers={}}return Oy(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){cC(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith("://")&&(t=t.slice(0,t.indexOf("://"))),cC(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();cC(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}(),XE=function(){function e(){_y(this,e)}return Oy(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */if(WC().get("IS_BROWSER")){WC().setPlatform("browser",new XE);try{KE.registerManager(HE.URL_SCHEME,new qE)}catch(Rx){}try{KE.registerManager(OE.URL_SCHEME,new ME)}catch(Rx){}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var QE,YE=function(){return require("node-fetch")},$E=function(){function e(){_y(this,e),this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return Oy(e,[{key:"fetch",value:function(e,t){return null!=WC().global.fetch?WC().global.fetch(e,t):(null==QE&&(QE=YE()),QE(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function ZE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",DC(e),new YS(e,t,n)
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}WC().get("IS_NODE")&&WC().setPlatform("node",new $E);var JE=CE({cast_:function(e,t){var n=IE(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return mE.runKernel("Cast",r,a)}}),eT=CE({clone_:function(e){var t={x:IE(e,"x","clone","string_or_numeric")};return mE.runKernel("Identity",t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function tT(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: ".concat(t.shape[r-1]," vs. ").concat(n));if(0===pC(e.shape))throw new Error("Requested more than 0 entries, but input is empty. Input shape: ".concat(e.shape,"."));for(var a=t.shape,o=a[a.length-1],i=1,s=0;s<a.length-1;++s)i*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,d=o;d<n;++d)l*=u[d],c.push(u[d]);var p=[].concat(Xy(_C(e.shape).map((function(e){return e/l}))),[1]).slice(0,o);return[c,i,l,p]}function nT(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ".concat(n.shape,", indices.shape: ").concat(t.shape,", shape: ").concat(e,", sliceDim: ").concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(o+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(o+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+" update.rank != "+(a+e.length-r));for(var i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(t.shape[i],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(o+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function rT(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,o=n.length,i=1,s=a;s<o;++s)i*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:pC(t.shape)/u,sliceSize:i,strides:[].concat(Xy(_C(n.slice(0,a))),[1]),outputSize:pC(n)}}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function aT(e,t,n){var r=e.shape.length;cC(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must match the rank of the array (").concat(r,").")})),cC(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must match the rank of the array (").concat(r,").")}));for(var a=function(a){cC(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] (").concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},o=0;o<r;++o)a(o)}function oT(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function iT(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function sT(e,t,n,r){for(var a=Xy(e),o=a.length;o<r.length;o++)a.push(1);for(var i=0;i<n;i++)0===i?a[t]=1:(a.splice(t,0,1),a.pop());return a}function uT(e,t,n){return n<=e?n:n-(t-1)}function cT(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function lT(e,t,n,r,a,o,i,s,u){var c=e.length,l=new Array(c),d=new Array(c),p=new Array(c);if(t.length&&n>0){var f=t[0],h=n+1;l=dT(i,f,h,r,e),d=pT(s,f,h,a,e),p=sT(o,f,h,e)}else for(var m=0;m<c;m++)l[m]=hT(i,r,o,e,m,u),d[m]=mT(s,a,o,e,m,u),p[m]=fT(o,m,u);return{begin:l,end:d,strides:p}}function dT(e,t,n,r,a){for(var o=Xy(a),i=cT(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=0;else{var u=uT(t,n,s),c=r[u];e&1<<u&&(c=0),o[s]=c}return o}function pT(e,t,n,r,a){for(var o=Xy(a),i=cT(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{var u=uT(t,n,s),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),o[s]=c}for(var l=0;l<o.length;l++){var d=a[l];o[l]<0&&(o[l]+=d),o[l]=iC(0,o[l],a[l])}return o}function fT(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function hT(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=iC(0,i,u-1)}function mT(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=s>0?iC(0,i,u):iC(-1,i,u-1)}function gT(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function vT(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function yT(e,t,n){var r,a,o=e.shape.length;return(r="number"==typeof t?[t].concat(Xy(new Array(o-1).fill(0))):t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice()).forEach((function(e){cC(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(o).fill(-1):"number"==typeof n?[n].concat(Xy(new Array(o-1).fill(-1))):n.length<o?n.concat(new Array(o-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(cC(-1===t,(function(){return"Negative size values should be exactly -1 but got ".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function bT(e,t,n,r,a,o,i,s,u){var c=t.slice(),l=n.slice(),d=r;null==r&&(d=new Array(c.length));var p=oT(i);if(p.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==i&&0!==s)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==i&&0!==u)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var f=e.length-c.length,h=oT(s),m=e.slice();h.forEach((function(e){c[e]=0,l[e]=1,m.splice(e,0,1)}));var g=lT(m,p,f,c,l,d,a,o,i),v=g.begin,y=g.end,b=g.strides;c=v,l=y,d=b;var x=oT(u);x.forEach((function(e){l[e]=c[e]+1,d[e]=1}));var k=iT(c,l,d),w=k.filter((function(e,t){return-1===x.indexOf(t)}));return{nonStrided:d.every((function(e){return 1===e})),$begin:c,$end:l,$strides:d,size:k,newShape:m,outShape:w}}
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
hE(),ZS={buffer:ZE,cast:JE,clone:eT,print:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};var xT=Object.freeze({__proto__:null,assertParamsValid:aT,maskToAxes:oT,computeOutShape:iT,stridesWithElidedDims:sT,getNormalizedAxes:lT,startIndicesWithElidedDims:dT,stopIndicesWithElidedDims:pT,stridesForAxis:fT,startForAxis:hT,stopForAxis:mT,isSliceContinous:gT,computeFlatOffset:vT,parseSliceParams:yT,sliceInfo:bT});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function kT(){WC().set("PROD",!0)}function wT(){return mE}function IT(e){return mE.setBackend(e)}function CT(){return mE.ready()}function ST(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return mE.registerBackend(e,t,n)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ET=CE({mul_:function(e,t){var n=IE(e,"a","mul"),r=IE(t,"b","mul"),a=Ky(function(e,t){if(e.dtype===t.dtype)return[e,t];var n=sE(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}(n,r),2),o={a:n=a[0],b:r=a[1]};return mE.runKernel("Multiply",o)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function TT(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0;return _T(e,[].concat(Xy(t),[e[3]]),n,o,r,null,null,UT(a))}function NT(e,t,n,r,a,o){var i,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=FT(t),c=Ky(u,2),l=c[0],d=c[1];if("channelsLast"===s)i=[l,d,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));i=[l,d,e[1],e[1]]}return _T(e,i,n,r,a,o,!1,s)}function AT(e,t,n,r,a,o){var i,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=MT(t),l=Ky(c,3),d=l[0],p=l[1],f=l[2];if("NDHWC"===u)s="channelsLast",i=[d,p,f,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",i=[d,p,f,e[1],e[1]]}return RT(e,i,n,r,a,!1,s,o)}function _T(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,d=-1;if("channelsLast"===s){var p=Ky(e,4);u=p[0],c=p[1],l=p[2],d=p[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var f=Ky(e,4);u=f[0],d=f[1],c=f[2],l=f[3]}var h,m=Ky(t,4),g=m[0],v=m[1],y=m[3],b=FT(n),x=Ky(b,2),k=x[0],w=x[1],I=FT(r),C=Ky(I,2),S=C[0],E=C[1],T=DT(g,S),N=DT(v,E),A=function(e,t,n,r,a,o,i,s,u){var c,l,d;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var p=function(e,t,n,r,a){null==r&&(r=OT(e,t,n));var o=e[1];return[BT((e[0]-t+2*r)/n+1,a),BT((o-t+2*r)/n+1,a)]}([t,n],o,r,e,s);l=p[0],d=p[1]}else if("same"===e){l=Math.ceil(t/r),d=Math.ceil(n/a);var f=Math.max(0,(l-1)*r+o-t),h=Math.max(0,(d-1)*a+i-n),m=Math.floor(f/2),g=f-m,v=Math.floor(h/2);c={top:m,bottom:g,left:v,right:h-v,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-o+1)/r),d=Math.ceil((n-i+1)/a);else{if("object"!=Ty(e))throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],k="channelsLast"===u?e[2][1]:e[3][1];c={top:y,bottom:b,left:x,right:k,type:0===y&&0===b&&0===x&&0===k?"VALID":"EXPLICIT"},l=BT((t-o+y+b)/r+1,s),d=BT((n-i+x+k)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:d}}(a,c,l,k,w,T,N,o,s),_=A.padInfo,R=A.outHeight,O=A.outWidth,F=i?y*d:y;return"channelsFirst"===s?h=[u,F,R,O]:"channelsLast"===s&&(h=[u,R,O,F]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:d,outHeight:R,outWidth:O,outChannels:F,padInfo:_,strideHeight:k,strideWidth:w,filterHeight:g,filterWidth:v,effectiveFilterHeight:T,effectiveFilterWidth:N,dilationHeight:S,dilationWidth:E,inShape:e,outShape:h,filterShape:t}}function RT(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,d=-1,p=-1;if("channelsLast"===i){var f=Ky(e,5);u=f[0],c=f[1],l=f[2],d=f[3],p=f[4]}else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));var h=Ky(e,5);u=h[0],p=h[1],c=h[2],l=h[3],d=h[4]}var m,g=Ky(t,5),v=g[0],y=g[1],b=g[2],x=g[4],k=MT(n),w=Ky(k,3),I=w[0],C=w[1],S=w[2],E=MT(r),T=Ky(E,3),N=T[0],A=T[1],_=T[2],R=DT(v,N),O=DT(y,A),F=DT(b,_),M=function(e,t,n,r,a,o,i,s,u,c,l){var d,p,f,h;if("number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,o){null==a&&(a=OT(e,t,r));var i=e[1],s=e[2];return[BT((e[0]-t+2*a)/r+1,o),BT((i-t+2*a)/r+1,o),BT((s-t+2*a)/r+1,o),1]}([t,n,r,1],s,0,a,e,l);p=m[0],f=m[1],h=m[2]}else if("same"===e){var g=((p=Math.ceil(t/a))-1)*a+s-t,v=((f=Math.ceil(n/o))-1)*o+u-n,y=((h=Math.ceil(r/i))-1)*i+c-r,b=Math.floor(g/2),x=g-b,k=Math.floor(v/2),w=v-k,I=Math.floor(y/2);d={top:k,bottom:w,left:I,right:y-I,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((t-s+1)/a),f=Math.ceil((n-u+1)/o),h=Math.ceil((r-c+1)/i)}return{padInfo:d,outDepth:p,outHeight:f,outWidth:h}}(a,c,l,d,I,C,S,R,O,F,s),D=M.padInfo,B=M.outDepth,P=M.outHeight,L=M.outWidth,U=o?x*p:x;return"channelsFirst"===i?m=[u,U,B,P,L]:"channelsLast"===i&&(m=[u,B,P,L,U]),{batchSize:u,dataFormat:i,inDepth:c,inHeight:l,inWidth:d,inChannels:p,outDepth:B,outHeight:P,outWidth:L,outChannels:U,padInfo:D,strideDepth:I,strideHeight:C,strideWidth:S,filterDepth:v,filterHeight:y,filterWidth:b,effectiveFilterDepth:R,effectiveFilterHeight:O,effectiveFilterWidth:F,dilationDepth:N,dilationHeight:A,dilationWidth:_,inShape:e,outShape:m,filterShape:t}}function OT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=DT(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function FT(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function MT(e){return"number"==typeof e?[e,e,e]:e}function DT(e,t){return t<=1?e:e+(e-1)*(t-1)}function BT(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function PT(e){var t=Ky(FT(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function LT(e,t){return PT(e)||PT(t)}function UT(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var VT=CE({reshape_:function(e,t){var n={x:IE(e,"x","reshape","string_or_numeric")},r={shape:t};return mE.runKernel("Reshape",n,r)}}),WT=CE({sigmoid_:function(e){var t={x:IE(e,"x","sigmoid")};return mE.runKernel("Sigmoid",t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function zT(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}function jT(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function HT(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var o=e[e.length-a-1];null==o&&(o=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===o)n.unshift(i);else if(1===i)n.unshift(o);else{if(o!==i)throw Error("Operands could not be broadcast together with shapes ".concat(e," and ").concat(t,"."));n.unshift(o)}}return n}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var GT=CE({elu_:function(e){var t={x:IE(e,"x","elu")};return mE.runKernel("Elu",t)}}),qT=CE({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:IE(e,"x","leakyRelu")},r={alpha:t};return mE.runKernel("LeakyRelu",n,r)}}),KT=CE({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=IE(e,"x","sum");"bool"===r.dtype&&(r=JE(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return mE.runKernel("Sum",a,o)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function XT(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function QT(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[o++]):a.push(t[i++]);return a}function YT(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function $T(e,t){return QT(e,t.map((function(e){return 1})),t)}function ZT(e,t,n){cC(XT(t,n),(function(){return"".concat(e," supports only inner-most axes for now. Got axes ").concat(t," and rank-").concat(n," input.")}))}function JT(e,t){if(XT(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function eN(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function tN(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function nN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=nN(e,"float32"),r=nN(e,"float32");return SE(n,r)}var a=FC(pC(e),t);return mE.makeTensor(a,e,t)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var rN=CE({prelu_:function(e,t){var n={x:IE(e,"x","prelu"),alpha:IE(t,"alpha","prelu")};return mE.runKernel("Prelu",n)}}),aN=eI((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new r(e),o=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.alea=o}(0,e)})),oN=eI((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xor128=o}(0,e)})),iN=eI((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xorwow=o}(0,e)})),sN=eI((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&(o.x&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xorshift7=o}(0,e)})),uN=eI((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=s[127&o]^=r+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&(o.X&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xor4096=o}(0,e)})),cN=eI((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.tychei=o}(0,e)})),lN=tI(Object.freeze({__proto__:null,default:{}})),dN=eI((function(e){!function(t,n){var r,a=this,o=256,i=n.pow(o,6),s=n.pow(2,52),u=2*s,c=255;function l(e,c,l){var g=[],v=h(f((c=1==c?{entropy:!0}:c||{}).entropy?[e,m(t)]:null==e?function(){try{var e;return r&&(e=r.randomBytes)?e=e(o):(e=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(e)),m(e)}catch(e){var n=a.navigator,i=n&&n.plugins;return[+new Date,a,i,a.screen,m(t)]}}():e,3),g),y=new d(g),b=function(){for(var e=y.g(6),t=i,n=0;e<s;)e=(e+n)*o,t*=o,n=y.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,h(m(y.S),t),(c.pass||l||function(e,t,r,a){return a&&(a.S&&p(a,y),e.state=function(){return p(y,{})}),r?(n.random=e,t):e})(b,v,"global"in c?c.global:this==n,c.state)}function d(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<o;)s[a]=a++;for(a=0;a<o;a++)s[a]=s[i=c&i+e[a%n]+(t=s[a])],s[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,s=r.S;e--;)t=s[a=c&a+1],n=n*o+s[c&(s[a]=s[i=c&i+t])+(s[i]=t)];return r.i=a,r.j=i,n})(o)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){var n,r=[],a=Ty(e);if(t&&"object"==a)for(n in e)try{r.push(f(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\0"}function h(e,t){for(var n,r=e+"",a=0;a<r.length;)t[c&a]=c&(n^=19*t[c&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(n.seedrandom=l,h(n.random(),t),e.exports){e.exports=l;try{r=lN}catch(e){}}}([],Math)}));dN.alea=aN,dN.xor128=oN,dN.xorwow=iN,dN.xorshift7=sN,dN.xor4096=uN,dN.tychei=cN;var pN=dN,fN=CE({relu_:function(e){var t={x:IE(e,"x","relu")};return mE.runKernel("Relu",t)}}),hN=CE({relu6_:function(e){var t={x:IE(e,"x","relu6")};return mE.runKernel("Relu6",t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function mN(e,t){if((CC(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&CC(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return function(e,t,n,r){if(null==r&&(r=TC(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!CC(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){DC(t);var a=pC(t),o=pC(n);cC(a===o,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ").concat(a," values but has ").concat(o)}));for(var i=0;i<n.length;++i){var s=i!==n.length-1||n[i]!==pC(t.slice(i));cC(n[i]===t[i]||!s,(function(){return"Error creating a new Tensor. Inferred shape (".concat(n,") does not match the provided shape (").concat(t,"). ")}))}}return CC(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?LS(e,r):dC(e,[],!0),mE.makeTensor(e,t,r)}(e,[],[],t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var gN=CE({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:IE(e,"x","step")},r={alpha:t};return mE.runKernel("Step",n,r)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function vN(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=ZE(e,"int32"),o=ZE([n.length,e.length],"int32"),i=0;i<n.length;i++){var s=a.indexToLoc(n[i]),u=i*e.length;o.values.set(s,u)}return o.toTensor()}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function yN(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,o=0,i=!1;r<a;){var s=n(t,e[o=r+(a-r>>>1)]);s>0?r=o+1:(a=o,i=!s)}return i?r:-r-1}
/**
	     * @license
	     * Copyright 2020 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(e,t,n||bN)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function bN(e,t){return e>t?1:e<t?-1:0}function xN(e,t,n,r,a){return IN(e,t,n,r,a,0)}function kN(e,t,n,r,a,o){return IN(e,t,n,r,a,0,!1,o,!0)}function wN(e,t,n,r,a,o){return IN(e,t,n,r,a,o,!0)}function IN(e,t,n,r,a,o){for(var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(EN);for(var d=o>0?-.5/o:0,p=[],f=[];p.length<n&&c.length>0;){var h=c.pop(),m=h.score,g=h.boxIndex,v=h.suppressBeginIndex;if(m<a)break;for(var y=!1,b=p.length-1;b>=v;--b){var x=CN(e,g,p[b]);if(x>=r){y=!0;break}if(h.score=h.score*SN(r,d,x),h.score<=a)break}h.suppressBeginIndex=p.length,y||(h.score===m?(p.push(g),f.push(h.score)):h.score>a&&yN(c,h,EN))}var k=p.length,w=n-k;s&&w>0&&(p.push.apply(p,Xy(new Array(w).fill(0))),f.push.apply(f,Xy(new Array(w).fill(0))));var I={selectedIndices:p};return i&&(I.selectedScores=f),u&&(I.validOutputs=k),I}function CN(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),f=(s-o)*(u-i),h=(d-c)*(p-l);if(f<=0||h<=0)return 0;var m=Math.max(o,c),g=Math.max(i,l),v=Math.min(s,d),y=Math.min(u,p),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(f+h-b)}function SN(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function EN(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function TN(e,t){var n=e[0].length;e.forEach((function(e,t){cC(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same as the rank of the rest (").concat(n,")")}))})),cC(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var o=0;o<n;o++)cC(o===t||e[o]===r[o],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") does not match the shape of the rest (").concat(r,") along the non-concatenated axis ").concat(a,".")}))}))}function NN(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function AN(e){return e<=30?e:AC(e,Math.floor(Math.sqrt(e)))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function _N(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function RN(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var o=t.length,i=0;i<o;++i)a=a.concat([e[i+1]/t[i],t[i]]);a=a.concat(e.slice(o+1))}return a}function ON(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var o=[],i=[],s=1;s<e;++s)s>=2*t+1||s%2==1?i.push(s):o.push(s);r.push.apply(r,o),r.push(0),r.push.apply(r,i)}return r}function FN(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function MN(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function DN(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function BN(){var e;WC().getBool("IS_TEST")||(e=console).warn.apply(e,arguments)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function PN(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function LN(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function UN(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function VN(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function WN(e,t){return{real:e[2*t],imag:e[2*t+1]}}function zN(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function jN(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}function HN(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var GN=/->/g;function qN(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(GN,"").length)/"->".length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("->").');var r=Ky(e.split("->"),2),a=r[0],o=r[1];cC(-1===a.indexOf("..."),(function(){return'The ellipsis notation ("...") is not supported yet.'}));var i=a.split(","),s=i.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var u=[],c=function(e){var t=o[e];if(!i.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," not present in the input subscripts."));-1===u.indexOf(t)&&u.push(t)},l=0;l<o.length;++l)c(l);for(var d=0;d<a.length;++d){var p=a[d];-1===u.indexOf(p)&&","!==p&&u.push(p)}for(var f=new Array(i.length),h=0;h<s;++h){if(new Set(i[h].split("")).size!==i[h].length)throw new Error("Found duplicate axes in input component ".concat(i[h],". Support for duplicate axes in input is not implemented yet."));f[h]=[];for(var m=0;m<i[h].length;++m)f[h].push(u.indexOf(i[h][m]))}for(var g=u.length,v=[],y=o.length;y<g;++y)v.push(y);return{allDims:u,summedDims:v,idDims:f}}function KN(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],o=0;o<e;++o)-1===n[o]&&a.push(o);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function XN(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,o=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:cC(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," of input shaped ").concat(JSON.stringify(a),", but got dimension ").concat(a[n])}))},i=0;i<t[e].length;++i)o(i)},o=0;o<n.length;++o)a(o)}function QN(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var o=0;o<n;++o)a.push([]);for(var i=[],s=0;s<r.length;++s){var u,c=rb($N(t,r[s]));try{for(c.s();!(u=c.n()).done;){var l=u.value;-1===i.indexOf(l)&&(a[s].push(l),i.push(l))}}catch(e){c.e(e)}finally{c.f()}}return{path:r,steps:a}}function YN(e){return e.every((function(e,t){return e===t}))}function $N(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function ZN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"==typeof t)cC(e.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{cC(t.reduce((function(e,t){return-1===t&&(e+=1),e}),0)<=1,(function(){return"There should be only one negative value in split array."}));var a=t.indexOf(-1);if(-1!==a){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[a]=e.shape[n]-o}cC(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function JN(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=AC(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=AC(e,n+1);return n}function eA(e,t,n){for(var r=[],a=e.length,o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}function tA(e,t,n,r){var a=t.shape.length,o=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>o)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(o,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var i=0;i<r;++i)if(e.shape[i]!==t.shape[i])throw new Error("x.shape[".concat(i,"]: ").concat(e.shape[i]," should be equal to indices.shape[").concat(i,"]: ").concat(t.shape[i],"."));for(var s=e.shape[n],u=[],c=1,l=1,d=1,p=0;p<r;++p)u.push(e.shape[p]),c*=e.shape[p];for(var f=r;f<n;f++)u.push(e.shape[f]),l*=e.shape[f];for(var h=r;h<a;h++)u.push(t.shape[h]);for(var m=n+1;m<o;m++)u.push(e.shape[m]),d*=e.shape[m];return{batchSize:c,sliceSize:d,outerSize:l,dimSize:s,outputShape:u}}var nA=Object.freeze({__proto__:null,segOpComputeOptimalWindowSize:JN,computeOutShape:eA,collectGatherOpShapeInfo:tA});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function rA(e){try{return e.map((function(e){return WS(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(e))}}function aA(e){return e.map((function(e){return VS(e)}))}var oA,iA,sA,uA=Object.freeze({__proto__:null,slice_util:xT,segment_util:nA,fromUint8ToStringArray:rA,fromStringArrayToUint8:aA,upcastType:sE,axesAreInnerMostDims:XT,combineLocations:QT,computeOutAndReduceShapes:YT,expandShapeToKeepDim:$T,assertAxesAreInnerMostDims:ZT,getAxesPermutation:JT,getUndoAxesPermutation:eN,getInnerMostAxes:tN,getBroadcastDims:zT,getReductionAxes:jT,assertAndGetBroadcastShape:HT,assertParamsConsistent:TN,computeOutShape:NN,computeDilation2DInfo:TT,computePool2DInfo:NT,computePool3DInfo:AT,computeConv2DInfo:_T,computeConv3DInfo:RT,computeDefaultPad:OT,tupleValuesAreOne:PT,eitherStridesOrDilationsAreOne:LT,convertConv2DDataFormat:UT,getFusedDyActivation:function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return ET(e,gN(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))},getFusedBiasGradient:function(e,t){var n=t,r=jT(e.shape,t.shape);return r.length>0&&(n=KT(n,r)),VT(n,e.shape)},applyActivation:function(e,t,n,r){if("linear"===t)return e;if("relu"===t)return fN(e);if("elu"===t)return GT(e);if("relu6"===t)return hN(e);if("prelu"===t)return rN(e,n);if("leakyrelu"===t)return qT(e,r);if("sigmoid"===t)return WT(e);throw new Error("Unknown fused activation ".concat(t,"."))},shouldFuse:function(e,t){return!(e>0)||"linear"===t},PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:AN,getImageCenter:_N,getReshaped:RN,getPermuted:ON,getReshapedPermuted:FN,getSliceBeginCoords:MN,getSliceSize:DN,prepareAndValidate:tT,validateUpdateShape:nT,validateInput:function(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}nT(n,t,e)},calculateShapes:rT,SELU_SCALEALPHA:1.7580993408473768,SELU_SCALE:1.0507009873554805,ERF_P:.3275911,ERF_A1:.254829592,ERF_A2:-.284496736,ERF_A3:1.421413741,ERF_A4:-1.453152027,ERF_A5:1.061405429,warn:BN,log:function(){var e;WC().getBool("IS_TEST")||(e=console).log.apply(e,arguments)},mergeRealAndImagArrays:PN,splitRealAndImagArrays:LN,complexWithEvenIndex:UN,complexWithOddIndex:VN,getComplexWithIndex:WN,assignToTypedArray:zN,exponents:jN,exponent:HN,decodeEinsumEquation:qN,getEinsumPermutation:KN,checkEinsumDimSizes:XN,getEinsumComputePath:QN,isIdentityPermutation:YN,prepareSplitSize:ZN}),cA={},lA={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function dA(e){if(!(e in cA)){var t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete cA[e]}),!1),1===e?t.getContext("webgl",lA)||t.getContext("experimental-webgl",lA):t.getContext("webgl2",lA)}
/**
	     * @license
	     * Copyright 2017 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;cA[e]=t}var n=cA[e];return n.isContextLost()?(delete cA[e],dA(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),cA[e])}function pA(e,t){return[t,e]}function fA(e){var t=pC(e);return mC(Math.ceil(t/4))}function hA(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function mA(e,t){var n,r,a,o,i,s,u,c,l,d=e;return 2===WC().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,o=d.RGBA32F,i=d.RED,s=4,u=1,c=d.HALF_FLOAT,l=d.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,o=d.RGBA,i=e.RGBA,s=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:l}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function gA(e,t){var n=t();return WC().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}function vA(e){return!!(WC().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function yA(e,t){return AA(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function bA(e,t){var n=AA(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(gA(e,(function(){return e.shaderSource(n,t)})),gA(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=wA.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map((function(e,t){return gC((t+1).toString(),o)+e})),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var c=i.slice(0,r-1),l=i.slice(r-1,r),d=i.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(gC(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(oA||(oA={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(iA||(iA={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(sA||(sA={}));var xA,kA,wA=/ERROR: [0-9]+:([0-9]+):/g;function IA(e,t){if(gA(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function CA(e,t,n,r,a,o,i){var s=e.getAttribLocation(t,n);return-1!==s&&(gA(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),gA(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,o,i)})),gA(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function SA(e,t,n){!function(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in ".concat("[gl.TEXTURE0, gl.TEXTURE".concat(n,"]"),"."))}(e,n),gA(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),gA(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}function EA(e,t,n){gA(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),gA(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function TA(e,t){gA(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),gA(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function NA(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function AA(e,t,n){var r=gA(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function _A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return pC(e.slice(0,e.length-t))}function RA(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function OA(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[_A(e)].concat(Xy(RA(e)))),t}function FA(e){return e%2==0}function MA(e,t){if(fC(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(FA(n)&&FA(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&FA(e[0])&&FA(t[0])}function DA(e,t){return null!=e.getExtension(t)}function BA(e){try{if(null!=dA(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function PA(e){if(0===e)return!1;var t=dA(e);if(1!==e){if(DA(t,"EXT_color_buffer_float"))return LA(t);var n="EXT_color_buffer_half_float";if(DA(t,n)){var r=t.getExtension(n);return function(e,t){var n=mA(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),o}(t,r)}return!1}return!!DA(t,"OES_texture_float")&&(!!DA(t,"WEBGL_color_buffer_float")&&LA(t))}function LA(e){var t=mA(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function UA(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&cC("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the WebGL backend.")}))}))
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var VA=WC();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function WA(){var e,t,n,r,a,o,i,s,u,c;return 2===WC().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function zA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=_C(t);return r.map((function(t,a){return"".concat("int ".concat(e[a]," = ").concat(n," / ").concat(t),"; ",a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t),";")})).join("")}function jA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=_C(t);return r.map((function(t,a){return"".concat("int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),"; ",a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]"),";")})).join("")}function HA(e){var t=_C(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}VA.registerFlag("HAS_WEBGL",(function(){return VA.getNumber("WEBGL_VERSION")>0})),VA.registerFlag("WEBGL_VERSION",(function(){return BA(2)?2:BA(1)?1:0})),VA.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),VA.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===VA.get("WEBGL_VERSION")})),VA.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),VA.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),VA.registerFlag("WEBGL_PACK",(function(){return VA.getBool("HAS_WEBGL")})),VA.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return VA.getBool("WEBGL_PACK")})),VA.registerFlag("WEBGL_PACK_CLIP",(function(){return VA.getBool("WEBGL_PACK")})),VA.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return VA.getBool("WEBGL_PACK")})),VA.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return VA.getBool("WEBGL_PACK")})),VA.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return VA.getBool("WEBGL_PACK")})),VA.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return VA.getBool("WEBGL_PACK")})),VA.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return VA.getBool("WEBGL_PACK")})),VA.registerFlag("WEBGL_PACK_REDUCE",(function(){return VA.getBool("WEBGL_PACK")})),VA.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return VA.getBool("WEBGL_PACK")})),VA.registerFlag("WEBGL_CONV_IM2COL",(function(){return VA.getBool("WEBGL_PACK")})),VA.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==xA){var t=dA(e);xA=t.getParameter(t.MAX_TEXTURE_SIZE)}return xA}(VA.getNumber("WEBGL_VERSION"))})),VA.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==kA){var t=dA(e);kA=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,kA)}(VA.getNumber("WEBGL_VERSION"))})),VA.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=VA.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=dA(e);return DA(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:DA(t,"EXT_disjoint_timer_query")?1:0}(e)})),VA.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return VA.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!vE()})),VA.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=dA(e);if(1===e){if(!DA(t,"OES_texture_float"))return!1}else if(!DA(t,"EXT_color_buffer_float"))return!1;return LA(t)}(VA.getNumber("WEBGL_VERSION"))})),VA.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!VA.getBool("WEBGL_FORCE_F16_TEXTURES")&&VA.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),VA.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return PA(VA.getNumber("WEBGL_VERSION"))})),VA.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=VA.getNumber("WEBGL_VERSION"))&&null!=dA(e).fenceSync;var e})),VA.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return VA.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),VA.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ".concat(e,"."))})),VA.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return vE()&&VA.getBool("IS_CHROME")?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ".concat(e,"."))})),VA.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),VA.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),VA.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),VA.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var GA="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",qA=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=oA.DENSE;var n=fA(t),r=WA();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(zA(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},KA=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=oA.DENSE;var n=fA(t),r=WA();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(zA(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},XA=function e(t){_y(this,e),this.variableNames=["A"],this.outTexUsage=iA.DOWNLOAD;var n=WA();this.outputShape=t,this.userCode="\n      ".concat(GA,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},QA=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=iA.DOWNLOAD;var n=WA();this.outputShape=t,this.userCode="\n      ".concat(GA,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},YA=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_y(this,e),this.variableNames=["A"];var a=WA(),o=Ky(n,2),i=o[0],s=o[1];this.outputShape=t;var u="result";r&&(u="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(HA(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ").concat(s,";\n        int c = imod(flatIndex, ").concat(s,");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n        vec4 values = ").concat(a.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(a.output," = vec4(").concat(u,", 0., 0., 0.);\n      }\n    ")},$A=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var a=WA(),o=Ky(n,2),i=o[0],s=o[1];this.outputShape=t;var u="",c="result";r&&(c="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var d=0;d<=1;d++){var p=2*l+d;u+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(d," < ").concat(t[2],") {\n            localCoords[2] += ").concat(d,";\n            if(localCoords[1] + ").concat(l," < ").concat(t[1],") {\n              localCoords[1] += ").concat(l,";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ").concat(s,";\n              c = imod(flatIndex, ").concat(s,");\n              uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n              values = ").concat(a.texture2D,"(A, uv);\n\n              if(offset == 0) {\n                result[").concat(p,"] = values[0];\n              } else if(offset == 1) {\n                result[").concat(p,"] = values[1];\n              } else if(offset == 2) {\n                result[").concat(p,"] = values[2];\n              } else {\n                result[").concat(p,"] = values[3];\n              }\n            }\n          }\n        ")}this.userCode="\n      ".concat(HA(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ").concat(u,"\n\n        ").concat(a.output," = ").concat(c,";\n      }\n    ")};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function ZA(e){var t=WA();return function(e,t){var n=AA(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(gA(e,(function(){return e.shaderSource(n,t)})),gA(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function JA(e){return function(e,t){var n=AA(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return gA(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),gA(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function e_(e){return function(e,t){var n=AA(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return gA(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),gA(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function t_(e,t,n,r,a,o){!function(e,t){var n=WC().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error("Requested texture size [".concat(e,"x").concat(t,"] is invalid."));if(e>n||t>n)throw new Error("Requested texture size [".concat(e,"x").concat(t,"] greater than WebGL maximum on this browser / GPU [").concat(n,"x").concat(n,"]."))}(t,n);var i=function(e){return AA(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return gA(e,(function(){return e.bindTexture(s,i)})),gA(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),gA(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),gA(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),gA(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),gA(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,o,null)})),gA(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),i}function n_(e){return e.internalFormatFloat}function r_(e){return e.internalFormatHalfFloat}function a_(e){return e.downloadTextureFormat}function o_(e){return e.internalFormatPackedFloat}function i_(e){return e.internalFormatPackedHalfFloat}function s_(e,t,n,r,a,o,i,s){var u=e,c=new Float32Array(function(e,t){var n=Ky(hA(e,t),2);return n[0]*n[1]*4}(o,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var u_=function(){function e(t){_y(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=WC().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){cA[e]=t}(n,t)):this.gl=dA(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(1===WC().getNumber("WEBGL_VERSION")){var o="OES_texture_half_float";if(this.textureFloatExtension=yA(this.gl,"OES_texture_float"),DA(this.gl,o))this.textureHalfFloatExtension=yA(this.gl,o);else if(WC().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),DA(this.gl,a))this.colorBufferHalfFloatExtension=yA(this.gl,a);else if(WC().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",DA(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!DA(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=JA(this.gl),this.indexBuffer=e_(this.gl),this.framebuffer=function(e){return AA(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=mA(this.gl,this.textureHalfFloatExtension)}var t;return Oy(e,[{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;gA(t,(function(){return t.finish()})),gA(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),gA(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),gA(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),gA(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),gA(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ky(pA(t,n),2);return t_(e,a[0],a[1],n_(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ky(pA(t,n),2);return t_(e,a[0],a[1],r_(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ky(pA(t,n),2);return t_(e,a[0],a[1],a_(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){gA(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?gA(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):gA(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),gA(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,o){var i,s,u;gA(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,u=o.internalFormatPackedFloat),i.set(a),gA(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,i)})),gA(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ky(hA(t,n),2);return t_(e,a[0],a[1],i_(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ky(hA(t,n),2);return t_(e,a[0],a[1],o_(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(TA(this.gl,this.framebuffer),this.outputTexture=null),gA(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=Ky(pA(t,n),2),o=a[0],i=a[1],s=new Uint8Array(t*n*4);return gA(e,(function(){return e.readPixels(0,0,o,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,o){return s_(this.gl,e,0,0,0,a,o,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();gA(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var o=16*t*n;return gA(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),gA(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),gA(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(WC().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(o,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=o}else WC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,WC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return gA(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl,r=bA(n,e);null==this.vertexShader&&(this.vertexShader=ZA(n));var a=function(e){return AA(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return gA(n,(function(){return n.attachShader(a,t.vertexShader)})),gA(n,(function(){return n.attachShader(a,r)})),function(e,t){if(gA(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,a),this.debug&&IA(n,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=function(e,t,n){return gA(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),CA(e,t,"clipSpacePos",n,3,20,0)&&CA(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),a}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&gA(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&IA(this.gl,this.program),gA(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return AA(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),gA(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),function(e,t,n,r){gA(e,(function(){return SA(e,t,r)})),gA(e,(function(){return e.uniform1i(n,r)}))}(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=Ky(hA(t,n),2),a=r[0],o=r[1];this.setOutputMatrixTextureDriver(e,a,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&IA(this.gl,this.program),NA(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),gA(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),gA(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=yA(this.gl,2===WC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===WC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==WC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:(t=Ay(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vC((function(){return n.disposed||n.isQueryAvailable(t,WC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,WC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}
/**
	       * @license
	       * Copyright 2017 Google LLC. All Rights Reserved.
	       * Licensed under the Apache License, Version 2.0 (the "License");
	       * you may not use this file except in compliance with the License.
	       * You may obtain a copy of the License at
	       *
	       * http://www.apache.org/licenses/LICENSE-2.0
	       *
	       * Unless required by applicable law or agreed to in writing, software
	       * distributed under the License is distributed on an "AS IS" BASIS,
	       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	       * See the License for the specific language governing permissions and
	       * limitations under the License.
	       * =============================================================================
	       */(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||vC((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),EA(this.gl,e,this.framebuffer),this.debug&&NA(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(EA(this.gl,this.outputTexture,this.framebuffer),this.debug&&NA(this.gl)):TA(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;EA(r,e,this.framebuffer),this.debug&&NA(r),this.outputTexture=e,gA(r,(function(){return r.viewport(0,0,t,n)})),gA(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),gA(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}},{key:"debug",get:function(){return WC().getBool("DEBUG")}}]),e}(),c_=uA.getBroadcastDims;function l_(e,t,n){var r=[];if(e.forEach((function(e){var t=pC(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(x_(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,o,i=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?p_(e,r):d_(e,r);var o=e.shapeInfo.logicalShape,i=t.logicalShape;return o.length<=i.length&&(a+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),o="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=c_(e.shapeInfo.logicalShape,t.logicalShape),c=b_(s),l=s-i,d=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(d[e+l]," = 0;")})).join("\n");var p;p=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+l])})).join(", ");var f="return outputValue;",h=1===pC(e.shapeInfo.logicalShape),m=1===pC(t.logicalShape);if(1!==i||h||m){if(h&&!m)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=i-2,v=i-1;u.indexOf(g)>-1&&u.indexOf(v)>-1?f="return vec4(outputValue.x);":u.indexOf(g)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(p,");\n      ").concat(f,"\n    }\n  ")}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&fC(i,o))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=b_(u),d=c_(e.shapeInfo.logicalShape,t.logicalShape),p=u-s,f=["x","y","z","w","u","v"];c=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(f[e+p]," = 0;")})).join("\n");var h;return h=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+p])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(h,");\n    }\n  ")}(e,t)),a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=WA(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),d=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(f_,"\n    ").concat(h_,"\n    ").concat(m_,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===r[0]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    "):1===r[1]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(fC(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),o=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),o=a*Math.ceil(e[e.length-2]/2),i=o,s="",u="b, r, c",c=2;c<e.length-1;c++)i*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(i,";\n      index -= b").concat(c," * ").concat(i,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){return 1===t[0]?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    "):1===t[1]?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){return fC(e,t)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    "):1===e[1]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    "):1===e[0]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    "):n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(jA(["r","c","d"],e),"\n    return ivec3(r, c, d);\n  }\n");var r=zA(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(jA(["r","c","d","d2"],e),"\n      return ivec4(r, c, d, d2);\n    }\n  ");var r=zA(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=zA(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=zA(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(d+=g_),[d,l,o,i,a,s,n.userCode].join("\n")}function d_(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=Ky(e.shapeInfo.texShape,2),o=a[0],i=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=v_(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=Ky(e.shapeInfo.texShape,2),c=u[0],l=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(y_(e),"\n      }\n    ");var a=e.shapeInfo.texShape,o=a[0],i=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=v_(n);return 1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(i,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&fC(n,o)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var i=o[0];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(o[1],".0, ").concat(i,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var s=xC(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){return"\n      ".concat(d_(k_(e,l),t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(w_(["row","col"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(y_(e),"\n      }\n    ");var d=o[0],p=o[1],f=v_(r);return 1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===d?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(f,";\n    vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],i=n[2],s=xC(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){return"\n        ".concat(d_(k_(e,l),t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(w_(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(i,", 1)));\n        ").concat(y_(e),"\n      }\n    ");var d=e.shapeInfo.texShape,p=d[0],f=d[1],h=e.shapeInfo.flatOffset;if(f===o&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(f,".0, ").concat(p,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(f===i&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(f,".0, ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var m=v_(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],i=n[2]*o,s=n[1]*i,u=xC(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){return"\n      ".concat(d_(k_(e,c),t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(w_(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(i,", ").concat(o,", 1)));\n        ").concat(y_(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],h=p[1],m="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),v="int stride0 = ".concat(r,"Shape[1] * stride1;");if(h===s&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(m,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(h,".0, ").concat(f,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(h===o&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(h,".0, ").concat(f,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var y=v_(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(m,"\n      ").concat(g,"\n      ").concat(v,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(f,", ").concat(h,", index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,i=t[2]*o,s=t[1]*i,u=xC(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){return"\n      ".concat(d_(k_(e,c)),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(w_(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(i,", ").concat(o,", ").concat(a,")) +\n          depth3;\n        ").concat(y_(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],h=p[1];if(h===s&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(o,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(h,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(h===a&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(h,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=v_(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(o," +\n          depth2 * ").concat(a," + depth3 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(f,", ").concat(h,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=xC(t),o=a.newShape,i=a.keptDims;if(o.length<t.length){return"\n      ".concat(d_(k_(e,o)),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(w_(["row","col","depth","depth2","depth3","depth4"],i),");\n      }\n    ")}var s=t[5],u=t[4]*s,c=t[3]*u,l=t[2]*c,d=t[1]*l;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(d,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(s,", 1)));\n        ").concat(y_(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],m=f[1];if(m===d&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(l,", ").concat(c,", ").concat(u,", ").concat(s,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===s&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=v_(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(d," + col * ").concat(l," + depth * ").concat(c," +\n          depth2 * ").concat(u," + depth3 * ").concat(s," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling is not yet supported"))}}function p_(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=WA();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=WA();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");var i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=o[0],s=o[1],u=WA();if(null!=o&&fC(n,o))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){return"\n        ".concat(p_(k_(e,n.slice(1)),t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(w_(["b","row","col"],[1,2]),");\n        }\n      ")}var s=WA();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ");var u=i[0],c=i[1],l=Math.ceil(n[2]/2),d=l*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(u,", ").concat(c,", ").concat(d,", ").concat(l,", b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=WA();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var o=e.shapeInfo.logicalShape,i=o.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],d=Math.ceil(o[i-1]/2),p=d*Math.ceil(o[i-2]/2),f="int b, int row, int col",h="b * ".concat(p," + (row / 2) * ").concat(d," + (col / 2)"),m=2;m<i-1;m++)f="int b".concat(m,", ")+f,p*=o[i-m-1],h="b".concat(m," * ").concat(p," + ")+h;return"\n    vec4 ".concat(r,"(").concat(f,") {\n      int index = ").concat(h,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var f_="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",h_="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",m_="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",g_="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function v_(e){return"offset".concat(e)}function y_(e){var t=e.name,n=pC(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function b_(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function x_(e,t,n){var r=xC(t).newShape,a=t.length,o=e&&3===a&&1===t[0],i=o?t.slice(1):r,s=!e&&a>1&&!fC(t,n)&&r.length<a||o;return{useSqueezeShape:s,uniformShape:s?i:t}}function k_(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function w_(e,t){return t.map((function(t){return e[t]})).join(", ")}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function I_(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but was executed with ").concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],o=a.shape;if(!fC(r,o))throw Error("Binary was compiled with different shapes than the current args. Shapes ".concat(r," and ").concat(o," must match"));if(!e.isUniform||!a.isUniform){var i=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!fC(i,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape ".concat(i," and ").concat(s," must match"))}}))}function C_(e){return WC().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function S_(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&cC("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function E_(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var T_={kernelName:"Abs",backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;S_(t,"abs");var r=new Float32Array(pC(t.shape));return r=E_(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function N_(e){return function(t,n,r,a,o){var i=HT(t,n),s=i.length,u=_C(i),c=kC(o,pC(i)),l=t.length,d=n.length,p=_C(t),f=_C(n),h=zT(t,i),m=zT(n,i);if(h.length+m.length===0)for(var g=0;g<c.length;++g)c[g]=e(r[g%r.length],a[g%a.length]);else for(var v=function(t){var n=PC(t,s,u),o=n.slice(-l);h.forEach((function(e){return o[e]=0}));var i=BC(o,l,p),g=n.slice(-d);m.forEach((function(e){return g[e]=0}));var v=BC(g,d,f);c[t]=e(r[i],a[v])},y=0;y<c.length;++y)v(y);return[c,i]}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function A_(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(a.shape,"float32",i)},s}var __={kernelName:"Complex",backendName:"cpu",kernelFunc:A_};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function R_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n)return A_({inputs:{real:R_(e,t,"float32"),imag:R_(e,t,"float32")},backend:e});var r=FC(pC(t),n);return e.makeTensorInfo(t,n,r)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function O_(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var F_={kernelName:"Identity",backendName:"cpu",kernelFunc:O_};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function M_(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var D_={kernelName:"Real",backendName:"cpu",kernelFunc:M_};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function B_(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dtype;if("complex64"===o){if("complex64"===a.dtype)return O_({inputs:{x:a},backend:n});var i=R_(n,a.shape,a.dtype),s=B_({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=A_({inputs:{real:s,imag:i},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var c=M_({inputs:{input:a},backend:n}),l=B_({inputs:{x:c},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(c),l}if(!IC(a.dtype,o)){var d=O_({inputs:{x:a},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:o}}if("int32"===o){var p=n.data.get(a.dataId).values,f=Int32Array.from(p);return n.makeTensorInfo(a.shape,"int32",f)}if("bool"===o){var h=n.data.get(a.dataId).values,m=LS([0],a.dtype),g=Ky(N_((function(e,t){return e!==t?1:0}))(a.shape,[],h,m,"bool"),2),v=g[0],y=g[1];return n.makeTensorInfo(y,"bool",v)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(o))}var P_={kernelName:"Cast",backendName:"cpu",kernelFunc:B_};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function L_(e,t,n,r){return null==n?function(n){var a=n.inputs,o=n.backend,i=a.a,s=a.b,u=o;S_([i,s],e);var c=u.data.get(i.dataId).values,l=u.data.get(s.dataId).values,d="string"===i.dtype?rA(c):c,p="string"===i.dtype?rA(l):l,f=r||i.dtype,h=Ky(t(i.shape,s.shape,d,p,f),2),m=h[0],g=h[1];return u.makeTensorInfo(g,f,m)}:function(e){var a=e.inputs,o=e.backend,i=a.a,s=a.b,u=o;if("complex64"===i.dtype||"complex64"===s.dtype){var c=B_({inputs:{x:i},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),d=l.complexTensorInfos.real,p=l.complexTensorInfos.imag,f=u.data.get(d.dataId).values,h=u.data.get(p.dataId).values,m=B_({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),g=u.data.get(m.dataId),v=g.complexTensorInfos.real,y=g.complexTensorInfos.imag,b=u.data.get(v.dataId).values,x=u.data.get(y.dataId).values,k=Ky(n(i.shape,s.shape,f,h,b,x),3),w=k[0],I=k[1],C=k[2],S=u.makeTensorInfo(C,"float32",w),E=u.makeTensorInfo(C,"float32",I),T=A_({inputs:{real:S,imag:E},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(S),u.disposeIntermediateTensorInfo(E),T}var N=u.data.get(i.dataId).values,A=u.data.get(s.dataId).values,_=r||i.dtype,R=Ky(t(i.shape,s.shape,N,A,_),2),O=R[0],F=R[1];return u.makeTensorInfo(F,_,O)}}function U_(e){return function(t,n,r,a,o,i){var s=HT(t,n),u=pC(s),c=s.length,l=_C(s),d=kC("float32",u),p=kC("float32",u),f=zT(t,s),h=zT(n,s),m=PN(r,a),g=PN(o,i),v=t.length,y=_C(t),b=n.length,x=_C(n);if(f.length+h.length===0)for(var k=0;k<d.length;k++){var w=k%m.length,I=k%g.length,C=e(m[2*w],m[2*w+1],g[2*I],g[2*I+1]);d[k]=C.real,p[k]=C.imag}else for(var S=function(t){var n=PC(t,c,l),r=n.slice(-v);f.forEach((function(e){return r[e]=0}));var a=BC(r,v,y),o=n.slice(-b);h.forEach((function(e){return o[e]=0}));var i=BC(o,b,x),s=e(m[2*a],m[2*a+1],g[2*i],g[2*i+1]);d[t]=s.real,p[t]=s.imag},E=0;E<d.length;E++)S(E);return[d,p,s]}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var V_=N_((function(e,t){return e+t})),W_=L_("Add",V_,U_((function(e,t,n,r){return{real:e+n,imag:t+r}}))),z_={kernelName:"Add",backendName:"cpu",kernelFunc:W_};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function j_(e,t,n,r,a){for(var o=pC(r),i=FC(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(i[u]+=o>0?t[s]:1)}return i}function H_(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],o=e.shape[1],i=ZE([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<o;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?i.set(1,s,c):t.size>0?i.set(i.get(s,c)+t.get(s,u),s,c):i.set(i.get(s,c)+1,s,c))}return i}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function G_(e){return function(t,n,r){for(var a=kC(n,t.length),o=0;o<t.length;++o)a[o]=e(t[o],r);return a}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function q_(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(S_(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=i,c=u.data.get(s.dataId).values,l=pC(s.shape),d=n||s.dtype,p=wC(d,l),f=0;f<l;++f)p[f]=t(c[f],o);return u.makeTensorInfo(s.shape,d,p)}}function K_(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(S_(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=i,c=u.data.get(s.dataId).values,l=n||s.dtype,d=t(c,l,o);return u.makeTensorInfo(s.shape,l,d)}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var X_=G_((function(e){return Math.ceil(e)})),Q_={kernelName:"Ceil",backendName:"cpu",kernelFunc:K_("Ceil",X_)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Y_(e,t,n,r){var a=wC(n,pC(t));if(r&&"string"!==n){var o=0;e.forEach((function(e){var t=pC(e.shape);a.set(e.vals,o),o+=t}))}else{var i=0;e.forEach((function(e){for(var r="string"===n?rA(e.vals):e.vals,o=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+i,c=0;c<e.shape[1];++c)a[u+c]=r[o++];i+=e.shape[1]}))}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var $_=N_((function(e,t){return e===t?1:0})),Z_=L_("Equal",$_,null,"bool"),J_={kernelName:"Equal",backendName:"cpu",kernelFunc:Z_},eR=G_((function(e){return Math.exp(e)})),tR=K_("Exp",eR),nR={kernelName:"Exp",backendName:"cpu",kernelFunc:tR},rR=G_((function(e){return Math.expm1(e)})),aR={kernelName:"Expm1",backendName:"cpu",kernelFunc:K_("Expm1",rR)},oR=G_((function(e){return Math.floor(e)})),iR={kernelName:"Floor",backendName:"cpu",kernelFunc:K_("Floor",oR)};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function sR(e,t,n,r,a,o,i,s,u){for(var c=ZE([r,o],n),l=0;l<r;l++){for(var d=[],p=0,f=0;f<a;f++){var h=e[l*a+f];p+=h*i[f],d.push(h)}if(p<0||p>=u/o)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(s));for(var m=0;m<o;m++)c.values[l*o+m]=t.get.apply(t,Xy(t.indexToLoc(p*o+m)))}return c}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function uR(e,t,n){for(var r=ZE(n,e.dtype),a=0;a<r.size;++a){var o=r.indexToLoc(a).slice(),i=o[0],s=o[2],u=t.locToIndex([i,s]);o[2]=t.values[u];var c=e.locToIndex(o);r.values[a]=e.values[c]}return r}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var cR=N_((function(e,t){return e>t?1:0})),lR={kernelName:"Greater",backendName:"cpu",kernelFunc:L_("Greater",cR,null,"bool")},dR=N_((function(e,t){return e>=t?1:0})),pR={kernelName:"GreaterEqual",backendName:"cpu",kernelFunc:L_("GreaterEqual",dR,null,"bool")},fR=N_((function(e,t){return e<t?1:0})),hR={kernelName:"Less",backendName:"cpu",kernelFunc:L_("Less",fR,null,"bool")},mR=N_((function(e,t){return e<=t?1:0})),gR={kernelName:"LessEqual",backendName:"cpu",kernelFunc:L_("LessEqual",mR,null,"bool")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function vR(e,t,n){var r=(t-e)/(n-1),a=FC(n,"float32");a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var yR=G_((function(e){return Math.log(e)})),bR={kernelName:"Log",backendName:"cpu",kernelFunc:K_("Log",yR)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function xR(e,t,n,r){for(var a=kC(r,pC(n)),o=0;o<a.length;++o){for(var i=o*t,s=e[i],u=0;u<t;++u){var c=e[i+u];(Number.isNaN(c)||c>s)&&(s=c)}a[o]=s}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var kR=N_((function(e,t){return Math.max(e,t)})),wR={kernelName:"Maximum",backendName:"cpu",kernelFunc:L_("Maximum",kR)},IR=N_((function(e,t){return Math.min(e,t)})),CR={kernelName:"Minimum",backendName:"cpu",kernelFunc:L_("Minimum",IR)},SR=N_((function(e,t){return e*t})),ER=U_((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),TR=L_("Multiply",SR,ER),NR={kernelName:"Multiply",backendName:"cpu",kernelFunc:TR};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function AR(e,t,n){var r=PS(-1,n);return SR([],t,r,e,n)}var _R={kernelName:"Neg",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;S_(r,"neg");var a=Ky(AR(n.data.get(r.dataId).values,r.shape,r.dtype),2),o=a[0],i=a[1];return n.makeTensorInfo(i,r.dtype,o)}},RR=N_((function(e,t){return e!==t?1:0})),OR={kernelName:"NotEqual",backendName:"cpu",kernelFunc:L_("NotEqual",RR,null,"bool")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function FR(e,t,n,r,a){for(var o=t.length,i=pC(t),s=_C(t),u=_C(a),c=kC(n,pC(a)),l=0;l<i;++l){for(var d=PC(l,o,s),p=new Array(d.length),f=0;f<p.length;f++)p[f]=d[r[f]];c[BC(p,o,u)]=e[l]}return c}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function MR(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.perm;S_(a,"transpose");for(var i=a.shape.length,s=new Array(i),u=0;u<s.length;u++)s[u]=a.shape[o[u]];var c=FR(r.data.get(a.dataId).values,a.shape,a.dtype,o,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var DR={kernelName:"Transpose",backendName:"cpu",kernelFunc:MR};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function BR(e,t,n,r){for(var a=Ky(YT(e,r),2),o=a[0],i=a[1],s=sE(t,"int32"),u=FC(pC(o),s),c=pC(i),l=0;l<u.length;++l){for(var d=l*c,p=1,f=0;f<c;++f)p*=n[d+f];u[l]=p}return{outVals:u,outShape:o,outDtype:s}}var PR={kernelName:"Prod",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;S_(a,"prod");var s=a.shape.length,u=bC(o,a.shape),c=JT(u,s),l=u,d=a,p=[];null!=c&&(d=MR({inputs:{x:a},backend:n,attrs:{perm:c}}),p.push(d),l=tN(l.length,s));var f=n.data.get(d.dataId).values,h=BR(d.shape,d.dtype,f,l),m=h.outVals,g=h.outShape,v=h.outDtype,y=g;return i&&(y=$T(g,u)),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,v,m)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function LR(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return FC(0,r);var a=FC(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+n;return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var UR=G_((function(e){return 1/Math.sqrt(e)})),VR={kernelName:"Rsqrt",backendName:"cpu",kernelFunc:K_("Rsqrt",UR)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function WR(e,t,n,r,a){var o=gT(r,t,n),i=pC(n),s=_C(r);if(o){var u=vT(t,s);return"string"===a?e.slice(u,u+i):e.subarray(u,u+i)}for(var c=ZE(r,a,"string"===a?rA(e):e),l=ZE(n,a),d=0;d<l.size;++d){var p=l.indexToLoc(d),f=p.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,Xy(f))].concat(Xy(p)))}return"string"===a?aA(l.values):l.values}function zR(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.size;S_(a,"slice");var s=Ky(yT(a,o,i),2),u=s[0],c=s[1];aT(a,u,c);var l=WR(n.data.get(a.dataId).values,u,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,l)}var jR={kernelName:"Slice",backendName:"cpu",kernelFunc:zR};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function HR(e,t,n,r,a,o,i){var s=t[0],u=o[0],c=new Array(u),l=new Array(s),d=t[1];if(0===u){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n         indices.shape[0] = ".concat(s));return[wC(n,0),[0,d],wC(a,0),c,l]}for(var p=!0,f=0,h=new Array(u).fill(0),m=0;m<s;++m){var g=e[m*d];if(g<0)throw new Error("indices(".concat(m,", 0) is invalid: ").concat(g," < 0"));if(g>=u)throw new Error("indices(".concat(m,", 0) is invalid: ").concat(g," >= ").concat(u));++h[g],p=p&&g>=f,f=g}for(var v=!0,y=0;y<u;++y){var b=0===h[y];c[y]=b,v=v&&!b,h[y]=Math.max(h[y],1),y>0&&(h[y]+=h[y-1])}if(v&&p){for(var x=e,k=r,w=0;w<s;++w)l[w]=w;return[x,[s,d],k,c,l]}for(var I=h[u-1],C=wC(n,I*d),S=wC(a,I),E=new Array(u).fill(0),T=0;T<s;++T){var N=e[T*d],A=E[N],_=(0===N?0:h[N-1])+A;E[N]++;for(var R=0;R<d;++R)C[_*d+R]=e[T*d+R];S[_]=r[T],l[T]=_}for(var O=0;O<u;++O)if(0===E[O]){var F=0===O?0:h[O-1];C[F*d+0]=O;for(var M=1;M<d;++M)C[F*d+M]=0;S[F]=i}return[C,[I,d],S,c,l]}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function GR(e,t,n,r,a){for(var o=pC(r),i=t[0],s=a.length,u=[],c=1,l=-1,d=0;d<s;++d){var p=a[d];if(-1===p){if(-1!==l)throw new Error("only one output dimension may be -1, not both ".concat(l," and ").concat(d));l=d,u.push(1)}else{if(p<0)throw new Error("size ".concat(d," must be non-negative, not ").concat(p));c*=p,u.push(p)}}if(-1!==l){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var f=Math.trunc(o/c);if(c*f!==o)throw new Error("Input to reshape is a SparseTensor with ".concat(o,"\n          dense values, but the requested shape requires a multiple of ").concat(c,". inputShape=").concat(r," outputShape= ").concat(u));u[l]=f}var h=pC(u);if(h!==o)throw new Error("Input to reshape is a tensor with ".concat(o," dense values, but the requested shape has ").concat(h,". inputShape=").concat(r," outputShape=").concat(u));var m=r.length,g=[];if(m>0){g[m-1]=1;for(var v=m-2;v>=0;--v)g[v]=g[v+1]*r[v+1]}var y=[];if(s>0){y[s-1]=1;for(var b=s-2;b>=0;--b)y[b]=y[b+1]*u[b+1]}for(var x=wC(n,i*s),k=0;k<i;++k){for(var w=0,I=0;I<m;++I)w+=e[k*m+I]*g[I];for(var C=0;C<s;++C)x[k*s+C]=Math.trunc(w/y[C]),w%=y[C]}return[x,[i,s],u]}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function qR(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length;if(s!==a.length)throw new Error("segmentIds and indices should have same size.");var u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0;if(l<0)throw new Error("segment ids must be >= 0");var d=t.slice();d[0]=l;var p=wC(n,d.reduce((function(e,t){return e*t}),1));if(0===s)return l>0&&p.fill(i),[p,d];if(l<=0)throw new Error("segment ids must be >= 0");for(var f=0,h=1,m=0,g=a[f];;){var v=0;if(h<s){if(g===(v=a[h])){++h;continue}if(g>=v)throw new Error("segment ids are not increasing")}if(g<0||g>=l)throw new Error("Segment id ".concat(g," out of range [0, ").concat(l,"), possibly because segmentIds input is not sorted."));g>m&&p.fill(i,m*c,g*c);for(var y=f;y<h;++y){var b=r[y];if(b<0||b>=u[0])throw new Error("Bad: indices[".concat(y,"] == ").concat(r[y]," out of range [0, ").concat(u[0],")"));for(var x=0;x<c;x++)p[g*c+x]+=e[b*c+x]}if(o)for(var k=0;k<c;k++)p[g*c+k]/=h-f;if(f=h,m=g+1,g=v,++h>s)break}return m<l&&p.fill(i,m*c,l*c),[p,d]
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var KR=N_((function(e,t){var n=e-t;return n*n})),XR={kernelName:"SquaredDifference",backendName:"cpu",kernelFunc:L_("SquaredDifference",KR)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function QR(e,t,n,r){for(var a=ZE(e,t.dtype),o=0;o<a.size;o++){for(var i=a.indexToLoc(o),s=new Array(i.length),u=0;u<s.length;u++)s[u]=i[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat(Xy(i)))}return a}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var YR=function(){function e(t,n,r,a,o,i){_y(this,e),this.separator=VS(t),this.nGramWidths=n,this.leftPad=VS(r),this.rightPad=VS(a),this.padWidth=o,this.preserveShort=i}return Oy(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,o){for(var i=this,s=function(s){var u=i.getPadWidth(o),c=Math.max(0,u-s),l=Math.max(0,u-(a-(s+1))),d=o-(c+l),p=t+(c>0?0:s-u),f=0;f+=c*i.leftPad.length;for(var h=0;h<d;++h)f+=e[p+h].length;f+=l*i.rightPad.length,f+=(c+l+d-1)*i.separator.length,n[r+s]=new Uint8Array(f);for(var m=n[r+s],g=0,v=function(e){return e.forEach((function(e){return m[g++]=e}))},y=0;y<c;++y)v(i.leftPad),v(i.separator);for(var b=0;b<d-1;++b)v(e[p+b]),v(i.separator);if(d>0){v(e[p+d-1]);for(var x=0;x<l;++x)v(i.separator),v(i.rightPad)}else{for(var k=0;k<l-1;++k)v(i.rightPad),v(i.separator);v(i.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var o=t[0];if(0!==o)throw new Error("First split value must be 0, got ".concat(o));for(var i=1;i<a;++i){var s=t[i]>=o;if(!(s=s&&t[i]<=r))throw new Error("Invalid split value ".concat(t[i],", must be in [").concat(o,", ").concat(r,"]"));o=t[i]}if(o!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(o))}var u=a-1,c=wC("int32",a);if(0===r||0===a){for(var l=new Array(r),d=0;d<=u;++d)c[d]=0;return[l,c]}c[0]=0;for(var p=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),c[e]=c[e-1]+a},f=1;f<=u;++f)p(f);for(var h=new Array(c[u]),m=function(r){var a=t[r],o=c[r];if(n.nGramWidths.forEach((function(i){var s=t[r+1]-t[r],u=n.getNumNGrams(s,i);n.createNGrams(e,a,h,o,u,i),o+=u})),n.preserveShort&&o===c[r]){var i=t[r+1]-t[r];if(0===i)return"continue";var s=i+2*n.padWidth;n.createNGrams(e,a,h,o,1,s)}},g=0;g<u;++g)m(g);return[h,c]}}]),e}();function $R(e,t,n,r,a,o,i,s){return new YR(n,r,a,o,i,s).compute(e,t)}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function ZR(e,t,n){if(!e.length)return[];if(0===t.length){for(var r=new Array(e.length),a=0;a<e.length;++a)r[a]=e.subarray(a,a+1);return r}if(1===t.length){for(var o=t[0],i=[],s=e.indexOf(o);-1!==s;){var u=e.subarray(0,s);n&&0===u.length||i.push(u),s=(e=e.subarray(s+1)).indexOf(o)}return n&&0===e.length||i.push(e),i}for(var c=[],l=0,d=0;d<e.length+1;d++)if(d===e.length||-1!==t.indexOf(e[d])){var p=e.subarray(l,d);n&&0===p.length||c.push(p),l=d+1}return c}function JR(e,t,n){for(var r=e.length,a=[],o=0,i=0,s=new Array(r),u=0;u<r;++u){var c=ZR(e[u],t,n),l=c.length;s[u]=l,o+=l,i=Math.max(i,l),a.push.apply(a,Xy(c))}for(var d=wC("int32",2*o),p=new Array(o),f=[r,i],h=0,m=0;m<r;++m)for(var g=0;g<s[m];++g)d[2*h]=m,d[2*h+1]=g,p[h]=a[h],++h;return[d,p,f]}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function eO(e,t){for(var n=wC("int32",e.length),r=0;r<e.length;++r)n[r]=BS(e[r]).modulo(t).getLowBitsUnsigned();return n}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var tO=N_((function(e,t){return e-t})),nO=L_("Sub",tO,U_((function(e,t,n,r){return{real:e-n,imag:t-r}}))),rO={kernelName:"Sub",backendName:"cpu",kernelFunc:nO};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function aO(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=ZE(n,e.dtype),o=0;o<a.values.length;++o){for(var i=a.indexToLoc(o),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=i[u]%e.shape[u];var c=e.locToIndex(s);a.values[o]=e.values[c]}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var oO=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function iO(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,i=Math.log(a),s=.5*Math.exp(2*i/3),u=.5*Math.sqrt(i*s*(a-s)/a)*Math.sign(o-a/2);iO(e,t,Math.max(n,Math.floor(t-o*s/a+u)),Math.min(r,Math.floor(t+(a-o)*s/a+u)))}var c=e[t],l=n,d=r;for(uC(e,n,t),oO(e[r],c)>0&&uC(e,n,r);l<d;){for(uC(e,l,d),l++,d--;oO(e[l],c)<0;)l+=1;for(;oO(e[d],c)>0;)d-=1}0===oO(e[n],c)?uC(e,n,d):uC(e,d+=1,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function sO(e,t,n,r,a){for(var o=t[t.length-1],i=e.length/o,s=o,u=kC(n,i*r),c=kC("int32",i*r),l=function(t){var n=t*s,o=e.subarray(n,n+s),i=new Array(o.length);o.forEach((function(e,t){return i[t]={value:e,index:t}})),r<i.length&&(iO(i,r),i=i.slice(0,r)),a&&i.sort(oO);for(var l=t*r,d=u.subarray(l,l+r),p=c.subarray(l,l+r),f=0;f<r;f++)d[f]=i[f].value,p[f]=i[f].index},d=0;d<i;d++)l(d);var p=t.slice();return p[p.length-1]=r,[ZE(p,n,u),ZE(p,"int32",c)]
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function uO(e,t,n,r){for(var a=bC(t,n)[0],o=[1,n[0],1],i=0;i<a;i++)o[0]*=n[i];o[1]=n[a];for(var s=a+1;s<n.length;s++)o[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new YS(o,r,e),d=[],p=1===o[0]&&1===o[2],f=0;f<n[a];f++){var h=void 0;if(p)h=e[f].toString();else{for(var m=[],g=0;g<o[0];g++)for(var v=0;v<o[2];v++)m.push(l.get(g,f,v));h=m.join(",")}if(void 0!==u[h])c[f]=u[h];else{var y=Object.keys(u).length;u[h]=y,c[f]=y,d.push(f)}}var b=o.slice();b[1]=Object.keys(u).length;var x=new YS(b,r);d.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)x.set(l.get(n,e,r),n,t,r)}));var k=n.slice();return k[a]=b[1],{outputValues:x.values,outputShape:k,indices:c}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var cO=Object.freeze({__proto__:null,simpleAbsImpl:E_,addImpl:V_,bincountImpl:j_,bincountReduceImpl:H_,ceilImpl:X_,concatImpl:Y_,equalImpl:$_,expImpl:eR,expm1Impl:rR,floorImpl:oR,gatherNdImpl:sR,gatherV2Impl:uR,greaterImpl:cR,greaterEqualImpl:dR,lessImpl:fR,lessEqualImpl:mR,linSpaceImpl:vR,logImpl:yR,maxImpl:xR,maximumImpl:kR,minimumImpl:IR,multiplyImpl:SR,negImpl:AR,notEqualImpl:RR,prodImpl:BR,rangeImpl:LR,rsqrtImpl:UR,sliceImpl:WR,sparseFillEmptyRowsImpl:HR,sparseReshapeImpl:GR,sparseSegmentReductionImpl:qR,squaredDifferenceImpl:KR,stridedSliceImpl:QR,stringNGramsImpl:$R,stringSplitImpl:JR,stringToHashBucketFastImpl:eO,subImpl:tO,tileImpl:aO,topKImpl:sO,transposeImpl:FR,uniqueImpl:uO}),lO=cO.addImpl,dO=cO.bincountImpl,pO=cO.bincountReduceImpl,fO=cO.ceilImpl,hO=cO.concatImpl,mO=cO.equalImpl,gO=cO.expImpl,vO=cO.expm1Impl,yO=cO.floorImpl,bO=cO.gatherNdImpl,xO=cO.gatherV2Impl,kO=cO.greaterImpl,wO=cO.greaterEqualImpl,IO=cO.lessImpl,CO=cO.lessEqualImpl,SO=cO.linSpaceImpl,EO=cO.logImpl,TO=cO.maxImpl,NO=cO.maximumImpl,AO=cO.minimumImpl,_O=cO.multiplyImpl,RO=cO.negImpl,OO=cO.notEqualImpl,FO=cO.prodImpl,MO=cO.rangeImpl,DO=cO.rsqrtImpl,BO=cO.simpleAbsImpl,PO=cO.sliceImpl,LO=cO.sparseFillEmptyRowsImpl,UO=cO.sparseReshapeImpl,VO=cO.sparseSegmentReductionImpl,WO=cO.stridedSliceImpl,zO=cO.stringNGramsImpl,jO=cO.stringSplitImpl,HO=cO.stringToHashBucketFastImpl,GO=cO.subImpl,qO=cO.tileImpl,KO=cO.topKImpl,XO=cO.transposeImpl,QO=cO.uniqueImpl;
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function YO(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function $O(e,t){return 1===t?[e]:YO(e,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ZO=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(0===n)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var r=$O("rc",n),a=b_(n),o=function(e,t,n){if(1===e)return"rc > ".concat(t[0]);for(var r="",a=e-2;a<e;a++)r+="".concat(n[a]," >= ").concat(t[a]),a<e-1&&(r+="||");return r}(n,t,r),i=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = ".concat(a[0],";\n    int c = ").concat(a[1],";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ").concat(t,";\n    bool rEdge = rp1 >= ").concat(n,";\n  ")}(n,t[t.length-1],t[t.length-2],r),s=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var o="".concat(0===r?"r":"rp1",", ").concat(0===a?"c":"cp1"),i=2;i<e;i++)o="".concat(t[t.length-1-i],",")+o;n.push(o)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= ".concat(e[0]," ? 0. : getA(rc + 1),\n            0, 0"):"getA(".concat(r[0],"),\n          cEdge ? 0. : getA(").concat(r[1],"),\n          rEdge ? 0. : getA(").concat(r[2],"),\n          rEdge || cEdge ? 0. : getA(").concat(r[3],")")}
/**
	     * @license
	     * Copyright 2018 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(t,r);this.userCode="\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n\n          if(").concat(o,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(s,"));\n          }\n        }\n      ")}},JO=function e(t,n){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r,a="",o=0;o<4;o++){var i="thisRC = rc;";o%2==1&&(i+="thisRC.z += 1;"),o>1&&(i+="thisRC.y += 1;"),a+="\n        ".concat(i,"\n        ").concat(o>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(o,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(o>0?"}":"","\n      ")}
/**
	   * @license
	   * Copyright 2017 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
this.userCode="\n      ".concat((r=n,"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(zA(["r","c","d"],r),"\n      return ivec3(r, c, d);\n    }\n  ")),"\n      ").concat(HA(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(t[1],";\n        int cols = ").concat(t[2],";\n\n        ").concat(a,"\n\n        setOutput(result);\n      }\n    ")},eF=function(){function e(t){_y(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return Oy(e,[{key:"acquireTexture",value:function(e,t,n){var r=nF(t,n),a=rF(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var o,i=tF(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===sA.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===sA.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===sA.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===sA.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===sA.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=nF(n,r),o=rF(t,a,r);o in this.freeTextures||(this.freeTextures[o]=[]);var i=tF(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=WC().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=i):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;var u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}}]),e}();function tF(e,t,n,r,a){var o,i=function(e,t){switch(e){case sA.PACKED_2X2_FLOAT32:return o_(t);case sA.PACKED_2X2_FLOAT16:return i_(t);case sA.UNPACKED_FLOAT32:return n_(t);case sA.UNPACKED_FLOAT16:return r_(t);case sA.PACKED_4X1_UNSIGNED_BYTE:return a_(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=Ky(hA(e[0],e[1]),2);o=s[0]*s[1]}else{var u=Ky(pA(e[0],e[1]),2);o=u[0]*u[1]}return o*function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;throw new Error("Unknown internal format ".concat(t))}(n,i)}function nF(e,t){if(e===iA.UPLOAD)return sA.PACKED_2X2_FLOAT32;if(e===iA.RENDER||null==e)return function(e){return WC().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?sA.PACKED_2X2_FLOAT32:sA.UNPACKED_FLOAT32:e?sA.PACKED_2X2_FLOAT16:sA.UNPACKED_FLOAT16}(t);if(e===iA.DOWNLOAD||e===iA.PIXELS)return sA.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function rF(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var aF=function e(t,n){_y(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=C_(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},oF="return abs(x);",iF="return x;",sF=function e(t,n){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=C_(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},uF=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,r=$O("rc",n),a=b_(n),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),i=r.slice(-2),s=n<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(o,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")},cF=vN,lF={},dF=WC().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),pF=function(e){Dy(o,e);var t,n,r,a=Hy(o);function o(e){var t,n;if(_y(this,o),(t=a.call(this)).pendingRead=new WeakMap,t.pendingDisposal=new WeakSet,t.dataRefCount=new WeakMap,t.numBytesInGPU=0,t.uploadWaitMs=0,t.downloadWaitMs=0,t.lastGlFlushTime=0,t.warnedAboutMemory=!1,t.pendingDeletes=0,t.disposed=!1,!WC().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var r=dA(WC().getNumber("WEBGL_VERSION"));t.binaryCache=((n=WC().getNumber("WEBGL_VERSION"))in lF||(lF[n]={}),lF[n]),t.gpgpu=new u_(r),t.canvas=r.canvas,t.gpgpuCreatedLocally=!0}else t.gpgpu=e,t.binaryCache={},t.gpgpuCreatedLocally=!1,t.canvas=e.gl.canvas;return t.textureManager=new eF(t.gpgpu),t.numMBBeforeWarning=null==WC().global.screen?1024:WC().global.screen.height*WC().global.screen.width*window.devicePixelRatio*600/1024/1024,t.texData=new rC(zy(t),wT()),jy(t)}return Oy(o,[{key:"nextDataId",value:function(){return o.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((WC().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||WC().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:iA.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(WC().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:iA.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,o=t.slice,i=t.shape,s=t.isPacked;if(null!=o){var u;u=s?new sF(i,iF):new aF(i,iF);var c=this.runWebGLProgram(u,[{dataId:e,shape:i,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,p,f=null!=this.activeTimers;return f&&(d=US()),p="complex64"===r?PN(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.getValuesFromTexture(e),f&&(this.downloadWaitMs+=US()-d),this.convertAndCacheOnCPU(e,p)}},{key:"read",value:(r=Ay(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,o=r.shape,i=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==i){e.next=8;break}return l=c?new sF(o,iF):new aF(o,iF),d=this.runWebGLProgram(l,[{dataId:t,shape:o,dtype:s}],s),p=this.read(d.dataId),e.abrupt("return",(this.disposeIntermediateTensorInfo(d),p));case 8:if(null==a){e.next=10;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 10:if(WC().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==WC().getNumber("WEBGL_VERSION")){e.next=12;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 12:if(m=null,"complex64"!==s&&WC().get("WEBGL_BUFFER_SUPPORTED")&&(f=this.decode(t),v=this.texData.get(f.dataId),m=(g=this.gpgpu).createBufferFromTexture.apply(g,[v.texture].concat(Xy(fA(o))))),this.pendingRead.set(t,[]),e.t0="complex64"!==s,!e.t0){e.next=19;break}return e.next=19,this.gpgpu.createAndWaitForFence();case 19:if("complex64"!==s){e.next=26;break}return e.next=22,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 22:y=e.sent,h=PN(y[0],y[1]),e.next=27;break;case 26:null==m?h=this.getValuesFromTexture(t):(b=pC(o),h=this.gpgpu.downloadFloat32MatrixFromBuffer(m,b));case 27:return null!=f&&this.disposeIntermediateTensorInfo(f),null!=m&&gA(x=this.gpgpu.gl,(function(){return x.deleteBuffer(m)})),k=this.convertAndCacheOnCPU(t,h),w=this.pendingRead.get(t),e.abrupt("return",(this.pendingRead.delete(t),w.forEach((function(e){return e(k)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&wT().removeDataId(t,this),this.pendingDeletes--),k));case 30:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return WS(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return ZE(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!vA(n)){if(WC().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"));throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,o=pC(n);if(WC().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var i,s=this.decode(e),u=this.texData.get(s.dataId),c=(i=this.gpgpu).downloadMatrixFromPackedTexture.apply(i,[u.texture].concat(Xy(fA(n)))).subarray(0,o);return this.disposeIntermediateTensorInfo(s),c}var l=WC().getBool("WEBGL_PACK")&&!0===a,d=l?OA(n):n,p=l?new QA(d):new XA(d),f=this.runWebGLProgram(p,[{shape:d,dtype:r,dataId:e}],"float32"),h=this.texData.get(f.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture,h.texShape[0],h.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(f),m}},{key:"timerAvailable",value:function(){return WC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:(n=Ay(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.activeTimers,r=[],a=!1,null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,t(),o=dC(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=dC(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=n,a&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},!(WC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=13;break}return e.next=9,Promise.all(o);case 9:u=e.sent,s.kernelMs=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}(u),s.getExtraProfileInfo=function(){return u.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=14;break;case 13:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 14:return e.abrupt("return",(this.uploadWaitMs=0,this.downloadWaitMs=0,s));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return WC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:US(),endMs:null}}},{key:"endTimer",value:function(e){return WC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=US(),e)}},{key:"getQueryTime",value:(t=Ay(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(WC().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,o=t.usage,i=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,o,i)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dF;return WC().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&pC(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){BN("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return cF(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new sF(e.shape,t),a=this.compileAndRun(r,[e],n);return wT().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=BO(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(WC().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,oF,e.dtype);var n=new aF(e.shape,oF),r=this.compileAndRun(n,[e]);return wT().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&EC(n[0])){var a=n.map((function(e){return VS(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return wT().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new uF(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new ZO(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[_A(e.shape)].concat(Xy(RA(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[_A(t)].concat(Xy(RA(t))),o=new JO(a,n),i=this.runWebGLProgram(o,[r],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}},{key:"decode",value:function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,o=n.dtype,i=OA(a);return t=r?new KA(i):new qA(i),{dtype:o,shape:a,dataId:this.runWebGLProgram(t,[{shape:i,dtype:o,dataId:e}],o,null,!0).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(i.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===oA.DENSE){var u=fA(e.outputShape);s.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===pC(i.shape))return s.values=kC(i.dtype,0),i;var c=[],l=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&pC(t.shape)<=WC().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!MA(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=a.packedReshape(t,o),c.push(t),n=a.texData.get(t.dataId),r.shape=o}return a.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);var d,p={shape:i.shape,texData:s,isUniform:!1},f=function(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var o=t.texData.texShape,i=x_(e.packedInputs,t.shape,o),s=i.useSqueezeShape,u=i.uniformShape,c="",l="",d="";if(1===u.length&&e.packedInputs){var p=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];c="".concat(p[0]>1,"_").concat(p[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var f=_C(u);d="".concat(f[0]===o[1],"_").concat(f[f.length-1]===o[1])}}else l="".concat(u[0]>1,"_").concat(u[1]>1);var h=t.shape.length,m=2===h&&fC(t.shape,o),g=1===pC(t.shape),v=zT(t.shape,n.shape),y=!e.packedInputs&&h===n.shape.length&&fC(o,n.texData.texShape),b=e.packedInputs||h>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);r+="".concat(h,"_").concat(y,"_").concat(s,"_").concat(u.length,"_").concat(g,"_").concat(v,"_").concat(m,"_").concat(c,"_").concat(l,"_").concat(d,"_").concat(b,"_").concat(a)}else{var x=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(x,"_").concat(a)}}));var a=e.userCode,o=e.constructor.name;return o+="_"+r+"_"+a+"".concat(WC().getNumber("WEBGL_VERSION"))}(e,l,p),h=this.getAndSaveBinary(f,(function(){return function(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=a.map((function(e){return e.shapeInfo})),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=l_(a,i,t),u=e.createProgram(s),c=null,l=e.getUniformLocation(u,"NAN",!1);1===WC().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(u,"INFINITY",!1));for(var d,p,f,h=!1,m={},g={},v={},y=0;y<t.variableNames.length;y++){var b=t.variableNames[y];m[b]=e.getUniformLocation(u,b,h),m["offset".concat(b)]=e.getUniformLocation(u,"offset".concat(b),h),t.enableShapeUniforms&&(g["".concat(b,"Shape")]=e.getUniformLocation(u,"".concat(b,"Shape"),h),v["".concat(b,"TexShape")]=e.getUniformLocation(u,"".concat(b,"TexShape"),h))}t.enableShapeUniforms&&(d=e.getUniformLocation(u,"outShape",h),f=e.getUniformLocation(u,"outShapeStrides",h),p=e.getUniformLocation(u,"outTexShape",h));var x=[];return t.customUniforms&&t.customUniforms.forEach((function(t,n){x[n]=e.getUniformLocation(u,t.name,h)})),{program:t,source:s,webGLProgram:u,uniformLocations:m,customUniformLocations:x,inShapeInfos:o,outShapeInfo:i,infLoc:c,nanLoc:l,inShapesLocations:g,inTexShapesLocations:v,outShapeLocation:d,outShapeStridesLocation:f,outTexShapeLocation:p}}(a.gpgpu,e,l,p)})),m=null!=this.activeTimers;m&&(d=this.startTimer()),function(e,t,n,r,a){t.program.enableShapeUniforms||(I_(t.inShapeInfos,n),I_([t.outShapeInfo],[r]));var o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o,i[0],i[1]):e.setOutputMatrixTexture(o,i[0],i[1]),e.setProgram(t.webGLProgram),1===WC().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],o=t.uniformLocations[a],i=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var c=x_(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(c.length){case 1:e.gl.uniform1iv(s,new Int32Array(c));break;case 2:e.gl.uniform2iv(s,new Int32Array(c));break;case 3:e.gl.uniform3iv(s,new Int32Array(c));break;case 4:e.gl.uniform4iv(s,new Int32Array(c))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=o)if(n.isUniform)if(pC(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var l=n.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(o,l)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=_C(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var o=t.customUniformLocations[r],i=a[r];if("float"===n.type)e.gl.uniform1fv(o,i);else if("vec2"===n.type)e.gl.uniform2fv(o,i);else if("vec3"===n.type)e.gl.uniform3fv(o,i);else if("vec4"===n.type)e.gl.uniform4fv(o,i);else if("int"===n.type)e.gl.uniform1iv(o,i);else if("ivec2"===n.type)e.gl.uniform2iv(o,i);else if("ivec3"===n.type)e.gl.uniform3iv(o,i);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(o,i)}})),e.executeProgram()}(this.gpgpu,h,l,p,r),c.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),m&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)}));var g=WC().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var v=US();v-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!WC().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){var y=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),y}return i}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;this.disposed||(WC().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}},{key:"floatPrecision",value:function(){var e,t=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(e=function(){if(!WC().get("WEBGL_RENDER_FLOAT32_ENABLED")){var e=WC().getBool("DEBUG");WC().set("DEBUG",!1);var n=t.abs(mN(1e-8)).dataSync()[0];if(WC().set("DEBUG",e),n>0)return 32}return 16},mE.tidy(e,undefined))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,o=t.texture,i=t.usage,s=t.isPacked;if(null==o){var u,c=null!=this.activeTimers;c&&(u=US());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=WC().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?sC(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=xC(e);e=r.newShape}var a=pC(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var o,i=_A(e),s=2,u=2;return e.length&&(s=(o=Ky(RA(e),2))[0],u=o[1]),mC(a=i*(s/2)*(u/2)).map((function(e){return 2*e}))}return mC(a)}(n,s),t.texShape=l),null!=a){var d,p,f=OA(n),h=l[1],m=l[0],g=a instanceof Uint8Array;s?(h=(d=Ky(hA(l[0],l[1]),2))[0],m=d[1],p=new $A(f,[m,h],g)):p=new YA(f,[m,h],g);var v=this.makeTensorInfo([m,h],r);this.texData.get(v.dataId).usage=g?iA.PIXELS:iA.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),h,m,a);var y=this.runWebGLProgram(p,[v],r,null,!0),b=this.texData.get(y.dataId);t.texture=b.texture,t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,this.disposeIntermediateTensorInfo(v),this.texData.delete(y.dataId),t.values=null,c&&(this.uploadWaitMs+=US()-u)}else{var x=this.acquireTexture(l,i,r,s);t.texture=x}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}
/**
	       * @license
	       * Copyright 2020 Google Inc. All Rights Reserved.
	       * Licensed under the Apache License, Version 2.0 (the "License");
	       * you may not use this file except in compliance with the License.
	       * You may obtain a copy of the License at
	       *
	       * http://www.apache.org/licenses/LICENSE-2.0
	       *
	       * Unless required by applicable law or agreed to in writing, software
	       * distributed under the License is distributed on an "AS IS" BASIS,
	       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	       * See the License for the specific language governing permissions and
	       * limitations under the License.
	       * =============================================================================
	       */(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, most likely due to a memory leak"))}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*SC(t)}}]),o}(aC);pF.nextDataId=0,yE()&&ST("webgl",(function(){return new pF}),2)
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */;var fF=function e(t,n,r){_y(this,e),this.variableNames=["A","B"],this.outputShape=HT(n,r),this.enableShapeUniforms=C_(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")},hF=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_y(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=HT(n,r);var o=this.outputShape.length;this.enableShapeUniforms=C_(o);var i="";if(a)if(0===o||1===pC(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          ".concat(b_(o)," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var s=$O("coords",o);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(s[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(s[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(s[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(s[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function mF(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var gF={kernelName:"Identity",backendName:"webgl",kernelFunc:mF};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function vF(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),s=mF({inputs:{x:r},backend:n}),u=mF({inputs:{x:a},backend:n});return i.complexTensorInfos={real:s,imag:u},o}var yF={kernelName:"Complex",backendName:"webgl",kernelFunc:vF},bF="return (a < 0.) ? b * a : a;",xF="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",kF={kernelName:"LeakyRelu",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha,i=n.makeTensorInfo([],"float32",PS(o,"float32")),s=WC().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hF(xF,a.shape,i.shape):new fF(bF,a.shape,i.shape),u=n.runWebGLProgram(s,[a,i],a.dtype);return n.disposeIntermediateTensorInfo(i),u}},wF="return (a < 0.) ? b * a : a;",IF="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",CF={kernelName:"Prelu",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=WC().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hF(IF,r.shape,a.shape):new fF(wF,r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function SF(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var o,i=e.inputs,s=e.backend,u=i.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var d=c.texData.get(u.dataId),p=r(d.values,l);return c.makeTensorInfo(u.shape,l,p)}return o=WC().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new sF(u.shape,n):new aF(u.shape,t),c.runWebGLProgram(o,[u],l)}}function EF(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,o=e.supportsComplex,i=void 0!==o&&o,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,o=e.backend,c=r.a,l=r.b,d=o;if(i&&"complex64"===c.dtype){var p=d.texData.get(c.dataId),f=d.texData.get(l.dataId),h=[[p.complexTensorInfos.real,f.complexTensorInfos.real],[p.complexTensorInfos.imag,f.complexTensorInfos.imag]].map((function(e){var n=Ky(e,2),r=n[0],a=n[1],o={dataId:r.dataId,dtype:r.dtype,shape:c.shape},i={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new fF(t,c.shape,l.shape);return d.runWebGLProgram(s,[o,i],sE(r.dtype,a.dtype))})),m=Ky(h,2),g=m[0],v=m[1],y=vF({inputs:{real:g,imag:v},backend:d});return d.disposeIntermediateTensorInfo(g),d.disposeIntermediateTensorInfo(v),y}var b,x=u||sE(c.dtype,l.dtype);if(("string"===c.dtype||"string"===l.dtype||d.shouldExecuteOnCPU([c,l]))&&null!=s){var k=d.texData.get(c.dataId).values,w=d.texData.get(l.dataId).values,I="string"===c.dtype?rA(k):k,C="string"===c.dtype?rA(w):w,S=Ky(s(c.shape,l.shape,I,C,x),2),E=S[0],T=S[1],N=d.makeTensorInfo(T,x);return d.texData.get(N.dataId).values=E,N}return b=WC().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new hF(n,c.shape,l.shape,a):new fF(t,c.shape,l.shape),d.runWebGLProgram(b,[c,l],x)}}function TF(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return t?IF:wF;if("leakyrelu"===e)return t?xF:bF;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var NF=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];_y(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;var l=a?t[1]:t[2],d=Math.ceil(l/2),p=a?"i * 2, rc.y":"rc.y, i * 2",f=o?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",v="";s&&(g=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),v="result = activation(result);");var y=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(g,"\n\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(d,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(p,");\n          vec4 b = getMatrixB(batchB, ").concat(f,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(m[0],");\n          result += (").concat(h[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(v,"\n\n        setOutput(result);\n      }\n    ")},AF="return areal * breal - aimag * bimag;",_F="return areal * bimag + aimag * breal;",RF=function e(t,n,r){_y(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=HT(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")},OF="return a * b;";
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function FF(e){var t,n=e.inputs,r=e.backend,a=n.a,o=n.b,i=sE(a.dtype,o.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(o.dataId),c=new RF(AF,a.shape,o.shape),l=new RF(_F,a.shape,o.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:o.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:o.shape}],p=r.runWebGLProgram(c,d,"float32"),f=r.runWebGLProgram(l,d,"float32"),h=vF({inputs:{real:p,imag:f},backend:r});return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(f),h}if(r.shouldExecuteOnCPU([a,o])){var m=r.texData.get(a.dataId),g=r.texData.get(o.dataId),v=Ky(_O(a.shape,o.shape,m.values,g.values,i),2),y=v[0],b=v[1],x=r.makeTensorInfo(b,i);return r.texData.get(x.dataId).values=y,x}return t=WC().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hF(OF,a.shape,o.shape):new fF(OF,a.shape,o.shape),r.runWebGLProgram(t,[a,o],i)}var MF={kernelName:"Multiply",backendName:"webgl",kernelFunc:FF};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function DF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=n,s=pC(a.shape),u=yC(o,s),c=pC(u);cC(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old shape (").concat(a.shape,") has ").concat(s," elements. The new shape and old shape must have the same number of elements.")}));var l=i.texData.get(a.dataId);return!l.isPacked||MA(a.shape,u)||null!==l.texture&&MA(l.shape,u)?(i.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[_A(e.shape)].concat(Xy(RA(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},o=[_A(t)].concat(Xy(RA(t))),i=new JO(o,r),s=n.runWebGLProgram(i,[a],e.dtype,null,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}(a,u,i)}var BF={kernelName:"Reshape",backendName:"webgl",kernelFunc:DF},PF=function e(t,n){_y(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(hC(l)?l.toPrecision(2):l,", ones);")}var d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")},LF=function e(t,n){_y(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),d=r%4,p="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),f="vec4";"all"===n?(s="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===n&&(s="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");var h="";o%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(p,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===d,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(p,"\n        } else if (").concat(2===d,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(p,"\n        } else if (").concat(3===d,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(p,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function UF(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=AN(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),o=e,i=0;i<a.length;i++){var s,u,c=a[i],l=c.inSize,d=c.windowSize,p=c.outSize;s="mean"===n?0===i?new PF({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:p},l):new PF({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:p}):new LF({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:p},n),u=o,o=r.runWebGLProgram(s,[o],t),u.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(u)}return o}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var VF=function e(t,n){_y(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var o=b_(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}
/**
	   * @license
	   * Copyright 2019 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(n);this.userCode="\n    void main() {\n      ".concat(o," resRC = getOutputCoords();\n      setOutput(getA(").concat(i,"));\n    }\n    ")},WF=function e(t,n){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var o=b_(this.rank),i=YO("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=i[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(i[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(o," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(l,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(i[this.rank-1],";\n      if(++").concat(i[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(l,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function zF(e,t,n){var r=WC().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new WF(e.shape,t):new VF(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function jF(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,o=e.shape.length,i=bC(a,e.shape),s=i,u=JT(s,o),c=null!=u,l=e;c&&(l=zF(e,u,r),s=tN(s.length,o)),ZT("sum",s,o);var d=Ky(YT(l.shape,s),2),p=d[0],f=d[1],h=p;n&&(h=$T(p,i));var m=pC(f),g=DF({inputs:{x:l},attrs:{shape:[pC(e.shape)/m,m]},backend:r}),v=UF(g,uE(e.dtype),"sum",r),y=DF({inputs:{x:v},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(v),c&&r.disposeIntermediateTensorInfo(l),y}(t.x,r.axis,r.keepDims,n)}var HF={kernelName:"Sum",backendName:"webgl",kernelFunc:jF};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function GF(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.perm,s=r,u=o.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=o.shape[i[l]];if(s.shouldExecuteOnCPU([o])){var d=s.texData.get(o.dataId).values,p=XO(d,o.shape,o.dtype,i,c);t=s.makeTensorInfo(c,o.dtype),s.texData.get(t.dataId).values=p}else t=zF(o,i,s);return t}var qF={kernelName:"Transpose",backendName:"webgl",kernelFunc:GF};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function KF(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,p=e.activation,f=void 0===p?null:p,h=t.shape.length,m=n.shape.length,g=r?t.shape[h-2]:t.shape[h-1],v=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[h-1]:t.shape[h-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),k=n.shape.slice(0,-2),w=pC(x),I=pC(k);cC(h>=2&&m>=2&&(w===I||1===w||1===I),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (".concat(x,") and (").concat(k,").")}));var C=(w>I?t.shape.slice(0,-2):n.shape.slice(0,-2)).concat([y,b]);cC(g===v,(function(){return"Error in matMul: inner shapes (".concat(g,") and (").concat(v,") of Tensors with shapes ").concat(t.shape," and ").concat(n.shape," and transposeA=").concat(r," and transposeB=").concat(a," must match.")}));var S,E=r?[w,g,y]:[w,y,g],T=a?[I,b,v]:[I,v,b],N=DF({inputs:{x:t},backend:o,attrs:{shape:E}}),A=DF({inputs:{x:n},backend:o,attrs:{shape:T}}),_=[N,A],R=Math.max(w,I),O=r?N.shape[1]:N.shape[2],F=null!=s,M=null!=c,D="leakyrelu"===f,B=null!=f?TF(f,!0):null;if((1===y||1===b)&&O>1e3&&!1===(F||M||D||null!=B)){var P=N,L=A;r&&(P=GF({inputs:{x:N},backend:o,attrs:{perm:[0,2,1]}}),_.push(P)),a&&(L=GF({inputs:{x:A},backend:o,attrs:{perm:[0,2,1]}}),_.push(L));var U=1===b,V=P;1!==b&&(V=DF({inputs:{x:P},backend:o,attrs:{shape:[R,O,1]}}),_.push(V));var W=1===b?2:1,z=L;U&&(z=DF({inputs:{x:L},backend:o,attrs:{shape:[R,1,O]}}),_.push(z));var j=FF({inputs:{a:V,b:z},backend:o});S=jF({inputs:{x:j},backend:o,attrs:{axis:W,keepDims:!0}}),_.push(j)}else{var H=sE(t.dtype,n.dtype),G=new NF(E,T,[R,y,b],r,a,F,B,M,D),q=[N,A];if(null!=s&&q.push(s),M&&q.push(c),D){var K=o.makeTensorInfo([],"float32",PS(d,"float32"));q.push(K),_.push(K)}S=o.runWebGLProgram(G,q,H)}var X=DF({inputs:{x:S},backend:o,attrs:{shape:C}});_.push(S);for(var Q=0,Y=_;Q<Y.length;Q++){var $=Y[Q];o.disposeIntermediateTensorInfo($)}return X}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var XF={kernelName:"_FusedMatMul",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return KF({a:a,b:o,transposeA:u,transposeB:c,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},QF={kernelName:"Abs",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var o=r.texData.get(a.dataId),i=BO(o.values);return r.makeTensorInfo(a.shape,a.dtype,i)}return t=WC().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new sF(a.shape,"return abs(x);"):new aF(a.shape,"return abs(x);"),r.runWebGLProgram(t,[a],a.dtype)}},YF={kernelName:"Acos",backendName:"webgl",kernelFunc:SF({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"})},$F={kernelName:"Acosh",backendName:"webgl",kernelFunc:SF({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"})},ZF="return a + b;",JF={kernelName:"Add",backendName:"webgl",kernelFunc:EF({opSnippet:ZF,packedOpSnippet:ZF,supportsComplex:!0,cpuKernelImpl:lO})},eM=function e(t,n){_y(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},tM=function e(t,n){_y(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},nM={kernelName:"AddN",backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return mF({inputs:{x:a[0]},backend:r});if(a.length>WC().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(a.length/2),i=e({inputs:a.slice(0,o),backend:r}),s=e({inputs:a.slice(o),backend:r});return e({inputs:[i,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return sE(e,t)})),c=a.map((function(e){return e.shape})),l=WC().getBool("WEBGL_PACK")?new tM(a[0].shape,c):new eM(a[0].shape,c);return r.runWebGLProgram(l,a,u)}},rM={kernelName:"All",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=bC(o,a.shape),c=u,l=JT(c,s),d=a;null!=l&&(d=GF({inputs:{x:a},backend:n,attrs:{perm:l}}),c=tN(c.length,s)),ZT("all",c,s);var p,f=Ky(YT(d.shape,c),2),h=f[0],m=DF({inputs:{x:d},backend:n,attrs:{shape:[-1,pC(f[1])]}}),g=UF(m,m.dtype,"all",n);return p=DF(i?{inputs:{x:g},backend:n,attrs:{shape:$T(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),p}},aM={kernelName:"Any",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=bC(o,a.shape),c=u,l=JT(c,s),d=a;null!=l&&(d=GF({inputs:{x:a},backend:n,attrs:{perm:l}}),c=tN(c.length,s)),ZT("any",c,s);var p,f=Ky(YT(d.shape,c),2),h=f[0],m=DF({inputs:{x:d},backend:n,attrs:{shape:[-1,pC(f[1])]}}),g=UF(m,m.dtype,"any",n);return p=DF(i?{inputs:{x:g},backend:n,attrs:{shape:$T(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),p}},oM=function e(t,n,r){_y(this,e),this.variableNames=["A"];var a=t.windowSize,o=t.batchSize,i=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")},iM=function e(t,n,r,a){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,cC(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var o=t[t.length-1],i=Math.ceil(o/n);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,d=b_(l),p=$O("coords",l);if(1===i){var f=b_(u=l+1);s="\n        ".concat(f," sourceLocR = ").concat(f,"(").concat(p.join(),", 0);\n        ++").concat(p[l-1],";\n        ").concat(f," sourceLocG = ").concat(f,"(").concat(p.join(),", 0);\n        ++").concat(p[l-2],";\n        ").concat(f," sourceLocA = ").concat(f,"(").concat(p.join(),", 0);\n        --").concat(p[l-1],";\n        ").concat(f," sourceLocB = ").concat(f,"(").concat(p.join(),", 0);\n        --").concat(p[l-2],";")}else u=l,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(p[l-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(p[l-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(p[l-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(p[l-2],";");var h=["x","y","z","w","u","v"].slice(0,u),m="."+h[u-1],g=h.map((function(e){return"int "+e})),v=$O("sourceLocR",u-1).concat("inIdx.r"),y=$O("sourceLocG",u-1).concat("inIdx.g"),b=$O("sourceLocB",u-1).concat("inIdx.b"),x=$O("sourceLocA",u-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(v.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),I="vec4(\n            getAChannel(".concat(v.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),C=a?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(C,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(p[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(p[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(I,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(I,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function sM(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],o=t.shape[1];null!=r&&(a=r.shape[0],o=r.shape[1]);var i=AN(o),s={windowSize:i,inSize:o,batchSize:a,outSize:Math.ceil(o/i)},u=new oM(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var d=sM(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}function uM(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,o=AN(a[a.length-1]),i=new iM(a,o,n,null==r),s=null==r?[t]:[t,r],u=e.runWebGLProgram(i,s,"int32");if(u.shape.length===t.shape.length){var c=uM(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}return u}function cM(e,t,n,r){var a=[n];if(ZT("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!WC().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var o=[],i=Ky(YT(t.shape,a),2),s=i[0],u=pC(i[1]),c=DF({inputs:{x:t},backend:e,attrs:{shape:[-1,u]}});o.push(c);var l=sM(e,c,r);o.push(l);var d=DF({inputs:{x:l},backend:e,attrs:{shape:s}});return o.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),d}return uM(e,t,r)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var lM={kernelName:"ArgMax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=bC(r.axis,a.shape),i=JT(o,a.shape.length),s=a,u=[];null!=i&&(s=GF({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(s),o=tN(o.length,s.shape.length)),ZT("argMax",[o[0]],s.shape.length);var c=cM(n,s,o[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},dM={kernelName:"ArgMin",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=bC(r.axis,a.shape),i=JT(o,a.shape.length),s=a,u=[];null!=i&&(s=GF({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(s),o=tN(o.length,s.shape.length)),ZT("argMin",[o[0]],s.shape.length);var c=cM(n,s,o[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},pM={kernelName:"Asin",backendName:"webgl",kernelFunc:SF({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"})},fM={kernelName:"Asinh",backendName:"webgl",kernelFunc:SF({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"})},hM={kernelName:"Atan",backendName:"webgl",kernelFunc:SF({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"})},mM={kernelName:"Atan2",backendName:"webgl",kernelFunc:EF({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},gM={kernelName:"Atanh",backendName:"webgl",kernelFunc:SF({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"})},vM=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_y(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,p=t.effectiveFilterWidth,f=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,g="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),v="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(m||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(f,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?o?g:v:"wR * ".concat(p," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(x="avgValue / count");var k=4*Math.floor(i/4),w=i%4,I="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(h,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(I,"\n          }\n\n          int xC = xCCorner + ").concat(k,";\n          if (").concat(1===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(2===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(3===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(I,"\n          }\n        }\n        setOutput(").concat(x,");\n      }\n    ")}},yM=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_y(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,p=t.dilationWidth,f=t.effectiveFilterDepth,h=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,v=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(v,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(f,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(p,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?o?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(h," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(w="avgValue / count");var I=4*Math.floor(i/4),C=i%4,S="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(v,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(I,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(p,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(p,", ch)\n              );\n\n              ").concat(S,"\n            }\n\n            int xC = xCCorner + ").concat(I,";\n            if (").concat(1===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(2===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(3===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(p,", ch),\n                initializationValue\n              );\n\n              ").concat(S,"\n            }\n          }\n          setOutput(").concat(w,");\n        }\n      }\n    ")}},bM={kernelName:"AvgPool",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;UA(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;cC(LT(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c=NT(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&fC(c.inShape,c.outShape))return mF({inputs:{x:a},backend:n});var l=new vM(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}},xM={kernelName:"AvgPool3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=AT(a.shape,o,i,[1,1,1],s,u,c),d=new yM(l,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}},kM=function e(t){_y(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,d=c-1-t.padInfo.left,p=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(d,");\n      const float avgMultiplier = float(").concat(p,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},wM=function e(t){_y(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=d-1-t.padInfo.front,m=p-1-t.padInfo.top,g=f-1-t.padInfo.left,v=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(m,", ").concat(g,");\n      const float avgMultiplier = float(").concat(v,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(p,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},IM={kernelName:"AvgPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=AT(o.shape,i,s,[1,1,1],u,c),d=new wM(l);return n.runWebGLProgram(d,[a],o.dtype)}},CM={kernelName:"AvgPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;UA([a,o],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=NT(i.shape,s,u,1,c),d=new kM(l);return n.runWebGLProgram(d,[a],i.dtype)}},SM={kernelName:"BatchMatMul",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return KF({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},EM=function e(t,n,r,a,o,i){_y(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],HT(t,n),HT(t,r);var s="0.0";null!=a&&(HT(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=o&&(HT(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")},TM=function e(t,n,r,a,o,i){_y(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],HT(t,n),HT(t,r);var s="vec4(0.0)";null!=a&&(HT(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=o&&(HT(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")},NM={kernelName:"FusedBatchNorm",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.mean,i=t.variance,s=t.offset,u=t.scale;cC(o.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),cC(null==s||o.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),cC(null==u||o.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,o,i],d=null;null!=s&&(d=s.shape,l.push(s));var p=null;null!=u&&(p=u.shape,l.push(u));var f=WC().getBool("WEBGL_PACK_NORMALIZATION")?new TM(a.shape,o.shape,i.shape,d,p,c):new EM(a.shape,o.shape,i.shape,d,p,c);return n.runWebGLProgram(f,l,l[0].dtype)}},AM=function e(t){_y(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=b_(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return _M.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}
/**
	   * @license
	   * Copyright 2019 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(this.rank);r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(t.map((function(e,t){return"sourceLoc.".concat(_M[t]," = start[").concat(t,"] + coords.").concat(_M[t],";")})).join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")},_M=["x","y","z","w","u","v"],RM=function e(t){_y(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=b_(this.rank),r=$O("coords",this.rank),a=$O("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),i="getChannel(getSource(".concat(a.join(),"), ").concat(o,")"),s="\n      result.x = ".concat(i,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function OM(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=Ky(yT(a,r.begin,r.size),2),i=o[0],s=o[1];if(aT(a,i,s),0===pC(s))return n.makeTensorInfo(s,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var u=n.texData.get(a.dataId),c=PO(u.values,i,s,a.shape,a.dtype);return n.makeTensorInfo(s,a.dtype,c)}var l=n.texData.get(a.dataId).isPacked,d=gT(a.shape,i,s);if(l||!d){var p=WC().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new RM(s):new AM(s),f=[i];return n.runWebGLProgram(p,[a],a.dtype,f)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),i=r.texData.get(o.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;var s=vT(t,_C(e.shape));a.slice&&(s+=a.slice.flatOffset),i.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),o}(a,i,s,n)}var FM={kernelName:"Slice",backendName:"webgl",kernelFunc:OM},MM={kernelName:"BatchToSpaceND",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;cC(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=RN(a.shape,o,s),c=ON(u.length,o.length),l=FN(a.shape,o,s),d=MN(i,o.length),p=DN(l,i,o.length),f=[],h=DF({inputs:{x:a},backend:n,attrs:{shape:u}}),m=GF({inputs:{x:h},backend:n,attrs:{perm:c}}),g=DF({inputs:{x:m},backend:n,attrs:{shape:l}}),v=OM({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return f.push(h),f.push(m),f.push(g),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},DM={kernelName:"Bincount",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=dO(s,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}},BM=EF({opSnippet:"return float(a != b);",cpuKernelImpl:OO,dtype:"bool"}),PM={kernelName:"NotEqual",backendName:"webgl",kernelFunc:BM};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function LM(e){var t=e.inputs,n=e.backend,r=t.input;return mF({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var UM={kernelName:"Real",backendName:"webgl",kernelFunc:LM},VM={kernelName:"Cast",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function e(t){var n=t.inputs,r=t.backend,a=t.attrs,o=n.x,i=a.dtype;if("complex64"===i){if("complex64"===o.dtype)return mF({inputs:{x:o},backend:r});var s=nN(o.shape),u=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),c=vF({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===o.dtype){var l=LM({inputs:{input:o},backend:r}),d=e({inputs:{x:l},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(l),d}if(!IC(o.dtype,i)){var p=mF({inputs:{x:o},backend:r});return{dataId:p.dataId,shape:p.shape,dtype:i}}if("int32"===i)return function(e,t){var n=new aF(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===i){var f=r.makeTensorInfo([],"bool",kC("bool",1)),h=BM({inputs:{a:o,b:f},backend:r});return r.disposeIntermediateTensorInfo(f),h}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(i))}},WM="return ceil(x);",zM={kernelName:"Ceil",backendName:"webgl",kernelFunc:SF({opSnippet:WM,packedOpSnippet:WM,cpuKernelImpl:fO})},jM=function e(t){_y(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "},HM=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "},GM={kernelName:"ClipByValue",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.clipValueMin,s=a.clipValueMax;t=WC().getBool("WEBGL_PACK_CLIP")?new HM(o.shape):new jM(o.shape);var u=[[i],[s]];return r.runWebGLProgram(t,[o],o.dtype,u)}},qM=function e(t){_y(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function KM(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var XM={kernelName:"ComplexAbs",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),o=new qM(r.shape),i=[KM(r,a.complexTensorInfos.real),KM(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}},QM=function e(t){_y(this,e),this.outputShape=[],this.outputShape=NN(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],o=1;o<n.length;o++){var i=n[o-1];a.push("else if (yC < ".concat(n[o],") setOutput(getT").concat(o,"(yR, yC-").concat(i,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")},YM=function e(t,n){_y(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=NN(t,n);var r=this.outputShape,a=r.length,o=b_(a),i=$O("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],d=s.slice(-2),p=s.join(),f="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(p,"), vec2(").concat(d.join(),"));\n        }"),h=1;h<u.length;h++){var m=u[h-1];f+="\n        if (".concat(l," < ").concat(u[h],"  && ").concat(l," >= ").concat(u[h-1],") {\n          return getChannel(\n            getT").concat(h,"(").concat($M(s,l,m),"),\n            vec2(").concat($M(d,l,m),"));\n        }")}var g=u.length,v=u[u.length-1];f+="\n        return getChannel(\n          getT".concat(g,"(").concat($M(s,l,v),"),\n          vec2(").concat($M(d,l,v),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(f,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," + 1;\n        if (").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-2]," = ").concat(i[a-2]," + 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," - 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2]," &&\n            ").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function $M(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function ZM(e){var t=e.inputs,n=e.backend,r=t.input;return mF({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var JM={kernelName:"Imag",backendName:"webgl",kernelFunc:ZM};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function eD(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return LM({inputs:{input:e},backend:n})})),o=e.map((function(e){return ZM({inputs:{input:e},backend:n})})),i=eD(a,t,n),s=eD(o,t,n),u=vF({inputs:{real:i,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=pC(e.shape.slice(t));return DF({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),p=NN(l.map((function(e){return e.shape})),1),f=1===l[0].shape[0],h=hO(d,p,r,f),m=NN(e.map((function(e){return e.shape})),t),g=n.makeTensorInfo(m,r,h);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}if(e.length>WC().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var v=Math.floor(e.length/2),y=eD(e.slice(0,v),t,n),b=eD(e.slice(v),t,n),x=eD([y,b],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}if(WC().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var k=new YM(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(k,e,r)}var w=function(e,t,n){var r=NN(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return DF({inputs:{x:e},attrs:{shape:[-1,pC(e.shape.slice(t))]},backend:n})})),outShape:r}}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(e,t,n),I=w.tensors2D,C=w.outShape,S=new QM(I.map((function(e){return e.shape}))),E=n.runWebGLProgram(S,I,r);I.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var T=DF({inputs:{x:E},attrs:{shape:C},backend:n});return n.disposeIntermediateTensorInfo(E),T}function tD(e){var t=e.inputs,n=e.backend,r=bC(e.attrs.axis,t[0].shape)[0],a=NN(t.map((function(e){return e.shape})),r);if(0===pC(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return pC(e.shape)>0}));return 1===o.length?mF({inputs:{x:o[0]},backend:n}):(TN(o.map((function(e){return e.shape})),r),eD(o,r,n))}var nD={kernelName:"Concat",backendName:"webgl",kernelFunc:tD},rD=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,d=t.dilationWidth,p=t.filterHeight,f=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4,g="channelsLast"===t.dataFormat,v=g?1:2,y=g?2:3,b=g?3:1,x="",k="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(v,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(p,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(f,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")},aD=function e(t){_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,p=t.filterHeight,f=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(i,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},oD=function e(t,n,r){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var a=r.filterWidth,o=r.inChannels,i=r.strideWidth,s=r.strideHeight,u=r.padInfo,c=r.outWidth,l=r.dilationWidth,d=r.dilationHeight,p=r.dataFormat,f=u.left,h=u.top,m=o*a,g=WA(),v="channelsLast"===p,y=v?0:1,b=v?1:2,x="",k=0;k<=1;k++)for(var w=0;w<=1;w++)x+="\n          blockIndex = rc.y + ".concat(w,";\n          pos = rc.x + ").concat(k,";\n\n          if(blockIndex < ").concat(t[1]," && pos < ").concat(t[0],") {\n            offsetY = int(blockIndex / (").concat(c,")) * ").concat(s," - ").concat(h,";\n            d0 = offsetY + ").concat(d," * (pos / ").concat(m,");\n\n            if(d0 < ").concat(n[y]," && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ").concat(c,".) * ").concat(i,". - ").concat(f,".);\n              d1 = offsetX + ").concat(l," * (int(mod(float(pos), ").concat(m,".) / ").concat(o,".));\n\n              if(d1 < ").concat(n[b]," && d1 >= 0) {\n\n                ch = int(mod(float(pos), ").concat(o,".));\n\n                if (").concat(v,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*k+w,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*k+w,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(x,"\n\n        ").concat(g.output," = result;\n      }\n    ")};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function iD(e){var t,n=e.x,r=e.filter,a=e.convInfo,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,p=e.activation,f=void 0===p?null:p,h=n.shape,m=o.texData.get(n.dataId),g=a.inChannels,v=h[0]*h[1]*h[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[],k=(1===v||1===y)&&g>1e3,w=h[2]%2!=0&&!!m.isPacked;if(!k&&WC().getBool("WEBGL_LAZILY_UNPACK")&&WC().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&w){var I=b?h[0]*h[1]*(h[2]+1):h[0]*h[2]*(h[3]+1),C={dataId:n.dataId,shape:[1,I,a.inChannels],dtype:n.dtype},S=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,cC(MA(m.shape,C.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(C.shape," isn't free")}));var E=DF({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(E);var T=KF({a:C,b:E,backend:o,transposeA:!1,transposeB:!1,bias:s,activation:f,preluActivationWeights:c,leakyreluAlpha:d}),N=o.texData.get(T.dataId);cC(N.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=S,N.shape=a.outShape,(t=mF({inputs:{x:T},backend:o})).shape=a.outShape,x.push(T)}else{var A=DF({inputs:{x:n},backend:o,attrs:{shape:[1,b?h[0]*h[1]*h[2]:h[0]*h[2]*h[3],a.inChannels]}}),_=DF({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}}),R=KF({a:A,b:_,transposeA:!1,transposeB:!1,backend:o,bias:s,activation:f,preluActivationWeights:c,leakyreluAlpha:d});t=DF({inputs:{x:R},backend:o,attrs:{shape:a.outShape}}),x.push(A),x.push(_),x.push(R)}for(var O=0,F=x;O<F.length;O++){var M=F[O];o.disposeIntermediateTensorInfo(M)}return t}function sD(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,o=e.bias,i=void 0===o?null:o,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,d=e.activation,p=void 0===d?null:d,f=r.filterWidth,h=r.filterHeight,m=r.inChannels,g=r.outWidth,v=r.outHeight,y="channelsLast"===r.dataFormat,b=f*h*m,x=v*g,k=[b,x],w=[],I=DF({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),C=DF({inputs:{x:n},backend:a,attrs:{shape:[1,b,pC(n.shape)/b]}});w.push(I),w.push(C);var S=new oD(k,I.shape,r),E=a.runWebGLProgram(S,[I],"float32"),T=DF({inputs:{x:E},backend:a,attrs:{shape:[1,k[0],k[1]]}});w.push(E),w.push(T);var N=null!=i,A=null!=u,_="leakyrelu"===p,R=p?TF(p,!0):null,O=new NF(T.shape,C.shape,[1,x,r.outChannels],!0,!1,N,R,A,_),F=[T,C];if(i&&F.push(i),A&&F.push(u),_){var M=a.makeTensorInfo([],"float32",PS(l,"float32"));F.push(M),w.push(M)}var D=a.runWebGLProgram(O,F,"float32"),B=DF({inputs:{x:D},backend:a,attrs:{shape:y?[1,v,g,r.outChannels]:[1,r.outChannels,v,g]}});w.push(D);for(var P=0,L=w;P<L.length;P++){var U=L[P];a.disposeIntermediateTensorInfo(U)}return B}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var uD={kernelName:"Conv2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,d=a.dimRoundingMode,p=UT(c),f=_T(o.shape,i.shape,s,l,u,d,!1,p);if(1!==f.filterHeight||1!==f.filterWidth||1!==f.dilationHeight||1!==f.dilationWidth||1!==f.strideHeight||1!==f.strideWidth||"SAME"!==f.padInfo.type&&"VALID"!==f.padInfo.type)if(WC().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=sD({x:o,filter:i,convInfo:f,backend:r});else{var h=new rD(f);t=r.runWebGLProgram(h,[o,i],"float32")}else t=iD({x:o,filter:i,convInfo:f,backend:r});var m=DF({inputs:{x:t},backend:r,attrs:{shape:f.outShape}});return r.disposeIntermediateTensorInfo(t),m}},cD=function e(t){_y(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(i,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},lD=function e(t){_y(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=i?1:2,l=i?2:3,d=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},dD=function e(t){_y(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.padInfo.front,i=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},pD=function e(t){_y(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},fD={kernelName:"Conv2DBackpropFilter",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,d=UT(u),p=_T(a.shape,l,i,1,s,c,!1,d),f=new cD(p);return n.runWebGLProgram(f,[a,o],"float32")}},hD={kernelName:"Conv2DBackpropInput",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=UT(c),p=_T(i,o.shape,s,1,u,l,!1,d),f=new lD(p);return n.runWebGLProgram(f,[a,o],"float32")}},mD={kernelName:"Conv3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=RT(a.shape,o.shape,i,u,s),l=new aD(c);return n.runWebGLProgram(l,[a,o],"float32")}},gD={kernelName:"Conv3DBackpropFilterV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.filterShape,c=RT(a.shape,u,i,1,s),l=new dD(c);return n.runWebGLProgram(l,[a,o],"float32")}},vD={kernelName:"Conv3DBackpropInputV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,u=RT(r.inputShape,o.shape,s,1,i),c=new pD(u);return n.runWebGLProgram(c,[a,o],"float32")}},yD={kernelName:"Cos",backendName:"webgl",kernelFunc:SF({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"})},bD={kernelName:"Cosh",backendName:"webgl",kernelFunc:SF({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"})},xD=function e(t,n,r,a,o){_y(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=Ky(t,4),s=i[0],u=i[1],c=i[2],l=i[3],d=Ky(n,1)[0],p=Ky(r,2),f=p[0],h=p[1];this.outputShape=[d,f,h,l];var m="bilinear"===a?1:0,g=u-1+".0",v=c-1+".0",y=Ky(f>1?[""+(u-1)/(f-1),"(y2-y1) * height_ratio","y1*".concat(g," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(g)],3),b=y[0],x=y[1],k=y[2],w=Ky(h>1?[""+(c-1)/(h-1),"(x2-x1) * width_ratio","x1*".concat(v," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(v)],3),I=w[0],C=w[1],S=w[2];this.userCode="\n      const float height_ratio = float(".concat(b,");\n      const float width_ratio = float(").concat(I,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(x,";\n        float width_scale = ").concat(C,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(g," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n        float in_x = ").concat(S,";\n        if( in_x < 0.0 || in_x > ").concat(v," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")},kD={kernelName:"CropAndResize",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new xD(a.shape,o.shape,s,u,c);return n.runWebGLProgram(l,[a,o,i],"float32")}},wD=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;var a=t.length,o=n?"0.0":"getX(".concat(ID(a,"coords"),")"),i=t[t.length-1],s="",u="";n?(s=r?"end != "+(i-1):"end != 0",u=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(i):"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(b_(a)," coords = getOutputCoords();\n        int end = ").concat(CD(a,"coords"),";\n        float val = ").concat(o,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(u,";\n          ").concat(CD(a,"coords")," = idx;\n          val += getX(").concat(ID(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function ID(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function CD(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var SD={kernelName:"Cumsum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse,u=a.shape.length,c=JT([o],u),l=a;null!=c&&(l=GF({inputs:{x:a},backend:n,attrs:{perm:c}}));var d=tN(1,u)[0];if(d!==u-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," but got axis=").concat(o));for(var p=l.shape[d],f=mF({inputs:{x:l},backend:n}),h=0;h<=Math.ceil(Math.log2(p))-1;h++){var m=new wD(l.shape,!1,s),g=[[h]],v=f;f=n.runWebGLProgram(m,[f],f.dtype,g),n.disposeIntermediateTensorInfo(v)}if(i){var y=new wD(l.shape,i,s),b=f;f=n.runWebGLProgram(y,[f],f.dtype),n.disposeIntermediateTensorInfo(b)}if(null!=c){var x=GF({inputs:{x:f},backend:n,attrs:{perm:eN(c)}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(l),x}return f}},ED={kernelName:"DenseBincount",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=dO(u,c,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,l)}if(2===a.shape.length){var d=n.bufferSync(a),p=n.bufferSync(o),f=pO(d,p,i,s);return n.makeTensorInfo(f.shape,o.dtype,f.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}},TD=function(){function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return Oy(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}(),ND={kernelName:"DepthToSpace",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;cC(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));var s=a.shape[0],u="NHWC"===i?a.shape[1]:a.shape[2],c="NHWC"===i?a.shape[2]:a.shape[3],l="NHWC"===i?a.shape[3]:a.shape[1],d=u*o,p=c*o,f=l/(o*o),h=new TD("NHWC"===i?[s,d,p,f]:[s,f,d,p],o,i);return n.runWebGLProgram(h,[a],a.dtype)}},AD=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,s=t.inWidth,u=t.padInfo.top,c=t.padInfo.left,l=t.strideHeight,d=t.strideWidth,p=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,m=t.filterWidth,g=t.outChannels/t.inChannels,v="",y="";r&&(v=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),y="result = activation(result);");var b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(v,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(d,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(g,";\n        int q = d2 - d1 * ").concat(g,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(p,";\n\n          if (xR < 0 || xR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(m,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(s,") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(b,"\n        ").concat(y,"\n        setOutput(result);\n      }\n    ")},_D=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_y(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.outChannels/t.inChannels,s=t.inHeight,u=t.inWidth,c=t.padInfo.top,l=t.padInfo.left,d=t.strideHeight,p=t.strideWidth,f=t.dilationHeight,h=t.dilationWidth,m=t.filterHeight,g=t.filterWidth,v=g,y="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",b=0;b<g;b++)y+="\n          vec4 xTexelC".concat(2*b,";\n          int xTexelC").concat(2*b,"Ready;\n          vec4 xTexelC").concat(2*b+1,";\n          int xTexelC").concat(2*b+1,"Ready;\n          vec4 xC").concat(b,";");for(var x=0;x<m;x++){for(var k=0;k<g;k++)y+="\n          xTexelC".concat(2*k," = vec4(0.0);\n          xTexelC").concat(2*k,"Ready = 0;\n          xTexelC").concat(2*k+1," = vec4(0.0);\n          xTexelC").concat(2*k+1,"Ready = 0;\n          xC").concat(k," = vec4(0.0);");y+="\n        xR = xRCorner + ".concat(x*f,";\n        if (xR >=0 && xR < ").concat(s,") {\n      ");for(var w=0;w<(v+1)/2;w++){var I=2*w,C=I*h;if(y+="\n          xC = xCCorner + ".concat(C,";\n          "),1===p){if(I<g&&(l%2==1?(y+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < ".concat(u," && xTexelC").concat(I,"Ready == 0) {\n                  xTexelC").concat(I," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= ").concat(u,") {\n                    xTexelC").concat(I,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I,"Ready = 1;\n                }\n              "),y+=1===h&&C>0?"\n                xC".concat(I," = vec4(xTexelC").concat(I-2,".zw, xTexelC").concat(I,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < ".concat(u,") {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= ").concat(u,") {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC").concat(I," = vec4(previous.zw, xTexelC").concat(I,".xy);\n                  } else {\n                    xC").concat(I," = vec4(0.0, 0.0, xTexelC").concat(I,".xy);\n                  }\n                  ")):y+="\n                if (xC >= 0 && xC < ".concat(u," && xTexelC").concat(I,"Ready == 0) {\n                  xTexelC").concat(I," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= ").concat(u,") {\n                    xTexelC").concat(I,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I,"Ready = 1;\n                }\n\n                xC").concat(I," = xTexelC").concat(I,";\n                "),C+1<g)){var S=l%2==0?sC(h):h;h%2==0&&l%2==1||h%2!=0&&l%2!=1?(y+="\n                  xCOffset = xC + ".concat(l%2," + ").concat(S,";\n\n                  if (xCOffset >= 0 && xCOffset < ").concat(u," && xTexelC").concat(I+1,"Ready == 0) {\n                    xTexelC").concat(I+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= ").concat(u,") {\n                      xTexelC").concat(I+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(I+1,"Ready = 1;\n                  }\n                  "),h>1&&(y+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < ".concat(u," && xTexelC").concat(I,"Ready == 0) {\n                      xTexelC").concat(I," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(I,"Ready = 1;\n                    }\n                    ")),y+="\n                  xC".concat(I+1," = vec4(xTexelC").concat(I,".zw, xTexelC").concat(I+1,".xy);\n                  ")):y+=1===S?"\n                    xC".concat(I+1," = xTexelC").concat(I,";\n                    "):"\n                    xCOffset = xC + ".concat(S,";\n\n                    if (xCOffset >= 0 && xCOffset < ").concat(u," && xTexelC").concat(I+1,"Ready == 0) {\n                      xTexelC").concat(I+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= ").concat(u,") {\n                        xTexelC").concat(I+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(I+1,"Ready = 1;\n                    }\n\n                    xC").concat(I+1," = xTexelC").concat(I+1,";\n                    ")}}else C<g&&(l%2==1?(y+="\n                xCOffset = xC + 1 - ".concat(p,";\n                if(xCOffset >= 0 && xCOffset < ").concat(u," && xTexelC").concat(I,"Ready == 0) {\n                  xTexelC").concat(I," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= ").concat(u,") {\n                    xTexelC").concat(I,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ").concat(u," && xTexelC").concat(I+1,"Ready == 0) {\n                  xTexelC").concat(I+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= ").concat(u,") {\n                    xTexelC").concat(I+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I+1,"Ready = 1;\n                }\n\n                xC").concat(I," = vec4(xTexelC").concat(I,".zw, xTexelC").concat(I+1,".zw);\n              "),C+1<g&&(y+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + ".concat(p,";\n                  if(xCOffset >= 0 && xCOffset < ").concat(u,") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC").concat(I+1," = vec4(xTexelC").concat(I+1,".xy, final.xy);\n                "))):(y+="\n                if(xC >= 0 && xC < ".concat(u," && xTexelC").concat(I,"Ready == 0) {\n                  xTexelC").concat(I," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= ").concat(u,") {\n                    xTexelC").concat(I,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I,"Ready = 1;\n                }\n\n                xCOffset = xC + ").concat(p,";\n                if(xCOffset >= 0 && xCOffset < ").concat(u," && xTexelC").concat(I+1,"Ready == 0) {\n                  xTexelC").concat(I+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= ").concat(u,") {\n                    xTexelC").concat(I+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(I+1,"Ready = 1;\n                }\n\n                xC").concat(I," = vec4(\n                  xTexelC").concat(I,".xy, xTexelC").concat(I+1,".xy);\n              "),C+1<g&&(y+="\n                  xC".concat(I+1," = vec4(xTexelC").concat(I,".zw, xTexelC").concat(I+1,".zw);\n                "))));I<g&&(y+="\n            wTexel = getW(".concat(x,", ").concat(C,", d1, q);\n            dotProd += xC").concat(I," * vec4(wTexel.xz, wTexel.xz);\n          "),C+1<g&&(y+="\n              wTexel = getW(".concat(x,", ").concat(C+1,", d1, q);\n              dotProd += xC").concat(I+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}y+="\n        }\n      "}var E="",T="";r&&(E=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),T="result = activation(result);");var N=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(E,"\n\n      const ivec2 strides = ivec2(").concat(d,", ").concat(p,");\n      const ivec2 pads = ivec2(").concat(c,", ").concat(l,");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(y,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(N,"\n        ").concat(T,"\n        setOutput(result);\n      }\n    ")},RD={kernelName:"DepthwiseConv2dNative",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),cC(LT(i,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(l,"'")}));var d,p=_T(a.shape,o.shape,i,l,s,c,!0);return d=WC().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels==1?new _D(p):new AD(p),n.runWebGLProgram(d,[a,o],"float32")}},OD=function e(t){_y(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},FD=function e(t){_y(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},MD={kernelName:"DepthwiseConv2dNativeBackpropFilter",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,d=_T(a.shape,l,i,s,u,c,!0),p=new OD(d);return n.runWebGLProgram(p,[a,o],"float32")}},DD={kernelName:"DepthwiseConv2dNativeBackpropInput",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=_T(r.inputShape,o.shape,i,s,u,c,!0),d=new FD(l);return n.runWebGLProgram(d,[a,o],"float32")}},BD=function e(t){_y(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},PD={kernelName:"Diag",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat(Xy(r.shape),Xy(r.shape)),o=pC(r.shape),i=DF({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new BD(o),u=n.runWebGLProgram(s,[i],i.dtype),c=DF({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),c}},LD=function e(t){_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,o=t.strideHeight,i=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,d=a.top,p=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")},UD={kernelName:"Dilation2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=TT(o.shape,i.shape,s,u,"NHWC",c),d=new LD(l),p=DF({inputs:{x:t=r.runWebGLProgram(d,[o,i],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),p}},VD={kernelName:"Einsum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=qN(e.attrs.equation,r.length),o=a.allDims,i=a.summedDims,s=a.idDims;XN(o.length,s,r);for(var u=QN(i,s),c=u.path,l=u.steps,d=l.length,p=null,f=o.length,h=[],m=0;m<d;++m){var g,v=rb(l[m]);try{for(v.s();!(g=v.n()).done;){var y=g.value,b=KN(f,s[y]),x=b.permutationIndices,k=b.expandDims,w=void 0;YN(x)?w=r[y]:(w=GF({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),h.push(w));for(var I=w.shape.slice(),C=0;C<k.length;++C)I.splice(k[C],0,1);fC(w.shape,I)||(w=DF({inputs:{x:w},backend:n,attrs:{shape:I}}),h.push(w)),null===p?p=w:(p=FF({inputs:{a:w,b:p},backend:n}),h.push(p))}}catch(e){v.e(e)}finally{v.f()}m<d-1&&(c[m]>=0&&(p=jF({inputs:{x:p},backend:n,attrs:{axis:c[m]-(o.length-f),keepDims:!1}}),h.push(p)),f--)}for(var S=0,E=h;S<E.length;S++){var T=E[S];T!==p&&n.disposeIntermediateTensorInfo(T)}return p}},WD={kernelName:"Elu",backendName:"webgl",kernelFunc:SF({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"})},zD={kernelName:"EluGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,o=WC().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hF("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new fF("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}},jD={kernelName:"Equal",backendName:"webgl",kernelFunc:EF({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:mO})},HD={kernelName:"Erf",backendName:"webgl",kernelFunc:SF({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n'})},GD="return exp(x);",qD=SF({opSnippet:GD,packedOpSnippet:GD,cpuKernelImpl:gO}),KD={kernelName:"Exp",backendName:"webgl",kernelFunc:qD};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function XD(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,o=t.input,i=o.shape.length,s=o.shape.slice(),u=a;return a<0&&(cC(-(i+1)<=a,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+a+1),s.splice(u,0,1),DF({inputs:{x:o},backend:r,attrs:{shape:s}})}var QD={kernelName:"ExpandDims",backendName:"webgl",kernelFunc:XD},YD="return exp(x) - 1.0;",$D={kernelName:"Expm1",backendName:"webgl",kernelFunc:SF({opSnippet:YD,packedOpSnippet:YD,cpuKernelImpl:vO})},ZD=function e(t,n,r){_y(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var o,i=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)o="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));o="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(o,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function JD(e,t,n){var r=n.texData.get(e.dataId),a=pC(e.shape),o=e.shape[e.shape.length-1],i=DF({inputs:{x:e},backend:n,attrs:{shape:[a/o,o]}}),s=i.shape,u=new ZD("real",s,t),c=new ZD("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(u,l,"float32"),p=n.runWebGLProgram(c,l,"float32"),f=vF({inputs:{real:d,imag:p},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p);var h=DF({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(f),h
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var eB={kernelName:"FFT",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return JD(t.input,!1,n)}},tB=function e(t,n){_y(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function nB(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype;if("string"===(o=o||TC(a))){var i=wC(o,pC(r));return i.fill(a),t.makeTensorInfo(r,o,i)}var s=new tB(r,a),u=[[a]];return t.runWebGLProgram(s,[],o,u)}var rB,aB={kernelName:"Fill",backendName:"webgl",kernelFunc:nB},oB=function e(t){_y(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},iB={kernelName:"FlipLeftRight",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,o=new oB(r.shape);return a.runWebGLProgram(o,[r],r.dtype)}},sB="return floor(x);",uB={kernelName:"Floor",backendName:"webgl",kernelFunc:SF({opSnippet:sB,packedOpSnippet:sB,cpuKernelImpl:yO})},cB={kernelName:"FloorDiv",backendName:"webgl",kernelFunc:EF({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"})},lB=function e(t){_y(this,e),this.variableNames=["A"];var n=WA(),r=Ky(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(o,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")},dB=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=WA(),r=Ky(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(o,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},pB={kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,o=r.numChannels,i="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,u=Ky(i?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),c=u[0],l=u[1],d=[l,c],p=[l,c,o];(s||i)&&(null==rB&&(rB=document.createElement("canvas").getContext("2d")),rB.canvas.width=c,rB.canvas.height=l,rB.drawImage(a,0,0,c,l),a=rB.canvas);var f=n.makeTensorInfo(d,"int32");n.texData.get(f.dataId).usage=iA.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),a);var h=WC().getBool("WEBGL_PACK")?new dB(p):new lB(p),m=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),m
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */}},fB={kernelName:"FusedConv2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,d=a.dataFormat,p=a.dilations,f=a.dimRoundingMode,h=a.activation,m=a.leakyreluAlpha,g=UT(d),v=_T(o.shape,i.shape,c,p,l,f,!1,g),y=[];if(1!==v.filterHeight||1!==v.filterWidth||1!==v.dilationHeight||1!==v.dilationWidth||1!==v.strideHeight||1!==v.strideWidth||"SAME"!==v.padInfo.type&&"VALID"!==v.padInfo.type)if(WC().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=sD({x:o,filter:i,convInfo:v,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});else{var b=null!=s,x=null!=u,k="leakyrelu"===h,w=h?TF(h,!1):null,I=new rD(v,b,w,x,k),C=[o,i];if(s&&C.push(s),u&&C.push(u),k){var S=r.makeTensorInfo([],"float32",PS(m,"float32"));C.push(S),y.push(S)}t=r.runWebGLProgram(I,C,"float32")}else t=iD({x:o,filter:i,convInfo:v,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});var E=DF({inputs:{x:t},backend:r,attrs:{shape:v.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),E}},hB={kernelName:"FusedDepthwiseConv2D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,d=r.dimRoundingMode,p=r.activation,f=r.leakyreluAlpha,h=[],m=l;null==m&&(m=[1,1]),cC(LT(u,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(u," and dilations '").concat(m,"'")}));var g,v=_T(a.shape,o.shape,u,m,c,d,!0),y=WC().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels==1,b=p?TF(p,y):null,x=[a,o],k=null!=i,w=null!=s,I="leakyrelu"===p;if(k&&x.push(i),w&&x.push(s),I){var C=n.makeTensorInfo([],"float32",PS(f,"float32"));x.push(C),h.push(C)}g=y?new _D(v,k,b,w,I):new AD(v,k,b,w,I);var S=n.runWebGLProgram(g,x,"float32");return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),S}},mB=function e(t,n,r){_y(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=b_(n.length),o=b_(r.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(i,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")},gB={kernelName:"GatherNd",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=a.shape,i=o[o.length-1],s=pC(r.shape),u=Ky(tT(r,a),4),c=u[0],l=u[1],d=u[2],p=u[3],f=DF({inputs:{x:a},backend:n,attrs:{shape:[l,i]}}),h=DF({inputs:{x:r},backend:n,attrs:{shape:[pC(r.shape)/d,d]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var m=n.readSync(a.dataId),g=n.bufferSync(r),v=bO(m,g,r.dtype,l,i,d,p,r.shape,s);return n.makeTensorInfo(c,r.dtype,v.values)}var y=new mB(i,p,[l,d]),b=n.runWebGLProgram(y,[h,f],h.dtype),x=DF({inputs:{x:b},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(b),x}},vB=function e(t,n){_y(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=b_(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("int(getIndices(resRC.x, resRC.z))"):r.push("".concat(n[a]));return r.join()}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function yB(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims,u=tA(a,o,bC(i,a.shape)[0],s),c=pC(o.shape),l=[],d=DF({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),p=DF({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});l.push(d),l.push(p);var f=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){var h=n.bufferSync(p),m=n.bufferSync(d),g=xO(m,h,f);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(u.outputShape,g.dtype,g.values)}var v=new vB(d.shape,f),y=n.runWebGLProgram(v,[d,p],d.dtype);l.push(y);var b=DF({inputs:{x:y},backend:n,attrs:{shape:u.outputShape}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}var bB={kernelName:"GatherV2",backendName:"webgl",kernelFunc:yB},xB={kernelName:"Greater",backendName:"webgl",kernelFunc:EF({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:kO,dtype:"bool"})},kB={kernelName:"GreaterEqual",backendName:"webgl",kernelFunc:EF({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:wO})},wB={kernelName:"IFFT",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend;return JD(t.input,!0,n)}},IB={kernelName:"IsFinite",backendName:"webgl",kernelFunc:SF({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"})},CB={kernelName:"IsInf",backendName:"webgl",kernelFunc:SF({opSnippet:"return float(isinf(x));",dtype:"bool"})},SB={kernelName:"IsNan",backendName:"webgl",kernelFunc:SF({opSnippet:"return float(isnan(x));",dtype:"bool"})},EB={kernelName:"Less",backendName:"webgl",kernelFunc:EF({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:IO,dtype:"bool"})},TB={kernelName:"LessEqual",backendName:"webgl",kernelFunc:EF({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:CO,dtype:"bool"})},NB={kernelName:"LinSpace",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.num,i=SO(r,a,o);return t.makeTensorInfo([i.length],"float32",i)}},AB={kernelName:"Log",backendName:"webgl",kernelFunc:SF({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:EO})},_B={kernelName:"Log1p",backendName:"webgl",kernelFunc:SF({opSnippet:"return log(1.0 + x);"})},RB={kernelName:"LogicalAnd",backendName:"webgl",kernelFunc:EF({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"})},OB={kernelName:"LogicalNot",backendName:"webgl",kernelFunc:SF({opSnippet:"return float(!(x >= 1.0));"})},FB={kernelName:"LogicalOr",backendName:"webgl",kernelFunc:EF({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"})},MB=function e(t,n,r,a,o){_y(this,e),this.variableNames=["x"],this.outputShape=[];var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(i,";\n        setOutput(val);\n      }\n    ")},DB=function e(t,n,r,a,o){_y(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(i,";\n        setOutput(result);\n      }\n    ")},BB={kernelName:"LRN",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta,c=WC().getBool("WEBGL_PACK_NORMALIZATION")?new DB(a.shape,o,i,s,u):new MB(a.shape,o,i,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},PB=function e(t,n,r,a,o){_y(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(o,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")},LB={kernelName:"LRNGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,d=new PB(a.shape,s,u,c,l);return n.runWebGLProgram(d,[a,o,i],a.dtype)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function UB(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,i=r.keepDims,s=a.shape.length,u=bC(o,a.shape),c=u,l=JT(c,s),d=null!=l,p=n.shouldExecuteOnCPU([a]),f=a;if(d){if(p){for(var h=n.texData.get(f.dataId).values,m=new Array(s),g=0;g<m.length;g++)m[g]=a.shape[l[g]];var v=XO(h,a.shape,a.dtype,l,m);f=n.makeTensorInfo(m,a.dtype),n.texData.get(f.dataId).values=v}else f=zF(a,l,n);c=tN(c.length,s)}ZT("max",c,s);var y,b=Ky(YT(f.shape,c),2),x=b[0],k=b[1],w=x;if(i&&(w=$T(x,u)),p){var I=n.texData.get(f.dataId).values,C=TO(I,pC(k),w,a.dtype);y=n.makeTensorInfo(w,a.dtype),n.texData.get(y.dataId).values=C}else y=
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e,t,n,r){var a=pC(t),o=DF({inputs:{x:e},attrs:{shape:[pC(e.shape)/a,a]},backend:r}),i=UF(o,e.dtype,"max",r),s=DF({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(f,k,w,n);return d&&n.disposeIntermediateTensorInfo(f),y}var VB={kernelName:"Max",backendName:"webgl",kernelFunc:UB},WB={kernelName:"Maximum",backendName:"webgl",kernelFunc:EF({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:NO})},zB={kernelName:"MaxPool",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;UA(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;cC(LT(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c=NT(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&fC(c.inShape,c.outShape))return mF({inputs:{x:a},backend:n});var l=new vM(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}},jB={kernelName:"MaxPool3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=AT(a.shape,o,i,[1,1,1],s,c,u),d=new yM(l,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}},HB=function e(t){_y(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,o=t.effectiveFilterHeight,i=t.effectiveFilterWidth,s=o-1-t.padInfo.top,u=i-1-t.padInfo.left,c=o*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},GB=function e(t){_y(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=u-1-t.padInfo.front,p=c-1-t.padInfo.top,f=l-1-t.padInfo.left,h=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(p,", ").concat(f,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},qB={kernelName:"MaxPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=AT(o.shape,i,s,[1,1,1],u,c),d=new yM(l,"max",!0),p=n.runWebGLProgram(d,[o],o.dtype),f=new GB(l),h=n.runWebGLProgram(f,[a,p],o.dtype);return n.disposeIntermediateTensorInfo(p),h}},KB={kernelName:"MaxPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;UA([o,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=NT(i.shape,s,u,1,c,l),p=new vM(d,"max",!0),f=n.runWebGLProgram(p,[i],i.dtype),h=new HB(d),m=n.runWebGLProgram(h,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),m}},XB={kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,i=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;cC(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];cC(LT(i,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(l,"'")}));var d=NT(a.shape,o,i,l,s),p=Ky(function(e,t,n,r){var a=new vM(n,"max",!1),o=r.runWebGLProgram(a,[e],"float32");return a=new vM(n,"max",!0,!0,t),[o,r.runWebGLProgram(a,[e],"float32")]}(a,u,d,c),2);return[p[0],p[1]]}},QB={kernelName:"Mean",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.keepDims,i=n.axis,s=r,u=a.shape.length,c=bC(i,a.shape),l=c,d=JT(l,u),p=null!=d,f=s.shouldExecuteOnCPU([a]),h=[],m=a;if(p){if(f){for(var g=s.texData.get(m.dataId).values,v=new Array(u),y=0;y<v.length;y++)v[y]=a.shape[d[y]];var b=XO(g,a.shape,a.dtype,d,v);m=s.makeTensorInfo(v,a.dtype),s.texData.get(m.dataId).values=b}else m=zF(a,d,s);h.push(m),l=tN(l.length,u)}ZT("sum",l,u);var x=Ky(YT(m.shape,l),2),k=x[0],w=x[1],I=k;o&&(I=$T(k,c));for(var C=function(e,t,n,r){var a=pC(t),o=DF({inputs:{x:e},attrs:{shape:[pC(e.shape)/a,a]},backend:r}),i=UF(o,"float32","mean",r),s=DF({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(m,w,I,s),S=0,E=h;S<E.length;S++){var T=E[S];s.disposeIntermediateTensorInfo(T)}return C}},YB={kernelName:"Min",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=bC(o,a.shape),c=u,l=JT(c,s),d=a;null!=l&&(d=GF({inputs:{x:a},backend:n,attrs:{perm:l}}),c=tN(c.length,a.shape.length)),ZT("min",c,s);var p,f=Ky(YT(d.shape,c),2),h=f[0],m=DF({inputs:{x:d},backend:n,attrs:{shape:[-1,pC(f[1])]}}),g=UF(m,m.dtype,"min",n);return p=DF(i?{inputs:{x:g},backend:n,attrs:{shape:$T(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),p}},$B={kernelName:"Minimum",backendName:"webgl",kernelFunc:EF({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:AO})},ZB=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=b_(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(o," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")},JB=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=b_(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=$O("rc",a),c=$O("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),p="reflect"===r?0:1,f="";if(1===a){var h="\n        ".concat(o," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(p,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(p,";\n        }\n        source -= start;\n      ");f="\n        ".concat(o," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ")}else{var m="\n        ".concat(o," source = rc;\n        ").concat(o," lt = ").concat(o,"(lessThan(source, start));\n        ").concat(o," gte = ").concat(o,"(greaterThanEqual(source, end));\n        ").concat(o," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(p,") +\n                gte * ((end - 1) * 2 - source + ").concat(p,");\n        source -= start;\n      ");f="\n        ".concat(o," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")},eP={kernelName:"MirrorPad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode,s=WC().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new JB(a.shape,o,i):new ZB(a.shape,o,i);return n.runWebGLProgram(s,[a],a.dtype)}},tP={kernelName:"Mod",backendName:"webgl",kernelFunc:EF({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},nP=function e(t,n,r){_y(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")},rP=EF({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),aP={kernelName:"RealDiv",backendName:"webgl",kernelFunc:rP},oP="return a - b;",iP=EF({opSnippet:oP,packedOpSnippet:oP,supportsComplex:!0,cpuKernelImpl:GO}),sP={kernelName:"Sub",backendName:"webgl",kernelFunc:iP};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function uP(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=bC([r.dim],a.shape),i=UB({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),s=$T(i.shape,o),u=DF({inputs:{x:i},backend:n,attrs:{shape:s}}),c=iP({inputs:{a:a,b:u},backend:n}),l=qD({inputs:{x:c},backend:n}),d=jF({inputs:{x:l},backend:n,attrs:{axis:o,keepDims:!1}}),p=DF({inputs:{x:d},backend:n,attrs:{shape:s}}),f=rP({inputs:{a:l,b:p},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}var cP={kernelName:"Softmax",backendName:"webgl",kernelFunc:uP},lP={kernelName:"Multinomial",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized,u=s?a:uP({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],d=new nP(c,l,o),p=[[i]],f=n.runWebGLProgram(d,[u],"int32",p);return s||n.disposeIntermediateTensorInfo(u),f}},dP="return -x;",pP={kernelName:"Neg",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var o=r.texData.get(a.dataId),i=Ky(RO(o.values,a.shape,a.dtype),2),s=i[0],u=i[1];return r.makeTensorInfo(u,a.dtype,s)}return t=WC().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new sF(a.shape,dP):new aF(a.shape,dP),r.runWebGLProgram(t,[a],a.dtype)}},fP=xN,hP={kernelName:"NonMaxSuppressionV3",backendName:"webgl",kernelFunc:function(e){BN("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(o.dataId),d=fP(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},mP=kN,gP={kernelName:"NonMaxSuppressionV4",backendName:"webgl",kernelFunc:function(e){BN("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),d=n.readSync(o.dataId),p=mP(l,d,i,s,u,c),f=p.selectedIndices,h=p.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},vP=wN,yP={kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){BN("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),d=n.readSync(o.dataId),p=vP(l,d,i,s,u,c),f=p.selectedIndices,h=p.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},bP=function e(t,n,r,a){_y(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")},xP={kernelName:"OneHot",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue,u=pC(a.shape),c=new bP(u,o,i,s),l=DF({inputs:{x:a},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(c,[l],a.dtype);n.disposeIntermediateTensorInfo(l);var p=DF({inputs:{x:d},backend:n,attrs:{shape:[].concat(Xy(a.shape),[o])}});return n.disposeIntermediateTensorInfo(d),p}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function kP(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=LM({inputs:{input:r},backend:n}),o=kP({inputs:{x:a},backend:n}),i=ZM({inputs:{input:r},backend:n}),s=kP({inputs:{x:i},backend:n}),u=vF({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return nB({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var wP={kernelName:"ZerosLike",backendName:"webgl",kernelFunc:kP},IP={kernelName:"OnesLike",backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var o=LM({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=ZM({inputs:{input:a},backend:r}),u=kP({inputs:{x:s},backend:r}),c=vF({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return nB({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}},CP={kernelName:"Pack",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return XD({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){lC(a,e.shape,"All tensors passed to stack must have matching shapes"),cC(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=tD({inputs:t.map((function(e){var t=XD({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},SP=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=b_(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(o," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")},EP=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,o=b_(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=$O("rc",a),c=$O("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),p=["".concat(o," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],f=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",m=0,g=1===a?2:4;m<g;m++)h+="\n        ".concat(p[m],"\n        if (").concat(f,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(o," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ");h+=1===a?"} ":"}}",this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")},TP=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue,s=WC().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new EP(a.shape,o,i):new SP(a.shape,o,i),u=[[i]];return n.runWebGLProgram(s,[a],a.dtype,u)},NP={kernelName:"PadV2",backendName:"webgl",kernelFunc:TP},AP={kernelName:"Pow",backendName:"webgl",kernelFunc:EF({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},_P={kernelName:"Prod",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.axis,s=a.keepDims,u=o.shape.length,c=[],l=bC(i,o.shape),d=l,p=JT(d,u),f=o;if(null!=p&&(f=GF({inputs:{x:o},backend:r,attrs:{perm:p}}),d=tN(d.length,u),c.push(f)),ZT("prod",d,u),r.shouldExecuteOnCPU([f])){var h=r.texData.get(f.dataId).values,m=FO(f.shape,f.dtype,h,d),g=m.outVals,v=m.outShape,y=m.outDtype;t=r.makeTensorInfo(v,y,g)}else{var b=Ky(YT(f.shape,d),2),x=b[0],k=pC(b[1]),w=DF({inputs:{x:f},backend:r,attrs:{shape:[-1,k]}}),I=UF(w,uE(o.dtype),"prod",r);t=DF({inputs:{x:I},backend:r,attrs:{shape:x}}),c.push(w),c.push(I)}if(s){c.push(t);var C=$T(t.shape,l);t=DF({inputs:{x:t},backend:r,attrs:{shape:C}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},RP=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,s=MO(r,a,o,i);return t.makeTensorInfo([s.length],i,s)},OP={kernelName:"Range",backendName:"webgl",kernelFunc:RP},FP={kernelName:"Reciprocal",backendName:"webgl",kernelFunc:SF({opSnippet:"return 1.0 / x;"})},MP={kernelName:"Relu",backendName:"webgl",kernelFunc:SF({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"})},DP={kernelName:"Relu6",backendName:"webgl",kernelFunc:SF({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"})},BP=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.outputShape=[];var i=Ky(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,p=[a&&n>1?u-1:u,a&&r>1?c-1:c],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/f[0],",\n          ").concat(p[1]/f[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")},PP=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=Ky(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,p=[a&&n>1?u-1:u,a&&r>1?c-1:c],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/f[0],",\n          ").concat(p[1]/f[1],",\n          ").concat(p[1]/f[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")},LP={kernelName:"ResizeBilinear",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=Ky(r.size,2),u=s[0],c=s[1],l=WC().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new PP(a.shape,u,c,o,i):new BP(a.shape,u,c,o,i);return n.runWebGLProgram(l,[a],"float32")}},UP=function e(t,n,r){_y(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Ky(n,3),o=a[1],i=a[2],s=Ky(t,3),u=s[1],c=s[2],l=[r&&u>1?o-1:o,r&&c>1?i-1:i],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],p=l[0]/d[0],f=l[1]/d[1],h=1/p,m=1/f,g=2*Math.ceil(h)+2,v=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(f,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(v,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(o-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(i-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")},VP={kernelName:"ResizeBilinearGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new UP(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},WP=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.outputShape=[];var i=Ky(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,p=[a&&n>1?u-1:u,a&&r>1?c-1:c],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";d=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/f[0],",\n          ").concat(p[1]/f[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")},zP=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=Ky(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,p=[a&&n>1?u-1:u,a&&r>1?c-1:c],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";d=o?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/f[0],",\n          ").concat(p[1]/f[1],",\n          ").concat(p[1]/f[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")},jP={kernelName:"ResizeNearestNeighbor",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=Ky(r.size,2),u=s[0],c=s[1],l=WC().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new zP(a.shape,u,c,o,i):new WP(a.shape,u,c,o,i);return n.runWebGLProgram(l,[a],a.dtype)}},HP=function e(t,n,r){_y(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Ky(n,3),o=a[1],i=a[2],s=Ky(t,3),u=s[1],c=s[2],l=[r&&u>1?o-1:o,r&&c>1?i-1:i],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],p=l[0]/d[0],f=l[1]/d[1],h=1/p,m=1/f,g=2*Math.ceil(h)+2,v=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(f,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(v,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")},GP={kernelName:"ResizeNearestNeighborGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new HP(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},qP=function e(t,n){_y(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),o=b_(r);this.userCode="\n      void main() {\n        ".concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")},KP=function e(t,n){_y(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=$O("rc",r),o="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),i="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=b_(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)}));return"getChannel(getX(".concat(r.join(","),"), vec2(").concat(r.slice(-2).join(","),"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")},XP={kernelName:"Reverse",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims,i=a.shape.length,s=bC(o,a.shape);if(0===i)return mF({inputs:{x:a},backend:n});var u=WC().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new KP(a.shape,s):new qP(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},QP=function e(t,n){_y(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var o;o="number"==typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},YP={kernelName:"RotateWithOffset",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,i=n.fillValue,s=n.center,u=r,c=new QP(a.shape,i),l=Ky(_N(s,a.shape[1],a.shape[2]),2),d=[[l[0],l[1],Math.sin(o),Math.cos(o)]];return u.runWebGLProgram(c,[a],a.dtype,d)}},$P={kernelName:"Round",backendName:"webgl",kernelFunc:SF({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"})},ZP={kernelName:"Rsqrt",backendName:"webgl",kernelFunc:SF({opSnippet:"return inversesqrt(x);",cpuKernelImpl:DO})},JP=function e(t,n,r,a,o,i){_y(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=b_(o.length),u=b_(i.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var p="getUpdates(".concat(d,")"),f=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(f,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(p,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")},eL={kernelName:"ScatterNd",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=rT(0,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,p=s.outputSize,f=[p/l,l];if(0===p)return n.makeTensorInfo(i,a.dtype);var h=DF({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=DF({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),v=new JP(c,u,h.shape.length,m.shape.length,d,f),y=n.runWebGLProgram(v,[m,h,g],m.dtype),b=DF({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),b}},tL=function e(t,n,r){var a,o;if(_y(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)o="resRC",a="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(i[c])),c<t&&s.push("".concat(i[c]));a=s.join(),o=u.join()}var l=b_(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(o,"));\n        } else {\n          setOutput(getB(").concat(o,"));\n        }\n      }\n    ")},nL={kernelName:"Select",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=new tL(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,o],sE(a.dtype,o.dtype))}},rL={kernelName:"Selu",backendName:"webgl",kernelFunc:SF({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n"})},aL={kernelName:"Sigmoid",backendName:"webgl",kernelFunc:SF({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"})},oL={kernelName:"Sign",backendName:"webgl",kernelFunc:SF({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"})},iL={kernelName:"Sin",backendName:"webgl",kernelFunc:SF({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"})},sL={kernelName:"Sinh",backendName:"webgl",kernelFunc:SF({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"})},uL={kernelName:"Softplus",backendName:"webgl",kernelFunc:SF({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"})},cL={kernelName:"SpaceToBatchND",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;cC(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,Xy(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=[],d=TP({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),p=RN(d.shape,o,s,!1),f=ON(p.length,o.length,!1),h=FN(d.shape,o,s,!1),m=DF({inputs:{x:d},backend:n,attrs:{shape:p}}),g=GF({inputs:{x:m},backend:n,attrs:{perm:f}}),v=DF({inputs:{x:g},backend:n,attrs:{shape:h}});return l.push(d),l.push(m),l.push(g),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},lL={kernelName:"SparseFillEmptyRows",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2021 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,i=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=n.readSync(i.dataId)[0],d=Ky(LO(s,r.shape,r.dtype,u,a.dtype,c,l),5),p=d[0],f=d[1],h=d[2],m=d[3],g=d[4];return[n.makeTensorInfo(f,r.dtype,p),n.makeTensorInfo([f[0]],a.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}},dL={kernelName:"SparseReshape",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var i=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(o.dataId)),c=Ky(UO(s,r.shape,r.dtype,i,u),3),l=c[0],d=c[1],p=c[2];return[n.makeTensorInfo(d,r.dtype,l),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}},pL={kernelName:"SparseSegmentMean",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));var i=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=Ky(VO(i,r.shape,r.dtype,s,u,!0),2),l=c[0],d=c[1];return n.makeTensorInfo(d,r.dtype,l)}},fL={kernelName:"SparseSegmentSum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));var i=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=Ky(VO(i,r.shape,r.dtype,s,u),2),l=c[0],d=c[1];return n.makeTensorInfo(d,r.dtype,l)}},hL={kernelName:"SparseToDense",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,u=rT(0,a,s),c=u.sliceRank,l=u.numUpdates,d=u.strides,p=u.outputSize,f=new JP(l,c,a.shape.length,o.shape.length,d,[p,1],!1),h=n.runWebGLProgram(f,[o,a,i],o.dtype),m=DF({inputs:{x:h},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),m}},mL={kernelName:"SplitV",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=bC(r.axis,a.shape)[0],s=ZN(a,o,i),u=a.shape.length,c=new Array(u).fill(0),l=a.shape.slice();return s.map((function(e){var t=Xy(l);t[i]=e;var r=OM({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[i]+=e,r}))}},gL={kernelName:"Sqrt",backendName:"webgl",kernelFunc:SF({opSnippet:"return sqrt(x);"})},vL={kernelName:"Square",backendName:"webgl",kernelFunc:SF({opSnippet:"return x * x;"})},yL={kernelName:"SquaredDifference",backendName:"webgl",kernelFunc:EF({opSnippet:"return (a - b) * (a - b);",packedOpSnippet:"return (a - b) * (a - b);"})},bL={kernelName:"Step",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o="if (isnan(x)) return x;\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new aF(a.shape,o);return r.runWebGLProgram(i,[a],a.dtype)}},xL=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,o=b_(r.length),i=b_(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(o," begin = ").concat(o,"(").concat(t,");\n      ").concat(o," strides = ").concat(o,"(").concat(n,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")},kL={kernelName:"StridedSlice",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,p=a.newAxisMask,f=a.shrinkAxisMask,h=bT(o.shape,i,s,u,c,l,d,p,f),m=h.nonStrided,g=h.$begin,v=h.$strides,y=h.size,b=h.newShape,x=h.outShape,k=DF({inputs:{x:o},backend:r,attrs:{shape:b}});if(m){var w=OM({inputs:{x:k},backend:r,attrs:{begin:g,size:y}});t=DF({inputs:{x:w},backend:r,attrs:{shape:x}}),r.disposeIntermediateTensorInfo(w)}else if(x.some((function(e){return 0===e})))t=r.makeTensorInfo(x,o.dtype,[]);else if(r.shouldExecuteOnCPU([k])){var I=r.texData.get(k.dataId).values,C=ZE(k.shape,k.dtype,I),S=WO(x,C,v,g);t=r.makeTensorInfo(x,k.dtype,S.values)}else{var E=new xL(g,v,x);t=r.runWebGLProgram(E,[k],k.dtype)}var T=DF({inputs:{x:t},backend:r,attrs:{shape:x}});return r.disposeIntermediateTensorInfo(k),r.disposeIntermediateTensorInfo(t),T}},wL={kernelName:"StringNGrams",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,i=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,d=t.dataSplits,p=n.readSync(l.dataId),f=n.readSync(d.dataId),h=Ky(zO(p,f,a,o,i,s,u,c),2),m=h[0],g=h[1];return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}},IL={kernelName:"StringSplit",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var i=n.readSync(a.dataId),s=n.readSync(o.dataId)[0],u=Ky(jO(i,s,r),3),c=u[0],l=u[1],d=u[2],p=l.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}},CL={kernelName:"StringToHashBucketFast",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=n.readSync(a.dataId),i=HO(o,r);return n.makeTensorInfo(a.shape,"int32",i)}},SL={kernelName:"Tan",backendName:"webgl",kernelFunc:SF({opSnippet:"return tan(x);"})},EL={kernelName:"Tanh",backendName:"webgl",kernelFunc:SF({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"})},TL=function e(t,n){_y(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var o=b_(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(t);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        setOutput(getA(").concat(i,"));\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function NL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;if("string"===a.dtype||a.shape.length>5){var i=n.readSync(a.dataId),s="string"===a.dtype?i.map((function(e){return WS(e)})):i,u=ZE(a.shape,a.dtype,s),c=qO(u,o);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new TL(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}var AL={kernelName:"Tile",backendName:"webgl",kernelFunc:NL},_L=function e(t){_y(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "},RL=function e(t){_y(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function OL(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function FL(e){for(var t=1;t<e;)t*=2;return t}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
for(var ML={kernelName:"TopK",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted,s=WC().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=WC().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,l=c[c.length-1];if(n.shouldExecuteOnCPU([a])||l<s||o>u){var d=n.readSync(a.dataId),p=Ky(KO(d,c,a.dtype,o,i),2),f=p[0],h=p[1];return[n.makeTensorInfo(f.shape,f.dtype,f.values),n.makeTensorInfo(h.shape,h.dtype,h.values)]}if(0===o)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===l)return[a,nB({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var m=n.texData.get(a.dataId),g=null!==m&&m.isPacked,v=g?n.unpackTensor(a):a,y=pC(c)/l,b=DF({inputs:{x:v},attrs:{shape:[y,l]},backend:n});g&&OL(n,v);for(var x=FL(o),k=FL(l),w=null,I=function(){return null===w?[b,b]:[b,w]},C=function(e,t,r){var a=I(),o=new _L(r),i=[[l],[null===w?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=w;w=n.runWebGLProgram(o,a,"int32",i),OL(n,s)},S=1;S<x;S*=2)for(var E=2*S,T=S;T>=1;T/=2)C(E,T,[y,k]);for(var N=k;N>x;N/=2){var A=I(),_=new RL([y,N/2]),R=[[l],[null===w?1:0],[x]],O=w;w=n.runWebGLProgram(_,A,"int32",R),OL(n,O);for(var F=x/2,M=2*F,D=F;D>=1;D/=2)C(M,D,w.shape)}var B=w;w=OM({inputs:{x:w},backend:n,attrs:{begin:0,size:[y,o]}}),OL(n,B);var P=yB({inputs:{x:b,indices:w},backend:n,attrs:{axis:1,batchDims:1}});OL(n,b);var L=c.slice(0,-1);L.push(o),B=w,w=DF({inputs:{x:w},attrs:{shape:L},backend:n}),OL(n,B);var U=P;return P=DF({inputs:{x:P},attrs:{shape:L},backend:n}),OL(n,U),[P,w]}},DL=function e(t,n,r,a,o,i){_y(this,e),this.variableNames=["Image","Transforms"],this.outputShape=i;var s,u="nearest"===r?1:2;switch(a){case"constant":s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4;break;default:s=1}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")},BL={kernelName:"Transform",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.transforms,i=r.interpolation,s=r.fillMode,u=r.fillValue,c=r.outputShape,l=Ky(a.shape,4),d=l[0],p=l[1],f=l[2],h=l[3],m=Ky(null!=c?c:[p,f],2),g=m[0],v=m[1],y=new DL(p,f,i,s,u,[d,g,v,h]);return n.runWebGLProgram(y,[a,o],"float32")}},PL={kernelName:"Unique",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;UA(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var i=r.readSync(o.dataId),s=QO(i,a,o.shape,o.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,o.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}},LL={kernelName:"Unpack",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a,s=i.shape.length,u=a.shape[o],c=new Array(s-1),l=0,d=0;d<s;d++)d!==o&&(c[l++]=i.shape[d]);var p=[],f=new Array(s).fill(0),h=i.shape.slice();h[o]=1;for(var m=new Array(u),g=0;g<m.length;g++){f[o]=g;var v=OM({inputs:{x:i},backend:n,attrs:{begin:f,size:h}}),y=DF({inputs:{x:v},backend:n,attrs:{shape:c}});m[g]=y,p.push(v)}return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},UL=function e(t,n){_y(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.numSegments,s=i*Math.ceil(o/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));var p="";o%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(p,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")},VL=[BB,LB,XF,QF,YF,$F,JF,nM,rM,aM,lM,dM,pM,fM,mM,hM,gM,xM,bM,IM,CM,SM,NM,MM,DM,VM,zM,GM,XM,yF,nD,fD,hD,uD,gD,vD,mD,yD,bD,kD,SD,ED,ND,MD,DD,RD,PD,UD,VD,WD,zD,jD,HD,KD,QD,$D,eB,aB,iB,uB,cB,pB,fB,hB,gB,bB,xB,kB,gF,wB,JM,IB,CB,SB,kF,EB,TB,NB,_B,AB,RB,OB,FB,VB,jB,zB,qB,KB,XB,WB,QB,YB,$B,eP,tP,lP,MF,pP,hP,gP,yP,PM,xP,IP,CP,NP,AP,CF,_P,OP,UM,aP,FP,DP,MP,BF,LP,VP,jP,GP,XP,YP,$P,ZP,eL,nL,rL,aL,oL,iL,sL,FM,cP,uL,cL,lL,dL,pL,fL,hL,mL,gL,vL,yL,bL,kL,wL,IL,CL,sP,HF,SL,EL,AL,ML,BL,qF,PL,LL,{kernelName:"UnsortedSegmentSum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments,s=a.shape.length,u=[],c=0,l=JT([c],s),d=a;null!=l&&(d=GF({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(d),c=tN(1,s)[0]);var p=eA(d.shape,c,i),f=pC([d.shape[c]]),h=DF({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});u.push(h);var m=DF({inputs:{x:function e(t,r,a,o,i){var s=t.shape[0],c=t.shape[1],l=JN(c,i),d=new UL({windowSize:l,inSize:c,batchSize:s,numSegments:i},r),p=n.compileAndRun(d,[t,a],o);if(u.push(p),p.shape[1]===i)return p;var f=RP({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),h=NL({inputs:{x:f},backend:n,attrs:{reps:[c/l]}});return u.push(f),u.push(h),e(p,r,h,o,i)}(h,"unsortedSegmentSum",o,uE(a.dtype),i)},backend:n,attrs:{shape:p}}),g=m;if(null!=l){u.push(m);var v=eN(l);g=GF({inputs:{x:g},backend:n,attrs:{perm:v}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},wP],WL=0,zL=VL
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */;WL<zL.length;WL++){var jL=zL[WL];$C(jL)}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var HL=vN,GL=function(e){Dy(a,e);var t,n,r=Hy(a);function a(){var e;return _y(this,a),(e=r.call(this)).blockSize=48,e.firstUse=!0,e.data=new rC(zy(e),wT()),e}return Oy(a,[{key:"nextDataId",value:function(){return a.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,WC().get("IS_NODE")&&BN("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&EC(n[0])){var a=n.map((function(e){return VS(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:(n=Ay(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?PN(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return WS(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return ZE(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return wT().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:(t=Ay(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=US(),t(),e.abrupt("return",{kernelMs:US()-n});case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){S_([e],"where");var t=this.readSync(e.dataId);return HL(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return qy(By(a.prototype),"epsilon",this).call(this)}}]),a}(aC);GL.nextDataId=0,
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
ST("cpu",(function(){return new GL}),1);
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var qL=q_("Elu",(function(e){return e>=0?e:Math.exp(e)-1})),KL={kernelName:"Elu",backendName:"cpu",kernelFunc:qL};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function XL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha;S_([a],"leakyRelu");for(var i=pC(a.shape),s=n.data.get(a.dataId).values,u=kC("float32",i),c=0;c<s.length;c++)u[c]=s[c]<0?o*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var QL={kernelName:"LeakyRelu",backendName:"cpu",kernelFunc:XL},YL=N_((function(e,t){return e<0?t*e:e}));
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function $L(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;S_([r,a],"prelu");var o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=Ky(YL(r.shape,a.shape,o,i,r.dtype),2),u=s[0],c=s[1];return n.makeTensorInfo(c,r.dtype,u)}var ZL={kernelName:"Prelu",backendName:"cpu",kernelFunc:$L},JL=q_("Relu",(function(e){return Math.max(0,e)})),eU={kernelName:"Relu",backendName:"cpu",kernelFunc:JL},tU=q_("Relu6",(function(e){return Math.min(Math.max(0,e),6)})),nU={kernelName:"Relu6",backendName:"cpu",kernelFunc:tU},rU=q_("Sigmoid",(function(e){return 1/(1+Math.exp(-e))})),aU={kernelName:"Sigmoid",backendName:"cpu",kernelFunc:rU};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function oU(e,t,n,r,a){if("linear"===n)return O_({inputs:{x:t},backend:e});if("relu"===n)return JL({inputs:{x:t},backend:e});if("elu"===n)return qL({inputs:{x:t},backend:e});if("relu6"===n)return tU({inputs:{x:t},backend:e});if("prelu"===n)return $L({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return XL({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return rU({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function iU(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=pC(a.shape),s=yC(o,i),u=pC(s);cC(i===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old shape (").concat(a.shape,") has ").concat(i," elements. The new shape and old shape must have the same number of elements.")})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;l.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var sU={kernelName:"Reshape",backendName:"cpu",kernelFunc:iU};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function uU(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=r.transposeA,s=r.transposeB;S_([a,o],"matMul");var u=a.shape.length,c=o.shape.length,l=i?a.shape[u-2]:a.shape[u-1],d=s?o.shape[c-1]:o.shape[c-2],p=i?a.shape[u-1]:a.shape[u-2],f=s?o.shape[c-2]:o.shape[c-1],h=a.shape.slice(0,-2),m=o.shape.slice(0,-2),g=pC(h),v=pC(m);cC(u>=2&&c>=2&&(g===v||1===g||1===v),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (".concat(h,") and (").concat(m,").")}));var y=(g>v?a.shape.slice(0,-2):o.shape.slice(0,-2)).concat([p,f]);cC(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (").concat(d,") of Tensors with shapes ").concat(a.shape," and ").concat(o.shape," and transposeA=").concat(i," and transposeB=").concat(s," must match.")}));for(var b=s?[v,f,d]:[v,d,f],x=iU({inputs:{x:a},backend:n,attrs:{shape:i?[g,l,p]:[g,p,l]}}),k=iU({inputs:{x:o},backend:n,attrs:{shape:b}}),w=i?x.shape[1]:x.shape[2],I=i?x.shape[2]:x.shape[1],C=s?k.shape[1]:k.shape[2],S=Math.max(g,v),E=n.data.get(x.dataId).values,T=n.data.get(k.dataId).values,N=_C(x.shape),A=_C(k.shape),_=Ky(i?[N[0],1,N[1]]:[N[0],N[1],1],3),R=_[0],O=_[1],F=_[2],M=Ky(s?[1,A[1],A[0]]:[A[1],1,A[0]],3),D=M[0],B=M[1],P=M[2],L=I*C,U=ZE([S,I,C],x.dtype),V=U.values,W=n.blockSize,z=0;z<S;z++)for(var j=0;j<I;j+=W)for(var H=0;H<C;H+=W)for(var G=0;G<w;G+=W)for(var q=Math.min(j+W,I),K=Math.min(H+W,C),X=Math.min(G+W,w),Q=j;Q<q;Q++)for(var Y=H;Y<K;Y++){for(var $=0,Z=G;Z<X;Z++){var J=Math.min(z,g-1)*R,ee=Math.min(z,v-1)*P;$+=E[J+Q*O+Z*F]*T[Z*D+Y*B+ee]}V[z*L+(Q*C+Y)]+=$}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(y,U.dtype,U.values)}var cU={kernelName:"BatchMatMul",backendName:"cpu",kernelFunc:uU},lU={kernelName:"_FusedMatMul",backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,o=e.backend,i=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,d=i.transposeA,p=i.transposeB,f=i.activation,h=i.leakyreluAlpha,m=[];t=uU({inputs:{a:s,b:u},attrs:{transposeA:d,transposeB:p},backend:o}),c&&(n=W_({inputs:{a:t,b:c},backend:o}),m.push(t),t=n),f&&(r=oU(o,t,f,l,h),m.push(t),t=r);for(var g=0,v=m;g<v.length;g++){var y=v[g];o.disposeIntermediateTensorInfo(y)}return t}},dU={kernelName:"Acos",backendName:"cpu",kernelFunc:q_("Acos",(function(e){return Math.acos(e)}))},pU={kernelName:"Acosh",backendName:"cpu",kernelFunc:q_("Acosh",(function(e){return Math.acosh(e)}))},fU={kernelName:"AddN",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=t;S_(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),o=ZE(r[0].shape,r[0].dtype),i=o.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<i.length;c++)i[c]+=u[c];return n.makeTensorInfo(o.shape,o.dtype,o.values)}},hU={kernelName:"All",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;S_(a,"all");var s=bC(o,a.shape),u=s,c=JT(u,a.shape.length),l=a;null!=c&&(l=MR({inputs:{x:a},backend:n,attrs:{perm:c}}),u=tN(u.length,a.shape.length)),ZT("all",u,l.shape.length);for(var d=Ky(YT(l.shape,u),2),p=d[0],f=pC(d[1]),h=FC(pC(p),l.dtype),m=n.data.get(l.dataId).values,g=0;g<h.length;++g){for(var v=g*f,y=m[v],b=0;b<f;++b){var x=m[v+b];y=y&&x}h[g]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(p,l.dtype,h);if(i){var w=iU({inputs:{x:k},backend:n,attrs:{shape:$T(p,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},mU={kernelName:"Any",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;S_(a,"any");var s=bC(o,a.shape),u=s,c=JT(u,a.shape.length),l=a;null!=c&&(l=MR({inputs:{x:a},backend:n,attrs:{perm:c}}),u=tN(u.length,a.shape.length)),ZT("any",u,l.shape.length);for(var d=Ky(YT(l.shape,u),2),p=d[0],f=pC(d[1]),h=FC(pC(p),l.dtype),m=n.data.get(l.dataId).values,g=0;g<h.length;++g){for(var v=g*f,y=m[v],b=0;b<f;++b){var x=m[v+b];y=y||x}h[g]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(p,l.dtype,h);if(i){var w=iU({inputs:{x:k},backend:n,attrs:{shape:$T(p,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},gU={kernelName:"ArgMax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;S_(a,"argMax");var i=bC(o,a.shape),s=JT(i,a.shape.length),u=a,c=[];null!=s&&(u=MR({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=tN(i.length,u.shape.length)),ZT("argMax",i=[i[0]],u.shape.length);for(var l=Ky(YT(u.shape,i),2),d=l[0],p=l[1],f=FC(pC(d),"int32"),h=pC(p),m=n.data.get(u.dataId).values,g=0;g<f.length;++g){for(var v=g*h,y=m[v],b=0,x=0;x<h;++x){var k=m[v+x];k>y&&(y=k,b=x)}f[g]=b}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",f)}},vU={kernelName:"ArgMin",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;S_(a,"argMin");var i=bC(o,a.shape),s=JT(i,a.shape.length),u=a,c=[];null!=s&&(u=MR({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=tN(i.length,u.shape.length)),ZT("argMin",i=[i[0]],u.shape.length);for(var l=Ky(YT(u.shape,i),2),d=l[0],p=l[1],f=FC(pC(d),"int32"),h=pC(p),m=n.data.get(u.dataId).values,g=0;g<f.length;++g){for(var v=g*h,y=m[v],b=0,x=0;x<h;++x){var k=m[v+x];k<y&&(y=k,b=x)}f[g]=b}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",f)}},yU={kernelName:"Asin",backendName:"cpu",kernelFunc:q_("Asin",(function(e){return Math.asin(e)}))},bU={kernelName:"Asinh",backendName:"cpu",kernelFunc:q_("Asinh",(function(e){return Math.asinh(e)}))},xU={kernelName:"Atan",backendName:"cpu",kernelFunc:q_("Atan",(function(e){return Math.atan(e)}))},kU={kernelName:"Atan2",backendName:"cpu",kernelFunc:L_("Atan2",N_((function(e,t){return Math.atan2(e,t)})))},wU={kernelName:"Atanh",backendName:"cpu",kernelFunc:q_("Atanh",(function(e){return Math.atanh(e)}))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function IU(e,t,n,r,a,o){for(var i=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,d=a.effectiveFilterWidth,p=a.padInfo.top,f=a.padInfo.left,h="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=ZE(a.outShape,n),g=m.values,v=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var k=x*v,w=x*r[0],I=0;I<a.inChannels;++I)for(var C=0;C<a.outHeight;++C)for(var S=C*i-p,E=Math.max(0,S),T=Math.min(a.inHeight,l+S),N=k+C*y,A=0;A<a.outWidth;++A){for(var _=A*s-f,R=Math.max(0,_),O=Math.min(a.inWidth,d+_),F=h,M=0,D=0,B=E;B<T;B+=u){for(var P=w+B*r[1],L=R;L<O;L+=c){var U=e[P+L*r[2]+I];"max"===o&&U>F?F=U:"avg"===o&&(M+=U,D++)}if(isNaN(F))break}g[N+A*b+I]="avg"===o?M/D:F}return m}function CU(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=ZE(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,m=ZE(t,n,e),g=0;g<r.batchSize;++g)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.outHeight;++y){for(var b=y*s-f,x=b;x<0;)x+=c;for(var k=Math.min(r.inHeight,d+b),w=0;w<r.outWidth;++w){for(var I=w*u-h,C=I;C<0;)C+=l;for(var S=Math.min(r.inWidth,p+I),E=Number.NEGATIVE_INFINITY,T=-1,N=x;N<k;N+=c)for(var A=N-b,_=C;_<S;_+=l){var R=_-I,O=m.get(g,N,_,v);O>E&&(E=O,T=a?o?((g*r.inHeight+N)*r.inWidth+_)*r.inChannels+v:(N*r.inWidth+_)*r.inChannels+v:A*p+R)}i.set(T,g,y,w,v)}}return i}function SU(e,t,n,r,a,o){for(var i=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,d=a.dilationWidth,p=a.effectiveFilterDepth,f=a.effectiveFilterHeight,h=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,v=a.padInfo.left,y="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=ZE(a.outShape,n),x=b.values,k=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],I=a.outShape[3]*a.outShape[4],C=a.outShape[4],S=0;S<a.batchSize;++S)for(var E=S*k,T=S*r[0],N=0;N<a.inChannels;++N)for(var A=0;A<a.outDepth;++A){for(var _=A*i-m,R=_;R<0;)R+=c;for(var O=Math.min(a.inDepth,p+_),F=E+A*w,M=0;M<a.outHeight;++M){for(var D=M*s-g,B=D;B<0;)B+=l;for(var P=Math.min(a.inHeight,f+D),L=F+M*I,U=0;U<a.outWidth;++U){for(var V=U*u-v,W=V;W<0;)W+=d;for(var z=Math.min(a.inWidth,h+V),j=L+U*C,H=y,G=0,q=0,K=R;K<O;K+=c){for(var X=T+K*r[1],Q=B;Q<P;Q+=l){for(var Y=X+Q*r[2],$=W;$<z;$+=d){var Z=e[Y+$*r[3]+N];if("max"===o&&Z>H?H=Z:"avg"===o&&(G+=Z,q++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}x[j+N]="avg"===o?G/q:H}}}return b}var EU={kernelName:"AvgPool",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;S_(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;cC(LT(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c,l=NT(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&fC(l.inShape,l.outShape))c=O_({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,p=_C(a.shape),f=IU(d,a.shape,a.dtype,p,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,f.values)}return c}},TU={kernelName:"AvgPool3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;S_(a,"avgPool3d");var l=AT(a.shape,o,i,1,s,u,c),d=SU(n.data.get(a.dataId).values,a.shape,a.dtype,_C(a.shape),l,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}},NU={kernelName:"AvgPool3DGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;S_([a,o],"avgPool3DGrad");for(var l=AT(o.shape,i,s,1,u,c),d=l.strideDepth,p=l.strideHeight,f=l.strideWidth,h=l.filterDepth,m=l.filterHeight,g=l.filterWidth,v=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,k=l.effectiveFilterHeight,w=l.effectiveFilterWidth,I=x-1-l.padInfo.front,C=w-1-l.padInfo.left,S=k-1-l.padInfo.top,E=ZE(o.shape,"float32"),T=1/(h*m*g),N=n.bufferSync(a),A=0;A<l.batchSize;++A)for(var _=0;_<l.inChannels;++_)for(var R=0;R<l.inDepth;++R)for(var O=0;O<l.inHeight;++O)for(var F=0;F<l.inWidth;++F){for(var M=R-I,D=O-S,B=F-C,P=0,L=0;L<x;L+=v){var U=(M+L)/d;if(!(U<0||U>=l.outDepth||Math.floor(U)!==U))for(var V=0;V<k;V+=y){var W=(D+V)/p;if(!(W<0||W>=l.outHeight||Math.floor(W)!==W))for(var z=0;z<w;z+=b){var j=(B+z)/f;j<0||j>=l.outWidth||Math.floor(j)!==j||(P+=N.get(A,U,W,j,_))}}}E.set(P*T,A,R,O,F,_)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}},AU={kernelName:"AvgPoolGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;S_([a,o],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=NT(i.shape,s,u,1,c),d=l.strideHeight,p=l.strideWidth,f=l.filterHeight,h=l.filterWidth,m=l.dilationHeight,g=l.dilationWidth,v=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,x=v-1-l.padInfo.top,k=ZE(i.shape,"float32"),w=1/(f*h),I=n.data.get(a.dataId).values,C=ZE(a.shape,"float32",I),S=0;S<l.batchSize;++S)for(var E=0;E<l.inChannels;++E)for(var T=0;T<l.inHeight;++T)for(var N=0;N<l.inWidth;++N){for(var A=T-x,_=N-b,R=0,O=0;O<v;O+=m){var F=(A+O)/d;if(!(F<0||F>=l.outHeight||Math.floor(F)!==F))for(var M=0;M<y;M+=g){var D=(_+M)/p;D<0||D>=l.outWidth||Math.floor(D)!==D||(R+=C.get(S,F,D,E))}}k.set(R*w,S,T,N,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}},_U={kernelName:"FusedBatchNorm",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.scale,i=t.offset,s=t.mean,u=t.variance;cC(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),cC(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),cC(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),S_([a,s,u,o,i],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,p=n.data.get(u.dataId).values,f=o?n.data.get(o.dataId).values:new Float32Array([1]),h=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(l.length),g=h.length,v=f.length,y=p.length,b=d.length,x=0,k=0,w=0,I=0,C=0;C<l.length;++C)m[C]=h[x++]+(l[C]-d[k++])*f[w++]/Math.sqrt(p[I++]+c),x>=g&&(x=0),k>=b&&(k=0),w>=v&&(w=0),I>=y&&(I=0);return n.makeTensorInfo(a.shape,a.dtype,m)}},RU={kernelName:"BatchToSpaceND",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;S_([a],"batchToSpaceND");var s=o.reduce((function(e,t){return e*t})),u=RN(a.shape,o,s),c=ON(u.length,o.length),l=FN(a.shape,o,s),d=MN(i,o.length),p=DN(l,i,o.length),f=iU({inputs:{x:a},backend:n,attrs:{shape:u}}),h=MR({inputs:{x:f},backend:n,attrs:{perm:c}}),m=iU({inputs:{x:h},backend:n,attrs:{shape:l}}),g=zR({inputs:{x:m},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}},OU={kernelName:"Bincount",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=j_(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,s)}},FU={kernelName:"ClipByValue",backendName:"cpu",kernelFunc:q_("ClipByValue",(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}))},MU={kernelName:"ComplexAbs",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(pC(t.shape)),a=n.data.get(t.dataId),o=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,s=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=0;c<s.length;c++){var l=s[c],d=u[c];r[c]=Math.hypot(l,d)}return n.makeOutput(r,t.shape,"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function DU(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var BU={kernelName:"Imag",backendName:"cpu",kernelFunc:DU};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function PU(e){var t=e.inputs,n=e.backend,r=bC(e.attrs.axis,t[0].shape)[0],a=NN(t.map((function(e){return e.shape})),r);if(0===pC(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return pC(e.shape)>0}));if(1===o.length)return O_({inputs:{x:o[0]},backend:n});if(TN(o.map((function(e){return e.shape})),r),"complex64"===o[0].dtype){var i=o.map((function(e){return M_({inputs:{input:e},backend:n})})),s=o.map((function(e){return DU({inputs:{input:e},backend:n})})),u=PU({inputs:i,backend:n,attrs:{axis:r}}),c=PU({inputs:s,backend:n,attrs:{axis:r}}),l=A_({inputs:{real:u,imag:c},backend:n});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),l}var d=o.map((function(e){var t=pC(e.shape.slice(r));return iU({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),p=d.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=NN(d.map((function(e){return e.shape})),1);var f=1===d[0].shape[0],h=Y_(p,a,t[0].dtype,f),m=NN(o.map((function(e){return e.shape})),r),g=n.makeTensorInfo(m,t[0].dtype,h);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}var LU={kernelName:"Concat",backendName:"cpu",kernelFunc:PU};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function UU(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;S_([a,o],"conv2d");for(var d=UT(u),p=_T(a.shape,o.shape,i,c,s,l,!1,d),f=p.filterHeight,h=p.filterWidth,m=p.dilationHeight,g=p.dilationWidth,v=p.padInfo.left,y=p.padInfo.top,b="channelsLast"===p.dataFormat,x=new YS(p.outShape,a.dtype),k=_C(a.shape),w=_C(o.shape),I=k[0],C=b?k[1]:k[2],S=b?k[2]:1,E=b?1:k[1],T=x.strides[0],N=b?x.strides[1]:x.strides[2],A=b?x.strides[2]:1,_=b?1:x.strides[1],R=n.data.get(a.dataId).values,O=n.data.get(o.dataId).values,F=x.values,M=0;M<p.batchSize;++M)for(var D=M*I,B=M*T,P=0;P<p.outHeight;++P)for(var L=B+P*N,U=P*p.strideHeight-y,V=0;V<f;++V){var W=U+V*m;if(!(W<0||W>=p.inHeight))for(var z=V*w[0],j=D+W*C,H=0;H<p.outWidth;++H)for(var G=L+H*A,q=H*p.strideWidth-v,K=0;K<h;++K){var X=q+K*g;if(!(X<0||X>=p.inWidth))for(var Q=j+X*S,Y=z+K*w[1],$=0;$<p.inChannels;++$){for(var Z=R[Q+$*E],J=0;J<p.outChannels;++J)F[G+J*_]+=Z*O[Y+J];Y+=p.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,F)}var VU={kernelName:"Conv2D",backendName:"cpu",kernelFunc:UU},WU={kernelName:"Conv2DBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;S_([a,o],"conv2dBackpropFilter");for(var d=UT(u),p=_T(a.shape,l,i,1,s,c,!1,d),f=p.strideHeight,h=p.strideWidth,m=p.filterHeight,g=p.filterWidth,v="channelsLast"===p.dataFormat,y=new YS(p.filterShape,"float32"),b=p.padInfo.left,x=p.padInfo.top,k=n.data.get(a.dataId).values,w=n.data.get(o.dataId).values,I=new YS(a.shape,a.dtype,k),C=new YS(o.shape,o.dtype,w),S=0;S<m;++S)for(var E=Math.max(0,Math.ceil((x-S)/f)),T=Math.min(p.outHeight,(p.inHeight+x-S)/f),N=0;N<g;++N)for(var A=Math.max(0,Math.ceil((b-N)/h)),_=Math.min(p.outWidth,(p.inWidth+b-N)/h),R=0;R<p.inChannels;++R)for(var O=0;O<p.outChannels;++O){for(var F=0,M=0;M<p.batchSize;++M)for(var D=E;D<T;++D)for(var B=S+D*f-x,P=A;P<_;++P){var L=N+P*h-b;F+=v?I.get(M,B,L,R)*C.get(M,D,P,O):I.get(M,R,B,L)*C.get(M,O,D,P)}y.set(F,S,N,R,O)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},zU={kernelName:"Conv2DBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode;S_([a,o],"conv2dBackpropInput");var d=_C(o.shape),p=_C(a.shape),f=UT(c),h=_T(i,o.shape,s,1,u,l,!1,f),m=new YS(h.inShape,"float32"),g=m.values,v=n.data.get(a.dataId).values,y=n.data.get(o.dataId).values,b=Ky(d,3),x=b[0],k=b[1],w=b[2],I=h.batchSize,C=h.filterHeight,S=h.filterWidth,E=h.inChannels,T=h.inHeight,N=h.inWidth,A=h.outChannels,_=h.outHeight,R=h.outWidth,O=h.strideHeight,F=h.strideWidth;f=h.dataFormat;for(var M=C-1-h.padInfo.top,D=S-1-h.padInfo.left,B="channelsLast"===f,P=m.strides[0],L=B?m.strides[1]:m.strides[2],U=B?m.strides[2]:1,V=B?1:m.strides[1],W=p[0],z=B?p[1]:p[2],j=B?p[2]:1,H=B?1:p[1],G=0;G<I;++G)for(var q=0;q<E;++q)for(var K=0;K<T;++K)for(var X=K-M,Q=Math.max(0,Math.ceil(X/O)),Y=Math.min(_,(C+X)/O),$=0;$<N;++$){for(var Z=$-D,J=Math.max(0,Math.ceil(Z/F)),ee=Math.min(R,(S+Z)/F),te=0,ne=Q;ne<Y;++ne)for(var re=ne*O-X,ae=J;ae<ee;++ae)for(var oe=W*G+z*ne+j*ae,ie=x*(C-1-re)+k*(S-1-(ae*F-Z))+w*q,se=0;se<A;++se)te+=v[oe+H*se]*y[ie+se];g[P*G+L*K+U*$+V*q]=te}return n.makeTensorInfo(m.shape,m.dtype,m.values)}},jU={kernelName:"Conv3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations;S_([a,o],"conv3d");for(var c=RT(a.shape,o.shape,i,u,s),l=c.filterDepth,d=c.filterHeight,p=c.filterWidth,f=c.dilationDepth,h=c.dilationHeight,m=c.dilationWidth,g=c.padInfo,v=g.front,y=g.left,b=g.top,x=new YS(c.outShape,a.dtype),k=n.data.get(a.dataId).values,w=n.data.get(o.dataId).values,I=x.values,C=_C(a.shape),S=_C(o.shape),E=0;E<c.batchSize;++E)for(var T=E*C[0],N=E*x.strides[0],A=0;A<c.outDepth;++A)for(var _=N+A*x.strides[1],R=A*c.strideDepth-v,O=0;O<l;++O){var F=R+O*f;if(!(F<0||F>=c.inDepth))for(var M=O*S[0],D=T+F*C[1],B=0;B<c.outHeight;++B)for(var P=_+B*x.strides[2],L=B*c.strideHeight-b,U=0;U<d;++U){var V=L+U*h;if(!(V<0||V>=c.inHeight))for(var W=M+U*S[1],z=D+V*C[2],j=0;j<c.outWidth;++j)for(var H=P+j*c.outChannels,G=j*c.strideWidth-y,q=0;q<p;++q){var K=G+q*m;if(!(K<0||K>=c.inWidth))for(var X=W+q*S[2],Q=z+K*c.inChannels,Y=X,$=0;$<c.inChannels;++$){for(var Z=k[Q+$],J=0;J<c.outChannels;++J)I[H+J]+=Z*w[Y+J];Y+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}},HU={kernelName:"Conv3DBackpropFilterV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.filterShape;S_([a,o],"conv3dBackpropFilterV2");for(var c=_C(a.shape),l=_C(o.shape),d=RT(a.shape,u,i,1,s),p=d.strideDepth,f=d.strideHeight,h=d.strideWidth,m=d.filterDepth,g=d.filterHeight,v=d.filterWidth,y=new YS(d.filterShape,"float32"),b=y.values,x=Ky(y.strides,4),k=x[0],w=x[1],I=x[2],C=x[3],S=n.data.get(o.dataId).values,E=Ky(l,4),T=E[0],N=E[1],A=E[2],_=E[3],R=n.data.get(a.dataId).values,O=Ky(c,4),F=O[0],M=O[1],D=O[2],B=O[3],P=d.padInfo.front,L=d.padInfo.left,U=d.padInfo.top,V=0;V<m;++V)for(var W=Math.max(0,Math.ceil((P-V)/p)),z=Math.min(d.outDepth,(d.inDepth+P-V)/p),j=V*k,H=0;H<g;++H)for(var G=Math.max(0,Math.ceil((U-H)/f)),q=Math.min(d.outHeight,(d.inHeight+U-H)/f),K=H*w+j,X=0;X<v;++X)for(var Q=Math.max(0,Math.ceil((L-X)/h)),Y=Math.min(d.outWidth,(d.inWidth+L-X)/h),$=X*I+K,Z=0;Z<d.inChannels;++Z)for(var J=Z*C+$,ee=0;ee<d.outChannels;++ee){for(var te=0,ne=0;ne<d.batchSize;++ne)for(var re=ne*F,ae=ne*T,oe=W;oe<z;++oe)for(var ie=(V+oe*p-P)*M+re,se=oe*N+ae,ue=G;ue<q;++ue)for(var ce=(H+ue*f-U)*D+ie,le=ue*A+se,de=Q;de<Y;++de){var pe=de*_+le;te+=R[(X+de*h-L)*B+ce+Z]*S[pe+ee]}b[J+ee]=te}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},GU={kernelName:"Conv3DBackpropInputV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,u=r.inputShape;S_([a],"conv3dBackpropInputV2");for(var c=_C(a.shape),l=_C(o.shape),d=RT(u,o.shape,s,1,i),p=new YS(d.inShape,"float32"),f=p.values,h=Ky(p.strides,4),m=h[0],g=h[1],v=h[2],y=h[3],b=n.data.get(a.dataId).values,x=Ky(c,4),k=x[0],w=x[1],I=x[2],C=x[3],S=n.data.get(o.dataId).values,E=Ky(l,4),T=E[0],N=E[1],A=E[2],_=E[3],R=d.batchSize,O=d.filterDepth,F=d.filterHeight,M=d.filterWidth,D=d.inChannels,B=d.inDepth,P=d.inHeight,L=d.inWidth,U=d.outChannels,V=d.outDepth,W=d.outHeight,z=d.outWidth,j=d.strideDepth,H=d.strideHeight,G=d.strideWidth,q=O-1-d.padInfo.front,K=F-1-d.padInfo.top,X=M-1-d.padInfo.left,Q=0;Q<R;++Q)for(var Y=0;Y<D;++Y)for(var $=0;$<B;++$)for(var Z=$-q,J=Math.max(0,Math.ceil(Z/j)),ee=Math.min(V,(O+Z)/j),te=0;te<P;++te)for(var ne=te-K,re=Math.max(0,Math.ceil(ne/H)),ae=Math.min(W,(F+ne)/H),oe=0;oe<L;++oe){for(var ie=oe-X,se=Math.max(0,Math.ceil(ie/G)),ue=Math.min(z,(M+ie)/G),ce=0,le=J;le<ee;++le)for(var de=le*j-Z,pe=re;pe<ae;++pe)for(var fe=pe*H-ne,he=se;he<ue;++he)for(var me=k*Q+w*le+I*pe+C*he,ge=T*(O-1-de)+N*(F-1-fe)+A*(M-1-(he*G-ie))+_*Y,ve=0;ve<U;++ve)ce+=b[me+ve]*S[ge+ve];f[m*Q+g*$+v*te+y*oe+Y]=ce}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},qU={kernelName:"Cos",backendName:"cpu",kernelFunc:q_("Cos",(function(e){return Math.cos(e)}))},KU={kernelName:"Cosh",backendName:"cpu",kernelFunc:q_("Cosh",(function(e){return Math.cosh(e)}))},XU={kernelName:"CropAndResize",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=Ky(a.shape,4),d=l[0],p=l[1],f=l[2],h=l[3],m=o.shape[0],g=Ky(s,2),v=g[0],y=g[1],b=ZE([m,v,y,h],"float32"),x=n.data.get(o.dataId).values,k=n.data.get(i.dataId).values,w=n.data.get(a.dataId).values,I=_C(a.shape),C=_C(b.shape),S=0;S<m;S++){var E=4*S,T=x[E],N=x[E+1],A=x[E+2],_=x[E+3],R=k[S];if(!(R>=d))for(var O=v>1?(A-T)*(p-1)/(v-1):0,F=y>1?(_-N)*(f-1)/(y-1):0,M=0;M<v;M++){var D=v>1?T*(p-1)+M*O:.5*(T+A)*(p-1);if(D<0||D>p-1)for(var B=0;B<y;B++)for(var P=0;P<h;P++){var L=P+B*C[2]+M*C[1]+S*C[0];b.values[L]=c}else if("bilinear"===u)for(var U=Math.floor(D),V=Math.ceil(D),W=D-U,z=0;z<y;z++){var j=y>1?N*(f-1)+z*F:.5*(N+_)*(f-1);if(j<0||j>f-1)for(var H=0;H<h;H++){var G=H+z*C[2]+M*C[1]+S*C[0];b.values[G]=c}else for(var q=Math.floor(j),K=Math.ceil(j),X=j-q,Q=0;Q<h;Q++){var Y=Q+q*I[2]+U*I[1]+R*I[0],$=w[Y],Z=w[Y=Q+K*I[2]+U*I[1]+R*I[0]],J=w[Y=Q+q*I[2]+V*I[1]+R*I[0]],ee=$+(Z-$)*X,te=J+(w[Y=Q+K*I[2]+V*I[1]+R*I[0]]-J)*X;Y=Q+z*C[2]+M*C[1]+S*C[0],b.values[Y]=ee+(te-ee)*W}}else for(var ne=0;ne<y;++ne){var re=y>1?N*(f-1)+ne*F:.5*(N+_)*(f-1);if(re<0||re>f-1)for(var ae=0;ae<h;ae++){var oe=ae+ne*C[2]+M*C[1]+S*C[0];b.values[oe]=c}else for(var ie=Math.round(re),se=Math.round(D),ue=0;ue<h;ue++){var ce=ue+ie*I[2]+se*I[1]+R*I[0],le=ue+ne*C[2]+M*C[1]+S*C[0];b.values[le]=w[ce]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},QU={kernelName:"Cumsum",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;S_(a,"cumsum");var u=JT([o],a.shape.length),c=a;null!=u&&(c=MR({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=tN(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=sE(c.dtype,"int32"),p=FC(pC(c.shape),d),f=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},g=0;g<f.length;g+=h)for(var v=0;v<h;v++){var y=m(g,v);if(0===v)p[y]=i?0:f[y];else{var b=m(g,v-1);p[y]=i?f[b]+p[b]:f[y]+p[b]}}var x=n.makeTensorInfo(c.shape,d,p);if(null!=u){var k=MR({inputs:{x:x},backend:n,attrs:{perm:eN(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),k}return x}},YU={kernelName:"DenseBincount",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=j_(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}if(2===a.shape.length){var c=H_(n.bufferSync(a),n.bufferSync(o),i,s);return n.makeTensorInfo(c.shape,o.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}},$U={kernelName:"DepthToSpace",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;cC("NHWC"===i,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i)})),cC(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],d=u*o,p=c*o,f=l/(o*o),h=n.data.get(a.dataId).values,m=new Float32Array(s*d*p*f),g=0,v=0;v<s;++v)for(var y=0;y<d;++y)for(var b=Math.floor(y/o),x=y%o,k=0;k<p;++k)for(var w=Math.floor(k/o),I=(x*o+k%o)*f,C=0;C<f;++C){var S=C+I+l*(w+c*(b+u*v));m[g++]=h[S]}return n.makeTensorInfo([s,d,p,f],a.dtype,m)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function ZU(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;S_([a,o],"depthwiseConv2DNative");var l=_C(a.shape),d=_C(o.shape),p=u;null==p&&(p=[1,1]),cC(LT(i,p),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(p,"'")}));for(var f=_T(a.shape,o.shape,i,p,s,c,!0),h=f.filterHeight,m=f.filterWidth,g=f.dilationHeight,v=f.dilationWidth,y=f.padInfo,b=y.left,x=y.top,k=f.outChannels/f.inChannels,w=new YS(f.outShape,a.dtype),I=n.data.get(a.dataId).values,C=n.data.get(o.dataId).values,S=w.values,E=0;E<f.batchSize;++E)for(var T=E*l[0],N=E*w.strides[0],A=0;A<f.outHeight;++A)for(var _=N+A*w.strides[1],R=A*f.strideHeight-x,O=0;O<h;++O){var F=R+O*g;if(!(F<0||F>=f.inHeight))for(var M=O*d[0],D=T+F*l[1],B=0;B<f.outWidth;++B)for(var P=_+B*w.strides[2],L=B*f.strideWidth-b,U=0;U<m;++U){var V=L+U*v;if(!(V<0||V>=f.inWidth))for(var W=M+U*d[1],z=D+V*f.inChannels,j=P,H=W,G=0;G<f.inChannels;++G){for(var q=I[z+G],K=0;K<k;++K)S[j+K]+=q*C[H+K];j+=k,H+=k}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var JU={kernelName:"DepthwiseConv2dNative",backendName:"cpu",kernelFunc:ZU},eV={kernelName:"DepthwiseConv2dNativeBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;S_([a,o],"depthwiseConv2dNativeBackpropFilter");for(var d=_T(a.shape,l,i,s,u,c,!0),p=d.strideHeight,f=d.strideWidth,h=d.filterHeight,m=d.filterWidth,g=new YS(d.filterShape,"float32"),v=d.padInfo.left,y=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(a.dataId).values,k=new YS(a.shape,a.dtype,x),w=n.data.get(o.dataId).values,I=new YS(o.shape,o.dtype,w),C=0;C<h;++C)for(var S=Math.max(0,Math.ceil((y-C)/p)),E=Math.min(d.outHeight,(d.inHeight+y-C)/p),T=0;T<m;++T)for(var N=Math.max(0,Math.ceil((v-T)/f)),A=Math.min(d.outWidth,(d.inWidth+v-T)/f),_=0;_<d.outChannels;++_){for(var R=Math.trunc(_/b),O=_%b,F=0,M=0;M<d.batchSize;++M)for(var D=S;D<E;++D)for(var B=C+D*p-y,P=N;P<A;++P){var L=T+P*f-v;F+=k.get(M,B,L,R)*I.get(M,D,P,_)}g.set(F,C,T,R,O)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}},tV={kernelName:"DepthwiseConv2dNativeBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape;S_([a,o],"depthwiseConv2DNativeBackpropInput");for(var d=_C(a.shape),p=_C(o.shape),f=_T(l,o.shape,i,s,u,c,!0),h=new YS(f.inShape,"float32"),m=h.values,g=Ky(h.strides,3),v=g[0],y=g[1],b=g[2],x=n.data.get(a.dataId).values,k=Ky(d,3),w=k[0],I=k[1],C=k[2],S=n.data.get(o.dataId).values,E=Ky(p,3),T=E[0],N=E[1],A=E[2],_=f.batchSize,R=f.filterHeight,O=f.filterWidth,F=f.inChannels,M=f.inHeight,D=f.inWidth,B=f.outChannels,P=f.outHeight,L=f.outWidth,U=f.strideHeight,V=f.strideWidth,W=R-1-f.padInfo.top,z=O-1-f.padInfo.left,j=B/F,H=0;H<_;++H)for(var G=0;G<F;++G)for(var q=0;q<M;++q)for(var K=q-W,X=Math.max(0,Math.ceil(K/U)),Q=Math.min(P,(R+K)/U),Y=0;Y<D;++Y){for(var $=Y-z,Z=Math.max(0,Math.ceil($/V)),J=Math.min(L,(O+$)/V),ee=0,te=X;te<Q;++te)for(var ne=te*U-K,re=Z;re<J;++re)for(var ae=w*H+I*te+C*re,oe=T*(R-1-ne)+N*(O-1-(re*V-$))+A*G,ie=0;ie<j;++ie)ee+=x[ae+(G*j+ie)]*S[oe+ie];m[v*H+y*q+b*Y+G]=ee}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},nV={kernelName:"Diag",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=pC(r.shape),o=n.data.get(r.dataId).values,i=ZE([a,a],r.dtype),s=i.values,u=0;u<o.length;u++)s[u*a+u]=o[u];var c=[].concat(Xy(r.shape),Xy(r.shape));return n.makeTensorInfo(c,i.dtype,i.values)}},rV={kernelName:"Dilation2D",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,d=a.shape.length,p=c.data.get(o.dataId).values,f=o.shape.length,h=TT(a.shape,o.shape,i,s,"NHWC",u),m=h.batchSize,g=h.inHeight,v=h.inWidth,y=h.inChannels,b=h.outHeight,x=h.outWidth,k=h.padInfo,w=h.strideHeight,I=h.strideWidth,C=h.filterHeight,S=h.filterWidth,E=h.dilationHeight,T=h.dilationWidth,N=h.outShape,A=pC(N),_=N.length,R=wC(a.dtype,A),O=0;O<m;++O)for(var F=0;F<b;++F)for(var M=F*w-k.top,D=0;D<x;++D)for(var B=D*I-k.left,P=0;P<y;++P){for(var L=Number.MIN_SAFE_INTEGER,U=0;U<C;++U){var V=M+U*E;if(V>=0&&V<g)for(var W=0;W<S;++W){var z=B+W*T;if(z>=0&&z<v){var j=BC([O,V,z,P],d,_C(a.shape)),H=BC([U,W,P],f,_C(o.shape)),G=l[j]+p[H];G>L&&(L=G)}}}R[BC([O,F,D,P],_,_C(N))]=L}return{dataId:c.write(LS(R,a.dtype),N,a.dtype),shape:N,dtype:a.dtype}}},aV={kernelName:"Dilation2DBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=OC(a.shape,l.data.get(a.dataId).values),p=OC(o.shape,l.data.get(o.dataId).values),f=TT(a.shape,o.shape,s,u,"NHWC",c),h=f.batchSize,m=f.inHeight,g=f.inWidth,v=f.inChannels,y=f.outHeight,b=f.outWidth,x=f.padInfo,k=f.strideHeight,w=f.strideWidth,I=f.filterHeight,C=f.filterWidth,S=f.dilationHeight,E=f.dilationWidth,T=f.outShape;cC(i.rank===T.length,(function(){return"Error in Dilation2DBackpropFilter, dy must have the same rank as output ".concat(T.length,", but got ").concat(i.rank)}));for(var N=OC(T,l.data.get(i.dataId).values),A=MC(o.shape,o.dtype),_=0;_<h;++_)for(var R=0;R<y;++R)for(var O=R*k-x.top,F=0;F<b;++F)for(var M=F*w-x.left,D=0;D<v;++D){for(var B=Number.MIN_SAFE_INTEGER,P=0,L=0,U=0;U<I;++U){var V=O+U*S;if(V>=0&&V<m)for(var W=0;W<C;++W){var z=M+W*E;if(z>=0&&z<g){var j=d[_][V][z][D]+p[U][W][D];j>B&&(B=j,P=U,L=W)}}}A[P][L][D]+=N[_][R][F][D]}return{dataId:l.write(LS(A,a.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},oV={kernelName:"Dilation2DBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=OC(a.shape,l.data.get(a.dataId).values),p=OC(o.shape,l.data.get(o.dataId).values),f=TT(a.shape,o.shape,s,u,"NHWC",c),h=f.batchSize,m=f.inHeight,g=f.inWidth,v=f.inChannels,y=f.outHeight,b=f.outWidth,x=f.padInfo,k=f.strideHeight,w=f.strideWidth,I=f.filterHeight,C=f.filterWidth,S=f.dilationHeight,E=f.dilationWidth,T=f.outShape;cC(i.rank===T.length,(function(){return"Error in Dilation2DBackpropInput, dy must have the same rank as output ".concat(T.length,", but got ").concat(i.rank)}));for(var N=OC(T,l.data.get(i.dataId).values),A=MC(a.shape,a.dtype),_=0;_<h;++_)for(var R=0;R<y;++R)for(var O=R*k-x.top,F=0;F<b;++F)for(var M=F*w-x.left,D=0;D<v;++D){for(var B=Number.MIN_SAFE_INTEGER,P=O<0?0:O,L=M<0?0:M,U=0;U<I;++U){var V=O+U*S;if(V>=0&&V<m)for(var W=0;W<C;++W){var z=M+W*E;if(z>=0&&z<g){var j=d[_][V][z][D]+p[U][W][D];j>B&&(B=j,P=V,L=z)}}}A[_][P][L][D]+=N[_][R][F][D]}return{dataId:l.write(LS(A,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function iV(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.axis,s=a.keepDims;S_(o,"sum");var u=(t="bool"===o.dtype?B_({inputs:{x:o},backend:r,attrs:{dtype:"int32"}}):O_({inputs:{x:o},backend:r})).shape.length,c=bC(i,t.shape),l=JT(c,u),d=c,p=t;null!=l&&(p=MR({inputs:{x:t},backend:r,attrs:{perm:l}}),d=tN(d.length,u)),ZT("sum",d,p.shape.length);for(var f=Ky(YT(p.shape,d),2),h=f[0],m=f[1],g=R_(r,h,sE(p.dtype,"int32")),v=pC(m),y=r.data.get(g.dataId).values,b=r.data.get(p.dataId).values,x=0;x<y.length;++x){for(var k=x*v,w=0,I=0;I<v;++I)w+=b[k+I];y[x]=w}if(s){var C=g;g=iU({inputs:{x:g},backend:r,attrs:{shape:$T(g.shape,c)}}),r.disposeIntermediateTensorInfo(C)}return r.disposeIntermediateTensorInfo(t),null!=l&&r.disposeIntermediateTensorInfo(p),g}var sV={kernelName:"Sum",backendName:"cpu",kernelFunc:iV},uV={kernelName:"Einsum",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=qN(e.attrs.equation,r.length),o=a.allDims,i=a.summedDims,s=a.idDims;XN(o.length,s,r);for(var u=QN(i,s),c=u.path,l=u.steps,d=l.length,p=null,f=o.length,h=[],m=0;m<d;++m){var g,v=rb(l[m]);try{for(v.s();!(g=v.n()).done;){var y=g.value,b=KN(f,s[y]),x=b.permutationIndices,k=b.expandDims,w=void 0;YN(x)?w=r[y]:(w=MR({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),h.push(w));for(var I=w.shape.slice(),C=0;C<k.length;++C)I.splice(k[C],0,1);fC(w.shape,I)||(w=iU({inputs:{x:w},backend:n,attrs:{shape:I}}),h.push(w)),null===p?p=w:(p=TR({inputs:{a:w,b:p},backend:n}),h.push(p))}}catch(e){v.e(e)}finally{v.f()}m<d-1&&(c[m]>=0&&(p=iV({inputs:{x:p},backend:n,attrs:{axis:c[m]-(o.length-f),keepDims:!1}}),h.push(p)),f--)}for(var S=0,E=h;S<E.length;S++){var T=E[S];T!==p&&n.disposeIntermediateTensorInfo(T)}return p}},cV={kernelName:"EluGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;S_([r,a],"eluGrad");for(var o=new Float32Array(pC(a.shape)),i=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<i.length;++u){var c=i[u];o[u]=c>=1?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",o)}},lV={kernelName:"Erf",backendName:"cpu",kernelFunc:q_("Erf",(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))}))};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function dV(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,o=r.dim,i=a.shape.length,s=a.shape.slice(),u=o;return o<0&&(cC(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+o+1),s.splice(u,0,1),iU({inputs:{x:a},backend:n,attrs:{shape:s}})}var pV={kernelName:"ExpandDims",backendName:"cpu",kernelFunc:dV},fV=L_("RealDiv",N_((function(e,t){return e/t}))),hV={kernelName:"RealDiv",backendName:"cpu",kernelFunc:fV};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function mV(e,t,n){for(var r=e.shape,a=r[0],o=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,c=[a,o],l=pC(c),d=kC("float32",l),p=kC("float32",l),f=0;f<a;f++){for(var h=zR({inputs:{x:s},backend:n,attrs:{begin:[f,0],size:[1,o]}}),m=zR({inputs:{x:u},backend:n,attrs:{begin:[f,0],size:[1,o]}}),g=A_({inputs:{real:h,imag:m},backend:n}),v=gV(g,t,n),y=PN(v.real,v.imag),b=0;b<o;b++){var x=WN(y,b);d[f*o+b]=x.real,p[f*o+b]=x.imag}n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g)}var k=n.makeTensorInfo(c,"float32",d),w=n.makeTensorInfo(c,"float32",p),I=A_({inputs:{real:k,imag:w},backend:n});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(w),I}function gV(e,t,n){var r,a=pC(e.shape),o=n.data.get(e.dataId),i=n.data.get(o.complexTensorInfos.real.dataId).values,s=n.data.get(o.complexTensorInfos.imag.dataId).values;if(0==((r=a)&r-1)){var u=vV(i,s,a,t,n),c=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(c,"float32",u.real),d=n.makeTensorInfo(c,"float32",u.imag),p=n.makeTensorInfo([],"float32",PS(a,"float32")),f=O_({inputs:{x:p},backend:n}),h=hV.kernelFunc({inputs:{a:l,b:p},backend:n}),m=hV.kernelFunc({inputs:{a:d,b:f},backend:n}),g=n.data.get(h.dataId).values,v=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),{real:g,imag:v}}return u}return LN(function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var o=0,i=0,s=0;s<t;s++){var u=HN(a*s,t,n),c=WN(e,s);o+=c.real*u.real-c.imag*u.imag,i+=c.real*u.imag+c.imag*u.real}n&&(o/=t,i/=t),zN(r,o,i,a)}return r}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(PN(i,s),a,t))}function vV(e,t,n,r,a){if(1===n)return{real:e,imag:t};var o=PN(e,t),i=n/2,s=UN(o),u=s.real,c=s.imag,l=[u.length],d=a.makeTensorInfo(l,"float32",u),p=a.makeTensorInfo(l,"float32",c),f=A_({inputs:{real:d,imag:p},backend:a}),h=VN(o),m=h.real,g=h.imag,v=[m.length],y=a.makeTensorInfo(v,"float32",m),b=a.makeTensorInfo(v,"float32",g),x=A_({inputs:{real:y,imag:b},backend:a}),k=vV(u,c,i,r,a),w=k.real,I=k.imag,C=[w.length],S=a.makeTensorInfo(C,"float32",w),E=a.makeTensorInfo(C,"float32",I),T=A_({inputs:{real:S,imag:E},backend:a}),N=vV(m,g,i,r,a),A=N.real,_=N.imag,R=[A.length],O=a.makeTensorInfo(R,"float32",A),F=a.makeTensorInfo(R,"float32",_),M=A_({inputs:{real:O,imag:F},backend:a}),D=jN(n,r),B=[D.real.length],P=a.makeTensorInfo(B,"float32",D.real),L=a.makeTensorInfo(B,"float32",D.imag),U=A_({inputs:{real:P,imag:L},backend:a}),V=TR({inputs:{a:U,b:M},backend:a}),W=W_({inputs:{a:T,b:V},backend:a}),z=nO({inputs:{a:T,b:V},backend:a}),j=M_({inputs:{input:W},backend:a}),H=M_({inputs:{input:z},backend:a}),G=DU({inputs:{input:W},backend:a}),q=DU({inputs:{input:z},backend:a}),K=PU({inputs:[j,H],backend:a,attrs:{axis:0}}),X=PU({inputs:[G,q],backend:a,attrs:{axis:0}}),Q=a.data.get(K.dataId).values,Y=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(X),{real:Q,imag:Y}}var yV={kernelName:"FFT",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=pC(r.shape),o=r.shape[r.shape.length-1],i=iU({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=mV(i,!1,n),u=iU({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function bV(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype||TC(a),i=wC(o,pC(r));return function(e,t,n){e.fill(t)}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(i,a),t.makeTensorInfo(r,o,i)}var xV={kernelName:"Fill",backendName:"cpu",kernelFunc:bV},kV={kernelName:"FlipLeftRight",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,o=kC(r.dtype,pC(r.shape)),i=Ky(r.shape,4),s=i[0],u=i[1],c=i[2],l=i[3],d=a.data.get(r.dataId).values,p=0;p<s;p++)for(var f=p*c*u*l,h=0;h<u;h++)for(var m=h*(c*l),g=0;g<c;g++)for(var v=g*l,y=0;y<l;y++){var b=Math.round(c-g-1),x=f+m+v+y,k=d[x];b>=0&&b<c&&(k=d[f+m+b*l+y]),o[x]=k}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},wV={kernelName:"FloorDiv",backendName:"cpu",kernelFunc:L_("FloorDiv",N_((function(e,t){return Math.floor(e/t)})),null,"int32")},IV={kernelName:"FusedConv2D",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,p=r.dimRoundingMode,f=r.activation,h=r.leakyreluAlpha,m=UU({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p}});if(i){var g=m;m=W_({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(f){var v=m;m=oU(n,m,f,s,h),n.disposeIntermediateTensorInfo(v)}return m}},CV={kernelName:"FusedDepthwiseConv2D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,p=r.dimRoundingMode,f=r.activation,h=r.leakyreluAlpha,m=ZU({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p}});if(i){var g=m;m=W_({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(f){var v=m;m=oU(n,m,f,s,h),n.disposeIntermediateTensorInfo(v)}return m}},SV={kernelName:"GatherNd",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=pC(r.shape),i=a.shape,s=i[i.length-1],u=Ky(tT(r,a),4),c=u[0],l=u[1],d=u[2],p=u[3];if(0===l)return n.makeTensorInfo(c,r.dtype,[]);var f=sR(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,l,s,d,p,r.shape,o);return n.makeTensorInfo(c,r.dtype,f.values)}},EV={kernelName:"GatherV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims;S_([a,o],"gatherV2");var u=s;null==s&&(u=0);var c=pC(o.shape),l=tA(a,o,bC(i,a.shape)[0],u),d=iU({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),p=iU({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}}),f=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize],h=n.bufferSync(p),m=uR(n.bufferSync(d),h,f);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.makeTensorInfo(l.outputShape,m.dtype,m.values)}},TV={kernelName:"IFFT",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=pC(r.shape),o=r.shape[r.shape.length-1],i=iU({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=mV(i,!0,n),u=iU({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}},NV={kernelName:"IsFinite",backendName:"cpu",kernelFunc:q_("IsFinite",(function(e){return Number.isFinite(e)?1:0}),"bool")},AV={kernelName:"IsInf",backendName:"cpu",kernelFunc:q_("IsInf",(function(e){return Math.abs(e)===1/0?1:0}),"bool")},_V={kernelName:"IsNan",backendName:"cpu",kernelFunc:q_("IsNan",(function(e){return Number.isNaN(e)?1:0}),"bool")},RV={kernelName:"LinSpace",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.backend,n=e.attrs,r=vR(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},OV={kernelName:"Log1p",backendName:"cpu",kernelFunc:q_("Log1p",(function(e){return Math.log1p(e)}))},FV={kernelName:"LogicalAnd",backendName:"cpu",kernelFunc:L_("LogicalAnd",N_((function(e,t){return e&&t})),null,"bool")},MV={kernelName:"LogicalNot",backendName:"cpu",kernelFunc:q_("LogicalNot",(function(e){return e?0:1}),"bool")},DV={kernelName:"LogicalOr",backendName:"cpu",kernelFunc:L_("LogicalOr",N_((function(e,t){return e||t})),null,"bool")},BV={kernelName:"LRN",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta;S_(a,"LRN");var c=a.shape[3],l=c-1,d=n.data.get(a.dataId).values,p=pC(a.shape),f=new Float32Array(p);function h(e){for(var t=e%c,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,l),a=0;n<=r;n++){var i=d[n];a+=i*i}return a}for(var m=0;m<p;m++){var g=h(m),v=d[m]*Math.pow(i+s*g,-u);f[m]=v}return n.makeTensorInfo(a.shape,a.dtype,f)}},PV={kernelName:"LRNGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;S_(i,"LRNGrad");for(var d=pC(i.shape),p=i.shape[3],f=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,m=n.data.get(o.dataId).values,g=new Float32Array(d),v=d,y=0;y<v;y++){for(var b=y%p,x=y-b+Math.max(0,b-s),k=y-b+Math.min(p,b+s+1),w=0,I=x;I<k;I++)w+=Math.pow(h[I],2);w=c*w+u;for(var C=x;C<k;C++){var S=-2*c*l*h[C]*m[y]/w;y===C&&(S+=Math.pow(w,-l)),S*=f[y],g[C]+=S}}return n.makeTensorInfo(i.shape,a.dtype,g)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function LV(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,i=r.keepDims,s=n,u=a.shape,c=u.length,l=bC(o,u),d=l,p=JT(d,c),f=s.data.get(a.dataId).values;if(null!=p){for(var h=new Array(c),m=0;m<h.length;m++)h[m]=u[p[m]];f=FR(f,u,a.dtype,p,h),d=tN(d.length,c),u=h}S_(a,"max"),ZT("max",d,c);var g=Ky(YT(u,d),2),v=g[0],y=xR(f,pC(g[1]),v,a.dtype),b=s.write(y,v,a.dtype),x=v;return i&&(x=$T(v,l)),{dataId:b,shape:x,dtype:a.dtype}}var UV={kernelName:"Max",backendName:"cpu",kernelFunc:LV},VV={kernelName:"MaxPool",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;S_(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;cC(LT(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c,l=NT(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&fC(l.inShape,l.outShape))c=O_({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,p=_C(a.shape),f=IU(d,a.shape,a.dtype,p,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,f.values)}return c}},WV={kernelName:"MaxPool3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;S_(a,"maxPool3d");var l=AT(a.shape,o,i,1,s,u,c),d=SU(n.data.get(a.dataId).values,a.shape,a.dtype,_C(a.shape),l,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}},zV={kernelName:"MaxPool3DGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;S_([a,o],"maxPool3DGrad");for(var l=AT(o.shape,i,s,1,u,c),d=function(e,t){for(var n=ZE(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.front,f=t.padInfo.top,h=t.padInfo.left,m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var v=0;v<t.outDepth;++v){for(var y=v*r-p,b=y;b<0;)b+=i;for(var x=Math.min(t.inDepth,c+y),k=0;k<t.outHeight;++k){for(var w=k*a-f,I=w;I<0;)I+=s;for(var C=Math.min(t.inHeight,l+w),S=0;S<t.outWidth;++S){for(var E=S*o-h,T=E;T<0;)T+=u;for(var N=Math.min(t.inWidth,d+E),A=Number.NEGATIVE_INFINITY,_=-1,R=b;R<x;R+=i)for(var O=R-y,F=I;F<C;F+=s)for(var M=F-w,D=T;D<N;D+=u){var B=D-E,P=e.get(m,R,F,D,g);P>=A&&(A=P,_=O*l*d+M*l+B)}n.set(_,m,v,k,S,g)}}}return n}(n.bufferSync(o),l),p=l.strideDepth,f=l.strideHeight,h=l.strideWidth,m=l.dilationDepth,g=l.dilationHeight,v=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,k=y-1-l.padInfo.front,w=x-1-l.padInfo.left,I=b-1-l.padInfo.top,C=ZE(o.shape,"float32"),S=n.bufferSync(a),E=0;E<l.batchSize;++E)for(var T=0;T<l.inChannels;++T)for(var N=0;N<l.inDepth;++N)for(var A=0;A<l.inHeight;++A)for(var _=0;_<l.inWidth;++_){for(var R=N-k,O=A-I,F=_-w,M=0,D=0;D<y;D+=m){var B=(R+D)/p;if(!(B<0||B>=l.outDepth||Math.floor(B)!==B))for(var P=0;P<b;P+=g){var L=(O+P)/f;if(!(L<0||L>=l.outHeight||Math.floor(L)!==L))for(var U=0;U<x;U+=v){var V=(F+U)/h;if(!(V<0||V>=l.outWidth||Math.floor(V)!==V)){var W=y*b*x-1-d.get(E,B,L,V,T)===D*b*x+P*x+U?1:0;0!==W&&(M+=S.get(E,B,L,V,T)*W)}}}}C.set(M,E,N,A,_,T)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}},jV={kernelName:"MaxPoolGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;S_([o,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=NT(i.shape,s,u,1,c,l),p=n.data.get(i.dataId).values,f=ZE(d.outShape,i.dtype,CU(p,i.shape,i.dtype,d).values),h=d.strideHeight,m=d.strideWidth,g=d.dilationHeight,v=d.dilationWidth,y=d.effectiveFilterHeight,b=d.effectiveFilterWidth,x=b-1-d.padInfo.left,k=y-1-d.padInfo.top,w=ZE(i.shape,"float32"),I=n.data.get(a.dataId).values,C=ZE(a.shape,"float32",I),S=0;S<d.batchSize;++S)for(var E=0;E<d.inChannels;++E)for(var T=0;T<d.inHeight;++T)for(var N=0;N<d.inWidth;++N){for(var A=T-k,_=N-x,R=0,O=0;O<y;O+=g){var F=(A+O)/h;if(!(F<0||F>=d.outHeight||Math.floor(F)!==F))for(var M=0;M<b;M+=v){var D=(_+M)/m;if(!(D<0||D>=d.outWidth||Math.floor(D)!==D)){var B=y*b-1-f.get(S,F,D,E)===O*b+M?1:0;0!==B&&(R+=C.get(S,F,D,E)*B)}}}w.set(R,S,T,N,E)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},HV={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,i=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;S_(a,"MaxPoolWithArgmax");var l=c.data.get(a.dataId).values,d=NT(a.shape,o,i,[1,1],s),p=Ky(function(e,t,n,r,a){var o=IU(e,0,n,_C(t),a,"max"),i=CU(e,t,n,a,!0,r);return[o.values,i.values]}(l,a.shape,a.dtype,u,d),2),f=p[0],h=p[1],m=c.write(f,d.outShape,a.dtype),g=c.write(h,d.outShape,a.dtype);return[{dataId:m,shape:d.outShape,dtype:a.dtype},{dataId:g,shape:d.outShape,dtype:"int32"}]}},GV={kernelName:"Mean",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=bC(o,a.shape),u=pC(YT(a.shape,s)[1]),c=[],l=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(l);var d=B_({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(d);var p=fV({inputs:{a:d,b:l},backend:n});c.push(p);var f=iV({inputs:{x:p},backend:n,attrs:{axis:o,keepDims:i}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),f}},qV={kernelName:"Min",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;S_(a,"min");var s=bC(o,a.shape),u=s,c=JT(u,a.shape.length),l=a;null!=c&&(l=MR({inputs:{x:a},backend:n,attrs:{perm:c}}),u=tN(u.length,a.shape.length)),ZT("min",u,l.shape.length);for(var d=Ky(YT(l.shape,u),2),p=d[0],f=pC(d[1]),h=FC(pC(p),l.dtype),m=n.data.get(l.dataId).values,g=0;g<h.length;++g){for(var v=g*f,y=m[v],b=0;b<f;++b){var x=m[v+b];(Number.isNaN(x)||x<y)&&(y=x)}h[g]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(p,l.dtype,h);if(i){var w=iU({inputs:{x:k},backend:n,attrs:{shape:$T(p,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},KV={kernelName:"MirrorPad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode;S_(a,"mirrorPad");for(var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=o.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===i?0:1,d=n.data.get(a.dataId).values,p=a.shape.length,f=_C(a.shape),h=pC(s),m=s.length,g=_C(s),v=kC(a.dtype,h),y=0;y<h;y++){for(var b=PC(y,m,g),x=0;x<m;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);var k=BC(b=b.map((function(e,t){return e-u[t]})),p,f);v[y]=d[k]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},XV={kernelName:"Mod",backendName:"cpu",kernelFunc:L_("Mod",N_((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function QV(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.dim,i=a.shape.length,s=o;if(-1===s&&(s=i-1),s!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(i," and dim was ").concat(s));var u=bC([s],a.shape),c=LV({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=$T(c.shape,u),d=iU({inputs:{x:c},backend:n,attrs:{shape:l}}),p=nO({inputs:{a:a,b:d},backend:n}),f=tR({inputs:{x:p},backend:n}),h=iV({inputs:{x:f},backend:n,attrs:{axis:u,keepDims:!1}}),m=iU({inputs:{x:h},backend:n,attrs:{shape:l}}),g=fV({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}var YV={kernelName:"Softmax",backendName:"cpu",kernelFunc:QV},$V={kernelName:"Multinomial",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized;S_(a,"multinomial");for(var u=s?a:QV({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],d=n.data.get(u.dataId).values,p=[c,o],f=FC(pC(p),"int32"),h=0;h<c;++h){var m=h*l,g=new Float32Array(l-1);g[0]=d[m];for(var v=1;v<g.length;++v)g[v]=g[v-1]+d[m+v];for(var y=pN.alea(i.toString()),b=h*o,x=0;x<o;++x){var k=y();f[b+x]=g.length;for(var w=0;w<g.length;w++)if(k<g[w]){f[b+x]=w;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(p,"int32",f)}},ZV=xN,JV={kernelName:"NonMaxSuppressionV3",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;S_(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,d=ZV(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},eW=kN,tW={kernelName:"NonMaxSuppressionV4",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;S_(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,p=eW(l,d,i,s,u,c),f=p.selectedIndices,h=p.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},nW=wN,rW={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;S_(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,p=nW(l,d,i,s,u,c),f=p.selectedIndices,h=p.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},aW={kernelName:"OneHot",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue;S_(a,"oneHot");var u=pC(a.shape),c=new Float32Array(u*o);c.fill(s);for(var l=n.data.get(a.dataId).values,d=0;d<u;++d)l[d]>=0&&l[d]<o&&(c[d*o+l[d]]=i);return n.makeTensorInfo([].concat(Xy(a.shape),[o]),"int32",c)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function oW(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=M_({inputs:{input:r},backend:n}),o=oW({inputs:{x:a},backend:n}),i=DU({inputs:{input:r},backend:n}),s=oW({inputs:{x:i},backend:n}),u=A_({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return bV({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var iW={kernelName:"ZerosLike",backendName:"cpu",kernelFunc:oW},sW={kernelName:"OnesLike",backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var o=M_({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=DU({inputs:{input:a},backend:r}),u=oW({inputs:{x:s},backend:r}),c=A_({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return bV({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function uW(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return dV({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){lC(a,e.shape,"All tensors passed to stack must have matching shapes"),cC(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=PU({inputs:t.map((function(e){var t=dV({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var cW={kernelName:"Pack",backendName:"cpu",kernelFunc:uW},lW={kernelName:"PadV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;S_(a,"pad");var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=pC(a.shape),d=a.shape.length,p=_C(a.shape),f=pC(s),h=s.length,m=_C(s),g=kC(a.dtype,f);0!==i&&g.fill(i);for(var v=0;v<l;v++)g[BC(PC(v,d,p).map((function(e,t){return e+u[t]})),h,m)]=c[v];return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},dW={kernelName:"Pow",backendName:"cpu",kernelFunc:L_("Pow",N_((function(e,t){return Math.pow(e,t)})))},pW={kernelName:"Range",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.dtype,i=LR(r,a,n.step,o);return t.makeTensorInfo([i.length],o,i)}},fW={kernelName:"Reciprocal",backendName:"cpu",kernelFunc:q_("Reciprocal",(function(e){return 1/e}))},hW={kernelName:"ResizeBilinear",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size;S_(a,"resizeBilinear");for(var u=_C(a.shape),c=Ky(s,2),l=c[0],d=c[1],p=Ky(a.shape,4),f=p[0],h=p[1],m=p[2],g=p[3],v=n.data.get(a.dataId).values,y=new Float32Array(pC([f,l,d,g])),b=[o&&l>1?h-1:h,o&&d>1?m-1:m],x=[o&&l>1?l-1:l,o&&d>1?d-1:d],k=0,w=b[0]/x[0],I=b[1]/x[1],C=0;C<f;C++)for(var S=0;S<l;S++){var E;E=i?w*(S+.5)-.5:w*S;for(var T=Math.max(0,Math.floor(E)),N=E-T,A=Math.min(h-1,Math.ceil(E)),_=C*u[0]+T*u[1],R=C*u[0]+A*u[1],O=0;O<d;O++){var F;F=i?I*(O+.5)-.5:I*O;for(var M=Math.max(0,Math.floor(F)),D=F-M,B=Math.min(m-1,Math.ceil(F)),P=_+M*u[2],L=R+M*u[2],U=_+B*u[2],V=R+B*u[2],W=0;W<g;W++){var z=v[P+W],j=v[L+W],H=z+(v[U+W]-z)*D,G=H+(j+(v[V+W]-j)*D-H)*N;y[k++]=G}}}return n.makeTensorInfo([f,l,d,g],"float32",y)}},mW={kernelName:"ResizeBilinearGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners;S_([o,a],"resizeBilinearGrad");for(var s=_C(a.shape),u=Ky(a.shape,4),c=u[0],l=u[1],d=u[2],p=u[3],f=Ky(o.shape,3),h=f[1],m=f[2],g=new Float32Array(c*l*d*p),v=[i&&h>1?l-1:l,i&&m>1?d-1:d],y=[i&&h>1?h-1:h,i&&m>1?m-1:m],b=v[0]/y[0],x=v[1]/y[1],k=n.data.get(o.dataId).values,w=0,I=0;I<c;I++)for(var C=I*s[0],S=0;S<h;S++)for(var E=S*b,T=Math.floor(E),N=Math.min(Math.ceil(E),l-1),A=C+T*s[1],_=C+N*s[1],R=E-T,O=1-R,F=0;F<m;F++)for(var M=F*x,D=Math.floor(M),B=Math.min(Math.ceil(M),d-1),P=M-D,L=1-P,U=A+D*s[2],V=A+B*s[2],W=_+D*s[2],z=_+B*s[2],j=O*L,H=O*P,G=R*L,q=R*P,K=0;K<p;K++){var X=k[w++];g[U+K]+=X*j,g[V+K]+=X*H,g[W+K]+=X*G,g[z+K]+=X*q}return n.makeTensorInfo([c,d,l,p],"float32",g)}},gW={kernelName:"ResizeNearestNeighbor",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size;S_(a,"resizeNearestNeighbor");for(var u=_C(a.shape),c=Ky(s,2),l=c[0],d=c[1],p=Ky(a.shape,4),f=p[0],h=p[1],m=p[2],g=p[3],v=n.data.get(a.dataId).values,y=new Float32Array(f*l*d*g),b=[o&&l>1?h-1:h,o&&d>1?m-1:m],x=[o&&l>1?l-1:l,o&&d>1?d-1:d],k=b[0]/x[0],w=b[1]/x[1],I=0,C=0;C<f;C++)for(var S=C*u[0],E=0;E<l;E++){var T=i?k*(E+.5):k*E,N=Math.min(h-1,o?Math.round(T):Math.floor(T));i&&(N=Math.max(0,N));for(var A=S+N*u[1],_=0;_<d;_++){var R=i?w*(_+.5):w*_,O=Math.min(m-1,o?Math.round(R):Math.floor(R));i&&(O=Math.max(0,O));for(var F=A+O*u[2],M=0;M<g;M++){var D=v[F+M];y[I++]=D}}}return n.makeTensorInfo([f,l,d,g],a.dtype,y)}},vW={kernelName:"ResizeNearestNeighborGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners;S_([o,a],"resizeNearestNeighborGrad");for(var s=_C(a.shape),u=_C(o.shape),c=Ky(a.shape,4),l=c[0],d=c[1],p=c[2],f=c[3],h=Ky(o.shape,3),m=h[1],g=h[2],v=new Float32Array(l*d*p*f),y=n.data.get(o.dataId).values,b=[i&&m>1?d-1:d,i&&g>1?p-1:p],x=[i&&m>1?m-1:m,i&&g>1?g-1:g],k=b[0]/x[0],w=b[1]/x[1],I=1/k,C=1/w,S=2*Math.ceil(I)+2,E=2*Math.ceil(C)+2,T=0;T<l;T++)for(var N=T*s[0],A=0;A<d;A++)for(var _=N+A*s[1],R=Math.floor(A*I),O=Math.floor(R-S/2),F=0;F<p;F++)for(var M=_+F*s[2],D=Math.floor(F*C),B=Math.floor(D-E/2),P=0;P<f;P++){for(var L=0,U=0;U<S;U++){var V=U+O;if(!(V<0||V>=m)){var W=N+V*u[1],z=V*k;if(A===Math.min(d-1,i?Math.round(z):Math.floor(z)))for(var j=0;j<E;j++){var H=j+B;if(!(H<0||H>=g)){var G=W+H*u[2],q=H*w;F===Math.min(p-1,i?Math.round(q):Math.floor(q))&&(L+=y[G+P])}}}}v[M+P]=L}return n.makeTensorInfo(a.shape,a.dtype,v)}},yW={kernelName:"Reverse",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims;S_(a,"reverse");var i=a.shape.length,s=bC(o,a.shape);if(0===i)return O_({inputs:{x:a},backend:n});for(var u=new YS(a.shape,a.dtype),c=n.bufferSync(a),l=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[c.get.apply(c,Xy(n))].concat(Xy(t)))},d=0;d<u.size;d++)l(d);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},bW={kernelName:"RotateWithOffset",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,i=n.fillValue,s=n.center,u=r,c=kC(a.dtype,pC(a.shape)),l=Ky(a.shape,4),d=l[0],p=l[1],f=l[2],h=l[3],m=Ky(_N(s,p,f),2),g=m[0],v=m[1],y=Math.sin(o),b=Math.cos(o),x=u.data.get(a.dataId).values,k=0;k<d;k++)for(var w=k*f*p*h,I=0;I<p;I++)for(var C=I*(f*h),S=0;S<f;S++)for(var E=S*h,T=0;T<h;T++){var N=[d,I,S,T],A=N[2],_=N[1],R=(A-g)*b-(_-v)*y,O=(A-g)*y+(_-v)*b;R=Math.round(R+g),O=Math.round(O+v);var F=i;"number"!=typeof i&&(F=3===T?255:i[T]),R>=0&&R<f&&O>=0&&O<p&&(F=x[w+O*(f*h)+R*h+T]),c[w+C+E+T]=F}return{dataId:u.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},xW={kernelName:"Round",backendName:"cpu",kernelFunc:q_("Round",(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1}))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function kW(e,t,n,r,a,o,i,s,u,c){var l=[r/a,a],d=e.values,p=t.values;if(0===r)return ZE(n,t.dtype);var f=ZE(l,t.dtype);f.values.fill(u);for(var h=0;h<o;h++){for(var m=[],g=0,v=0;v<i;v++){var y=d[h*i+v];m.push(y),g+=y*s[v]}if(g<0||g>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var b=0;b<a;b++)c?f.values[g*a+b]+=p[h*a+b]:f.values[g*a+b]=0===t.rank?p[0]:p[h*a+b]}return f}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var wW={kernelName:"ScatterNd",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=rT(0,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,p=s.outputSize,f=kW(n.bufferSync(a),n.bufferSync(o),i,p,l,c,u,d,0,!0);return n.makeTensorInfo(i,f.dtype,f.values)}},IW={kernelName:"Select",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e;S_([r,a,o],"select");for(var i=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=sE(a.dtype,o.dtype),d=FC(pC(a.shape),l),p=0,f=0===i||i>1||1===a.shape.length?1:pC(a.shape.slice(1)),h=0;h<s.length;h++)for(var m=0;m<f;m++)1===s[h]?d[p++]=u[h]:d[p++]=c[h];return n.makeTensorInfo(a.shape,l,d)}},CW={kernelName:"Selu",backendName:"cpu",kernelFunc:q_("Selu",(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)}))},SW={kernelName:"Sign",backendName:"cpu",kernelFunc:q_("Sign",(function(e){return e<0?-1:e>0?1:0}))},EW={kernelName:"Sin",backendName:"cpu",kernelFunc:q_("Sin",(function(e){return Math.sin(e)}))},TW={kernelName:"Sinh",backendName:"cpu",kernelFunc:q_("Sinh",(function(e){return Math.sinh(e)}))},NW=Math.log(1.1920928955078125e-7)+2,AW={kernelName:"Softplus",backendName:"cpu",kernelFunc:q_("Softplus",(function(e){var t=e>-NW,n=e<NW,r=Math.exp(e);return n?r:t?e:Math.log(1+r)}))},_W={kernelName:"SpaceToBatchND",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;S_([a],"spaceToBatchND");var s=pC(o),u=[[0,0]];u.push.apply(u,Xy(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=lW.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=RN(l.shape,o,s,!1),p=ON(d.length,o.length,!1),f=FN(l.shape,o,s,!1),h=iU({inputs:{x:l},backend:n,attrs:{shape:d}}),m=MR({inputs:{x:h},backend:n,attrs:{perm:p}}),g=iU({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}},RW={kernelName:"SparseFillEmptyRows",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,i=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values[0],d=Ky(HR(s,r.shape,r.dtype,u,a.dtype,c,l),5),p=d[0],f=d[1],h=d[2],m=d[3],g=d[4];return[n.makeTensorInfo(f,r.dtype,p),n.makeTensorInfo([f[0]],a.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}},OW={kernelName:"SparseReshape",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var i=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(o.dataId).values),c=Ky(GR(s,r.shape,r.dtype,i,u),3),l=c[0],d=c[1],p=c[2];return[n.makeTensorInfo(d,r.dtype,l),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}},FW={kernelName:"SparseSegmentMean",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(o.shape));var i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,c=Ky(qR(i,r.shape,r.dtype,s,u,!0),2),l=c[0],d=c[1];return n.makeTensorInfo(d,r.dtype,l)}},MW={kernelName:"SparseSegmentSum",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(o.shape));var i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,c=Ky(qR(i,r.shape,r.dtype,s,u),2),l=c[0],d=c[1];return n.makeTensorInfo(d,r.dtype,l)}},DW={kernelName:"SparseToDense",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,u=rT(0,a,s),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,p=u.strides,f=u.outputSize,h=kW(n.bufferSync(a),n.bufferSync(o),s,f,d,l,c,p,n.data.get(i.dataId).values[0],!1);return n.makeTensorInfo(s,h.dtype,h.values)}},BW={kernelName:"SplitV",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=bC(r.axis,a.shape)[0],s=ZN(a,o,i),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=Xy(c);t[i]=e;var r=zR({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[i]+=e,r}))}},PW={kernelName:"Sqrt",backendName:"cpu",kernelFunc:q_("Sqrt",(function(e){return Math.sqrt(e)}))},LW={kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;S_(r,"square");for(var o=a.data.get(r.dataId).values,i=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];i[s]=u*u}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},UW={kernelName:"Step",backendName:"cpu",kernelFunc:q_("Step",(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha}))},VW={kernelName:"StridedSlice",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,d=r.newAxisMask,p=r.shrinkAxisMask;S_(a,"stridedSlice");var f,h=bT(a.shape,o,i,s,u,c,l,d,p),m=h.nonStrided,g=h.$begin,v=h.$strides,y=h.size,b=h.newShape,x=h.outShape,k=iU({inputs:{x:a},backend:n,attrs:{shape:b}});if(m){var w=zR({inputs:{x:k},backend:n,attrs:{begin:g,size:y}});f=iU({inputs:{x:w},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(w)}else if(x.some((function(e){return 0===e})))f=n.makeTensorInfo(x,a.dtype,[]);else{var I=QR(x,n.bufferSync(k),v,g);f=n.makeTensorInfo(I.shape,I.dtype,I.values)}var C=iU({inputs:{x:f},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(f),C}},WW={kernelName:"StringNGrams",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,i=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,d=t.dataSplits,p=Ky($R(n.data.get(l.dataId).values,n.data.get(d.dataId).values,a,o,i,s,u,c),2),f=p[0],h=p[1];return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",h)]}},zW={kernelName:"StringSplit",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var i=Ky(JR(n.data.get(a.dataId).values,n.data.get(o.dataId).values[0],r),3),s=i[0],u=i[1],c=i[2],l=u.length;return[n.makeTensorInfo([l,2],"int32",s),n.makeTensorInfo([l],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(c))]}},jW={kernelName:"StringToHashBucketFast",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=eO(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",o)}},HW={kernelName:"Tan",backendName:"cpu",kernelFunc:q_("Tan",(function(e){return Math.tan(e)}))},GW=q_("Tanh",(function(e){return Math.tanh(e)}));
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function qW(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return iC(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return iC(0,n,t-1)}(e,t);case"nearest":return function(e,t){return iC(0,e,t-1)}(e,t);case"constant":default:return function(e,t){return e}(e)}}function KW(e,t,n,r,a,o,i,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[i*r+s*a+u*o+c]:l}function XW(e,t,n,r,a,o,i,s,u,c,l){return KW(e,t,n,r,a,o,i,Math.round(s),Math.round(u),c,l)}function QW(e,t,n,r,a,o,i,s,u,c,l){var d=Math.floor(s),p=Math.floor(u),f=d+1,h=p+1;return(f-s)*((h-u)*KW(e,t,n,r,a,o,i,d,p,c,l)+(u-p)*KW(e,t,n,r,a,o,i,d,h,c,l))+(s-d)*((h-u)*KW(e,t,n,r,a,o,i,f,p,c,l)+(u-p)*KW(e,t,n,r,a,o,i,f,h,c,l))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
for(var YW,$W,ZW,JW=[lU,T_,dU,pU,z_,fU,hU,mU,gU,vU,yU,bU,xU,kU,wU,EU,TU,NU,AU,cU,_U,RU,OU,P_,Q_,FU,__,MU,LU,WU,zU,VU,HU,GU,jU,qU,KU,XU,QU,YU,$U,JU,eV,tV,nV,rV,oV,aV,hV,uV,KL,cV,J_,lV,nR,pV,aR,yV,xV,kV,iR,wV,IV,CV,SV,EV,lR,pR,F_,TV,BU,NV,AV,_V,QL,hR,gR,RV,bR,OV,FV,MV,DV,BV,PV,wR,VV,WV,zV,jV,HV,UV,GV,qV,CR,KV,XV,$V,NR,_R,JV,tW,rW,OR,aW,sW,cW,lW,dW,ZL,PR,pW,D_,fW,eU,nU,sU,hW,mW,gW,vW,yW,bW,xW,VR,wW,IW,CW,aU,SW,EW,TW,jR,YV,AW,_W,RW,OW,FW,MW,DW,BW,PW,LW,XR,UW,VW,WW,zW,jW,rO,sV,HW,{kernelName:"Tanh",backendName:"cpu",kernelFunc:GW},{kernelName:"Tile",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;S_(a,"tile");var i=aO(n.bufferSync(a),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},{kernelName:"TopK",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted;S_(a,"topk");var s=Ky(sO(n.data.get(a.dataId).values,a.shape,a.dtype,o,i),2),u=s[0],c=s[1];return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}},DR,{kernelName:"Transform",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2021 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=t.transforms,i=n.interpolation,s=n.fillMode,u=n.fillValue,c=n.outputShape,l=Ky(a.shape,4),d=l[0],p=l[1],f=l[2],h=l[3],m=Ky(null!=c?c:[p,f],2),g=m[0],v=m[1],y=[d,g,v,h],b=_C(a.shape),x=b[0],k=b[1],w=b[2],I=kC(a.dtype,pC(y));I.fill(u);for(var C=r.data.get(a.dataId).values,S=r.data.get(o.dataId).values,E=0;E<d;++E){for(var T=1===o.shape[0]?S:S.subarray(8*E,8*E+8),N=0;N<g;++N)for(var A=0;A<v;++A)for(var _=0;_<h;++_){var R=void 0,O=T[6]*A+T[7]*N+1;if(0!==O){var F=(T[0]*A+T[1]*N+T[2])/O,M=(T[3]*A+T[4]*N+T[5])/O,D=qW(F,f,s),B=qW(M,p,s);switch(i){case"nearest":R=XW(C,p,f,x,k,w,E,B,D,_,u);break;case"bilinear":R=QW(C,p,f,x,k,w,E,B,D,_,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got ".concat(i))}I[E*x+N*k+A*w+_]=R}}return r.makeTensorInfo(y,a.dtype,I)}return{dataId:r.write(I,y,a.dtype),shape:a.shape,dtype:a.dtype}}},{kernelName:"Unique",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;S_(o,"unique");var i=uO(r.data.get(o.dataId).values,a,o.shape,o.dtype),s=i.outputValues,u=i.outputShape,c=i.indices;return[r.makeTensorInfo(u,o.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}},{kernelName:"Unpack",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape.length,s=a.shape[o],u=new Array(i-1),c=0,l=0;l<i;l++)l!==o&&(u[c++]=a.shape[l]);var d=new Array(i).fill(0),p=a.shape.slice();p[o]=1;for(var f=new Array(s),h=0;h<f.length;h++){d[o]=h;var m=zR({inputs:{x:a},backend:n,attrs:{begin:d,size:p}});f[h]=iU({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return f}},{kernelName:"UnsortedSegmentSum",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments;S_(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-o.shape.length,l=o,d=0;d<c;++d){var p=dV({inputs:{input:l},backend:n,attrs:{dim:d+1}});l=p,u.push(p)}for(var f=0;f<i;++f){var h=PS(f,"int32"),m=n.makeTensorInfo([],"int32",h),g=Z_({inputs:{a:m,b:l},backend:n}),v=B_({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),y=TR({inputs:{a:v,b:a},backend:n}),b=iV({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(m),u.push(g),u.push(v),u.push(y),u.push(b)}var x=uW({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},iW],ez=0,tz=JW;ez<tz.length;ez++){var nz=tz[ez];$C(nz)}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(YW||(YW={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid"}($W||($W={}));var rz={kernelName:"_FusedMatMul",backendName:"wasm",setupFunc:function(e){ZW=e.wasm.cwrap("_FusedMatMul",null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,s=t.preluActivationWeights;if("float32"!==a.dtype||"float32"!==o.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var u=r.transposeA,c=r.transposeB,l=r.activation,d=r.leakyreluAlpha,p=n.dataIdMap.get(a.dataId).id,f=n.dataIdMap.get(o.dataId).id,h=0;if(null!=i){var m=n.dataIdMap.get(i.dataId);if(1!==m.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got rank ".concat(m.shape.length,"."));h=m.id}var g=null==s?0:n.dataIdMap.get(s.dataId).id,v=$W[l];if(null==v)throw new Error("".concat(l," activation not yet supported for FusedConv2D in the wasm backend."));var y=u?a.shape[2]:a.shape[1],b=c?o.shape[1]:o.shape[2],x=a.shape[0],k=n.makeOutput([x,y,b],a.dtype),w=n.dataIdMap.get(k.dataId).id,I=new Uint8Array(new Int32Array(a.shape).buffer),C=new Uint8Array(new Int32Array(o.shape).buffer);return ZW(p,I,a.shape.length,f,C,o.shape.length,u,c,v,h,g,d||0,w),k}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function az(e){var t;return{kernelName:e,backendName:"wasm",setupFunc:function(n){t=n.wasm.cwrap(e,null,["number","number"])},kernelFunc:function(e){var n=e.backend,r=e.inputs.x,a=n.dataIdMap.get(r.dataId).id,o=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(o.dataId).id;return 0===pC(o.shape)||t(a,i),o}}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var oz=az("Abs");
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function iz(e,t,n){var r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(a){var o=a.backend,i=a.inputs,s=i.a,u=i.b,c=o.dataIdMap.get(s.dataId).id,l=o.dataIdMap.get(u.dataId).id,d=null!=n?n:s.dtype,p=HT(s.shape,u.shape),f=o.makeOutput(p,d);if(0===pC(p))return f;var h=new Uint8Array(new Int32Array(s.shape).buffer),m=new Uint8Array(new Int32Array(u.shape).buffer),g=o.dataIdMap.get(f.dataId).id,v=function(){return r(c,h,s.shape.length,l,m,u.shape.length,YW[s.dtype],g)};if(t&&"float32"===s.dtype)return v(),f;var y=zT(s.shape,p),b=zT(u.shape,p),x=y.every((function(e,t){return e===t})),k=b.every((function(e,t){return e===t}));if(x&&k)return v(),f;throw new Error("Broadcasting along outer dims is not yet supported for ".concat(s.dtype," ").concat(e,"."))}}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var sz,uz=iz("Add",!0),cz={kernelName:"AddN",backendName:"wasm",setupFunc:function(e){sz=e.wasm.cwrap("AddN",null,["array","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===pC(r.shape))return r;var a=t.map((function(e){return n.dataIdMap.get(e.dataId).id})),o=new Uint8Array(new Int32Array(a).buffer),i=n.dataIdMap.get(r.dataId).id;return sz(o,a.length,YW[r.dtype],i),r}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function lz(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var dz,pz={kernelName:"Identity",backendName:"wasm",kernelFunc:lz};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function fz(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=Ky(function(e,t){for(var n=[],r=[],a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(var o=0;o<r.length;++o){for(var i=-1,s=0;s<r.length;++s)r[s]>=o&&(-1===i||r[i]>r[s])&&(i=s);r[i]=o}return[n,r]}(t.x.shape,r.perm),2),o=a[0],i=a[1],s=!0,u=0;u<i.length;u++)i[u]!==u&&(s=!1);var c=function(e,t){for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),l={dataId:t.x.dataId,shape:o,dtype:t.x.dtype};if(s){var d=lz({inputs:t,backend:n});return d.shape=c,d}var p=n.makeOutput(c,l.dtype),f=n.dataIdMap.get(l.dataId).id,h=n.dataIdMap.get(p.dataId).id,m=new Uint8Array(new Int32Array(i).buffer),g=new Uint8Array(new Int32Array(l.shape).buffer);return dz(f,g,l.shape.length,YW[l.dtype],h,m,i.length),p}var hz,mz={kernelName:"Transpose",backendName:"wasm",kernelFunc:fz,setupFunc:function(e){dz=e.wasm.cwrap("Transpose",null,["number","array","number","number","number","array","number"])}};
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function gz(e,t,n){var r=e.shape,a=e.shape.length,o=bC(t,r),i=o,s=JT(i,a),u=null,c=!1;if(null!=s){for(var l=new Array(a),d=0;d<l.length;d++)l[d]=r[s[d]];i=tN(i.length,a),u=fz({inputs:{x:e},attrs:{perm:s},backend:n});var p=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(u.dataId).id!==p&&(c=!0)}return{transposed:u,originalAxes:o,axes:i,inputWasTransposed:c}}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var vz,yz,bz,xz={kernelName:"All",backendName:"wasm",setupFunc:function(e){hz=e.wasm.cwrap("All",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=i,c=gz(i,a,t),l=c.transposed,d=c.axes,p=c.originalAxes,f=c.inputWasTransposed;f&&(u=l,s=t.dataIdMap.get(l.dataId).id),ZT("all",d,u.shape.length);var h=Ky(YT(u.shape,d),2),m=h[0],g=pC(h[1]),v=t.makeOutput(m,i.dtype);if(0!==pC(u.shape)){var y=t.dataIdMap.get(v.dataId).id;hz(s,g,y)}if(f&&t.disposeData(l.dataId),o){var b=$T(v.shape,p);v.shape=b}return v}},kz={kernelName:"Any",backendName:"wasm",setupFunc:function(e){vz=e.wasm.cwrap("Any",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=i,c=gz(i,a,t),l=c.transposed,d=c.axes,p=c.originalAxes,f=c.inputWasTransposed;f&&(u=l,s=t.dataIdMap.get(l.dataId).id),ZT("any",d,u.shape.length);var h=Ky(YT(u.shape,d),2),m=h[0],g=pC(h[1]),v=t.makeOutput(m,i.dtype);if(0!==pC(u.shape)){var y=t.dataIdMap.get(v.dataId).id;vz(s,g,y)}if(f&&t.disposeData(l.dataId),o){var b=$T(v.shape,p);v.shape=b}return v}},wz={kernelName:"ArgMax",backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.axis,a=n.x,o=t.dataIdMap.get(a.dataId).id,i=o,s=a,u=gz(a,r,t),c=u.transposed,l=u.axes,d=u.inputWasTransposed;if(d){var p=t.dataIdMap.get(c.dataId).id;p!==o&&(s=c,i=p)}var f=s.shape.slice(0,-1),h=t.makeOutput(f,"int32"),m=t.dataIdMap.get(h.dataId).id,g=pC(h.shape),v=s.shape[l[0]];return yz(i,YW[s.dtype],g,v,m),d&&t.disposeData(c.dataId),h},setupFunc:function(e){yz=e.wasm.cwrap("ArgMax",null,["number","number","number","number","number"])}},Iz={kernelName:"AvgPool",backendName:"wasm",setupFunc:function(e){bz=e.wasm.cwrap("AvgPool",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=r.dataIdMap.get(a.dataId).id,i=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=NT(a.shape,i,s,1,u,c),d=l.filterHeight,p=l.filterWidth,f=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,g=l.padInfo.left,v=l.strideHeight,y=l.strideWidth,b=l.inChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(l.dataFormat,"'. Please use 'channelsLast'."));if(1!==l.dilationWidth||1!==l.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], got [".concat(l.dilationHeight,", ").concat(l.dilationWidth,"]."));var x=r.makeOutput(l.outShape,"float32"),k=r.dataIdMap.get(x.dataId).id;return bz(o,a.shape[0],a.shape[1],a.shape[2],d,p,f,h,m,g,v,y,b,k),x}};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Cz(e){var t=e.inputs,n=e.attrs,r=t.x,a=n.shape,o=pC(r.shape),i=yC(a,o);return cC(o===pC(i),(function(){return"new shape: ".concat(i,", old shape: ").concat(r.shape,". New shape and old shape must have the same number of elements.")})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:i,dtype:r.dtype}}var Sz,Ez={kernelName:"Reshape",backendName:"wasm",kernelFunc:Cz},Tz={kernelName:"BatchMatMul",backendName:"wasm",setupFunc:function(e){Sz=e.wasm.cwrap("BatchMatMul",null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=r.transposeA,s=r.transposeB;if("float32"!==a.dtype||"float32"!==o.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");var u=a.shape.length,c=o.shape.length,l=i?a.shape[u-2]:a.shape[u-1],d=s?o.shape[c-1]:o.shape[c-2],p=i?a.shape[u-1]:a.shape[u-2],f=s?o.shape[c-2]:o.shape[c-1],h=a.shape.slice(0,-2),m=o.shape.slice(0,-2),g=pC(h),v=pC(m);cC(u>=2&&c>=2&&(g===v||1===g||1===v),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (".concat(h,") and (").concat(m,").")}));var y=(g>v?a.shape.slice(0,-2):o.shape.slice(0,-2)).concat([p,f]);cC(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (").concat(d,") of Tensors with shapes ").concat(a.shape," and ").concat(o.shape," and transposeA=").concat(i," and transposeB=").concat(s," must match.")}));var b=s?[v,f,d]:[v,d,f],x=Cz({inputs:{x:a},backend:n,attrs:{shape:i?[g,l,p]:[g,p,l]}}),k=Cz({inputs:{x:o},backend:n,attrs:{shape:b}}),w=n.dataIdMap.get(x.dataId).id,I=n.dataIdMap.get(k.dataId).id,C=i?x.shape[2]:x.shape[1],S=s?k.shape[1]:k.shape[2],E=Math.max(g,v),T=n.makeOutput([E,C,S],x.dtype),N=n.dataIdMap.get(T.dataId).id,A=new Uint8Array(new Int32Array(x.shape).buffer),_=new Uint8Array(new Int32Array(k.shape).buffer);return Sz(w,A,x.shape.length,I,_,k.shape.length,i,s,N),n.disposeData(x.dataId),n.disposeData(k.dataId),T.shape=y,T}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Nz(e){var t=e.inputs.x,n=e.attrs,r=n.begin,a=n.size,o=e.backend,i=Ky(yT(t,r,a),2),s=i[0],u=i[1],c=gT(t.shape,s,u),l=o.readSync(t.dataId),d=o.makeOutput(u,t.dtype),p=_C(t.shape),f=o.dataIdMap.get(d.dataId);if(c){var h=vT(s,p);return"string"===t.dtype?f.stringBytes=l.slice(h,h+pC(u)):o.typedArrayFromHeap(d).set(l.subarray(h,h+pC(u))),d}if("string"===t.dtype){var m=WR(l,s,u,t.shape,t.dtype);return f.stringBytes=m,d}var g=o.typedArrayFromHeap(d),v=t.shape.length;if(2===v)!function(e,t,n,r,a){for(var o=0,i=r[0],s=r[1],u=i+a[0],c=i;c<u;c++){var l=c*t+s;n.set(e.subarray(l,l+a[1]),o),o+=a[1]}}(l,p[0],g,s,u);else if(3===v)!function(e,t,n,r,a,o){for(var i=0,s=a[0],u=a[1],c=a[2],l=s+o[0],d=u+o[1],p=s;p<l;p++)for(var f=u;f<d;f++){var h=p*t+f*n+c;r.set(e.subarray(h,h+o[2]),i),i+=o[2]}}(l,p[0],p[1],g,s,u);else if(4===v)!function(e,t,n,r,a,o,i){for(var s=0,u=o[0],c=o[1],l=o[2],d=u+i[0],p=c+i[1],f=l+i[2],h=o[3],m=u;m<d;m++)for(var g=c;g<p;g++)for(var v=l;v<f;v++){var y=m*t+g*n+v*r+h;a.set(e.subarray(y,y+i[3]),s),s+=i[3]}}(l,p[0],p[1],p[2],g,s,u);else{var y=WR(l,s,u,t.shape,t.dtype);g.set(y)}return d}var Az={kernelName:"Slice",backendName:"wasm",kernelFunc:Nz},_z={kernelName:"BatchToSpaceND",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops,s=o.reduce((function(e,t){return e*t})),u=RN(a.shape,o,s),c=ON(u.length,o.length),l=FN(a.shape,o,s),d=MN(i,o.length),p=DN(l,i,o.length),f=Cz({inputs:{x:a},backend:n,attrs:{shape:u}}),h=fz({inputs:{x:f},backend:n,attrs:{perm:c}}),m=Nz({inputs:{x:Cz({inputs:{x:h},backend:n,attrs:{shape:l}})},backend:n,attrs:{begin:d,size:p}});return n.disposeData(f.dataId),n.disposeData(h.dataId),n.disposeData(f.dataId),m}};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Rz(e){var t=e.inputs.x,n=e.attrs.dtype,r=e.backend,a=r.makeOutput(t.shape,n),o=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(o),a}var Oz,Fz={kernelName:"Cast",backendName:"wasm",kernelFunc:Rz},Mz=az("Ceil"),Dz={kernelName:"ClipByValue",backendName:"wasm",setupFunc:function(e){Oz=e.wasm.cwrap("ClipByValue",null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.clipValueMin,i=r.clipValueMax,s=n.dataIdMap.get(a.dataId).id,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(u.dataId).id;return Oz(s,o,i,c),u}};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Bz(e){var t=e.inputs,n=e.backend,r=bC(e.attrs.axis,t[0].shape)[0],a=NN(t.map((function(e){return e.shape})),r),o=t.filter((function(e){return pC(e.shape)>0}));if(1===o.length)return lz({inputs:{x:o[0]},backend:n});var i=n.makeOutput(a,t[0].dtype);if(0===pC(a))return i;if(TN(o.map((function(e){return e.shape})),r),"string"===o[0].dtype){var s=o.map((function(e){var t=pC(e.shape.slice(r));return Cz({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),u=s.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}}));a=NN(s.map((function(e){return e.shape})),1);var c=1===s[0].shape[0],l=Y_(u,a,t[0].dtype,c),d=NN(o.map((function(e){return e.shape})),r);return i.shape=d,n.dataIdMap.get(i.dataId).stringBytes=aA(l),s.forEach((function(e){return n.disposeData(e.dataId)})),i}for(var p=pC(o[0].shape.slice(0,r)),f=0,h=o.map((function(e){var t=pC(e.shape.slice(r));return f+=t,t})),m=o.map((function(e){return n.typedArrayFromHeap(e)})),g=n.typedArrayFromHeap(i),v=0;v<p;v++)for(var y=v*f,b=0;b<m.length;b++){var x=h[b],k=v*x,w=m[b].subarray(k,k+x);g.set(w,y),y+=x}return i}var Pz,Lz,Uz,Vz,Wz={kernelName:"Concat",backendName:"wasm",kernelFunc:Bz},zz={kernelName:"Conv2D",backendName:"wasm",setupFunc:function(e){Pz=e.wasm.cwrap("Conv2D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(o.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,p=UT(n.dataFormat),f=_T(a.shape,o.shape,u,c,l,d,!1,p),h=f.filterHeight,m=f.filterWidth,g=f.padInfo.top,v=f.padInfo.right,y=f.padInfo.bottom,b=f.padInfo.left,x=f.dilationHeight,k=f.dilationWidth,w=f.strideHeight,I=f.strideWidth,C=f.inChannels,S=f.outChannels,E="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'".concat(f.dataFormat,"'. Please use 'channelsLast'."));var T=r.makeOutput(f.outShape,"float32"),N=r.dataIdMap.get(T.dataId).id;return Pz(i,a.shape[0],a.shape[1],a.shape[2],s,h,m,g,v,y,b,E,x,k,w,I,C,S,N),T}},jz={kernelName:"Conv2DBackpropInput",backendName:"wasm",setupFunc:function(e){Lz=e.wasm.cwrap("Conv2DBackpropInput",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.dy,o=n.filter,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.inputShape,d=UT(u),p=_T(l,o.shape,i,1,s,c,!1,d),f=p.batchSize,h=p.filterHeight,m=p.filterWidth,g=p.inChannels,v=p.inHeight,y=p.inWidth,b=p.outChannels,x=p.outHeight,k=p.outWidth,w=p.strideHeight,I=p.strideWidth,C=h-1-p.padInfo.top,S=m-1-p.padInfo.left,E="channelsLast"===p.dataFormat,T=_C(p.inShape),N=_C(a.shape),A=Ky(_C(o.shape),3),_=A[0],R=A[1],O=A[2],F=T[0],M=E?T[1]:T[2],D=E?T[2]:1,B=E?1:T[1],P=N[0],L=E?N[1]:N[2],U=E?N[2]:1,V=E?1:N[1],W=t.makeOutput(p.inShape,"float32"),z=t.dataIdMap.get(W.dataId).id,j=t.dataIdMap.get(a.dataId).id,H=t.dataIdMap.get(o.dataId).id;return Lz(j,H,f,h,m,v,y,g,x,k,b,w,I,C,S,_,R,O,F,M,D,B,P,L,U,V,z),W}},Hz=az("Cos"),Gz=az("Cosh");
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(Uz||(Uz={}));var qz,Kz,Xz,Qz={kernelName:"CropAndResize",backendName:"wasm",setupFunc:function(e){Vz=e.wasm.cwrap("CropAndResize",null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,o=a.method,i=a.extrapolationValue,s=a.cropSize,u=r.image,c=r.boxes,l=r.boxInd,d=c.shape[0],p=Ky(s,2),f=p[0],h=p[1],m=[d,f,h,u.shape[3]],g=n.dataIdMap.get(u.dataId);"float32"!==u.dtype&&(t=Rz({backend:n,inputs:{x:u},attrs:{dtype:"float32"}}),g=n.dataIdMap.get(t.dataId));var v=g.id,y=n.dataIdMap.get(c.dataId).id,b=n.dataIdMap.get(l.dataId).id,x=n.makeOutput(m,"float32"),k=n.dataIdMap.get(x.dataId).id,w=new Uint8Array(new Int32Array(u.shape).buffer);return Vz(v,y,b,d,w,f,h,Uz[o],i,k),null!=t&&n.disposeData(t.dataId),x}},Yz={kernelName:"Cumsum",backendName:"wasm",setupFunc:function(e){qz=e.wasm.cwrap("Cumsum",null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse,u=a.shape.length;cC("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumsum does not support ".concat(a.dtype," tensors in the WASM backend")}));var c=JT([o],u),l=a;null!==c&&(l=fz({inputs:{x:a},attrs:{perm:c},backend:n}));var d=tN(1,u)[0];ZT("cumsum",[d],u);var p=n.makeOutput(l.shape,l.dtype),f=l.shape[d],h=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(p.dataId).id;qz(h,i?1:0,s?1:0,f,m,YW[a.dtype]);var g=p;return null!==c&&(g=fz({inputs:{x:p},attrs:{perm:eN(c)},backend:n}),n.disposeData(l.dataId),n.disposeData(p.dataId)),g}},$z={kernelName:"DepthToSpace",backendName:"wasm",setupFunc:function(e){Kz=e.wasm.cwrap("DepthToSpace",null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,o=r.blockSize,i=r.dataFormat;cC(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));var s=a.shape[0],u="NHWC"===i?a.shape[1]:a.shape[2],c="NHWC"===i?a.shape[2]:a.shape[3],l="NHWC"===i?a.shape[3]:a.shape[1],d=u*o,p=c*o,f=l/(o*o),h="NHWC"===i?[s,d,p,f]:[s,f,d,p],m=t.makeOutput(h,"float32"),g=t.dataIdMap.get(a.dataId).id,v=new Uint8Array(new Int32Array(_C(a.shape)).buffer),y=new Uint8Array(new Int32Array(h).buffer),b=new Uint8Array(new Int32Array(_C(h)).buffer),x=t.dataIdMap.get(m.dataId).id;return Kz(g,o,"NHWC"===i?1:0,v,a.shape.length-1,y,b,h.length,x),m}},Zz={kernelName:"DepthwiseConv2dNative",backendName:"wasm",setupFunc:function(e){Xz=e.wasm.cwrap("DepthwiseConv2dNative",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(o.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,p=null==c?[1,1]:c,f=_T(a.shape,o.shape,u,p,l,d,!0),h=f.filterHeight,m=f.filterWidth,g=f.padInfo.top,v=f.padInfo.right,y=f.padInfo.bottom,b=f.padInfo.left,x=f.dilationHeight,k=f.dilationWidth,w=f.strideHeight,I=f.strideWidth,C=f.inChannels,S=f.outChannels,E="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'".concat(f.dataFormat,"'. Please use 'channelsLast'."));var T=r.makeOutput(f.outShape,"float32"),N=r.dataIdMap.get(T.dataId).id;return Xz(i,a.shape[0],a.shape[1],a.shape[2],s,h,m,g,v,y,b,E,x,k,w,I,C,S,N),T}},Jz=iz("Equal",!1,"bool"),ej=az("Exp");
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function tj(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.input,o=n.dim,i=a.shape.length,s=a.shape.slice(),u=o;return o<0&&(cC(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+o+1),s.splice(u,0,1),Cz({inputs:{x:a},backend:r,attrs:{shape:s}})}var nj,rj,aj,oj,ij,sj,uj,cj,lj,dj,pj,fj,hj,mj={kernelName:"ExpandDims",backendName:"wasm",kernelFunc:tj},gj={kernelName:"Fill",backendName:"wasm",kernelFunc:function(e){var t=e.attrs,n=t.shape,r=t.value,a=t.dtype,o=e.backend,i=o.makeOutput(n,a);return o.typedArrayFromHeap(i).fill(r),i}},vj={kernelName:"FlipLeftRight",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n.makeOutput(r.shape,r.dtype),o=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(a.dataId).id,s=Ky(r.shape,4),u=s[0],c=s[1],l=s[2],d=s[3];return nj(o,u,c,l,d,i),a},setupFunc:function(e){nj=e.wasm.cwrap("FlipLeftRight",null,["number","number","number","number","number","number"])}},yj=az("Floor"),bj=iz("FloorDiv",!1),xj={kernelName:"FusedBatchNorm",backendName:"wasm",setupFunc:function(e){rj=e.wasm.cwrap("FusedBatchNorm",null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.varianceEpsilon,a=n.x,o=n.mean,i=n.variance,s=n.offset,u=n.scale,c=t.dataIdMap.get(a.dataId).id,l=t.dataIdMap.get(o.dataId).id,d=t.dataIdMap.get(i.dataId).id,p=null!=s?t.dataIdMap.get(s.dataId).id:0,f=null!=u?t.dataIdMap.get(u.dataId).id:0,h=t.makeOutput(a.shape,a.dtype);if(0===pC(a.shape))return h;var m=t.dataIdMap.get(h.dataId).id;return rj(c,l,d,p,f,r,m),h}},kj={kernelName:"FusedConv2D",backendName:"wasm",setupFunc:function(e){aj=e.wasm.cwrap("FusedConv2D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,p=n.dimRoundingMode,f=n.activation,h=n.leakyreluAlpha,m=_T(a.shape,o.shape,u,l,c,p),g=$W[f];if(null==g)throw new Error("".concat(f," activation not yet supported for FusedConv2D in the wasm backend."));var v=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(o.dataId).id,b=m.outChannels,x=0;if(null!=i){var k=r.dataIdMap.get(i.dataId);if(1!==k.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got rank ".concat(k.shape.length,"."));if(k.shape[0]!==b)throw new Error("FusedConv2D bias shape (".concat(k.shape,") does not match the number of output channels (").concat(b,")"));x=k.id}var w=m.filterHeight,I=m.filterWidth,C=m.padInfo.top,S=m.padInfo.right,E=m.padInfo.bottom,T=m.padInfo.left,N=m.dilationHeight,A=m.dilationWidth,_=m.strideHeight,R=m.strideWidth,O=m.inChannels,F="SAME"===m.padInfo.type?1:0,M=m.batchSize,D=m.inHeight,B=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));var P=r.makeOutput(m.outShape,"float32"),L=r.dataIdMap.get(P.dataId).id,U=null==s?0:r.dataIdMap.get(s.dataId).id;return aj(v,M,D,B,y,w,I,x,C,S,E,T,F,N,A,_,R,O,b,g,U,h||0,L),P}},wj={kernelName:"FusedDepthwiseConv2D",backendName:"wasm",setupFunc:function(e){oj=e.wasm.cwrap("FusedDepthwiseConv2D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,p=n.dimRoundingMode,f=n.activation,h=n.leakyreluAlpha,m=_T(a.shape,o.shape,u,l,c,p,!0),g=$W[f];if(null==g)throw new Error("".concat(f," activation not yet supported for FusedDepthwiseConv2D in the wasm backend."));var v=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(o.dataId).id,b=m.outChannels,x=0;if(null!=i){var k=r.dataIdMap.get(i.dataId);if(1!==k.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got rank ".concat(k.shape.length,"."));if(k.shape[0]!==b)throw new Error("FusedDepthwiseConv2D bias shape (".concat(k.shape,") does not match the number of output channels (").concat(b,")"));x=k.id}var w=m.filterHeight,I=m.filterWidth,C=m.padInfo.top,S=m.padInfo.right,E=m.padInfo.bottom,T=m.padInfo.left,N=m.dilationHeight,A=m.dilationWidth,_=m.strideHeight,R=m.strideWidth,O=m.inChannels,F="SAME"===m.padInfo.type?1:0,M=m.batchSize,D=m.inHeight,B=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));var P=r.makeOutput(m.outShape,"float32"),L=r.dataIdMap.get(P.dataId).id,U=null==s?0:r.dataIdMap.get(s.dataId).id;return oj(v,M,D,B,y,w,I,x,C,S,E,T,F,N,A,_,R,O,b,g,U,h||0,L),P}},Ij={kernelName:"GatherNd",backendName:"wasm",setupFunc:function(e){ij=e.wasm.cwrap("GatherNd",null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.params,a=n.indices,o=Ky(tT(r,a),4),i=o[0],s=o[1],u=o[2],c=o[3],l=t.makeOutput(i,r.dtype);if(0===s)return l;var d=a.shape,p=d[d.length-1],f=t.dataIdMap.get(r.dataId).id,h=t.dataIdMap.get(a.dataId).id,m=new Uint8Array(new Int32Array(c).buffer),g=t.dataIdMap.get(l.dataId).id;return ij(f,YW[r.dtype],h,s,p,u,m,g),l}},Cj={kernelName:"GatherV2",backendName:"wasm",setupFunc:function(e){sj=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,o=n.indices,i=r.axis,s=r.batchDims,u=tA(a,o,bC(i,a.shape)[0],s),c=Cz({inputs:{x:a},attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]},backend:t}),l=pC(o.shape),d=Cz({inputs:{x:o},attrs:{shape:[u.batchSize,l/u.batchSize]},backend:t}),p=[u.batchSize,u.outerSize,l/u.batchSize,u.sliceSize],f=t.makeOutput(p,a.dtype);if(0===pC(a.shape))return f;var h=c.shape.length-1,m=t.dataIdMap.get(c.dataId).id,g=t.dataIdMap.get(d.dataId).id,v=t.dataIdMap.get(f.dataId).id,y=new Uint8Array(new Int32Array(_C(c.shape)).buffer),b=new Uint8Array(new Int32Array(_C(p)).buffer);return sj(m,YW[a.dtype],y,h,g,u.batchSize,b,v),t.disposeData(c.dataId),t.disposeData(d.dataId),f.shape=u.outputShape,f}},Sj=iz("Greater",!1,"bool"),Ej=iz("GreaterEqual",!1,"bool"),Tj={kernelName:"LeakyRelu",backendName:"wasm",setupFunc:function(e){uj=e.wasm.cwrap("LeakyRelu",null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs.x,n=e.attrs.alpha,r=e.backend,a=r.dataIdMap.get(t.dataId).id,o=r.makeOutput(t.shape,t.dtype);if(0!==pC(t.shape)){var i=r.dataIdMap.get(o.dataId).id;uj(a,n,i)}return o}},Nj=iz("Less",!1,"bool"),Aj=iz("LessEqual",!1,"bool"),_j=az("Log"),Rj=iz("LogicalAnd",!1,"bool"),Oj={kernelName:"Max",backendName:"wasm",setupFunc:function(e){cj=e.wasm.cwrap("Max",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.reductionIndices,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=i,c=gz(i,a,t),l=c.transposed,d=c.axes,p=c.originalAxes,f=c.inputWasTransposed;f&&(u=l,s=t.dataIdMap.get(l.dataId).id),ZT("max",d,u.shape.length);var h=Ky(YT(u.shape,d),2),m=h[0],g=pC(h[1]),v=t.makeOutput(m,i.dtype);if(0!==pC(u.shape)){var y=t.dataIdMap.get(v.dataId).id;cj(s,g,y)}if(f&&t.disposeData(l.dataId),o){var b=$T(v.shape,p);v.shape=b}return v}},Fj=iz("Maximum",!1),Mj={kernelName:"MaxPool",backendName:"wasm",setupFunc:function(e){lj=e.wasm.cwrap("MaxPool",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=r.dataIdMap.get(a.dataId).id,i=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=NT(a.shape,i,s,1,u,c),d=l.filterHeight,p=l.filterWidth,f=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,g=l.padInfo.left,v=l.dilationHeight,y=l.dilationWidth,b=l.strideHeight,x=l.strideWidth,k=l.inChannels,w=l.outChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(l.dataFormat,"'. Please use 'channelsLast'."));var I=r.makeOutput(l.outShape,"float32"),C=r.dataIdMap.get(I.dataId).id;return lj(o,a.shape[0],a.shape[1],a.shape[2],d,p,f,h,m,g,v,y,b,x,k,w,C),I}},Dj={kernelName:"Mean",backendName:"wasm",setupFunc:function(e){dj=e.wasm.cwrap("Mean",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=gz(i,a,t),d=l.transposed,p=l.axes,f=l.originalAxes,h=l.inputWasTransposed,m=p;if(h){var g=t.dataIdMap.get(d.dataId).id;g!==s&&(c=d,u=g,m=tN(m.length,c.shape.length))}ZT("mean",m,c.shape.length);var v=Ky(YT(c.shape,m),2),y=v[0],b=pC(v[1]),x=c;"float32"!==c.dtype&&(x=Rz({backend:t,inputs:{x:c},attrs:{dtype:"float32"}}),u=t.dataIdMap.get(x.dataId).id);var k=t.makeOutput(y,"float32");if(0!==pC(c.shape)){var w=t.dataIdMap.get(k.dataId).id;dj(u,b,w)}if(h&&t.disposeData(d.dataId),o){var I=$T(k.shape,f);k.shape=I}return"float32"!==c.dtype&&t.disposeData(x.dataId),k}},Bj={kernelName:"Min",backendName:"wasm",setupFunc:function(e){pj=e.wasm.cwrap("Min",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=gz(i,a,t),d=l.transposed,p=l.axes,f=l.originalAxes,h=l.inputWasTransposed;if(h){var m=t.dataIdMap.get(d.dataId).id;m!==s&&(c=d,u=m)}ZT("min",p,c.shape.length);var g=Ky(YT(c.shape,p),2),v=g[0],y=pC(g[1]),b=t.makeOutput(v,c.dtype);if(0!==pC(c.shape)){var x=t.dataIdMap.get(b.dataId).id;pj(u,y,x)}if(h&&t.disposeData(d.dataId),o){var k=$T(b.shape,f);b.shape=k}return b}},Pj=iz("Minimum",!1);
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(fj||(fj={}));var Lj,Uj={kernelName:"MirrorPad",backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,o=r.mode,i=a.map((function(e,n){return e[0]+t.shape[n]+e[1]})),s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(i,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),p=a.map((function(e){return e[1]})),f=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(p).buffer);return hj(s,l,t.shape.length,YW[t.dtype],f,h,fj[o],c),u},setupFunc:function(e){hj=e.wasm.cwrap("MirrorPad",null,["number","array","number","number","array","array","number","number"])}},Vj=iz("Multiply",!0),Wj=az("Neg");
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function zj(e,t){var n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],o=n[2],i=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:o,pValidOutputs:i}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
for(var jj,Hj,Gj,qj,Kj,Xj,Qj,Yj,$j,Zj,Jj,eH,tH,nH,rH,aH,oH,iH,sH,uH={kernelName:"NonMaxSuppressionV3",backendName:"wasm",setupFunc:function(e){Lj=e.wasm.cwrap("NonMaxSuppressionV3","number",["number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,o=r.maxOutputSize,i=r.scoreThreshold,s=n.boxes,u=n.scores,c=t.dataIdMap.get(s.dataId).id,l=t.dataIdMap.get(u.dataId).id,d=zj(t,Lj(c,l,o,a,i)),p=d.pSelectedIndices,f=d.selectedSize,h=d.pSelectedScores,m=d.pValidOutputs;return t.wasm._free(h),t.wasm._free(m),t.makeOutput([f],"int32",p)}},cH={kernelName:"NonMaxSuppressionV4",backendName:"wasm",setupFunc:function(e){jj=e.wasm.cwrap("NonMaxSuppressionV4","number",["number","number","number","number","number","bool"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,o=r.maxOutputSize,i=r.scoreThreshold,s=r.padToMaxOutputSize,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,p=zj(t,jj(l,d,o,a,i,s)),f=p.pSelectedIndices,h=p.selectedSize,m=p.pSelectedScores,g=p.pValidOutputs;return t.wasm._free(m),[t.makeOutput([h],"int32",f),t.makeOutput([],"int32",g)]}},lH={kernelName:"NonMaxSuppressionV5",backendName:"wasm",setupFunc:function(e){Hj=e.wasm.cwrap("NonMaxSuppressionV5","number",["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,o=r.maxOutputSize,i=r.scoreThreshold,s=r.softNmsSigma,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,p=zj(t,Hj(l,d,o,a,i,s)),f=p.pSelectedIndices,h=p.selectedSize,m=p.pSelectedScores,g=p.pValidOutputs;return t.wasm._free(g),[t.makeOutput([h],"int32",f),t.makeOutput([h],"float32",m)]}},dH=iz("NotEqual",!1,"bool"),pH={kernelName:"OneHot",backendName:"wasm",setupFunc:function(e){Gj=e.wasm.cwrap("OneHot",null,["number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue,u=n.makeOutput([].concat(Xy(a.shape),[o]),"int32"),c=n.dataIdMap.get(u.dataId).id,l=n.dataIdMap.get(a.dataId).id;return Gj(l,o,i,s,c),u}},fH={kernelName:"OnesLike",backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}},hH={kernelName:"Pack",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return tj({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){lC(a,e.shape,"All tensors passed to stack must have matching shapes"),cC(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=Bz({inputs:t.map((function(e){var t=tj({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeData(e.dataId)})),s}},mH={kernelName:"PadV2",backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,o=r.constantValue,i=a.map((function(e,n){return e[0]+t.shape[n]+e[1]})),s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(i,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),p=a.map((function(e){return e[1]})),f=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(p).buffer);return qj(s,l,t.shape.length,YW[t.dtype],f,h,o,c),u},setupFunc:function(e){qj=e.wasm.cwrap("PadV2",null,["number","array","number","number","array","array","number","number"])}},gH=iz("Pow",!1),vH={kernelName:"Prelu",backendName:"wasm",setupFunc:function(e){Kj=e.wasm.cwrap("Prelu",null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(a.dataId).id,s=n.makeOutput(r.shape,"float32"),u=n.dataIdMap.get(s.dataId).id;return Kj(o,i,u),s}},yH={kernelName:"Prod",backendName:"wasm",setupFunc:function(e){Xj=e.wasm.cwrap("Prod",null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=gz(i,a,t),d=l.transposed,p=l.axes,f=l.originalAxes,h=l.inputWasTransposed,m=p;if(h){var g=t.dataIdMap.get(d.dataId).id;g!==s&&(c=d,u=g,m=tN(m.length,c.shape.length))}ZT("prod",m,c.shape.length);var v=Ky(YT(c.shape,m),2),y=v[0],b=pC(v[1]),x=t.makeOutput(y,c.dtype);if(0!==pC(c.shape)){var k=t.dataIdMap.get(x.dataId).id;Xj(u,b,YW[x.dtype],k)}if(h&&t.disposeData(d.dataId),o){var w=$T(x.shape,f);x.shape=w}return x}},bH={kernelName:"Range",backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,s=LR(r,a,o,i),u=t.makeOutput([s.length],i);return t.typedArrayFromHeap(u).set(s),u}},xH=iz("RealDiv",!0),kH=az("Relu"),wH=az("Relu6"),IH={kernelName:"ResizeBilinear",backendName:"wasm",setupFunc:function(e){Qj=e.wasm.cwrap("ResizeBilinear",null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,o=r.images,i=a.alignCorners,s=a.halfPixelCenters,u=Ky(a.size,2),c=u[0],l=u[1],d=Ky(o.shape,4),p=d[0],f=d[1],h=d[2],m=d[3],g=[p,c,l,m],v=n.dataIdMap.get(o.dataId);"float32"!==v.dtype&&(t=Rz({backend:n,inputs:{x:o},attrs:{dtype:"float32"}}),v=n.dataIdMap.get(t.dataId));var y=v.id,b=n.makeOutput(g,"float32");if(0===pC(o.shape))return b;var x=n.dataIdMap.get(b.dataId).id;return Qj(y,p,f,h,m,c,l,i?1:0,s?1:0,x),null!=t&&n.disposeData(t.dataId),b}},CH={kernelName:"Reverse",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=bC(r.dims,a.shape);if(0===a.shape.length)return lz({inputs:{x:a},backend:n});var i=n.makeOutput(a.shape,a.dtype),s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(i.dataId).id,c=new Uint8Array(new Int32Array(o).buffer),l=new Uint8Array(new Int32Array(a.shape).buffer);Yj(s,c,o.length,l,a.shape.length,u);var d=Cz({inputs:{x:i},attrs:{shape:a.shape},backend:n});return n.disposeData(i.dataId),d},setupFunc:function(e){Yj=e.wasm.cwrap("Reverse",null,["number","array","number","array","number","number"])}},SH={kernelName:"RotateWithOffset",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=r.radians,i=r.fillValue,s=r.center,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(a.dataId).id,l=n.dataIdMap.get(u.dataId).id,d=Ky(a.shape,4),p=d[0],f=d[1],h=d[2],m=d[3],g=Ky(_N(s,f,h),2),v=g[0],y=g[1],b="number"==typeof i?[i,i,i,0===i?0:255]:[].concat(Xy(i),[255]),x=new Uint8Array(new Int32Array(b).buffer);return $j(c,p,f,h,m,o,v,y,x,b.length,l),u},setupFunc:function(e){$j=e.wasm.cwrap("RotateWithOffset",null,["number","number","number","number","number","number","number","number","array","number","number"])}},EH=az("Round"),TH=az("Rsqrt"),NH={kernelName:"ScatterNd",backendName:"wasm",setupFunc:function(e){Zj=e.wasm.cwrap("ScatterNd",null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.indices,o=n.updates,i=r.shape,s=t.makeOutput(i,o.dtype);if(0===pC(i))return s;var u=rT(0,a,i),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,p=u.strides,f=u.outputSize,h=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(o.dataId).id,g=new Uint8Array(new Int32Array(p).buffer),v=t.dataIdMap.get(s.dataId).id;return Zj(h,m,YW[o.dtype],c,l,d,g,f,v),s}},AH={kernelName:"Select",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(o.dataId).id,c=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(c.dataId).id,d=r.shape.length,p=a.shape.length,f=0===d||d>1||1===p?1:pC(a.shape.slice(1));return Jj(i,s,u,f,l),c},setupFunc:function(e){Jj=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},_H={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){eH=e.wasm.cwrap("Sigmoid",null,["number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.x,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),o=t.dataIdMap.get(a.dataId).id;return 0===pC(a.shape)||eH(r,o),a}},RH=az("Sin"),OH={kernelName:"Softmax",backendName:"wasm",setupFunc:function(e){tH=e.wasm.cwrap("Softmax",null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.logits,r=e.attrs.dim,a=t.dataIdMap.get(n.dataId).id,o=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(o.dataId).id,s=n.shape[r],u=pC(n.shape)/s;return 0===pC(o.shape)||tH(a,i,s,u),o}},FH={kernelName:"SpaceToBatchND",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings,s=pC(o),u=[[0,0]];u.push.apply(u,Xy(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=mH.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=RN(l.shape,o,s,!1),p=ON(d.length,o.length,!1),f=FN(l.shape,o,s,!1),h=Cz({inputs:{x:l},backend:n,attrs:{shape:d}}),m=fz({inputs:{x:h},backend:n,attrs:{perm:p}}),g=Cz({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeData(l.dataId),n.disposeData(h.dataId),n.disposeData(m.dataId),g}},MH={kernelName:"SplitV",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.numOrSizeSplits,i=bC(n.axis,a.shape)[0],s=ZN(a,o,i),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=Xy(c);t[i]=e;var n=Nz({inputs:{x:a},attrs:{begin:u,size:t},backend:r});return u[i]+=e,n}))}},DH=az("Sqrt"),BH=az("Square"),PH=iz("SquaredDifference",!0),LH={kernelName:"Step",backendName:"wasm",setupFunc:function(e){nH=e.wasm.cwrap("Step",null,["number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.alpha,a=n.x,o=t.dataIdMap.get(a.dataId).id,i=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(i.dataId).id;return nH(o,r,s),i}},UH={kernelName:"StridedSlice",backendName:"wasm",setupFunc:function(e){rH=e.wasm.cwrap("StridedSlice",null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,o=r.begin,i=r.end,s=r.strides;null==s&&(s=new Array(o.length));var u=r.beginMask,c=r.endMask,l=r.ellipsisMask,d=r.newAxisMask,p=r.shrinkAxisMask,f=oT(l);if(f.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==l&&0!==d)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==l&&0!==p)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var h=a.shape.length-o.length,m=oT(d),g=a.shape.slice();m.forEach((function(e){o[e]=0,i[e]=1,g.splice(e,0,1)}));var v=Cz({inputs:{x:a},attrs:{shape:g},backend:t}),y=lT(v.shape,f,h,o,i,s,u,c,l),b=y.begin,x=y.end,k=y.strides;o=b,i=x,s=k;var w=oT(p);w.forEach((function(e){i[e]=o[e]+1,s[e]=1}));var I=iT(o,i,s),C=I.filter((function(e,t){return-1===w.indexOf(t)}));if(s.every((function(e){return 1===e}))){var S=Nz({inputs:{x:v},attrs:{begin:o,size:I},backend:t});t.disposeData(v.dataId);var E=Cz({inputs:{x:S},attrs:{shape:C},backend:t});return t.disposeData(S.dataId),E}var T=t.makeOutput(C,"float32");if(!C.some((function(e){return 0===e}))){var N=t.dataIdMap.get(v.dataId).id,A=new Uint8Array(new Int32Array(_C(v.shape)).buffer),_=new Uint8Array(new Int32Array(o).buffer),R=new Uint8Array(new Int32Array(i).buffer),O=new Uint8Array(new Int32Array(s).buffer),F=new Uint8Array(new Int32Array(C).buffer),M=new Uint8Array(new Int32Array(_C(C)).buffer),D=t.dataIdMap.get(T.dataId).id;rH(N,A,v.shape.length,_,R,O,F,M,C.length,D)}t.disposeData(v.dataId);var B=Cz({inputs:{x:T},attrs:{shape:C},backend:t});return t.disposeData(T.dataId),B}},VH=iz("Sub",!0),WH={kernelName:"Sum",backendName:"wasm",setupFunc:function(e){aH=e.wasm.cwrap("Sum",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=gz(i,a,t),d=l.transposed,p=l.axes,f=l.originalAxes,h=l.inputWasTransposed,m=p;if(h){var g=t.dataIdMap.get(d.dataId).id;g!==s&&(c=d,u=g,m=tN(m.length,c.shape.length))}ZT("sum",m,c.shape.length);var v=Ky(YT(c.shape,m),2),y=v[0],b=pC(v[1]),x=t.makeOutput(y,c.dtype);if(0!==pC(c.shape)){var k=t.dataIdMap.get(x.dataId).id;aH(u,b,k)}if(h&&t.disposeData(d.dataId),o){var w=$T(x.shape,f);x.shape=w}return x}},zH=az("Tan"),jH=az("Tanh"),HH=[oz,uz,cz,xz,kz,wz,Iz,Tz,_z,Fz,Mz,Dz,Wz,zz,jz,Hz,Gz,Qz,Yz,$z,Zz,Jz,ej,mj,gj,vj,yj,bj,rz,xj,kj,wj,Ij,Cj,Sj,Ej,pz,Tj,Nj,Aj,_j,Rj,Oj,Fj,Mj,Dj,Bj,Pj,Uj,Vj,Wj,uH,cH,lH,dH,pH,fH,hH,mH,gH,vH,yH,bH,xH,kH,wH,Ez,IH,CH,SH,TH,EH,NH,AH,_H,RH,Az,OH,FH,MH,DH,BH,PH,LH,UH,VH,WH,zH,jH,{kernelName:"Tile",backendName:"wasm",setupFunc:function(e){oH=e.wasm.cwrap("Tile",null,["number","array","number","array","number","number"])},kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=n.dataIdMap.get(a.dataId).id,i=r.reps,s=new Array(a.shape.length),u=0;u<s.length;u++)s[u]=a.shape[u]*i[u];var c=new Uint8Array(new Int32Array(a.shape).buffer),l=new Uint8Array(new Int32Array(s).buffer),d=n.makeOutput(s,a.dtype),p=n.dataIdMap.get(d.dataId).id;return oH(o,c,a.shape.length,l,s.length,YW[d.dtype],p),d}},{kernelName:"TopK",backendName:"wasm",setupFunc:function(e){iH=e.wasm.cwrap("TopK",null,["number","array","number","number","number","bool","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted,s=n.dataIdMap.get(a.dataId).id,u=new Uint8Array(new Int32Array(a.shape).buffer),c=a.shape.slice();c[c.length-1]=o;var l=n.makeOutput(c,a.dtype),d=n.dataIdMap.get(l.dataId).id,p=n.makeOutput(c,"int32"),f=n.dataIdMap.get(p.dataId).id;return iH(s,u,a.shape.length,YW[a.dtype],o,i,d,f),[l,p]}},{kernelName:"Transform",backendName:"wasm",setupFunc:function(e){sH=e.wasm.cwrap("Transform",null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,o=r.image,i=r.transforms,s=a.interpolation,u=a.fillMode,c=a.fillValue,l=a.outputShape,d=Ky(o.shape,4),p=d[0],f=d[1],h=d[2],m=d[3],g=Ky(null!=l?l:[f,h],2),v=g[0],y=g[1],b=[p,v,y,m],x=new Uint8Array(new Int32Array(_C(o.shape)).buffer),k=n.makeOutput(b,o.dtype),w=n.dataIdMap.get(k.dataId).id,I=n.dataIdMap.get(o.dataId).id,C=n.dataIdMap.get(i.dataId).id,S="nearest"===s?1:2;switch(u){case"constant":t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4;break;default:t=1}return sH(I,C,i.shape[0]>1,p,v,y,m,h,f,x,o.shape.length-1,S,t,c,w),k}},mz,{kernelName:"Unpack",backendName:"wasm",kernelFunc:
/**
	   * @license
	   * Copyright 2019 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape[o],s=a.shape.length,u=new Array(s-1),c=0,l=0;l<s;l++)l!==o&&(u[c++]=a.shape[l]);var d=new Array(i),p=new Array(s).fill(0),f=a.shape.slice();f[o]=1;for(var h=0;h<d.length;h++)p[o]=h,d[h]=Nz({inputs:{x:a},attrs:{begin:p,size:f},backend:n});return d.map((function(e){return{dataId:e.dataId,dtype:e.dtype,shape:u}}))}},{kernelName:"ZerosLike",backendName:"wasm",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}}],GH=0,qH=HH
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */;GH<qH.length;GH++){var KH=qH[GH];$C(KH)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var XH=WC();function QH(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}XH.registerFlag("WASM_HAS_SIMD_SUPPORT",Ay(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])));case 1:case"end":return e.stop()}}),e)})))),XH.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",Ay(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!XH.get("IS_NODE")){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.abrupt("return",((new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))));case 6:return e.prev=6,e.t0=e.catch(2),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[2,6]])}))));var YH=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,$H=function(e){return YH.exec(e).slice(1)};function ZH(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,t="/"===r.charAt(0))}return(t?"/":"")+(e=QH(sG(e.split("/"),(function(e){return!!e})),!t).join("/"))||"."}function JH(e){var t=eG(e),n="/"===cG(e,-1);return(e=QH(sG(e.split("/"),(function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function eG(e){return"/"===e.charAt(0)}function tG(){var e=Array.prototype.slice.call(arguments,0);return JH(sG(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))}function nG(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=ZH(e).substr(1),t=ZH(t).substr(1);for(var r=n(e.split("/")),a=n(t.split("/")),o=Math.min(r.length,a.length),i=o,s=0;s<o;s++)if(r[s]!==a[s]){i=s;break}var u=[];for(s=i;s<r.length;s++)u.push("..");return(u=u.concat(a.slice(i))).join("/")}function rG(e){var t=$H(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."}function aG(e,t){var n=$H(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}function oG(e){return $H(e)[3]}var iG={extname:oG,basename:aG,dirname:rG,sep:"/",delimiter:":",relative:nG,join:tG,isAbsolute:eG,normalize:JH,resolve:ZH};function sG(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var uG,cG="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)},lG=Object.freeze({__proto__:null,resolve:ZH,normalize:JH,isAbsolute:eG,join:tG,relative:nG,sep:"/",delimiter:":",dirname:rG,basename:aG,extname:oG,default:iG}),dG=Object.freeze({__proto__:null,default:{}});function pG(){if(void 0===uG){var e=new ArrayBuffer(2),t=new Uint8Array(e),n=new Uint16Array(e);if(t[0]=1,t[1]=2,258===n[0])uG="BE";else{if(513!==n[0])throw new Error("unable to figure out endianess");uG="LE"}}return uG}function fG(){return void 0!==global.location?global.location.hostname:""}function hG(){return[]}function mG(){return 0}function gG(){return Number.MAX_VALUE}function vG(){return Number.MAX_VALUE}function yG(){return[]}function bG(){return"Browser"}function xG(){return void 0!==global.navigator?global.navigator.appVersion:""}function kG(){}function wG(){}function IG(){return"/tmp"}var CG=IG,SG={EOL:"\n",tmpdir:CG,tmpDir:IG,networkInterfaces:kG,getNetworkInterfaces:wG,release:xG,type:bG,cpus:yG,totalmem:vG,freemem:gG,uptime:mG,loadavg:hG,hostname:fG,endianness:pG},EG=Object.freeze({__proto__:null,endianness:pG,hostname:fG,loadavg:hG,uptime:mG,freemem:gG,totalmem:vG,cpus:yG,type:bG,release:xG,networkInterfaces:kG,getNetworkInterfaces:wG,arch:function(){return"javascript"},platform:function(){return"browser"},tmpDir:IG,tmpdir:CG,EOL:"\n",default:SG}),TG=tI(lG),NG=tI(dG),AG=tI(EG),_G=eI((function(e,t){var n,r=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(n=n||__filename),function(e){function t(){return A.buffer!=O&&K(A.buffer),F}function r(){return A.buffer!=O&&K(A.buffer),M}function a(){return A.buffer!=O&&K(A.buffer),D}function o(){return A.buffer!=O&&K(A.buffer),B}function i(){return A.buffer!=O&&K(A.buffer),P}var s,u,c=void 0!==(e=e||{})?e:{};c.ready=new Promise((function(e,t){s=e,u=t}));var l,d={};for(l in c)c.hasOwnProperty(l)&&(d[l]=c[l]);var p,f,h,m,g=function(e,t){throw t};p="object"==("undefined"==typeof window?"undefined":Ty(window)),f="function"==typeof importScripts,h="object"==("undefined"==typeof process?"undefined":Ty(process))&&"object"==Ty(process.versions)&&"string"==typeof process.versions.node,m=!p&&!h&&!f;var v=c.ENVIRONMENT_IS_PTHREAD||!1;v&&(O=c.buffer);var y,b,x,k,w,I="";function C(e){return c.locateFile?c.locateFile(e,I):I+e}if(h){var S;I=f?TG.dirname(I)+"/":__dirname+"/",y=function(e,t){return k||(k=lN),w||(w=TG),e=w.normalize(e),k.readFileSync(e,t?null:"utf8")},x=function(e){var t=y(e,!0);return t.buffer||(t=new Uint8Array(t)),U(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof lt))throw e})),process.on("unhandledRejection",oe),g=function(e){process.exit(e)},c.inspect=function(){return"[Emscripten Module object]"};try{S=NG}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}Jw.Worker=S.Worker}else m?("undefined"!=typeof read&&(y=function(e){return read(e)}),x=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(U("object"==Ty(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"function"==typeof quit&&(g=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(p||f)&&(f?I=self.location.href:"undefined"!=typeof document&&document.currentScript&&(I=document.currentScript.src),void 0!==n&&n&&(I=n),I=0!==I.indexOf("blob:")?I.substr(0,I.lastIndexOf("/")+1):"",h?(y=function(e,t){return k||(k=lN),w||(w=TG),e=w.normalize(e),k.readFileSync(e,t?null:"utf8")},x=function(e){var t=y(e,!0);return t.buffer||(t=new Uint8Array(t)),U(t.buffer),t}):(y=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},f&&(x=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),b=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}));h&&"undefined"==typeof performance&&(Jw.performance=NG.performance);var E,T=c.print||console.log.bind(console),N=c.printErr||console.warn.bind(console);for(l in d)d.hasOwnProperty(l)&&(c[l]=d[l]);d=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&(g=c.quit),c.wasmBinary&&(E=c.wasmBinary);var A,_,R=c.noExitRuntime||!0;"object"!=("undefined"==typeof WebAssembly?"undefined":Ty(WebAssembly))&&oe("no native wasm support detected");var O,F,M,D,B,P,L=!1;function U(e,t){e||oe("Assertion failed: "+t)}function V(e){var t=c["_"+e];return U(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function W(e,t,n,r,a){var o={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);H(e,t=ot(n),n)}return t},array:function(e){var t=ot(e.length);return G(e,t),t}},i=V(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=o[n[c]];l?(0===u&&(u=rt()),s[c]=l(r[c])):s[c]=r[c]}var d=i.apply(null,s);return d=function(e){return"string"===t?j(e):"boolean"===t?Boolean(e):e}(d),0!==u&&at(u),d}function z(e,t,n){for(var r=t+n,a="";!(t>=r);){var o=e[t++];if(!o)return a;if(128&o){var i=63&e[t++];if(192!=(224&o)){var s=63&e[t++];if((o=224==(240&o)?(15&o)<<12|i<<6|s:(7&o)<<18|i<<12|s<<6|63&e[t++])<65536)a+=String.fromCharCode(o);else{var u=o-65536;a+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else a+=String.fromCharCode((31&o)<<6|i)}else a+=String.fromCharCode(o)}return a}function j(e,t){return e?z(r(),e,t):""}function H(e,t,n){return function(e,t,n,r){if(!(r>0))return 0;for(var a=n,o=n+r-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-a}(e,r(),t,n)}function G(e,n){t().set(e,n)}function q(e,t){return e%t>0&&(e+=t-e%t),e}function K(e){O=e,c.HEAP8=F=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=D=new Int32Array(e),c.HEAPU8=M=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=B=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=P=new Float64Array(e)}var X,Q=c.INITIAL_MEMORY||16777216;if(v)A=c.wasmMemory,O=c.buffer;else if(c.wasmMemory)A=c.wasmMemory;else if(!((A=new WebAssembly.Memory({initial:Q/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw N("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),h&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");A&&(O=A.buffer),Q=O.byteLength,K(O);var Y=[],$=[],Z=[],J=[];function ee(){v||pe($)}function te(e){Y.unshift(e)}function ne(e){J.unshift(e)}v||$.push({func:function(){je()}});var re=0,ae=null;function oe(e){c.onAbort&&c.onAbort(e),v&&console.error("Pthread aborting at "+(new Error).stack),N(e+=""),L=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw u(t),t}function ie(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}c.preloadedImages={},c.preloadedAudios={};function se(e){return ie(e,"data:application/octet-stream;base64,")}function ue(e){return ie(e,"file://")}var ce="tfjs-backend-wasm-threaded-simd.wasm";function le(e){try{if(e==ce&&E)return new Uint8Array(E);if(x)return x(e);throw"both async and sync fetching of the wasm failed"}catch(e){oe(e)}}se(ce)||(ce=C(ce));var de={9832:function(){throw"Canceled!"},9850:function(e,t){setTimeout((function(){Ze(e,t)}),0)}};function pe(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?X.get(n)():X.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(c)}}function fe(e,n){if(e<=0||e>t().length||!0&e||n<0)return-28;if(0==n)return 0;n>=2147483647&&(n=1/0);var r=Atomics.load(a(),ct>>2),o=0;if(r==e&&Atomics.compareExchange(a(),ct>>2,r,0)==r&&(o=1,--n<=0))return 1;var i=Atomics.notify(a(),e>>2,n);if(i>=0)return i+o;throw"Atomics.notify returned an unexpected value "+i}function he(e){if(v)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in killThread!";a()[e+12>>2]=0;var t=ve.pthreads[e];t.worker.terminate(),ve.freeThreadData(t),ve.runningWorkers.splice(ve.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}function me(e){if(v)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";var t=ve.pthreads[e];if(t){a()[e+12>>2]=0;var n=t.worker;ve.returnWorkerToPool(n)}}c._emscripten_futex_wake=fe;var ge,ve={unusedWorkers:[],runningWorkers:[],initMainThreadBlock:function(){for(var e=Math.min(4,Math.max(1,(navigator.hardwareConcurrency||1)/2)),t=0;t<e;++t)ve.allocateUnusedWorker()},initRuntime:function(){for(var e=He(228),t=0;t<57;++t)o()[e/4+t]=0;a()[e+12>>2]=e;var n=e+152;a()[n>>2]=n;var r=He(512);for(t=0;t<128;++t)o()[r/4+t]=0;Atomics.store(o(),e+100>>2,r),Atomics.store(o(),e+40>>2,e),nt(e,!f,1),$e(e)},initWorker:function(){},pthreads:{},threadExitHandlers:[],setThreadStatus:function(){},runExitHandlers:function(){for(;ve.threadExitHandlers.length>0;)ve.threadExitHandlers.pop()();v&&Xe()&&Qe()},runExitHandlersAndDeinitThread:function(e,t){Atomics.store(o(),e+56>>2,1),Atomics.store(o(),e+60>>2,0),ve.runExitHandlers(),Atomics.store(o(),e+4>>2,t),Atomics.store(o(),e+0>>2,1),fe(e+0,2147483647),nt(0,0,0)},threadExit:function(e){var t=Xe();t&&(ve.runExitHandlersAndDeinitThread(t,e),v&&postMessage({cmd:"exit"}))},threadCancel:function(){ve.runExitHandlersAndDeinitThread(Xe(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in ve.pthreads)(r=ve.pthreads[e])&&r.worker&&ve.returnWorkerToPool(r.worker);ve.pthreads={};for(var t=0;t<ve.unusedWorkers.length;++t)(n=ve.unusedWorkers[t]).terminate();for(ve.unusedWorkers=[],t=0;t<ve.runningWorkers.length;++t){var n,r=(n=ve.runningWorkers[t]).pthread;ve.freeThreadData(r),n.terminate()}ve.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var t=a()[e.threadInfoStruct+100>>2];a()[e.threadInfoStruct+100>>2]=0,Ge(t),Ge(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&Ge(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){ve.runWithoutMainThreadQueuedCalls((function(){delete ve.pthreads[e.pthread.threadInfoStruct],ve.unusedWorkers.push(e),ve.runningWorkers.splice(ve.runningWorkers.indexOf(e),1),ve.freeThreadData(e.pthread),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){a()[ut>>2]=0;try{e()}finally{a()[ut>>2]=1}},receiveObjectTransfer:function(e){},loadWasmModuleToWorker:function(e,t){e.onmessage=function(n){var r=n.data,a=r.cmd;if(e.pthread&&(ve.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),r.targetThread&&r.targetThread!=Xe()){var i=ve.pthreads[r.targetThread];return i?i.worker.postMessage(n.data,r.transferList):console.error('Internal error! Worker sent a message "'+a+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(ve.currentProxiedOperationCallerThread=void 0)}if("processQueuedMainThreadWork"===a)Ye();else if("spawnThread"===a)Le(n.data);else if("cleanupThread"===a)me(r.thread);else if("killThread"===a)he(r.thread);else if("cancelThread"===a)!function(e){if(v)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cancelThread!";ve.pthreads[e].worker.postMessage({cmd:"cancel"})}(r.thread);else if("loaded"===a)e.loaded=!0,t&&t(e),e.runPthread&&(e.runPthread(),delete e.runPthread);else if("print"===a)T("Thread "+r.threadId+": "+r.text);else if("printErr"===a)N("Thread "+r.threadId+": "+r.text);else if("alert"===a)alert("Thread "+r.threadId+": "+r.text);else if("exit"===a)e.pthread&&Atomics.load(o(),e.pthread.threadInfoStruct+64>>2)&&ve.returnWorkerToPool(e);else if("exitProcess"===a)try{!function(e,t){if(!t||!R||0!==e){if(!t&&v)throw postMessage({cmd:"exitProcess",returnCode:e}),new lt(e);R||(ve.terminateAllThreads(),c.onExit&&c.onExit(e),L=!0),g(e,new lt(e))}}(r.returnCode)}catch(n){if(n instanceof lt)return;throw n}else"cancelDone"===a?ve.returnWorkerToPool(e):"objectTransfer"===a?ve.receiveObjectTransfer(n.data):"setimmediate"===n.data.target?e.postMessage(n.data):N("worker sent an unknown command "+a);ve.currentProxiedOperationCallerThread=void 0},e.onerror=function(e){N("pthread sent an error! "+e.filename+":"+e.lineno+": "+e.message)},h&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("exit",(function(e){}))),e.postMessage({cmd:"load",urlOrBlob:c.mainScriptUrlOrBlob||n,wasmMemory:A,wasmModule:_})},allocateUnusedWorker:function(){var e=C("tfjs-backend-wasm-threaded-simd.worker.js");ve.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==ve.unusedWorkers.length&&(ve.allocateUnusedWorker(),ve.loadWasmModuleToWorker(ve.unusedWorkers[0])),ve.unusedWorkers.length>0?ve.unusedWorkers.pop():null},busySpinWait:function(e){for(var t=performance.now()+e;performance.now()<t;);}};function ye(e,t){for(var n=arguments.length-2,r=rt(),a=n,o=ot(8*a),s=o>>3,u=0;u<n;u++){var c=arguments[2+u];i()[s+u]=c}var l=et(e,a,o,t);return at(r),l}c.establishStackSpace=function(e,t){it(e,t),at(e)},c.getNoExitRuntime=function(){return R},c.invokeEntryPoint=function(e,t){return X.get(e)(t)},ge=h?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:v?function(){return performance.now()-c.__performance_now_clock_drift}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var be=[],xe=[];function ke(e,t){var n;for(xe.length=0,t>>=2;n=r()[e++];){var o=n<105;o&&1&t&&t++,xe.push(o?i()[t++>>1]:a()[t]),++t}return xe}function we(){return r().length}function Ie(e){try{return A.grow(e-O.byteLength+65535>>>16),K(A.buffer),1}catch(e){}}var Ce={inEventHandler:0,removeAllEventListeners:function(){for(var e=Ce.eventHandlers.length-1;e>=0;--e)Ce._removeHandler(e);Ce.eventHandlers=[],Ce.deferredCalls=[]},registerRemoveEventListeners:function(){Ce.removeEventListenersRegistered||(Ce.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var a in Ce.deferredCalls){var o=Ce.deferredCalls[a];if(o.targetFunction==e&&r(o.argsList,n))return}Ce.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),Ce.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<Ce.deferredCalls.length;++t)Ce.deferredCalls[t].targetFunction==e&&(Ce.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return Ce.inEventHandler&&Ce.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Ce.canPerformEventHandlerRequests())for(var e=0;e<Ce.deferredCalls.length;++e){var t=Ce.deferredCalls[e];Ce.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<Ce.eventHandlers.length;++n)Ce.eventHandlers[n].target!=e||t&&t!=Ce.eventHandlers[n].eventTypeString||Ce._removeHandler(n--)},_removeHandler:function(e){var t=Ce.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),Ce.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){++Ce.inEventHandler,Ce.currentEventHandler=e,Ce.runDeferredCalls(),e.handlerFunc(t),Ce.runDeferredCalls(),--Ce.inEventHandler}));if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),Ce.eventHandlers.push(e),Ce.registerRemoveEventListeners();else for(var n=0;n<Ce.eventHandlers.length;++n)Ce.eventHandlers[n].target==e.target&&Ce.eventHandlers[n].eventTypeString==e.eventTypeString&&Ce._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,t,n,r,o){var i=rt(),s=ot(12);a()[s>>2]=n,a()[s+4>>2]=r,a()[s+8>>2]=o,tt(0,e,637534208,t,r,s),at(i)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return ve.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Se(e,t,n,r){var o=rt(),i=ot(12),s=0;t&&(s=function(e){var t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(e)+1,n=He(t);return H(e,n,t),n}(t)),a()[i>>2]=s,a()[i+4>>2]=n,a()[i+8>>2]=r,tt(0,e,657457152,0,s,i),at(o)}var Ee=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function Te(e){return e=function(e){return e>2?j(e):e}(e),Ee[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function Ne(e){return Te(e)}function Ae(e,t,n){var r=Ne(e);if(!r)return-4;if(r.canvasSharedPtr&&(a()[r.canvasSharedPtr>>2]=t,a()[r.canvasSharedPtr+4>>2]=n),!r.offscreenCanvas&&r.controlTransferredOffscreen)return r.canvasSharedPtr?(function(e,t,n,r){Se(e,t=t?j(t):"",n,r)}(a()[r.canvasSharedPtr+8>>2],e,t,n),1):-4;r.offscreenCanvas&&(r=r.offscreenCanvas);var o=!1;if(r.GLctxObject&&r.GLctxObject.GLctx){var i=r.GLctxObject.GLctx.getParameter(2978);o=0===i[0]&&0===i[1]&&i[2]===r.width&&i[3]===r.height}return r.width=t,r.height=n,o&&r.GLctxObject.GLctx.viewport(0,0,t,n),0}function _e(e,t,n){return v?ye(2,1,e,t,n):Ae(e,t,n)}var Re={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){Re.lastError||(Re.lastError=e)},getNewId:function(e){for(var t=Re.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,r){for(var o="",i=0;i<t;++i){var s=r?a()[r+4*i>>2]:-1;o+=j(a()[n+4*i>>2],s<0?void 0:s)}return o},createContext:function(e,t){var n=e.getContext("webgl",t);return n?Re.registerContext(n,t):0},registerContext:function(e,t){var n=He(8);a()[n+4>>2]=Xe();var r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),Re.contexts[n]=r,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&Re.initExtensions(r),n},makeContextCurrent:function(e){return Re.currentContext=Re.contexts[e],c.ctx=Fe=Re.currentContext&&Re.currentContext.GLctx,!(e&&!Fe)},getContext:function(e){return Re.contexts[e]},deleteContext:function(e){Re.currentContext===Re.contexts[e]&&(Re.currentContext=null),"object"==Ty(Ce)&&Ce.removeAllHandlersOnTarget(Re.contexts[e].GLctx.canvas),Re.contexts[e]&&Re.contexts[e].GLctx.canvas&&(Re.contexts[e].GLctx.canvas.GLctxObject=void 0),Ge(Re.contexts[e].handle),Re.contexts[e]=null},initExtensions:function(e){if(e||(e=Re.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;(function(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,a){t.drawArraysInstancedANGLE(e,n,r,a)},e.drawElementsInstanced=function(e,n,r,a,o){t.drawElementsInstancedANGLE(e,n,r,a,o)}})(t),function(e){var t=e.getExtension("OES_vertex_array_object");if(t)e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)}}(t),function(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)}}(t),t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query"),function(e){e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")}(t),(t.getSupportedExtensions()||[]).forEach((function(e){e.indexOf("lose_context")<0&&e.indexOf("debug")<0&&t.getExtension(e)}))}},populateUniformTable:function(e){for(var t=Re.programs[e],n=Re.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},r=n.uniforms,a=Fe.getProgramParameter(t,35718),o=0;o<a;++o){var i=Fe.getActiveUniform(t,o),s=i.name;n.maxUniformLength=Math.max(n.maxUniformLength,s.length+1),"]"==s.slice(-1)&&(s=s.slice(0,s.lastIndexOf("[")));var u=Fe.getUniformLocation(t,s);if(u){var c=Re.getNewId(Re.uniforms);r[s]=[i.size,c],Re.uniforms[c]=u;for(var l=1;l<i.size;++l){var d=s+"["+l+"]";u=Fe.getUniformLocation(t,d),c=Re.getNewId(Re.uniforms),Re.uniforms[c]=u}}}}},Oe=["default","low-power","high-performance"];var Fe,Me={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Me.buffers[e];0===t||10===t?((1===e?T:N)(z(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return Me.varargs+=4,a()[Me.varargs-4>>2]},getStr:function(e){return j(e)},get64:function(e,t){return e}};function De(e){return v?ye(3,1,e):0}function Be(e,t,n,r,a){if(v)return ye(4,1,e,t,n,r,a)}function Pe(e,t,n,o){if(v)return ye(5,1,e,t,n,o);for(var i=0,s=0;s<n;s++){for(var u=a()[t+8*s>>2],c=a()[t+(8*s+4)>>2],l=0;l<c;l++)Me.printChar(e,r()[u+l]);i+=c}return a()[o>>2]=i,0}function Le(e){if(v)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var t=ve.getNewWorker();if(void 0!==t.pthread)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";ve.runningWorkers.push(t);for(var n=He(512),r=0;r<128;++r)a()[n+4*r>>2]=0;var i=e.stackBase+e.stackSize,s=ve.pthreads[e.pthread_ptr]={worker:t,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,threadInfoStruct:e.pthread_ptr},u=s.threadInfoStruct>>2;Atomics.store(o(),u+16,e.detached),Atomics.store(o(),u+25,n),Atomics.store(o(),u+10,s.threadInfoStruct),Atomics.store(o(),u+20,e.stackSize),Atomics.store(o(),u+19,i),Atomics.store(o(),u+26,e.stackSize),Atomics.store(o(),u+28,i),Atomics.store(o(),u+29,e.detached);var c=Ke()+40;Atomics.store(o(),u+43,c),t.pthread=s;var l={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};t.runPthread=function(){l.time=performance.now(),t.postMessage(l,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread)}function Ue(e){if(v)return ye(6,1,e);switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==("undefined"==typeof navigator?"undefined":Ty(navigator))&&navigator.hardwareConcurrency||1}return function(e){a()[qe()>>2]=e}(28),-1}v||ve.initMainThreadBlock();var Ve,We=[null,function(e,t){if(v)return ye(1,1,e,t)},_e,De,Be,Pe,Ue],ze={e:function(e,t,n,r){oe("Assertion failed: "+j(e)+", at: "+[t?j(t):"unknown filename",n,r?j(r):"unknown function"])},r:function(e,t){_main(e,t)},x:function(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(v)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=ve.pthreads[e],r=n&&n.worker;if(!r)return;r.postMessage({cmd:"processThreadQueue"})}return 1},b:function(){oe()},y:function(e,t,n){var r=ke(t,n);return de[e].apply(null,r)},j:function(e,t){},c:function(e,n,r){if(e<=0||e>t().length||!0&e)return-28;if(p){if(Atomics.load(a(),e>>2)!=n)return-6;var o=performance.now(),i=o+r;for(Atomics.exchange(a(),ct>>2,e);;){if((o=performance.now())>i)return Atomics.exchange(a(),ct>>2,0),-73;if(0==Atomics.exchange(a(),ct>>2,0))break;if(Ye(),Atomics.load(a(),e>>2)!=n)return-6;Atomics.exchange(a(),ct>>2,e)}return 0}var s=Atomics.wait(a(),e>>2,n,r);if("timed-out"===s)return-73;if("not-equal"===s)return-6;if("ok"===s)return 0;throw"Atomics.wait returned an unexpected value "+s},d:fe,f:ge,p:function(e,t,n){r().copyWithin(e,t,t+n)},z:function(){return h?AG.cpus().length:navigator.hardwareConcurrency},u:function(e,t,n){be.length=t;for(var r=n>>3,a=0;a<t;a++)be[a]=i()[r+a];return(e<0?de[-e-1]:We[e]).apply(null,be)},q:function(e){var t=we();if(e<=t)return!1;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),Ie(Math.min(n,q(Math.max(e,a),65536))))return!0}return!1},v:function(e,t,n){return Ne(e)?Ae(e,t,n):_e(e,t,n)},i:function(e){},t:function(e,t){},w:function(e,t){return function(e,t){var n=t>>2,r=a()[n+6],o={alpha:!!a()[n+0],depth:!!a()[n+1],stencil:!!a()[n+2],antialias:!!a()[n+3],premultipliedAlpha:!!a()[n+4],preserveDrawingBuffer:!!a()[n+5],powerPreference:Oe[r],failIfMajorPerformanceCaveat:!!a()[n+7],majorVersion:a()[n+8],minorVersion:a()[n+9],enableExtensionsByDefault:a()[n+10],explicitSwapControl:a()[n+11],proxyContextToMainThread:a()[n+12],renderViaOffscreenBackBuffer:a()[n+13]},i=Ne(e);return i?o.explicitSwapControl?0:Re.createContext(i,o):0}(e,t)},m:De,n:Be,g:Pe,o:function(){ve.initRuntime()},a:A||c.wasmMemory,k:function(e){var t=ve.threadExitHandlers.pop();e&&t()},l:function(e,t){ve.threadExitHandlers.push((function(){X.get(e)(t)}))},h:function(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return N("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!e)return N("pthread_create called with a null thread pointer!"),28;var i=[];if(v&&0===i.length)return Je(687865856,e,t,n,r);var s=0,u=0,c=0;t&&-1!=t?(s=a()[t>>2],s+=81920,u=a()[t+8>>2],c=0!==a()[t+12>>2]):s=2097152;var l=0==u;l?u=st(16,s):U((u-=s)>0);for(var d=He(228),p=0;p<57;++p)o()[(d>>2)+p]=0;a()[e>>2]=d,a()[d+12>>2]=d;var f=d+152;a()[f>>2]=f;var h={stackBase:u,stackSize:s,allocatedOwnStack:l,detached:c,startRoutine:n,pthread_ptr:d,arg:r,transferList:i};return v?(h.cmd="spawnThread",postMessage(h,i)):Le(h),0},s:Ue},je=(function(){var e={a:ze};function t(e,t){var n=e.exports;if(c.asm=n,X=c.asm.F,_=t,!v){var r=ve.unusedWorkers.length;ve.unusedWorkers.forEach((function(e){ve.loadWasmModuleToWorker(e,(function(){--r||function(e){if(re--,c.monitorRunDependencies&&c.monitorRunDependencies(re),0==re&&ae){var t=ae;ae=null,t()}}()}))}))}}function n(e){t(e.instance,e.module)}function r(t){return function(){if(!E&&(p||f)){if("function"==typeof fetch&&!ue(ce))return fetch(ce,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ce+"'";return e.arrayBuffer()})).catch((function(){return le(ce)}));if(b)return new Promise((function(e,t){b(ce,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return le(ce)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){N("failed to asynchronously prepare wasm: "+e),oe(e)}))}if(v||(U(!v,"addRunDependency cannot be used in a pthread worker"),re++,c.monitorRunDependencies&&c.monitorRunDependencies(re)),c.instantiateWasm)try{return c.instantiateWasm(e,t)}catch(e){return N("Module.instantiateWasm callback failed with error: "+e),!1}(E||"function"!=typeof WebAssembly.instantiateStreaming||se(ce)||ue(ce)||"function"!=typeof fetch?r(n):fetch(ce,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return N("wasm streaming compile failed: "+e),N("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(u)}(),c.___wasm_call_ctors=function(){return(je=c.___wasm_call_ctors=c.asm.A).apply(null,arguments)}),He=(c._init=function(){return(c._init=c.asm.B).apply(null,arguments)},c._register_tensor=function(){return(c._register_tensor=c.asm.C).apply(null,arguments)},c._dispose_data=function(){return(c._dispose_data=c.asm.D).apply(null,arguments)},c._dispose=function(){return(c._dispose=c.asm.E).apply(null,arguments)},c._Abs=function(){return(c._Abs=c.asm.G).apply(null,arguments)},c._Add=function(){return(c._Add=c.asm.H).apply(null,arguments)},c._AddN=function(){return(c._AddN=c.asm.I).apply(null,arguments)},c._All=function(){return(c._All=c.asm.J).apply(null,arguments)},c._Any=function(){return(c._Any=c.asm.K).apply(null,arguments)},c._ArgMax=function(){return(c._ArgMax=c.asm.L).apply(null,arguments)},c._AvgPool=function(){return(c._AvgPool=c.asm.M).apply(null,arguments)},c._BatchMatMul=function(){return(c._BatchMatMul=c.asm.N).apply(null,arguments)},c._Ceil=function(){return(c._Ceil=c.asm.O).apply(null,arguments)},c._ClipByValue=function(){return(c._ClipByValue=c.asm.P).apply(null,arguments)},c._Conv2D=function(){return(c._Conv2D=c.asm.Q).apply(null,arguments)},c._Conv2DBackpropInput=function(){return(c._Conv2DBackpropInput=c.asm.R).apply(null,arguments)},c._Cos=function(){return(c._Cos=c.asm.S).apply(null,arguments)},c._Cosh=function(){return(c._Cosh=c.asm.T).apply(null,arguments)},c._CropAndResize=function(){return(c._CropAndResize=c.asm.U).apply(null,arguments)},c._Cumsum=function(){return(c._Cumsum=c.asm.V).apply(null,arguments)},c._DepthToSpace=function(){return(c._DepthToSpace=c.asm.W).apply(null,arguments)},c._DepthwiseConv2dNative=function(){return(c._DepthwiseConv2dNative=c.asm.X).apply(null,arguments)},c._Equal=function(){return(c._Equal=c.asm.Y).apply(null,arguments)},c._Exp=function(){return(c._Exp=c.asm.Z).apply(null,arguments)},c._FlipLeftRight=function(){return(c._FlipLeftRight=c.asm._).apply(null,arguments)},c._Floor=function(){return(c._Floor=c.asm.$).apply(null,arguments)},c._FloorDiv=function(){return(c._FloorDiv=c.asm.aa).apply(null,arguments)},c._FusedBatchNorm=function(){return(c._FusedBatchNorm=c.asm.ba).apply(null,arguments)},c._FusedConv2D=function(){return(c._FusedConv2D=c.asm.ca).apply(null,arguments)},c._FusedDepthwiseConv2D=function(){return(c._FusedDepthwiseConv2D=c.asm.da).apply(null,arguments)},c._Gather=function(){return(c._Gather=c.asm.ea).apply(null,arguments)},c._GatherNd=function(){return(c._GatherNd=c.asm.fa).apply(null,arguments)},c._Greater=function(){return(c._Greater=c.asm.ga).apply(null,arguments)},c._GreaterEqual=function(){return(c._GreaterEqual=c.asm.ha).apply(null,arguments)},c._LeakyRelu=function(){return(c._LeakyRelu=c.asm.ia).apply(null,arguments)},c._Less=function(){return(c._Less=c.asm.ja).apply(null,arguments)},c._LessEqual=function(){return(c._LessEqual=c.asm.ka).apply(null,arguments)},c._Log=function(){return(c._Log=c.asm.la).apply(null,arguments)},c._LogicalAnd=function(){return(c._LogicalAnd=c.asm.ma).apply(null,arguments)},c._Max=function(){return(c._Max=c.asm.na).apply(null,arguments)},c._MaxPool=function(){return(c._MaxPool=c.asm.oa).apply(null,arguments)},c._Maximum=function(){return(c._Maximum=c.asm.pa).apply(null,arguments)},c._Mean=function(){return(c._Mean=c.asm.qa).apply(null,arguments)},c._Min=function(){return(c._Min=c.asm.ra).apply(null,arguments)},c._Minimum=function(){return(c._Minimum=c.asm.sa).apply(null,arguments)},c._MirrorPad=function(){return(c._MirrorPad=c.asm.ta).apply(null,arguments)},c._Multiply=function(){return(c._Multiply=c.asm.ua).apply(null,arguments)},c._Neg=function(){return(c._Neg=c.asm.va).apply(null,arguments)},c._NonMaxSuppressionV3=function(){return(c._NonMaxSuppressionV3=c.asm.wa).apply(null,arguments)},c._NonMaxSuppressionV4=function(){return(c._NonMaxSuppressionV4=c.asm.xa).apply(null,arguments)},c._NonMaxSuppressionV5=function(){return(c._NonMaxSuppressionV5=c.asm.ya).apply(null,arguments)},c._NotEqual=function(){return(c._NotEqual=c.asm.za).apply(null,arguments)},c._OneHot=function(){return(c._OneHot=c.asm.Aa).apply(null,arguments)},c._PadV2=function(){return(c._PadV2=c.asm.Ba).apply(null,arguments)},c._Pow=function(){return(c._Pow=c.asm.Ca).apply(null,arguments)},c._Prelu=function(){return(c._Prelu=c.asm.Da).apply(null,arguments)},c._Prod=function(){return(c._Prod=c.asm.Ea).apply(null,arguments)},c._RealDiv=function(){return(c._RealDiv=c.asm.Fa).apply(null,arguments)},c._Relu=function(){return(c._Relu=c.asm.Ga).apply(null,arguments)},c._Relu6=function(){return(c._Relu6=c.asm.Ha).apply(null,arguments)},c._ResizeBilinear=function(){return(c._ResizeBilinear=c.asm.Ia).apply(null,arguments)},c._Reverse=function(){return(c._Reverse=c.asm.Ja).apply(null,arguments)},c._RotateWithOffset=function(){return(c._RotateWithOffset=c.asm.Ka).apply(null,arguments)},c._Round=function(){return(c._Round=c.asm.La).apply(null,arguments)},c._Rsqrt=function(){return(c._Rsqrt=c.asm.Ma).apply(null,arguments)},c._ScatterNd=function(){return(c._ScatterNd=c.asm.Na).apply(null,arguments)},c._SelectV2=function(){return(c._SelectV2=c.asm.Oa).apply(null,arguments)},c._Sigmoid=function(){return(c._Sigmoid=c.asm.Pa).apply(null,arguments)},c._Sin=function(){return(c._Sin=c.asm.Qa).apply(null,arguments)},c._Softmax=function(){return(c._Softmax=c.asm.Ra).apply(null,arguments)},c._Sqrt=function(){return(c._Sqrt=c.asm.Sa).apply(null,arguments)},c._Square=function(){return(c._Square=c.asm.Ta).apply(null,arguments)},c._SquaredDifference=function(){return(c._SquaredDifference=c.asm.Ua).apply(null,arguments)},c._Step=function(){return(c._Step=c.asm.Va).apply(null,arguments)},c._StridedSlice=function(){return(c._StridedSlice=c.asm.Wa).apply(null,arguments)},c._Sub=function(){return(c._Sub=c.asm.Xa).apply(null,arguments)},c._Sum=function(){return(c._Sum=c.asm.Ya).apply(null,arguments)},c._Tan=function(){return(c._Tan=c.asm.Za).apply(null,arguments)},c._Tanh=function(){return(c._Tanh=c.asm._a).apply(null,arguments)},c._Tile=function(){return(c._Tile=c.asm.$a).apply(null,arguments)},c._TopK=function(){return(c._TopK=c.asm.ab).apply(null,arguments)},c._Transform=function(){return(c._Transform=c.asm.bb).apply(null,arguments)},c._Transpose=function(){return(c._Transpose=c.asm.cb).apply(null,arguments)},c.__FusedMatMul=function(){return(c.__FusedMatMul=c.asm.db).apply(null,arguments)},c._malloc=function(){return(He=c._malloc=c.asm.eb).apply(null,arguments)}),Ge=c._free=function(){return(Ge=c._free=c.asm.fb).apply(null,arguments)},qe=c.___errno_location=function(){return(qe=c.___errno_location=c.asm.gb).apply(null,arguments)},Ke=c._emscripten_get_global_libc=function(){return(Ke=c._emscripten_get_global_libc=c.asm.hb).apply(null,arguments)},Xe=c._pthread_self=function(){return(Xe=c._pthread_self=c.asm.ib).apply(null,arguments)},Qe=c.___pthread_tsd_run_dtors=function(){return(Qe=c.___pthread_tsd_run_dtors=c.asm.jb).apply(null,arguments)},Ye=c._emscripten_main_thread_process_queued_calls=function(){return(Ye=c._emscripten_main_thread_process_queued_calls=c.asm.kb).apply(null,arguments)},$e=(c._emscripten_current_thread_process_queued_calls=function(){return(c._emscripten_current_thread_process_queued_calls=c.asm.lb).apply(null,arguments)},c._emscripten_register_main_browser_thread_id=function(){return($e=c._emscripten_register_main_browser_thread_id=c.asm.mb).apply(null,arguments)}),Ze=c.__emscripten_do_dispatch_to_thread=function(){return(Ze=c.__emscripten_do_dispatch_to_thread=c.asm.nb).apply(null,arguments)},Je=c._emscripten_sync_run_in_main_thread_4=function(){return(Je=c._emscripten_sync_run_in_main_thread_4=c.asm.ob).apply(null,arguments)},et=c._emscripten_run_in_main_runtime_thread_js=function(){return(et=c._emscripten_run_in_main_runtime_thread_js=c.asm.pb).apply(null,arguments)},tt=c.__emscripten_call_on_thread=function(){return(tt=c.__emscripten_call_on_thread=c.asm.qb).apply(null,arguments)},nt=(c._emscripten_tls_init=function(){return(c._emscripten_tls_init=c.asm.rb).apply(null,arguments)},c.__emscripten_thread_init=function(){return(nt=c.__emscripten_thread_init=c.asm.sb).apply(null,arguments)}),rt=c.stackSave=function(){return(rt=c.stackSave=c.asm.tb).apply(null,arguments)},at=c.stackRestore=function(){return(at=c.stackRestore=c.asm.ub).apply(null,arguments)},ot=c.stackAlloc=function(){return(ot=c.stackAlloc=c.asm.vb).apply(null,arguments)},it=c._emscripten_stack_set_limits=function(){return(it=c._emscripten_stack_set_limits=c.asm.wb).apply(null,arguments)},st=c._memalign=function(){return(st=c._memalign=c.asm.xb).apply(null,arguments)},ut=c.__emscripten_allow_main_runtime_queued_calls=9824,ct=c.__emscripten_main_thread_futex=11448;function lt(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function dt(e){if(!(re>0)){if(v)return s(c),ee(),void postMessage({cmd:"loaded"});(function(){if(!v){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)te(c.preRun.shift());pe(Y)}})(),re>0||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),t()}),1)):t())}function t(){Ve||(Ve=!0,c.calledRun=!0,L||(ee(),v||pe(Z),s(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),function(){if(!v){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;)ne(c.postRun.shift());pe(J)}}()))}}if(c.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?V(e):function(){return W(e,t,n,arguments)}},c.PThread=ve,c.PThread=ve,c.wasmMemory=A,c.ExitStatus=lt,ae=function e(){Ve||dt(),Ve||(ae=e)},c.run=dt,c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return v&&(R=!1,ve.initWorker()),dt(),e.ready});e.exports=r})),RG=eI((function(e,t){var n,r=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(n=n||__filename),function(e){var t,r,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,n){t=e,r=n}));var o,i={};for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);var s,u,c,l;s="object"==("undefined"==typeof window?"undefined":Ty(window)),u="function"==typeof importScripts,c="object"==("undefined"==typeof process?"undefined":Ty(process))&&"object"==Ty(process.versions)&&"string"==typeof process.versions.node,l=!s&&!c&&!u;var d,p,f,h,m,g="";c?(g=u?TG.dirname(g)+"/":__dirname+"/",d=function(e,t){return h||(h=lN),m||(m=TG),e=m.normalize(e),h.readFileSync(e,t?null:"utf8")},f=function(e){var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),w(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof oe))throw e})),process.on("unhandledRejection",j),a.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(d=function(e){return read(e)}),f=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(w("object"==Ty(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(s||u)&&(u?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),n&&(g=n),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(f=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),p=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var v,y,b=a.print||console.log.bind(console),x=a.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);i=null,a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,a.quit&&a.quit,a.wasmBinary&&(v=a.wasmBinary),a.noExitRuntime,"object"!=("undefined"==typeof WebAssembly?"undefined":Ty(WebAssembly))&&j("no native wasm support detected");var k=!1;function w(e,t){e||j("Assertion failed: "+t)}function I(e){var t=a["_"+e];return w(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function C(e,t,n,r,a){var o={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);!function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var a=n,o=n+r-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(e,T,t,n)}(e,t=ae(n),n)}return t},array:function(e){var t=ae(e.length);return function(e,t){E.set(e,t)}(e,t),t}},i=I(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=o[n[c]];l?(0===u&&(u=ne()),s[c]=l(r[c])):s[c]=r[c]}var d=i.apply(null,s);return d=function(e){return"string"===t?R(e):"boolean"===t?Boolean(e):e}(d),0!==u&&re(u),d}var S,E,T,N,A="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function _(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&A)return A.decode(e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var u=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|u:(7&i)<<18|s<<12|u<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var c=i-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&i)<<6|s)}else o+=String.fromCharCode(i)}return o}function R(e,t){return e?_(T,e,t):""}function O(e,t){return e%t>0&&(e+=t-e%t),e}function F(e){S=e,a.HEAP8=E=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=N=new Int32Array(e),a.HEAPU8=T=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var M,D=[],B=[],P=[],L=[];function U(e){D.unshift(e)}function V(e){L.unshift(e)}B.push({func:function(){ee()}});var W=0,z=null;function j(e){a.onAbort&&a.onAbort(e),x(e+=""),k=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}function H(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}a.preloadedImages={},a.preloadedAudios={};function G(e){return H(e,"data:application/octet-stream;base64,")}function q(e){return H(e,"file://")}var K="tfjs-backend-wasm.wasm";function X(e){try{if(e==K&&v)return new Uint8Array(v);if(f)return f(e);throw"both async and sync fetching of the wasm failed"}catch(e){j(e)}}function Q(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?M.get(n)():M.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}function Y(e){try{return y.grow(e-S.byteLength+65535>>>16),F(y.buffer),1}catch(e){}}G(K)||(K=function(e){return a.locateFile?a.locateFile(e,g):g+e}(K));var $={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=$.buffers[e];0===t||10===t?((1===e?b:x)(_(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return $.varargs+=4,N[$.varargs-4>>2]},getStr:function(e){return R(e)},get64:function(e,t){return e}};var Z,J={a:function(){j()},d:function(e,t,n){T.copyWithin(e,t,t+n)},e:function(e){var t=T.length,n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),Y(Math.min(n,O(Math.max(e,a),65536))))return!0}return!1},f:function(e){return 0},c:function(e,t,n,r,a){},b:function(e,t,n,r){for(var a=0,o=0;o<n;o++){for(var i=N[t+8*o>>2],s=N[t+(8*o+4)>>2],u=0;u<s;u++)$.printChar(e,T[i+u]);a+=s}return N[r>>2]=a,0},g:function(){return 6},h:function(e){switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==("undefined"==typeof navigator?"undefined":Ty(navigator))&&navigator.hardwareConcurrency||1}return function(e){N[te()>>2]=e}(28),-1}},ee=(function(){var e={a:J};function t(e,t){var n=e.exports;a.asm=n,F((y=a.asm.i).buffer),M=a.asm.o,function(e){if(W--,a.monitorRunDependencies&&a.monitorRunDependencies(W),0==W&&z){var t=z;z=null,t()}}()}function n(e){t(e.instance)}function o(t){return function(){if(!v&&(s||u)){if("function"==typeof fetch&&!q(K))return fetch(K,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+K+"'";return e.arrayBuffer()})).catch((function(){return X(K)}));if(p)return new Promise((function(e,t){p(K,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return X(K)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){x("failed to asynchronously prepare wasm: "+e),j(e)}))}if(W++,a.monitorRunDependencies&&a.monitorRunDependencies(W),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return x("Module.instantiateWasm callback failed with error: "+e),!1}(v||"function"!=typeof WebAssembly.instantiateStreaming||G(K)||q(K)||"function"!=typeof fetch?o(n):fetch(K,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),o(n)}))}))).catch(r)}(),a.___wasm_call_ctors=function(){return(ee=a.___wasm_call_ctors=a.asm.j).apply(null,arguments)}),te=(a._init=function(){return(a._init=a.asm.k).apply(null,arguments)},a._register_tensor=function(){return(a._register_tensor=a.asm.l).apply(null,arguments)},a._dispose_data=function(){return(a._dispose_data=a.asm.m).apply(null,arguments)},a._dispose=function(){return(a._dispose=a.asm.n).apply(null,arguments)},a._Abs=function(){return(a._Abs=a.asm.p).apply(null,arguments)},a._Add=function(){return(a._Add=a.asm.q).apply(null,arguments)},a._AddN=function(){return(a._AddN=a.asm.r).apply(null,arguments)},a._All=function(){return(a._All=a.asm.s).apply(null,arguments)},a._Any=function(){return(a._Any=a.asm.t).apply(null,arguments)},a._ArgMax=function(){return(a._ArgMax=a.asm.u).apply(null,arguments)},a._AvgPool=function(){return(a._AvgPool=a.asm.v).apply(null,arguments)},a._BatchMatMul=function(){return(a._BatchMatMul=a.asm.w).apply(null,arguments)},a._Ceil=function(){return(a._Ceil=a.asm.x).apply(null,arguments)},a._ClipByValue=function(){return(a._ClipByValue=a.asm.y).apply(null,arguments)},a._Conv2D=function(){return(a._Conv2D=a.asm.z).apply(null,arguments)},a._Conv2DBackpropInput=function(){return(a._Conv2DBackpropInput=a.asm.A).apply(null,arguments)},a._Cos=function(){return(a._Cos=a.asm.B).apply(null,arguments)},a._Cosh=function(){return(a._Cosh=a.asm.C).apply(null,arguments)},a._CropAndResize=function(){return(a._CropAndResize=a.asm.D).apply(null,arguments)},a._Cumsum=function(){return(a._Cumsum=a.asm.E).apply(null,arguments)},a._DepthToSpace=function(){return(a._DepthToSpace=a.asm.F).apply(null,arguments)},a._DepthwiseConv2dNative=function(){return(a._DepthwiseConv2dNative=a.asm.G).apply(null,arguments)},a._Equal=function(){return(a._Equal=a.asm.H).apply(null,arguments)},a._Exp=function(){return(a._Exp=a.asm.I).apply(null,arguments)},a._FlipLeftRight=function(){return(a._FlipLeftRight=a.asm.J).apply(null,arguments)},a._Floor=function(){return(a._Floor=a.asm.K).apply(null,arguments)},a._FloorDiv=function(){return(a._FloorDiv=a.asm.L).apply(null,arguments)},a._FusedBatchNorm=function(){return(a._FusedBatchNorm=a.asm.M).apply(null,arguments)},a._FusedConv2D=function(){return(a._FusedConv2D=a.asm.N).apply(null,arguments)},a._FusedDepthwiseConv2D=function(){return(a._FusedDepthwiseConv2D=a.asm.O).apply(null,arguments)},a._Gather=function(){return(a._Gather=a.asm.P).apply(null,arguments)},a._GatherNd=function(){return(a._GatherNd=a.asm.Q).apply(null,arguments)},a._Greater=function(){return(a._Greater=a.asm.R).apply(null,arguments)},a._GreaterEqual=function(){return(a._GreaterEqual=a.asm.S).apply(null,arguments)},a._LeakyRelu=function(){return(a._LeakyRelu=a.asm.T).apply(null,arguments)},a._Less=function(){return(a._Less=a.asm.U).apply(null,arguments)},a._LessEqual=function(){return(a._LessEqual=a.asm.V).apply(null,arguments)},a._Log=function(){return(a._Log=a.asm.W).apply(null,arguments)},a._LogicalAnd=function(){return(a._LogicalAnd=a.asm.X).apply(null,arguments)},a._Max=function(){return(a._Max=a.asm.Y).apply(null,arguments)},a._MaxPool=function(){return(a._MaxPool=a.asm.Z).apply(null,arguments)},a._Maximum=function(){return(a._Maximum=a.asm._).apply(null,arguments)},a._Mean=function(){return(a._Mean=a.asm.$).apply(null,arguments)},a._Min=function(){return(a._Min=a.asm.aa).apply(null,arguments)},a._Minimum=function(){return(a._Minimum=a.asm.ba).apply(null,arguments)},a._MirrorPad=function(){return(a._MirrorPad=a.asm.ca).apply(null,arguments)},a._Multiply=function(){return(a._Multiply=a.asm.da).apply(null,arguments)},a._Neg=function(){return(a._Neg=a.asm.ea).apply(null,arguments)},a._NonMaxSuppressionV3=function(){return(a._NonMaxSuppressionV3=a.asm.fa).apply(null,arguments)},a._NonMaxSuppressionV4=function(){return(a._NonMaxSuppressionV4=a.asm.ga).apply(null,arguments)},a._NonMaxSuppressionV5=function(){return(a._NonMaxSuppressionV5=a.asm.ha).apply(null,arguments)},a._NotEqual=function(){return(a._NotEqual=a.asm.ia).apply(null,arguments)},a._OneHot=function(){return(a._OneHot=a.asm.ja).apply(null,arguments)},a._PadV2=function(){return(a._PadV2=a.asm.ka).apply(null,arguments)},a._Pow=function(){return(a._Pow=a.asm.la).apply(null,arguments)},a._Prelu=function(){return(a._Prelu=a.asm.ma).apply(null,arguments)},a._Prod=function(){return(a._Prod=a.asm.na).apply(null,arguments)},a._RealDiv=function(){return(a._RealDiv=a.asm.oa).apply(null,arguments)},a._Relu=function(){return(a._Relu=a.asm.pa).apply(null,arguments)},a._Relu6=function(){return(a._Relu6=a.asm.qa).apply(null,arguments)},a._ResizeBilinear=function(){return(a._ResizeBilinear=a.asm.ra).apply(null,arguments)},a._Reverse=function(){return(a._Reverse=a.asm.sa).apply(null,arguments)},a._RotateWithOffset=function(){return(a._RotateWithOffset=a.asm.ta).apply(null,arguments)},a._Round=function(){return(a._Round=a.asm.ua).apply(null,arguments)},a._Rsqrt=function(){return(a._Rsqrt=a.asm.va).apply(null,arguments)},a._ScatterNd=function(){return(a._ScatterNd=a.asm.wa).apply(null,arguments)},a._SelectV2=function(){return(a._SelectV2=a.asm.xa).apply(null,arguments)},a._Sigmoid=function(){return(a._Sigmoid=a.asm.ya).apply(null,arguments)},a._Sin=function(){return(a._Sin=a.asm.za).apply(null,arguments)},a._Softmax=function(){return(a._Softmax=a.asm.Aa).apply(null,arguments)},a._Sqrt=function(){return(a._Sqrt=a.asm.Ba).apply(null,arguments)},a._Square=function(){return(a._Square=a.asm.Ca).apply(null,arguments)},a._SquaredDifference=function(){return(a._SquaredDifference=a.asm.Da).apply(null,arguments)},a._Step=function(){return(a._Step=a.asm.Ea).apply(null,arguments)},a._StridedSlice=function(){return(a._StridedSlice=a.asm.Fa).apply(null,arguments)},a._Sub=function(){return(a._Sub=a.asm.Ga).apply(null,arguments)},a._Sum=function(){return(a._Sum=a.asm.Ha).apply(null,arguments)},a._Tan=function(){return(a._Tan=a.asm.Ia).apply(null,arguments)},a._Tanh=function(){return(a._Tanh=a.asm.Ja).apply(null,arguments)},a._Tile=function(){return(a._Tile=a.asm.Ka).apply(null,arguments)},a._TopK=function(){return(a._TopK=a.asm.La).apply(null,arguments)},a._Transform=function(){return(a._Transform=a.asm.Ma).apply(null,arguments)},a._Transpose=function(){return(a._Transpose=a.asm.Na).apply(null,arguments)},a.__FusedMatMul=function(){return(a.__FusedMatMul=a.asm.Oa).apply(null,arguments)},a._malloc=function(){return(a._malloc=a.asm.Pa).apply(null,arguments)},a._free=function(){return(a._free=a.asm.Qa).apply(null,arguments)},a.___errno_location=function(){return(te=a.___errno_location=a.asm.Ra).apply(null,arguments)}),ne=a.stackSave=function(){return(ne=a.stackSave=a.asm.Sa).apply(null,arguments)},re=a.stackRestore=function(){return(re=a.stackRestore=a.asm.Ta).apply(null,arguments)},ae=a.stackAlloc=function(){return(ae=a.stackAlloc=a.asm.Ua).apply(null,arguments)};function oe(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ie(e){function n(){Z||(Z=!0,a.calledRun=!0,k||(Q(B),Q(P),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)V(a.postRun.shift());Q(L)}()))}W>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)U(a.preRun.shift());Q(D)}(),W>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),n()}),1)):n()))}if(a.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?I(e):function(){return C(e,t,n,arguments)}},z=function e(){Z||ie(),Z||(z=e)},a.run=ie,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return ie(),e.ready});e.exports=r})),OG=function(e){Dy(a,e);var t,n,r=Hy(a);function a(e){var t;return _y(this,a),(t=r.call(this)).wasm=e,t.dataIdNextNumber=1,t.wasm.tfjs.init(),t.dataIdMap=new rC(zy(t),wT()),t}return Oy(a,[{key:"write",value:function(e,t,n){var r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}},{key:"numDataIds",value:function(){return this.dataIdMap.numDataIds()}},{key:"time",value:(n=Ay(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=US(),t(),e.abrupt("return",{kernelMs:US()-n});case 3:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"move",value:function(e,t,n,r,a){var o=this.dataIdNextNumber++;if("string"!==r){var i=pC(n),s=i*SC(r),u=this.wasm._malloc(s);this.dataIdMap.set(e,{id:o,memoryOffset:u,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(o,i,u),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),u)}else{var c=t;this.dataIdMap.set(e,{id:o,stringBytes:c,shape:n,dtype:r,memoryOffset:null,refCount:a})}}},{key:"read",value:(t=Ay(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"readSync",value:function(e){var t=this.dataIdMap.get(e),n=t.memoryOffset,r=t.dtype,a=t.shape,o=t.stringBytes;return"string"===r?o:function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}(this.wasm.HEAPU8.slice(n,n+pC(a)*SC(r)).buffer,r)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.dataIdMap.has(e)){var n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}},{key:"refCount",value:function(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}},{key:"incRef",value:function(e){var t=this.dataIdMap.get(e);null!=t&&t.refCount++}},{key:"floatPrecision",value:function(){return 32}},{key:"getMemoryOffset",value:function(e){return this.dataIdMap.get(e).memoryOffset}},{key:"dispose",value:function(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}},{key:"memory",value:function(){return{unreliable:!1}}},{key:"makeOutput",value:function(e,t,n){var r;if(null==n)r=this.write(null,e,t);else{var a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});var o=pC(e);this.wasm.tfjs.registerTensor(a,o,n)}return{dataId:r,shape:e,dtype:t}}},{key:"typedArrayFromHeap",value:function(e){var t=e.shape,n=e.dtype,r=e.dataId,a=this.wasm.HEAPU8.buffer,o=this.dataIdMap.get(r).memoryOffset,i=pC(t);switch(n){case"float32":return new Float32Array(a,o,i);case"int32":return new Int32Array(a,o,i);case"bool":return new Uint8Array(a,o,i);default:throw new Error("Unknown dtype ".concat(n))}}}]),a}(aC);function FG(e){return function(t,n){return function(e,t){return WC().platform.fetch(e,{credentials:"same-origin"})}(e).then((function(r){r.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),r.arrayBuffer().then((function(e){WebAssembly.instantiate(e,t).then((function(e){n(e.instance,e.module)}))}))})),{}}}function MG(e,t,n){var r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=LG&&null!=LG[r]?LG[r]:n+r}var DG=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],BG=null,PG=null,LG={},UG=!1,VG=!1;function WG(){return(WG=Vk(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.preferredBackends,r=void 0===n?["webgl","wasm","cpu"]:n,e.next=3,kT();case 3:a=Xk(r),e.prev=4,a.s();case 6:if((o=a.n()).done){e.next=20;break}return i=o.value,e.prev=8,e.next=11,IT(i);case 11:return e.abrupt("break",20);case 14:if(e.prev=14,e.t0=e.catch(8),i!==r[r.length-1]){e.next=18;break}throw e.t0;case 18:e.next=6;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(4),a.e(e.t1);case 25:return e.prev=25,a.f(),e.finish(25);case 28:return e.next=30,CT();case 30:case"end":return e.stop()}}),e,null,[[4,22,25,28],[8,14]])})))).apply(this,arguments)}ST("wasm",Ay(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ay(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([WC().getAsync("WASM_HAS_SIMD_SUPPORT"),WC().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);case 2:return t=e.sent,n=Ky(t,2),r=n[0],a=n[1],e.abrupt("return",new Promise((function(e,t){var n={locateFile:function(e,t){if(e.endsWith(".worker.js")){var n=new Blob(['var Module={};function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;this.alert=threadAlert;Module["instantiateWasm"]=function(info,receiveInstance){var instance=new WebAssembly.Instance(Module["wasmModule"],info);Module["wasmModule"]=null;receiveInstance(instance);return instance.exports};function moduleLoaded(){}this.onmessage=function(e){try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance;moduleLoaded()})}else if(e.data.cmd==="objectTransfer"){Module["PThread"].receiveObjectTransfer(e.data)}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0);var max=e.data.stackBase;var top=e.data.stackBase+e.data.stackSize;Module["establishStackSpace"](top,max);Module["_emscripten_tls_init"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].setThreadStatus(Module["_pthread_self"](),1);try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(!Module["getNoExitRuntime"]())Module["PThread"].threadExit(result)}catch(ex){if(ex==="Canceled!"){Module["PThread"].threadCancel()}else if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["getNoExitRuntime"]()){}else{Module["PThread"].threadExit(ex.status)}}else{Module["PThread"].threadExit(-2);throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["PThread"].threadCancel()}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);throw ex}};if(typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string"){self={location:{href:__filename}};var onmessage=this.onmessage;var nodeWorkerThreads=require("worker_threads");global.Worker=nodeWorkerThreads.Worker;var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var nodeFS=require("fs");var nodeRead=function(filename){return nodeFS.readFileSync(filename,"utf8")};function globalEval(x){global.require=require;global.Module=Module;eval.call(null,x)}importScripts=function(f){globalEval(nodeRead(f))};postMessage=function(msg){parentPort.postMessage(msg)};if(typeof performance==="undefined"){performance={now:function(){return Date.now()}}}}'],{type:"application/javascript"});return URL.createObjectURL(n)}return e.endsWith(".wasm")?MG(r,a,null!=PG?PG:t):t+e}};VG&&(n.instantiateWasm=FG(MG(r,a,null!=PG?PG:"")));var o,i=!1;n.onAbort=function(){i||UG||(UG=!0,t({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},a&&r&&null==BG?(n.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+_G.toString()],{type:"text/javascript"}),o=_G(n)):o=RG(n),o.then((function(t){i=!0,UG=!1,t.tfjs={init:t.cwrap("init",null,[]),registerTensor:t.cwrap("register_tensor",null,["number","number","number"]),disposeData:t.cwrap("dispose_data",null,["number"]),dispose:t.cwrap("dispose",null,[])},e({wasm:t})}))})));case 7:case"end":return e.stop()}}),e)})))();case 2:return t=e.sent,n=t.wasm,e.abrupt("return",new OG(n));case 5:case"end":return e.stop()}}),e)}))),2),function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(UG)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)PG=e;else{LG=e;var n=DG.filter((function(e){return null==LG[e]}));if(n.length>0)throw new Error("There were no entries found for the following binaries: ".concat(n.join(","),". Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found."))}VG=t}
/** @license See the LICENSE file. */("//cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@".concat("3.8.0","/dist/"));var zG=Object.freeze({__proto__:null,initTensorFlow:function(){return WG.apply(this,arguments)}}),jG=60103,HG=60106,GG=60107,qG=60108,KG=60114,XG=60109,QG=60110,YG=60112,$G=60113,ZG=60120,JG=60115,eq=60116,tq=60121,nq=60122,rq=60117,aq=60129,oq=60131;
/** @license React v17.0.1
	 * react-is.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */if("function"==typeof Symbol&&Symbol.for){var iq=Symbol.for;jG=iq("react.element"),HG=iq("react.portal"),GG=iq("react.fragment"),qG=iq("react.strict_mode"),KG=iq("react.profiler"),XG=iq("react.provider"),QG=iq("react.context"),YG=iq("react.forward_ref"),$G=iq("react.suspense"),ZG=iq("react.suspense_list"),JG=iq("react.memo"),eq=iq("react.lazy"),tq=iq("react.block"),nq=iq("react.server.block"),rq=iq("react.fundamental"),aq=iq("react.debug_trace_mode"),oq=iq("react.legacy_hidden")}function sq(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case jG:switch(e=e.type){case GG:case KG:case qG:case $G:case ZG:return e;default:switch(e=e&&e.$$typeof){case QG:case YG:case eq:case JG:case XG:return e;default:return t}}case HG:return t}}}var uq=XG,cq=jG,lq=YG,dq=GG,pq=eq,fq=JG,hq=HG,mq=KG,gq=qG,vq=$G,yq=QG,bq=uq,xq=cq,kq=lq,wq=dq,Iq=pq,Cq=fq,Sq=hq,Eq=mq,Tq=gq,Nq=vq,Aq=function(){return!1},_q=function(){return!1},Rq=function(e){return sq(e)===QG},Oq=function(e){return sq(e)===XG},Fq=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===jG},Mq=function(e){return sq(e)===YG},Dq=function(e){return sq(e)===GG},Bq=function(e){return sq(e)===eq},Pq=function(e){return sq(e)===JG},Lq=function(e){return sq(e)===HG},Uq=function(e){return sq(e)===KG},Vq=function(e){return sq(e)===qG},Wq=function(e){return sq(e)===$G},zq=function(e){return"string"==typeof e||"function"==typeof e||e===GG||e===KG||e===aq||e===qG||e===$G||e===ZG||e===oq||"object"==typeof e&&null!==e&&(e.$$typeof===eq||e.$$typeof===JG||e.$$typeof===XG||e.$$typeof===QG||e.$$typeof===YG||e.$$typeof===rq||e.$$typeof===tq||e[0]===nq)},jq=sq,Hq={ContextConsumer:yq,ContextProvider:bq,Element:xq,ForwardRef:kq,Fragment:wq,Lazy:Iq,Memo:Cq,Portal:Sq,Profiler:Eq,StrictMode:Tq,Suspense:Nq,isAsyncMode:Aq,isConcurrentMode:_q,isContextConsumer:Rq,isContextProvider:Oq,isElement:Fq,isForwardRef:Mq,isFragment:Dq,isLazy:Bq,isMemo:Pq,isPortal:Lq,isProfiler:Uq,isStrictMode:Vq,isSuspense:Wq,isValidElementType:zq,typeOf:jq},Gq=(i((function(e,t){})),i((function(e){e.exports=Hq})));function qq(e){function t(e,r,u,c,p){for(var f,h,m,g,x,w=0,I=0,C=0,S=0,E=0,O=0,M=m=f=0,B=0,P=0,L=0,U=0,V=u.length,W=V-1,z="",j="",H="",G="";B<V;){if(h=u.charCodeAt(B),B===W&&0!==I+S+C+w&&(0!==I&&(h=47===I?10:47),S=C=w=0,V++,W++),0===I+S+C+w){if(B===W&&(0<P&&(z=z.replace(d,"")),0<z.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:z+=u.charAt(B)}h=59}switch(h){case 123:for(f=(z=z.trim()).charCodeAt(0),m=1,U=++B;B<V;){switch(h=u.charCodeAt(B)){case 123:m++;break;case 125:m--;break;case 47:switch(h=u.charCodeAt(B+1)){case 42:case 47:e:{for(M=B+1;M<W;++M)switch(u.charCodeAt(M)){case 47:if(42===h&&42===u.charCodeAt(M-1)&&B+2!==M){B=M+1;break e}break;case 10:if(47===h){B=M+1;break e}}B=M}}break;case 91:h++;case 40:h++;case 34:case 39:for(;B++<W&&u.charCodeAt(B)!==h;);}if(0===m)break;B++}switch(m=u.substring(U,B),0===f&&(f=(z=z.replace(l,"").trim()).charCodeAt(0)),f){case 64:switch(0<P&&(z=z.replace(d,"")),h=z.charCodeAt(1)){case 100:case 109:case 115:case 45:P=r;break;default:P=R}if(U=(m=t(r,P,m,h,p+1)).length,0<F&&(x=s(3,m,P=n(R,z,L),r,N,T,U,h,p,c),z=P.join(""),void 0!==x&&0===(U=(m=x.trim()).length)&&(h=0,m="")),0<U)switch(h){case 115:z=z.replace(k,i);case 100:case 109:case 45:m=z+"{"+m+"}";break;case 107:m=(z=z.replace(v,"$1 $2"))+"{"+m+"}",m=1===_||2===_&&o("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=z+m,112===c&&(j+=m,m="")}else m="";break;default:m=t(r,n(r,z,L),m,c,p+1)}H+=m,m=L=P=M=f=0,z="",h=u.charCodeAt(++B);break;case 125:case 59:if(1<(U=(z=(0<P?z.replace(d,""):z).trim()).length))switch(0===M&&(f=z.charCodeAt(0),45===f||96<f&&123>f)&&(U=(z=z.replace(" ",":")).length),0<F&&void 0!==(x=s(1,z,r,e,N,T,j.length,c,p,c))&&0===(U=(z=x.trim()).length)&&(z="\0\0"),f=z.charCodeAt(0),h=z.charCodeAt(1),f){case 0:break;case 64:if(105===h||99===h){G+=z+u.charAt(B);break}default:58!==z.charCodeAt(U-1)&&(j+=a(z,f,h,z.charCodeAt(2)))}L=P=M=f=0,z="",h=u.charCodeAt(++B)}}switch(h){case 13:case 10:47===I?I=0:0===1+f&&107!==c&&0<z.length&&(P=1,z+="\0"),0<F*D&&s(0,z,r,e,N,T,j.length,c,p,c),T=1,N++;break;case 59:case 125:if(0===I+S+C+w){T++;break}default:switch(T++,g=u.charAt(B),h){case 9:case 32:if(0===S+w+I)switch(E){case 44:case 58:case 9:case 32:g="";break;default:32!==h&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===S+I+w&&(P=L=1,g="\f"+g);break;case 108:if(0===S+I+w+A&&0<M)switch(B-M){case 2:112===E&&58===u.charCodeAt(B-3)&&(A=E);case 8:111===O&&(A=O)}break;case 58:0===S+I+w&&(M=B);break;case 44:0===I+C+S+w&&(P=1,g+="\r");break;case 34:case 39:0===I&&(S=S===h?0:0===S?h:S);break;case 91:0===S+I+C&&w++;break;case 93:0===S+I+C&&w--;break;case 41:0===S+I+w&&C--;break;case 40:if(0===S+I+w){if(0===f)switch(2*E+3*O){case 533:break;default:f=1}C++}break;case 64:0===I+C+S+w+M+m&&(m=1);break;case 42:case 47:if(!(0<S+w+C))switch(I){case 0:switch(2*h+3*u.charCodeAt(B+1)){case 235:I=47;break;case 220:U=B,I=42}break;case 42:47===h&&42===E&&U+2!==B&&(33===u.charCodeAt(U+2)&&(j+=u.substring(U,B+1)),g="",I=0)}}0===I&&(z+=g)}O=E,E=h,B++}if(0<(U=j.length)){if(P=r,0<F&&(void 0!==(x=s(2,j,P,e,N,T,U,c,p,c))&&0===(j=x).length))return G+j+H;if(j=P.join(",")+"{"+j+"}",0!=_*A){switch(2!==_||o(j,2)||(A=0),A){case 111:j=j.replace(b,":-moz-$1")+j;break;case 112:j=j.replace(y,"::-webkit-input-$1")+j.replace(y,"::-moz-$1")+j.replace(y,":-ms-input-$1")+j}A=0}}return G+j+H}function n(e,t,n){var a=t.trim().split(m);t=a;var o=a.length,i=e.length;switch(i){case 0:case 1:var s=0;for(e=0===i?"":e[0]+" ";s<o;++s)t[s]=r(e,t[s],n).trim();break;default:var u=s=0;for(t=[];s<o;++s)for(var c=0;c<i;++c)t[u++]=r(e[c]+" ",a[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function a(e,t,n,r){var i=e+";",s=2*t+3*n+4*r;if(944===s){e=i.indexOf(":",9)+1;var u=i.substring(e,i.length-1).trim();return u=i.substring(0,e).trim()+u+";",1===_||2===_&&o(u,1)?"-webkit-"+u+u:u}if(0===_||2===_&&!o(i,1))return i;switch(s){case 1015:return 97===i.charCodeAt(10)?"-webkit-"+i+i:i;case 951:return 116===i.charCodeAt(3)?"-webkit-"+i+i:i;case 963:return 110===i.charCodeAt(5)?"-webkit-"+i+i:i;case 1009:if(100!==i.charCodeAt(4))break;case 969:case 942:return"-webkit-"+i+i;case 978:return"-webkit-"+i+"-moz-"+i+i;case 1019:case 983:return"-webkit-"+i+"-moz-"+i+"-ms-"+i+i;case 883:if(45===i.charCodeAt(8))return"-webkit-"+i+i;if(0<i.indexOf("image-set(",11))return i.replace(E,"$1-webkit-$2")+i;break;case 932:if(45===i.charCodeAt(4))switch(i.charCodeAt(5)){case 103:return"-webkit-box-"+i.replace("-grow","")+"-webkit-"+i+"-ms-"+i.replace("grow","positive")+i;case 115:return"-webkit-"+i+"-ms-"+i.replace("shrink","negative")+i;case 98:return"-webkit-"+i+"-ms-"+i.replace("basis","preferred-size")+i}return"-webkit-"+i+"-ms-"+i+i;case 964:return"-webkit-"+i+"-ms-flex-"+i+i;case 1023:if(99!==i.charCodeAt(8))break;return"-webkit-box-pack"+(u=i.substring(i.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+i+"-ms-flex-pack"+u+i;case 1005:return f.test(i)?i.replace(p,":-webkit-")+i.replace(p,":-moz-")+i:i;case 1e3:switch(t=(u=i.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=i.replace(x,"tb");break;case 232:u=i.replace(x,"tb-rl");break;case 220:u=i.replace(x,"lr");break;default:return i}return"-webkit-"+i+"-ms-"+u+i;case 1017:if(-1===i.indexOf("sticky",9))break;case 975:switch(t=(i=e).length-10,s=(u=(33===i.charCodeAt(t)?i.substring(0,t):i).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:i=i.replace(u,"-webkit-"+u)+";"+i;break;case 207:case 102:i=i.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+i.replace(u,"-webkit-"+u)+";"+i.replace(u,"-ms-"+u+"box")+";"+i}return i+";";case 938:if(45===i.charCodeAt(5))switch(i.charCodeAt(6)){case 105:return u=i.replace("-items",""),"-webkit-"+i+"-webkit-box-"+u+"-ms-flex-"+u+i;case 115:return"-webkit-"+i+"-ms-flex-item-"+i.replace(I,"")+i;default:return"-webkit-"+i+"-ms-flex-line-pack"+i.replace("align-content","").replace(I,"")+i}break;case 973:case 989:if(45!==i.charCodeAt(3)||122===i.charCodeAt(4))break;case 931:case 953:if(!0===S.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):i.replace(u,"-webkit-"+u)+i.replace(u,"-moz-"+u.replace("fill-",""))+i;break;case 962:if(i="-webkit-"+i+(102===i.charCodeAt(5)?"-ms-"+i:"")+i,211===n+r&&105===i.charCodeAt(13)&&0<i.indexOf("transform",10))return i.substring(0,i.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+i}return i}function o(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),M(2!==t?r:r.replace(C,"$1"),n,t)}function i(e,t){var n=a(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,a,o,i,s,u,l){for(var d,p=0,f=t;p<F;++p)switch(d=O[p].call(c,e,f,n,r,a,o,i,s,u,l)){case void 0:case!1:case!0:case null:break;default:f=d}if(f!==t)return f}function u(e){return void 0!==(e=e.prefix)&&(M=null,e?"function"!=typeof e?_=1:(_=2,M=e):_=0),u}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<F){var a=s(-1,n,r,r,N,T,0,0,0,0);void 0!==a&&"string"==typeof a&&(n=a)}var o=t(R,r,n,0,0);return 0<F&&(void 0!==(a=s(-2,o,r,r,N,T,o.length,0,0,0))&&(o=a)),"",A=0,T=N=1,o}var l=/^\0+/g,d=/[\0\r\f]/g,p=/: */g,f=/zoo|gra/,h=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,k=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,I=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,S=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,T=1,N=1,A=0,_=1,R=[],O=[],F=0,M=null,D=0;return c.use=function e(t){switch(t){case void 0:case null:F=O.length=0;break;default:if("function"==typeof t)O[F++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else D=0|!!t}return e},c.set=u,void 0!==e&&u(e),c}var Kq={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Xq(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Qq=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Yq=Xq((function(e){return Qq.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),$q="function"==typeof Symbol&&Symbol.for,Zq=$q?Symbol.for("react.element"):60103,Jq=$q?Symbol.for("react.portal"):60106,eK=$q?Symbol.for("react.fragment"):60107,tK=$q?Symbol.for("react.strict_mode"):60108,nK=$q?Symbol.for("react.profiler"):60114,rK=$q?Symbol.for("react.provider"):60109,aK=$q?Symbol.for("react.context"):60110,oK=$q?Symbol.for("react.async_mode"):60111,iK=$q?Symbol.for("react.concurrent_mode"):60111,sK=$q?Symbol.for("react.forward_ref"):60112,uK=$q?Symbol.for("react.suspense"):60113,cK=$q?Symbol.for("react.suspense_list"):60120,lK=$q?Symbol.for("react.memo"):60115,dK=$q?Symbol.for("react.lazy"):60116,pK=$q?Symbol.for("react.block"):60121,fK=$q?Symbol.for("react.fundamental"):60117,hK=$q?Symbol.for("react.responder"):60118,mK=$q?Symbol.for("react.scope"):60119;function gK(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Zq:switch(e=e.type){case oK:case iK:case eK:case nK:case tK:case uK:return e;default:switch(e=e&&e.$$typeof){case aK:case sK:case dK:case lK:case rK:return e;default:return t}}case Jq:return t}}}function vK(e){return gK(e)===iK}var yK=oK,bK=iK,xK=aK,kK=rK,wK=Zq,IK=sK,CK=eK,SK=dK,EK=lK,TK=Jq,NK=nK,AK=tK,_K=uK,RK=function(e){return vK(e)||gK(e)===oK},OK=vK,FK=function(e){return gK(e)===aK},MK=function(e){return gK(e)===rK},DK=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Zq},BK=function(e){return gK(e)===sK},PK=function(e){return gK(e)===eK},LK=function(e){return gK(e)===dK},UK=function(e){return gK(e)===lK},VK=function(e){return gK(e)===Jq},WK=function(e){return gK(e)===nK},zK=function(e){return gK(e)===tK},jK=function(e){return gK(e)===uK},HK=function(e){return"string"==typeof e||"function"==typeof e||e===eK||e===iK||e===nK||e===tK||e===uK||e===cK||"object"==typeof e&&null!==e&&(e.$$typeof===dK||e.$$typeof===lK||e.$$typeof===rK||e.$$typeof===aK||e.$$typeof===sK||e.$$typeof===fK||e.$$typeof===hK||e.$$typeof===mK||e.$$typeof===pK)},GK=gK,qK={AsyncMode:yK,ConcurrentMode:bK,ContextConsumer:xK,ContextProvider:kK,Element:wK,ForwardRef:IK,Fragment:CK,Lazy:SK,Memo:EK,Portal:TK,Profiler:NK,StrictMode:AK,Suspense:_K,isAsyncMode:RK,isConcurrentMode:OK,isContextConsumer:FK,isContextProvider:MK,isElement:DK,isForwardRef:BK,isFragment:PK,isLazy:LK,isMemo:UK,isPortal:VK,isProfiler:WK,isStrictMode:zK,isSuspense:jK,isValidElementType:HK,typeOf:GK},KK=(i((function(e,t){})),i((function(e){e.exports=qK}))),XK={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},QK={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},YK={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},$K={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ZK={};function JK(e){return KK.isMemo(e)?$K:ZK[e.$$typeof]||XK}ZK[KK.ForwardRef]=YK,ZK[KK.Memo]=$K;var eX=Object.defineProperty,tX=Object.getOwnPropertyNames,nX=Object.getOwnPropertySymbols,rX=Object.getOwnPropertyDescriptor,aX=Object.getPrototypeOf,oX=Object.prototype;function iX(e,t,n){if("string"!=typeof t){if(oX){var r=aX(t);r&&r!==oX&&iX(e,r,n)}var a=tX(t);nX&&(a=a.concat(nX(t)));for(var o=JK(e),i=JK(t),s=0;s<a.length;++s){var u=a[s];if(!(QK[u]||n&&n[u]||i&&i[u]||o&&o[u])){var c=rX(t,u);try{eX(e,u,c)}catch(e){}}}}return e}var sX=iX;function uX(){return(uX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var cX=function(e,t){for(var n=[e[0]],r=0,a=t.length;r<a;r+=1)n.push(t[r],e[r+1]);return n},lX=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!Gq.typeOf(e)},dX=Object.freeze([]),pX=Object.freeze({});function fX(e){return"function"==typeof e}function hX(e){return e.displayName||e.name||"Component"}function mX(e){return e&&"string"==typeof e.styledComponentId}var gX="undefined"!=typeof process&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",vX="undefined"!=typeof window&&"HTMLElement"in window,yX=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&("false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY)),bX={};function xX(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var kX=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,a=r;e>=a;)(a<<=1)<0&&xX(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var o=r;o<a;o++)this.groupSizes[o]=0}for(var i=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(i,t[s])&&(this.groupSizes[e]++,i++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var a=n;a<r;a++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n,o=r;o<a;o++)t+=this.tag.getRule(o)+"/*!sc*/\n";return t},e}(),wX=new Map,IX=new Map,CX=1,SX=function(e){if(wX.has(e))return wX.get(e);for(;IX.has(CX);)CX++;var t=CX++;return wX.set(e,t),IX.set(t,e),t},EX=function(e){return IX.get(e)},TX=function(e,t){wX.set(e,t),IX.set(t,e)},NX="style["+gX+'][data-styled-version="5.2.1"]',AX=new RegExp("^"+gX+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),_X=function(e,t,n){for(var r,a=n.split(","),o=0,i=a.length;o<i;o++)(r=a[o])&&e.registerName(t,r)},RX=function(e,t){for(var n=t.innerHTML.split("/*!sc*/\n"),r=[],a=0,o=n.length;a<o;a++){var i=n[a].trim();if(i){var s=i.match(AX);if(s){var u=0|parseInt(s[1],10),c=s[2];0!==u&&(TX(c,u),_X(e,c,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(i)}}},OX=function(){return"undefined"!=typeof __webpack_nonce__?__webpack_nonce__:null},FX=function(e){var t=document.head,n=e||t,r=document.createElement("style"),a=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(gX))return r}}(n),o=void 0!==a?a.nextSibling:null;r.setAttribute(gX,"active"),r.setAttribute("data-styled-version","5.2.1");var i=OX();return i&&r.setAttribute("nonce",i),n.insertBefore(r,o),r},MX=function(){function e(e){var t=this.element=FX(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var a=t[n];if(a.ownerNode===e)return a}xX(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),DX=function(){function e(e){var t=this.element=FX(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),BX=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),PX=vX,LX={isServer:!vX,useCSSOMInjection:!yX},UX=function(){function e(e,t,n){void 0===e&&(e=pX),void 0===t&&(t={}),this.options=uX({},LX,{},e),this.gs=t,this.names=new Map(n),!this.options.isServer&&vX&&PX&&(PX=!1,function(e){for(var t=document.querySelectorAll(NX),n=0,r=t.length;n<r;n++){var a=t[n];a&&"active"!==a.getAttribute(gX)&&(RX(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return SX(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(uX({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,a=t.target,e=n?new BX(a):r?new MX(a):new DX(a),new kX(e)));var e,t,n,r,a},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(SX(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(SX(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(SX(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",a=0;a<n;a++){var o=EX(a);if(void 0!==o){var i=e.names.get(o),s=t.getGroup(a);if(void 0!==i&&0!==s.length){var u=gX+".g"+a+'[id="'+o+'"]',c="";void 0!==i&&i.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+u+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),VX=/(a)(d)/gi,WX=function(e){return String.fromCharCode(e+(e>25?39:97))};function zX(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=WX(t%52)+n;return(WX(t%52)+n).replace(VX,"$1-$2")}var jX=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},HX=function(e){return jX(5381,e)};function GX(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(fX(n)&&!mX(n))return!1}return!0}var qX=HX("5.2.1"),KX=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&GX(e),this.componentId=t,this.baseHash=jX(qX,t),this.baseStyle=n,UX.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var o=lQ(this.rules,e,t,n).join(""),i=zX(jX(this.baseHash,o.length)>>>0);if(!t.hasNameForId(r,i)){var s=n(o,"."+i,void 0,r);t.insertRules(r,i,s)}a.push(i),this.staticRulesId=i}else{for(var u=this.rules.length,c=jX(this.baseHash,n.hash),l="",d=0;d<u;d++){var p=this.rules[d];if("string"==typeof p)l+=p;else if(p){var f=lQ(p,e,t,n),h=Array.isArray(f)?f.join(""):f;c=jX(c,h+d),l+=h}}if(l){var m=zX(c>>>0);if(!t.hasNameForId(r,m)){var g=n(l,"."+m,void 0,r);t.insertRules(r,m,g)}a.push(m)}}return a.join(" ")},e}(),XX=/^\s*\/\/.*$/gm,QX=[":","[",".","#"];function YX(e){var t,n,r,a,o=void 0===e?pX:e,i=o.options,s=void 0===i?pX:i,u=o.plugins,c=void 0===u?dX:u,l=new qq(s),d=[],p=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,a,o,i,s,u,c,l,d){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(a[0]+r),"";default:return r+(0===d?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){d.push(e)})),f=function(e,r,o){return 0===r&&QX.includes(o[n.length])||o.match(a)?e:"."+t};function h(e,o,i,s){void 0===s&&(s="&");var u=e.replace(XX,""),c=o&&i?i+" "+o+" { "+u+" }":u;return t=s,n=o,r=new RegExp("\\"+n+"\\b","g"),a=new RegExp("(\\"+n+"\\b){2,}"),l(i||!o?"":o,c)}return l.use([].concat(c,[function(e,t,a){2===e&&a.length&&a[0].lastIndexOf(n)>0&&(a[0]=a[0].replace(r,f))},p,function(e){if(-2===e){var t=d;return d=[],t}}])),h.hash=c.length?c.reduce((function(e,t){return t.name||xX(15),jX(e,t.name)}),5381).toString():"",h}var $X=Tx.createContext(),ZX=($X.Consumer,Tx.createContext()),JX=(ZX.Consumer,new UX),eQ=YX();function tQ(){return Tx.useContext($X)||JX}function nQ(){return Tx.useContext(ZX)||eQ}var rQ=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=eQ);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return xX(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=eQ),this.name+e.hash},e}(),aQ=/([A-Z])/,oQ=/([A-Z])/g,iQ=/^ms-/,sQ=function(e){return"-"+e.toLowerCase()};function uQ(e){return aQ.test(e)?e.replace(oQ,sQ).replace(iQ,"-ms-"):e}var cQ=function(e){return null==e||!1===e||""===e};function lQ(e,t,n,r){if(Array.isArray(e)){for(var a,o=[],i=0,s=e.length;i<s;i+=1)""!==(a=lQ(e[i],t,n,r))&&(Array.isArray(a)?o.push.apply(o,a):o.push(a));return o}return cQ(e)?"":mX(e)?"."+e.styledComponentId:fX(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:lQ(e(t),t,n,r):e instanceof rQ?n?(e.inject(n,r),e.getName(r)):e:lX(e)?function e(t,n){var r,a,o=[];for(var i in t)t.hasOwnProperty(i)&&!cQ(t[i])&&(lX(t[i])?o.push.apply(o,e(t[i],i)):fX(t[i])?o.push(uQ(i)+":",t[i],";"):o.push(uQ(i)+": "+(r=i,(null==(a=t[i])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in Kq?String(a).trim():a+"px")+";")));return n?[n+" {"].concat(o,["}"]):o}(e):e.toString();var u}function dQ(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fX(e)||lX(e)?lQ(cX(dX,[e].concat(n))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:lQ(cX(e,n))}var pQ=function(e,t,n){return void 0===n&&(n=pX),e.theme!==n.theme&&e.theme||t||n.theme},fQ=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,hQ=/(^-|-$)/g;function mQ(e){return e.replace(fQ,"-").replace(hQ,"")}var gQ=function(e){return zX(HX(e)>>>0)};function vQ(e){return"string"==typeof e&&!0}var yQ=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},bQ=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function xQ(e,t,n){var r=e[n];yQ(t)&&yQ(r)?kQ(r,t):e[n]=t}function kQ(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,o=n;a<o.length;a++){var i=o[a];if(yQ(i))for(var s in i)bQ(s)&&xQ(e,i[s],s)}return e}var wQ=Tx.createContext(),IQ=(wQ.Consumer,{});function CQ(e,t,n){var r=mX(e),a=!vQ(e),o=t.attrs,i=void 0===o?dX:o,s=t.componentId,u=void 0===s?function(e,t){var n="string"!=typeof e?"sc":mQ(e);IQ[n]=(IQ[n]||0)+1;var r=n+"-"+gQ("5.2.1"+n+IQ[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):s,c=t.displayName,l=void 0===c?function(e){return vQ(e)?"styled."+e:"Styled("+hX(e)+")"}(e):c,d=t.displayName&&t.componentId?mQ(t.displayName)+"-"+t.componentId:t.componentId||u,p=r&&e.attrs?Array.prototype.concat(e.attrs,i).filter(Boolean):i,f=t.shouldForwardProp;r&&e.shouldForwardProp&&(f=t.shouldForwardProp?function(n,r){return e.shouldForwardProp(n,r)&&t.shouldForwardProp(n,r)}:e.shouldForwardProp);var h,m=new KX(n,d,r?e.componentStyle:void 0),g=m.isStatic&&0===i.length,v=function(e,t){return function(e,t,n,r){var a=e.attrs,o=e.componentStyle,i=e.defaultProps,s=e.foldedComponentIds,u=e.shouldForwardProp,c=e.styledComponentId,l=e.target,d=function(e,t,n){void 0===e&&(e=pX);var r=uX({},t,{theme:e}),a={};return n.forEach((function(e){var t,n,o,i=e;for(t in fX(i)&&(i=i(r)),i)r[t]=a[t]="className"===t?(n=a[t],o=i[t],n&&o?n+" "+o:n||o):i[t]})),[r,a]}(pQ(t,Tx.useContext(wQ),i)||pX,t,a),p=d[0],f=d[1],h=function(e,t,n,r){var a=tQ(),o=nQ();return t?e.generateAndInjectStyles(pX,a,o):e.generateAndInjectStyles(n,a,o)}(o,r,p),m=n,g=f.$as||t.$as||f.as||t.as||l,v=vQ(g),y=f!==t?uX({},t,{},f):t,b={};for(var x in y)"$"!==x[0]&&"as"!==x&&("forwardedAs"===x?b.as=y[x]:(u?u(x,Yq):!v||Yq(x))&&(b[x]=y[x]));return t.style&&f.style!==t.style&&(b.style=uX({},t.style,{},f.style)),b.className=Array.prototype.concat(s,c,h!==c?h:null,t.className,f.className).filter(Boolean).join(" "),b.ref=m,Tx.createElement(g,b)}(h,e,t,g)};return v.displayName=l,(h=Tx.forwardRef(v)).attrs=p,h.componentStyle=m,h.displayName=l,h.shouldForwardProp=f,h.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):dX,h.styledComponentId=d,h.target=r?e.target:e,h.withComponent=function(e){var r=t.componentId,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["componentId"]),o=r&&r+"-"+(vQ(e)?e:mQ(hX(e)));return CQ(e,uX({},a,{attrs:p,componentId:o}),n)},Object.defineProperty(h,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?kQ({},e.defaultProps,t):t}}),h.toString=function(){return"."+h.styledComponentId},a&&sX(h,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),h}var SQ=function(e){return function e(t,n,r){if(void 0===r&&(r=pX),!Gq.isValidElementType(n))return xX(1,String(n));var a=function(){return t(n,r,dQ.apply(void 0,arguments))};return a.withConfig=function(a){return e(t,n,uX({},r,{},a))},a.attrs=function(a){return e(t,n,uX({},r,{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},a}(CQ,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){SQ[e]=SQ(e)}));var EQ=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=GX(e),UX.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,r){var a=r(lQ(this.rules,t,n,r).join(""),""),o=this.componentId+e;n.insertRules(o,o,a)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&UX.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();function TQ(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=dQ.apply(void 0,[e].concat(n)),o="sc-global-"+gQ(JSON.stringify(a)),i=new EQ(a,o);function s(e){var t=tQ(),n=nQ(),r=Tx.useContext(wQ),a=Tx.useRef(t.allocateGSInstance(o)).current;return Tx.useLayoutEffect((function(){return u(a,e,t,r,n),function(){return i.removeStyles(a,t)}}),[a,e,t,r,n]),null}function u(e,t,n,r,a){if(i.isStatic)i.renderStyles(e,bX,n,a);else{var o=uX({},t,{theme:pQ(t,r,s.defaultProps)});i.renderStyles(e,o,n,a)}}return Tx.memo(s)}function NQ(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=dQ.apply(void 0,[e].concat(n)).join(""),o=gQ(a);return new rQ(o,a)}function AQ(e){return(AQ="function"==typeof Symbol&&"symbol"==Ty(Symbol.iterator)?function(e){return Ty(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Ty(e)})(e)}function _Q(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function RQ(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){_Q(o,r,a,i,s,"next",e)}function s(e){_Q(o,r,a,i,s,"throw",e)}i(void 0)}))}}function OQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MQ(){return(MQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function DQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DQ(Object(n),!0).forEach((function(t){FQ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PQ(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function LQ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||VQ(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UQ(e){return function(e){if(Array.isArray(e))return WQ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||VQ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VQ(e,t){if(e){if("string"==typeof e)return WQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?WQ(e,t):void 0}}function WQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zQ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function jQ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function HQ(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}function GQ(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var qQ=HQ((function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){e.exports={BROWSER_TYPES:{CHROME:"Chrome",FIREFOX:"Firefox",OPERA:"Opera",YANDEX:"Yandex",SAFARI:"Safari",INTERNET_EXPLORER:"Internet Explorer",EDGE:"Edge",CHROMIUM:"Chromium",IE:"IE",MOBILE_SAFARI:"Mobile Safari",EDGE_CHROMIUM:"Edge Chromium"},DEVICE_TYPES:{MOBILE:"mobile",TABLET:"tablet",SMART_TV:"smarttv",CONSOLE:"console",WEARABLE:"wearable",BROWSER:void 0},OS_TYPES:{IOS:"iOS",ANDROID:"Android",WINDOWS_PHONE:"Windows Phone",WINDOWS:"Windows",MAC_OS:"Mac OS"},defaultData:{isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1}}},function(e,t,n){var r,a=n(2),o=n(0),i=o.BROWSER_TYPES,s=o.OS_TYPES,u=o.DEVICE_TYPES,c=n(4),l=c.checkType,d=c.broPayload,p=c.mobilePayload,f=c.wearPayload,h=c.consolePayload,m=c.stvPayload,g=c.getNavigatorInstance,v=c.isIOS13Check,y=new a,b=y.getBrowser(),x=y.getDevice(),k=y.getEngine(),w=y.getOS(),I=y.getUA(),C=i.CHROME,S=i.CHROMIUM,E=i.IE,T=i.INTERNET_EXPLORER,N=i.OPERA,A=i.FIREFOX,_=i.SAFARI,R=i.EDGE,O=i.YANDEX,F=i.MOBILE_SAFARI,M=u.MOBILE,D=u.TABLET,B=u.SMART_TV,P=u.BROWSER,L=u.WEARABLE,U=u.CONSOLE,V=s.ANDROID,W=s.WINDOWS_PHONE,z=s.IOS,j=s.WINDOWS,H=s.MAC_OS,G=function(){return w.name===s.WINDOWS&&"10"===w.version&&"string"==typeof I&&-1!==I.indexOf("Edg/")},q=function(){return b.name===R},K=function(){return v("iPad")},X=x.type===B,Q=x.type===U,Y=x.type===L,$=b.name===F||K(),Z=b.name===S,J=function(){switch(x.type){case M:case D:return!0;default:return!1}}()||K(),ee=x.type===M,te=x.type===D||K(),ne=x.type===P,re=w.name===V,ae=w.name===W,oe=w.name===z||K(),ie=b.name===C,se=b.name===A,ue=b.name===_||b.name===F,ce=b.name===N,le=b.name===T||b.name===E,de=w.version?w.version:"none",pe=w.name?w.name:"none",fe=b.major,he=b.version,me=b.name,ge=x.vendor?x.vendor:"none",ve=x.model?x.model:"none",ye=k.name,be=k.version,xe=I,ke=q()||G(),we=b.name===O,Ie=x.type,Ce=(r=g())&&(/iPad|iPhone|iPod/.test(r.platform)||"MacIntel"===r.platform&&r.maxTouchPoints>1)&&!window.MSStream,Se=K(),Ee=v("iPhone"),Te=v("iPod"),Ne=function(){var e=g(),t=e&&e.userAgent.toLowerCase();return"string"==typeof t&&/electron/.test(t)}(),Ae=G(),_e=q(),Re=w.name===j,Oe=w.name===H,Fe=l(x.type);e.exports={deviceDetect:function(){var e=Fe.isBrowser,t=Fe.isMobile,n=Fe.isTablet,r=Fe.isSmartTV,a=Fe.isConsole,o=Fe.isWearable;return e?d(e,b,k,w,I):r?m(r,k,w,I):a?h(a,k,w,I):t||n?p(Fe,x,w,I):o?f(o,k,w,I):void 0},isSmartTV:X,isConsole:Q,isWearable:Y,isMobileSafari:$,isChromium:Z,isMobile:J,isMobileOnly:ee,isTablet:te,isBrowser:ne,isAndroid:re,isWinPhone:ae,isIOS:oe,isChrome:ie,isFirefox:se,isSafari:ue,isOpera:ce,isIE:le,osVersion:de,osName:pe,fullBrowserVersion:fe,browserVersion:he,browserName:me,mobileVendor:ge,mobileModel:ve,engineName:ye,engineVersion:be,getUA:xe,isEdge:ke,isYandex:we,deviceType:Ie,isIOS13:Ce,isIPad13:Se,isIPhone13:Ee,isIPod13:Te,isElectron:Ne,isEdgeChromium:Ae,isLegacyEdge:_e,isWindows:Re,isMacOs:Oe}},function(e,t,n){var r;
/*!
	     * UAParser.js v0.7.18
	     * Lightweight JavaScript-based User-Agent string parser
	     * https://github.com/faisalman/ua-parser-js
	     *
	     * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
	     * Dual licensed under GPLv2 or MIT
	     */!function(a,o){var i="function",s="undefined",u="object",c="model",l="name",d="type",p="vendor",f="version",h="architecture",m="console",g="mobile",v="tablet",y="smarttv",b="wearable",x={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},k={rgx:function(e,t){for(var n,r,a,s,c,l,d=0;d<t.length&&!c;){var p=t[d],f=t[d+1];for(n=r=0;n<p.length&&!c;)if(c=p[n++].exec(e))for(a=0;a<f.length;a++)l=c[++r],Ty(s=f[a])===u&&s.length>0?2==s.length?Ty(s[1])==i?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3==s.length?Ty(s[1])!==i||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):o:this[s[0]]=l?s[1].call(this,l,s[2]):o:4==s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):o):this[s]=l||o;d+=2}},str:function(e,t){for(var n in t)if(Ty(t[n])===u&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(x.has(t[n][r],e))return"?"===n?o:n}else if(x.has(t[n],e))return"?"===n?o:n;return e}},w={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},I={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[l,f],[/(opios)[\/\s]+([\w\.]+)/i],[[l,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[l,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[l,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[l,"IE"],f],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[l,"Edge"],f],[/(yabrowser)\/([\w\.]+)/i],[[l,"Yandex"],f],[/(puffin)\/([\w\.]+)/i],[[l,"Puffin"],f],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[l,"UCBrowser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],f],[/(micromessenger)\/([\w\.]+)/i],[[l,"WeChat"],f],[/(qqbrowserlite)\/([\w\.]+)/i],[l,f],[/(QQ)\/([\d\.]+)/i],[l,f],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[l,f],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[l,f],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[l,f],[/(MetaSr)[\/\s]?([\w\.]+)/i],[l],[/(LBBROWSER)/i],[l],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[l,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[f,[l,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[f,[l,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[l,/(.+)/,"$1 WebView"],f],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[l,/(.+(?:g|us))(.+)/,"$1 $2"],f],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[l,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[l,f],[/(dolfin)\/([\w\.]+)/i],[[l,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[l,"Chrome"],f],[/(coast)\/([\w\.]+)/i],[[l,"Opera Coast"],f],[/fxios\/([\w\.-]+)/i],[f,[l,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[l,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,l],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[l,"GSA"],f],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[l,[f,k.str,w.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[l,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[l,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[l,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,x.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[h,/ower/,"",x.lowerize]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[h,x.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[c,p,[d,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[c,[p,"Apple"],[d,v]],[/(apple\s{0,1}tv)/i],[[c,"Apple TV"],[p,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[p,c,[d,v]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[c,[p,"Amazon"],[d,v]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[c,k.str,w.device.amazon.model],[p,"Amazon"],[d,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[c,p,[d,g]],[/\((ip[honed|\s\w*]+);/i],[c,[p,"Apple"],[d,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[p,c,[d,g]],[/\(bb10;\s(\w+)/i],[c,[p,"BlackBerry"],[d,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[c,[p,"Asus"],[d,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[p,"Sony"],[c,"Xperia Tablet"],[d,v]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[c,[p,"Sony"],[d,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[p,c,[d,m]],[/android.+;\s(shield)\sbuild/i],[c,[p,"Nvidia"],[d,m]],[/(playstation\s[34portablevi]+)/i],[c,[p,"Sony"],[d,m]],[/(sprint\s(\w+))/i],[[p,k.str,w.device.sprint.vendor],[c,k.str,w.device.sprint.model],[d,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[p,c,[d,v]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[p,[c,/_/g," "],[d,g]],[/(nexus\s9)/i],[c,[p,"HTC"],[d,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[c,[p,"Huawei"],[d,g]],[/(microsoft);\s(lumia[\s\w]+)/i],[p,c,[d,g]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[c,[p,"Microsoft"],[d,m]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[p,"Microsoft"],[d,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[c,[p,"Motorola"],[d,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[c,[p,"Motorola"],[d,v]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[p,x.trim],[c,x.trim],[d,y]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[p,"Samsung"],[d,y]],[/\(dtv[\);].+(aquos)/i],[c,[p,"Sharp"],[d,y]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[p,"Samsung"],c,[d,v]],[/smart-tv.+(samsung)/i],[p,[d,y],c],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[p,"Samsung"],c,[d,g]],[/sie-(\w*)/i],[c,[p,"Siemens"],[d,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[p,"Nokia"],c,[d,g]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[c,[p,"Acer"],[d,v]],[/android.+([vl]k\-?\d{3})\s+build/i],[c,[p,"LG"],[d,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[p,"LG"],c,[d,v]],[/(lg) netcast\.tv/i],[p,c,[d,y]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[c,[p,"LG"],[d,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[c,[p,"Lenovo"],[d,v]],[/linux;.+((jolla));/i],[p,c,[d,g]],[/((pebble))app\/[\d\.]+\s/i],[p,c,[d,b]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[p,c,[d,g]],[/crkey/i],[[c,"Chromecast"],[p,"Google"]],[/android.+;\s(glass)\s\d/i],[c,[p,"Google"],[d,b]],[/android.+;\s(pixel c)\s/i],[c,[p,"Google"],[d,v]],[/android.+;\s(pixel xl|pixel)\s/i],[c,[p,"Google"],[d,g]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[c,/_/g," "],[p,"Xiaomi"],[d,g]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[c,/_/g," "],[p,"Xiaomi"],[d,v]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[c,[p,"Meizu"],[d,v]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[c,[p,"OnePlus"],[d,g]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[c,[p,"RCA"],[d,v]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[c,[p,"Dell"],[d,v]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[c,[p,"Verizon"],[d,v]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[p,"Barnes & Noble"],c,[d,v]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[c,[p,"NuVision"],[d,v]],[/android.+;\s(k88)\sbuild/i],[c,[p,"ZTE"],[d,v]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[c,[p,"Swiss"],[d,g]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[c,[p,"Swiss"],[d,v]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[c,[p,"Zeki"],[d,v]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[p,"Dragon Touch"],c,[d,v]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[c,[p,"Insignia"],[d,v]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[c,[p,"NextBook"],[d,v]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[p,"Voice"],c,[d,g]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[p,"LvTel"],c,[d,g]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[c,[p,"Envizen"],[d,v]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[p,c,[d,v]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[c,[p,"MachSpeed"],[d,v]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[p,c,[d,v]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[c,[p,"Rotor"],[d,v]],[/android.+(KS(.+))\s+build/i],[c,[p,"Amazon"],[d,v]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[p,c,[d,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[d,x.lowerize],p,c],[/(android[\w\.\s\-]{0,9});.+build/i],[c,[p,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[l,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,f],[/rv\:([\w\.]{1,9}).+(gecko)/i],[f,l]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[l,[f,k.str,w.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[f,k.str,w.os.windows.version]],[/\((bb)(10);/i],[[l,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[l,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[l,"Symbian"],f],[/\((series40);/i],[l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[l,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],f],[/(sunos)\s?([\w\.\d]*)/i],[[l,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[l,f],[/(haiku)\s(\w+)/i],[l,f],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[f,/_/g,"."],[l,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[l,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[l,f]]},C=function e(t,n){if("object"==Ty(t)&&(n=t,t=o),!(this instanceof e))return new e(t,n).getResult();var r=t||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),i=n?x.extend(I,n):I;return this.getBrowser=function(){var e={name:o,version:o};return k.rgx.call(e,r,i.browser),e.major=x.major(e.version),e},this.getCPU=function(){var e={architecture:o};return k.rgx.call(e,r,i.cpu),e},this.getDevice=function(){var e={vendor:o,model:o,type:o};return k.rgx.call(e,r,i.device),e},this.getEngine=function(){var e={name:o,version:o};return k.rgx.call(e,r,i.engine),e},this.getOS=function(){var e={name:o,version:o};return k.rgx.call(e,r,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};C.VERSION="0.7.18",C.BROWSER={NAME:l,MAJOR:"major",VERSION:f},C.CPU={ARCHITECTURE:h},C.DEVICE={MODEL:c,VENDOR:p,TYPE:d,CONSOLE:m,MOBILE:g,SMARTTV:y,TABLET:v,WEARABLE:b,EMBEDDED:"embedded"},C.ENGINE={NAME:l,VERSION:f},C.OS={NAME:l,VERSION:f},Ty(t)!==s?(Ty(e)!==s&&e.exports&&(t=e.exports=C),t.UAParser=C):n(3)?(r=function(){return C}.call(t,n,t,e))===o||(e.exports=r):a&&(a.UAParser=C);var S=a&&(a.jQuery||a.Zepto);if(Ty(S)!==s){var E=new C;S.ua=E.getResult(),S.ua.get=function(){return E.getUA()},S.ua.set=function(e){E.setUA(e);var t=E.getResult();for(var n in t)S.ua[n]=t[n]}}}("object"==("undefined"==typeof window?"undefined":Ty(window))?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),o=a.DEVICE_TYPES,i=a.defaultData,s=t.getNavigatorInstance=function(){return!("undefined"==typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},u=t.isIOS13Check=function(e){var t=s();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)};e.exports={checkType:function(e){switch(e){case o.MOBILE:return{isMobile:!0};case o.TABLET:return{isTablet:!0};case o.SMART_TV:return{isSmartTV:!0};case o.CONSOLE:return{isConsole:!0};case o.WEARABLE:return{isWearable:!0};case o.BROWSER:return{isBrowser:!0};default:return i}},broPayload:function(e,t,n,r,a){return{isBrowser:e,browserMajorVersion:t.major,browserFullVersion:t.version,browserName:t.name,engineName:n.name||!1,engineVersion:n.version,osName:r.name,osVersion:r.version,userAgent:a}},mobilePayload:function(e,t,n,a){return r({},e,{vendor:t.vendor,model:t.model,os:n.name,osVersion:n.version,ua:a})},stvPayload:function(e,t,n,r){return{isSmartTV:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},consolePayload:function(e,t,n,r){return{isConsole:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},wearPayload:function(e,t,n,r){return{isWearable:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},getNavigatorInstance:s,isIOS13Check:u}}])})),KQ=jQ(qQ),XQ=Object.freeze(Object.assign(Object.create(null),qQ,{default:KQ}));function QQ(){return"function"==typeof navigator.enumerateDevices?navigator.enumerateDevices():"object"===AQ(navigator.mediaDevices)&&"function"==typeof navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices():new Promise((function(e,t){try{if(null==window.MediaStreamTrack||null==window.MediaStreamTrack.getSources)throw new Error;window.MediaStreamTrack.getSources((function(t){e(t.filter((function(e){return"video"===e.kind.toLowerCase()||"videoinput"===e.kind.toLowerCase()})).map((function(e){return{deviceId:null!=e.deviceId?e.deviceId:"",groupId:e.groupId,kind:"videoinput",label:e.label,toJSON:function(){return this}}})))}))}catch(e){return t(e)}}))}function YQ(){var e=PQ(["\n  padding: 0.625rem 0 0.9375rem;\n  margin: 0;\n  text-align: left;\n  width: 100%;\n  cursor: pointer;\n  font-size: 0.82rem;\n  transition: all 550ms ease-in-out;\n\n  &:hover {\n    opacity: 0.8;\n  }\n"]);return YQ=function(){return e},e}function $Q(){var e=PQ(["\n  list-style: none;\n  padding: 0;\n"]);return $Q=function(){return e},e}function ZQ(){var e=PQ(["\n  padding: 0 0 0.3125rem;\n  margin: 0.25rem auto;\n  font-size: 0.8rem;\n"]);return ZQ=function(){return e},e}function JQ(){var e=PQ(["\n  margin: 0.25rem auto;\n  padding: 0;\n  font-weight: 600;\n  font-size: 1.2rem;\n"]);return JQ=function(){return e},e}function eY(){var e=PQ(["\n  text-align: center;\n  padding: 0.625rem 0;\n  border-bottom: 1px solid #dddddd;\n"]);return eY=function(){return e},e}function tY(){var e=PQ(["\n  width: 260px;\n  margin: 1.25rem;\n  padding: 0.625rem 1.875rem;\n  background: #ffffff;\n  border-radius: 0.3125rem;\n  box-shadow: 2px 2px 14px rgba(0, 0, 0, 0.15);\n"]);return tY=function(){return e},e}function nY(){var e=PQ(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: ",";\n"]);return nY=function(){return e},e}function rY(){var e=PQ(["\n  z-index: ",";\n  position: absolute;\n  top: 40px;\n  color: red;\n"]);return rY=function(){return e},e}function aY(){var e=PQ(["\n  z-index: ",";\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  width: 20px;\n"]);return aY=function(){return e},e}function oY(){var e=PQ(["\n  cursor: pointer;\n  text-align: center;\n  width: 50px;\n  img {\n    width: 100%;\n  }\n"]);return oY=function(){return e},e}function iY(){var e=PQ(["\n  width: 100%;\n  ","\n"]);return iY=function(){return e},e}function sY(){var e=PQ(["\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: #000;\n  display: flex;\n  justify-content: center;\n  z-index: ",";\n  ","\n"]);return sY=function(){return e},e}var uY=_k.Errors,cY=1e3,lY=SQ.div(sY(),1e3,(function(e){return e.checkCameraMode&&"opacity: 0;"})),dY=SQ.video(iY(),(function(e){return e.flipHorizontal&&"\n     transform: scaleX(-1);\n  "})),pY=SQ.div(oY()),fY=SQ(pY)(aY(),1100),hY=SQ.div(rY(),1020),mY=SQ.div(nY(),1030),gY=SQ.section(tY()),vY=SQ.header(eY()),yY=SQ.h2(JQ()),bY=SQ.p(ZQ()),xY=SQ.ul($Q()),kY=SQ.li(YQ()),wY=Tx.createRef(),IY=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices;var e=navigator.mozGetUserMedia||navigator.webkitGetUserMedia;return e?{getUserMedia:function(t){return new Promise((function(n,r){e.call(navigator,t,n,r)}))}}:null}();function CY(e){var t=e.checkCameraMode,n=e.frontCamera,r=e.onClose,a=e.children,o=e.onVideoPlayed,i=e.flipHorizontal,s=e.videoSettings,u=e.refVideo,c=e.onError,l=Mk.useSDKSettings().lang,d=Pk.useAsset("ic_close.png"),p=LQ(Tx.useState(""),2),f=p[0],h=p[1],m=LQ(Tx.useState([]),2),g=m[0],v=m[1],y=LQ(Tx.useState(!1),2),b=y[0],x=y[1],k=Tx.useRef(!1),w=Tx.useCallback((function(){u.current.srcObject instanceof MediaStream&&(u.current.srcObject.getTracks().forEach((function(e){return e.stop()})),u.current.srcObject=null)}),[u]),I=Tx.useCallback(function(){var e=RQ(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{},r=qQ.isMobile?qQ.isIOS?{width:{ideal:1460},aspectRatio:{ideal:window.innerHeight/window.innerWidth}}:{width:{ideal:1650},aspectRatio:{ideal:window.innerHeight/window.innerWidth}}:{height:{ideal:9999}},e.prev=2,e.next=5,IY.getUserMedia({audio:!1,video:BQ(BQ({},t?{deviceId:t}:{facingMode:n?"user":"environment"}),s||r)});case 5:return(a=e.sent)||(h(uY.not_supported.msg[l]),c(uY.not_supported)),e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(2),"NotAllowedError"===e.t0.name?(h(uY.no_permission.msg[l]),c(uY.no_permission)):(x(!0),h(e.t0.message),c({code:e.t0.name||e.t0.code}));case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),[n,s,l,c]),C=Tx.useCallback(function(){var e=RQ(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=u.current).oncanplaythrough=function(){n.play();var e=window.innerWidth,t=window.innerHeight,r=Iw.analyzeVideoAndWindowSizes(n),a=r.lostX,i=void 0===a?0:a,s=r.lostY,u=void 0===s?0:s,c=Math.min(e,Math.floor(e-2*i)),l=Math.min(t,Math.floor(t-2*u));o&&o({clientWidth:e,clientHeight:t,videoAreaWidth:c,videoAreaHeight:l,lostX:i,lostY:u})},e.next=4,I(t);case 4:(r=e.sent)&&(n.srcObject=r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,I,o]);Tx.useEffect((function(){function e(){return(e=RQ(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,QQ();case 3:t=e.sent,n=t.filter((function(e){return e.deviceId&&"videoinput"===e.kind})),v(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}b&&!k.current&&(k.current=!0,function(){e.apply(this,arguments)}())}),[b]),Tx.useEffect((function(){function e(){return(e=RQ(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return e.next=4,QQ();case 4:t=e.sent,(n=t.filter((function(e){return"videoinput"===e.kind&&e.label.includes("0")}))).length>0&&(r=n[0].deviceId,w(),C(r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t=u.current;return!IY||qQ.browserName&&["facebook"].includes(qQ.browserName.toLowerCase())?(h(uY.not_supported.msg[l]),c(uY.not_supported)):t&&(qQ.isAndroid&&!1===n?function(){e.apply(this,arguments)}():C()),function(){w()}}),[u,l,n,C,w,c]);var S=Tx.useCallback((function(){w(),r&&r()}),[r,w]);return Tx.createElement(lY,{checkCameraMode:t},b&&null!=g&&g.length?Tx.createElement(mY,null,Tx.createElement(gY,null,Tx.createElement(vY,null,Tx.createElement(yY,null,"Không thể mở camera mặc định"),Tx.createElement(bY,null,"Vui lòng thử chọn camera khác trong danh sách dưới đây")),Tx.createElement(xY,null,g.map((function(e,t){return Tx.createElement(kY,{key:e.deviceId,onClick:function(){h(""),w(),x(!1),C(e.deviceId)}},e.label?e.label:"Camera ".concat(t+1))}))))):null,f?Tx.createElement(hY,null,f):null,Tx.createElement(dY,{ref:u,playsInline:!0,muted:!0,flipHorizontal:i}),a,Tx.createElement(fY,{onClick:S},Tx.createElement("img",{src:d,alt:""})))}CY.propTypes={checkCameraMode:Tk.bool,frontCamera:Tk.bool,onClose:Tk.func,onError:Tk.func,onVideoPlayed:Tk.func,children:Tk.node,flipHorizontal:Tk.bool,videoSettings:Tk.object,refVideo:Tk.object},CY.defaultProps={checkCameraMode:!1,frontCamera:!0,onClose:null,onError:function(){},onVideoPlayed:null,children:null,flipHorizontal:!1,videoSettings:null,refVideo:null};var SY=Tx.forwardRef((function(e,t){return Tx.createElement(CY,MQ({},e,{refVideo:t||wY}))}));function EY(){var e=PQ(["\n  position: relative;\n"]);return EY=function(){return e},e}function TY(){var e=PQ(["\n  width: 100%;\n  height: 100%;\n  td {\n    text-align: center;\n    vertical-align: middle;\n    padding: 0;\n    border: 0;\n  }\n  border-spacing: 0px;\n  table-layout: auto;\n"]);return TY=function(){return e},e}var NY=SQ.table(TY()),AY=SQ.div(EY()),_Y=Array.from(Array(3).keys()),RY=Array.from(Array(3).keys());function OY(e){var t=e.children,n=e.x,r=e.y,a=e.width,o=e.height,i=e.className,s=e.surroundStyle;return Tx.createElement(NY,{className:i},_Y.map((function(e,i){return Tx.createElement("tr",{key:e,style:{height:0===i?r:"auto"}},RY.map((function(e,r){var u=1===i&&1===r,c="auto";return u?c=a:0===r&&(c=n),Tx.createElement("td",{key:e,style:BQ({width:c,height:u?o:"auto"},u?{}:s)},u?Tx.createElement(AY,{style:{width:c,height:o}},t):null)})))})))}function FY(){var e=PQ(["\n  height: 100%;\n  vertical-align: middle;\n  margin: 0;\n"]);return FY=function(){return e},e}function MY(){var e=PQ(["\n  background: transparent;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: ",";\n"]);return MY=function(){return e},e}OY.propTypes={children:Tk.node,x:Tk.string,y:Tk.string,width:Tk.string,height:Tk.string,className:Tk.string,surroundStyle:Tk.object},OY.defaultProps={children:null,x:"auto",y:"auto",width:"auto",height:"auto",className:"",surroundStyle:{}};var DY=SQ(OY)(MY(),1010),BY=SQ.img(FY());function PY(e){var t=e.className;return Tx.createElement("svg",{className:t,width:"38px",height:"32px",viewBox:"0 0 24 21"},Tx.createElement("title",null,"FA45C15C-1E21-4D7B-9585-07FB9F999CB8"),Tx.createElement("desc",null,"Created with sketchtool."),Tx.createElement("g",{id:"Web-demo",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Tx.createElement("g",{id:"step1",transform:"translate(-950.000000, -380.000000)",fill:"currentColor",fillRule:"nonzero"},Tx.createElement("g",{id:"Group",transform:"translate(950.000000, 380.000000)"},Tx.createElement("g",{id:"Group-2"},Tx.createElement("g",{id:"camera"},Tx.createElement("path",{d:"M21,3 L17,3 L15,0 L9,0 L7,3 L3,3 C1.34314575,3 0,4.34314575 0,6 L0,18 C0,19.6568542 1.34314575,21 3,21 L21,21 C22.6568542,21 24,19.6568542 24,18 L24,6 C24,4.34314575 22.6568542,3 21,3 Z M12,17 C9.23857625,17 7,14.7614237 7,12 C7,9.23857625 9.23857625,7 12,7 C14.7614237,7 17,9.23857625 17,12 C17,14.7614237 14.7614237,17 12,17 L12,17 Z",id:"Shape"})))))))}PY.propTypes={className:Tk.string},PY.defaultProps={className:""};var LY=function(e){var t=Ty(e);return null!=e&&("object"==t||"function"==t)},UY="object"==Ty(zQ)&&zQ&&zQ.Object===Object&&zQ,VY="object"==("undefined"==typeof self?"undefined":Ty(self))&&self&&self.Object===Object&&self,WY=UY||VY||Function("return this")(),zY=function(){return WY.Date.now()},jY=WY.Symbol,HY=Object.prototype,GY=HY.hasOwnProperty,qY=HY.toString,KY=jY?jY.toStringTag:void 0,XY=function(e){var t=GY.call(e,KY),n=e[KY];try{e[KY]=void 0;var r=!0}catch(e){}var a=qY.call(e);return r&&(t?e[KY]=n:delete e[KY]),a},QY=Object.prototype.toString,YY=function(e){return QY.call(e)},$Y=jY?jY.toStringTag:void 0,ZY=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":$Y&&$Y in Object(e)?XY(e):YY(e)},JY=function(e){return null!=e&&"object"==Ty(e)},e$=function(e){return"symbol"==Ty(e)||JY(e)&&"[object Symbol]"==ZY(e)},t$=/^\s+|\s+$/g,n$=/^[-+]0x[0-9a-f]+$/i,r$=/^0b[01]+$/i,a$=/^0o[0-7]+$/i,o$=parseInt,i$=function(e){if("number"==typeof e)return e;if(e$(e))return NaN;if(LY(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=LY(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t$,"");var n=r$.test(e);return n||a$.test(e)?o$(e.slice(2),n?2:8):n$.test(e)?NaN:+e},s$=Math.max,u$=Math.min,c$=function(e,t,n){var r,a,o,i,s,u,c=0,l=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,o=a;return r=a=void 0,c=t,i=e.apply(o,n)}function h(e){return c=e,s=setTimeout(g,t),l?f(e):i}function m(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-c>=o}function g(){var e=zY();if(m(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-u);return d?u$(n,o-(e-c)):n}(e))}function v(e){return s=void 0,p&&r?f(e):(r=a=void 0,i)}function y(){var e=zY(),n=m(e);if(r=arguments,a=this,u=e,n){if(void 0===s)return h(u);if(d)return clearTimeout(s),s=setTimeout(g,t),f(u)}return void 0===s&&(s=setTimeout(g,t)),i}return t=i$(t)||0,LY(n)&&(l=!!n.leading,o=(d="maxWait"in n)?s$(i$(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=a=s=void 0},y.flush=function(){return void 0===s?i:v(zY())},y},l$=function(){function e(t,n){_y(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return Oy(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),d$=function(){function e(){_y(this,e)}return Oy(e,[{key:"refCount",value:function(e){return p$("refCount")}},{key:"incRef",value:function(e){return p$("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return p$("time")}},{key:"read",value:function(e){return p$("read")}},{key:"readSync",value:function(e){return p$("readSync")}},{key:"numDataIds",value:function(){return p$("numDataIds")}},{key:"disposeData",value:function(e,t){return p$("disposeData")}},{key:"write",value:function(e,t,n){return p$("write")}},{key:"move",value:function(e,t,n,r,a){return p$("move")}},{key:"memory",value:function(){return p$("memory")}},{key:"floatPrecision",value:function(){return p$("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return p$("dispose")}}]),e}();function p$(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen"))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function f$(e,t,n){return Math.max(e,Math.min(t,n))}function h$(e){return e%2==0?e:e+1}function m$(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g$(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function v$(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";g$(k$(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function y$(e){g$(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function b$(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||O$(e)&&!n)for(var r=0;r<e.length;++r)b$(e[r],t,n);else t.push(e);return t}function x$(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function k$(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function w$(e){return e%1==0}function I$(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function C$(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function S$(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var o=0;!function i(){if(e())r();else{o++;var s=t(o);null!=n&&o>=n?a():setTimeout(i,s)}}()}))}function E$(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when there are 0 elements"));if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got ".concat(t," / ").concat(n));var o=e.slice();return o[r]=t/n,o}function T$(e,t){var n=t.length;return g$((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but got axis ").concat(e)})),g$(e.every((function(e){return w$(e)})),(function(){return"All values in axis param must be integers but got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function N$(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:T$(t,e).sort(),i=0,s=0;s<e.length;++s){if(null!=o){if(o[i]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==o[i]||o[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function A$(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function _$(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function R$(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function O$(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function F$(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function M$(e){return"string"==typeof e||e instanceof String}function D$(e){return Array.isArray(e)?D$(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":"number"==typeof e?"float32":M$(e)?"string":function(e){return"boolean"==typeof e}(e)?"bool":"float32"}function B$(e){return!!(e&&e.constructor&&e.call&&e.apply)}function P$(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function L$(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function U$(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var o=t[0]*(r?2:1),i=0;i<o;i++)a[i]=n[e+i];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=U$(e+l*c,u,n,r);return a}function V$(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return U$(0,e,t,n)}function W$(e,t){for(var n=z$(e,t),r=0;r<n.length;r++)n[r]=1;return n}function z$(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function j$(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return V$(e,new Float32Array(n));if("int32"===t)return V$(e,new Int32Array(n));if("bool"===t)return V$(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function H$(e){e.forEach((function(t){g$(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape [".concat(e,"].")}))}))}function G$(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function q$(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function K$(e){return e&&e.then&&"function"==typeof e.then}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var X$=function(){function e(t){_y(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Q$,this.populateURLFlags()}var t;return Oy(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&console.warn("Platform ".concat(this.platformName," has already been set. Overwriting the platform with ").concat(t,".")),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:(t=Ay(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t in this.flags,e.t0){e.next=5;break}return e.next=4,this.evaluateFlag(t);case 4:this.flags[t]=e.sent;case 5:return e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(K$(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. Please use getAsync() instead."));return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t=this.getQueryParams(this.global.location.search);"tfjsflags"in t&&t.tfjsflags.split(",").forEach((function(t){var n=Ky(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}},{key:"features",get:function(){return this.flags}}]),e}();function Q$(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function Y$(){return Z$}var $$,Z$=null;function J$(){if(null==$$){var e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof global)e=global;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}$$=e}return $$}function eZ(e,t){var n=function(){var e=J$();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var tZ="Add",nZ=eZ("kernelRegistry",(function(){return new Map})),rZ=eZ("gradRegistry",(function(){return new Map}));function aZ(e,t){var n=uZ(e,t);return nZ.get(n)}function oZ(e){return rZ.get(e)}function iZ(e){for(var t=nZ.entries(),n=[];;){var r=t.next(),a=r.done,o=r.value;if(a)break;var i=Ky(o,2),s=i[0],u=i[1];Ky(s.split("_"),1)[0]===e&&n.push(u)}return n}function sZ(e){var t=e.kernelName,n=e.backendName,r=uZ(t,n);nZ.has(r)&&console.warn("The kernel '".concat(t,"' for backend '").concat(n,"' is already registered")),nZ.set(r,e)}function uZ(e,t){return"".concat(t,"_").concat(e)}var cZ=dZ,lZ=null;try{lZ=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(Rx){}function dZ(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function pZ(e){return!0===(e&&e.__isLong__)}dZ.prototype.__isLong__,Object.defineProperty(dZ.prototype,"__isLong__",{value:!0}),dZ.isLong=pZ;var fZ={},hZ={};function mZ(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=hZ[e])?r:(n=vZ(e,(0|e)<0?-1:0,!0),a&&(hZ[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=fZ[e])?r:(n=vZ(e,e<0?-1:0,!1),a&&(fZ[e]=n),n)}function gZ(e,t){if(isNaN(e))return t?EZ:SZ;if(t){if(e<0)return EZ;if(e>=wZ)return RZ}else{if(e<=-IZ)return OZ;if(e+1>=IZ)return _Z}return e<0?gZ(-e,t).neg():vZ(e%kZ|0,e/kZ|0,t)}function vZ(e,t,n){return new dZ(e,t,n)}dZ.fromInt=mZ,dZ.fromNumber=gZ,dZ.fromBits=vZ;var yZ=Math.pow;function bZ(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return SZ;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return bZ(e.substring(1),t,n).neg();for(var a=gZ(yZ(n,8)),o=SZ,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),u=parseInt(e.substring(i,i+s),n);if(s<8){var c=gZ(yZ(n,s));o=o.mul(c).add(gZ(u))}else o=(o=o.mul(a)).add(gZ(u))}return o.unsigned=t,o}function xZ(e,t){return"number"==typeof e?gZ(e,t):"string"==typeof e?bZ(e,t):vZ(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}dZ.fromString=bZ,dZ.fromValue=xZ;var kZ=4294967296,wZ=kZ*kZ,IZ=wZ/2,CZ=mZ(1<<24),SZ=mZ(0);dZ.ZERO=SZ;var EZ=mZ(0,!0);dZ.UZERO=EZ;var TZ=mZ(1);dZ.ONE=TZ;var NZ=mZ(1,!0);dZ.UONE=NZ;var AZ=mZ(-1);dZ.NEG_ONE=AZ;var _Z=vZ(-1,2147483647,!1);dZ.MAX_VALUE=_Z;var RZ=vZ(-1,-1,!0);dZ.MAX_UNSIGNED_VALUE=RZ;var OZ=vZ(0,-2147483648,!1);dZ.MIN_VALUE=OZ;var FZ=dZ.prototype;FZ.toInt=function(){return this.unsigned?this.low>>>0:this.low},FZ.toNumber=function(){return this.unsigned?(this.high>>>0)*kZ+(this.low>>>0):this.high*kZ+(this.low>>>0)},FZ.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(OZ)){var t=gZ(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=gZ(yZ(e,6),this.unsigned),o=this,i="";;){var s=o.div(a),u=(o.sub(s.mul(a)).toInt()>>>0).toString(e);if((o=s).isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}},FZ.getHighBits=function(){return this.high},FZ.getHighBitsUnsigned=function(){return this.high>>>0},FZ.getLowBits=function(){return this.low},FZ.getLowBitsUnsigned=function(){return this.low>>>0},FZ.getNumBitsAbs=function(){if(this.isNegative())return this.eq(OZ)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},FZ.isZero=function(){return 0===this.high&&0===this.low},FZ.eqz=FZ.isZero,FZ.isNegative=function(){return!this.unsigned&&this.high<0},FZ.isPositive=function(){return this.unsigned||this.high>=0},FZ.isOdd=function(){return 1==(1&this.low)},FZ.isEven=function(){return 0==(1&this.low)},FZ.equals=function(e){return pZ(e)||(e=xZ(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},FZ.eq=FZ.equals,FZ.notEquals=function(e){return!this.eq(e)},FZ.neq=FZ.notEquals,FZ.ne=FZ.notEquals,FZ.lessThan=function(e){return this.comp(e)<0},FZ.lt=FZ.lessThan,FZ.lessThanOrEqual=function(e){return this.comp(e)<=0},FZ.lte=FZ.lessThanOrEqual,FZ.le=FZ.lessThanOrEqual,FZ.greaterThan=function(e){return this.comp(e)>0},FZ.gt=FZ.greaterThan,FZ.greaterThanOrEqual=function(e){return this.comp(e)>=0},FZ.gte=FZ.greaterThanOrEqual,FZ.ge=FZ.greaterThanOrEqual,FZ.compare=function(e){if(pZ(e)||(e=xZ(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},FZ.comp=FZ.compare,FZ.negate=function(){return!this.unsigned&&this.eq(OZ)?OZ:this.not().add(TZ)},FZ.neg=FZ.negate,FZ.add=function(e){pZ(e)||(e=xZ(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,a=65535&this.low,o=e.high>>>16,i=65535&e.high,s=e.low>>>16,u=0,c=0,l=0,d=0;return l+=(d+=a+(65535&e.low))>>>16,c+=(l+=r+s)>>>16,u+=(c+=n+i)>>>16,u+=t+o,vZ((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},FZ.subtract=function(e){return pZ(e)||(e=xZ(e)),this.add(e.neg())},FZ.sub=FZ.subtract,FZ.multiply=function(e){if(this.isZero())return SZ;if(pZ(e)||(e=xZ(e)),lZ)return vZ(lZ.mul(this.low,this.high,e.low,e.high),lZ.get_high(),this.unsigned);if(e.isZero())return SZ;if(this.eq(OZ))return e.isOdd()?OZ:SZ;if(e.eq(OZ))return this.isOdd()?OZ:SZ;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(CZ)&&e.lt(CZ))return gZ(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,a=65535&this.low,o=e.high>>>16,i=65535&e.high,s=e.low>>>16,u=65535&e.low,c=0,l=0,d=0,p=0;return d+=(p+=a*u)>>>16,l+=(d+=r*u)>>>16,d&=65535,l+=(d+=a*s)>>>16,c+=(l+=n*u)>>>16,l&=65535,c+=(l+=r*s)>>>16,l&=65535,c+=(l+=a*i)>>>16,c+=t*u+n*s+r*i+a*o,vZ((d&=65535)<<16|(p&=65535),(c&=65535)<<16|(l&=65535),this.unsigned)},FZ.mul=FZ.multiply,FZ.divide=function(e){if(pZ(e)||(e=xZ(e)),e.isZero())throw Error("division by zero");var t,n,r;if(lZ)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?vZ((this.unsigned?lZ.div_u:lZ.div_s)(this.low,this.high,e.low,e.high),lZ.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?EZ:SZ;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return EZ;if(e.gt(this.shru(1)))return NZ;r=EZ}else{if(this.eq(OZ))return e.eq(TZ)||e.eq(AZ)?OZ:e.eq(OZ)?TZ:(t=this.shr(1).div(e).shl(1)).eq(SZ)?e.isNegative()?TZ:AZ:(n=this.sub(e.mul(t)),r=t.add(n.div(e)));if(e.eq(OZ))return this.unsigned?EZ:SZ;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=SZ}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(t)/Math.LN2),o=a<=48?1:yZ(2,a-48),i=gZ(t),s=i.mul(e);s.isNegative()||s.gt(n);)s=(i=gZ(t-=o,this.unsigned)).mul(e);i.isZero()&&(i=TZ),r=r.add(i),n=n.sub(s)}return r},FZ.div=FZ.divide,FZ.modulo=function(e){return pZ(e)||(e=xZ(e)),lZ?vZ((this.unsigned?lZ.rem_u:lZ.rem_s)(this.low,this.high,e.low,e.high),lZ.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},FZ.mod=FZ.modulo,FZ.rem=FZ.modulo,FZ.not=function(){return vZ(~this.low,~this.high,this.unsigned)},FZ.and=function(e){return pZ(e)||(e=xZ(e)),vZ(this.low&e.low,this.high&e.high,this.unsigned)},FZ.or=function(e){return pZ(e)||(e=xZ(e)),vZ(this.low|e.low,this.high|e.high,this.unsigned)},FZ.xor=function(e){return pZ(e)||(e=xZ(e)),vZ(this.low^e.low,this.high^e.high,this.unsigned)},FZ.shiftLeft=function(e){return pZ(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?vZ(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):vZ(0,this.low<<e-32,this.unsigned)},FZ.shl=FZ.shiftLeft,FZ.shiftRight=function(e){return pZ(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?vZ(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):vZ(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},FZ.shr=FZ.shiftRight,FZ.shiftRightUnsigned=function(e){if(pZ(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?vZ(this.low>>>e|t<<32-e,t>>>e,this.unsigned):vZ(32===e?t:t>>>e-32,0,this.unsigned)},FZ.shru=FZ.shiftRightUnsigned,FZ.shr_u=FZ.shiftRightUnsigned,FZ.toSigned=function(){return this.unsigned?vZ(this.low,this.high,!1):this},FZ.toUnsigned=function(){return this.unsigned?this:vZ(this.low,this.high,!0)},FZ.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},FZ.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},FZ.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},dZ.fromBytes=function(e,t,n){return n?dZ.fromBytesLE(e,t):dZ.fromBytesBE(e,t)},dZ.fromBytesLE=function(e,t){return new dZ(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},dZ.fromBytesBE=function(e,t){return new dZ(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var MZ=cZ||Object.freeze(Object.assign(Object.create(null),cZ,{default:cZ}));function DZ(e){return MZ.fromString(e,!0,16)}var BZ=DZ("c3a5c85c97cb3127"),PZ=DZ("b492b66fbe98f273"),LZ=DZ("9ae16a3b2f90404f");function UZ(e){return e.xor(e.shru(47))}function VZ(e,t,n){var r=e.slice(t,t+n);return MZ.fromBytes(Array.from(r),!0,!0)}function WZ(e,t){return VZ(e,t,8)}function zZ(e,t){return VZ(e,t,4)}function jZ(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function HZ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:DZ("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function GZ(e,t,n,r){return function(e,t,n,r,a,o){a=a.add(e),o=jZ(o.add(a).add(r),21);var i=a;return a=(a=a.add(t)).add(n),o=o.add(jZ(a,44)),[a.add(r),o.add(i)]}(WZ(e,t),WZ(e,t+8),WZ(e,t+16),WZ(e,t+24),n,r)}function qZ(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,r=MZ.fromNumber(81,!0);if(n<=32)return n<=16?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=LZ.add(2*t),r=WZ(e,0).add(LZ),a=WZ(e,t-8);return HZ(jZ(a,37).mul(n).add(r),jZ(r,25).add(a).mul(n),n)}if(t>=4){var o=LZ.add(2*t);return HZ(zZ(e,0).shl(3).add(t),zZ(e,t-4),o)}if(t>0){var i=e[0]+(e[t>>1]<<8),s=t+(e[t-1]<<2);return UZ(LZ.mul(i).xor(BZ.mul(s))).mul(LZ)}return LZ}(e,n):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=LZ.add(2*t),r=WZ(e,0).mul(PZ),a=WZ(e,8),o=WZ(e,t-8).mul(n),i=WZ(e,t-16).mul(LZ);return HZ(jZ(r.add(a),43).add(jZ(o,30)).add(i),r.add(jZ(a.add(LZ),18)).add(o),n)}(e,n);if(n<=64)return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=LZ.add(2*t),r=WZ(e,0).mul(LZ),a=WZ(e,8),o=WZ(e,t-8).mul(n),i=WZ(e,t-16).mul(LZ),s=jZ(r.add(a),43).add(jZ(o,30)).add(i),u=HZ(s,r.add(jZ(a.add(LZ),18)).add(o),n),c=WZ(e,16).mul(n),l=WZ(e,24),d=s.add(WZ(e,t-32)).mul(n),p=u.add(WZ(e,t-24)).mul(n);return HZ(jZ(c.add(l),43).add(jZ(d,30)).add(p),c.add(jZ(l.add(r),18)).add(d),n)}(e,n);var a=r,o=r.mul(PZ).add(113),i=UZ(o.mul(LZ).add(113)).mul(LZ),s=[MZ.UZERO,MZ.UZERO],u=[MZ.UZERO,MZ.UZERO];a=a.mul(LZ).add(WZ(e,0));var c=0,l=64*(n-1>>6),d=l+(n-1&63)-63;do{var p;a=jZ(a.add(o).add(s[0]).add(WZ(e,c+8)),37).mul(PZ),o=jZ(o.add(s[1]).add(WZ(e,c+48)),42).mul(PZ),a=a.xor(u[1]),o=o.add(s[0]).add(WZ(e,c+40)),i=jZ(i.add(u[0]),33).mul(PZ),s=GZ(e,c,s[1].mul(PZ),a.add(u[0])),u=GZ(e,c+32,i.add(u[1]),o.add(WZ(e,c+16))),i=(p=[a,i])[0],a=p[1],c+=64}while(c!==l);var f=PZ.add(i.and(255).shl(1));return c=d,u[0]=u[0].add(n-1&63),s[0]=s[0].add(u[0]),u[0]=u[0].add(s[0]),a=jZ(a.add(o).add(s[0]).add(WZ(e,c+8)),37).mul(f),o=jZ(o.add(s[1]).add(WZ(e,c+48)),42).mul(f),a=a.xor(u[1].mul(9)),o=o.add(s[0].mul(9).add(WZ(e,c+40))),i=jZ(i.add(u[0]),33).mul(f),s=GZ(e,c,s[1].mul(f),a.add(u[0])),u=GZ(e,c+32,i.add(u[1]),o.add(WZ(e,c+16))),i=(t=[a,i])[0],a=t[1],HZ(HZ(s[0],u[0],f).add(UZ(o).mul(BZ)).add(i),HZ(s[1],u[1],f).add(a),f)
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function KZ(e,t){return"string"===t?YZ(e):XZ([e],t)}function XZ(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=b$(e)),Y$().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function QZ(){return Y$().platform.now()}function YZ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Y$().platform.encode(e,t)}function $Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Y$().platform.decode(e,t)
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var ZZ=function(){function e(t,n){_y(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new eJ)}return Oy(e,[{key:"profileKernel",value:function(e,t,n){var r,a,o=function(){r=n()},i=QZ();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();var s,u=rb(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(e){u.e(e)}finally{u.f()}a=Promise.resolve({kernelMs:QZ()-i})}if(Y$().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(t){var n=r[t];n.data().then((function(t){JZ(t,n.dtype,e)}))},l=0;l<r.length;l++)c(l);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,o=e.inputs,i=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,i]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],o,r[2])}))}))}}]),e}();function JZ(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}return!1}var eJ=function(){function e(){_y(this,e)}return Oy(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,o){var i="number"==typeof r?C$("".concat(r,"ms"),9):r.error,s=C$(e,25),u=t.rank,c=t.size,l=C$(t.shape.toString(),14),d="";for(var p in a){var f=a[p];if(null!=f){var h=f.shape||t.shape,m=h.length;d+="".concat(p,": ").concat(m,"D ").concat(m>0?h:""," ")}}console.log("%c".concat(s,"\t%c").concat(i,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function tJ(e,t,n,r){var a=L$(t),o=function(e,t,n,r){var a=x$(t),o=r[r.length-1],i=new Array(o).fill(0),s=t.length,u="complex64"===n?oJ(e):e;if(s>1)for(var c=0;c<a/o;c++)for(var l=c*o,d=0;d<o;d++)i[d]=Math.max(i[d],nJ(u[l+d],0,n).length);return i}(e,t,n,a),i=t.length,s=aJ(e,t,n,a,o),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(i)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function nJ(e,t,n){return C$(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ").concat(parseFloat(e[1].toFixed(7)),"j"):M$(e)?"'".concat(e,"'"):"bool"===n?rJ(e):parseFloat(e.toFixed(7)).toString(),t)}function rJ(e){return 0===e?"false":"true"}function aJ(e,t,n,r,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i="complex64"===n?2:1,s=t[0],u=t.length;if(0===u)return"complex64"===n?[nJ(oJ(e)[0],0,n)]:"bool"===n?[rJ(e[0])]:[e[0].toString()];if(1===u){if(s>20){var c=3*i,l=Array.from(e.slice(0,c)),d=Array.from(e.slice((s-3)*i,s*i));return"complex64"===n&&(l=oJ(l),d=oJ(d)),["["+l.map((function(e,t){return nJ(e,a[t],n)})).join(", ")+", ..., "+d.map((function(e,t){return nJ(e,a[s-3+t],n)})).join(", ")+"]"]}return["["+("complex64"===n?oJ(e):Array.from(e)).map((function(e,t){return nJ(e,a[t],n)})).join(", ")+"]"]}var p=t.slice(1),f=r.slice(1),h=r[0]*i,m=[];if(s>20){for(var g=0;g<3;g++){var v=g*h,y=v+h;m.push.apply(m,Xy(aJ(e.slice(v,y),p,n,f,a,!1)))}m.push("...");for(var b=s-3;b<s;b++){var x=b*h,k=x+h;m.push.apply(m,Xy(aJ(e.slice(x,k),p,n,f,a,b===s-1)))}}else for(var w=0;w<s;w++){var I=w*h,C=I+h;m.push.apply(m,Xy(aJ(e.slice(I,C),p,n,f,a,w===s-1)))}var S=2===u?",":"";m[0]="["+m[0]+S;for(var E=1;E<m.length-1;E++)m[E]=" "+m[E]+S;for(var T=",\n",N=2;N<u;N++)T+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(o?"":T),m}function oJ(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var iJ=function(){function e(t,n,r){var a=this;if(_y(this,e),this.dtype=n,this.shape=t.slice(),this.size=x$(t),null!=r){var o=r.length;g$(o===this.size,(function(){return"Length of values '".concat(o,"' does not match the size inferred by the shape '").concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||_$(n,this.size),this.strides=L$(t)}return Oy(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),g$(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must match the rank (").concat(t.rank,")")}));var o=this.locToIndex(r);this.values[o]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,o=t;a<o.length;a++){var i=o[a];if(i<0||i>=this.shape[r]){var s="Requested out of range element at ".concat(t,".   Buffer shape=").concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"toTensor",value:function(){return sJ().makeTensor(this.values,this.shape,this.dtype)}},{key:"rank",get:function(){return this.shape.length}}]),e}(),sJ=null,uJ=null,cJ=function(){function e(t,n,r,a){_y(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=x$(t),this.strides=L$(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}var t,n,r,a;return Oy(e,[{key:"buffer",value:(a=Ay(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",uJ.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"bufferSync",value:function(){return uJ.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:(r=Ay(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",V$(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"arraySync",value:function(){return V$(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:(n=Ay(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=sJ().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return $Z(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])}))),function(){return n.apply(this,arguments)})},{key:"dataSync",value:function(){this.throwIfDisposed();var e=sJ().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return $Z(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:(t=Ay(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,sJ().read(this.dataId);case 3:return t=e.sent,e.abrupt("return","string"===this.dtype?t:new Uint8Array(t.buffer));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dispose",value:function(){this.isDisposed||(sJ().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return uJ.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),uJ.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return tJ(this.dataSync(),this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),uJ.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),sJ().makeVariable(this,e,t,n)}},{key:"rank",get:function(){return this.shape.length}},{key:"isDisposed",get:function(){return this.isDisposedInternal}}]),e}();Object.defineProperty(cJ,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),eZ("Tensor",(function(){return cJ}));var lJ,dJ,pJ,fJ,hJ,mJ=function(e){Dy(n,e);var t=Hy(n);function n(e,r,a,o){var i;return _y(this,n),(i=t.call(this,e.shape,e.dtype,e.dataId,o)).trainable=r,i.name=a,i}return Oy(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and previous value (").concat(this.dtype,") must match"));if(!k$(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and previous value (").concat(this.shape,") must match"));sJ().disposeTensor(this),this.dataId=e.dataId,sJ().incRef(this,null)}},{key:"dispose",value:function(){sJ().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(cJ);
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */Object.defineProperty(mJ,Symbol.hasInstance,{value:function(e){return e instanceof cJ&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(lJ||(lJ={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(dJ||(dJ={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(pJ||(pJ={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(fJ||(fJ={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(hJ||(hJ={}));var gJ={float32:fJ,int32:dJ,bool:pJ,complex64:hJ};function vJ(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return gJ[e][t]}function yJ(e){return vJ(e,"int32")}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function bJ(e,t){if(e.dtype===t.dtype)return[e,t];var n=vJ(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function xJ(e){var t=[];return kJ(e,t,new Set),t}function kJ(e,t,n){if(null!=e)if(e instanceof cJ)t.push(e);else if(r=e,Array.isArray(r)||"object"==Ty(r)){var r,a=e;
/**
	   * @license
	   * Copyright 2018 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */for(var o in a){var i=a[o];n.has(i)||(n.add(i),kJ(i,t,n))}}}function wJ(e){return null!=e.kernelName}var IJ=function(){function e(){_y(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return Oy(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),CJ=function(){function e(t){_y(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new IJ}var t,n,r,a;return Oy(e,[{key:"ready",value:(a=Ay(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=17;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=14;break}return e.next=13,this.setBackend(r);case 13:return e.abrupt("return",void e.sent);case 14:n++,e.next=6;break;case 17:throw new Error("Could not initialize any backends, all backend initializations failed.");case 18:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(console.warn("".concat(e," backend was already registered. Reusing existing backend factory.")),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:(r=Ay(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=14;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=11;break}return e.next=8,r;case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=r;case 12:if(e.t0){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",(this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new ZZ(this.backendInstance),!0));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setupRegisteredKernels",value:function(){var e=this;iZ(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;iZ(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof d$||"function"!=typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,o=r.then((function(n){return!(a<t.pendingBackendInitId||(t.registry[e]=n,t.pendingBackendInit=null,0))})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend ".concat(e," failed")),console.warn(n.stack||n.message)),!1}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}catch(n){return console.warn("Initialization of backend ".concat(e," failed")),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,o=r.asyncInit;if(o||a)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=EJ.runKernel("Identity",{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e};return EJ.runKernel("Cast",t,{dtype:"float32"})}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,null==aZ(e,this.backendName))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-o;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak (").concat(i," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,o=[],i=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=wJ(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(wJ(e)){var l=e.kernelName,d=e.inputs,p=e.attrs;null==this.backendName&&this.backend;var f=aZ(l,this.backendName);g$(null!=f,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=f.kernelFunc({inputs:d,attrs:p,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(i){var s=a.getTensorsForGradient(l,d,n);o=a.saveTensorsForBackwardMode(s)}return n}}else{var h=e.forwardFunc,m=function(e){i&&(o=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return h(a.backend,m)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var g,v=e.inputs,y=e.attrs,b=wJ(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(g=a.profiler.profileKernel(c,v,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(g),t=g.outputs):t=n()})),i&&this.addTapeNode(c,v,t,b,o,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(v).map((function(e){return null!=v[e]?v[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=oZ(e);if(null!=r){var a,o=r.inputsToSave||[],i=r.outputsToSave||[];r.saveAllInputs?(g$(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=o.map((function(e){return t[e]}));var s=n.filter((function(e,t){return i[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&M$(e[0])&&(a=e.map((function(e){return YZ(e)})));var o=r.write(a,t,n),i=new cJ(t,n,o,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){var s=this.state.tensorInfo.get(o),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return i}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a=new cJ(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new mJ(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*F$(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof mJ||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*F$(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:(n=Ay(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=5,t();case 5:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Xy(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=rb(this.state.activeProfile.kernels),e.prev=11,a.s();case 13:if((o=a.n()).done){e.next=23;break}return i=o.value,e.next=17,i.kernelTimeMs;case 17:return i.kernelTimeMs=e.sent,e.next=20,i.extraInfo;case 20:i.extraInfo=e.sent;case 21:e.next=13;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(11),a.e(e.t0);case 28:return e.prev=28,a.f(),e.finish(28);case 31:return e.abrupt("return",this.state.activeProfile);case 32:case"end":return e.stop()}}),e,this,[[11,25,28,31]])}))),function(e){return n.apply(this,arguments)})},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,o){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=oZ(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=z$(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,o)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=xJ(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||r.has(o.id)||o.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(g$(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));g$(o instanceof cJ,(function(){return"The result y returned by f() must be a tensor."}));var i=function(e,t,n){for(var r={},a={},o=0;o<t.length;o++)r[t[o].id]=!0;for(var i=0;i<e.length;i++){var s=e[i],u=s.inputs;for(var c in u){for(var l=u[c],d=!1,p=0;p<t.length;p++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var f={};f[n.id]=!0;for(var h={},m=e.length-1;m>=0;m--)for(var g=e[m],v=g.inputs,y=0;y<g.outputs.length;y++)if(f[g.outputs[y].id]){for(var b in v)f[v[b].id]=!0,h[g.id]=!0;break}for(var x=[],k=0;k<e.length;k++){var w=e[k];if(a[w.id]&&h[w.id]){var I={};for(var C in w.inputs){var S=w.inputs[C];r[S.id]&&(I[C]=S)}var E=Object.assign({},w);E.inputs=I,E.outputs=w.outputs,x.push(E)}}return x}(this.state.activeTape,t,o);if(!a&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?function(e){var t=W$(x$(e),"float32");return EJ.makeTensor(t,e,"float32")}(o.shape):n,function(e,t,n,a){for(var o=function(n){var o=t[n],i=[];if(o.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for ".concat(o.kernelName,"."));var s=o.gradient(i),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". Available gradients found: ").concat(Object.keys(s),"."));var n=function(e){return r.tidy(e)}((function(){return s[t]()}));if("float32"!==n.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ").concat(t," must have 'float32' dtype, but has '").concat(n.dtype,"'"));var i=o.inputs[t];if(!k$(n.shape,i.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input '").concat(t,"' has shape '").concat(n.shape,"', which does not match the shape of the input '").concat(i.shape,"'"));if(null==e[i.id])e[i.id]=n;else{var u=e[i.id];e[i.id]=a(u,n),u.dispose()}};for(var c in o.inputs)u(c)},i=t.length-1;i>=0;i--)o(i)}
/**
	         * @license
	         * Copyright 2018 Google LLC. All Rights Reserved.
	         * Licensed under the Apache License, Version 2.0 (the "License");
	         * you may not use this file except in compliance with the License.
	         * You may obtain a copy of the License at
	         *
	         * http://www.apache.org/licenses/LICENSE-2.0
	         *
	         * Unless required by applicable law or agreed to in writing, software
	         * distributed under the License is distributed on an "AS IS" BASIS,
	         * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	         * See the License for the specific language governing permissions and
	         * limitations under the License.
	         * =============================================================================
	         */(e,i,0,TJ);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=rb(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(e){n.e(e)}finally{n.f()}})),r.state.activeTape=null),{value:o,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return g$(B$(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o;g$(r.every((function(e){return e instanceof cJ})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};return r.forEach((function(e,t){i[t]=e})),t.runKernelFunc({forwardFunc:function(t,n){return g$((o=e.apply(void 0,r.concat([n]))).value instanceof cJ,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),g$(B$(o.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),o.value},backwardsFunc:function(e,t){var n=o.gradFunc(e,t),a=Array.isArray(n)?n:[n];g$(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),g$(a.every((function(e){return e instanceof cJ})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return a.forEach((function(e,t){i[t]=function(){return e}})),i},inputs:i})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"time",value:(t=Ay(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=QZ(),e.next=3,this.backend.time(t);case 3:return r=e.sent,e.abrupt("return",(r.wallMs=QZ()-n,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new IJ,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));this.setBackend(t)}return this.backendInstance}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}}]),e}();function SJ(){var e,t=J$();if(null==t._tfengine){var n=new X$(t);t._tfengine=new CJ(n)}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
return e=t._tfengine.ENV,Z$=e,sJ=function(){return t._tfengine},t._tfengine}CJ.nextTensorId=0,CJ.nextVariableId=0;var EJ=SJ();function TJ(e,t){var n={a:e,b:t};return EJ.runKernel(tZ,n)}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function NJ(e){if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function AJ(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var _J=Y$();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function RJ(e,t){var n=e;if(O$(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||O$(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Y$().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&OJ(e,r,[]),r}function OJ(e,t,n){if(n=n||[],Array.isArray(e)||O$(e)){g$(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, but is an array of ").concat(e.length," elements")})),g$(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," elements, but has ").concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)OJ(e[a],r,n.concat(a))}else g$(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, but should be an array/TypedArray of ").concat(t[0]," elements")}))}function FJ(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must be ").concat(e," tensor, but got ").concat(t," tensor"))}}function MJ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof cJ)return FJ(r,e.dtype,t,n),e;var a=D$(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),FJ(r,a,t,n),null==e||!O$(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var o=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a Tensor or TensorLike, but got '").concat(o,"'"))}var i=RJ(e,a);O$(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?XZ(e,a):b$(e,[],!0);return EJ.makeTensor(s,i,a)}function DJ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a `Tensor[]` or `TensorLike[]`"));return e.map((function(e,a){return MJ(e,"".concat(t,"[").concat(a,"]"),n,r)}))}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function BJ(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with ".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var a=function(){EJ.startScope(n);try{var e=r.apply(void 0,arguments);return K$(e)&&console.error("Cannot return a Promise inside of tidy."),EJ.endScope(e),e}catch(e){throw EJ.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}_J.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),_J.registerFlag("IS_BROWSER",(function(){return AJ()})),_J.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),_J.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),_J.registerFlag("PROD",(function(){return!1})),_J.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return _J.getBool("DEBUG")})),_J.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),_J.registerFlag("IS_TEST",(function(){return!1})),_J.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),_J.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1}));var PJ=BJ({complex_:function(e,t){var n=MJ(e,"real","complex"),r=MJ(t,"imag","complex");v$(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", must match in call to tf.complex()."));var a={real:n,imag:r};return EJ.runKernel("Complex",a)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function LJ(e,t,n,r){if(null==r&&(r=D$(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!O$(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){H$(t);var a=x$(t),o=x$(n);g$(a===o,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ").concat(a," values but has ").concat(o)}));for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==x$(t.slice(i));g$(n[i]===t[i]||!u,(function(){return"Error creating a new Tensor. Inferred shape (".concat(n,") does not match the provided shape (").concat(t,"). ")}))}}return O$(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?XZ(e,r):b$(e,[],!0),EJ.makeTensor(e,t,r)
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function UJ(e,t,n){return LJ(e,t,RJ(e,n),n)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var VJ={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},WJ="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function zJ(e){return WJ?Buffer.byteLength(e):new Blob([e]).size}function jJ(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function HJ(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:zJ(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:zJ(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function GJ(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0==(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|(n+=947912704)},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),o=new Uint32Array(a),i=0;i<r.length;i++){var s=r[i],u=e[n[s>>10]+(1023&s)]+t[s>>10];o[i]=u}return new Float32Array(a)}}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var qJ=function(){function e(){_y(this,e),this.saveRouters=[],this.loadRouters=[]}return Oy(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}();function KJ(){if(!Y$().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function XJ(e){var t=e.result;t.createObjectStore("models_store",{keyPath:"modelPath"}),t.createObjectStore("model_info_store",{keyPath:"modelPath"})}var QJ=function(){function e(t){if(_y(this,e),this.indexedDB=KJ(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}var t,n;return Oy(e,[{key:"save",value:(n=Ay(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=Ay(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return XJ(a)},a.onsuccess=function(){var o=a.result;if(null==t){var i=o.transaction("models_store","readonly"),s=i.objectStore("models_store").get(n.modelPath);s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' in IndexedDB.")));e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},i.oncomplete=function(){return o.close()}}else{var u,c=HJ(t),l=o.transaction("model_info_store","readwrite"),d=l.objectStore("model_info_store"),p=d.put({modelPath:n.modelPath,modelArtifactsInfo:c});p.onsuccess=function(){var a=(u=o.transaction("models_store","readwrite")).objectStore("models_store").put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(d=l.objectStore("model_info_store")).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(a.error)},t.onerror=function(e){return o.close(),r(a.error)}}},p.onerror=function(e){return o.close(),r(p.error)},l.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();QJ.URL_SCHEME="indexeddb://";var YJ=function(e){return Y$().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(QJ.URL_SCHEME)?(t=e.slice(QJ.URL_SCHEME.length),new QJ(t)):null;var t};qJ.registerSaveRouter(YJ),qJ.registerLoadRouter(YJ);var $J=function(){function e(){_y(this,e),this.indexedDB=KJ()}var t,n;return Oy(e,[{key:"listModels",value:(n=Ay(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return XJ(r)},r.onsuccess=function(){var t=r.result,a=t.transaction("model_info_store","readonly"),o=a.objectStore("model_info_store").getAll();o.onsuccess=function(){var t,n={},r=rb(o.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(e){r.e(e)}finally{r.f()}e(n)},o.onerror=function(e){return t.close(),n(o.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"removeModel",value:(t=Ay(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(t=(n=t).startsWith(QJ.URL_SCHEME)?n.slice(QJ.URL_SCHEME.length):n,new Promise((function(e,n){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return XJ(a)},a.onsuccess=function(){var r,o=a.result,i=o.transaction("model_info_store","readwrite"),s=i.objectStore("model_info_store"),u=s.get(t);u.onsuccess=function(){if(null==u.result)return o.close(),n(new Error("Cannot find model with path '".concat(t,"' in IndexedDB.")));var a=s.delete(t),i=function(){var a=(r=o.transaction("models_store","readwrite")).objectStore("models_store").delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return n(u.error)}};a.onsuccess=i,a.onerror=function(e){return i(),o.close(),n(u.error)}},u.onerror=function(e){return o.close(),n(u.error)},i.oncomplete=function(){null==r?o.close():r.oncomplete=function(){return o.close()}}},a.onerror=function(e){return n(a.error)}}))));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),ZJ="tensorflowjs_models",JJ="info",e0="model_topology",t0="weight_specs",n0="weight_data",r0="model_metadata";
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function a0(e){return{info:[ZJ,e,JJ].join("/"),topology:[ZJ,e,e0].join("/"),weightSpecs:[ZJ,e,t0].join("/"),weightData:[ZJ,e,n0].join("/"),modelMetadata:[ZJ,e,r0].join("/")}}function o0(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function i0(e){var t=e.split("/");if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join("/")}var s0=function(){function e(t){if(_y(this,e),!Y$().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=a0(this.modelPath)}var t,n;return Oy(e,[{key:"save",value:(n=Ay(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=HJ(t),e.prev=3,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(WJ)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(t.weightData)),o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},e.abrupt("return",(this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:a}));case 9:throw e.prev=9,e.t0=e.catch(3),o0(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=").concat(a.modelTopologyBytes,", weightSpecsBytes=").concat(a.weightSpecsBytes,", weightDataBytes=").concat(a.weightDataBytes,"."));case 12:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=Ay(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=8;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' is missing."));case 8:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=12;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' are missing."));case 12:if(n.weightSpecs=a,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(o),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,null!=i.signature&&(n.signature=i.signature),null!=i.userDefinedMetadata&&(n.userDefinedMetadata=i.userDefinedMetadata),null!=i.modelInitializer&&(n.modelInitializer=i.modelInitializer),null!=i.trainingConfig&&(n.trainingConfig=i.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=18;break}throw new Error("In local storage, the binary weight values of model '".concat(this.modelPath,"' are missing."));case 18:return e.abrupt("return",(n.weightData=function(e){if(WJ){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(s),n));case 19:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();s0.URL_SCHEME="localstorage://";var u0=function(e){return Y$().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(s0.URL_SCHEME)?(t=e.slice(s0.URL_SCHEME.length),new s0(t)):null;var t};qJ.registerSaveRouter(u0),qJ.registerLoadRouter(u0);var c0=function(){function e(){_y(this,e),g$(Y$().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),g$("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}var t,n;return Oy(e,[{key:"listModels",value:(n=Ay(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=ZJ+"/",r="/"+JJ,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(n)&&o.endsWith(r)&&(t[i0(o)]=JSON.parse(this.LS.getItem(o)));return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"removeModel",value:(t=Ay(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a0(t=(n=t).startsWith(s0.URL_SCHEME)?n.slice(s0.URL_SCHEME.length):n),null!=this.LS.getItem(r.info)){e.next=3;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 3:return a=JSON.parse(this.LS.getItem(r.info)),e.abrupt("return",(o0(r),a));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),l0=function(){function e(){_y(this,e),this.managers={}}return Oy(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){g$(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith("://")&&(t=t.slice(0,t.indexOf("://"))),g$(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();g$(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}(),d0=function(){function e(){_y(this,e)}return Oy(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */if(Y$().get("IS_BROWSER")){Y$().setPlatform("browser",new d0);try{l0.registerManager(s0.URL_SCHEME,new c0)}catch(Rx){}try{l0.registerManager(QJ.URL_SCHEME,new $J)}catch(Rx){}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var p0,f0=function(){return require("node-fetch")},h0=function(){function e(){_y(this,e),this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return Oy(e,[{key:"fetch",value:function(e,t){return null!=Y$().global.fetch?Y$().global.fetch(e,t):(null==p0&&(p0=f0()),p0(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function m0(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",H$(e),new iJ(e,t,n)
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}Y$().get("IS_NODE")&&Y$().setPlatform("node",new h0);var g0=BJ({cast_:function(e,t){var n=MJ(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return EJ.runKernel("Cast",r,a)}}),v0=BJ({clone_:function(e){var t={x:MJ(e,"x","clone","string_or_numeric")};return EJ.runKernel("Identity",t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function y0(e,t,n,r){!function(e){g$(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){g$(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction ".concat(e)})),g$(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction ".concat(t)})),g$(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction ".concat(e," and endFraction ").concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(o){return o.then((function(o){var i=n+ ++a/e.length*(r-n);return t(i),o})),o})))}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
SJ(),uJ={buffer:m0,cast:g0,clone:v0,print:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};var b0=function(){function e(t,n){if(_y(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(g$("function"==typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Y$().platform.fetch,g$(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&g$(2===t.length,(function(){return"URL paths for http must have a length of 2, (actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}var t,n,r;return Oy(e,[{key:"save",value:(r=Ay(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=function(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}(t,[{paths:["./model.weights.bin"],weights:t.weightSpecs}]),n.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=8,this.fetch(this.path,n);case 8:if(!(a=e.sent).ok){e.next=11;break}return e.abrupt("return",{modelArtifactsInfo:HJ(t),responses:[a]});case 11:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status ".concat(a.status,"."));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"load",value:(n=Ay(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ").concat(t.status,". Please verify this URL points to the model JSON of the model to load."));case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 15:if(a=n.modelTopology,o=n.weightsManifest,null!=a||null!=o){e.next=18;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model topology or manifest for weights."));case 18:return e.abrupt("return",function(){var e=Ay(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=9;break}return e.next=4,n(t.weightsManifest);case 4:a=e.sent,o=Ky(a,2),i=o[0],s=o[1],r.weightSpecs=i,r.weightData=s;case 9:return e.abrupt("return",(null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),r));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(n,(function(e){return i.loadWeights(e)})));case 19:case"end":return e.stop()}}),e,this,[[5,11]])}))),function(){return n.apply(this,arguments)})},{key:"loadWeights",value:(t=Ay(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,p,f,h,m,g,v,y,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(n),a=Ky(r,2),o=a[0],i=a[1],s=this.weightPathPrefix||o,u=[],c=rb(t);try{for(c.s();!(l=c.n()).done;)d=l.value,u.push.apply(u,Xy(d.weights))}catch(e){c.e(e)}finally{c.f()}p=[],f=[],h=rb(t);try{for(h.s();!(m=h.n()).done;){g=m.value,v=rb(g.paths);try{for(v.s();!(y=v.n()).done;)b=y.value,null!=this.weightUrlConverter?f.push(this.weightUrlConverter(b)):p.push(s+b+i)}catch(e){v.e(e)}finally{v.f()}}}catch(e){h.e(e)}finally{h.f()}if(e.t0=this.weightUrlConverter,!e.t0){e.next=16;break}return e.t1=p.push,e.t2=p,e.t3=Xy,e.next=13,Promise.all(f);case 13:e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.t1.apply.call(e.t1,e.t2,e.t5);case 16:return e.t6=u,e.t7=jJ,e.next=20,function(){var e=Ay(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?Y$().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),null!=n.onProgress){e.next=9;break}return e.next=6,Promise.all(a);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,y0(a,n.onProgress,0,.5);case 11:e.t0=e.sent;case 12:if(o=e.t0.map((function(e){return e.arrayBuffer()})),null!=n.onProgress){e.next=19;break}return e.next=16,Promise.all(o);case 16:e.t1=e.sent,e.next=22;break;case 19:return e.next=21,y0(o,n.onProgress,.5,1);case 21:e.t1=e.sent;case 22:return e.abrupt("return",e.t1);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()
/**
	                 * @license
	                 * Copyright 2018 Google LLC. All Rights Reserved.
	                 * Licensed under the Apache License, Version 2.0 (the "License");
	                 * you may not use this file except in compliance with the License.
	                 * You may obtain a copy of the License at
	                 *
	                 * http://www.apache.org/licenses/LICENSE-2.0
	                 *
	                 * Unless required by applicable law or agreed to in writing, software
	                 * distributed under the License is distributed on an "AS IS" BASIS,
	                 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	                 * See the License for the specific language governing permissions and
	                 * limitations under the License.
	                 * =============================================================================
	                 */(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 20:return e.t8=e.sent,e.t9=(0,e.t7)(e.t8),e.abrupt("return",[e.t6,e.t9]);case 23:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function x0(e){return null!=e.match(b0.URL_SCHEME_REGEX)}b0.URL_SCHEME_REGEX=/^https?:\/\//;var k0=function(e,t){if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return x0(e)})):x0(e))?w0(e,t):null};function w0(e,t){return new b0(e,t)}function I0(e,t){return w0(e,t)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */qJ.registerSaveRouter(k0),qJ.registerLoadRouter(k0);var C0,S0=BJ({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=MJ(e,"a","matMul"),o=MJ(t,"b","matMul"),i=bJ(a,o),s=Ky(i,2),u={a:a=s[0],b:o=s[1]},c={transposeA:n,transposeB:r};return EJ.runKernel("BatchMatMul",u,c)}}),E0=BJ({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a={indices:MJ(e,"indices","oneHot","int32")},o={depth:t,onValue:n,offValue:r};return EJ.runKernel("OneHot",a,o)}}),T0=BJ({transpose_:function(e,t){var n=MJ(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),g$(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," must match length of perm ").concat(t,".")})),t.forEach((function(e){g$(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var r={x:n},a={perm:t};return EJ.runKernel("Transpose",r,a)}}),N0=BJ({fromPixels_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,o=!1,i=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ".concat(e.constructor.name));s=!0}if(a){var u=2;if(a&&e.readyState<u)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=aZ("FromPixels",EJ.backendName)){var c={pixels:e},l={numChannels:t};return EJ.runKernel("FromPixels",c,l)}var d,p,f=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],h=Ky(f,2),m=h[0],g=h[1];if(i?d=e.getContext("2d").getImageData(0,0,m,g).data:r||n?d=e.data:(o||a||s)&&(null==C0&&(C0=document.createElement("canvas").getContext("2d")),C0.canvas.width=m,C0.canvas.height=g,C0.drawImage(e,0,0,m,g),d=C0.getImageData(0,0,m,g).data),4===t)p=new Int32Array(d);else{var v=m*g;p=new Int32Array(v*t);for(var y=0;y<v;y++)for(var b=0;b<t;++b)p[y*t+b]=d[4*y+b]}return function(e,t,n){if(y$(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=RJ(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return LJ(e,t,r,n)}(p,[g,m,t],"int32")}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function A0(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: ".concat(t.shape[r-1]," vs. ").concat(n));if(0===x$(e.shape))throw new Error("Requested more than 0 entries, but input is empty. Input shape: ".concat(e.shape,"."));for(var a=t.shape,o=a[a.length-1],i=1,s=0;s<a.length-1;++s)i*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,d=o;d<n;++d)l*=u[d],c.push(u[d]);var p=[].concat(Xy(L$(e.shape).map((function(e){return e/l}))),[1]).slice(0,o);return[c,i,l,p]}function _0(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ".concat(n.shape,", indices.shape: ").concat(t.shape,", shape: ").concat(e,", sliceDim: ").concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(o+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(o+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+" update.rank != "+(a+e.length-r));for(var i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(t.shape[i],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(o+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function R0(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}_0(n,t,e)}function O0(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,o=n.length,i=1,s=a;s<o;++s)i*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:x$(t.shape)/u,sliceSize:i,strides:[].concat(Xy(L$(n.slice(0,a))),[1]),outputSize:x$(n)}}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function F0(e,t,n){var r=e.shape.length;g$(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must match the rank of the array (").concat(r,").")})),g$(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must match the rank of the array (").concat(r,").")}));for(var a=function(a){g$(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] (").concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},o=0;o<r;++o)a(o)}function M0(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function D0(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function B0(e,t,n,r){for(var a=Xy(e),o=a.length;o<r.length;o++)a.push(1);for(var i=0;i<n;i++)0===i?a[t]=1:(a.splice(t,0,1),a.pop());return a}function P0(e,t,n){return n<=e?n:n-(t-1)}function L0(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function U0(e,t,n,r,a,o,i,s,u){var c=e.length,l=new Array(c),d=new Array(c),p=new Array(c);if(t.length&&n>0){var f=t[0],h=n+1;l=V0(i,f,h,r,e),d=W0(s,f,h,a,e),p=B0(o,f,h,e)}else for(var m=0;m<c;m++)l[m]=j0(i,r,o,e,m,u),d[m]=H0(s,a,o,e,m,u),p[m]=z0(o,m,u);return{begin:l,end:d,strides:p}}function V0(e,t,n,r,a){for(var o=Xy(a),i=L0(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=0;else{var u=P0(t,n,s),c=r[u];e&1<<u&&(c=0),o[s]=c}return o}function W0(e,t,n,r,a){for(var o=Xy(a),i=L0(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{var u=P0(t,n,s),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),o[s]=c}for(var l=0;l<o.length;l++){var d=a[l];o[l]<0&&(o[l]+=d),o[l]=f$(0,o[l],a[l])}return o}function z0(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function j0(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=f$(0,i,u-1)}function H0(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=s>0?f$(0,i,u):f$(-1,i,u-1)}function G0(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function q0(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function K0(e,t,n){var r,a,o=e.shape.length;return(r="number"==typeof t?[t].concat(Xy(new Array(o-1).fill(0))):t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice()).forEach((function(e){g$(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(o).fill(-1):"number"==typeof n?[n].concat(Xy(new Array(o-1).fill(-1))):n.length<o?n.concat(new Array(o-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(g$(-1===t,(function(){return"Negative size values should be exactly -1 but got ".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function X0(e,t,n,r,a,o,i,s,u){var c=t.slice(),l=n.slice(),d=r;null==r&&(d=new Array(c.length));var p=M0(i);if(p.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==i&&0!==s)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==i&&0!==u)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var f=e.length-c.length,h=M0(s),m=e.slice();h.forEach((function(e){c[e]=0,l[e]=1,m.splice(e,0,1)}));var g=U0(m,p,f,c,l,d,a,o,i),v=g.begin,y=g.end,b=g.strides;c=v,l=y,d=b;var x=M0(u);x.forEach((function(e){l[e]=c[e]+1,d[e]=1}));var k=D0(c,l,d),w=k.filter((function(e,t){return-1===x.indexOf(t)}));return{nonStrided:d.every((function(e){return 1===e})),$begin:c,$end:l,$strides:d,size:k,newShape:m,outShape:w}}var Q0=Object.freeze({__proto__:null,assertParamsValid:F0,maskToAxes:M0,computeOutShape:D0,stridesWithElidedDims:B0,getNormalizedAxes:U0,startIndicesWithElidedDims:V0,stopIndicesWithElidedDims:W0,stridesForAxis:z0,startForAxis:j0,stopForAxis:H0,isSliceContinous:G0,computeFlatOffset:q0,parseSliceParams:K0,sliceInfo:X0});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Y0(){return EJ}function $0(e,t){return EJ.tidy(e,t)}function Z0(e){return EJ.keep(e)}function J0(e){return EJ.setBackend(e)}function e1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return EJ.registerBackend(e,t,n)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var t1=BJ({add_:function(e,t){var n=MJ(e,"a","add"),r=MJ(t,"b","add"),a=Ky(bJ(n,r),2),o={a:n=a[0],b:r=a[1]};return EJ.runKernel(tZ,o)}}),n1=BJ({floorDiv_:function(e,t){var n=MJ(e,"a","floorDiv"),r=MJ(t,"b","floorDiv"),a=Ky(bJ(n,r),2),o={a:n=a[0],b:r=a[1]};return EJ.runKernel("FloorDiv",o)}}),r1=BJ({div_:function(e,t){var n,r=MJ(e,"a","div"),a=MJ(t,"b","div");if(r=(n=Ky(bJ(r,a),2))[0],a=n[1],"int32"===r.dtype&&"int32"===a.dtype)return n1(r,a);var o={a:r,b:a};return EJ.runKernel("RealDiv",o,{})}}),a1=BJ({mul_:function(e,t){var n=MJ(e,"a","mul"),r=MJ(t,"b","mul"),a=Ky(bJ(n,r),2),o={a:n=a[0],b:r=a[1]};return EJ.runKernel("Multiply",o)}}),o1=BJ({abs_:function(e){var t=MJ(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return EJ.runKernel("ComplexAbs",n)}var r={x:t};return EJ.runKernel("Abs",r)}}),i1=BJ({acos_:function(e){var t={x:MJ(e,"x","acos")};return EJ.runKernel("Acos",t)}}),s1=BJ({acosh_:function(e){var t={x:MJ(e,"x","acosh")};return EJ.runKernel("Acosh",t)}}),u1=BJ({addN_:function(e){g$(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),g$(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got ".concat(e.length)}));var t=e.map((function(e,t){return MJ(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!k$(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return EJ.runKernel("AddN",r)}}),c1=BJ({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:MJ(e,"x","all","bool")},a={axis:t,keepDims:n};return EJ.runKernel("All",r,a)}}),l1=BJ({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:MJ(e,"x","any","bool")},a={axis:t,keepDims:n};return EJ.runKernel("Any",r,a)}}),d1=BJ({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:MJ(e,"x","argMax")},r={axis:t};return EJ.runKernel("ArgMax",n,r)}}),p1=BJ({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:MJ(e,"x","argMin")},r={axis:t};return EJ.runKernel("ArgMin",n,r)}}),f1=BJ({asin_:function(e){var t={x:MJ(e,"x","asin")};return EJ.runKernel("Asin",t)}}),h1=BJ({asinh_:function(e){var t={x:MJ(e,"x","asinh")};return EJ.runKernel("Asinh",t)}}),m1=BJ({atan_:function(e){var t={x:MJ(e,"x","atan")};return EJ.runKernel("Atan",t)}}),g1=BJ({atan2_:function(e,t){var n=MJ(e,"a","atan2"),r=MJ(t,"b","atan2"),a=Ky(bJ(n,r),2),o={a:n=a[0],b:r=a[1]};return EJ.runKernel("Atan2",o)}}),v1=BJ({atanh_:function(e){var t={x:MJ(e,"x","atanh")};return EJ.runKernel("Atanh",t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function y1(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0;return k1(e,[].concat(Xy(t),[e[3]]),n,o,r,null,null,_1(a))}function b1(e,t,n,r,a,o){var i,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=C1(t),c=Ky(u,2),l=c[0],d=c[1];if("channelsLast"===s)i=[l,d,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));i=[l,d,e[1],e[1]]}return k1(e,i,n,r,a,o,!1,s)}function x1(e,t,n,r,a,o){var i,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=S1(t),l=Ky(c,3),d=l[0],p=l[1],f=l[2];if("NDHWC"===u)s="channelsLast",i=[d,p,f,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",i=[d,p,f,e[1],e[1]]}return w1(e,i,n,r,a,!1,s,o)}function k1(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,d=-1;if("channelsLast"===s){var p=Ky(e,4);u=p[0],c=p[1],l=p[2],d=p[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var f=Ky(e,4);u=f[0],d=f[1],c=f[2],l=f[3]}var h,m=Ky(t,4),g=m[0],v=m[1],y=m[3],b=C1(n),x=Ky(b,2),k=x[0],w=x[1],I=C1(r),C=Ky(I,2),S=C[0],E=C[1],T=E1(g,S),N=E1(v,E),A=function(e,t,n,r,a,o,i,s,u){var c,l,d;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var p=function(e,t,n,r,a){null==r&&(r=I1(e,t,n));var o=e[1];return[T1((e[0]-t+2*r)/n+1,a),T1((o-t+2*r)/n+1,a)]}([t,n],o,r,e,s);l=p[0],d=p[1]}else if("same"===e){l=Math.ceil(t/r),d=Math.ceil(n/a);var f=Math.max(0,(l-1)*r+o-t),h=Math.max(0,(d-1)*a+i-n),m=Math.floor(f/2),g=f-m,v=Math.floor(h/2);c={top:m,bottom:g,left:v,right:h-v,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-o+1)/r),d=Math.ceil((n-i+1)/a);else{if("object"!=Ty(e))throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],k="channelsLast"===u?e[2][1]:e[3][1];c={top:y,bottom:b,left:x,right:k,type:0===y&&0===b&&0===x&&0===k?"VALID":"EXPLICIT"},l=T1((t-o+y+b)/r+1,s),d=T1((n-i+x+k)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:d}}(a,c,l,k,w,T,N,o,s),_=A.padInfo,R=A.outHeight,O=A.outWidth,F=i?y*d:y;return"channelsFirst"===s?h=[u,F,R,O]:"channelsLast"===s&&(h=[u,R,O,F]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:d,outHeight:R,outWidth:O,outChannels:F,padInfo:_,strideHeight:k,strideWidth:w,filterHeight:g,filterWidth:v,effectiveFilterHeight:T,effectiveFilterWidth:N,dilationHeight:S,dilationWidth:E,inShape:e,outShape:h,filterShape:t}}function w1(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,d=-1,p=-1;if("channelsLast"===i){var f=Ky(e,5);u=f[0],c=f[1],l=f[2],d=f[3],p=f[4]}else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat ".concat(i));var h=Ky(e,5);u=h[0],p=h[1],c=h[2],l=h[3],d=h[4]}var m,g=Ky(t,5),v=g[0],y=g[1],b=g[2],x=g[4],k=S1(n),w=Ky(k,3),I=w[0],C=w[1],S=w[2],E=S1(r),T=Ky(E,3),N=T[0],A=T[1],_=T[2],R=E1(v,N),O=E1(y,A),F=E1(b,_),M=function(e,t,n,r,a,o,i,s,u,c,l){var d,p,f,h;if("number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,o){null==a&&(a=I1(e,t,r));var i=e[1],s=e[2];return[T1((e[0]-t+2*a)/r+1,o),T1((i-t+2*a)/r+1,o),T1((s-t+2*a)/r+1,o),1]}([t,n,r,1],s,0,a,e,l);p=m[0],f=m[1],h=m[2]}else if("same"===e){var g=((p=Math.ceil(t/a))-1)*a+s-t,v=((f=Math.ceil(n/o))-1)*o+u-n,y=((h=Math.ceil(r/i))-1)*i+c-r,b=Math.floor(g/2),x=g-b,k=Math.floor(v/2),w=v-k,I=Math.floor(y/2);d={top:k,bottom:w,left:I,right:y-I,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((t-s+1)/a),f=Math.ceil((n-u+1)/o),h=Math.ceil((r-c+1)/i)}return{padInfo:d,outDepth:p,outHeight:f,outWidth:h}}(a,c,l,d,I,C,S,R,O,F,s),D=M.padInfo,B=M.outDepth,P=M.outHeight,L=M.outWidth,U=o?x*p:x;return"channelsFirst"===i?m=[u,U,B,P,L]:"channelsLast"===i&&(m=[u,B,P,L,U]),{batchSize:u,dataFormat:i,inDepth:c,inHeight:l,inWidth:d,inChannels:p,outDepth:B,outHeight:P,outWidth:L,outChannels:U,padInfo:D,strideDepth:I,strideHeight:C,strideWidth:S,filterDepth:v,filterHeight:y,filterWidth:b,effectiveFilterDepth:R,effectiveFilterHeight:O,effectiveFilterWidth:F,dilationDepth:N,dilationHeight:A,dilationWidth:_,inShape:e,outShape:m,filterShape:t}}function I1(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=E1(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function C1(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function S1(e){return"number"==typeof e?[e,e,e]:e}function E1(e,t){return t<=1?e:e+(e-1)*(t-1)}function T1(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function N1(e){var t=Ky(C1(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function A1(e,t){return N1(e)||N1(t)}function _1(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var R1=BJ({reshape_:function(e,t){var n={x:MJ(e,"x","reshape","string_or_numeric")},r={shape:t};return EJ.runKernel("Reshape",n,r)}}),O1=BJ({avgPool_:function(e,t,n,r,a){var o=MJ(e,"x","avgPool","float32");g$(A1(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '1'")}));var i=o,s=!1;3===o.rank&&(s=!0,i=R1(o,[1,o.shape[0],o.shape[1],o.shape[2]])),g$(4===i.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(i.rank,".")})),null!=a&&g$(w$(r),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var u={x:i},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=EJ.runKernel("AvgPool",u,c);return l=g0(l,o.dtype),s?R1(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),F1=BJ({avgPool3d_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",i=MJ(e,"x","avgPool3d","float32"),s=i,u=!1;4===i.rank&&(u=!0,s=R1(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),g$(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),g$("NDHWC"===o,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(o)})),null!=a&&g$(w$(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o},d=EJ.runKernel("AvgPool3D",c,l);return d=g0(d,s.dtype),u?R1(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),M1=BJ({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;g$(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=DJ(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return v0(n[0]);var r=n,a={axis:t};return EJ.runKernel("Concat",r,a)}}),D1=BJ({sigmoid_:function(e){var t={x:MJ(e,"x","sigmoid")};return EJ.runKernel("Sigmoid",t)}}),B1=BJ({slice_:function(e,t,n){var r=MJ(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},o={begin:t,size:n};return EJ.runKernel("Slice",a,o)}}),P1=BJ({tanh_:function(e){var t={x:MJ(e,"x","tanh")};return EJ.runKernel("Tanh",t)}}),L1=BJ({batchToSpaceND_:function(e,t,n){var r=MJ(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));g$(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),g$(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),g$(r.shape[0]%a==0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of the elements of blockShape ").concat(t.join(" * ")," === ").concat(a)}));var o={x:r},i={blockShape:t,crops:n};return EJ.runKernel("BatchToSpaceND",o,i)}}),U1=BJ({batchNorm_:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e,t,n,r,a,o){null==o&&(o=.001);var i,s,u=MJ(e,"x","batchNorm"),c=MJ(t,"mean","batchNorm"),l=MJ(n,"variance","batchNorm");null!=a&&(i=MJ(a,"scale","batchNorm")),null!=r&&(s=MJ(r,"offset","batchNorm")),g$(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),g$(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),g$(null==i||c.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var d={x:function(e){return 0===e.rank||1===e.rank?R1(e,[1,1,1,e.size]):2===e.rank?R1(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?R1(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),scale:i,offset:s,mean:c,variance:l},p={varianceEpsilon:o},f=EJ.runKernel("FusedBatchNorm",d,p);return R1(f,u.shape)}}),V1=BJ({bincount_:function(e,t,n){var r=MJ(e,"x","bincount"),a=MJ(t,"weights","bincount");g$("int32"===r.dtype,(function(){return"Error in bincount: input dtype must be int32, but got ".concat(r.dtype)})),g$(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),g$(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or0-length, but got input shape: ".concat(r.shape,", weights shape: ").concat(a.shape,".")}));var o={x:r,weights:a},i={size:n};return EJ.runKernel("Bincount",o,i)}}),W1=BJ({broadcastTo_:function(e,t){var n=MJ(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=R1(n,a)}for(var o=n.shape,i=Array.from(t),s=t.length-1;s>=0;s--)if(o[s]===t[s])i[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));if(0===i.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0})).length)return v0(n);var u={x:n},c={reps:i};return EJ.runKernel("Tile",u,c)}}),z1=BJ({ceil_:function(e){var t={x:MJ(e,"x","ceil")};return EJ.runKernel("Ceil",t)}}),j1=BJ({clipByValue_:function(e,t,n){var r=MJ(e,"x","clipByValue");g$(t<=n,(function(){return"Error in clip: min (".concat(t,") must be less than or equal to max (").concat(n,").")}));var a={x:r},o={clipValueMin:t,clipValueMax:n};return EJ.runKernel("ClipByValue",a,o)}}),H1=BJ({concat2d_:function(e,t){return M1(e,t)}}),G1=BJ({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=MJ(e,"x","conv2d"),u=MJ(t,"filter","conv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=R1(s,[1,s.shape[0],s.shape[1],s.shape[2]])),g$(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),g$(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank ".concat(u.rank,".")})),null!=i&&g$(w$(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode ".concat(i," but got pad ").concat(r,".")}));var d="NHWC"===a?c.shape[3]:c.shape[1];g$(d===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(d,") must match input depth for filter ").concat(u.shape[2],".")})),g$(A1(n,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(o,"'")}));var p={x:c,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},h=EJ.runKernel("Conv2D",p,f);return l?R1(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),q1=BJ({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0,s=MJ(e,"x","conv1d"),u=MJ(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=R1(s,[1,s.shape[0],s.shape[1]])),g$(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),g$(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank ".concat(u.rank,".")})),null!=i&&g$(w$(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode ".concat(i," but got pad ").concat(r,".")})),g$(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match input depth for filter ").concat(u.shape[1],".")})),g$(A1(n,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride ".concat(n," and dilation '").concat(o,"'")})),g$("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var d=R1(u,[1,u.shape[0],u.shape[1],u.shape[2]]),p=R1(c,[c.shape[0],1,c.shape[1],c.shape[2]]),f=G1(p,d,[1,n],r,"NHWC",[1,o],i);return R1(f,l?[f.shape[2],f.shape[3]]:[f.shape[0],f.shape[2],f.shape[3]])}}),K1=BJ({conv2DBackpropInput_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0;g$(e.length===t.rank,(function(){return"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=R1(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),g$(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length ".concat(s.length,".")})),g$(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank ".concat(u.rank)})),g$(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank ".concat(n.rank)}));var l="NHWC"===o?s[3]:s[1],d="NHWC"===o?u.shape[3]:u.shape[1];g$(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must match input depth for filter ").concat(n.shape[2],".")})),g$(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(d,") must match output depth for filter ").concat(n.shape[3],".")})),null!=i&&g$(w$(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ".concat(i," but got pad ").concat(a,".")}));var p={dy:u,filter:n},f={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,inputShape:s},h=EJ.runKernel("Conv2DBackpropInput",p,f);return c?R1(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),X1=BJ({conv2dTranspose_:function(e,t,n,r,a,o){var i=MJ(e,"x","conv2dTranspose"),s=MJ(t,"filter","conv2dTranspose");return K1(n,i,s,r,a,"NHWC",o)}}),Q1=BJ({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],i=MJ(e,"x","conv3d"),s=MJ(t,"filter","conv3d"),u=i,c=!1;4===i.rank&&(c=!0,u=R1(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),g$(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),g$(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank ".concat(s.rank,".")})),g$(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match input depth for filter ").concat(s.shape[3],".")})),g$(A1(n,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(o,"'")})),g$("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var l={x:u,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:o},p=EJ.runKernel("Conv3D",l,d);return c?R1(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),Y1=BJ({cos_:function(e){var t={x:MJ(e,"x","cos")};return EJ.runKernel("Cos",t)}}),$1=BJ({cosh_:function(e){var t={x:MJ(e,"x","cosh")};return EJ.runKernel("Cosh",t)}}),Z1=BJ({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:MJ(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:r};return EJ.runKernel("Cumsum",a,o)}}),J1=BJ({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=MJ(e,"x","denseBincount"),o=MJ(t,"weights","denseBincount");g$("int32"===a.dtype,(function(){return"Error in denseBincount: input dtype must be int32, but got ".concat(a.dtype)})),g$(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got rank ".concat(a.rank,".")})),g$(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),g$(o.size===a.size||0===o.size,(function(){return"Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ".concat(a.shape,", weights shape: ").concat(o.shape,".")}));var i={x:a,weights:o},s={size:n,binaryOutput:r};return EJ.runKernel("DenseBincount",i,s)}}),e2=BJ({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=MJ(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];g$(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),g$(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),g$(i%(t*t)==0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(i," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return EJ.runKernel("DepthToSpace",s,u)}}),t2=BJ({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=MJ(e,"x","depthwiseConv2d"),u=MJ(t,"filter","depthwiseConv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=R1(s,[1,s.shape[0],s.shape[1],s.shape[2]])),g$(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),g$(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank ".concat(u.rank,".")})),g$(c.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels (".concat(c.shape[3],") must match the inChannels dimension in filter ").concat(u.shape[2],".")})),null!=i&&g$(w$(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ".concat(i," but got pad ").concat(r,".")}));var d={x:c,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:o,dimRoundingMode:i},f=EJ.runKernel("DepthwiseConv2dNative",d,p);return l?R1(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),n2=BJ({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=MJ(e,"x","dilation2d"),s=MJ(t,"filter","dilation2d");g$(3===i.rank||4===i.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank ".concat(i.rank,".")})),g$(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank ".concat(s.rank,".")})),g$("NHWC"===o,(function(){return"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ".concat(o)}));var u=i,c=!1;3===i.rank&&(u=R1(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0);var l={x:u,filter:s},d={strides:n,pad:r,dilations:a},p=EJ.runKernel("Dilation2D",l,d);return c?R1(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function r2(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}function a2(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function o2(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var o=e[e.length-a-1];null==o&&(o=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===o)n.unshift(i);else if(1===i)n.unshift(o);else{if(o!==i)throw Error("Operands could not be broadcast together with shapes ".concat(e," and ").concat(t,"."));n.unshift(o)}}return n}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var i2=BJ({equal_:function(e,t){var n,r=MJ(e,"a","equal","string_or_numeric"),a=MJ(t,"b","equal","string_or_numeric");r=(n=Ky(bJ(r,a),2))[0],a=n[1],o2(r.shape,a.shape);var o={a:r,b:a};return EJ.runKernel("Equal",o)}}),s2=BJ({where_:function(e,t,n){var r=MJ(t,"a","where"),a=MJ(n,"b","where"),o=MJ(e,"condition","where","bool"),i=o2(o2(o.shape,r.shape),a.shape),s={condition:W1(o,i),t:W1(r,i),e:W1(a,i)};return EJ.runKernel("Select",s)}}),u2=BJ({zerosLike_:function(e){var t={x:MJ(e,"x","zerosLike")};return EJ.runKernel("ZerosLike",t)}}),c2=BJ({divNoNan_:function(e,t){var n=MJ(e,"a","div"),r=MJ(t,"b","div"),a=Ky(bJ(n,r),2);n=a[0],r=a[1];var o=r1(n,r),i=u2(o),s=i2(r,i);return s2(s,i,o)}}),l2=BJ({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return MJ(e,"tensors".concat(t),"einsum")})),o={equation:e};return EJ.runKernel("Einsum",a,o)}}),d2=BJ({elu_:function(e){var t={x:MJ(e,"x","elu")};return EJ.runKernel("Elu",t)}}),p2=BJ({erf_:function(e){var t=MJ(e,"x","erf");g$("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=g0(t,"float32"));var n={x:t};return EJ.runKernel("Erf",n)}}),f2=BJ({exp_:function(e){var t={x:MJ(e,"x","exp")};return EJ.runKernel("Exp",t)}}),h2=BJ({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=MJ(e,"x","expandDims","string_or_numeric");g$(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return EJ.runKernel("ExpandDims",r,a)}}),m2=BJ({expm1_:function(e){var t={x:MJ(e,"x","expm1")};return EJ.runKernel("Expm1",t)}}),g2=BJ({tile_:function(e,t){var n=MJ(e,"x","tile","string_or_numeric");g$(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," must match length of reps ").concat(t,".")}));var r={x:n},a={reps:t};return EJ.runKernel("Tile",r,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function v2(e,t,n){var r={shape:e,value:t,dtype:n};return EJ.runKernel("Fill",{},r)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var y2=BJ({floor_:function(e){var t={x:MJ(e,"x","floor")};return EJ.runKernel("Floor",t)}}),b2=BJ({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={x:MJ(e,"x","gather"),indices:MJ(t,"indices","gather","int32")},o={axis:n,batchDims:r};return EJ.runKernel("GatherV2",a,o)}}),x2=BJ({greater_:function(e,t){var n,r=MJ(e,"a","greater","string_or_numeric"),a=MJ(t,"b","greater","string_or_numeric");r=(n=Ky(bJ(r,a),2))[0],a=n[1],o2(r.shape,a.shape);var o={a:r,b:a};return EJ.runKernel("Greater",o)}}),k2=BJ({greaterEqual_:function(e,t){var n,r=MJ(e,"a","greaterEqual","string_or_numeric"),a=MJ(t,"b","greaterEqual","string_or_numeric");r=(n=Ky(bJ(r,a),2))[0],a=n[1],o2(r.shape,a.shape);var o={a:r,b:a};return EJ.runKernel("GreaterEqual",o)}}),w2=BJ({imag_:function(e){var t={input:MJ(e,"input","imag")};return EJ.runKernel("Imag",t)}}),I2=BJ({isNaN_:function(e){var t={x:MJ(e,"x","isNaN")};return EJ.runKernel("IsNan",t)}}),C2=BJ({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:MJ(e,"x","leakyRelu")},r={alpha:t};return EJ.runKernel("LeakyRelu",n,r)}}),S2=BJ({less_:function(e,t){var n,r=MJ(e,"a","less","string_or_numeric"),a=MJ(t,"b","less","string_or_numeric");r=(n=Ky(bJ(r,a),2))[0],a=n[1],o2(r.shape,a.shape);var o={a:r,b:a};return EJ.runKernel("Less",o)}}),E2=BJ({lessEqual_:function(e,t){var n,r=MJ(e,"a","lessEqual","string_or_numeric"),a=MJ(t,"b","lessEqual","string_or_numeric");r=(n=Ky(bJ(r,a),2))[0],a=n[1],o2(r.shape,a.shape);var o={a:r,b:a};return EJ.runKernel("LessEqual",o)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function T2(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return EJ.runKernel("LinSpace",{},r)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var N2=BJ({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=MJ(e,"x","localResponseNormalization");g$(4===o.rank||3===o.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(o.rank,".")})),g$(w$(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ".concat(t,".")}));var i=o,s=!1;3===o.rank&&(s=!0,i=R1(o,[1,o.shape[0],o.shape[1],o.shape[2]]));var u={x:i},c={depthRadius:t,bias:n,alpha:r,beta:a},l=EJ.runKernel("LRN",u,c);return s?R1(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),A2=BJ({log_:function(e){var t={x:MJ(e,"x","log")};return EJ.runKernel("Log",t)}}),_2=BJ({log1p_:function(e){var t={x:MJ(e,"x","log1p")};return EJ.runKernel("Log1p",t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function R2(e){return EJ.customGrad(e)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var O2=BJ({neg_:function(e){var t={x:MJ(e,"x","neg")};return EJ.runKernel("Neg",t)}}),F2=BJ({softplus_:function(e){var t={x:MJ(e,"x","softplus")};return EJ.runKernel("Softplus",t)}}),M2=BJ({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:MJ(e,"x","max")},a={reductionIndices:t,keepDims:n};return EJ.runKernel("Max",r,a)}}),D2=BJ({sub_:function(e,t){var n=MJ(e,"a","sub"),r=MJ(t,"b","sub"),a=Ky(bJ(n,r),2),o={a:n=a[0],b:r=a[1]};return EJ.runKernel("Sub",o)}}),B2=BJ({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=MJ(e,"x","sum");"bool"===r.dtype&&(r=g0(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return EJ.runKernel("Sum",a,o)}}),P2=BJ({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=MJ(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and axis was ").concat(t));return R2((function(e,n){var r=M2(e,t,!0),a=D2(e,r),o=D2(g0(a,"float32"),A2(B2(f2(a),t,!0)));return n([o]),{value:o,gradFunc:function(e,n){var r=Ky(n,1)[0],a=f2(r);return D2(e,a1(B2(e,t,!0),a))}}}))(n)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function L2(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function U2(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[o++]):a.push(t[i++]);return a}function V2(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function W2(e,t){return U2(e,t.map((function(e){return 1})),t)}function z2(e,t,n){g$(L2(t,n),(function(){return"".concat(e," supports only inner-most axes for now. Got axes ").concat(t," and rank-").concat(n," input.")}))}function j2(e,t){if(L2(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function H2(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function G2(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var q2=BJ({logicalAnd_:function(e,t){var n=MJ(e,"a","logicalAnd","bool"),r=MJ(t,"b","logicalAnd","bool");o2(n.shape,r.shape);var a={a:n,b:r};return EJ.runKernel("LogicalAnd",a)}}),K2=BJ({logicalNot_:function(e){var t={x:MJ(e,"x","logicalNot","bool")};return EJ.runKernel("LogicalNot",t)}}),X2=BJ({logicalOr_:function(e,t){var n=MJ(e,"a","logicalOr","bool"),r=MJ(t,"b","logicalOr","bool");o2(n.shape,r.shape);var a={a:n,b:r};return EJ.runKernel("LogicalOr",a)}}),Q2=BJ({maxPool_:function(e,t,n,r,a){var o=MJ(e,"x","maxPool"),i=o,s=!1;3===o.rank&&(s=!0,i=R1(o,[1,o.shape[0],o.shape[1],o.shape[2]])),g$(4===i.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(i.rank,".")})),g$(A1(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '1'")})),null!=a&&g$(w$(r),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var u={x:i},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=EJ.runKernel("MaxPool",u,c);return s?R1(l,[l.shape[1],l.shape[2],l.shape[3]]):l}}),Y2=BJ({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",i=MJ(e,"x","maxPool3d"),s=i,u=!1;4===i.rank&&(u=!0,s=R1(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),g$(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),g$("NDHWC"===o,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(o)})),null!=a&&g$(w$(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:o},d=EJ.runKernel("MaxPool3D",c,l);return u?R1(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),$2=BJ({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={x:MJ(e,"x","maxPoolWithArgmax")},i={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},s=EJ.runKernel("MaxPoolWithArgmax",o,i);return{result:s[0],indexes:s[1]}}}),Z2=BJ({maximum_:function(e,t){var n,r=MJ(e,"a","maximum"),a=MJ(t,"b","maximum");r=(n=Ky(bJ(r,a),2))[0],a=n[1],"bool"===r.dtype&&(r=g0(r,"int32"),a=g0(a,"int32")),o2(r.shape,a.shape);var o={a:r,b:a};return EJ.runKernel("Maximum",o)}}),J2=BJ({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:MJ(e,"x","mean")},a={axis:t,keepDims:n};return EJ.runKernel("Mean",r,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function e3(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=e3(e,"float32"),r=e3(e,"float32");return PJ(n,r)}var a=z$(x$(e),t);return EJ.makeTensor(a,e,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function t3(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=t3(e,"float32"),r=e3(e,"float32");return PJ(n,r)}var a=W$(x$(e),t);return EJ.makeTensor(a,e,t)}
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var n3=BJ({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:MJ(e,"x","min")},a={axis:t,keepDims:n};return EJ.runKernel("Min",r,a)}}),r3=BJ({minimum_:function(e,t){var n,r=MJ(e,"a","minimum"),a=MJ(t,"b","minimum");r=(n=Ky(bJ(r,a),2))[0],a=n[1],"bool"===r.dtype&&(r=g0(r,"int32"),a=g0(a,"int32")),o2(r.shape,a.shape);var o={a:r,b:a};return EJ.runKernel("Minimum",o)}}),a3=BJ({mirrorPad_:function(e,t,n){g$("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. Got ".concat(n,".")}));var r=MJ(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");g$(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". Got ").concat(t.length,".")}));for(var a="reflect"===n?1:0,o=function(e){g$(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),g$(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal to ").concat(r.shape[e]-a," or less than 0 for input of shape ").concat(r.shape)}))},i=0;i<r.rank;i++)o(i);var s={paddings:t,mode:n},u={x:r};return EJ.runKernel("MirrorPad",u,s)}}),o3=BJ({mod_:function(e,t){var n=MJ(e,"a","mod"),r=MJ(t,"b","mod"),a=Ky(bJ(n,r),2),o={a:n=a[0],b:r=a[1]};return EJ.runKernel("Mod",o)}}),i3=BJ({square_:function(e){var t=MJ(e,"x","square");return EJ.runKernel("Square",{x:t},{})}}),s3=BJ({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=MJ(e,"logits","multinomial"),o=a.size,i=a.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got ".concat(o,"."));if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(i));n=n||Math.random();var s={logits:1===i?R1(a,[1,-1]):a},u={numSamples:t,seed:n,normalized:r},c=EJ.runKernel("Multinomial",s,u);return 1===i?R1(c,[c.size]):c}}),u3=BJ({notEqual_:function(e,t){var n,r=MJ(e,"a","notEqual","string_or_numeric"),a=MJ(t,"b","notEqual","string_or_numeric");r=(n=Ky(bJ(r,a),2))[0],a=n[1],o2(r.shape,a.shape);var o={a:r,b:a};return EJ.runKernel("NotEqual",o)}}),c3=BJ({onesLike_:function(e){var t={x:MJ(e,"x","onesLike")};return EJ.runKernel("OnesLike",t)}}),l3=BJ({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=MJ(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},o={x:r};return EJ.runKernel("PadV2",o,a)}}),d3=BJ({spaceToBatchND_:function(e,t,n){var r=MJ(e,"x","spaceToBatchND");g$(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),g$(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),g$(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},o={blockShape:t,paddings:n};return EJ.runKernel("SpaceToBatchND",a,o)}}),p3=BJ({pow_:function(e,t){var n=MJ(e,"base","pow"),r=MJ(t,"exp","pow"),a=Ky(bJ(n,r),2),o={a:n=a[0],b:r=a[1]};return EJ.runKernel("Pow",o)}}),f3=BJ({prelu_:function(e,t){var n={x:MJ(e,"x","prelu"),alpha:MJ(t,"alpha","prelu")};return EJ.runKernel("Prelu",n)}}),h3=BJ({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=MJ(e,"x","prod");"bool"===r.dtype&&(r=g0(r,"int32"));var a={x:r},o={axis:t,keepDims:n};return EJ.runKernel("Prod",a,o)}}),m3=HQ((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new r(e),o=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.alea=o}(0,e)})),g3=HQ((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xor128=o}(0,e)})),v3=HQ((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xorwow=o}(0,e)})),y3=HQ((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&(o.x&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xorshift7=o}(0,e)})),b3=HQ((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=s[127&o]^=r+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&(o.X&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.xor4096=o}(0,e)})),x3=HQ((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,o&&("object"==Ty(o)&&a(o,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=o:this.tychei=o}(0,e)})),k3=GQ(Object.freeze({__proto__:null,default:{}})),w3=HQ((function(e){!function(t,n){var r,a=this,o=256,i=n.pow(o,6),s=n.pow(2,52),u=2*s,c=255;function l(e,c,l){var g=[],v=h(f((c=1==c?{entropy:!0}:c||{}).entropy?[e,m(t)]:null==e?function(){try{var e;return r&&(e=r.randomBytes)?e=e(o):(e=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(e)),m(e)}catch(e){var n=a.navigator,i=n&&n.plugins;return[+new Date,a,i,a.screen,m(t)]}}():e,3),g),y=new d(g),b=function(){for(var e=y.g(6),t=i,n=0;e<s;)e=(e+n)*o,t*=o,n=y.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,h(m(y.S),t),(c.pass||l||function(e,t,r,a){return a&&(a.S&&p(a,y),e.state=function(){return p(y,{})}),r?(n.random=e,t):e})(b,v,"global"in c?c.global:this==n,c.state)}function d(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<o;)s[a]=a++;for(a=0;a<o;a++)s[a]=s[i=c&i+e[a%n]+(t=s[a])],s[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,s=r.S;e--;)t=s[a=c&a+1],n=n*o+s[c&(s[a]=s[i=c&i+t])+(s[i]=t)];return r.i=a,r.j=i,n})(o)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){var n,r=[],a=Ty(e);if(t&&"object"==a)for(n in e)try{r.push(f(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\0"}function h(e,t){for(var n,r=e+"",a=0;a<r.length;)t[c&a]=c&(n^=19*t[c&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(n.seedrandom=l,h(n.random(),t),e.exports){e.exports=l;try{r=k3}catch(e){}}}([],Math)}));
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */w3.alea=m3,w3.xor128=g3,w3.xorwow=v3,w3.xorshift7=y3,w3.xor4096=b3,w3.tychei=x3;var I3=w3,C3=function(){function e(t,n,r,a,o){_y(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=I3.alea(i.toString())}return Oy(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,o=void 0,i=void 0;do{i=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),S3=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(_y(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==o&&(o=Math.random()),"number"==typeof o&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=I3.alea(o)}return Oy(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}(),E3=BJ({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,o=m0(e,r),i=new S3(t,n,null,a),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function T3(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return EJ.runKernel("Range",{},a)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var N3=BJ({real_:function(e){var t={input:MJ(e,"input","real")};return EJ.runKernel("Real",t)}}),A3=BJ({reciprocal_:function(e){var t={x:MJ(e,"x","reciprocal")};return EJ.runKernel("Reciprocal",t)}}),_3=BJ({relu_:function(e){var t={x:MJ(e,"x","relu")};return EJ.runKernel("Relu",t)}}),R3=BJ({relu6_:function(e){var t={x:MJ(e,"x","relu6")};return EJ.runKernel("Relu6",t)}}),O3=BJ({reverse_:function(e,t){var n={x:MJ(e,"x","reverse")},r={dims:t};return EJ.runKernel("Reverse",n,r)}}),F3=BJ({round_:function(e){var t={x:MJ(e,"x","round")};return EJ.runKernel("Round",t)}}),M3=BJ({rsqrt_:function(e){var t={x:MJ(e,"x","rsqrt")};return EJ.runKernel("Rsqrt",t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function D3(e,t){if((O$(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&O$(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return LJ(e,[],[],t)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var B3=BJ({selu_:function(e){var t={x:MJ(e,"x","selu")};return EJ.runKernel("Selu",t)}}),P3=function(){var e=Ay(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,u,c,l,d,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=MJ(t,"x","setdiff1d"),a=MJ(n,"y","setdiff1d"),g$(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),g$(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),g$(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=4,r.data();case 4:return o=e.sent,e.next=7,a.data();case 7:for(i=e.sent,s=new Set(i),u=0,c=0;c<o.length;c++)s.has(o[c])||u++;for(l=new iJ([u],r.dtype),d=new iJ([u],"int32"),p=0,f=0;p<o.length;p++)s.has(o[p])||(l.values[f]=o[p],d.values[f]=p,f++);return e.abrupt("return",[l.toTensor(),d.toTensor()]);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L3=BJ({sign_:function(e){var t={x:MJ(e,"x","sign")};return EJ.runKernel("Sign",t)}}),U3=BJ({sin_:function(e){var t={x:MJ(e,"x","sin")};return EJ.runKernel("Sin",t)}}),V3=BJ({sinh_:function(e){var t={x:MJ(e,"x","sinh")};return EJ.runKernel("Sinh",t)}}),W3=BJ({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=MJ(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return EJ.runKernel("Softmax",r,a)}}),z3=BJ({fft_:function(e){g$("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got ".concat(e.dtype,".")}));var t={input:e};return EJ.runKernel("FFT",t)}}),j3=BJ({ifft_:function(e){g$("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got ".concat(e.dtype,".")}));var t={input:e};return EJ.runKernel("IFFT",t)}}),H3=BJ({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=R1(e,[r,n]);t=j3(a)}else{var o=[r,2*(n-1)],i=R1(N3(e),[r,n]),s=R1(w2(e),[r,n]),u=O3(B1(i,[0,1],[r,n-2]),1),c=a1(O3(B1(s,[0,1],[r,n-2]),1),D3(-1)),l=M1([i,u],1),d=M1([s,c],1),p=R1(PJ(l,d),[o[0],o[1]]);t=j3(p)}if(t=N3(t),3===e.rank&&0!==e.shape[0]){var f=t,h=e.shape[0];t=R1(t,[h,t.shape[0]/h,t.shape[1]]),f.dispose()}return t}}),G3=BJ({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={x:MJ(e,"x","split")},a={numOrSizeSplits:t,axis:n};return EJ.runKernel("SplitV",r,a)}}),q3=BJ({rfft_:function(e,t){g$("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var o=e.shape.map((function(e){return 0})),i=e.shape.map((function(e){return e}));i[e.shape.length-1]=t,n=B1(e,o,i),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=M1([e,e3(s)],e.shape.length-1),r=t}else n=e;var u=u2(n),c=R1(PJ(n,u),[a,r]),l=z3(c),d=Math.floor(r/2)+1,p=N3(l),f=w2(l),h=G3(p,[d,r-d],p.shape.length-1),m=G3(f,[d,r-d],f.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=d,R1(PJ(h[0],m[0]),g)}}),K3=BJ({sqrt_:function(e){var t={x:MJ(e,"x","sqrt")};return EJ.runKernel("Sqrt",t)}}),X3=BJ({squaredDifference_:function(e,t){var n,r=MJ(e,"a","squaredDifference"),a=MJ(t,"b","squaredDifference");r=(n=Ky(bJ(r,a),2))[0],a=n[1],o2(r.shape,a.shape);var o={a:r,b:a};return EJ.runKernel("SquaredDifference",o,{})}}),Q3=BJ({squeeze_:function(e,t){var n=MJ(e,"x","squeeze");return R1(n,N$(n.shape,t).newShape)}}),Y3=BJ({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=DJ(e,"tensors","stack","string_or_numeric");g$(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&g$(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return EJ.runKernel("Pack",r,a)}}),$3=BJ({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:MJ(e,"x","step")},r={alpha:t};return EJ.runKernel("Step",n,r)}}),Z3=BJ({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c={x:MJ(e,"x","stridedSlice","string_or_numeric")},l={begin:t,end:n,strides:r,beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:u};return EJ.runKernel("StridedSlice",c,l)}}),J3=BJ({tan_:function(e){var t={x:MJ(e,"x","tan")};return EJ.runKernel("Tan",t)}});
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function e4(e,t){y$(e);var n=RJ(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return LJ(e,null,n,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function t4(e,t,n){if(y$(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=RJ(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return LJ(e,t,r,n)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var n4=BJ({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=MJ(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") but got ").concat(t));var o={x:r},i={k:t,sorted:n},s=EJ.runKernel("TopK",o,i),u=Ky(s,2),c=u[0],l=u[1];return{values:c,indices:l}}}),r4=BJ({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var o=new C3(t,n,r,!0,a),i=m0(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),a4=BJ({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=MJ(e,"x","unique","string_or_numeric");g$(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},o=EJ.runKernel("Unique",r,a),i=Ky(o,2),s=i[0],u=i[1];return{values:s,indices:u}}}),o4=BJ({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=MJ(e,"x","unstack","string_or_numeric");g$(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return EJ.runKernel("Unpack",r,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function i4(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=m0(e,"int32"),o=m0([n.length,e.length],"int32"),i=0;i<n.length;i++){var s=a.indexToLoc(n[i]),u=i*e.length;o.values.set(s,u)}return o.toTensor()}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var s4=function(){var e=Ay(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=MJ(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=i4(n.shape,r),e.abrupt("return",(t!==n&&n.dispose(),a));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u4=BJ({scatterND_:function(e,t,n){var r=MJ(e,"indices","scatterND","int32"),a=MJ(t,"updates","scatterND");R0(a,r,n);var o={indices:r,updates:a},i={shape:n};return EJ.runKernel("ScatterNd",o,i)}}),c4=BJ({sparseToDense_:
/**
	   * @license
	   * Copyright 2018 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=MJ(e,"sparseIndices","sparseToDense","int32"),o=MJ(t,"sparseValues","sparseToDense"),i=MJ(r,"defaultValue","sparseToDense",o.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:, ".concat(n.length,", should be: ").concat(o,"."));var i=t.size;if(0!==t.rank&&(1!==t.rank||i!==a))throw new Error("sparseValues has incorrect shape ".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,o,n,i);var s={sparseIndices:a,sparseValues:o,defaultValue:i},u={outputShape:n};return EJ.runKernel("SparseToDense",s,u)}}),l4=BJ({gatherND_:function(e,t){var n=MJ(t,"indices","gatherND","int32"),r={params:MJ(e,"x","gatherND","string_or_numeric"),indices:n};return EJ.runKernel("GatherNd",r)}}),d4=BJ({conv2DBackpropFilter_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=R1(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=R1(t,[1,t.shape[0],t.shape[1],t.shape[2]])),g$(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape ".concat(s.shape,".")})),g$(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape ".concat(u.shape,".")})),g$(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got ".concat(n,".")}));var c="NHWC"===o?s.shape[3]:s.shape[1],l="NHWC"===o?u.shape[3]:u.shape[1];g$(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must match input depth in filter (").concat(n[2],".")})),g$(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must match output depth for filter (").concat(n[3],").")})),null!=i&&g$(w$(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ".concat(i," but got pad ").concat(a,".")}));var d={x:s,dy:u},p={strides:r,pad:a,dataFormat:o,dimRoundingMode:i,filterShape:n};return EJ.runKernel("Conv2DBackpropFilter",d,p)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function p4(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return a1(e,$3(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function f4(e,t){var n=t,r=a2(e.shape,t.shape);return r.length>0&&(n=B2(n,r)),R1(n,e.shape)}function h4(e,t,n,r){if("linear"===t)return e;if("relu"===t)return _3(e);if("elu"===t)return d2(e);if("relu6"===t)return R3(e);if("prelu"===t)return f3(e,n);if("leakyrelu"===t)return C2(e,r);if("sigmoid"===t)return D1(e);throw new Error("Unknown fused activation ".concat(t,"."))}var m4=function(e,t){return!(e>0)||"linear"===t},g4=BJ({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,o=e.dataFormat,i=void 0===o?"NHWC":o,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,d=e.activation,p=void 0===d?"linear":d,f=e.preluActivationWeights,h=e.leakyreluAlpha;if(p=p||"linear",!1===m4(EJ.state.gradientDepth,p)){var m=G1(t,n,r,a,i,u,c);return null!=l&&(m=t1(m,l)),h4(m,p,f,h)}var g=MJ(t,"x","conv2d"),v=MJ(n,"filter","conv2d"),y=g,b=!1;3===g.rank&&(b=!0,y=R1(g,[1,g.shape[0],g.shape[1],g.shape[2]])),g$(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank ".concat(y.rank,".")})),g$(4===v.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank ".concat(v.rank,".")})),null!=c&&g$(w$(a),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode ".concat(c," but got pad ").concat(a,".")})),g$(y.shape[3]===v.shape[2],(function(){return"Error in conv2d: depth of input (".concat(y.shape[3],") must match input depth for filter ").concat(v.shape[2],".")})),g$(A1(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),g$("NHWC"===i,(function(){return"Error in conv2d: got dataFormat of ".concat(i," but only NHWC is currently supported.")}));var x,k,w=k1(y.shape,v.shape,r,u,a,c);null!=l&&(x=Ky(bJ(x=MJ(l,"bias","fused conv2d"),g),1)[0],o2(w.outShape,x.shape)),null!=f&&(k=MJ(f,"prelu weights","fused conv2d"));var I=function(e,t){var n=Ky(t,4),o=n[0],i=n[1],s=n[2],c=n[3],l=p4(e,s,p);g$(N1(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(u,"'")}));var d=[K1(i.shape,l,o,r,a),d4(i,l,o.shape,r,a)];if(null!=c){var f=f4(c,l);d.push(f)}return d},C={x:y,filter:v,bias:x,preluActivationWeights:k},S={strides:r,pad:a,dataFormat:i,dilations:u,dimRoundingMode:c,activation:p,leakyreluAlpha:h};return null==l?R2((function(e,t,n){var r=EJ.runKernel("FusedConv2D",C,S);return n([t,e,r]),b&&(r=R1(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:I}}))(y,v):R2((function(e,t,n,r){var a=EJ.runKernel("FusedConv2D",C,S);return r([t,e,a,n]),b&&(a=R1(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:I}}))(y,v,x)}}),v4=BJ({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=R1(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=R1(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:u},l={strides:r,pad:a,dimRoundingMode:i,dilations:o,filterShape:n};return EJ.runKernel("DepthwiseConv2dNativeBackpropFilter",c,l)}}),y4=BJ({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=R1(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:i,dilations:o,inputShape:e},d=EJ.runKernel("DepthwiseConv2dNativeBackpropInput",c,l);return u?R1(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),b4=BJ({fusedDepthwiseConv2d_:function(e){var t,n=e.x,r=e.filter,a=e.strides,o=e.pad,i=e.dataFormat,s=void 0===i?"NHWC":i,u=e.dilations,c=void 0===u?[1,1]:u,l=e.dimRoundingMode,d=e.bias,p=e.activation,f=void 0===p?"linear":p,h=e.preluActivationWeights,m=e.leakyreluAlpha;if(!1===m4(EJ.state.gradientDepth,f)){var g=t2(n,r,a,o,s,c,l);return null!=d&&(g=t1(g,d)),h4(g,f,h,m)}var v=MJ(n,"x","depthwiseConv2d"),y=MJ(r,"filter","depthwiseConv2d"),b=v,x=!1;3===v.rank&&(x=!0,b=R1(v,[1,v.shape[0],v.shape[1],v.shape[2]])),g$(4===b.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank ".concat(b.rank,".")})),g$(4===y.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank ".concat(y.rank,".")})),g$(b.shape[3]===y.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels (".concat(b.shape[3],") must match the inChannels dimension in filter ").concat(y.shape[2],".")})),null==c&&(c=[1,1]),g$(A1(a,c),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(a," and dilations '").concat(c,"'")})),null!=l&&g$(w$(o),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ".concat(l," but got pad ").concat(o,".")}));var k,w,I=k1(b.shape,y.shape,a,c,o,l,!0);null!=d&&(t=Ky(bJ(k=MJ(d,"bias","fused conv2d"),v),1),k=t[0],o2(I.outShape,k.shape)),null!=h&&(w=MJ(h,"prelu weights","fused depthwiseConv2d"));var C=function(e,t){g$(N1(c),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '".concat(c,"'")}));var n=Ky(t,4),r=n[0],i=n[1],s=n[2],u=n[3],d=p4(e,s,f),p=y4(i.shape,d,r,a,o,c,l),h=v4(i,d,r.shape,a,o,c,l);return null!=u?[p,h,f4(k,d)]:[p,h]},S={x:b,filter:y,bias:k,preluActivationWeights:w},E={strides:a,pad:o,dataFormat:s,dilations:c,dimRoundingMode:l,activation:f,leakyreluAlpha:m};return null==d?R2((function(e,t,n){var r=EJ.runKernel("FusedDepthwiseConv2D",S,E);return n([t,e,r]),x&&(r=R1(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:C}}))(b,y):R2((function(e,t,n,r){var a=EJ.runKernel("FusedDepthwiseConv2D",S,E);return r([t,e,a,n]),x&&(a=R1(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:C}}))(b,y,k)}}),x4=BJ({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,o=e.transposeB,i=void 0!==o&&o,s=e.bias,u=e.activation,c=void 0===u?"linear":u,l=e.preluActivationWeights,d=e.leakyreluAlpha;if(!1===m4(EJ.state.gradientDepth,c)){var p=S0(t,n,a,i);return null!=s&&(p=t1(p,s)),h4(p,c,l,d)}var f=MJ(t,"a","fused matMul"),h=MJ(n,"b","fused matMul"),m=Ky(bJ(f,h),2);f=m[0],h=m[1];var g=a?f.shape[f.rank-2]:f.shape[f.rank-1],v=i?h.shape[h.rank-1]:h.shape[h.rank-2],y=a?f.shape[f.rank-1]:f.shape[f.rank-2],b=i?h.shape[h.rank-2]:h.shape[h.rank-1],x=f.shape.slice(0,-2),k=h.shape.slice(0,-2),w=x$(x),I=x$(k);g$(f.rank>=2&&h.rank>=2&&f.rank===h.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks ".concat(f.rank," and ").concat(h.rank,".")})),g$(k$(x,k),(function(){return"Error in fused matMul: outer dimensions (".concat(x,") and (").concat(k,") of Tensors with shapes ").concat(f.shape," and ").concat(h.shape," must match.")})),g$(g===v,(function(){return"Error in fused matMul: inner shapes (".concat(g,") and (").concat(v,") of Tensors with shapes ").concat(f.shape," and ").concat(h.shape," and transposeA=").concat(a," and transposeB=").concat(i," must match.")}));var C,S,E=f.shape.slice(0,-2).concat([y,b]),T=R1(f,a?[w,g,y]:[w,y,g]),N=R1(h,i?[I,b,v]:[I,v,b]);null!=s&&(C=Ky(bJ(C=MJ(s,"bias","fused matMul"),f),1)[0],o2(E,C.shape)),null!=l&&(S=MJ(l,"prelu weights","fused matMul"));var A=function(e,t){var n,r,o=Ky(t,4),u=o[0],l=o[1],d=o[2],p=o[3],f=p4(R1(e,d.shape),d,c);return a||i?!a&&i?(n=S0(f,l,!1,!1),r=S0(f,u,!0,!1)):a&&!i?(n=S0(l,f,!1,!0),r=S0(u,f,!1,!1)):(n=S0(l,f,!0,!0),r=S0(f,u,!0,!0)):(n=S0(f,l,!1,!0),r=S0(u,f,!0,!1)),null!=s?[n,r,f4(p,f)]:[n,r]},_={a:T,b:N,bias:C,preluActivationWeights:S},R={transposeA:a,transposeB:i,activation:c,leakyreluAlpha:d};return null==s?R2((function(e,t,n){var r=EJ.runKernel("_FusedMatMul",_,R);return n([e,t,r]),{value:R1(r,E),gradFunc:A}}))(T,N):R2((function(e,t,n,r){var a=EJ.runKernel("_FusedMatMul",_,R);return r([e,t,a,n]),{value:R1(a,E),gradFunc:A}}))(T,N,C)}}),k4=BJ({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=MJ(e,"image","cropAndResize"),s=MJ(t,"boxes","cropAndResize","float32"),u=MJ(n,"boxInd","cropAndResize","int32"),c=s.shape[0];g$(4===i.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank ".concat(i.rank,".")})),g$(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] but had shape ").concat(s.shape,".")})),g$(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] but had shape ").concat(s.shape,".")})),g$(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length ".concat(r.length,".")})),g$(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),g$("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:i,boxes:s,boxInd:u},d={method:a,extrapolationValue:o,cropSize:r};return EJ.runKernel("CropAndResize",l,d)}}),w4=BJ({flipLeftRight_:function(e){var t=MJ(e,"image","flipLeftRight","float32");g$(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,but got rank ".concat(t.rank,".")}));var n={image:t};return EJ.runKernel("FlipLeftRight",n,{})}}),I4=BJ({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=MJ(e,"image","rotateWithOffset","float32");g$(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,but got rank ".concat(a.rank,".")}));var o={image:a},i={radians:t,fillValue:n,center:r};return EJ.runKernel("RotateWithOffset",o,i)}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function C4(e,t,n,r,a,o){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);var i=e.shape[0];return n=Math.min(n,i),g$(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),g$(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),g$(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),g$(1===t.rank,(function(){return"scores must be a 1D tensor"})),g$(t.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected ".concat(i,", but was ").concat(t.shape[0])})),g$(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(o,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var S4=BJ({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=MJ(e,"boxes","nonMaxSuppression"),i=MJ(t,"scores","nonMaxSuppression"),s=C4(o,i,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return EJ.runKernel("NonMaxSuppressionV3",{boxes:o,scores:i},u)}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function E4(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,o=0,i=!1;r<a;){var s=n(t,e[o=r+(a-r>>>1)]);s>0?r=o+1:(a=o,i=!s)}return i?r:-r-1}
/**
	     * @license
	     * Copyright 2020 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(e,t,n||T4)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function T4(e,t){return e>t?1:e<t?-1:0}function N4(e,t,n,r,a){return R4(e,t,n,r,a,0)}function A4(e,t,n,r,a,o){return R4(e,t,n,r,a,0,!1,o,!0)}function _4(e,t,n,r,a,o){return R4(e,t,n,r,a,o,!0)}function R4(e,t,n,r,a,o){for(var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(M4);for(var d=o>0?-.5/o:0,p=[],f=[];p.length<n&&c.length>0;){var h=c.pop(),m=h.score,g=h.boxIndex,v=h.suppressBeginIndex;if(m<a)break;for(var y=!1,b=p.length-1;b>=v;--b){var x=O4(e,g,p[b]);if(x>=r){y=!0;break}if(h.score=h.score*F4(r,d,x),h.score<=a)break}h.suppressBeginIndex=p.length,y||(h.score===m?(p.push(g),f.push(h.score)):h.score>a&&E4(c,h,M4))}var k=p.length,w=n-k;s&&w>0&&(p.push.apply(p,Xy(new Array(w).fill(0))),f.push.apply(f,Xy(new Array(w).fill(0))));var I={selectedIndices:p};return i&&(I.selectedScores=f),u&&(I.validOutputs=k),I}function O4(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),f=(s-o)*(u-i),h=(d-c)*(p-l);if(f<=0||h<=0)return 0;var m=Math.max(o,c),g=Math.max(i,l),v=Math.min(s,d),y=Math.min(u,p),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(f+h-b)}function F4(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function M4(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var D4=function(){var e=Ay(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,u,c,l,d,p,f,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:.5,o=h.length>4&&void 0!==h[4]?h[4]:Number.NEGATIVE_INFINITY,i=MJ(t,"boxes","nonMaxSuppressionAsync"),s=MJ(n,"scores","nonMaxSuppressionAsync"),u=C4(i,s,r,a,o),r=u.maxOutputSize,a=u.iouThreshold,o=u.scoreThreshold,e.next=6,Promise.all([i.data(),s.data()]);case 6:return c=e.sent,l=c[0],d=c[1],p=N4(l,d,r,a,o),f=p.selectedIndices,e.abrupt("return",(i!==t&&i.dispose(),s!==n&&s.dispose(),e4(f,"int32")));case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),B4=BJ({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=MJ(e,"boxes","nonMaxSuppression"),s=MJ(t,"scores","nonMaxSuppression"),u=C4(i,s,n,r,a,o),c={boxes:i,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},d=EJ.runKernel("NonMaxSuppressionV5",c,l);return{selectedIndices:d[0],selectedScores:d[1]}}}),P4=function(){var e=Ay(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,u,c,l,d,p,f,h,m,g=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>3&&void 0!==g[3]?g[3]:.5,o=g.length>4&&void 0!==g[4]?g[4]:Number.NEGATIVE_INFINITY,i=g.length>5&&void 0!==g[5]?g[5]:0,s=MJ(t,"boxes","nonMaxSuppressionAsync"),u=MJ(n,"scores","nonMaxSuppressionAsync"),c=C4(s,u,r,a,o,i),r=c.maxOutputSize,a=c.iouThreshold,o=c.scoreThreshold,i=c.softNmsSigma,e.next=7,Promise.all([s.data(),u.data()]);case 7:return l=e.sent,d=l[0],p=l[1],f=_4(d,p,r,a,o,i),h=f.selectedIndices,m=f.selectedScores,e.abrupt("return",(s!==t&&s.dispose(),u!==n&&u.dispose(),{selectedIndices:e4(h,"int32"),selectedScores:e4(m)}));case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),L4=BJ({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=MJ(e,"boxes","nonMaxSuppression"),s=MJ(t,"scores","nonMaxSuppression"),u=C4(i,s,n,r,a,null),c={boxes:i,scores:s},l={maxOutputSize:u.maxOutputSize,iouThreshold:u.iouThreshold,scoreThreshold:u.scoreThreshold,padToMaxOutputSize:o},d=EJ.runKernel("NonMaxSuppressionV4",c,l);return{selectedIndices:d[0],validOutputs:d[1]}}}),U4=function(){var e=Ay(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,o=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,i=x.length>5&&void 0!==x[5]&&x[5],s=MJ(t,"boxes","nonMaxSuppressionAsync"),u=MJ(n,"scores","nonMaxSuppressionAsync"),c=C4(s,u,r,a,o,null),l=c.maxOutputSize,d=c.iouThreshold,p=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return f=e.sent,h=Ky(f,2),m=h[0],g=h[1],v=A4(m,g,l,d,p,i),y=v.selectedIndices,b=v.validOutputs,e.abrupt("return",(s!==t&&s.dispose(),u!==n&&u.dispose(),{selectedIndices:e4(y,"int32"),validOutputs:D3(b,"int32")}));case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),V4=BJ({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=MJ(e,"images","resizeBilinear");g$(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank ".concat(a.rank,".")})),g$(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape ".concat(t,".")})),g$(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var o=a,i=!1;3===a.rank&&(i=!0,o=R1(a,[1,a.shape[0],a.shape[1],a.shape[2]]));var s={images:o},u={alignCorners:n,halfPixelCenters:r,size:t},c=EJ.runKernel("ResizeBilinear",s,u);return i?R1(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),W4=BJ({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=MJ(e,"images","resizeNearestNeighbor");g$(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ".concat(a.rank,".")})),g$(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape ".concat(t,".")})),g$("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),g$(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var o=a,i=!1;3===a.rank&&(i=!0,o=R1(a,[1,a.shape[0],a.shape[1],a.shape[2]]));var s={images:o},u={alignCorners:n,halfPixelCenters:r,size:t},c=EJ.runKernel("ResizeNearestNeighbor",s,u);return i?R1(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),z4=BJ({threshold_:function(e){var t,n,r,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=MJ(e,"image","threshold"),c=u.shape[0]*u.shape[1],l=a1(e4([s]),255);if(g$(3===u.rank,(function(){return"Error in threshold: image must be rank 3,but got rank ".concat(u.rank,".")})),g$(3===u.shape[2]||1===u.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1but got ".concat(u.shape[2],".")})),g$("int32"===u.dtype||"float32"===u.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,but got dtype ".concat(u.dtype,".")})),g$("otsu"===o||"binary"===o,(function(){return"Method must be binary or otsu, but was ".concat(o)})),3===u.shape[2]){var d=G3(u,[1,1,1],-1),p=Ky(d,3);t=p[0],n=p[1],r=p[2];var f=a1(t,.2989),h=a1(n,.587),m=a1(r,.114);a=t1(t1(f,h),m)}else a=e;"otsu"===o&&(l=function(e,t){for(var n,r,a,o,i,s,u=e4([-1]),c=e4([0]),l=e4([0]),d=0;d<e.size-1;d++){n=B1(e,0,d+1),r=B1(e,d+1),i=r1(B2(n),t),s=r1(B2(r),t);var p=B2(a1(n,T3(0,n.size)));a=r1(p,B2(n));var f=v2(r.shape,n.size),h=t1(T3(0,r.size),f),m=a1(r,h);o=r1(B2(m),B2(r));var g=D2(a,o),v=D2(a,o),y=a1(i,s);l=a1(a1(y,g),v);var b=x2(l,c);c=s2(b,l,c),u=s2(b,e4([d]),u)}return u}(V1(g0(F3(a),"int32"),UJ([]),256),c));var g=i?E2(a,l):x2(a,l);return g0(a1(g,255),"int32")}}),j4=BJ({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,i=MJ(e,"image","transform","float32"),s=MJ(t,"transforms","transform","float32");g$(4===i.rank,(function(){return"Error in transform: image must be rank 4,but got rank ".concat(i.rank,".")})),g$(2===s.rank&&(s.shape[0]===i.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),g$(null==o||2===o.length,(function(){return"Error in transform: outputShape must be [height, width] or null, but got ".concat(o,".")}));var u={image:i,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:o};return EJ.runKernel("Transform",u,c)}}),H4=BJ({sparseFillEmptyRows_:function(e,t,n,r){var a=MJ(e,"indices","sparseFillEmptyRows"),o=MJ(t,"values","sparseFillEmptyRows"),i=MJ(n,"denseShape","sparseFillEmptyRows"),s=MJ(r,"defaultValue","sparseFillEmptyRows",o.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==o.rank)throw new Error("Values should be Tensor1D but received shape ".concat(o.shape));if(1!==i.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(i.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:o,denseShape:i,defaultValue:s},c=EJ.runKernel("SparseFillEmptyRows",u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}}),G4=BJ({sparseReshape_:function(e,t,n){var r=MJ(e,"inputIndices","sparseReshape"),a=MJ(t,"inputShape","sparseReshape"),o=MJ(n,"newShape","sparseReshape");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==o.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(o.shape));var i={inputIndices:r,inputShape:a,newShape:o},s=EJ.runKernel("SparseReshape",i);return{outputIndices:s[0],outputShape:s[1]}}}),q4=BJ({sparseSegmentMean_:function(e,t,n){var r=MJ(e,"data","sparseSegmentMean"),a=MJ(t,"indices","sparseSegmentMean"),o=MJ(n,"segmentIds","sparseSegmentMean");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(o.shape));var i={data:r,indices:a,segmentIds:o};return EJ.runKernel("SparseSegmentMean",i)}}),K4=BJ({sparseSegmentSum_:function(e,t,n){var r=MJ(e,"data","sparseSegmentSum"),a=MJ(t,"indices","sparseSegmentSum"),o=MJ(n,"segmentIds","sparseSegmentSum");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(o.shape));var i={data:r,indices:a,segmentIds:o};return EJ.runKernel("SparseSegmentSum",i)}}),X4=BJ({stringNGrams_:function(e,t,n,r,a,o,i,s){var u=MJ(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=MJ(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:o,padWidth:i,preserveShortSequences:s},d={data:u,dataSplits:c},p=EJ.runKernel("StringNGrams",d,l);return{nGrams:p[0],nGramsSplits:p[1]}}}),Q4=BJ({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=MJ(e,"input","stringSplit","string"),a=MJ(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var o={skipEmpty:n},i={input:r,delimiter:a},s=EJ.runKernel("StringSplit",i,o);return{indices:s[0],values:s[1],shape:s[2]}}}),Y4=BJ({stringToHashBucketFast_:function(e,t){var n=MJ(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return EJ.runKernel("StringToHashBucketFast",a,r)}}),$4={flipLeftRight:w4,resizeNearestNeighbor:W4,resizeBilinear:V4,rotateWithOffset:I4,cropAndResize:k4,nonMaxSuppression:S4,nonMaxSuppressionAsync:D4,nonMaxSuppressionWithScore:B4,nonMaxSuppressionWithScoreAsync:P4,nonMaxSuppressionPadded:L4,nonMaxSuppressionPaddedAsync:U4,threshold:z4,transform:j4},Z4={sparseFillEmptyRows:H4,sparseReshape:G4,sparseSegmentMean:q4,sparseSegmentSum:K4},J4={stringNGrams:X4,stringSplit:Q4,stringToHashBucketFast:Y4};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function e6(e,t){var n=e[0].length;e.forEach((function(e,t){g$(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same as the rank of the rest (").concat(n,")")}))})),g$(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var o=0;o<n;o++)g$(o===t||e[o]===r[o],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") does not match the shape of the rest (").concat(r,") along the non-concatenated axis ").concat(a,".")}))}))}function t6(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function n6(e){return e<=30?e:P$(e,Math.floor(Math.sqrt(e)))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function r6(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function a6(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var o=t.length,i=0;i<o;++i)a=a.concat([e[i+1]/t[i],t[i]]);a=a.concat(e.slice(o+1))}return a}function o6(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var o=[],i=[],s=1;s<e;++s)s>=2*t+1||s%2==1?i.push(s):o.push(s);r.push.apply(r,o),r.push(0),r.push.apply(r,i)}return r}function i6(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function s6(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function u6(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function c6(){var e;Y$().getBool("IS_TEST")||(e=console).warn.apply(e,arguments)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function l6(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function d6(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function p6(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function f6(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function h6(e,t){return{real:e[2*t],imag:e[2*t+1]}}function m6(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function g6(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}function v6(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var y6=/->/g;function b6(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(y6,"").length)/"->".length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("->").');var r=Ky(e.split("->"),2),a=r[0],o=r[1];g$(-1===a.indexOf("..."),(function(){return'The ellipsis notation ("...") is not supported yet.'}));var i=a.split(","),s=i.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var u=[],c=function(e){var t=o[e];if(!i.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," not present in the input subscripts."));-1===u.indexOf(t)&&u.push(t)},l=0;l<o.length;++l)c(l);for(var d=0;d<a.length;++d){var p=a[d];-1===u.indexOf(p)&&","!==p&&u.push(p)}for(var f=new Array(i.length),h=0;h<s;++h){if(new Set(i[h].split("")).size!==i[h].length)throw new Error("Found duplicate axes in input component ".concat(i[h],". Support for duplicate axes in input is not implemented yet."));f[h]=[];for(var m=0;m<i[h].length;++m)f[h].push(u.indexOf(i[h][m]))}for(var g=u.length,v=[],y=o.length;y<g;++y)v.push(y);return{allDims:u,summedDims:v,idDims:f}}function x6(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],o=0;o<e;++o)-1===n[o]&&a.push(o);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function k6(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,o=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:g$(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," of input shaped ").concat(JSON.stringify(a),", but got dimension ").concat(a[n])}))},i=0;i<t[e].length;++i)o(i)},o=0;o<n.length;++o)a(o)}function w6(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var o=0;o<n;++o)a.push([]);for(var i=[],s=0;s<r.length;++s){var u,c=rb(C6(t,r[s]));try{for(c.s();!(u=c.n()).done;){var l=u.value;-1===i.indexOf(l)&&(a[s].push(l),i.push(l))}}catch(e){c.e(e)}finally{c.f()}}return{path:r,steps:a}}function I6(e){return e.every((function(e,t){return e===t}))}function C6(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function S6(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"==typeof t)g$(e.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{g$(t.reduce((function(e,t){return-1===t&&(e+=1),e}),0)<=1,(function(){return"There should be only one negative value in split array."}));var a=t.indexOf(-1);if(-1!==a){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[a]=e.shape[n]-o}g$(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function E6(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=P$(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=P$(e,n+1);return n}function T6(e,t,n){for(var r=[],a=e.length,o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}function N6(e,t,n,r){var a=t.shape.length,o=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>o)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(o,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var i=0;i<r;++i)if(e.shape[i]!==t.shape[i])throw new Error("x.shape[".concat(i,"]: ").concat(e.shape[i]," should be equal to indices.shape[").concat(i,"]: ").concat(t.shape[i],"."));for(var s=e.shape[n],u=[],c=1,l=1,d=1,p=0;p<r;++p)u.push(e.shape[p]),c*=e.shape[p];for(var f=r;f<n;f++)u.push(e.shape[f]),l*=e.shape[f];for(var h=r;h<a;h++)u.push(t.shape[h]);for(var m=n+1;m<o;m++)u.push(e.shape[m]),d*=e.shape[m];return{batchSize:c,sliceSize:d,outerSize:l,dimSize:s,outputShape:u}}var A6=Object.freeze({__proto__:null,segOpComputeOptimalWindowSize:E6,computeOutShape:T6,collectGatherOpShapeInfo:N6});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function _6(e){try{return e.map((function(e){return $Z(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(e))}}function R6(e){return e.map((function(e){return YZ(e)}))}var O6,F6,M6=Object.freeze({__proto__:null,slice_util:Q0,segment_util:A6,fromUint8ToStringArray:_6,fromStringArrayToUint8:R6,upcastType:vJ,axesAreInnerMostDims:L2,combineLocations:U2,computeOutAndReduceShapes:V2,expandShapeToKeepDim:W2,assertAxesAreInnerMostDims:z2,getAxesPermutation:j2,getUndoAxesPermutation:H2,getInnerMostAxes:G2,getBroadcastDims:r2,getReductionAxes:a2,assertAndGetBroadcastShape:o2,assertParamsConsistent:e6,computeOutShape:t6,computeDilation2DInfo:y1,computePool2DInfo:b1,computePool3DInfo:x1,computeConv2DInfo:k1,computeConv3DInfo:w1,computeDefaultPad:I1,tupleValuesAreOne:N1,eitherStridesOrDilationsAreOne:A1,convertConv2DDataFormat:_1,getFusedDyActivation:p4,getFusedBiasGradient:f4,applyActivation:h4,shouldFuse:m4,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:n6,getImageCenter:r6,getReshaped:a6,getPermuted:o6,getReshapedPermuted:i6,getSliceBeginCoords:s6,getSliceSize:u6,prepareAndValidate:A0,validateUpdateShape:_0,validateInput:R0,calculateShapes:O0,SELU_SCALEALPHA:1.7580993408473768,SELU_SCALE:1.0507009873554805,ERF_P:.3275911,ERF_A1:.254829592,ERF_A2:-.284496736,ERF_A3:1.421413741,ERF_A4:-1.453152027,ERF_A5:1.061405429,warn:c6,log:function(){var e;Y$().getBool("IS_TEST")||(e=console).log.apply(e,arguments)},mergeRealAndImagArrays:l6,splitRealAndImagArrays:d6,complexWithEvenIndex:p6,complexWithOddIndex:f6,getComplexWithIndex:h6,assignToTypedArray:m6,exponents:g6,exponent:v6,decodeEinsumEquation:b6,getEinsumPermutation:x6,checkEinsumDimSizes:k6,getEinsumComputePath:w6,isIdentityPermutation:I6,prepareSplitSize:S6});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 * =============================================================================
	 */!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(O6||(O6={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(F6||(F6={}));
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var D6={};function B6(e){return D6[e]}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function P6(e,t,n,r,a){var o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){var i=o.inputIndexStart,s=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?i+1:o.inputIndexEnd;if("tensor"===o.type)return L6(t.inputNames[o.inputIndexStart],n,r,a);if("tensors"===o.type)return t.inputNames.slice(i,s).map((function(e){return L6(e,n,r,a)}));var u=L6(t.inputNames.slice(i)[0],n,r,a),c=u.dataSync();return"number"===o.type?c[0]:V$(u.shape,c)}var l=t.attrParams[e];return l&&l.value}function L6(e,t,n,r){var a=Ky(W6(e),2),o=a[0],i=a[1];if(null!=r){var s=r.getHashTableHandleByName(o);if(null!=s)return s}var u=n.currentContextIds.find((function(e){return!!t[V6(o,e)]}));return void 0!==u?t[V6(o,u)][i]:void 0}function U6(e,t){var n=Ky(W6(e),3),r=n[0],a=n[1],o=n[2];return[V6(r,t&&t.currentContextId),a,o]}function V6(e,t){return t?"".concat(e,"-").concat(t):e}function W6(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function z6(e,t,n){var r=P6("pad",e,t,n);if("explicit"===r){r=P6("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],o=0;o<4;o++)a[o][0]=r[2*o],a[o][1]=r[2*o+1];return a}return r}function j6(e){return e.kept?e:v0(e)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var H6=Object.freeze({__proto__:null,json:[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),G6=Object.freeze({__proto__:null,json:[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),q6=Object.freeze({__proto__:null,json:[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}]}),K6=Object.freeze({__proto__:null,json:[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]}),X6=Object.freeze({__proto__:null,json:[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]}),Q6=Object.freeze({__proto__:null,json:[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),Y6=Object.freeze({__proto__:null,json:[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]}),$6=Object.freeze({__proto__:null,json:[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]}),Z6=Object.freeze({__proto__:null,json:[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}]}),J6=Object.freeze({__proto__:null,json:[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]}),e5=Object.freeze({__proto__:null,json:[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),t5=Object.freeze({__proto__:null,json:[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}]}),n5=Object.freeze({__proto__:null,json:[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]}),r5=Object.freeze({__proto__:null,json:[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]}),a5=Object.freeze({__proto__:null,json:[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]}),o5=Object.freeze({__proto__:null,json:[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}]}),i5=Object.freeze({__proto__:null,json:[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]}),s5=Object.freeze({__proto__:null,json:[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}]}),u5=Object.freeze({__proto__:null,json:[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}]}),c5=function(){function e(){var t;_y(this,e);var n=(t=[]).concat.apply(t,Xy([H6,G6,q6,K6,X6,Q6,Y6,$6,Z6,J6,e5,t5,n5,r5,a5,o5,i5,s5,u5].map((function(e){return e.json}))));this.opMappers=n.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return Oy(e,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),Oy(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],o=[],i=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?o.push(e[n.name]):null!=n.input&&0!==n.input.length||i.push(e[n.name]),e}),{}),u=[],c=[],l={},d={};null!=n&&(l=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));var p=Object.keys(s);p.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=Ky(U6(e),3),a=r[0],o=r[2],i=s[a];if(null!=i.outputs){var u=i.outputs.indexOf(o);if(-1!==u){var c="".concat(a,":").concat(u);t.inputNames[n]=c}}t.inputs.push(i),i.children.push(t)}))})),0===Object.keys(d).length?p.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(d).forEach((function(e){var t=Ky(U6(e),1)[0],n=s[t];null!=n&&(n.signatureKey=d[e],c.push(n))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=Ky(U6(e),1)[0],n=s[t];n&&(n.signatureKey=l[e],u.push(n))})):u=a;var f={};null!=e.library&&null!=e.library.function&&(f=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var h={nodes:s,inputs:u,outputs:c,weights:o,placeholders:a,signature:n,functions:f};return i.length>0&&(h.initNodes=i),h}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=B6(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r,a=n.type;switch(n.type){case"string":void 0===(r=d5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=d5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(r=k5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=k5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(r=f5(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(r=f5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(r=x5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=x5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(r=p5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=p5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(r=I5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=I5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(r=b5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=b5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(r=w5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=w5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(r=g5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=g5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(r=v5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=v5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(r=m5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=m5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:r,type:a},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var o=[],i=[];e.signature.inputArg.forEach((function(e){var t=Ky(U6(e.name),1)[0],n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:h5(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,o.push(n),a[t]=n})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=Ky(U6(e),3),o=r[0],i=r[2],s=a[o];if(null!=s.outputs){var u=s.outputs.indexOf(i);if(-1!==u){var c="".concat(o,":").concat(u);t.inputNames[n]=c}}t.inputs.push(s),s.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=Ky(U6(s[e.name]),2),n=t[0],r=t[1],o=a[n];null!=o&&(o.defaultOutput=r,i.push(o))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:o,outputs:i,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}]),e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function l5(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=Y$().global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function d5(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?l5(a.s,r):n}function p5(e,t,n){var r=e[t];return r?r.b:n}function f5(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function h5(e){switch("string"==typeof e&&(e=O6[e]),e){case O6.DT_FLOAT:return"float32";case O6.DT_INT32:case O6.DT_INT64:case O6.DT_INT8:case O6.DT_UINT8:return"int32";case O6.DT_BOOL:return"bool";case O6.DT_DOUBLE:return"float32";case O6.DT_STRING:return"string";default:return null}}function m5(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function g5(e,t,n){var r=e[t];return r&&r.type?h5(r.type):n}function v5(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return h5(e)})):n}function y5(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"==typeof e.size?e.size:parseInt(e.size,10)})):[]}function b5(e,t,n){var r=e[t];return r&&r.shape?y5(r.shape):n}function x5(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"==typeof e?e:parseInt(e,10)})):n}function k5(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return l5(e,r)})):n}function w5(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return y5(e)})):n}function I5(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var C5=function(){function e(t,n,r){var a=this;_y(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return Oy(e,[{key:"getInput",value:function(e){return L6(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return L6(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return f5(this.node.rawAttrs,e,t);if(null!=n.s)return d5(this.node.rawAttrs,e,t);if(null!=n.b)return p5(this.node.rawAttrs,e,t);if(null!=n.shape)return b5(this.node.rawAttrs,e,t);if(null!=n.type)return g5(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return x5(this.node.rawAttrs,e,t);if(null!=n.list.s)return k5(this.node.rawAttrs,e,t);if(null!=n.list.shape)return w5(this.node.rawAttrs,e,t);if(null!=n.list.b)return I5(this.node.rawAttrs,e,t);if(null!=n.list.type)return v5(this.node.rawAttrs,e,t)}return t}}]),e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function S5(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!=typeof e&&"number"!=typeof t){g$(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],o=t[r];g$(a<0||o<0||a===o,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function E5(e){return"number"!=typeof e&&!e.some((function(e){return e<0}))}function T5(e,t,n){var r=N5(e,n),a=!E5(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=N5(e.shape,r)})),!E5(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function N5(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],o=t[r];if(a>=0&&o>=0&&a!==o)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:o}return n}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var A5=function(){function e(t,n,r,a,o,i,s){_y(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=o,this.dynamicSize=i,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=D3(0),Z0(this.idTensor)}return Oy(e,[{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?)."));return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),S5(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,Z0(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,because the index size: ").concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return UJ([],[0].concat(this.elementShape));var r=this.readMany(e);return S5(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Y3(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return UJ([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return S5(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),M1(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,Xy(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,o4(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), and the TensorArray is not marked as dynamically resizeable"));var o=0===r?0:t.size/r,i=[];$0((function(){t=R1(t,[1,r,o]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],o];i[s]=R1(B1(t,u,c),n.elementShape)}return i}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,i)}},{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}}]),e}(),_5=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;_y(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));S5(n,e.shape,"TensorList shape mismatch: "),Z0(e)})),this.idTensor=D3(0),this.maxNumElements=a,Z0(this.idTensor)}return Oy(e,[{key:"copy",value:function(){return new e(Xy(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));S5(e,this.elementShape,"TensorList shape mismatch: ");var a=T5(this.elementShape,this.tensors,e);return $0((function(){var e=n.tensors.map((function(e){return R1(e,a)}));return Y3(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=T5(this.elementShape,this.tensors,e),r=this.tensors.pop();return S5(r.shape,e,"TensorList shape mismatch: "),R1(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(S5(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Z0(e),this.tensors.push(e)}},{key:"resize",value:function(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));this.tensors.length=e}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));S5(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=T5(this.elementShape,this.tensors,t);return R1(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));S5(this.elementShape,t.shape,"TensorList shape mismatch: "),Z0(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));S5(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=T5(this.elementShape,this.tensors,n);return 0===e.length?UJ([],[0].concat(a)):$0((function(){var t=e.map((function(e){return R1(r.tensors[e],a)}));return Y3(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));S5(this.elementShape,t,"TensorList shape mismatch: ");var r=T5(this.elementShape,this.tensors,t);return 0===this.size()?UJ([],[0].concat(r)):$0((function(){var e=n.tensors.map((function(e){return R1(e,r)}));return M1(e,0)}))}},{key:"id",get:function(){return this.idTensor.id}}]),e}(),R5=function(){var e=Ay(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,w,I,C,S,E,T,N,A,_,R,O,F,M,D,B,P,L,U,V,W,z,j,H,G,q,K,X,Q,Y,$,Z,J,ee,te,ne,re,ae,oe,ie,se,ue,ce,le,de,pe,fe,he,me,ge,ve,ye,be,xe,ke,we,Ie,Ce,Se,Ee,Te,Ne;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?12:"LoopCond"===e.t0?16:"Switch"===e.t0?17:"Merge"===e.t0?28:"Enter"===e.t0?32:"Exit"===e.t0?34:"NextIteration"===e.t0?36:"TensorArrayV3"===e.t0?38:"TensorArrayWriteV3"===e.t0?40:"TensorArrayReadV3"===e.t0?42:"TensorArrayGatherV3"===e.t0?44:"TensorArrayScatterV3"===e.t0?46:"TensorArrayConcatV3"===e.t0?48:"TensorArraySplitV3"===e.t0?50:"TensorArraySizeV3"===e.t0?52:"TensorArrayCloseV3"===e.t0?54:"TensorListSetItem"===e.t0?56:"TensorListGetItem"===e.t0?58:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?60:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?62:"TensorListGather"===e.t0?66:"TensorListStack"===e.t0?68:"TensorListFromTensor"===e.t0?70:"TensorListConcat"===e.t0?72:"TensorListPushBack"===e.t0?74:"TensorListPopBack"===e.t0?76:"TensorListSplit"===e.t0?78:80;break;case 3:return a=P6("thenBranch",t,n,r),o=P6("elseBranch",t,n,r),i=P6("cond",t,n,r),s=P6("args",t,n,r),e.next=6,i.data();case 6:if(!e.sent[0]){e.next=10;break}e.t1=r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap),e.next=11;break;case 10:e.t1=r.functionMap[o].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap);case 11:return e.abrupt("return",e.t1);case 12:return e.delegateYield(regeneratorRuntime.mark((function e(){var a,o,i,s,u,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=P6("body",t,n,r),o=P6("cond",t,n,r),i=P6("args",t,n,r),e.next=5,r.functionMap[o].executeFunctionAsync(i,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=i.map((function(e){return e.id})),e.next=9,s[0].data();case 9:c=e.sent,s.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||e.dispose()})),l=i,d=regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[o].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return i=e.sent,e.next=11,i[0].data();case 11:c=e.sent,i.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(d(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t2",13);case 13:if("object"!==Ty(u=e.t2)){e.next=16;break}return e.abrupt("return",u.v);case 16:return e.abrupt("return",[j6(P6("pred",t,n,r))]);case 17:return c=P6("pred",t,n,r),(l=P6("data",t,n,r)).kept||(l=j6(l)),e.next=22,c.data();case 22:if(!e.sent[0]){e.next=26;break}e.t3=[void 0,l],e.next=27;break;case 26:e.t3=[l,void 0];case 27:return e.abrupt("return",e.t3);case 28:if(!(d=t.inputNames.find((function(e){return void 0!==L6(e,n,r)})))){e.next=31;break}return e.abrupt("return",[j6(L6(d,n,r))]);case 31:return e.abrupt("return");case 32:return p=P6("frameName",t,n,r),f=P6("tensor",t,n,r),e.abrupt("return",(r.enterFrame(p),[j6(f)]));case 34:return h=P6("tensor",t,n,r),e.abrupt("return",(r.exitFrame(),[j6(h)]));case 36:return m=P6("tensor",t,n,r),e.abrupt("return",(r.nextIteration(),[j6(m)]));case 38:return g=P6("size",t,n,r),v=P6("dtype",t,n,r),y=P6("elementShape",t,n,r),b=P6("dynamicSize",t,n,r),x=P6("clearAfterRead",t,n,r),k=P6("identicalElementShapes",t,n,r),w=P6("name",t,n,r),I=new A5(w,v,g,y,k,b,x),e.abrupt("return",(r.addTensorArray(I),[I.idTensor,D3(1)]));case 40:return C=P6("tensorArrayId",t,n,r),S=P6("index",t,n,r),E=P6("tensor",t,n,r),T=r.getTensorArray(C.id),e.abrupt("return",(T.write(S,E),[T.idTensor]));case 42:return N=P6("tensorArrayId",t,n,r),A=P6("index",t,n,r),e.abrupt("return",[r.getTensorArray(N.id).read(A)]);case 44:return _=P6("tensorArrayId",t,n,r),R=P6("indices",t,n,r),O=P6("dtype",t,n,r),e.abrupt("return",[r.getTensorArray(_.id).gather(R,O)]);case 46:return F=P6("tensorArrayId",t,n,r),M=P6("indices",t,n,r),D=P6("tensor",t,n,r),B=r.getTensorArray(F.id),e.abrupt("return",(B.scatter(M,D),[B.idTensor]));case 48:return P=P6("tensorArrayId",t,n,r),L=r.getTensorArray(P.id),U=P6("dtype",t,n,r),e.abrupt("return",[L.concat(U)]);case 50:return V=P6("tensorArrayId",t,n,r),W=P6("tensor",t,n,r),z=P6("lengths",t,n,r),j=r.getTensorArray(V.id),e.abrupt("return",(j.split(z,W),[j.idTensor]));case 52:return H=P6("tensorArrayId",t,n,r),e.abrupt("return",[D3(r.getTensorArray(H.id).size(),"int32")]);case 54:return G=P6("tensorArrayId",t,n,r),q=r.getTensorArray(G.id),e.abrupt("return",(q.clearAndClose(),[q.idTensor]));case 56:return K=P6("tensorListId",t,n,r),X=P6("index",t,n,r),Q=P6("tensor",t,n,r),Y=r.getTensorList(K.id),e.abrupt("return",(Y.setItem(X,Q),[Y.idTensor]));case 58:return $=P6("tensorListId",t,n,r),Z=P6("index",t,n,r),J=P6("elementShape",t,n,r),ee=P6("elementDType",t,n,r),e.abrupt("return",[r.getTensorList($.id).getItem(Z,J,ee)]);case 60:return te=P6("indices",t,n,r),ne=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,Xy(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var o=new _5([],n,e.dtype,r),i=o4(e,0);return t.forEach((function(e,t){o.setItem(e,i[t])})),o}(P6("tensor",t,n,r),te,P6("elementShape",t,n,r),P6("numElements",t,n,r)),e.abrupt("return",(r.addTensorList(ne),[ne.idTensor]));case 62:return re=P6("elementShape",t,n,r),ae=P6("elementDType",t,n,r),oe="TensorListReserve"===t.op?"numElements":"maxNumElements",ie=function(e,t,n){return new _5([],e,t,n)}(re,ae,P6(oe,t,n,r)),e.abrupt("return",(r.addTensorList(ie),[ie.idTensor]));case 66:return se=P6("tensorListId",t,n,r),ue=P6("indices",t,n,r),ce=P6("elementShape",t,n,r),le=P6("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(se.id).gather(ue,le,ce)]);case 68:return de=P6("tensorListId",t,n,r),pe=P6("elementShape",t,n,r),fe=P6("elementDType",t,n,r),he=P6("numElements",t,n,r),e.abrupt("return",[r.getTensorList(de.id).stack(pe,fe,he)]);case 70:return me=function(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));S5(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=o4(e);return new _5(a,t,r)}(P6("tensor",t,n,r),P6("elementShape",t,n,r),P6("elementDType",t,n,r)),e.abrupt("return",(r.addTensorList(me),[me.idTensor]));case 72:return ge=P6("tensorListId",t,n,r),ve=r.getTensorList(ge.id),ye=P6("dtype",t,n,r),be=P6("elementShape",t,n,r),e.abrupt("return",[ve.concat(ye,be)]);case 74:return xe=P6("tensorListId",t,n,r),ke=P6("tensor",t,n,r),we=r.getTensorList(xe.id),e.abrupt("return",(we.pushBack(ke),[we.idTensor]));case 76:return Ie=P6("tensorListId",t,n,r),Ce=P6("elementShape",t,n,r),Se=P6("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(Ie.id).popBack(Ce,Se)]);case 78:return Ee=P6("tensor",t,n,r),Te=P6("elementShape",t,n,r),Ne=function(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var o=N5(e.shape.slice(1),n),i=0===r?0:e.size/r,s=$0((function(){var n=[];e=R1(e,[1,r,i]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],i];n[s]=R1(B1(e,u,c),o)}return e.dispose(),n})),u=new _5([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}(Ee,P6("lengths",t,n,r),Te),e.abrupt("return",(r.addTensorList(Ne),[Ne.idTensor]));case 80:throw TypeError("Node type ".concat(t.op," is not implemented"));case 81:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function O5(e,t,n){var r=Ky(P6("fusedOps",e,t,n),2),a=r[0],o=r[1],i="biasadd"===a,s=!i,u="prelu"===o,c="fusedbatchnorm"===a,l=P6("numArgs",e,t,n);if(i){if(u&&2!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&i&&1!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var d=P6("strides",e,t,n),p=z6(e,t,n),f=P6("dataFormat",e,t,n).toUpperCase(),h=P6("dilations",e,t,n),m=Ky(P6("args",e,t,n),2),g=m[0],v=m[1];return s&&(v=g,g=void 0),{stride:d,pad:p,dataFormat:f,dilations:h,biasArg:g,preluArg:v,activationFunc:o,leakyreluAlpha:P6("leakyreluAlpha",e,t,n)}}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function F5(e,t,n){return{boxes:P6("boxes",e,t,n),scores:P6("scores",e,t,n),maxOutputSize:P6("maxOutputSize",e,t,n),iouThreshold:P6("iouThreshold",e,t,n),scoreThreshold:P6("scoreThreshold",e,t,n),softNmsSigma:P6("softNmsSigma",e,t,n)}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var M5=function(){function e(t,n){_y(this,e),this.keyDType=t,this.valueDType=n,this.handle=D3(0),this.tensorMap=new Map,Z0(this.handle)}var t,n;return Oy(e,[{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return D3(this.size(),"int32")}},{key:"import",value:(n=Ay(regeneratorRuntime.mark((function e(t,n){var r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",(this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),$0((function(){var e=o4(n),t=r.length,o=e.length;g$(t===o,(function(){return"The number of elements doesn't match, keys has ".concat(t," elements, the values has ").concat(o," elements.")}));for(var i=0;i<t;i++){var s=r[i],u=e[i];Z0(u),a.tensorMap.set(s,u)}return a.handle}))));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"find",value:(t=Ay(regeneratorRuntime.mark((function e(t,n){var r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",$0((function(){for(var e=[],t=0;t<r.length;t++){var o=r[t],i=a.findWithDefault(o,n);e.push(i)}return Y3(e)})));case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ").concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ").concat(t.dtype))}},{key:"id",get:function(){return this.handle.id}}]),e}();
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function D5(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return $0((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[t1(P6("a",e,t,n),P6("b",e,t,n))];case"AddN":return[u1(P6("tensors",e,t,n))];case"FloorMod":case"Mod":return[o3(P6("a",e,t,n),P6("b",e,t,n))];case"Mul":return[a1(P6("a",e,t,n),P6("b",e,t,n))];case"RealDiv":case"Div":return[r1(P6("a",e,t,n),P6("b",e,t,n))];case"DivNoNan":return[c2(P6("a",e,t,n),P6("b",e,t,n))];case"FloorDiv":return[n1(P6("a",e,t,n),P6("b",e,t,n))];case"Sub":return[D2(P6("a",e,t,n),P6("b",e,t,n))];case"Minimum":return[r3(P6("a",e,t,n),P6("b",e,t,n))];case"Maximum":return[Z2(P6("a",e,t,n),P6("b",e,t,n))];case"Pow":return[p3(P6("a",e,t,n),P6("b",e,t,n))];case"SquaredDifference":return[X3(P6("a",e,t,n),P6("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"basic_math":return $0((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[o1(P6("x",e,t,n))];case"Acos":return[i1(P6("x",e,t,n))];case"Acosh":return[s1(P6("x",e,t,n))];case"Asin":return[f1(P6("x",e,t,n))];case"Asinh":return[h1(P6("x",e,t,n))];case"Atan":return[m1(P6("x",e,t,n))];case"Atan2":return[g1(P6("x",e,t,n),P6("y",e,t,n))];case"Atanh":return[v1(P6("x",e,t,n))];case"Ceil":return[z1(P6("x",e,t,n))];case"Complex":return[PJ(P6("real",e,t,n),P6("imag",e,t,n))];case"Cos":return[Y1(P6("x",e,t,n))];case"Cosh":return[$1(P6("x",e,t,n))];case"Elu":return[d2(P6("x",e,t,n))];case"Erf":return[p2(P6("x",e,t,n))];case"Exp":return[f2(P6("x",e,t,n))];case"Expm1":return[m2(P6("x",e,t,n))];case"Floor":return[y2(P6("x",e,t,n))];case"Log":return[A2(P6("x",e,t,n))];case"Log1p":return[_2(P6("x",e,t,n))];case"Imag":return[w2(P6("x",e,t,n))];case"Neg":return[O2(P6("x",e,t,n))];case"Reciprocal":return[A3(P6("x",e,t,n))];case"Real":return[N3(P6("x",e,t,n))];case"Relu":return[_3(P6("x",e,t,n))];case"Round":return[F3(P6("x",e,t,n))];case"Selu":return[B3(P6("x",e,t,n))];case"Sigmoid":return[D1(P6("x",e,t,n))];case"Sin":return[U3(P6("x",e,t,n))];case"Sign":return[L3(P6("x",e,t,n))];case"Sinh":return[V3(P6("x",e,t,n))];case"Softplus":return[F2(P6("x",e,t,n))];case"Sqrt":return[K3(P6("x",e,t,n))];case"Square":return[i3(P6("x",e,t,n))];case"Tanh":return[P1(P6("x",e,t,n))];case"Tan":return[J3(P6("x",e,t,n))];case"ClipByValue":return[j1(P6("x",e,t,n),P6("clipValueMin",e,t,n),P6("clipValueMax",e,t,n))];case"Relu6":return[R3(P6("x",e,t,n))];case"Rsqrt":return[M3(L6(e.inputNames[0],t,n))];case"Prod":return[h3(P6("x",e,t,n),P6("axes",e,t,n))];case"LeakyRelu":return[C2(P6("x",e,t,n),P6("alpha",e,t,n))];case"Prelu":return[f3(P6("x",e,t,n),P6("alpha",e,t,n))];case"IsNan":return[I2(L6(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"control":return R5(e,t,n);case"convolution":return $0((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=P6("stride",e,t,n),a=P6("pad",e,t,n),o=P6("dataFormat",e,t,n).toUpperCase(),i=P6("dilation",e,t,n);return[q1(P6("x",e,t,n),P6("filter",e,t,n),r,a,o,i)];case"Conv2D":var s=P6("strides",e,t,n),u=z6(e,t,n),c=P6("dataFormat",e,t,n).toUpperCase(),l=P6("dilations",e,t,n);return[G1(P6("x",e,t,n),P6("filter",e,t,n),[s[1],s[2]],u,c,[l[1],l[2]])];case"_FusedConv2D":var d=O5(e,t,n),p=d.stride,f=d.pad,h=d.dataFormat,m=d.dilations,g=d.biasArg,v=d.preluArg,y=d.activationFunc,b=d.leakyreluAlpha;return[g4({x:P6("x",e,t,n),filter:P6("filter",e,t,n),strides:[p[1],p[2]],pad:f,dataFormat:h,dilations:[m[1],m[2]],bias:g,activation:y,preluActivationWeights:v,leakyreluAlpha:b})];case"FusedDepthwiseConv2dNative":var x=O5(e,t,n),k=x.stride,w=x.pad,I=x.dataFormat,C=x.dilations,S=x.biasArg,E=x.preluArg,T=x.activationFunc,N=x.leakyreluAlpha;return[b4({x:P6("x",e,t,n),filter:P6("filter",e,t,n),strides:[k[1],k[2]],pad:w,dataFormat:I,dilations:[C[1],C[2]],bias:S,activation:T,preluActivationWeights:E,leakyreluAlpha:N})];case"Conv2DBackpropInput":case"Conv2dTranspose":var A=P6("outputShape",e,t,n),_=P6("strides",e,t,n),R=z6(e,t,n);return[X1(P6("x",e,t,n),P6("filter",e,t,n),A,[_[1],_[2]],R)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var O=P6("strides",e,t,n),F=z6(e,t,n),M=P6("dilations",e,t,n),D=P6("dataFormat",e,t,n).toUpperCase();return[t2(P6("input",e,t,n),P6("filter",e,t,n),[O[1],O[2]],F,D,[M[1],M[2]])];case"Conv3D":var B=P6("strides",e,t,n),P=P6("pad",e,t,n),L=P6("dataFormat",e,t,n).toUpperCase(),U=P6("dilations",e,t,n);return[Q1(P6("x",e,t,n),P6("filter",e,t,n),[B[1],B[2],B[3]],P,L,[U[1],U[2],U[3]])];case"AvgPool":var V=P6("strides",e,t,n),W=P6("pad",e,t,n),z=P6("kernelSize",e,t,n);return[O1(P6("x",e,t,n),[z[1],z[2]],[V[1],V[2]],W)];case"MaxPool":var j=P6("strides",e,t,n),H=P6("pad",e,t,n),G=P6("kernelSize",e,t,n);return[Q2(P6("x",e,t,n),[G[1],G[2]],[j[1],j[2]],H)];case"MaxPoolWithArgmax":var q=P6("strides",e,t,n),K=P6("pad",e,t,n),X=P6("kernelSize",e,t,n),Q=P6("includeBatchInIndex",e,t,n),Y=$2(P6("x",e,t,n),[X[1],X[2]],[q[1],q[2]],K,Q);return[Y.result,Y.indexes];case"AvgPool3D":var $=P6("strides",e,t,n),Z=P6("pad",e,t,n),J=P6("kernelSize",e,t,n);return[F1(P6("x",e,t,n),[J[1],J[2],J[3]],[$[1],$[2],$[3]],Z)];case"MaxPool3D":var ee=P6("strides",e,t,n),te=P6("pad",e,t,n),ne=P6("kernelSize",e,t,n);return[Y2(P6("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"Dilation2D":var re=P6("strides",e,t,n),ae=P6("pad",e,t,n),oe=P6("dilations",e,t,n),ie=re[1],se=re[2],ue=oe[1],ce=oe[2];return[n2(P6("x",e,t,n),P6("filter",e,t,n),[ie,se],ae,[ue,ce],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"creation":return $0((function(){return function(e,t,n){switch(e.op){case"Fill":var r=P6("shape",e,t,n),a=P6("dtype",e,t,n);return[v2(r,P6("value",e,t,n),a)];case"LinSpace":return[T2(P6("start",e,t,n),P6("stop",e,t,n),P6("num",e,t,n))];case"Multinomial":var o=P6("logits",e,t,n),i=P6("numSamples",e,t,n),s=P6("seed",e,t,n);return[s3(o,i,s)];case"OneHot":var u=P6("indices",e,t,n),c=P6("depth",e,t,n),l=P6("onValue",e,t,n),d=P6("offValue",e,t,n);return[E0(u,c,l,d)];case"Ones":return[t3(P6("shape",e,t,n),P6("dtype",e,t,n))];case"OnesLike":return[c3(P6("x",e,t,n))];case"RandomUniform":return[E3(P6("shape",e,t,n),P6("minval",e,t,n),P6("maxval",e,t,n),P6("dtype",e,t,n))];case"Range":return[T3(P6("start",e,t,n),P6("stop",e,t,n),P6("step",e,t,n),P6("dtype",e,t,n))];case"TruncatedNormal":var p=P6("shape",e,t,n),f=P6("mean",e,t,n),h=P6("stdDev",e,t,n),m=P6("seed",e,t,n);return[r4(p,f,h,P6("dtype",e,t,n),m)];case"Zeros":return[e3(P6("shape",e,t,n),P6("dtype",e,t,n))];case"ZerosLike":return[u2(P6("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"dynamic":return(i=Ay(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,w,I,C,S,E,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?14:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?25:"Where"===e.t0?30:"ListDiff"===e.t0?36:37;break;case 3:return a=F5(t,n,r),o=a.boxes,i=a.scores,s=a.maxOutputSize,u=a.iouThreshold,c=a.scoreThreshold,l=a.softNmsSigma,e.next=12,$4.nonMaxSuppressionWithScoreAsync(o,i,s,u,c,l);case 12:return d=e.sent,e.abrupt("return",[d.selectedIndices,d.selectedScores]);case 14:return p=F5(t,n,r),f=p.boxes,h=p.scores,m=p.maxOutputSize,g=p.iouThreshold,v=p.scoreThreshold,y=P6("padToMaxOutputSize",t,n,r),e.next=23,$4.nonMaxSuppressionPaddedAsync(f,h,m,g,v,y);case 23:return b=e.sent,e.abrupt("return",[b.selectedIndices,b.validOutputs]);case 25:return x=F5(t,n,r),k=x.boxes,w=x.scores,I=x.maxOutputSize,C=x.iouThreshold,S=x.scoreThreshold,e.next=28,$4.nonMaxSuppressionAsync(k,w,I,C,S);case 28:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 30:return E=g0(P6("condition",t,n,r),"bool"),e.next=33,s4(E);case 33:return e.t2=e.sent,T=[e.t2],e.abrupt("return",(E.dispose(),T));case 36:return e.abrupt("return",P3(P6("x",t,n,r),P6("y",t,n,r)));case 37:throw TypeError("Node type ".concat(t.op," is not implemented"));case 38:case"end":return e.stop()}}),e)}))),function(e,t,n){return i.apply(this,arguments)})(e,t,n);case"evaluation":return $0((function(){return function(e,t,n){switch(e.op){case"TopKV2":var r=P6("x",e,t,n),a=P6("k",e,t,n),o=P6("sorted",e,t,n),i=n4(r,a,o);return[i.values,i.indices];case"Unique":var s=P6("x",e,t,n),u=a4(s);return[u.values,u.indices];case"UniqueV2":var c=P6("x",e,t,n),l=P6("axis",e,t,n),d=a4(c,l);return[d.values,d.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"image":return $0((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=P6("images",e,t,n),a=P6("size",e,t,n),o=P6("alignCorners",e,t,n),i=P6("halfPixelCenters",e,t,n);return[$4.resizeBilinear(r,[a[0],a[1]],o,i)];case"ResizeNearestNeighbor":var s=P6("images",e,t,n),u=P6("size",e,t,n),c=P6("alignCorners",e,t,n),l=P6("halfPixelCenters",e,t,n);return[$4.resizeNearestNeighbor(s,[u[0],u[1]],c,l)];case"CropAndResize":var d=P6("image",e,t,n),p=P6("boxes",e,t,n),f=P6("boxInd",e,t,n),h=P6("cropSize",e,t,n),m=P6("method",e,t,n),g=P6("extrapolationValue",e,t,n);return[$4.cropAndResize(d,p,f,h,m,g)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"graph":return $0((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=P6("default",e,t,n);return[L6(e.name,t,n)||r];case"Placeholder":return[L6(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[j6(P6("x",e,t,n))];case"IdentityN":return P6("x",e,t,n).map((function(e){return j6(e)}));case"Snapshot":return[j6(P6("x",e,t,n))];case"Shape":return[e4(P6("x",e,t,n).shape,"int32")];case"ShapeN":return P6("x",e,t,n).map((function(e){return e4(e.shape)}));case"Size":return[D3(P6("x",e,t,n).size,"int32")];case"Rank":return[D3(P6("x",e,t,n).rank,"int32")];case"NoOp":return[D3(1)];case"Print":var a=P6("x",e,t,n),o=P6("data",e,t,n),i=P6("message",e,t,n),s=P6("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(i);for(var u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"logical":return $0((function(){return function(e,t,n){switch(e.op){case"Equal":return[i2(P6("a",e,t,n),P6("b",e,t,n))];case"NotEqual":return[u3(P6("a",e,t,n),P6("b",e,t,n))];case"Greater":return[x2(P6("a",e,t,n),P6("b",e,t,n))];case"GreaterEqual":return[k2(P6("a",e,t,n),P6("b",e,t,n))];case"Less":return[S2(P6("a",e,t,n),P6("b",e,t,n))];case"LessEqual":return[E2(P6("a",e,t,n),P6("b",e,t,n))];case"LogicalAnd":return[q2(P6("a",e,t,n),P6("b",e,t,n))];case"LogicalNot":return[K2(P6("a",e,t,n))];case"LogicalOr":return[X2(P6("a",e,t,n),P6("b",e,t,n))];case"Select":case"SelectV2":return[s2(P6("condition",e,t,n),P6("a",e,t,n),P6("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"matrices":return $0((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[S0(P6("a",e,t,n),P6("b",e,t,n),P6("transposeA",e,t,n),P6("transposeB",e,t,n))];case"Einsum":return[l2.apply(void 0,[P6("equation",e,t,n)].concat(Xy(P6("tensors",e,t,n))))];case"Transpose":return[T0(P6("x",e,t,n),P6("perm",e,t,n))];case"_FusedMatMul":var r=Ky(P6("fusedOps",e,t,n),2),a=r[0],o=r[1],i="biasadd"===a,s="prelu"===o,u=P6("numArgs",e,t,n),c=P6("leakyreluAlpha",e,t,n);if(i){if(s&&2!==u)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==u)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var l=Ky(P6("args",e,t,n),2),d=l[0],p=l[1];return[x4({a:P6("a",e,t,n),b:P6("b",e,t,n),transposeA:P6("transposeA",e,t,n),transposeB:P6("transposeB",e,t,n),bias:d,activation:o,preluActivationWeights:p,leakyreluAlpha:c})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"normalization":return $0((function(){return function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[U1(P6("x",e,t,n),P6("mean",e,t,n),P6("variance",e,t,n),P6("offset",e,t,n),P6("scale",e,t,n),P6("epsilon",e,t,n))];case"LRN":return[N2(P6("x",e,t,n),P6("radius",e,t,n),P6("bias",e,t,n),P6("alpha",e,t,n),P6("beta",e,t,n))];case"Softmax":return[W3(P6("x",e,t,n))];case"LogSoftmax":return[P2(P6("x",e,t,n))];case"SparseToDense":return[c4(P6("sparseIndices",e,t,n),P6("outputShape",e,t,n),P6("sparseValues",e,t,n),P6("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"reduction":return $0((function(){return function(e,t,n){switch(e.op){case"Max":var r=P6("axis",e,t,n),a=P6("keepDims",e,t,n);return[M2(P6("x",e,t,n),r,a)];case"Mean":var o=P6("axis",e,t,n),i=P6("keepDims",e,t,n);return[J2(P6("x",e,t,n),o,i)];case"Min":var s=P6("axis",e,t,n),u=P6("keepDims",e,t,n);return[n3(P6("x",e,t,n),s,u)];case"Sum":var c=P6("axis",e,t,n),l=P6("keepDims",e,t,n);return[B2(P6("x",e,t,n),c,l)];case"All":var d=P6("axis",e,t,n),p=P6("keepDims",e,t,n);return[c1(P6("x",e,t,n),d,p)];case"Any":var f=P6("axis",e,t,n),h=P6("keepDims",e,t,n);return[l1(P6("x",e,t,n),f,h)];case"ArgMax":var m=P6("axis",e,t,n);return[d1(P6("x",e,t,n),m)];case"ArgMin":var g=P6("axis",e,t,n);return[p1(P6("x",e,t,n),g)];case"Prod":var v=P6("axis",e,t,n),y=P6("keepDims",e,t,n);return[h3(P6("x",e,t,n),v,y)];case"Cumsum":var b=P6("axis",e,t,n),x=P6("exclusive",e,t,n),k=P6("reverse",e,t,n);return[Z1(P6("x",e,t,n),b,x,k)];case"Bincount":var w=P6("x",e,t,n),I=P6("weights",e,t,n),C=P6("size",e,t,n);return[V1(w,I,C)];case"DenseBincount":var S=P6("x",e,t,n),E=P6("weights",e,t,n),T=P6("size",e,t,n),N=P6("binaryOutput",e,t,n);return[J1(S,E,T,N)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"slice_join":return $0((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=P6("n",e,t,n),a=P6("axis",e,t,n),o=P6("tensors",e,t,n);return o=o.slice(0,r),[M1(o,a)];case"Gather":var i=P6("x",e,t,n),s=P6("indices",e,t,n);return[b2(i,g0(s,"int32"),0)];case"GatherV2":var u=P6("axis",e,t,n),c=P6("batchDims",e,t,n),l=P6("x",e,t,n),d=P6("indices",e,t,n);return[b2(l,g0(d,"int32"),u,c)];case"Reverse":for(var p=P6("dims",e,t,n),f=[],h=0;h<p.length;h++)p[h]&&f.push(h);var m=P6("x",e,t,n);return[O3(m,f)];case"ReverseV2":var g=P6("axis",e,t,n),v=P6("x",e,t,n);return[O3(v,g)];case"Slice":var y=P6("begin",e,t,n),b=P6("size",e,t,n);return[B1(P6("x",e,t,n),y,b)];case"StridedSlice":var x=P6("begin",e,t,n),k=P6("end",e,t,n),w=P6("strides",e,t,n),I=P6("beginMask",e,t,n),C=P6("endMask",e,t,n),S=P6("ellipsisMask",e,t,n),E=P6("newAxisMask",e,t,n),T=P6("shrinkAxisMask",e,t,n),N=P6("x",e,t,n);return[Z3(N,x,k,w,I,C,S,E,T)];case"Pack":return $0((function(){var r=P6("axis",e,t,n),a=P6("tensors",e,t,n),o=a[0].shape,i=Q3(a[0]).shape,s=a.map((function(e){var t=k$(e.shape,o);if(!t&&!k$(Q3(e).shape,i))throw new Error("the input tensors shape does not match");return t?e:R1(e,o)}));return[Y3(s,r)]}));case"Unpack":var A=P6("axis",e,t,n),_=P6("tensor",e,t,n);return o4(_,A);case"Tile":var R=P6("reps",e,t,n);return[g2(P6("x",e,t,n),R)];case"Split":case"SplitV":var O=P6("axis",e,t,n),F=P6("numOrSizeSplits",e,t,n),M=P6("x",e,t,n);return G3(M,F,O);case"ScatterNd":var D=P6("indices",e,t,n),B=P6("values",e,t,n),P=P6("shape",e,t,n);return[u4(D,B,P)];case"GatherNd":var L=P6("x",e,t,n),U=P6("indices",e,t,n);return[l4(L,U)];case"SparseToDense":var V=P6("sparseIndices",e,t,n),W=P6("outputShape",e,t,n),z=P6("sparseValues",e,t,n),j=P6("defaultValue",e,t,n);return[c4(V,z,W,z.dtype===j.dtype?j:g0(j,z.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"sparse":return $0((function(){return function(e,t,n){switch(e.op){case"SparseFillEmptyRows":var r=Z4.sparseFillEmptyRows(P6("indices",e,t,n),P6("values",e,t,n),P6("denseShape",e,t,n),P6("defaultValue",e,t,n));return[r.outputIndices,r.outputValues,r.emptyRowIndicator,r.reverseIndexMap];case"SparseReshape":var a=Z4.sparseReshape(P6("inputIndices",e,t,n),P6("inputShape",e,t,n),P6("newShape",e,t,n));return[a.outputIndices,a.outputShape];case"SparseSegmentMean":return[Z4.sparseSegmentMean(P6("data",e,t,n),P6("indices",e,t,n),P6("segmentIds",e,t,n))];case"SparseSegmentSum":return[Z4.sparseSegmentSum(P6("data",e,t,n),P6("indices",e,t,n),P6("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"spectral":return $0((function(){return function(e,t,n){switch(e.op){case"FFT":return[z3(P6("x",e,t,n))];case"IFFT":return[j3(P6("x",e,t,n))];case"RFFT":return[q3(P6("x",e,t,n))];case"IRFFT":return[H3(P6("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"string":return $0((function(){return function(e,t,n){switch(e.op){case"StringNGrams":var r=J4.stringNGrams(P6("data",e,t,n),P6("dataSplits",e,t,n),P6("separator",e,t,n),P6("nGramWidths",e,t,n),P6("leftPad",e,t,n),P6("rightPad",e,t,n),P6("padWidth",e,t,n),P6("preserveShortSequences",e,t,n));return[r.nGrams,r.nGramsSplits];case"StringSplit":var a=J4.stringSplit(P6("input",e,t,n),P6("delimiter",e,t,n),P6("skipEmpty",e,t,n));return[a.indices,a.values,a.shape];case"StringToHashBucketFast":return[J4.stringToHashBucketFast(P6("input",e,t,n),P6("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"transformation":return $0((function(){return function(e,t,n){switch(e.op){case"Cast":return[g0(P6("x",e,t,n),P6("dtype",e,t,n))];case"ExpandDims":var r=P6("axis",e,t,n);return[h2(P6("x",e,t,n),r)];case"Squeeze":var a=P6("axis",e,t,n);return[Q3(P6("x",e,t,n),a)];case"Reshape":return[R1(P6("x",e,t,n),P6("shape",e,t,n))];case"MirrorPad":return[a3(P6("x",e,t,n),P6("padding",e,t,n),P6("mode",e,t,n))];case"PadV2":case"Pad":return[l3(P6("x",e,t,n),P6("padding",e,t,n),P6("constantValue",e,t,n))];case"SpaceToBatchND":var o=P6("blockShape",e,t,n),i=P6("paddings",e,t,n);return[d3(P6("x",e,t,n),o,i)];case"BatchToSpaceND":var s=P6("blockShape",e,t,n),u=P6("crops",e,t,n);return[L1(P6("x",e,t,n),s,u)];case"DepthToSpace":var c=P6("blockSize",e,t,n),l=P6("dataFormat",e,t,n).toUpperCase();return[e2(P6("x",e,t,n),c,l)];case"BroadcastTo":return[W1(P6("x",e,t,n),P6("shape",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"hash_table":return(o=Ay(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,u,c,l,d,p,f,h,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?5:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?10:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?15:17;break;case 3:return o=P6("keyDType",t,n,r),i=P6("valueDType",t,n,r),s=new M5(o,i),e.abrupt("return",(a.addHashTable(t.name,s),[s.handle]));case 5:return u=P6("tableHandle",t,n,r,a),c=P6("keys",t,n,r),l=P6("values",t,n,r),d=a.getHashTableById(u.id),e.next=8,d.import(c,l);case 8:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 10:return p=P6("tableHandle",t,n,r,a),f=P6("keys",t,n,r),h=P6("defaultValue",t,n,r),m=a.getHashTableById(p.id),e.next=13,m.find(f,h);case 13:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 15:return g=P6("tableHandle",t,n,r,a),e.abrupt("return",[a.getHashTableById(g.id).tensorSize()]);case 17:throw TypeError("Node type ".concat(t.op," is not implemented"));case 18:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return o.apply(this,arguments)})(e,t,n,r);case"custom":var a=B6(e.op);if(a&&a.customExecutor)return a.customExecutor(new C5(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()"))}var o,i}(e,t,n);return K$(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var B5=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};_y(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return Oy(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}},{key:"currentContext",set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},get:function(){return this.contexts}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}}]),e}();
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function P5(e,t,n,r){var a=new Set,o=[],i=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return W6(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return W6(e.name)[0]})));for(var d=Xy(t);d.length>0;){var p=d.pop();(W5(p)||z5(p)||j5(p))&&null==i&&(s=(i=p).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(p.name),null==n[p.name]&&-1===c.indexOf(p.name)&&-1===l.indexOf(p.name)&&(0!==p.inputs.length?p.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),d.push(e))})):o.push(p.name))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:o,dynamicNode:i,syncInputs:s}}var L5=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],U5=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],V5=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function W5(e){return L5.indexOf(e.op)>=0}function z5(e){return U5.indexOf(e.op)>=0}function j5(e){return V5.indexOf(e.op)>=0}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var H5=function(){function e(t,n){var r=this;_y(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}var t,n,r,a;return Oy(e,[{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=P5(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,o=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has the dynamic op '").concat(a.op,"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [").concat(o,"]"));if(r.length>0){var i=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(i,"] from the provided inputs [").concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,o=[],i=Object.keys(a).map((function(e){return W6(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;i.forEach((function(e){r.has(e.name)&&o.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&o.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&o.push(e)}));for(var u=new Set,c=[];o.length>0;){var l=o.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&o.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[W6(e)[0]]})),o=t.map((function(e){return W6(e)[0]})),i=o.map((function(e){return n.graph.nodes[e]}));0===i.length&&(i=this._outputs);var s=this.getCompilationKey(a,i),u=this.compiledMap.get(s);null==u&&(u=this.compile(e,i),this.compiledMap.set(s,u));var c={},l={};return $0((function(){var r=new B5(n.weightMap,c,l,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=Ky(W6(t),2),r=n[0],o=[];o[n[1]]=e[t],a[r]=o}));for(var i=n.getFrozenTensorIds(a),s={},d=0;d<u.length;d++){var p=u[d];if(!a[p.name]){var f=D5(p,a,r,n._resourceManager);if(K$(f))throw new Error("The execution of the op '".concat(p.op,"' returned a promise. Please use model.executeAsync() instead."));a[p.name]=f,n.checkTensorForDisposal(p.name,p,a,r,i,o,s)}}return null==n.parent&&r.dispose(i),t.map((function(e){return L6(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,o,i){"control"!==t.category&&-1===o.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(i[e.id]=(i[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var t=function(e,t,n){return t[V6(e,n.currentContextId)]}(e.name,n,r);null!=t&&t.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var t=i[e.id];1===t?(e.dispose(),delete i[e.id]):null!=t&&i[e.id]--}}))}})))}},{key:"executeAsync",value:(a=Ay(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"_executeAsync",value:(r=Ay(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,u,c,l,d,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],a=p.length>3&&void 0!==p[3]?p[3]:{},o=p.length>4&&void 0!==p[4]?p[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n)),i=new B5(this.weightMap,a,o,this.functionExecutorMap),e.next=7,this.executeWithControlFlow(t,i,n,r);case 7:return s=e.sent,u=n.map((function(e){return L6(e,s,i)})),c=u.map((function(e){return e.id})),l=Object.keys(t).map((function(e){return t[e].id})),d=new Set([].concat(Xy(c),Xy(l),Xy(this.weightIds))),e.abrupt("return",(Object.keys(s).forEach((function(e){s[e].forEach((function(e){!e||e.kept||e.isDisposed||d.has(e.id)||e.dispose()}))})),null==this.parent&&i.dispose(d),u));case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"executeFunctionAsync",value:(n=Ay(regeneratorRuntime.mark((function e(t,n,r){var a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[o.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"executeWithControlFlow",value:(t=Ay(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,w=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Object.keys(t),i=o.map((function(e){return w.graph.nodes[W6(e)[0]]})),s=r.map((function(e){return W6(e)[0]})),0===(u=s.map((function(e){return w.graph.nodes[e]}))).length&&(u=this._outputs),c=P5(t,u,this.weightMap,this._initNodes),l=c.usedNodes,d=c.missingInputs,p=c.dynamicNode,f=c.syncInputs,h=[].concat(Xy(i),Xy(this.graph.weights),Xy(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=Ky(W6(e),2),r=n[0],a=[];a[n[1]]=t[e],m[r]=a})),g={},v=this.getFrozenTensorIds(m),y={};case 6:if(!(h.length>0)){e.next=12;break}return b=this.processStack(i,h,n,m,y,v,s,g,l),e.next=10,Promise.all(b);case 10:e.next=6;break;case 12:if(null!=p||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((x=u.filter((function(e){return!W5(e)&&!L6(e.name,m,n)})).map((function(e){return e.name}))).length>0)){e.next=17;break}throw k="",null!=p&&(k="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [".concat(f,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided inputs [").concat(o,"]. Consider providing the following inputs: [").concat(d,"]. ").concat(k));case 17:return e.abrupt("return",m);case 18:case"end":return e.stop()}}),e,this)}))),function(e,n,r,a){return t.apply(this,arguments)})},{key:"processStack",value:function(e,t,n,r,a,o,i,s,u){for(var c=this,l=[],d=function(){var e,d=t.pop();n.currentContext=d.contexts;var p="";if("Enter"===d.node.op&&P6("isConstant",d.node,r,n)&&(e=Ky(U6(d.node.name,n),1),p=e[0]),null==r[d.node.name]){var f,h=D5(d.node,r,n,c._resourceManager);p||(f=Ky(U6(d.node.name,n),1),p=f[0]);var m=n.currentContext;K$(h)?l.push(h.then((function(e){return r[p]=e,n.currentContext=m,c.checkTensorForDisposal(p,d.node,r,n,o,i,s),c.processChildNodes(d.node,t,n,r,a,u),e}))):(r[p]=h,c.checkTensorForDisposal(p,d.node,r,n,o,i,s),c.processChildNodes(d.node,t,n,r,a,u))}else c.processChildNodes(d.node,t,n,r,a,u)};t.length>0;)d();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,o){e.children.forEach((function(e){var i=Ky(U6(e.name,n),1)[0];!a[i]&&o.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!L6(e,r,n)}))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!L6(e,r,n)}))&&(a[i]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=Ky(W6(n),1)[0],o=t.graph.nodes[a];if(o.attrParams.shape&&o.attrParams.shape.value){var i=o.attrParams.shape.value;g$(i.length===r.shape.length&&r.shape.every((function(e,t){return-1===i[t]||i[t]===e})),(function(){return"The shape of dict['".concat(o.name,"'] provided in model.execute(dict) must be [").concat(i,"], but was [").concat(r.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&g$(r.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in model.execute(dict) must be ").concat(o.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]?t[this._signature.inputs[n].name]=e[n]:t[n]=e[n];return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=Ky(W6(e),1)[0];return null==t.graph.nodes[n]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=Ky(W6(e),1)[0];if(!t.graph.nodes[n])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}},{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,Xy(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}}]),e}(),G5=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_y(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return Oy(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),q5=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_y(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new G5}var t,n,r;return Oy(e,[{key:"findIOHandler",value:function(){var e,t,n=this.modelUrl;if(null!=n.load)this.handler=n;else if(null!=this.loadOptions.requestInit)this.handler=I0(n,this.loadOptions);else{var r=(e=n,t=this.loadOptions,qJ.getLoadHandlers(e,t));if(0===r.length)r.push(I0(n,this.loadOptions));else if(r.length>1)throw new Error("Found more than one (".concat(r.length,") load handlers for URL '").concat([n],"'"));this.handler=r[0]}}},{key:"load",value:(r=Ay(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.findIOHandler(),null!=this.handler.load){e.next=2;break}throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 2:return e.next=4,this.handler.load();case 4:return t=e.sent,e.abrupt("return",this.loadSync(t));case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=function(e,t){var n,r,a={},o=0,i=rb(t);try{for(i.s();!(r=i.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,d=x$(l),p=void 0;if("quantization"in s){var f=s.quantization;if("uint8"===f.dtype||"uint16"===f.dtype){if(!("min"in f)||!("scale"in f))throw new Error("Weight ".concat(s.name," with quantization ").concat(f.dtype," doesn't have corresponding metadata min and scale."))}else{if("float16"!==f.dtype)throw new Error("Weight ".concat(s.name," has unknown quantization dtype ").concat(f.dtype,". Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'."));if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(f.dtype," which only supports weights of type float32 not ").concat(c,"."))}var h=VJ[f.dtype],m=e.slice(o,o+d*h),g="uint8"===f.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===c)if("uint8"===f.dtype||"uint16"===f.dtype){p=new Float32Array(g.length);for(var v=0;v<g.length;v++){var y=g[v];p[v]=y*f.scale+f.min}}else{if("float16"!==f.dtype)throw new Error("Unsupported quantization type ".concat(f.dtype," for weight type float32."));void 0===n&&(n=GJ()),p=n(g)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==f.dtype&&"uint16"!==f.dtype)throw new Error("Unsupported quantization type ".concat(f.dtype," for weight type int32."));p=new Int32Array(g.length);for(var b=0;b<g.length;b++){var x=g[b];p[b]=Math.round(x*f.scale+f.min)}}o+=d*h}else if("string"===c){var k=x$(s.shape);p=[];for(var w=0;w<k;w++){var I=new Uint32Array(e.slice(o,o+4))[0];o+=4;var C=new Uint8Array(e.slice(o,o+I));p.push(C),o+=I}}else{var S=VJ[c],E=e.slice(o,o+d*S);if("float32"===c)p=new Float32Array(E);else if("int32"===c)p=new Int32Array(E);else if("bool"===c)p=new Uint8Array(E);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));p=new Float32Array(E);for(var T=new Float32Array(p.length/2),N=new Float32Array(p.length/2),A=0;A<T.length;A++)T[A]=p[2*A],N[A]=p[2*A+1];var _=UJ(T,l,"float32"),R=UJ(N,l,"float32");a[u]=PJ(_,R),_.dispose(),R.dispose()}o+=d*S}"complex64"!==c&&(a[u]=UJ(p,l,c))}}catch(e){i.e(e)}finally{i.f()}return a}(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new H5(c5.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=c5.Instance.transformGraph(e.modelInitializer);this.initializer=new H5(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:(n=Ay(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=7;break}if(a=t,0!==(r=qJ.getSaveHandlers(a)).length){e.next=4;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 4:if(!(r.length>1)){e.next=6;break}throw new Error("Found more than one (".concat(r.length,") save handlers for URL '").concat(t,"'"));case 6:t=r[0];case 7:if(null!=t.save){e.next=9;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 9:return e.abrupt("return",t.save(this.artifacts));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof cJ||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has ".concat(this.inputNodes.length," placeholders, while there are ").concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:(t=Ay(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=3,this.executor.executeAsync(t,n);case 3:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}},{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}}]),e}();function K5(e){return X5.apply(this,arguments)}
/**
	    * @license
	    * Copyright 2021 Google LLC. All Rights Reserved.
	    * Licensed under the Apache License, Version 2.0 (the "License");
	    * you may not use this file except in compliance with the License.
	    * You may obtain a copy of the License at
	    *
	    * http://www.apache.org/licenses/LICENSE-2.0
	    *
	    * Unless required by applicable law or agreed to in writing, software
	    * distributed under the License is distributed on an "AS IS" BASIS,
	    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	    * See the License for the specific language governing permissions and
	    * limitations under the License.
	    * =============================================================================
	    */function X5(){return(X5=Ay(regeneratorRuntime.mark((function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t="".concat(t,"model.json?tfjs-format=file")),r=new q5(t,n),e.next=7,r.load();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q5(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))}function Y5(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var $5=function(e){return{startEndTensor:e,startPoint:B1(e,[0,0],[-1,2]),endPoint:B1(e,[0,2],[-1,2])}},Z5={strides:[8,16],anchors:[2,6]};function J5(e,t){var n,r,a;if(e.topLeft instanceof cJ&&e.bottomRight instanceof cJ){var o=$0((function(){return[M1([B1(D2(t-1,e.topLeft),0,1),B1(e.topLeft,1,1)]),M1([D2(t-1,B1(e.bottomRight,0,1)),B1(e.bottomRight,1,1)])]}));n=o[0],r=o[1],null!=e.landmarks&&(a=$0((function(){var n=D2(e4([t-1,0]),e.landmarks),r=e4([1,-1]);return a1(n,r)})))}else{var i=e.topLeft,s=i[0],u=i[1],c=e.bottomRight,l=c[0],d=c[1];n=[t-1-s,u],r=[t-1-l,d],null!=e.landmarks&&(a=e.landmarks.map((function(e){return[t-1-e[0],e[1]]})))}var p={topLeft:n,bottomRight:r};return null!=a&&(p.landmarks=a),null!=e.probability&&(p.probability=e.probability instanceof cJ?e.probability.clone():e.probability),p}function e8(e,t){return $0((function(){var n;return n=e.hasOwnProperty("box")?e.box:e,Q3(function(e,t){var n=a1(e.startPoint,t),r=a1(e.endPoint,t),a=H1([n,r],1);return $5(a)}(n,t).startEndTensor)}))}var t8,n8,r8,a8=function(){function e(e,t,n,r,a,o){this.blazeFaceModel=e,this.width=t,this.height=n,this.maxFaces=r,this.anchorsData=function(e,t,n){for(var r=[],a=0;a<n.strides.length;a++)for(var o=n.strides[a],i=Math.floor((t+o-1)/o),s=Math.floor((e+o-1)/o),u=n.anchors[a],c=0;c<i;c++)for(var l=o*(c+.5),d=0;d<s;d++)for(var p=o*(d+.5),f=0;f<u;f++)r.push([p,l]);return r}(t,n,Z5),this.anchors=t4(this.anchorsData),this.inputSizeData=[t,n],this.inputSize=e4([t,n]),this.iouThreshold=a,this.scoreThreshold=o}return e.prototype.getBoundingBoxes=function(e,t,n){return void 0===n&&(n=!0),Q5(this,void 0,void 0,(function(){var r,a,o,i,s,u,c,l,d,p,f,h,m,g,v=this;return Y5(this,(function(y){switch(y.label){case 0:return r=$0((function(){var t=$4.resizeBilinear(e,[v.width,v.height]),n=a1(D2(r1(t,255),.5),2),r=v.blazeFaceModel.predict(n),a=Q3(r),o=function(e,t,n){var r=B1(e,[0,1],[-1,2]),a=t1(r,t),o=B1(e,[0,3],[-1,2]),i=r1(o,n),s=r1(a,n),u=r1(i,2),c=D2(s,u),l=t1(s,u),d=a1(c,n),p=a1(l,n);return H1([d,p],1)}(a,v.anchors,v.inputSize),i=B1(a,[0,0],[-1,1]);return[a,o,Q3(D1(i))]})),a=r[0],o=r[1],i=r[2],s=console.warn,console.warn=function(){},u=$4.nonMaxSuppression(o,i,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=s,[4,u.array()];case 1:return c=y.sent(),u.dispose(),l=c.map((function(e){return B1(o,[e,0],[1,-1])})),t?[3,3]:[4,Promise.all(l.map((function(e){return Q5(v,void 0,void 0,(function(){var t;return Y5(this,(function(n){switch(n.label){case 0:return[4,e.array()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 2:l=y.sent(),y.label=3;case 3:for(d=e.shape[1],p=e.shape[2],f=t?r1([p,d],this.inputSize):[p/this.inputSizeData[0],d/this.inputSizeData[1]],h=[],m=function(e){var r=l[e],o=$0((function(){var o=$5(r instanceof cJ?r:t4(r));if(!n)return o;var s,u=c[e];return s=t?B1(v.anchors,[u,0],[1,2]):v.anchorsData[u],{box:o,landmarks:R1(Q3(B1(a,[u,5],[1,-1])),[6,-1]),probability:B1(i,[u],[1]),anchor:s}}));h.push(o)},g=0;g<l.length;g++)m(g);return o.dispose(),i.dispose(),a.dispose(),[2,{boxes:h,scaleFactor:f}]}}))}))},e.prototype.estimateFaces=function(e,t,n,r){return void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!0),Q5(this,void 0,void 0,(function(){var a,o,i,s,u,c,l=this;return Y5(this,(function(d){switch(d.label){case 0:return a=function(e){return e instanceof cJ?[e.shape[0],e.shape[1]]:[e.height,e.width]}(e),o=a[1],i=$0((function(){return e instanceof cJ||(e=N0(e)),h2(g0(e,"float32"),0)})),[4,this.getBoundingBoxes(i,t,r)];case 1:return s=d.sent(),u=s.boxes,c=s.scaleFactor,i.dispose(),t?[2,u.map((function(e){var t=e8(e,c),a={topLeft:B1(t,[0],[2]),bottomRight:B1(t,[2],[2])};if(r){var i=e,s=i.landmarks,u=i.probability,l=i.anchor,d=a1(t1(s,l),c);a.landmarks=d,a.probability=u}return n&&(a=J5(a,o)),a}))]:[2,Promise.all(u.map((function(e){return Q5(l,void 0,void 0,(function(){var t,a,i,s,u,l,d,p,f,h,m,g=this;return Y5(this,(function(v){switch(v.label){case 0:return t=e8(e,c),r?[3,2]:[4,t.array()];case 1:return u=v.sent(),a={topLeft:u.slice(0,2),bottomRight:u.slice(2)},[3,4];case 2:return[4,Promise.all([e.landmarks,t,e.probability].map((function(e){return Q5(g,void 0,void 0,(function(){return Y5(this,(function(t){return[2,e.array()]}))}))})))];case 3:i=v.sent(),s=i[0],u=i[1],l=i[2],d=e.anchor,f=(p=c)[0],h=p[1],m=s.map((function(e){return[(e[0]+d[0])*f,(e[1]+d[1])*h]})),a={topLeft:u.slice(0,2),bottomRight:u.slice(2),landmarks:m,probability:l},function(e){e.startEndTensor.dispose(),e.startPoint.dispose(),e.endPoint.dispose()}(e.box),e.landmarks.dispose(),e.probability.dispose(),v.label=4;case 4:return t.dispose(),n&&(a=J5(a,o)),[2,a]}}))}))})))]}}))}))},e}();function o8(e){var t=void 0===e?{}:e,n=t.maxFaces,r=void 0===n?10:n,a=t.inputWidth,o=void 0===a?128:a,i=t.inputHeight,s=void 0===i?128:i,u=t.iouThreshold,c=void 0===u?.3:u,l=t.scoreThreshold,d=void 0===l?.75:l,p=t.modelUrl;return Q5(this,void 0,void 0,(function(){var e;return Y5(this,(function(t){switch(t.label){case 0:return null==p?[3,2]:[4,K5(p)];case 1:return e=t.sent(),[3,4];case 2:return[4,K5("https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1",{fromTFHub:!0})];case 3:e=t.sent(),t.label=4;case 4:return[2,new a8(e,o,s,r,c,d)]}}))}))}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(t8||(t8={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid"}(n8||(n8={}));var i8={kernelName:"_FusedMatMul",backendName:"wasm",setupFunc:function(e){r8=e.wasm.cwrap("_FusedMatMul",null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,s=t.preluActivationWeights;if("float32"!==a.dtype||"float32"!==o.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var u=r.transposeA,c=r.transposeB,l=r.activation,d=r.leakyreluAlpha,p=n.dataIdMap.get(a.dataId).id,f=n.dataIdMap.get(o.dataId).id,h=0;if(null!=i){var m=n.dataIdMap.get(i.dataId);if(1!==m.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got rank ".concat(m.shape.length,"."));h=m.id}var g=null==s?0:n.dataIdMap.get(s.dataId).id,v=n8[l];if(null==v)throw new Error("".concat(l," activation not yet supported for FusedConv2D in the wasm backend."));var y=u?a.shape[2]:a.shape[1],b=c?o.shape[1]:o.shape[2],x=a.shape[0],k=n.makeOutput([x,y,b],a.dtype),w=n.dataIdMap.get(k.dataId).id,I=new Uint8Array(new Int32Array(a.shape).buffer),C=new Uint8Array(new Int32Array(o.shape).buffer);return r8(p,I,a.shape.length,f,C,o.shape.length,u,c,v,h,g,d||0,w),k}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function s8(e){var t;return{kernelName:e,backendName:"wasm",setupFunc:function(n){t=n.wasm.cwrap(e,null,["number","number"])},kernelFunc:function(e){var n=e.backend,r=e.inputs.x,a=n.dataIdMap.get(r.dataId).id,o=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(o.dataId).id;return 0===x$(o.shape)||t(a,i),o}}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var u8=s8("Abs");
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function c8(e,t,n){var r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(a){var o=a.backend,i=a.inputs,s=i.a,u=i.b,c=o.dataIdMap.get(s.dataId).id,l=o.dataIdMap.get(u.dataId).id,d=null!=n?n:s.dtype,p=o2(s.shape,u.shape),f=o.makeOutput(p,d);if(0===x$(p))return f;var h=new Uint8Array(new Int32Array(s.shape).buffer),m=new Uint8Array(new Int32Array(u.shape).buffer),g=o.dataIdMap.get(f.dataId).id,v=function(){return r(c,h,s.shape.length,l,m,u.shape.length,t8[s.dtype],g)};if(t&&"float32"===s.dtype)return v(),f;var y=r2(s.shape,p),b=r2(u.shape,p),x=y.every((function(e,t){return e===t})),k=b.every((function(e,t){return e===t}));if(x&&k)return v(),f;throw new Error("Broadcasting along outer dims is not yet supported for ".concat(s.dtype," ").concat(e,"."))}}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var l8,d8=c8(tZ,!0),p8={kernelName:"AddN",backendName:"wasm",setupFunc:function(e){l8=e.wasm.cwrap("AddN",null,["array","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===x$(r.shape))return r;var a=t.map((function(e){return n.dataIdMap.get(e.dataId).id})),o=new Uint8Array(new Int32Array(a).buffer),i=n.dataIdMap.get(r.dataId).id;return l8(o,a.length,t8[r.dtype],i),r}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function f8(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var h8,m8={kernelName:"Identity",backendName:"wasm",kernelFunc:f8};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function g8(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=Ky(function(e,t){for(var n=[],r=[],a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(var o=0;o<r.length;++o){for(var i=-1,s=0;s<r.length;++s)r[s]>=o&&(-1===i||r[i]>r[s])&&(i=s);r[i]=o}return[n,r]}(t.x.shape,r.perm),2),o=a[0],i=a[1],s=!0,u=0;u<i.length;u++)i[u]!==u&&(s=!1);var c=function(e,t){for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),l={dataId:t.x.dataId,shape:o,dtype:t.x.dtype};if(s){var d=f8({inputs:t,backend:n});return d.shape=c,d}var p=n.makeOutput(c,l.dtype),f=n.dataIdMap.get(l.dataId).id,h=n.dataIdMap.get(p.dataId).id,m=new Uint8Array(new Int32Array(i).buffer),g=new Uint8Array(new Int32Array(l.shape).buffer);return h8(f,g,l.shape.length,t8[l.dtype],h,m,i.length),p}var v8,y8={kernelName:"Transpose",backendName:"wasm",kernelFunc:g8,setupFunc:function(e){h8=e.wasm.cwrap("Transpose",null,["number","array","number","number","number","array","number"])}};
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function b8(e,t,n){var r=e.shape,a=e.shape.length,o=T$(t,r),i=o,s=j2(i,a),u=null,c=!1;if(null!=s){for(var l=new Array(a),d=0;d<l.length;d++)l[d]=r[s[d]];i=G2(i.length,a),u=g8({inputs:{x:e},attrs:{perm:s},backend:n});var p=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(u.dataId).id!==p&&(c=!0)}return{transposed:u,originalAxes:o,axes:i,inputWasTransposed:c}}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var x8,k8,w8,I8={kernelName:"All",backendName:"wasm",setupFunc:function(e){v8=e.wasm.cwrap("All",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=i,c=b8(i,a,t),l=c.transposed,d=c.axes,p=c.originalAxes,f=c.inputWasTransposed;f&&(u=l,s=t.dataIdMap.get(l.dataId).id),z2("all",d,u.shape.length);var h=Ky(V2(u.shape,d),2),m=h[0],g=x$(h[1]),v=t.makeOutput(m,i.dtype);if(0!==x$(u.shape)){var y=t.dataIdMap.get(v.dataId).id;v8(s,g,y)}if(f&&t.disposeData(l.dataId),o){var b=W2(v.shape,p);v.shape=b}return v}},C8={kernelName:"Any",backendName:"wasm",setupFunc:function(e){x8=e.wasm.cwrap("Any",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=i,c=b8(i,a,t),l=c.transposed,d=c.axes,p=c.originalAxes,f=c.inputWasTransposed;f&&(u=l,s=t.dataIdMap.get(l.dataId).id),z2("any",d,u.shape.length);var h=Ky(V2(u.shape,d),2),m=h[0],g=x$(h[1]),v=t.makeOutput(m,i.dtype);if(0!==x$(u.shape)){var y=t.dataIdMap.get(v.dataId).id;x8(s,g,y)}if(f&&t.disposeData(l.dataId),o){var b=W2(v.shape,p);v.shape=b}return v}},S8={kernelName:"ArgMax",backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.axis,a=n.x,o=t.dataIdMap.get(a.dataId).id,i=o,s=a,u=b8(a,r,t),c=u.transposed,l=u.axes,d=u.inputWasTransposed;if(d){var p=t.dataIdMap.get(c.dataId).id;p!==o&&(s=c,i=p)}var f=s.shape.slice(0,-1),h=t.makeOutput(f,"int32"),m=t.dataIdMap.get(h.dataId).id,g=x$(h.shape),v=s.shape[l[0]];return k8(i,t8[s.dtype],g,v,m),d&&t.disposeData(c.dataId),h},setupFunc:function(e){k8=e.wasm.cwrap("ArgMax",null,["number","number","number","number","number"])}},E8={kernelName:"AvgPool",backendName:"wasm",setupFunc:function(e){w8=e.wasm.cwrap("AvgPool",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=r.dataIdMap.get(a.dataId).id,i=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=b1(a.shape,i,s,1,u,c),d=l.filterHeight,p=l.filterWidth,f=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,g=l.padInfo.left,v=l.strideHeight,y=l.strideWidth,b=l.inChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(l.dataFormat,"'. Please use 'channelsLast'."));if(1!==l.dilationWidth||1!==l.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], got [".concat(l.dilationHeight,", ").concat(l.dilationWidth,"]."));var x=r.makeOutput(l.outShape,"float32"),k=r.dataIdMap.get(x.dataId).id;return w8(o,a.shape[0],a.shape[1],a.shape[2],d,p,f,h,m,g,v,y,b,k),x}};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function T8(e){var t=e.inputs,n=e.attrs,r=t.x,a=n.shape,o=x$(r.shape),i=E$(a,o);return g$(o===x$(i),(function(){return"new shape: ".concat(i,", old shape: ").concat(r.shape,". New shape and old shape must have the same number of elements.")})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:i,dtype:r.dtype}}var N8,A8={kernelName:"Reshape",backendName:"wasm",kernelFunc:T8},_8={kernelName:"BatchMatMul",backendName:"wasm",setupFunc:function(e){N8=e.wasm.cwrap("BatchMatMul",null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=r.transposeA,s=r.transposeB;if("float32"!==a.dtype||"float32"!==o.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");var u=a.shape.length,c=o.shape.length,l=i?a.shape[u-2]:a.shape[u-1],d=s?o.shape[c-1]:o.shape[c-2],p=i?a.shape[u-1]:a.shape[u-2],f=s?o.shape[c-2]:o.shape[c-1],h=a.shape.slice(0,-2),m=o.shape.slice(0,-2),g=x$(h),v=x$(m);g$(u>=2&&c>=2&&(g===v||1===g||1===v),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (".concat(h,") and (").concat(m,").")}));var y=(g>v?a.shape.slice(0,-2):o.shape.slice(0,-2)).concat([p,f]);g$(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (").concat(d,") of Tensors with shapes ").concat(a.shape," and ").concat(o.shape," and transposeA=").concat(i," and transposeB=").concat(s," must match.")}));var b=s?[v,f,d]:[v,d,f],x=T8({inputs:{x:a},backend:n,attrs:{shape:i?[g,l,p]:[g,p,l]}}),k=T8({inputs:{x:o},backend:n,attrs:{shape:b}}),w=n.dataIdMap.get(x.dataId).id,I=n.dataIdMap.get(k.dataId).id,C=i?x.shape[2]:x.shape[1],S=s?k.shape[1]:k.shape[2],E=Math.max(g,v),T=n.makeOutput([E,C,S],x.dtype),N=n.dataIdMap.get(T.dataId).id,A=new Uint8Array(new Int32Array(x.shape).buffer),_=new Uint8Array(new Int32Array(k.shape).buffer);return N8(w,A,x.shape.length,I,_,k.shape.length,i,s,N),n.disposeData(x.dataId),n.disposeData(k.dataId),T.shape=y,T}};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function R8(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&g$("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function O8(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var F8={kernelName:"Abs",backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;R8(t,"abs");var r=new Float32Array(x$(t.shape));return r=O8(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function M8(e){return function(t,n,r,a,o){var i=o2(t,n),s=i.length,u=L$(i),c=A$(o,x$(i)),l=t.length,d=n.length,p=L$(t),f=L$(n),h=r2(t,i),m=r2(n,i);if(h.length+m.length===0)for(var g=0;g<c.length;++g)c[g]=e(r[g%r.length],a[g%a.length]);else for(var v=function(t){var n=q$(t,s,u),o=n.slice(-l);h.forEach((function(e){return o[e]=0}));var i=G$(o,l,p),g=n.slice(-d);m.forEach((function(e){return g[e]=0}));var v=G$(g,d,f);c[t]=e(r[i],a[v])},y=0;y<c.length;++y)v(y);return[c,i]}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function D8(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(a.shape,"float32",i)},s}var B8={kernelName:"Complex",backendName:"cpu",kernelFunc:D8};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function P8(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n)return D8({inputs:{real:P8(e,t,"float32"),imag:P8(e,t,"float32")},backend:e});var r=z$(x$(t),n);return e.makeTensorInfo(t,n,r)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function L8(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var U8={kernelName:"Identity",backendName:"cpu",kernelFunc:L8};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function V8(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var W8={kernelName:"Real",backendName:"cpu",kernelFunc:V8};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function z8(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dtype;if("complex64"===o){if("complex64"===a.dtype)return L8({inputs:{x:a},backend:n});var i=P8(n,a.shape,a.dtype),s=z8({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=D8({inputs:{real:s,imag:i},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var c=V8({inputs:{input:a},backend:n}),l=z8({inputs:{x:c},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(c),l}if(!R$(a.dtype,o)){var d=L8({inputs:{x:a},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:o}}if("int32"===o){var p=n.data.get(a.dataId).values,f=Int32Array.from(p);return n.makeTensorInfo(a.shape,"int32",f)}if("bool"===o){var h=n.data.get(a.dataId).values,m=XZ([0],a.dtype),g=Ky(M8((function(e,t){return e!==t?1:0}))(a.shape,[],h,m,"bool"),2),v=g[0],y=g[1];return n.makeTensorInfo(y,"bool",v)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(o))}var j8={kernelName:"Cast",backendName:"cpu",kernelFunc:z8};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function H8(e,t,n,r){return null==n?function(n){var a=n.inputs,o=n.backend,i=a.a,s=a.b,u=o;R8([i,s],e);var c=u.data.get(i.dataId).values,l=u.data.get(s.dataId).values,d="string"===i.dtype?_6(c):c,p="string"===i.dtype?_6(l):l,f=r||i.dtype,h=Ky(t(i.shape,s.shape,d,p,f),2),m=h[0],g=h[1];return u.makeTensorInfo(g,f,m)}:function(e){var a=e.inputs,o=e.backend,i=a.a,s=a.b,u=o;if("complex64"===i.dtype||"complex64"===s.dtype){var c=z8({inputs:{x:i},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),d=l.complexTensorInfos.real,p=l.complexTensorInfos.imag,f=u.data.get(d.dataId).values,h=u.data.get(p.dataId).values,m=z8({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),g=u.data.get(m.dataId),v=g.complexTensorInfos.real,y=g.complexTensorInfos.imag,b=u.data.get(v.dataId).values,x=u.data.get(y.dataId).values,k=Ky(n(i.shape,s.shape,f,h,b,x),3),w=k[0],I=k[1],C=k[2],S=u.makeTensorInfo(C,"float32",w),E=u.makeTensorInfo(C,"float32",I),T=D8({inputs:{real:S,imag:E},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(S),u.disposeIntermediateTensorInfo(E),T}var N=u.data.get(i.dataId).values,A=u.data.get(s.dataId).values,_=r||i.dtype,R=Ky(t(i.shape,s.shape,N,A,_),2),O=R[0],F=R[1];return u.makeTensorInfo(F,_,O)}}function G8(e){return function(t,n,r,a,o,i){var s=o2(t,n),u=x$(s),c=s.length,l=L$(s),d=A$("float32",u),p=A$("float32",u),f=r2(t,s),h=r2(n,s),m=l6(r,a),g=l6(o,i),v=t.length,y=L$(t),b=n.length,x=L$(n);if(f.length+h.length===0)for(var k=0;k<d.length;k++){var w=k%m.length,I=k%g.length,C=e(m[2*w],m[2*w+1],g[2*I],g[2*I+1]);d[k]=C.real,p[k]=C.imag}else for(var S=function(t){var n=q$(t,c,l),r=n.slice(-v);f.forEach((function(e){return r[e]=0}));var a=G$(r,v,y),o=n.slice(-b);h.forEach((function(e){return o[e]=0}));var i=G$(o,b,x),s=e(m[2*a],m[2*a+1],g[2*i],g[2*i+1]);d[t]=s.real,p[t]=s.imag},E=0;E<d.length;E++)S(E);return[d,p,s]}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var q8=M8((function(e,t){return e+t})),K8=G8((function(e,t,n,r){return{real:e+n,imag:t+r}})),X8=H8(tZ,q8,K8),Q8={kernelName:tZ,backendName:"cpu",kernelFunc:X8};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Y8(e,t,n,r,a){for(var o=x$(r),i=z$(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(i[u]+=o>0?t[s]:1)}return i}function $8(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],o=e.shape[1],i=m0([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<o;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?i.set(1,s,c):t.size>0?i.set(i.get(s,c)+t.get(s,u),s,c):i.set(i.get(s,c)+1,s,c))}return i}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Z8(e){return function(t,n,r){for(var a=A$(n,t.length),o=0;o<t.length;++o)a[o]=e(t[o],r);return a}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function J8(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(R8(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=i,c=u.data.get(s.dataId).values,l=x$(s.shape),d=n||s.dtype,p=_$(d,l),f=0;f<l;++f)p[f]=t(c[f],o);return u.makeTensorInfo(s.shape,d,p)}}function e7(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(R8(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=i,c=u.data.get(s.dataId).values,l=n||s.dtype,d=t(c,l,o);return u.makeTensorInfo(s.shape,l,d)}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var t7=Z8((function(e){return Math.ceil(e)})),n7={kernelName:"Ceil",backendName:"cpu",kernelFunc:e7("Ceil",t7)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function r7(e,t,n,r){var a=_$(n,x$(t));if(r&&"string"!==n){var o=0;e.forEach((function(e){var t=x$(e.shape);a.set(e.vals,o),o+=t}))}else{var i=0;e.forEach((function(e){for(var r="string"===n?_6(e.vals):e.vals,o=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+i,c=0;c<e.shape[1];++c)a[u+c]=r[o++];i+=e.shape[1]}))}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var a7=M8((function(e,t){return e===t?1:0})),o7=H8("Equal",a7,null,"bool"),i7={kernelName:"Equal",backendName:"cpu",kernelFunc:o7},s7=Z8((function(e){return Math.exp(e)})),u7=e7("Exp",s7),c7={kernelName:"Exp",backendName:"cpu",kernelFunc:u7},l7=Z8((function(e){return Math.expm1(e)})),d7={kernelName:"Expm1",backendName:"cpu",kernelFunc:e7("Expm1",l7)},p7=Z8((function(e){return Math.floor(e)})),f7={kernelName:"Floor",backendName:"cpu",kernelFunc:e7("Floor",p7)};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function h7(e,t,n,r,a,o,i,s,u){for(var c=m0([r,o],n),l=0;l<r;l++){for(var d=[],p=0,f=0;f<a;f++){var h=e[l*a+f];p+=h*i[f],d.push(h)}if(p<0||p>=u/o)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(s));for(var m=0;m<o;m++)c.values[l*o+m]=t.get.apply(t,Xy(t.indexToLoc(p*o+m)))}return c}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function m7(e,t,n){for(var r=m0(n,e.dtype),a=0;a<r.size;++a){var o=r.indexToLoc(a).slice(),i=o[0],s=o[2],u=t.locToIndex([i,s]);o[2]=t.values[u];var c=e.locToIndex(o);r.values[a]=e.values[c]}return r}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var g7=M8((function(e,t){return e>t?1:0})),v7={kernelName:"Greater",backendName:"cpu",kernelFunc:H8("Greater",g7,null,"bool")},y7=M8((function(e,t){return e>=t?1:0})),b7={kernelName:"GreaterEqual",backendName:"cpu",kernelFunc:H8("GreaterEqual",y7,null,"bool")},x7=M8((function(e,t){return e<t?1:0})),k7={kernelName:"Less",backendName:"cpu",kernelFunc:H8("Less",x7,null,"bool")},w7=M8((function(e,t){return e<=t?1:0})),I7={kernelName:"LessEqual",backendName:"cpu",kernelFunc:H8("LessEqual",w7,null,"bool")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function C7(e,t,n){var r=(t-e)/(n-1),a=z$(n,"float32");a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var S7=Z8((function(e){return Math.log(e)})),E7={kernelName:"Log",backendName:"cpu",kernelFunc:e7("Log",S7)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function T7(e,t,n,r){for(var a=A$(r,x$(n)),o=0;o<a.length;++o){for(var i=o*t,s=e[i],u=0;u<t;++u){var c=e[i+u];(Number.isNaN(c)||c>s)&&(s=c)}a[o]=s}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var N7=M8((function(e,t){return Math.max(e,t)})),A7={kernelName:"Maximum",backendName:"cpu",kernelFunc:H8("Maximum",N7)},_7=M8((function(e,t){return Math.min(e,t)})),R7={kernelName:"Minimum",backendName:"cpu",kernelFunc:H8("Minimum",_7)},O7=M8((function(e,t){return e*t})),F7=G8((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),M7=H8("Multiply",O7,F7),D7={kernelName:"Multiply",backendName:"cpu",kernelFunc:M7};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function B7(e,t,n){var r=KZ(-1,n);return O7([],t,r,e,n)}var P7={kernelName:"Neg",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;R8(r,"neg");var a=Ky(B7(n.data.get(r.dataId).values,r.shape,r.dtype),2),o=a[0],i=a[1];return n.makeTensorInfo(i,r.dtype,o)}},L7=M8((function(e,t){return e!==t?1:0})),U7={kernelName:"NotEqual",backendName:"cpu",kernelFunc:H8("NotEqual",L7,null,"bool")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function V7(e,t,n,r,a){for(var o=t.length,i=x$(t),s=L$(t),u=L$(a),c=A$(n,x$(a)),l=0;l<i;++l){for(var d=q$(l,o,s),p=new Array(d.length),f=0;f<p.length;f++)p[f]=d[r[f]];c[G$(p,o,u)]=e[l]}return c}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function W7(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.perm;R8(a,"transpose");for(var i=a.shape.length,s=new Array(i),u=0;u<s.length;u++)s[u]=a.shape[o[u]];var c=V7(r.data.get(a.dataId).values,a.shape,a.dtype,o,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var z7={kernelName:"Transpose",backendName:"cpu",kernelFunc:W7};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function j7(e,t,n,r){for(var a=Ky(V2(e,r),2),o=a[0],i=a[1],s=vJ(t,"int32"),u=z$(x$(o),s),c=x$(i),l=0;l<u.length;++l){for(var d=l*c,p=1,f=0;f<c;++f)p*=n[d+f];u[l]=p}return{outVals:u,outShape:o,outDtype:s}}var H7={kernelName:"Prod",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;R8(a,"prod");var s=a.shape.length,u=T$(o,a.shape),c=j2(u,s),l=u,d=a,p=[];null!=c&&(d=W7({inputs:{x:a},backend:n,attrs:{perm:c}}),p.push(d),l=G2(l.length,s));var f=n.data.get(d.dataId).values,h=j7(d.shape,d.dtype,f,l),m=h.outVals,g=h.outShape,v=h.outDtype,y=g;return i&&(y=W2(g,u)),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,v,m)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function G7(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return z$(0,r);var a=z$(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+n;return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var q7=Z8((function(e){return 1/Math.sqrt(e)})),K7={kernelName:"Rsqrt",backendName:"cpu",kernelFunc:e7("Rsqrt",q7)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function X7(e,t,n,r,a){var o=G0(r,t,n),i=x$(n),s=L$(r);if(o){var u=q0(t,s);return"string"===a?e.slice(u,u+i):e.subarray(u,u+i)}for(var c=m0(r,a,"string"===a?_6(e):e),l=m0(n,a),d=0;d<l.size;++d){var p=l.indexToLoc(d),f=p.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,Xy(f))].concat(Xy(p)))}return"string"===a?R6(l.values):l.values}function Q7(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.size;R8(a,"slice");var s=Ky(K0(a,o,i),2),u=s[0],c=s[1];F0(a,u,c);var l=X7(n.data.get(a.dataId).values,u,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,l)}var Y7={kernelName:"Slice",backendName:"cpu",kernelFunc:Q7};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function $7(e,t,n,r,a,o,i){var s=t[0],u=o[0],c=new Array(u),l=new Array(s),d=t[1];if(0===u){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n         indices.shape[0] = ".concat(s));return[_$(n,0),[0,d],_$(a,0),c,l]}for(var p=!0,f=0,h=new Array(u).fill(0),m=0;m<s;++m){var g=e[m*d];if(g<0)throw new Error("indices(".concat(m,", 0) is invalid: ").concat(g," < 0"));if(g>=u)throw new Error("indices(".concat(m,", 0) is invalid: ").concat(g," >= ").concat(u));++h[g],p=p&&g>=f,f=g}for(var v=!0,y=0;y<u;++y){var b=0===h[y];c[y]=b,v=v&&!b,h[y]=Math.max(h[y],1),y>0&&(h[y]+=h[y-1])}if(v&&p){for(var x=e,k=r,w=0;w<s;++w)l[w]=w;return[x,[s,d],k,c,l]}for(var I=h[u-1],C=_$(n,I*d),S=_$(a,I),E=new Array(u).fill(0),T=0;T<s;++T){var N=e[T*d],A=E[N],_=(0===N?0:h[N-1])+A;E[N]++;for(var R=0;R<d;++R)C[_*d+R]=e[T*d+R];S[_]=r[T],l[T]=_}for(var O=0;O<u;++O)if(0===E[O]){var F=0===O?0:h[O-1];C[F*d+0]=O;for(var M=1;M<d;++M)C[F*d+M]=0;S[F]=i}return[C,[I,d],S,c,l]}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Z7(e,t,n,r,a){for(var o=x$(r),i=t[0],s=a.length,u=[],c=1,l=-1,d=0;d<s;++d){var p=a[d];if(-1===p){if(-1!==l)throw new Error("only one output dimension may be -1, not both ".concat(l," and ").concat(d));l=d,u.push(1)}else{if(p<0)throw new Error("size ".concat(d," must be non-negative, not ").concat(p));c*=p,u.push(p)}}if(-1!==l){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var f=Math.trunc(o/c);if(c*f!==o)throw new Error("Input to reshape is a SparseTensor with ".concat(o,"\n          dense values, but the requested shape requires a multiple of ").concat(c,". inputShape=").concat(r," outputShape= ").concat(u));u[l]=f}var h=x$(u);if(h!==o)throw new Error("Input to reshape is a tensor with ".concat(o," dense values, but the requested shape has ").concat(h,". inputShape=").concat(r," outputShape=").concat(u));var m=r.length,g=[];if(m>0){g[m-1]=1;for(var v=m-2;v>=0;--v)g[v]=g[v+1]*r[v+1]}var y=[];if(s>0){y[s-1]=1;for(var b=s-2;b>=0;--b)y[b]=y[b+1]*u[b+1]}for(var x=_$(n,i*s),k=0;k<i;++k){for(var w=0,I=0;I<m;++I)w+=e[k*m+I]*g[I];for(var C=0;C<s;++C)x[k*s+C]=Math.trunc(w/y[C]),w%=y[C]}return[x,[i,s],u]}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function J7(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length;if(s!==a.length)throw new Error("segmentIds and indices should have same size.");var u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0;if(l<0)throw new Error("segment ids must be >= 0");var d=t.slice();d[0]=l;var p=_$(n,d.reduce((function(e,t){return e*t}),1));if(0===s)return l>0&&p.fill(i),[p,d];if(l<=0)throw new Error("segment ids must be >= 0");for(var f=0,h=1,m=0,g=a[f];;){var v=0;if(h<s){if(g===(v=a[h])){++h;continue}if(g>=v)throw new Error("segment ids are not increasing")}if(g<0||g>=l)throw new Error("Segment id ".concat(g," out of range [0, ").concat(l,"), possibly because segmentIds input is not sorted."));g>m&&p.fill(i,m*c,g*c);for(var y=f;y<h;++y){var b=r[y];if(b<0||b>=u[0])throw new Error("Bad: indices[".concat(y,"] == ").concat(r[y]," out of range [0, ").concat(u[0],")"));for(var x=0;x<c;x++)p[g*c+x]+=e[b*c+x]}if(o)for(var k=0;k<c;k++)p[g*c+k]/=h-f;if(f=h,m=g+1,g=v,++h>s)break}return m<l&&p.fill(i,m*c,l*c),[p,d]
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var e9=M8((function(e,t){var n=e-t;return n*n})),t9={kernelName:"SquaredDifference",backendName:"cpu",kernelFunc:H8("SquaredDifference",e9)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function n9(e,t,n,r){for(var a=m0(e,t.dtype),o=0;o<a.size;o++){for(var i=a.indexToLoc(o),s=new Array(i.length),u=0;u<s.length;u++)s[u]=i[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat(Xy(i)))}return a}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var r9=function(){function e(t,n,r,a,o,i){_y(this,e),this.separator=YZ(t),this.nGramWidths=n,this.leftPad=YZ(r),this.rightPad=YZ(a),this.padWidth=o,this.preserveShort=i}return Oy(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,o){for(var i=this,s=function(s){var u=i.getPadWidth(o),c=Math.max(0,u-s),l=Math.max(0,u-(a-(s+1))),d=o-(c+l),p=t+(c>0?0:s-u),f=0;f+=c*i.leftPad.length;for(var h=0;h<d;++h)f+=e[p+h].length;f+=l*i.rightPad.length,f+=(c+l+d-1)*i.separator.length,n[r+s]=new Uint8Array(f);for(var m=n[r+s],g=0,v=function(e){return e.forEach((function(e){return m[g++]=e}))},y=0;y<c;++y)v(i.leftPad),v(i.separator);for(var b=0;b<d-1;++b)v(e[p+b]),v(i.separator);if(d>0){v(e[p+d-1]);for(var x=0;x<l;++x)v(i.separator),v(i.rightPad)}else{for(var k=0;k<l-1;++k)v(i.rightPad),v(i.separator);v(i.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var o=t[0];if(0!==o)throw new Error("First split value must be 0, got ".concat(o));for(var i=1;i<a;++i){var s=t[i]>=o;if(!(s=s&&t[i]<=r))throw new Error("Invalid split value ".concat(t[i],", must be in [").concat(o,", ").concat(r,"]"));o=t[i]}if(o!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(o))}var u=a-1,c=_$("int32",a);if(0===r||0===a){for(var l=new Array(r),d=0;d<=u;++d)c[d]=0;return[l,c]}c[0]=0;for(var p=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),c[e]=c[e-1]+a},f=1;f<=u;++f)p(f);for(var h=new Array(c[u]),m=function(r){var a=t[r],o=c[r];if(n.nGramWidths.forEach((function(i){var s=t[r+1]-t[r],u=n.getNumNGrams(s,i);n.createNGrams(e,a,h,o,u,i),o+=u})),n.preserveShort&&o===c[r]){var i=t[r+1]-t[r];if(0===i)return"continue";var s=i+2*n.padWidth;n.createNGrams(e,a,h,o,1,s)}},g=0;g<u;++g)m(g);return[h,c]}}]),e}();function a9(e,t,n,r,a,o,i,s){return new r9(n,r,a,o,i,s).compute(e,t)}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function o9(e,t,n){if(!e.length)return[];if(0===t.length){for(var r=new Array(e.length),a=0;a<e.length;++a)r[a]=e.subarray(a,a+1);return r}if(1===t.length){for(var o=t[0],i=[],s=e.indexOf(o);-1!==s;){var u=e.subarray(0,s);n&&0===u.length||i.push(u),s=(e=e.subarray(s+1)).indexOf(o)}return n&&0===e.length||i.push(e),i}for(var c=[],l=0,d=0;d<e.length+1;d++)if(d===e.length||-1!==t.indexOf(e[d])){var p=e.subarray(l,d);n&&0===p.length||c.push(p),l=d+1}return c}function i9(e,t,n){for(var r=e.length,a=[],o=0,i=0,s=new Array(r),u=0;u<r;++u){var c=o9(e[u],t,n),l=c.length;s[u]=l,o+=l,i=Math.max(i,l),a.push.apply(a,Xy(c))}for(var d=_$("int32",2*o),p=new Array(o),f=[r,i],h=0,m=0;m<r;++m)for(var g=0;g<s[m];++g)d[2*h]=m,d[2*h+1]=g,p[h]=a[h],++h;return[d,p,f]}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function s9(e,t){for(var n=_$("int32",e.length),r=0;r<e.length;++r)n[r]=qZ(e[r]).modulo(t).getLowBitsUnsigned();return n}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var u9=M8((function(e,t){return e-t})),c9=H8("Sub",u9,G8((function(e,t,n,r){return{real:e-n,imag:t-r}}))),l9={kernelName:"Sub",backendName:"cpu",kernelFunc:c9};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function d9(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=m0(n,e.dtype),o=0;o<a.values.length;++o){for(var i=a.indexToLoc(o),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=i[u]%e.shape[u];var c=e.locToIndex(s);a.values[o]=e.values[c]}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var p9=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function f9(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,i=Math.log(a),s=.5*Math.exp(2*i/3),u=.5*Math.sqrt(i*s*(a-s)/a)*Math.sign(o-a/2);f9(e,t,Math.max(n,Math.floor(t-o*s/a+u)),Math.min(r,Math.floor(t+(a-o)*s/a+u)))}var c=e[t],l=n,d=r;for(m$(e,n,t),p9(e[r],c)>0&&m$(e,n,r);l<d;){for(m$(e,l,d),l++,d--;p9(e[l],c)<0;)l+=1;for(;p9(e[d],c)>0;)d-=1}0===p9(e[n],c)?m$(e,n,d):m$(e,d+=1,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function h9(e,t,n,r,a){for(var o=t[t.length-1],i=e.length/o,s=o,u=A$(n,i*r),c=A$("int32",i*r),l=function(t){var n=t*s,o=e.subarray(n,n+s),i=new Array(o.length);o.forEach((function(e,t){return i[t]={value:e,index:t}})),r<i.length&&(f9(i,r),i=i.slice(0,r)),a&&i.sort(p9);for(var l=t*r,d=u.subarray(l,l+r),p=c.subarray(l,l+r),f=0;f<r;f++)d[f]=i[f].value,p[f]=i[f].index},d=0;d<i;d++)l(d);var p=t.slice();return p[p.length-1]=r,[m0(p,n,u),m0(p,"int32",c)]
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function m9(e,t,n,r){for(var a=T$(t,n)[0],o=[1,n[0],1],i=0;i<a;i++)o[0]*=n[i];o[1]=n[a];for(var s=a+1;s<n.length;s++)o[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new iJ(o,r,e),d=[],p=1===o[0]&&1===o[2],f=0;f<n[a];f++){var h=void 0;if(p)h=e[f].toString();else{for(var m=[],g=0;g<o[0];g++)for(var v=0;v<o[2];v++)m.push(l.get(g,f,v));h=m.join(",")}if(void 0!==u[h])c[f]=u[h];else{var y=Object.keys(u).length;u[h]=y,c[f]=y,d.push(f)}}var b=o.slice();b[1]=Object.keys(u).length;var x=new iJ(b,r);d.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)x.set(l.get(n,e,r),n,t,r)}));var k=n.slice();return k[a]=b[1],{outputValues:x.values,outputShape:k,indices:c}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var g9=Object.freeze({__proto__:null,simpleAbsImpl:O8,addImpl:q8,bincountImpl:Y8,bincountReduceImpl:$8,ceilImpl:t7,concatImpl:r7,equalImpl:a7,expImpl:s7,expm1Impl:l7,floorImpl:p7,gatherNdImpl:h7,gatherV2Impl:m7,greaterImpl:g7,greaterEqualImpl:y7,lessImpl:x7,lessEqualImpl:w7,linSpaceImpl:C7,logImpl:S7,maxImpl:T7,maximumImpl:N7,minimumImpl:_7,multiplyImpl:O7,negImpl:B7,notEqualImpl:L7,prodImpl:j7,rangeImpl:G7,rsqrtImpl:q7,sliceImpl:X7,sparseFillEmptyRowsImpl:$7,sparseReshapeImpl:Z7,sparseSegmentReductionImpl:J7,squaredDifferenceImpl:e9,stridedSliceImpl:n9,stringNGramsImpl:a9,stringSplitImpl:i9,stringToHashBucketFastImpl:s9,subImpl:u9,tileImpl:d9,topKImpl:h9,transposeImpl:V7,uniqueImpl:m9});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function v9(e){var t=e.inputs.x,n=e.attrs,r=n.begin,a=n.size,o=e.backend,i=Ky(K0(t,r,a),2),s=i[0],u=i[1],c=G0(t.shape,s,u),l=o.readSync(t.dataId),d=o.makeOutput(u,t.dtype),p=L$(t.shape),f=o.dataIdMap.get(d.dataId);if(c){var h=q0(s,p);return"string"===t.dtype?f.stringBytes=l.slice(h,h+x$(u)):o.typedArrayFromHeap(d).set(l.subarray(h,h+x$(u))),d}if("string"===t.dtype){var m=X7(l,s,u,t.shape,t.dtype);return f.stringBytes=m,d}var g=o.typedArrayFromHeap(d),v=t.shape.length;if(2===v)!function(e,t,n,r,a){for(var o=0,i=r[0],s=r[1],u=i+a[0],c=i;c<u;c++){var l=c*t+s;n.set(e.subarray(l,l+a[1]),o),o+=a[1]}}(l,p[0],g,s,u);else if(3===v)!function(e,t,n,r,a,o){for(var i=0,s=a[0],u=a[1],c=a[2],l=s+o[0],d=u+o[1],p=s;p<l;p++)for(var f=u;f<d;f++){var h=p*t+f*n+c;r.set(e.subarray(h,h+o[2]),i),i+=o[2]}}(l,p[0],p[1],g,s,u);else if(4===v)!function(e,t,n,r,a,o,i){for(var s=0,u=o[0],c=o[1],l=o[2],d=u+i[0],p=c+i[1],f=l+i[2],h=o[3],m=u;m<d;m++)for(var g=c;g<p;g++)for(var v=l;v<f;v++){var y=m*t+g*n+v*r+h;a.set(e.subarray(y,y+i[3]),s),s+=i[3]}}(l,p[0],p[1],p[2],g,s,u);else{var y=X7(l,s,u,t.shape,t.dtype);g.set(y)}return d}var y9={kernelName:"Slice",backendName:"wasm",kernelFunc:v9},b9={kernelName:"BatchToSpaceND",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops,s=o.reduce((function(e,t){return e*t})),u=a6(a.shape,o,s),c=o6(u.length,o.length),l=i6(a.shape,o,s),d=s6(i,o.length),p=u6(l,i,o.length),f=T8({inputs:{x:a},backend:n,attrs:{shape:u}}),h=g8({inputs:{x:f},backend:n,attrs:{perm:c}}),m=v9({inputs:{x:T8({inputs:{x:h},backend:n,attrs:{shape:l}})},backend:n,attrs:{begin:d,size:p}});return n.disposeData(f.dataId),n.disposeData(h.dataId),n.disposeData(f.dataId),m}};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function x9(e){var t=e.inputs.x,n=e.attrs.dtype,r=e.backend,a=r.makeOutput(t.shape,n),o=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(o),a}var k9,w9={kernelName:"Cast",backendName:"wasm",kernelFunc:x9},I9=s8("Ceil"),C9={kernelName:"ClipByValue",backendName:"wasm",setupFunc:function(e){k9=e.wasm.cwrap("ClipByValue",null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.clipValueMin,i=r.clipValueMax,s=n.dataIdMap.get(a.dataId).id,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(u.dataId).id;return k9(s,o,i,c),u}};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function S9(e){var t=e.inputs,n=e.backend,r=T$(e.attrs.axis,t[0].shape)[0],a=t6(t.map((function(e){return e.shape})),r),o=t.filter((function(e){return x$(e.shape)>0}));if(1===o.length)return f8({inputs:{x:o[0]},backend:n});var i=n.makeOutput(a,t[0].dtype);if(0===x$(a))return i;if(e6(o.map((function(e){return e.shape})),r),"string"===o[0].dtype){var s=o.map((function(e){var t=x$(e.shape.slice(r));return T8({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),u=s.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}}));a=t6(s.map((function(e){return e.shape})),1);var c=1===s[0].shape[0],l=r7(u,a,t[0].dtype,c),d=t6(o.map((function(e){return e.shape})),r);return i.shape=d,n.dataIdMap.get(i.dataId).stringBytes=R6(l),s.forEach((function(e){return n.disposeData(e.dataId)})),i}for(var p=x$(o[0].shape.slice(0,r)),f=0,h=o.map((function(e){var t=x$(e.shape.slice(r));return f+=t,t})),m=o.map((function(e){return n.typedArrayFromHeap(e)})),g=n.typedArrayFromHeap(i),v=0;v<p;v++)for(var y=v*f,b=0;b<m.length;b++){var x=h[b],k=v*x,w=m[b].subarray(k,k+x);g.set(w,y),y+=x}return i}var E9,T9,N9,A9,_9={kernelName:"Concat",backendName:"wasm",kernelFunc:S9},R9={kernelName:"Conv2D",backendName:"wasm",setupFunc:function(e){E9=e.wasm.cwrap("Conv2D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(o.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,p=_1(n.dataFormat),f=k1(a.shape,o.shape,u,c,l,d,!1,p),h=f.filterHeight,m=f.filterWidth,g=f.padInfo.top,v=f.padInfo.right,y=f.padInfo.bottom,b=f.padInfo.left,x=f.dilationHeight,k=f.dilationWidth,w=f.strideHeight,I=f.strideWidth,C=f.inChannels,S=f.outChannels,E="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'".concat(f.dataFormat,"'. Please use 'channelsLast'."));var T=r.makeOutput(f.outShape,"float32"),N=r.dataIdMap.get(T.dataId).id;return E9(i,a.shape[0],a.shape[1],a.shape[2],s,h,m,g,v,y,b,E,x,k,w,I,C,S,N),T}},O9={kernelName:"Conv2DBackpropInput",backendName:"wasm",setupFunc:function(e){T9=e.wasm.cwrap("Conv2DBackpropInput",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.dy,o=n.filter,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.inputShape,d=_1(u),p=k1(l,o.shape,i,1,s,c,!1,d),f=p.batchSize,h=p.filterHeight,m=p.filterWidth,g=p.inChannels,v=p.inHeight,y=p.inWidth,b=p.outChannels,x=p.outHeight,k=p.outWidth,w=p.strideHeight,I=p.strideWidth,C=h-1-p.padInfo.top,S=m-1-p.padInfo.left,E="channelsLast"===p.dataFormat,T=L$(p.inShape),N=L$(a.shape),A=Ky(L$(o.shape),3),_=A[0],R=A[1],O=A[2],F=T[0],M=E?T[1]:T[2],D=E?T[2]:1,B=E?1:T[1],P=N[0],L=E?N[1]:N[2],U=E?N[2]:1,V=E?1:N[1],W=t.makeOutput(p.inShape,"float32"),z=t.dataIdMap.get(W.dataId).id,j=t.dataIdMap.get(a.dataId).id,H=t.dataIdMap.get(o.dataId).id;return T9(j,H,f,h,m,v,y,g,x,k,b,w,I,C,S,_,R,O,F,M,D,B,P,L,U,V,z),W}},F9=s8("Cos"),M9=s8("Cosh");
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(N9||(N9={}));var D9,B9,P9,L9={kernelName:"CropAndResize",backendName:"wasm",setupFunc:function(e){A9=e.wasm.cwrap("CropAndResize",null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,o=a.method,i=a.extrapolationValue,s=a.cropSize,u=r.image,c=r.boxes,l=r.boxInd,d=c.shape[0],p=Ky(s,2),f=p[0],h=p[1],m=[d,f,h,u.shape[3]],g=n.dataIdMap.get(u.dataId);"float32"!==u.dtype&&(t=x9({backend:n,inputs:{x:u},attrs:{dtype:"float32"}}),g=n.dataIdMap.get(t.dataId));var v=g.id,y=n.dataIdMap.get(c.dataId).id,b=n.dataIdMap.get(l.dataId).id,x=n.makeOutput(m,"float32"),k=n.dataIdMap.get(x.dataId).id,w=new Uint8Array(new Int32Array(u.shape).buffer);return A9(v,y,b,d,w,f,h,N9[o],i,k),null!=t&&n.disposeData(t.dataId),x}},U9={kernelName:"Cumsum",backendName:"wasm",setupFunc:function(e){D9=e.wasm.cwrap("Cumsum",null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse,u=a.shape.length;g$("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumsum does not support ".concat(a.dtype," tensors in the WASM backend")}));var c=j2([o],u),l=a;null!==c&&(l=g8({inputs:{x:a},attrs:{perm:c},backend:n}));var d=G2(1,u)[0];z2("cumsum",[d],u);var p=n.makeOutput(l.shape,l.dtype),f=l.shape[d],h=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(p.dataId).id;D9(h,i?1:0,s?1:0,f,m,t8[a.dtype]);var g=p;return null!==c&&(g=g8({inputs:{x:p},attrs:{perm:H2(c)},backend:n}),n.disposeData(l.dataId),n.disposeData(p.dataId)),g}},V9={kernelName:"DepthToSpace",backendName:"wasm",setupFunc:function(e){B9=e.wasm.cwrap("DepthToSpace",null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,o=r.blockSize,i=r.dataFormat;g$(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));var s=a.shape[0],u="NHWC"===i?a.shape[1]:a.shape[2],c="NHWC"===i?a.shape[2]:a.shape[3],l="NHWC"===i?a.shape[3]:a.shape[1],d=u*o,p=c*o,f=l/(o*o),h="NHWC"===i?[s,d,p,f]:[s,f,d,p],m=t.makeOutput(h,"float32"),g=t.dataIdMap.get(a.dataId).id,v=new Uint8Array(new Int32Array(L$(a.shape)).buffer),y=new Uint8Array(new Int32Array(h).buffer),b=new Uint8Array(new Int32Array(L$(h)).buffer),x=t.dataIdMap.get(m.dataId).id;return B9(g,o,"NHWC"===i?1:0,v,a.shape.length-1,y,b,h.length,x),m}},W9={kernelName:"DepthwiseConv2dNative",backendName:"wasm",setupFunc:function(e){P9=e.wasm.cwrap("DepthwiseConv2dNative",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(o.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,p=null==c?[1,1]:c,f=k1(a.shape,o.shape,u,p,l,d,!0),h=f.filterHeight,m=f.filterWidth,g=f.padInfo.top,v=f.padInfo.right,y=f.padInfo.bottom,b=f.padInfo.left,x=f.dilationHeight,k=f.dilationWidth,w=f.strideHeight,I=f.strideWidth,C=f.inChannels,S=f.outChannels,E="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'".concat(f.dataFormat,"'. Please use 'channelsLast'."));var T=r.makeOutput(f.outShape,"float32"),N=r.dataIdMap.get(T.dataId).id;return P9(i,a.shape[0],a.shape[1],a.shape[2],s,h,m,g,v,y,b,E,x,k,w,I,C,S,N),T}},z9=c8("Equal",!1,"bool"),j9=s8("Exp");
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function H9(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.input,o=n.dim,i=a.shape.length,s=a.shape.slice(),u=o;return o<0&&(g$(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+o+1),s.splice(u,0,1),T8({inputs:{x:a},backend:r,attrs:{shape:s}})}var G9,q9,K9,X9,Q9,Y9,$9,Z9,J9,eee,tee,nee,ree,aee={kernelName:"ExpandDims",backendName:"wasm",kernelFunc:H9},oee={kernelName:"Fill",backendName:"wasm",kernelFunc:function(e){var t=e.attrs,n=t.shape,r=t.value,a=t.dtype,o=e.backend,i=o.makeOutput(n,a);return o.typedArrayFromHeap(i).fill(r),i}},iee={kernelName:"FlipLeftRight",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n.makeOutput(r.shape,r.dtype),o=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(a.dataId).id,s=Ky(r.shape,4),u=s[0],c=s[1],l=s[2],d=s[3];return G9(o,u,c,l,d,i),a},setupFunc:function(e){G9=e.wasm.cwrap("FlipLeftRight",null,["number","number","number","number","number","number"])}},see=s8("Floor"),uee=c8("FloorDiv",!1),cee={kernelName:"FusedBatchNorm",backendName:"wasm",setupFunc:function(e){q9=e.wasm.cwrap("FusedBatchNorm",null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.varianceEpsilon,a=n.x,o=n.mean,i=n.variance,s=n.offset,u=n.scale,c=t.dataIdMap.get(a.dataId).id,l=t.dataIdMap.get(o.dataId).id,d=t.dataIdMap.get(i.dataId).id,p=null!=s?t.dataIdMap.get(s.dataId).id:0,f=null!=u?t.dataIdMap.get(u.dataId).id:0,h=t.makeOutput(a.shape,a.dtype);if(0===x$(a.shape))return h;var m=t.dataIdMap.get(h.dataId).id;return q9(c,l,d,p,f,r,m),h}},lee={kernelName:"FusedConv2D",backendName:"wasm",setupFunc:function(e){K9=e.wasm.cwrap("FusedConv2D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,p=n.dimRoundingMode,f=n.activation,h=n.leakyreluAlpha,m=k1(a.shape,o.shape,u,l,c,p),g=n8[f];if(null==g)throw new Error("".concat(f," activation not yet supported for FusedConv2D in the wasm backend."));var v=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(o.dataId).id,b=m.outChannels,x=0;if(null!=i){var k=r.dataIdMap.get(i.dataId);if(1!==k.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got rank ".concat(k.shape.length,"."));if(k.shape[0]!==b)throw new Error("FusedConv2D bias shape (".concat(k.shape,") does not match the number of output channels (").concat(b,")"));x=k.id}var w=m.filterHeight,I=m.filterWidth,C=m.padInfo.top,S=m.padInfo.right,E=m.padInfo.bottom,T=m.padInfo.left,N=m.dilationHeight,A=m.dilationWidth,_=m.strideHeight,R=m.strideWidth,O=m.inChannels,F="SAME"===m.padInfo.type?1:0,M=m.batchSize,D=m.inHeight,B=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));var P=r.makeOutput(m.outShape,"float32"),L=r.dataIdMap.get(P.dataId).id,U=null==s?0:r.dataIdMap.get(s.dataId).id;return K9(v,M,D,B,y,w,I,x,C,S,E,T,F,N,A,_,R,O,b,g,U,h||0,L),P}},dee={kernelName:"FusedDepthwiseConv2D",backendName:"wasm",setupFunc:function(e){X9=e.wasm.cwrap("FusedDepthwiseConv2D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,p=n.dimRoundingMode,f=n.activation,h=n.leakyreluAlpha,m=k1(a.shape,o.shape,u,l,c,p,!0),g=n8[f];if(null==g)throw new Error("".concat(f," activation not yet supported for FusedDepthwiseConv2D in the wasm backend."));var v=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(o.dataId).id,b=m.outChannels,x=0;if(null!=i){var k=r.dataIdMap.get(i.dataId);if(1!==k.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got rank ".concat(k.shape.length,"."));if(k.shape[0]!==b)throw new Error("FusedDepthwiseConv2D bias shape (".concat(k.shape,") does not match the number of output channels (").concat(b,")"));x=k.id}var w=m.filterHeight,I=m.filterWidth,C=m.padInfo.top,S=m.padInfo.right,E=m.padInfo.bottom,T=m.padInfo.left,N=m.dilationHeight,A=m.dilationWidth,_=m.strideHeight,R=m.strideWidth,O=m.inChannels,F="SAME"===m.padInfo.type?1:0,M=m.batchSize,D=m.inHeight,B=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));var P=r.makeOutput(m.outShape,"float32"),L=r.dataIdMap.get(P.dataId).id,U=null==s?0:r.dataIdMap.get(s.dataId).id;return X9(v,M,D,B,y,w,I,x,C,S,E,T,F,N,A,_,R,O,b,g,U,h||0,L),P}},pee={kernelName:"GatherNd",backendName:"wasm",setupFunc:function(e){Q9=e.wasm.cwrap("GatherNd",null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.params,a=n.indices,o=Ky(A0(r,a),4),i=o[0],s=o[1],u=o[2],c=o[3],l=t.makeOutput(i,r.dtype);if(0===s)return l;var d=a.shape,p=d[d.length-1],f=t.dataIdMap.get(r.dataId).id,h=t.dataIdMap.get(a.dataId).id,m=new Uint8Array(new Int32Array(c).buffer),g=t.dataIdMap.get(l.dataId).id;return Q9(f,t8[r.dtype],h,s,p,u,m,g),l}},fee={kernelName:"GatherV2",backendName:"wasm",setupFunc:function(e){Y9=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,o=n.indices,i=r.axis,s=r.batchDims,u=N6(a,o,T$(i,a.shape)[0],s),c=T8({inputs:{x:a},attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]},backend:t}),l=x$(o.shape),d=T8({inputs:{x:o},attrs:{shape:[u.batchSize,l/u.batchSize]},backend:t}),p=[u.batchSize,u.outerSize,l/u.batchSize,u.sliceSize],f=t.makeOutput(p,a.dtype);if(0===x$(a.shape))return f;var h=c.shape.length-1,m=t.dataIdMap.get(c.dataId).id,g=t.dataIdMap.get(d.dataId).id,v=t.dataIdMap.get(f.dataId).id,y=new Uint8Array(new Int32Array(L$(c.shape)).buffer),b=new Uint8Array(new Int32Array(L$(p)).buffer);return Y9(m,t8[a.dtype],y,h,g,u.batchSize,b,v),t.disposeData(c.dataId),t.disposeData(d.dataId),f.shape=u.outputShape,f}},hee=c8("Greater",!1,"bool"),mee=c8("GreaterEqual",!1,"bool"),gee={kernelName:"LeakyRelu",backendName:"wasm",setupFunc:function(e){$9=e.wasm.cwrap("LeakyRelu",null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs.x,n=e.attrs.alpha,r=e.backend,a=r.dataIdMap.get(t.dataId).id,o=r.makeOutput(t.shape,t.dtype);if(0!==x$(t.shape)){var i=r.dataIdMap.get(o.dataId).id;$9(a,n,i)}return o}},vee=c8("Less",!1,"bool"),yee=c8("LessEqual",!1,"bool"),bee=s8("Log"),xee=c8("LogicalAnd",!1,"bool"),kee={kernelName:"Max",backendName:"wasm",setupFunc:function(e){Z9=e.wasm.cwrap("Max",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.reductionIndices,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=i,c=b8(i,a,t),l=c.transposed,d=c.axes,p=c.originalAxes,f=c.inputWasTransposed;f&&(u=l,s=t.dataIdMap.get(l.dataId).id),z2("max",d,u.shape.length);var h=Ky(V2(u.shape,d),2),m=h[0],g=x$(h[1]),v=t.makeOutput(m,i.dtype);if(0!==x$(u.shape)){var y=t.dataIdMap.get(v.dataId).id;Z9(s,g,y)}if(f&&t.disposeData(l.dataId),o){var b=W2(v.shape,p);v.shape=b}return v}},wee=c8("Maximum",!1),Iee={kernelName:"MaxPool",backendName:"wasm",setupFunc:function(e){J9=e.wasm.cwrap("MaxPool",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=r.dataIdMap.get(a.dataId).id,i=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=b1(a.shape,i,s,1,u,c),d=l.filterHeight,p=l.filterWidth,f=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,g=l.padInfo.left,v=l.dilationHeight,y=l.dilationWidth,b=l.strideHeight,x=l.strideWidth,k=l.inChannels,w=l.outChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(l.dataFormat,"'. Please use 'channelsLast'."));var I=r.makeOutput(l.outShape,"float32"),C=r.dataIdMap.get(I.dataId).id;return J9(o,a.shape[0],a.shape[1],a.shape[2],d,p,f,h,m,g,v,y,b,x,k,w,C),I}},Cee={kernelName:"Mean",backendName:"wasm",setupFunc:function(e){eee=e.wasm.cwrap("Mean",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=b8(i,a,t),d=l.transposed,p=l.axes,f=l.originalAxes,h=l.inputWasTransposed,m=p;if(h){var g=t.dataIdMap.get(d.dataId).id;g!==s&&(c=d,u=g,m=G2(m.length,c.shape.length))}z2("mean",m,c.shape.length);var v=Ky(V2(c.shape,m),2),y=v[0],b=x$(v[1]),x=c;"float32"!==c.dtype&&(x=x9({backend:t,inputs:{x:c},attrs:{dtype:"float32"}}),u=t.dataIdMap.get(x.dataId).id);var k=t.makeOutput(y,"float32");if(0!==x$(c.shape)){var w=t.dataIdMap.get(k.dataId).id;eee(u,b,w)}if(h&&t.disposeData(d.dataId),o){var I=W2(k.shape,f);k.shape=I}return"float32"!==c.dtype&&t.disposeData(x.dataId),k}},See={kernelName:"Min",backendName:"wasm",setupFunc:function(e){tee=e.wasm.cwrap("Min",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=b8(i,a,t),d=l.transposed,p=l.axes,f=l.originalAxes,h=l.inputWasTransposed;if(h){var m=t.dataIdMap.get(d.dataId).id;m!==s&&(c=d,u=m)}z2("min",p,c.shape.length);var g=Ky(V2(c.shape,p),2),v=g[0],y=x$(g[1]),b=t.makeOutput(v,c.dtype);if(0!==x$(c.shape)){var x=t.dataIdMap.get(b.dataId).id;tee(u,y,x)}if(h&&t.disposeData(d.dataId),o){var k=W2(b.shape,f);b.shape=k}return b}},Eee=c8("Minimum",!1);
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(nee||(nee={}));var Tee,Nee={kernelName:"MirrorPad",backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,o=r.mode,i=a.map((function(e,n){return e[0]+t.shape[n]+e[1]})),s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(i,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),p=a.map((function(e){return e[1]})),f=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(p).buffer);return ree(s,l,t.shape.length,t8[t.dtype],f,h,nee[o],c),u},setupFunc:function(e){ree=e.wasm.cwrap("MirrorPad",null,["number","array","number","number","array","array","number","number"])}},Aee=c8("Multiply",!0),_ee=s8("Neg");
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Ree(e,t){var n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],o=n[2],i=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:o,pValidOutputs:i}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
for(var Oee,Fee,Mee,Dee,Bee,Pee,Lee,Uee,Vee,Wee,zee,jee,Hee,Gee,qee,Kee,Xee,Qee,Yee,$ee={kernelName:"NonMaxSuppressionV3",backendName:"wasm",setupFunc:function(e){Tee=e.wasm.cwrap("NonMaxSuppressionV3","number",["number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,o=r.maxOutputSize,i=r.scoreThreshold,s=n.boxes,u=n.scores,c=t.dataIdMap.get(s.dataId).id,l=t.dataIdMap.get(u.dataId).id,d=Ree(t,Tee(c,l,o,a,i)),p=d.pSelectedIndices,f=d.selectedSize,h=d.pSelectedScores,m=d.pValidOutputs;return t.wasm._free(h),t.wasm._free(m),t.makeOutput([f],"int32",p)}},Zee={kernelName:"NonMaxSuppressionV4",backendName:"wasm",setupFunc:function(e){Oee=e.wasm.cwrap("NonMaxSuppressionV4","number",["number","number","number","number","number","bool"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,o=r.maxOutputSize,i=r.scoreThreshold,s=r.padToMaxOutputSize,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,p=Ree(t,Oee(l,d,o,a,i,s)),f=p.pSelectedIndices,h=p.selectedSize,m=p.pSelectedScores,g=p.pValidOutputs;return t.wasm._free(m),[t.makeOutput([h],"int32",f),t.makeOutput([],"int32",g)]}},Jee={kernelName:"NonMaxSuppressionV5",backendName:"wasm",setupFunc:function(e){Fee=e.wasm.cwrap("NonMaxSuppressionV5","number",["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,o=r.maxOutputSize,i=r.scoreThreshold,s=r.softNmsSigma,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,p=Ree(t,Fee(l,d,o,a,i,s)),f=p.pSelectedIndices,h=p.selectedSize,m=p.pSelectedScores,g=p.pValidOutputs;return t.wasm._free(g),[t.makeOutput([h],"int32",f),t.makeOutput([h],"float32",m)]}},ete=c8("NotEqual",!1,"bool"),tte={kernelName:"OneHot",backendName:"wasm",setupFunc:function(e){Mee=e.wasm.cwrap("OneHot",null,["number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue,u=n.makeOutput([].concat(Xy(a.shape),[o]),"int32"),c=n.dataIdMap.get(u.dataId).id,l=n.dataIdMap.get(a.dataId).id;return Mee(l,o,i,s,c),u}},nte={kernelName:"OnesLike",backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}},rte={kernelName:"Pack",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return H9({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){v$(a,e.shape,"All tensors passed to stack must have matching shapes"),g$(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=S9({inputs:t.map((function(e){var t=H9({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeData(e.dataId)})),s}},ate={kernelName:"PadV2",backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,o=r.constantValue,i=a.map((function(e,n){return e[0]+t.shape[n]+e[1]})),s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(i,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),p=a.map((function(e){return e[1]})),f=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(p).buffer);return Dee(s,l,t.shape.length,t8[t.dtype],f,h,o,c),u},setupFunc:function(e){Dee=e.wasm.cwrap("PadV2",null,["number","array","number","number","array","array","number","number"])}},ote=c8("Pow",!1),ite={kernelName:"Prelu",backendName:"wasm",setupFunc:function(e){Bee=e.wasm.cwrap("Prelu",null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(a.dataId).id,s=n.makeOutput(r.shape,"float32"),u=n.dataIdMap.get(s.dataId).id;return Bee(o,i,u),s}},ste={kernelName:"Prod",backendName:"wasm",setupFunc:function(e){Pee=e.wasm.cwrap("Prod",null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=b8(i,a,t),d=l.transposed,p=l.axes,f=l.originalAxes,h=l.inputWasTransposed,m=p;if(h){var g=t.dataIdMap.get(d.dataId).id;g!==s&&(c=d,u=g,m=G2(m.length,c.shape.length))}z2("prod",m,c.shape.length);var v=Ky(V2(c.shape,m),2),y=v[0],b=x$(v[1]),x=t.makeOutput(y,c.dtype);if(0!==x$(c.shape)){var k=t.dataIdMap.get(x.dataId).id;Pee(u,b,t8[x.dtype],k)}if(h&&t.disposeData(d.dataId),o){var w=W2(x.shape,f);x.shape=w}return x}},ute={kernelName:"Range",backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,s=G7(r,a,o,i),u=t.makeOutput([s.length],i);return t.typedArrayFromHeap(u).set(s),u}},cte=c8("RealDiv",!0),lte=s8("Relu"),dte=s8("Relu6"),pte={kernelName:"ResizeBilinear",backendName:"wasm",setupFunc:function(e){Lee=e.wasm.cwrap("ResizeBilinear",null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,o=r.images,i=a.alignCorners,s=a.halfPixelCenters,u=Ky(a.size,2),c=u[0],l=u[1],d=Ky(o.shape,4),p=d[0],f=d[1],h=d[2],m=d[3],g=[p,c,l,m],v=n.dataIdMap.get(o.dataId);"float32"!==v.dtype&&(t=x9({backend:n,inputs:{x:o},attrs:{dtype:"float32"}}),v=n.dataIdMap.get(t.dataId));var y=v.id,b=n.makeOutput(g,"float32");if(0===x$(o.shape))return b;var x=n.dataIdMap.get(b.dataId).id;return Lee(y,p,f,h,m,c,l,i?1:0,s?1:0,x),null!=t&&n.disposeData(t.dataId),b}},fte={kernelName:"Reverse",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=T$(r.dims,a.shape);if(0===a.shape.length)return f8({inputs:{x:a},backend:n});var i=n.makeOutput(a.shape,a.dtype),s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(i.dataId).id,c=new Uint8Array(new Int32Array(o).buffer),l=new Uint8Array(new Int32Array(a.shape).buffer);Uee(s,c,o.length,l,a.shape.length,u);var d=T8({inputs:{x:i},attrs:{shape:a.shape},backend:n});return n.disposeData(i.dataId),d},setupFunc:function(e){Uee=e.wasm.cwrap("Reverse",null,["number","array","number","array","number","number"])}},hte={kernelName:"RotateWithOffset",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=r.radians,i=r.fillValue,s=r.center,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(a.dataId).id,l=n.dataIdMap.get(u.dataId).id,d=Ky(a.shape,4),p=d[0],f=d[1],h=d[2],m=d[3],g=Ky(r6(s,f,h),2),v=g[0],y=g[1],b="number"==typeof i?[i,i,i,0===i?0:255]:[].concat(Xy(i),[255]),x=new Uint8Array(new Int32Array(b).buffer);return Vee(c,p,f,h,m,o,v,y,x,b.length,l),u},setupFunc:function(e){Vee=e.wasm.cwrap("RotateWithOffset",null,["number","number","number","number","number","number","number","number","array","number","number"])}},mte=s8("Round"),gte=s8("Rsqrt"),vte={kernelName:"ScatterNd",backendName:"wasm",setupFunc:function(e){Wee=e.wasm.cwrap("ScatterNd",null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.indices,o=n.updates,i=r.shape,s=t.makeOutput(i,o.dtype);if(0===x$(i))return s;var u=O0(0,a,i),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,p=u.strides,f=u.outputSize,h=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(o.dataId).id,g=new Uint8Array(new Int32Array(p).buffer),v=t.dataIdMap.get(s.dataId).id;return Wee(h,m,t8[o.dtype],c,l,d,g,f,v),s}},yte={kernelName:"Select",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(o.dataId).id,c=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(c.dataId).id,d=r.shape.length,p=a.shape.length,f=0===d||d>1||1===p?1:x$(a.shape.slice(1));return zee(i,s,u,f,l),c},setupFunc:function(e){zee=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},bte={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){jee=e.wasm.cwrap("Sigmoid",null,["number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.x,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),o=t.dataIdMap.get(a.dataId).id;return 0===x$(a.shape)||jee(r,o),a}},xte=s8("Sin"),kte={kernelName:"Softmax",backendName:"wasm",setupFunc:function(e){Hee=e.wasm.cwrap("Softmax",null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.logits,r=e.attrs.dim,a=t.dataIdMap.get(n.dataId).id,o=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(o.dataId).id,s=n.shape[r],u=x$(n.shape)/s;return 0===x$(o.shape)||Hee(a,i,s,u),o}},wte={kernelName:"SpaceToBatchND",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings,s=x$(o),u=[[0,0]];u.push.apply(u,Xy(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=ate.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=a6(l.shape,o,s,!1),p=o6(d.length,o.length,!1),f=i6(l.shape,o,s,!1),h=T8({inputs:{x:l},backend:n,attrs:{shape:d}}),m=g8({inputs:{x:h},backend:n,attrs:{perm:p}}),g=T8({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeData(l.dataId),n.disposeData(h.dataId),n.disposeData(m.dataId),g}},Ite={kernelName:"SplitV",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.numOrSizeSplits,i=T$(n.axis,a.shape)[0],s=S6(a,o,i),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=Xy(c);t[i]=e;var n=v9({inputs:{x:a},attrs:{begin:u,size:t},backend:r});return u[i]+=e,n}))}},Cte=s8("Sqrt"),Ste=s8("Square"),Ete=c8("SquaredDifference",!0),Tte={kernelName:"Step",backendName:"wasm",setupFunc:function(e){Gee=e.wasm.cwrap("Step",null,["number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.alpha,a=n.x,o=t.dataIdMap.get(a.dataId).id,i=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(i.dataId).id;return Gee(o,r,s),i}},Nte={kernelName:"StridedSlice",backendName:"wasm",setupFunc:function(e){qee=e.wasm.cwrap("StridedSlice",null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,o=r.begin,i=r.end,s=r.strides;null==s&&(s=new Array(o.length));var u=r.beginMask,c=r.endMask,l=r.ellipsisMask,d=r.newAxisMask,p=r.shrinkAxisMask,f=M0(l);if(f.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==l&&0!==d)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==l&&0!==p)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var h=a.shape.length-o.length,m=M0(d),g=a.shape.slice();m.forEach((function(e){o[e]=0,i[e]=1,g.splice(e,0,1)}));var v=T8({inputs:{x:a},attrs:{shape:g},backend:t}),y=U0(v.shape,f,h,o,i,s,u,c,l),b=y.begin,x=y.end,k=y.strides;o=b,i=x,s=k;var w=M0(p);w.forEach((function(e){i[e]=o[e]+1,s[e]=1}));var I=D0(o,i,s),C=I.filter((function(e,t){return-1===w.indexOf(t)}));if(s.every((function(e){return 1===e}))){var S=v9({inputs:{x:v},attrs:{begin:o,size:I},backend:t});t.disposeData(v.dataId);var E=T8({inputs:{x:S},attrs:{shape:C},backend:t});return t.disposeData(S.dataId),E}var T=t.makeOutput(C,"float32");if(!C.some((function(e){return 0===e}))){var N=t.dataIdMap.get(v.dataId).id,A=new Uint8Array(new Int32Array(L$(v.shape)).buffer),_=new Uint8Array(new Int32Array(o).buffer),R=new Uint8Array(new Int32Array(i).buffer),O=new Uint8Array(new Int32Array(s).buffer),F=new Uint8Array(new Int32Array(C).buffer),M=new Uint8Array(new Int32Array(L$(C)).buffer),D=t.dataIdMap.get(T.dataId).id;qee(N,A,v.shape.length,_,R,O,F,M,C.length,D)}t.disposeData(v.dataId);var B=T8({inputs:{x:T},attrs:{shape:C},backend:t});return t.disposeData(T.dataId),B}},Ate=c8("Sub",!0),_te={kernelName:"Sum",backendName:"wasm",setupFunc:function(e){Kee=e.wasm.cwrap("Sum",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,o=r.keepDims,i=n.x,s=t.dataIdMap.get(i.dataId).id,u=s,c=i,l=b8(i,a,t),d=l.transposed,p=l.axes,f=l.originalAxes,h=l.inputWasTransposed,m=p;if(h){var g=t.dataIdMap.get(d.dataId).id;g!==s&&(c=d,u=g,m=G2(m.length,c.shape.length))}z2("sum",m,c.shape.length);var v=Ky(V2(c.shape,m),2),y=v[0],b=x$(v[1]),x=t.makeOutput(y,c.dtype);if(0!==x$(c.shape)){var k=t.dataIdMap.get(x.dataId).id;Kee(u,b,k)}if(h&&t.disposeData(d.dataId),o){var w=W2(x.shape,f);x.shape=w}return x}},Rte=s8("Tan"),Ote=s8("Tanh"),Fte=[u8,d8,p8,I8,C8,S8,E8,_8,b9,w9,I9,C9,_9,R9,O9,F9,M9,L9,U9,V9,W9,z9,j9,aee,oee,iee,see,uee,i8,cee,lee,dee,pee,fee,hee,mee,m8,gee,vee,yee,bee,xee,kee,wee,Iee,Cee,See,Eee,Nee,Aee,_ee,$ee,Zee,Jee,ete,tte,nte,rte,ate,ote,ite,ste,ute,cte,lte,dte,A8,pte,fte,hte,gte,mte,vte,yte,bte,xte,y9,kte,wte,Ite,Cte,Ste,Ete,Tte,Nte,Ate,_te,Rte,Ote,{kernelName:"Tile",backendName:"wasm",setupFunc:function(e){Xee=e.wasm.cwrap("Tile",null,["number","array","number","array","number","number"])},kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=n.dataIdMap.get(a.dataId).id,i=r.reps,s=new Array(a.shape.length),u=0;u<s.length;u++)s[u]=a.shape[u]*i[u];var c=new Uint8Array(new Int32Array(a.shape).buffer),l=new Uint8Array(new Int32Array(s).buffer),d=n.makeOutput(s,a.dtype),p=n.dataIdMap.get(d.dataId).id;return Xee(o,c,a.shape.length,l,s.length,t8[d.dtype],p),d}},{kernelName:"TopK",backendName:"wasm",setupFunc:function(e){Qee=e.wasm.cwrap("TopK",null,["number","array","number","number","number","bool","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted,s=n.dataIdMap.get(a.dataId).id,u=new Uint8Array(new Int32Array(a.shape).buffer),c=a.shape.slice();c[c.length-1]=o;var l=n.makeOutput(c,a.dtype),d=n.dataIdMap.get(l.dataId).id,p=n.makeOutput(c,"int32"),f=n.dataIdMap.get(p.dataId).id;return Qee(s,u,a.shape.length,t8[a.dtype],o,i,d,f),[l,p]}},{kernelName:"Transform",backendName:"wasm",setupFunc:function(e){Yee=e.wasm.cwrap("Transform",null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,o=r.image,i=r.transforms,s=a.interpolation,u=a.fillMode,c=a.fillValue,l=a.outputShape,d=Ky(o.shape,4),p=d[0],f=d[1],h=d[2],m=d[3],g=Ky(null!=l?l:[f,h],2),v=g[0],y=g[1],b=[p,v,y,m],x=new Uint8Array(new Int32Array(L$(o.shape)).buffer),k=n.makeOutput(b,o.dtype),w=n.dataIdMap.get(k.dataId).id,I=n.dataIdMap.get(o.dataId).id,C=n.dataIdMap.get(i.dataId).id,S="nearest"===s?1:2;switch(u){case"constant":t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4;break;default:t=1}return Yee(I,C,i.shape[0]>1,p,v,y,m,h,f,x,o.shape.length-1,S,t,c,w),k}},y8,{kernelName:"Unpack",backendName:"wasm",kernelFunc:
/**
	   * @license
	   * Copyright 2019 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape[o],s=a.shape.length,u=new Array(s-1),c=0,l=0;l<s;l++)l!==o&&(u[c++]=a.shape[l]);var d=new Array(i),p=new Array(s).fill(0),f=a.shape.slice();f[o]=1;for(var h=0;h<d.length;h++)p[o]=h,d[h]=v9({inputs:{x:a},attrs:{begin:p,size:f},backend:n});return d.map((function(e){return{dataId:e.dataId,dtype:e.dtype,shape:u}}))}},{kernelName:"ZerosLike",backendName:"wasm",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}}],Mte=0,Dte=Fte
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */;Mte<Dte.length;Mte++){var Bte=Dte[Mte];sZ(Bte)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Pte=Y$();function Lte(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}Pte.registerFlag("WASM_HAS_SIMD_SUPPORT",Ay(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])));case 1:case"end":return e.stop()}}),e)})))),Pte.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",Ay(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pte.get("IS_NODE")){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.abrupt("return",((new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))));case 6:return e.prev=6,e.t0=e.catch(2),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[2,6]])}))));var Ute=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Vte=function(e){return Ute.exec(e).slice(1)};function Wte(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,t="/"===r.charAt(0))}return(t?"/":"")+(e=Lte(Yte(e.split("/"),(function(e){return!!e})),!t).join("/"))||"."}function zte(e){var t=jte(e),n="/"===Zte(e,-1);return(e=Lte(Yte(e.split("/"),(function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function jte(e){return"/"===e.charAt(0)}function Hte(){var e=Array.prototype.slice.call(arguments,0);return zte(Yte(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))}function Gte(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=Wte(e).substr(1),t=Wte(t).substr(1);for(var r=n(e.split("/")),a=n(t.split("/")),o=Math.min(r.length,a.length),i=o,s=0;s<o;s++)if(r[s]!==a[s]){i=s;break}var u=[];for(s=i;s<r.length;s++)u.push("..");return(u=u.concat(a.slice(i))).join("/")}function qte(e){var t=Vte(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."}function Kte(e,t){var n=Vte(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}function Xte(e){return Vte(e)[3]}var Qte={extname:Xte,basename:Kte,dirname:qte,sep:"/",delimiter:":",relative:Gte,join:Hte,isAbsolute:jte,normalize:zte,resolve:Wte};function Yte(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var $te,Zte="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)},Jte=Object.freeze({__proto__:null,resolve:Wte,normalize:zte,isAbsolute:jte,join:Hte,relative:Gte,sep:"/",delimiter:":",dirname:qte,basename:Kte,extname:Xte,default:Qte}),ene=Object.freeze({__proto__:null,default:{}});function tne(){if(void 0===$te){var e=new ArrayBuffer(2),t=new Uint8Array(e),n=new Uint16Array(e);if(t[0]=1,t[1]=2,258===n[0])$te="BE";else{if(513!==n[0])throw new Error("unable to figure out endianess");$te="LE"}}return $te}function nne(){return void 0!==global.location?global.location.hostname:""}function rne(){return[]}function ane(){return 0}function one(){return Number.MAX_VALUE}function ine(){return Number.MAX_VALUE}function sne(){return[]}function une(){return"Browser"}function cne(){return void 0!==global.navigator?global.navigator.appVersion:""}function lne(){}function dne(){}function pne(){return"/tmp"}var fne=pne,hne={EOL:"\n",tmpdir:fne,tmpDir:pne,networkInterfaces:lne,getNetworkInterfaces:dne,release:cne,type:une,cpus:sne,totalmem:ine,freemem:one,uptime:ane,loadavg:rne,hostname:nne,endianness:tne},mne=Object.freeze({__proto__:null,endianness:tne,hostname:nne,loadavg:rne,uptime:ane,freemem:one,totalmem:ine,cpus:sne,type:une,release:cne,networkInterfaces:lne,getNetworkInterfaces:dne,arch:function(){return"javascript"},platform:function(){return"browser"},tmpDir:pne,tmpdir:fne,EOL:"\n",default:hne}),gne=GQ(Jte),vne=GQ(ene),yne=GQ(mne),bne=HQ((function(e,t){var n,r=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(n=n||__filename),function(e){function t(){return A.buffer!=O&&K(A.buffer),F}function r(){return A.buffer!=O&&K(A.buffer),M}function a(){return A.buffer!=O&&K(A.buffer),D}function o(){return A.buffer!=O&&K(A.buffer),B}function i(){return A.buffer!=O&&K(A.buffer),P}var s,u,c=void 0!==(e=e||{})?e:{};c.ready=new Promise((function(e,t){s=e,u=t}));var l,d={};for(l in c)c.hasOwnProperty(l)&&(d[l]=c[l]);var p,f,h,m,g=function(e,t){throw t};p="object"==("undefined"==typeof window?"undefined":Ty(window)),f="function"==typeof importScripts,h="object"==("undefined"==typeof process?"undefined":Ty(process))&&"object"==Ty(process.versions)&&"string"==typeof process.versions.node,m=!p&&!h&&!f;var v=c.ENVIRONMENT_IS_PTHREAD||!1;v&&(O=c.buffer);var y,b,x,k,w,I="";function C(e){return c.locateFile?c.locateFile(e,I):I+e}if(h){var S;I=f?gne.dirname(I)+"/":__dirname+"/",y=function(e,t){return k||(k=k3),w||(w=gne),e=w.normalize(e),k.readFileSync(e,t?null:"utf8")},x=function(e){var t=y(e,!0);return t.buffer||(t=new Uint8Array(t)),U(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof lt))throw e})),process.on("unhandledRejection",oe),g=function(e){process.exit(e)},c.inspect=function(){return"[Emscripten Module object]"};try{S=vne}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}zQ.Worker=S.Worker}else m?("undefined"!=typeof read&&(y=function(e){return read(e)}),x=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(U("object"==Ty(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"function"==typeof quit&&(g=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(p||f)&&(f?I=self.location.href:"undefined"!=typeof document&&document.currentScript&&(I=document.currentScript.src),void 0!==n&&n&&(I=n),I=0!==I.indexOf("blob:")?I.substr(0,I.lastIndexOf("/")+1):"",h?(y=function(e,t){return k||(k=k3),w||(w=gne),e=w.normalize(e),k.readFileSync(e,t?null:"utf8")},x=function(e){var t=y(e,!0);return t.buffer||(t=new Uint8Array(t)),U(t.buffer),t}):(y=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},f&&(x=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),b=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}));h&&"undefined"==typeof performance&&(zQ.performance=vne.performance);var E,T=c.print||console.log.bind(console),N=c.printErr||console.warn.bind(console);for(l in d)d.hasOwnProperty(l)&&(c[l]=d[l]);d=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&(g=c.quit),c.wasmBinary&&(E=c.wasmBinary);var A,_,R=c.noExitRuntime||!0;"object"!=("undefined"==typeof WebAssembly?"undefined":Ty(WebAssembly))&&oe("no native wasm support detected");var O,F,M,D,B,P,L=!1;function U(e,t){e||oe("Assertion failed: "+t)}function V(e){var t=c["_"+e];return U(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function W(e,t,n,r,a){var o={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);H(e,t=ot(n),n)}return t},array:function(e){var t=ot(e.length);return G(e,t),t}},i=V(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=o[n[c]];l?(0===u&&(u=rt()),s[c]=l(r[c])):s[c]=r[c]}var d=i.apply(null,s);return d=function(e){return"string"===t?j(e):"boolean"===t?Boolean(e):e}(d),0!==u&&at(u),d}function z(e,t,n){for(var r=t+n,a="";!(t>=r);){var o=e[t++];if(!o)return a;if(128&o){var i=63&e[t++];if(192!=(224&o)){var s=63&e[t++];if((o=224==(240&o)?(15&o)<<12|i<<6|s:(7&o)<<18|i<<12|s<<6|63&e[t++])<65536)a+=String.fromCharCode(o);else{var u=o-65536;a+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else a+=String.fromCharCode((31&o)<<6|i)}else a+=String.fromCharCode(o)}return a}function j(e,t){return e?z(r(),e,t):""}function H(e,t,n){return function(e,t,n,r){if(!(r>0))return 0;for(var a=n,o=n+r-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-a}(e,r(),t,n)}function G(e,n){t().set(e,n)}function q(e,t){return e%t>0&&(e+=t-e%t),e}function K(e){O=e,c.HEAP8=F=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=D=new Int32Array(e),c.HEAPU8=M=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=B=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=P=new Float64Array(e)}var X,Q=c.INITIAL_MEMORY||16777216;if(v)A=c.wasmMemory,O=c.buffer;else if(c.wasmMemory)A=c.wasmMemory;else if(!((A=new WebAssembly.Memory({initial:Q/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw N("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),h&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");A&&(O=A.buffer),Q=O.byteLength,K(O);var Y=[],$=[],Z=[],J=[];function ee(){v||pe($)}function te(e){Y.unshift(e)}function ne(e){J.unshift(e)}v||$.push({func:function(){je()}});var re=0,ae=null;function oe(e){c.onAbort&&c.onAbort(e),v&&console.error("Pthread aborting at "+(new Error).stack),N(e+=""),L=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw u(t),t}function ie(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}c.preloadedImages={},c.preloadedAudios={};function se(e){return ie(e,"data:application/octet-stream;base64,")}function ue(e){return ie(e,"file://")}var ce="tfjs-backend-wasm-threaded-simd.wasm";function le(e){try{if(e==ce&&E)return new Uint8Array(E);if(x)return x(e);throw"both async and sync fetching of the wasm failed"}catch(e){oe(e)}}se(ce)||(ce=C(ce));var de={9832:function(){throw"Canceled!"},9850:function(e,t){setTimeout((function(){Ze(e,t)}),0)}};function pe(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?X.get(n)():X.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(c)}}function fe(e,n){if(e<=0||e>t().length||!0&e||n<0)return-28;if(0==n)return 0;n>=2147483647&&(n=1/0);var r=Atomics.load(a(),ct>>2),o=0;if(r==e&&Atomics.compareExchange(a(),ct>>2,r,0)==r&&(o=1,--n<=0))return 1;var i=Atomics.notify(a(),e>>2,n);if(i>=0)return i+o;throw"Atomics.notify returned an unexpected value "+i}function he(e){if(v)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in killThread!";a()[e+12>>2]=0;var t=ve.pthreads[e];t.worker.terminate(),ve.freeThreadData(t),ve.runningWorkers.splice(ve.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}function me(e){if(v)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";var t=ve.pthreads[e];if(t){a()[e+12>>2]=0;var n=t.worker;ve.returnWorkerToPool(n)}}c._emscripten_futex_wake=fe;var ge,ve={unusedWorkers:[],runningWorkers:[],initMainThreadBlock:function(){for(var e=Math.min(4,Math.max(1,(navigator.hardwareConcurrency||1)/2)),t=0;t<e;++t)ve.allocateUnusedWorker()},initRuntime:function(){for(var e=He(228),t=0;t<57;++t)o()[e/4+t]=0;a()[e+12>>2]=e;var n=e+152;a()[n>>2]=n;var r=He(512);for(t=0;t<128;++t)o()[r/4+t]=0;Atomics.store(o(),e+100>>2,r),Atomics.store(o(),e+40>>2,e),nt(e,!f,1),$e(e)},initWorker:function(){},pthreads:{},threadExitHandlers:[],setThreadStatus:function(){},runExitHandlers:function(){for(;ve.threadExitHandlers.length>0;)ve.threadExitHandlers.pop()();v&&Xe()&&Qe()},runExitHandlersAndDeinitThread:function(e,t){Atomics.store(o(),e+56>>2,1),Atomics.store(o(),e+60>>2,0),ve.runExitHandlers(),Atomics.store(o(),e+4>>2,t),Atomics.store(o(),e+0>>2,1),fe(e+0,2147483647),nt(0,0,0)},threadExit:function(e){var t=Xe();t&&(ve.runExitHandlersAndDeinitThread(t,e),v&&postMessage({cmd:"exit"}))},threadCancel:function(){ve.runExitHandlersAndDeinitThread(Xe(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in ve.pthreads)(r=ve.pthreads[e])&&r.worker&&ve.returnWorkerToPool(r.worker);ve.pthreads={};for(var t=0;t<ve.unusedWorkers.length;++t)(n=ve.unusedWorkers[t]).terminate();for(ve.unusedWorkers=[],t=0;t<ve.runningWorkers.length;++t){var n,r=(n=ve.runningWorkers[t]).pthread;ve.freeThreadData(r),n.terminate()}ve.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var t=a()[e.threadInfoStruct+100>>2];a()[e.threadInfoStruct+100>>2]=0,Ge(t),Ge(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&Ge(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){ve.runWithoutMainThreadQueuedCalls((function(){delete ve.pthreads[e.pthread.threadInfoStruct],ve.unusedWorkers.push(e),ve.runningWorkers.splice(ve.runningWorkers.indexOf(e),1),ve.freeThreadData(e.pthread),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){a()[ut>>2]=0;try{e()}finally{a()[ut>>2]=1}},receiveObjectTransfer:function(e){},loadWasmModuleToWorker:function(e,t){e.onmessage=function(n){var r=n.data,a=r.cmd;if(e.pthread&&(ve.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),r.targetThread&&r.targetThread!=Xe()){var i=ve.pthreads[r.targetThread];return i?i.worker.postMessage(n.data,r.transferList):console.error('Internal error! Worker sent a message "'+a+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(ve.currentProxiedOperationCallerThread=void 0)}if("processQueuedMainThreadWork"===a)Ye();else if("spawnThread"===a)Le(n.data);else if("cleanupThread"===a)me(r.thread);else if("killThread"===a)he(r.thread);else if("cancelThread"===a)!function(e){if(v)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cancelThread!";ve.pthreads[e].worker.postMessage({cmd:"cancel"})}(r.thread);else if("loaded"===a)e.loaded=!0,t&&t(e),e.runPthread&&(e.runPthread(),delete e.runPthread);else if("print"===a)T("Thread "+r.threadId+": "+r.text);else if("printErr"===a)N("Thread "+r.threadId+": "+r.text);else if("alert"===a)alert("Thread "+r.threadId+": "+r.text);else if("exit"===a)e.pthread&&Atomics.load(o(),e.pthread.threadInfoStruct+64>>2)&&ve.returnWorkerToPool(e);else if("exitProcess"===a)try{!function(e,t){if(!t||!R||0!==e){if(!t&&v)throw postMessage({cmd:"exitProcess",returnCode:e}),new lt(e);R||(ve.terminateAllThreads(),c.onExit&&c.onExit(e),L=!0),g(e,new lt(e))}}(r.returnCode)}catch(n){if(n instanceof lt)return;throw n}else"cancelDone"===a?ve.returnWorkerToPool(e):"objectTransfer"===a?ve.receiveObjectTransfer(n.data):"setimmediate"===n.data.target?e.postMessage(n.data):N("worker sent an unknown command "+a);ve.currentProxiedOperationCallerThread=void 0},e.onerror=function(e){N("pthread sent an error! "+e.filename+":"+e.lineno+": "+e.message)},h&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("exit",(function(e){}))),e.postMessage({cmd:"load",urlOrBlob:c.mainScriptUrlOrBlob||n,wasmMemory:A,wasmModule:_})},allocateUnusedWorker:function(){var e=C("tfjs-backend-wasm-threaded-simd.worker.js");ve.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==ve.unusedWorkers.length&&(ve.allocateUnusedWorker(),ve.loadWasmModuleToWorker(ve.unusedWorkers[0])),ve.unusedWorkers.length>0?ve.unusedWorkers.pop():null},busySpinWait:function(e){for(var t=performance.now()+e;performance.now()<t;);}};function ye(e,t){for(var n=arguments.length-2,r=rt(),a=n,o=ot(8*a),s=o>>3,u=0;u<n;u++){var c=arguments[2+u];i()[s+u]=c}var l=et(e,a,o,t);return at(r),l}c.establishStackSpace=function(e,t){it(e,t),at(e)},c.getNoExitRuntime=function(){return R},c.invokeEntryPoint=function(e,t){return X.get(e)(t)},ge=h?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:v?function(){return performance.now()-c.__performance_now_clock_drift}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var be=[],xe=[];function ke(e,t){var n;for(xe.length=0,t>>=2;n=r()[e++];){var o=n<105;o&&1&t&&t++,xe.push(o?i()[t++>>1]:a()[t]),++t}return xe}function we(){return r().length}function Ie(e){try{return A.grow(e-O.byteLength+65535>>>16),K(A.buffer),1}catch(e){}}var Ce={inEventHandler:0,removeAllEventListeners:function(){for(var e=Ce.eventHandlers.length-1;e>=0;--e)Ce._removeHandler(e);Ce.eventHandlers=[],Ce.deferredCalls=[]},registerRemoveEventListeners:function(){Ce.removeEventListenersRegistered||(Ce.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var a in Ce.deferredCalls){var o=Ce.deferredCalls[a];if(o.targetFunction==e&&r(o.argsList,n))return}Ce.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),Ce.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<Ce.deferredCalls.length;++t)Ce.deferredCalls[t].targetFunction==e&&(Ce.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return Ce.inEventHandler&&Ce.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Ce.canPerformEventHandlerRequests())for(var e=0;e<Ce.deferredCalls.length;++e){var t=Ce.deferredCalls[e];Ce.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<Ce.eventHandlers.length;++n)Ce.eventHandlers[n].target!=e||t&&t!=Ce.eventHandlers[n].eventTypeString||Ce._removeHandler(n--)},_removeHandler:function(e){var t=Ce.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),Ce.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++Ce.inEventHandler,Ce.currentEventHandler=e,Ce.runDeferredCalls(),e.handlerFunc(t),Ce.runDeferredCalls(),--Ce.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),Ce.eventHandlers.push(e),Ce.registerRemoveEventListeners();else for(var n=0;n<Ce.eventHandlers.length;++n)Ce.eventHandlers[n].target==e.target&&Ce.eventHandlers[n].eventTypeString==e.eventTypeString&&Ce._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,t,n,r,o){var i=rt(),s=ot(12);a()[s>>2]=n,a()[s+4>>2]=r,a()[s+8>>2]=o,tt(0,e,637534208,t,r,s),at(i)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return ve.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Se(e,t,n,r){var o=rt(),i=ot(12),s=0;t&&(s=function(e){var t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(e)+1,n=He(t);return H(e,n,t),n}(t)),a()[i>>2]=s,a()[i+4>>2]=n,a()[i+8>>2]=r,tt(0,e,657457152,0,s,i),at(o)}var Ee=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function Te(e){return e=function(e){return e>2?j(e):e}(e),Ee[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function Ne(e){return Te(e)}function Ae(e,t,n){var r=Ne(e);if(!r)return-4;if(r.canvasSharedPtr&&(a()[r.canvasSharedPtr>>2]=t,a()[r.canvasSharedPtr+4>>2]=n),!r.offscreenCanvas&&r.controlTransferredOffscreen)return r.canvasSharedPtr?(function(e,t,n,r){Se(e,t=t?j(t):"",n,r)}(a()[r.canvasSharedPtr+8>>2],e,t,n),1):-4;r.offscreenCanvas&&(r=r.offscreenCanvas);var o=!1;if(r.GLctxObject&&r.GLctxObject.GLctx){var i=r.GLctxObject.GLctx.getParameter(2978);o=0===i[0]&&0===i[1]&&i[2]===r.width&&i[3]===r.height}return r.width=t,r.height=n,o&&r.GLctxObject.GLctx.viewport(0,0,t,n),0}function _e(e,t,n){return v?ye(2,1,e,t,n):Ae(e,t,n)}var Re={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){Re.lastError||(Re.lastError=e)},getNewId:function(e){for(var t=Re.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,r){for(var o="",i=0;i<t;++i){var s=r?a()[r+4*i>>2]:-1;o+=j(a()[n+4*i>>2],s<0?void 0:s)}return o},createContext:function(e,t){var n=e.getContext("webgl",t);return n?Re.registerContext(n,t):0},registerContext:function(e,t){var n=He(8);a()[n+4>>2]=Xe();var r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),Re.contexts[n]=r,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&Re.initExtensions(r),n},makeContextCurrent:function(e){return Re.currentContext=Re.contexts[e],c.ctx=Fe=Re.currentContext&&Re.currentContext.GLctx,!(e&&!Fe)},getContext:function(e){return Re.contexts[e]},deleteContext:function(e){Re.currentContext===Re.contexts[e]&&(Re.currentContext=null),"object"==Ty(Ce)&&Ce.removeAllHandlersOnTarget(Re.contexts[e].GLctx.canvas),Re.contexts[e]&&Re.contexts[e].GLctx.canvas&&(Re.contexts[e].GLctx.canvas.GLctxObject=void 0),Ge(Re.contexts[e].handle),Re.contexts[e]=null},initExtensions:function(e){if(e||(e=Re.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;(function(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,a){t.drawArraysInstancedANGLE(e,n,r,a)},e.drawElementsInstanced=function(e,n,r,a,o){t.drawElementsInstancedANGLE(e,n,r,a,o)}})(t),function(e){var t=e.getExtension("OES_vertex_array_object");if(t)e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)}}(t),function(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)}}(t),t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query"),function(e){e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")}(t),(t.getSupportedExtensions()||[]).forEach((function(e){e.indexOf("lose_context")<0&&e.indexOf("debug")<0&&t.getExtension(e)}))}},populateUniformTable:function(e){for(var t=Re.programs[e],n=Re.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},r=n.uniforms,a=Fe.getProgramParameter(t,35718),o=0;o<a;++o){var i=Fe.getActiveUniform(t,o),s=i.name;n.maxUniformLength=Math.max(n.maxUniformLength,s.length+1),"]"==s.slice(-1)&&(s=s.slice(0,s.lastIndexOf("[")));var u=Fe.getUniformLocation(t,s);if(u){var c=Re.getNewId(Re.uniforms);r[s]=[i.size,c],Re.uniforms[c]=u;for(var l=1;l<i.size;++l){var d=s+"["+l+"]";u=Fe.getUniformLocation(t,d),c=Re.getNewId(Re.uniforms),Re.uniforms[c]=u}}}}},Oe=["default","low-power","high-performance"];var Fe,Me={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Me.buffers[e];0===t||10===t?((1===e?T:N)(z(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return Me.varargs+=4,a()[Me.varargs-4>>2]},getStr:function(e){return j(e)},get64:function(e,t){return e}};function De(e){return v?ye(3,1,e):0}function Be(e,t,n,r,a){if(v)return ye(4,1,e,t,n,r,a)}function Pe(e,t,n,o){if(v)return ye(5,1,e,t,n,o);for(var i=0,s=0;s<n;s++){for(var u=a()[t+8*s>>2],c=a()[t+(8*s+4)>>2],l=0;l<c;l++)Me.printChar(e,r()[u+l]);i+=c}return a()[o>>2]=i,0}function Le(e){if(v)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var t=ve.getNewWorker();if(void 0!==t.pthread)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";ve.runningWorkers.push(t);for(var n=He(512),r=0;r<128;++r)a()[n+4*r>>2]=0;var i=e.stackBase+e.stackSize,s=ve.pthreads[e.pthread_ptr]={worker:t,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,threadInfoStruct:e.pthread_ptr},u=s.threadInfoStruct>>2;Atomics.store(o(),u+16,e.detached),Atomics.store(o(),u+25,n),Atomics.store(o(),u+10,s.threadInfoStruct),Atomics.store(o(),u+20,e.stackSize),Atomics.store(o(),u+19,i),Atomics.store(o(),u+26,e.stackSize),Atomics.store(o(),u+28,i),Atomics.store(o(),u+29,e.detached);var c=Ke()+40;Atomics.store(o(),u+43,c),t.pthread=s;var l={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};t.runPthread=function(){l.time=performance.now(),t.postMessage(l,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread)}function Ue(e){if(v)return ye(6,1,e);switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==("undefined"==typeof navigator?"undefined":Ty(navigator))&&navigator.hardwareConcurrency||1}return function(e){a()[qe()>>2]=e}(28),-1}v||ve.initMainThreadBlock();var Ve,We=[null,function(e,t){if(v)return ye(1,1,e,t)},_e,De,Be,Pe,Ue],ze={e:function(e,t,n,r){oe("Assertion failed: "+j(e)+", at: "+[t?j(t):"unknown filename",n,r?j(r):"unknown function"])},r:function(e,t){_main(e,t)},x:function(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(v)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=ve.pthreads[e],r=n&&n.worker;if(!r)return;r.postMessage({cmd:"processThreadQueue"})}return 1},b:function(){oe()},y:function(e,t,n){var r=ke(t,n);return de[e].apply(null,r)},j:function(e,t){},c:function(e,n,r){if(e<=0||e>t().length||!0&e)return-28;if(p){if(Atomics.load(a(),e>>2)!=n)return-6;var o=performance.now(),i=o+r;for(Atomics.exchange(a(),ct>>2,e);;){if((o=performance.now())>i)return Atomics.exchange(a(),ct>>2,0),-73;if(0==Atomics.exchange(a(),ct>>2,0))break;if(Ye(),Atomics.load(a(),e>>2)!=n)return-6;Atomics.exchange(a(),ct>>2,e)}return 0}var s=Atomics.wait(a(),e>>2,n,r);if("timed-out"===s)return-73;if("not-equal"===s)return-6;if("ok"===s)return 0;throw"Atomics.wait returned an unexpected value "+s},d:fe,f:ge,p:function(e,t,n){r().copyWithin(e,t,t+n)},z:function(){return h?yne.cpus().length:navigator.hardwareConcurrency},u:function(e,t,n){be.length=t;for(var r=n>>3,a=0;a<t;a++)be[a]=i()[r+a];return(e<0?de[-e-1]:We[e]).apply(null,be)},q:function(e){var t=we();if(e<=t)return!1;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),Ie(Math.min(n,q(Math.max(e,a),65536))))return!0}return!1},v:function(e,t,n){return Ne(e)?Ae(e,t,n):_e(e,t,n)},i:function(e){},t:function(e,t){},w:function(e,t){return function(e,t){var n=t>>2,r=a()[n+6],o={alpha:!!a()[n+0],depth:!!a()[n+1],stencil:!!a()[n+2],antialias:!!a()[n+3],premultipliedAlpha:!!a()[n+4],preserveDrawingBuffer:!!a()[n+5],powerPreference:Oe[r],failIfMajorPerformanceCaveat:!!a()[n+7],majorVersion:a()[n+8],minorVersion:a()[n+9],enableExtensionsByDefault:a()[n+10],explicitSwapControl:a()[n+11],proxyContextToMainThread:a()[n+12],renderViaOffscreenBackBuffer:a()[n+13]},i=Ne(e);return i?o.explicitSwapControl?0:Re.createContext(i,o):0}(e,t)},m:De,n:Be,g:Pe,o:function(){ve.initRuntime()},a:A||c.wasmMemory,k:function(e){var t=ve.threadExitHandlers.pop();e&&t()},l:function(e,t){ve.threadExitHandlers.push((function(){X.get(e)(t)}))},h:function(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return N("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!e)return N("pthread_create called with a null thread pointer!"),28;var i=[];if(v&&0===i.length)return Je(687865856,e,t,n,r);var s=0,u=0,c=0;t&&-1!=t?(s=a()[t>>2],s+=81920,u=a()[t+8>>2],c=0!==a()[t+12>>2]):s=2097152;var l=0==u;l?u=st(16,s):U((u-=s)>0);for(var d=He(228),p=0;p<57;++p)o()[(d>>2)+p]=0;a()[e>>2]=d,a()[d+12>>2]=d;var f=d+152;a()[f>>2]=f;var h={stackBase:u,stackSize:s,allocatedOwnStack:l,detached:c,startRoutine:n,pthread_ptr:d,arg:r,transferList:i};return v?(h.cmd="spawnThread",postMessage(h,i)):Le(h),0},s:Ue},je=(function(){var e={a:ze};function t(e,t){var n=e.exports;if(c.asm=n,X=c.asm.F,_=t,!v){var r=ve.unusedWorkers.length;ve.unusedWorkers.forEach((function(e){ve.loadWasmModuleToWorker(e,(function(){--r||function(e){if(re--,c.monitorRunDependencies&&c.monitorRunDependencies(re),0==re&&ae){var t=ae;ae=null,t()}}()}))}))}}function n(e){t(e.instance,e.module)}function r(t){return function(){if(!E&&(p||f)){if("function"==typeof fetch&&!ue(ce))return fetch(ce,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ce+"'";return e.arrayBuffer()})).catch((function(){return le(ce)}));if(b)return new Promise((function(e,t){b(ce,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return le(ce)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){N("failed to asynchronously prepare wasm: "+e),oe(e)}))}if(v||(U(!v,"addRunDependency cannot be used in a pthread worker"),re++,c.monitorRunDependencies&&c.monitorRunDependencies(re)),c.instantiateWasm)try{return c.instantiateWasm(e,t)}catch(e){return N("Module.instantiateWasm callback failed with error: "+e),!1}(E||"function"!=typeof WebAssembly.instantiateStreaming||se(ce)||ue(ce)||"function"!=typeof fetch?r(n):fetch(ce,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return N("wasm streaming compile failed: "+e),N("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(u)}(),c.___wasm_call_ctors=function(){return(je=c.___wasm_call_ctors=c.asm.A).apply(null,arguments)}),He=(c._init=function(){return(c._init=c.asm.B).apply(null,arguments)},c._register_tensor=function(){return(c._register_tensor=c.asm.C).apply(null,arguments)},c._dispose_data=function(){return(c._dispose_data=c.asm.D).apply(null,arguments)},c._dispose=function(){return(c._dispose=c.asm.E).apply(null,arguments)},c._Abs=function(){return(c._Abs=c.asm.G).apply(null,arguments)},c._Add=function(){return(c._Add=c.asm.H).apply(null,arguments)},c._AddN=function(){return(c._AddN=c.asm.I).apply(null,arguments)},c._All=function(){return(c._All=c.asm.J).apply(null,arguments)},c._Any=function(){return(c._Any=c.asm.K).apply(null,arguments)},c._ArgMax=function(){return(c._ArgMax=c.asm.L).apply(null,arguments)},c._AvgPool=function(){return(c._AvgPool=c.asm.M).apply(null,arguments)},c._BatchMatMul=function(){return(c._BatchMatMul=c.asm.N).apply(null,arguments)},c._Ceil=function(){return(c._Ceil=c.asm.O).apply(null,arguments)},c._ClipByValue=function(){return(c._ClipByValue=c.asm.P).apply(null,arguments)},c._Conv2D=function(){return(c._Conv2D=c.asm.Q).apply(null,arguments)},c._Conv2DBackpropInput=function(){return(c._Conv2DBackpropInput=c.asm.R).apply(null,arguments)},c._Cos=function(){return(c._Cos=c.asm.S).apply(null,arguments)},c._Cosh=function(){return(c._Cosh=c.asm.T).apply(null,arguments)},c._CropAndResize=function(){return(c._CropAndResize=c.asm.U).apply(null,arguments)},c._Cumsum=function(){return(c._Cumsum=c.asm.V).apply(null,arguments)},c._DepthToSpace=function(){return(c._DepthToSpace=c.asm.W).apply(null,arguments)},c._DepthwiseConv2dNative=function(){return(c._DepthwiseConv2dNative=c.asm.X).apply(null,arguments)},c._Equal=function(){return(c._Equal=c.asm.Y).apply(null,arguments)},c._Exp=function(){return(c._Exp=c.asm.Z).apply(null,arguments)},c._FlipLeftRight=function(){return(c._FlipLeftRight=c.asm._).apply(null,arguments)},c._Floor=function(){return(c._Floor=c.asm.$).apply(null,arguments)},c._FloorDiv=function(){return(c._FloorDiv=c.asm.aa).apply(null,arguments)},c._FusedBatchNorm=function(){return(c._FusedBatchNorm=c.asm.ba).apply(null,arguments)},c._FusedConv2D=function(){return(c._FusedConv2D=c.asm.ca).apply(null,arguments)},c._FusedDepthwiseConv2D=function(){return(c._FusedDepthwiseConv2D=c.asm.da).apply(null,arguments)},c._Gather=function(){return(c._Gather=c.asm.ea).apply(null,arguments)},c._GatherNd=function(){return(c._GatherNd=c.asm.fa).apply(null,arguments)},c._Greater=function(){return(c._Greater=c.asm.ga).apply(null,arguments)},c._GreaterEqual=function(){return(c._GreaterEqual=c.asm.ha).apply(null,arguments)},c._LeakyRelu=function(){return(c._LeakyRelu=c.asm.ia).apply(null,arguments)},c._Less=function(){return(c._Less=c.asm.ja).apply(null,arguments)},c._LessEqual=function(){return(c._LessEqual=c.asm.ka).apply(null,arguments)},c._Log=function(){return(c._Log=c.asm.la).apply(null,arguments)},c._LogicalAnd=function(){return(c._LogicalAnd=c.asm.ma).apply(null,arguments)},c._Max=function(){return(c._Max=c.asm.na).apply(null,arguments)},c._MaxPool=function(){return(c._MaxPool=c.asm.oa).apply(null,arguments)},c._Maximum=function(){return(c._Maximum=c.asm.pa).apply(null,arguments)},c._Mean=function(){return(c._Mean=c.asm.qa).apply(null,arguments)},c._Min=function(){return(c._Min=c.asm.ra).apply(null,arguments)},c._Minimum=function(){return(c._Minimum=c.asm.sa).apply(null,arguments)},c._MirrorPad=function(){return(c._MirrorPad=c.asm.ta).apply(null,arguments)},c._Multiply=function(){return(c._Multiply=c.asm.ua).apply(null,arguments)},c._Neg=function(){return(c._Neg=c.asm.va).apply(null,arguments)},c._NonMaxSuppressionV3=function(){return(c._NonMaxSuppressionV3=c.asm.wa).apply(null,arguments)},c._NonMaxSuppressionV4=function(){return(c._NonMaxSuppressionV4=c.asm.xa).apply(null,arguments)},c._NonMaxSuppressionV5=function(){return(c._NonMaxSuppressionV5=c.asm.ya).apply(null,arguments)},c._NotEqual=function(){return(c._NotEqual=c.asm.za).apply(null,arguments)},c._OneHot=function(){return(c._OneHot=c.asm.Aa).apply(null,arguments)},c._PadV2=function(){return(c._PadV2=c.asm.Ba).apply(null,arguments)},c._Pow=function(){return(c._Pow=c.asm.Ca).apply(null,arguments)},c._Prelu=function(){return(c._Prelu=c.asm.Da).apply(null,arguments)},c._Prod=function(){return(c._Prod=c.asm.Ea).apply(null,arguments)},c._RealDiv=function(){return(c._RealDiv=c.asm.Fa).apply(null,arguments)},c._Relu=function(){return(c._Relu=c.asm.Ga).apply(null,arguments)},c._Relu6=function(){return(c._Relu6=c.asm.Ha).apply(null,arguments)},c._ResizeBilinear=function(){return(c._ResizeBilinear=c.asm.Ia).apply(null,arguments)},c._Reverse=function(){return(c._Reverse=c.asm.Ja).apply(null,arguments)},c._RotateWithOffset=function(){return(c._RotateWithOffset=c.asm.Ka).apply(null,arguments)},c._Round=function(){return(c._Round=c.asm.La).apply(null,arguments)},c._Rsqrt=function(){return(c._Rsqrt=c.asm.Ma).apply(null,arguments)},c._ScatterNd=function(){return(c._ScatterNd=c.asm.Na).apply(null,arguments)},c._SelectV2=function(){return(c._SelectV2=c.asm.Oa).apply(null,arguments)},c._Sigmoid=function(){return(c._Sigmoid=c.asm.Pa).apply(null,arguments)},c._Sin=function(){return(c._Sin=c.asm.Qa).apply(null,arguments)},c._Softmax=function(){return(c._Softmax=c.asm.Ra).apply(null,arguments)},c._Sqrt=function(){return(c._Sqrt=c.asm.Sa).apply(null,arguments)},c._Square=function(){return(c._Square=c.asm.Ta).apply(null,arguments)},c._SquaredDifference=function(){return(c._SquaredDifference=c.asm.Ua).apply(null,arguments)},c._Step=function(){return(c._Step=c.asm.Va).apply(null,arguments)},c._StridedSlice=function(){return(c._StridedSlice=c.asm.Wa).apply(null,arguments)},c._Sub=function(){return(c._Sub=c.asm.Xa).apply(null,arguments)},c._Sum=function(){return(c._Sum=c.asm.Ya).apply(null,arguments)},c._Tan=function(){return(c._Tan=c.asm.Za).apply(null,arguments)},c._Tanh=function(){return(c._Tanh=c.asm._a).apply(null,arguments)},c._Tile=function(){return(c._Tile=c.asm.$a).apply(null,arguments)},c._TopK=function(){return(c._TopK=c.asm.ab).apply(null,arguments)},c._Transform=function(){return(c._Transform=c.asm.bb).apply(null,arguments)},c._Transpose=function(){return(c._Transpose=c.asm.cb).apply(null,arguments)},c.__FusedMatMul=function(){return(c.__FusedMatMul=c.asm.db).apply(null,arguments)},c._malloc=function(){return(He=c._malloc=c.asm.eb).apply(null,arguments)}),Ge=c._free=function(){return(Ge=c._free=c.asm.fb).apply(null,arguments)},qe=c.___errno_location=function(){return(qe=c.___errno_location=c.asm.gb).apply(null,arguments)},Ke=c._emscripten_get_global_libc=function(){return(Ke=c._emscripten_get_global_libc=c.asm.hb).apply(null,arguments)},Xe=c._pthread_self=function(){return(Xe=c._pthread_self=c.asm.ib).apply(null,arguments)},Qe=c.___pthread_tsd_run_dtors=function(){return(Qe=c.___pthread_tsd_run_dtors=c.asm.jb).apply(null,arguments)},Ye=c._emscripten_main_thread_process_queued_calls=function(){return(Ye=c._emscripten_main_thread_process_queued_calls=c.asm.kb).apply(null,arguments)},$e=(c._emscripten_current_thread_process_queued_calls=function(){return(c._emscripten_current_thread_process_queued_calls=c.asm.lb).apply(null,arguments)},c._emscripten_register_main_browser_thread_id=function(){return($e=c._emscripten_register_main_browser_thread_id=c.asm.mb).apply(null,arguments)}),Ze=c.__emscripten_do_dispatch_to_thread=function(){return(Ze=c.__emscripten_do_dispatch_to_thread=c.asm.nb).apply(null,arguments)},Je=c._emscripten_sync_run_in_main_thread_4=function(){return(Je=c._emscripten_sync_run_in_main_thread_4=c.asm.ob).apply(null,arguments)},et=c._emscripten_run_in_main_runtime_thread_js=function(){return(et=c._emscripten_run_in_main_runtime_thread_js=c.asm.pb).apply(null,arguments)},tt=c.__emscripten_call_on_thread=function(){return(tt=c.__emscripten_call_on_thread=c.asm.qb).apply(null,arguments)},nt=(c._emscripten_tls_init=function(){return(c._emscripten_tls_init=c.asm.rb).apply(null,arguments)},c.__emscripten_thread_init=function(){return(nt=c.__emscripten_thread_init=c.asm.sb).apply(null,arguments)}),rt=c.stackSave=function(){return(rt=c.stackSave=c.asm.tb).apply(null,arguments)},at=c.stackRestore=function(){return(at=c.stackRestore=c.asm.ub).apply(null,arguments)},ot=c.stackAlloc=function(){return(ot=c.stackAlloc=c.asm.vb).apply(null,arguments)},it=c._emscripten_stack_set_limits=function(){return(it=c._emscripten_stack_set_limits=c.asm.wb).apply(null,arguments)},st=c._memalign=function(){return(st=c._memalign=c.asm.xb).apply(null,arguments)},ut=c.__emscripten_allow_main_runtime_queued_calls=9824,ct=c.__emscripten_main_thread_futex=11448;function lt(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function dt(e){if(!(re>0)){if(v)return s(c),ee(),void postMessage({cmd:"loaded"});(function(){if(!v){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)te(c.preRun.shift());pe(Y)}})(),re>0||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),t()}),1)):t())}function t(){Ve||(Ve=!0,c.calledRun=!0,L||(ee(),v||pe(Z),s(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),function(){if(!v){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;)ne(c.postRun.shift());pe(J)}}()))}}if(c.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?V(e):function(){return W(e,t,n,arguments)}},c.PThread=ve,c.PThread=ve,c.wasmMemory=A,c.ExitStatus=lt,ae=function e(){Ve||dt(),Ve||(ae=e)},c.run=dt,c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return v&&(R=!1,ve.initWorker()),dt(),e.ready});e.exports=r})),xne=HQ((function(e,t){var n,r=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(n=n||__filename),function(e){var t,r,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,n){t=e,r=n}));var o,i={};for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);var s,u,c,l;s="object"==("undefined"==typeof window?"undefined":Ty(window)),u="function"==typeof importScripts,c="object"==("undefined"==typeof process?"undefined":Ty(process))&&"object"==Ty(process.versions)&&"string"==typeof process.versions.node,l=!s&&!c&&!u;var d,p,f,h,m,g="";c?(g=u?gne.dirname(g)+"/":__dirname+"/",d=function(e,t){return h||(h=k3),m||(m=gne),e=m.normalize(e),h.readFileSync(e,t?null:"utf8")},f=function(e){var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),w(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof oe))throw e})),process.on("unhandledRejection",j),a.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(d=function(e){return read(e)}),f=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(w("object"==Ty(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(s||u)&&(u?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),n&&(g=n),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(f=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),p=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var v,y,b=a.print||console.log.bind(console),x=a.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);i=null,a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,a.quit&&a.quit,a.wasmBinary&&(v=a.wasmBinary),a.noExitRuntime,"object"!=("undefined"==typeof WebAssembly?"undefined":Ty(WebAssembly))&&j("no native wasm support detected");var k=!1;function w(e,t){e||j("Assertion failed: "+t)}function I(e){var t=a["_"+e];return w(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function C(e,t,n,r,a){var o={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);!function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var a=n,o=n+r-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(n>=o)break;t[n++]=s}else if(s<=2047){if(n+1>=o)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=o)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(e,T,t,n)}(e,t=ae(n),n)}return t},array:function(e){var t=ae(e.length);return function(e,t){E.set(e,t)}(e,t),t}},i=I(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=o[n[c]];l?(0===u&&(u=ne()),s[c]=l(r[c])):s[c]=r[c]}var d=i.apply(null,s);return d=function(e){return"string"===t?R(e):"boolean"===t?Boolean(e):e}(d),0!==u&&re(u),d}var S,E,T,N,A="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function _(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&A)return A.decode(e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var u=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|u:(7&i)<<18|s<<12|u<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var c=i-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&i)<<6|s)}else o+=String.fromCharCode(i)}return o}function R(e,t){return e?_(T,e,t):""}function O(e,t){return e%t>0&&(e+=t-e%t),e}function F(e){S=e,a.HEAP8=E=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=N=new Int32Array(e),a.HEAPU8=T=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var M,D=[],B=[],P=[],L=[];function U(e){D.unshift(e)}function V(e){L.unshift(e)}B.push({func:function(){ee()}});var W=0,z=null;function j(e){a.onAbort&&a.onAbort(e),x(e+=""),k=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}function H(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}a.preloadedImages={},a.preloadedAudios={};function G(e){return H(e,"data:application/octet-stream;base64,")}function q(e){return H(e,"file://")}var K="tfjs-backend-wasm.wasm";function X(e){try{if(e==K&&v)return new Uint8Array(v);if(f)return f(e);throw"both async and sync fetching of the wasm failed"}catch(e){j(e)}}function Q(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?M.get(n)():M.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(a)}}function Y(e){try{return y.grow(e-S.byteLength+65535>>>16),F(y.buffer),1}catch(e){}}G(K)||(K=function(e){return a.locateFile?a.locateFile(e,g):g+e}(K));var $={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=$.buffers[e];0===t||10===t?((1===e?b:x)(_(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return $.varargs+=4,N[$.varargs-4>>2]},getStr:function(e){return R(e)},get64:function(e,t){return e}};var Z,J={a:function(){j()},d:function(e,t,n){T.copyWithin(e,t,t+n)},e:function(e){var t=T.length,n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),Y(Math.min(n,O(Math.max(e,a),65536))))return!0}return!1},f:function(e){return 0},c:function(e,t,n,r,a){},b:function(e,t,n,r){for(var a=0,o=0;o<n;o++){for(var i=N[t+8*o>>2],s=N[t+(8*o+4)>>2],u=0;u<s;u++)$.printChar(e,T[i+u]);a+=s}return N[r>>2]=a,0},g:function(){return 6},h:function(e){switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==("undefined"==typeof navigator?"undefined":Ty(navigator))&&navigator.hardwareConcurrency||1}return function(e){N[te()>>2]=e}(28),-1}},ee=(function(){var e={a:J};function t(e,t){var n=e.exports;a.asm=n,F((y=a.asm.i).buffer),M=a.asm.o,function(e){if(W--,a.monitorRunDependencies&&a.monitorRunDependencies(W),0==W&&z){var t=z;z=null,t()}}()}function n(e){t(e.instance)}function o(t){return function(){if(!v&&(s||u)){if("function"==typeof fetch&&!q(K))return fetch(K,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+K+"'";return e.arrayBuffer()})).catch((function(){return X(K)}));if(p)return new Promise((function(e,t){p(K,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return X(K)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){x("failed to asynchronously prepare wasm: "+e),j(e)}))}if(W++,a.monitorRunDependencies&&a.monitorRunDependencies(W),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return x("Module.instantiateWasm callback failed with error: "+e),!1}(v||"function"!=typeof WebAssembly.instantiateStreaming||G(K)||q(K)||"function"!=typeof fetch?o(n):fetch(K,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),o(n)}))}))).catch(r)}(),a.___wasm_call_ctors=function(){return(ee=a.___wasm_call_ctors=a.asm.j).apply(null,arguments)}),te=(a._init=function(){return(a._init=a.asm.k).apply(null,arguments)},a._register_tensor=function(){return(a._register_tensor=a.asm.l).apply(null,arguments)},a._dispose_data=function(){return(a._dispose_data=a.asm.m).apply(null,arguments)},a._dispose=function(){return(a._dispose=a.asm.n).apply(null,arguments)},a._Abs=function(){return(a._Abs=a.asm.p).apply(null,arguments)},a._Add=function(){return(a._Add=a.asm.q).apply(null,arguments)},a._AddN=function(){return(a._AddN=a.asm.r).apply(null,arguments)},a._All=function(){return(a._All=a.asm.s).apply(null,arguments)},a._Any=function(){return(a._Any=a.asm.t).apply(null,arguments)},a._ArgMax=function(){return(a._ArgMax=a.asm.u).apply(null,arguments)},a._AvgPool=function(){return(a._AvgPool=a.asm.v).apply(null,arguments)},a._BatchMatMul=function(){return(a._BatchMatMul=a.asm.w).apply(null,arguments)},a._Ceil=function(){return(a._Ceil=a.asm.x).apply(null,arguments)},a._ClipByValue=function(){return(a._ClipByValue=a.asm.y).apply(null,arguments)},a._Conv2D=function(){return(a._Conv2D=a.asm.z).apply(null,arguments)},a._Conv2DBackpropInput=function(){return(a._Conv2DBackpropInput=a.asm.A).apply(null,arguments)},a._Cos=function(){return(a._Cos=a.asm.B).apply(null,arguments)},a._Cosh=function(){return(a._Cosh=a.asm.C).apply(null,arguments)},a._CropAndResize=function(){return(a._CropAndResize=a.asm.D).apply(null,arguments)},a._Cumsum=function(){return(a._Cumsum=a.asm.E).apply(null,arguments)},a._DepthToSpace=function(){return(a._DepthToSpace=a.asm.F).apply(null,arguments)},a._DepthwiseConv2dNative=function(){return(a._DepthwiseConv2dNative=a.asm.G).apply(null,arguments)},a._Equal=function(){return(a._Equal=a.asm.H).apply(null,arguments)},a._Exp=function(){return(a._Exp=a.asm.I).apply(null,arguments)},a._FlipLeftRight=function(){return(a._FlipLeftRight=a.asm.J).apply(null,arguments)},a._Floor=function(){return(a._Floor=a.asm.K).apply(null,arguments)},a._FloorDiv=function(){return(a._FloorDiv=a.asm.L).apply(null,arguments)},a._FusedBatchNorm=function(){return(a._FusedBatchNorm=a.asm.M).apply(null,arguments)},a._FusedConv2D=function(){return(a._FusedConv2D=a.asm.N).apply(null,arguments)},a._FusedDepthwiseConv2D=function(){return(a._FusedDepthwiseConv2D=a.asm.O).apply(null,arguments)},a._Gather=function(){return(a._Gather=a.asm.P).apply(null,arguments)},a._GatherNd=function(){return(a._GatherNd=a.asm.Q).apply(null,arguments)},a._Greater=function(){return(a._Greater=a.asm.R).apply(null,arguments)},a._GreaterEqual=function(){return(a._GreaterEqual=a.asm.S).apply(null,arguments)},a._LeakyRelu=function(){return(a._LeakyRelu=a.asm.T).apply(null,arguments)},a._Less=function(){return(a._Less=a.asm.U).apply(null,arguments)},a._LessEqual=function(){return(a._LessEqual=a.asm.V).apply(null,arguments)},a._Log=function(){return(a._Log=a.asm.W).apply(null,arguments)},a._LogicalAnd=function(){return(a._LogicalAnd=a.asm.X).apply(null,arguments)},a._Max=function(){return(a._Max=a.asm.Y).apply(null,arguments)},a._MaxPool=function(){return(a._MaxPool=a.asm.Z).apply(null,arguments)},a._Maximum=function(){return(a._Maximum=a.asm._).apply(null,arguments)},a._Mean=function(){return(a._Mean=a.asm.$).apply(null,arguments)},a._Min=function(){return(a._Min=a.asm.aa).apply(null,arguments)},a._Minimum=function(){return(a._Minimum=a.asm.ba).apply(null,arguments)},a._MirrorPad=function(){return(a._MirrorPad=a.asm.ca).apply(null,arguments)},a._Multiply=function(){return(a._Multiply=a.asm.da).apply(null,arguments)},a._Neg=function(){return(a._Neg=a.asm.ea).apply(null,arguments)},a._NonMaxSuppressionV3=function(){return(a._NonMaxSuppressionV3=a.asm.fa).apply(null,arguments)},a._NonMaxSuppressionV4=function(){return(a._NonMaxSuppressionV4=a.asm.ga).apply(null,arguments)},a._NonMaxSuppressionV5=function(){return(a._NonMaxSuppressionV5=a.asm.ha).apply(null,arguments)},a._NotEqual=function(){return(a._NotEqual=a.asm.ia).apply(null,arguments)},a._OneHot=function(){return(a._OneHot=a.asm.ja).apply(null,arguments)},a._PadV2=function(){return(a._PadV2=a.asm.ka).apply(null,arguments)},a._Pow=function(){return(a._Pow=a.asm.la).apply(null,arguments)},a._Prelu=function(){return(a._Prelu=a.asm.ma).apply(null,arguments)},a._Prod=function(){return(a._Prod=a.asm.na).apply(null,arguments)},a._RealDiv=function(){return(a._RealDiv=a.asm.oa).apply(null,arguments)},a._Relu=function(){return(a._Relu=a.asm.pa).apply(null,arguments)},a._Relu6=function(){return(a._Relu6=a.asm.qa).apply(null,arguments)},a._ResizeBilinear=function(){return(a._ResizeBilinear=a.asm.ra).apply(null,arguments)},a._Reverse=function(){return(a._Reverse=a.asm.sa).apply(null,arguments)},a._RotateWithOffset=function(){return(a._RotateWithOffset=a.asm.ta).apply(null,arguments)},a._Round=function(){return(a._Round=a.asm.ua).apply(null,arguments)},a._Rsqrt=function(){return(a._Rsqrt=a.asm.va).apply(null,arguments)},a._ScatterNd=function(){return(a._ScatterNd=a.asm.wa).apply(null,arguments)},a._SelectV2=function(){return(a._SelectV2=a.asm.xa).apply(null,arguments)},a._Sigmoid=function(){return(a._Sigmoid=a.asm.ya).apply(null,arguments)},a._Sin=function(){return(a._Sin=a.asm.za).apply(null,arguments)},a._Softmax=function(){return(a._Softmax=a.asm.Aa).apply(null,arguments)},a._Sqrt=function(){return(a._Sqrt=a.asm.Ba).apply(null,arguments)},a._Square=function(){return(a._Square=a.asm.Ca).apply(null,arguments)},a._SquaredDifference=function(){return(a._SquaredDifference=a.asm.Da).apply(null,arguments)},a._Step=function(){return(a._Step=a.asm.Ea).apply(null,arguments)},a._StridedSlice=function(){return(a._StridedSlice=a.asm.Fa).apply(null,arguments)},a._Sub=function(){return(a._Sub=a.asm.Ga).apply(null,arguments)},a._Sum=function(){return(a._Sum=a.asm.Ha).apply(null,arguments)},a._Tan=function(){return(a._Tan=a.asm.Ia).apply(null,arguments)},a._Tanh=function(){return(a._Tanh=a.asm.Ja).apply(null,arguments)},a._Tile=function(){return(a._Tile=a.asm.Ka).apply(null,arguments)},a._TopK=function(){return(a._TopK=a.asm.La).apply(null,arguments)},a._Transform=function(){return(a._Transform=a.asm.Ma).apply(null,arguments)},a._Transpose=function(){return(a._Transpose=a.asm.Na).apply(null,arguments)},a.__FusedMatMul=function(){return(a.__FusedMatMul=a.asm.Oa).apply(null,arguments)},a._malloc=function(){return(a._malloc=a.asm.Pa).apply(null,arguments)},a._free=function(){return(a._free=a.asm.Qa).apply(null,arguments)},a.___errno_location=function(){return(te=a.___errno_location=a.asm.Ra).apply(null,arguments)}),ne=a.stackSave=function(){return(ne=a.stackSave=a.asm.Sa).apply(null,arguments)},re=a.stackRestore=function(){return(re=a.stackRestore=a.asm.Ta).apply(null,arguments)},ae=a.stackAlloc=function(){return(ae=a.stackAlloc=a.asm.Ua).apply(null,arguments)};function oe(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ie(e){function n(){Z||(Z=!0,a.calledRun=!0,k||(Q(B),Q(P),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)V(a.postRun.shift());Q(L)}()))}W>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)U(a.preRun.shift());Q(D)}(),W>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),n()}),1)):n()))}if(a.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?I(e):function(){return C(e,t,n,arguments)}},z=function e(){Z||ie(),Z||(z=e)},a.run=ie,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return ie(),e.ready});e.exports=r})),kne=function(e){Dy(a,e);var t,n,r=Hy(a);function a(e){var t;return _y(this,a),(t=r.call(this)).wasm=e,t.dataIdNextNumber=1,t.wasm.tfjs.init(),t.dataIdMap=new l$(zy(t),Y0()),t}return Oy(a,[{key:"write",value:function(e,t,n){var r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}},{key:"numDataIds",value:function(){return this.dataIdMap.numDataIds()}},{key:"time",value:(n=Ay(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=QZ(),t(),e.abrupt("return",{kernelMs:QZ()-n});case 3:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"move",value:function(e,t,n,r,a){var o=this.dataIdNextNumber++;if("string"!==r){var i=x$(n),s=i*F$(r),u=this.wasm._malloc(s);this.dataIdMap.set(e,{id:o,memoryOffset:u,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(o,i,u),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),u)}else{var c=t;this.dataIdMap.set(e,{id:o,stringBytes:c,shape:n,dtype:r,memoryOffset:null,refCount:a})}}},{key:"read",value:(t=Ay(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"readSync",value:function(e){var t=this.dataIdMap.get(e),n=t.memoryOffset,r=t.dtype,a=t.shape,o=t.stringBytes;return"string"===r?o:function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}(this.wasm.HEAPU8.slice(n,n+x$(a)*F$(r)).buffer,r)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.dataIdMap.has(e)){var n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}},{key:"refCount",value:function(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}},{key:"incRef",value:function(e){var t=this.dataIdMap.get(e);null!=t&&t.refCount++}},{key:"floatPrecision",value:function(){return 32}},{key:"getMemoryOffset",value:function(e){return this.dataIdMap.get(e).memoryOffset}},{key:"dispose",value:function(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}},{key:"memory",value:function(){return{unreliable:!1}}},{key:"makeOutput",value:function(e,t,n){var r;if(null==n)r=this.write(null,e,t);else{var a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});var o=x$(e);this.wasm.tfjs.registerTensor(a,o,n)}return{dataId:r,shape:e,dtype:t}}},{key:"typedArrayFromHeap",value:function(e){var t=e.shape,n=e.dtype,r=e.dataId,a=this.wasm.HEAPU8.buffer,o=this.dataIdMap.get(r).memoryOffset,i=x$(t);switch(n){case"float32":return new Float32Array(a,o,i);case"int32":return new Int32Array(a,o,i);case"bool":return new Uint8Array(a,o,i);default:throw new Error("Unknown dtype ".concat(n))}}}]),a}(d$);function wne(e){return function(t,n){return function(e,t){return Y$().platform.fetch(e,{credentials:"same-origin"})}(e).then((function(r){r.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),r.arrayBuffer().then((function(e){WebAssembly.instantiate(e,t).then((function(e){n(e.instance,e.module)}))}))})),{}}}function Ine(e,t,n){var r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=Tne&&null!=Tne[r]?Tne[r]:n+r}var Cne=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],Sne=null,Ene=null,Tne={},Nne=!1,Ane=!1;e1("wasm",Ay(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ay(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Y$().getAsync("WASM_HAS_SIMD_SUPPORT"),Y$().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);case 2:return t=e.sent,n=Ky(t,2),r=n[0],a=n[1],e.abrupt("return",new Promise((function(e,t){var n={locateFile:function(e,t){if(e.endsWith(".worker.js")){var n=new Blob(['var Module={};function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;this.alert=threadAlert;Module["instantiateWasm"]=function(info,receiveInstance){var instance=new WebAssembly.Instance(Module["wasmModule"],info);Module["wasmModule"]=null;receiveInstance(instance);return instance.exports};function moduleLoaded(){}this.onmessage=function(e){try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance;moduleLoaded()})}else if(e.data.cmd==="objectTransfer"){Module["PThread"].receiveObjectTransfer(e.data)}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0);var max=e.data.stackBase;var top=e.data.stackBase+e.data.stackSize;Module["establishStackSpace"](top,max);Module["_emscripten_tls_init"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].setThreadStatus(Module["_pthread_self"](),1);try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(!Module["getNoExitRuntime"]())Module["PThread"].threadExit(result)}catch(ex){if(ex==="Canceled!"){Module["PThread"].threadCancel()}else if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["getNoExitRuntime"]()){}else{Module["PThread"].threadExit(ex.status)}}else{Module["PThread"].threadExit(-2);throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["PThread"].threadCancel()}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);throw ex}};if(typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string"){self={location:{href:__filename}};var onmessage=this.onmessage;var nodeWorkerThreads=require("worker_threads");global.Worker=nodeWorkerThreads.Worker;var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var nodeFS=require("fs");var nodeRead=function(filename){return nodeFS.readFileSync(filename,"utf8")};function globalEval(x){global.require=require;global.Module=Module;eval.call(null,x)}importScripts=function(f){globalEval(nodeRead(f))};postMessage=function(msg){parentPort.postMessage(msg)};if(typeof performance==="undefined"){performance={now:function(){return Date.now()}}}}'],{type:"application/javascript"});return URL.createObjectURL(n)}return e.endsWith(".wasm")?Ine(r,a,null!=Ene?Ene:t):t+e}};Ane&&(n.instantiateWasm=wne(Ine(r,a,null!=Ene?Ene:"")));var o,i=!1;n.onAbort=function(){i||Nne||(Nne=!0,t({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},a&&r&&null==Sne?(n.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+bne.toString()],{type:"text/javascript"}),o=bne(n)):o=xne(n),o.then((function(t){i=!0,Nne=!1,t.tfjs={init:t.cwrap("init",null,[]),registerTensor:t.cwrap("register_tensor",null,["number","number","number"]),disposeData:t.cwrap("dispose_data",null,["number"]),dispose:t.cwrap("dispose",null,[])},e({wasm:t})}))})));case 7:case"end":return e.stop()}}),e)})))();case 2:return t=e.sent,n=t.wasm,e.abrupt("return",new kne(n));case 5:case"end":return e.stop()}}),e)}))),2);
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var _ne,Rne,One,Fne={},Mne={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Dne(e){if(!(e in Fne)){var t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete Fne[e]}),!1),1===e?t.getContext("webgl",Mne)||t.getContext("experimental-webgl",Mne):t.getContext("webgl2",Mne)}
/**
	     * @license
	     * Copyright 2017 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;Fne[e]=t}var n=Fne[e];return n.isContextLost()?(delete Fne[e],Dne(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Fne[e])}function Bne(e,t){return[t,e]}function Pne(e){var t=x$(e);return I$(Math.ceil(t/4))}function Lne(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Une(e,t){var n,r,a,o,i,s,u,c,l,d=e;return 2===Y$().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,o=d.RGBA32F,i=d.RED,s=4,u=1,c=d.HALF_FLOAT,l=d.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,o=d.RGBA,i=e.RGBA,s=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:l}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function Vne(e,t){var n=t();return Y$().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}function Wne(e){return!!(Y$().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function zne(e,t){return Jne(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function jne(e,t){var n=Jne(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(Vne(e,(function(){return e.shaderSource(n,t)})),Vne(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=qne.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map((function(e,t){return C$((t+1).toString(),o)+e})),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var c=i.slice(0,r-1),l=i.slice(r-1,r),d=i.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(C$(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(_ne||(_ne={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Rne||(Rne={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(One||(One={}));var Hne,Gne,qne=/ERROR: [0-9]+:([0-9]+):/g;function Kne(e,t){if(Vne(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Xne(e,t,n,r,a,o,i){var s=e.getAttribLocation(t,n);return-1!==s&&(Vne(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),Vne(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,o,i)})),Vne(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function Qne(e,t,n){!function(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in ".concat("[gl.TEXTURE0, gl.TEXTURE".concat(n,"]"),"."))}(e,n),Vne(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),Vne(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}function Yne(e,t,n){Vne(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),Vne(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function $ne(e,t){Vne(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),Vne(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Zne(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function Jne(e,t,n){var r=Vne(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function ere(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return x$(e.slice(0,e.length-t))}function tre(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function nre(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[ere(e)].concat(Xy(tre(e)))),t}function rre(e){return e%2==0}function are(e,t){if(k$(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(rre(n)&&rre(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&rre(e[0])&&rre(t[0])}function ore(e,t){return null!=e.getExtension(t)}function ire(e){try{if(null!=Dne(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function sre(e){if(0===e)return!1;var t=Dne(e);if(1!==e){if(ore(t,"EXT_color_buffer_float"))return ure(t);var n="EXT_color_buffer_half_float";if(ore(t,n)){var r=t.getExtension(n);return function(e,t){var n=Une(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),o}(t,r)}return!1}return!!ore(t,"OES_texture_float")&&(!!ore(t,"WEBGL_color_buffer_float")&&ure(t))}function ure(e){var t=Une(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function cre(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&g$("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the WebGL backend.")}))}))
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var lre=Y$();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function dre(){var e,t,n,r,a,o,i,s,u,c;return 2===Y$().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}function pre(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=L$(t);return r.map((function(t,a){return"".concat("int ".concat(e[a]," = ").concat(n," / ").concat(t),"; ",a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t),";")})).join("")}function fre(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=L$(t);return r.map((function(t,a){return"".concat("int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),"; ",a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]"),";")})).join("")}function hre(e){var t=L$(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}lre.registerFlag("HAS_WEBGL",(function(){return lre.getNumber("WEBGL_VERSION")>0})),lre.registerFlag("WEBGL_VERSION",(function(){return ire(2)?2:ire(1)?1:0})),lre.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),lre.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===lre.get("WEBGL_VERSION")})),lre.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),lre.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),lre.registerFlag("WEBGL_PACK",(function(){return lre.getBool("HAS_WEBGL")})),lre.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return lre.getBool("WEBGL_PACK")})),lre.registerFlag("WEBGL_PACK_CLIP",(function(){return lre.getBool("WEBGL_PACK")})),lre.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return lre.getBool("WEBGL_PACK")})),lre.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return lre.getBool("WEBGL_PACK")})),lre.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return lre.getBool("WEBGL_PACK")})),lre.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return lre.getBool("WEBGL_PACK")})),lre.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return lre.getBool("WEBGL_PACK")})),lre.registerFlag("WEBGL_PACK_REDUCE",(function(){return lre.getBool("WEBGL_PACK")})),lre.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return lre.getBool("WEBGL_PACK")})),lre.registerFlag("WEBGL_CONV_IM2COL",(function(){return lre.getBool("WEBGL_PACK")})),lre.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==Hne){var t=Dne(e);Hne=t.getParameter(t.MAX_TEXTURE_SIZE)}return Hne}(lre.getNumber("WEBGL_VERSION"))})),lre.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==Gne){var t=Dne(e);Gne=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Gne)}(lre.getNumber("WEBGL_VERSION"))})),lre.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=lre.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=Dne(e);return ore(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:ore(t,"EXT_disjoint_timer_query")?1:0}(e)})),lre.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return lre.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!NJ()})),lre.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=Dne(e);if(1===e){if(!ore(t,"OES_texture_float"))return!1}else if(!ore(t,"EXT_color_buffer_float"))return!1;return ure(t)}(lre.getNumber("WEBGL_VERSION"))})),lre.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!lre.getBool("WEBGL_FORCE_F16_TEXTURES")&&lre.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),lre.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return sre(lre.getNumber("WEBGL_VERSION"))})),lre.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=lre.getNumber("WEBGL_VERSION"))&&null!=Dne(e).fenceSync;var e})),lre.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return lre.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),lre.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ".concat(e,"."))})),lre.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return NJ()&&lre.getBool("IS_CHROME")?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ".concat(e,"."))})),lre.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),lre.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),lre.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),lre.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var mre="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",gre=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=_ne.DENSE;var n=Pne(t),r=dre();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(pre(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},vre=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=_ne.DENSE;var n=Pne(t),r=dre();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(pre(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},yre=function e(t){_y(this,e),this.variableNames=["A"],this.outTexUsage=Rne.DOWNLOAD;var n=dre();this.outputShape=t,this.userCode="\n      ".concat(mre,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},bre=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Rne.DOWNLOAD;var n=dre();this.outputShape=t,this.userCode="\n      ".concat(mre,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},xre=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_y(this,e),this.variableNames=["A"];var a=dre(),o=Ky(n,2),i=o[0],s=o[1];this.outputShape=t;var u="result";r&&(u="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(hre(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ").concat(s,";\n        int c = imod(flatIndex, ").concat(s,");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n        vec4 values = ").concat(a.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(a.output," = vec4(").concat(u,", 0., 0., 0.);\n      }\n    ")},kre=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var a=dre(),o=Ky(n,2),i=o[0],s=o[1];this.outputShape=t;var u="",c="result";r&&(c="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var d=0;d<=1;d++){var p=2*l+d;u+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(d," < ").concat(t[2],") {\n            localCoords[2] += ").concat(d,";\n            if(localCoords[1] + ").concat(l," < ").concat(t[1],") {\n              localCoords[1] += ").concat(l,";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ").concat(s,";\n              c = imod(flatIndex, ").concat(s,");\n              uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n              values = ").concat(a.texture2D,"(A, uv);\n\n              if(offset == 0) {\n                result[").concat(p,"] = values[0];\n              } else if(offset == 1) {\n                result[").concat(p,"] = values[1];\n              } else if(offset == 2) {\n                result[").concat(p,"] = values[2];\n              } else {\n                result[").concat(p,"] = values[3];\n              }\n            }\n          }\n        ")}this.userCode="\n      ".concat(hre(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ").concat(u,"\n\n        ").concat(a.output," = ").concat(c,";\n      }\n    ")};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function wre(e){var t=dre();return function(e,t){var n=Jne(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(Vne(e,(function(){return e.shaderSource(n,t)})),Vne(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function Ire(e){return function(e,t){var n=Jne(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Vne(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),Vne(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Cre(e){return function(e,t){var n=Jne(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Vne(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),Vne(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function Sre(e,t,n,r,a,o){!function(e,t){var n=Y$().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error("Requested texture size [".concat(e,"x").concat(t,"] is invalid."));if(e>n||t>n)throw new Error("Requested texture size [".concat(e,"x").concat(t,"] greater than WebGL maximum on this browser / GPU [").concat(n,"x").concat(n,"]."))}(t,n);var i=function(e){return Jne(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return Vne(e,(function(){return e.bindTexture(s,i)})),Vne(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),Vne(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),Vne(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),Vne(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),Vne(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,o,null)})),Vne(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),i}function Ere(e){return e.internalFormatFloat}function Tre(e){return e.internalFormatHalfFloat}function Nre(e){return e.downloadTextureFormat}function Are(e){return e.internalFormatPackedFloat}function _re(e){return e.internalFormatPackedHalfFloat}function Rre(e,t,n,r,a,o,i,s){var u=e,c=new Float32Array(function(e,t){var n=Ky(Lne(e,t),2);return n[0]*n[1]*4}(o,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var Ore=function(){function e(t){_y(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Y$().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){Fne[e]=t}(n,t)):this.gl=Dne(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(1===Y$().getNumber("WEBGL_VERSION")){var o="OES_texture_half_float";if(this.textureFloatExtension=zne(this.gl,"OES_texture_float"),ore(this.gl,o))this.textureHalfFloatExtension=zne(this.gl,o);else if(Y$().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ore(this.gl,a))this.colorBufferHalfFloatExtension=zne(this.gl,a);else if(Y$().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ore(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!ore(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=Ire(this.gl),this.indexBuffer=Cre(this.gl),this.framebuffer=function(e){return Jne(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=Une(this.gl,this.textureHalfFloatExtension)}var t;return Oy(e,[{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Vne(t,(function(){return t.finish()})),Vne(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),Vne(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),Vne(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),Vne(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),Vne(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ky(Bne(t,n),2);return Sre(e,a[0],a[1],Ere(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ky(Bne(t,n),2);return Sre(e,a[0],a[1],Tre(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ky(Bne(t,n),2);return Sre(e,a[0],a[1],Nre(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){Vne(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?Vne(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):Vne(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),Vne(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,o){var i,s,u;Vne(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,u=o.internalFormatPackedFloat),i.set(a),Vne(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,i)})),Vne(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ky(Lne(t,n),2);return Sre(e,a[0],a[1],_re(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Ky(Lne(t,n),2);return Sre(e,a[0],a[1],Are(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&($ne(this.gl,this.framebuffer),this.outputTexture=null),Vne(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=Ky(Bne(t,n),2),o=a[0],i=a[1],s=new Uint8Array(t*n*4);return Vne(e,(function(){return e.readPixels(0,0,o,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,o){return Rre(this.gl,e,0,0,0,a,o,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();Vne(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var o=16*t*n;return Vne(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),Vne(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),Vne(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(Y$().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(o,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=o}else Y$().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Y$().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return Vne(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl,r=jne(n,e);null==this.vertexShader&&(this.vertexShader=wre(n));var a=function(e){return Jne(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return Vne(n,(function(){return n.attachShader(a,t.vertexShader)})),Vne(n,(function(){return n.attachShader(a,r)})),function(e,t){if(Vne(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,a),this.debug&&Kne(n,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=function(e,t,n){return Vne(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),Xne(e,t,"clipSpacePos",n,3,20,0)&&Xne(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),a}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Vne(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Kne(this.gl,this.program),Vne(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return Jne(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),Vne(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),function(e,t,n,r){Vne(e,(function(){return Qne(e,t,r)})),Vne(e,(function(){return e.uniform1i(n,r)}))}(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=Ky(Lne(t,n),2),a=r[0],o=r[1];this.setOutputMatrixTextureDriver(e,a,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&Kne(this.gl,this.program),Zne(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Vne(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),Vne(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=zne(this.gl,2===Y$().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===Y$().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==Y$().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:(t=Ay(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S$((function(){return n.disposed||n.isQueryAvailable(t,Y$().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,Y$().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}
/**
	       * @license
	       * Copyright 2017 Google LLC. All Rights Reserved.
	       * Licensed under the Apache License, Version 2.0 (the "License");
	       * you may not use this file except in compliance with the License.
	       * You may obtain a copy of the License at
	       *
	       * http://www.apache.org/licenses/LICENSE-2.0
	       *
	       * Unless required by applicable law or agreed to in writing, software
	       * distributed under the License is distributed on an "AS IS" BASIS,
	       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	       * See the License for the specific language governing permissions and
	       * limitations under the License.
	       * =============================================================================
	       */(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||S$((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),Yne(this.gl,e,this.framebuffer),this.debug&&Zne(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(Yne(this.gl,this.outputTexture,this.framebuffer),this.debug&&Zne(this.gl)):$ne(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;Yne(r,e,this.framebuffer),this.debug&&Zne(r),this.outputTexture=e,Vne(r,(function(){return r.viewport(0,0,t,n)})),Vne(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),Vne(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}},{key:"debug",get:function(){return Y$().getBool("DEBUG")}}]),e}(),Fre=M6.getBroadcastDims;function Mre(e,t,n){var r=[];if(e.forEach((function(e){var t=x$(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(Hre(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,o,i=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?Bre(e,r):Dre(e,r);var o=e.shapeInfo.logicalShape,i=t.logicalShape;return o.length<=i.length&&(a+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),o="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=Fre(e.shapeInfo.logicalShape,t.logicalShape),c=jre(s),l=s-i,d=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(d[e+l]," = 0;")})).join("\n");var p;p=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+l])})).join(", ");var f="return outputValue;",h=1===x$(e.shapeInfo.logicalShape),m=1===x$(t.logicalShape);if(1!==i||h||m){if(h&&!m)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=i-2,v=i-1;u.indexOf(g)>-1&&u.indexOf(v)>-1?f="return vec4(outputValue.x);":u.indexOf(g)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(p,");\n      ").concat(f,"\n    }\n  ")}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&k$(i,o))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=jre(u),d=Fre(e.shapeInfo.logicalShape,t.logicalShape),p=u-s,f=["x","y","z","w","u","v"];c=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(f[e+p]," = 0;")})).join("\n");var h;return h=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+p])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(h,");\n    }\n  ")}(e,t)),a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=dre(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),d=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(Pre,"\n    ").concat(Lre,"\n    ").concat(Ure,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===r[0]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    "):1===r[1]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(k$(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),o=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),o=a*Math.ceil(e[e.length-2]/2),i=o,s="",u="b, r, c",c=2;c<e.length-1;c++)i*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(i,";\n      index -= b").concat(c," * ").concat(i,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){return 1===t[0]?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    "):1===t[1]?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){return k$(e,t)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    "):1===e[1]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    "):1===e[0]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    "):n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(fre(["r","c","d"],e),"\n    return ivec3(r, c, d);\n  }\n");var r=pre(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(fre(["r","c","d","d2"],e),"\n      return ivec4(r, c, d, d2);\n    }\n  ");var r=pre(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=pre(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=pre(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(d+=Vre),[d,l,o,i,a,s,n.userCode].join("\n")}function Dre(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=Ky(e.shapeInfo.texShape,2),o=a[0],i=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=Wre(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=Ky(e.shapeInfo.texShape,2),c=u[0],l=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(zre(e),"\n      }\n    ");var a=e.shapeInfo.texShape,o=a[0],i=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=Wre(n);return 1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(i,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&k$(n,o)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var i=o[0];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(o[1],".0, ").concat(i,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var s=N$(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){return"\n      ".concat(Dre(Gre(e,l),t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(qre(["row","col"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(zre(e),"\n      }\n    ");var d=o[0],p=o[1],f=Wre(r);return 1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(d,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===d?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(f,";\n    vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],i=n[2],s=N$(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){return"\n        ".concat(Dre(Gre(e,l),t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(qre(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(i,", 1)));\n        ").concat(zre(e),"\n      }\n    ");var d=e.shapeInfo.texShape,p=d[0],f=d[1],h=e.shapeInfo.flatOffset;if(f===o&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(f,".0, ").concat(p,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(f===i&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(f,".0, ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var m=Wre(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],i=n[2]*o,s=n[1]*i,u=N$(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){return"\n      ".concat(Dre(Gre(e,c),t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(qre(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(i,", ").concat(o,", 1)));\n        ").concat(zre(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],h=p[1],m="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),v="int stride0 = ".concat(r,"Shape[1] * stride1;");if(h===s&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(m,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(h,".0, ").concat(f,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(h===o&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(h,".0, ").concat(f,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var y=Wre(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(m,"\n      ").concat(g,"\n      ").concat(v,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(f,", ").concat(h,", index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,i=t[2]*o,s=t[1]*i,u=N$(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){return"\n      ".concat(Dre(Gre(e,c)),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(qre(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(i,", ").concat(o,", ").concat(a,")) +\n          depth3;\n        ").concat(zre(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],h=p[1];if(h===s&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(o,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(h,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(h===a&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(h,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=Wre(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(o," +\n          depth2 * ").concat(a," + depth3 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(f,", ").concat(h,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=N$(t),o=a.newShape,i=a.keptDims;if(o.length<t.length){return"\n      ".concat(Dre(Gre(e,o)),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(qre(["row","col","depth","depth2","depth3","depth4"],i),");\n      }\n    ")}var s=t[5],u=t[4]*s,c=t[3]*u,l=t[2]*c,d=t[1]*l;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(d,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(s,", 1)));\n        ").concat(zre(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],m=f[1];if(m===d&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(l,", ").concat(c,", ").concat(u,", ").concat(s,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===s&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=Wre(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(d," + col * ").concat(l," + depth * ").concat(c," +\n          depth2 * ").concat(u," + depth3 * ").concat(s," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling is not yet supported"))}}function Bre(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=dre();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=dre();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");var i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=o[0],s=o[1],u=dre();if(null!=o&&k$(n,o))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){return"\n        ".concat(Bre(Gre(e,n.slice(1)),t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(qre(["b","row","col"],[1,2]),");\n        }\n      ")}var s=dre();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ");var u=i[0],c=i[1],l=Math.ceil(n[2]/2),d=l*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(u,", ").concat(c,", ").concat(d,", ").concat(l,", b, row, col);\n      return ").concat(s.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=dre();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var o=e.shapeInfo.logicalShape,i=o.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],d=Math.ceil(o[i-1]/2),p=d*Math.ceil(o[i-2]/2),f="int b, int row, int col",h="b * ".concat(p," + (row / 2) * ").concat(d," + (col / 2)"),m=2;m<i-1;m++)f="int b".concat(m,", ")+f,p*=o[i-m-1],h="b".concat(m," * ").concat(p," + ")+h;return"\n    vec4 ".concat(r,"(").concat(f,") {\n      int index = ").concat(h,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var Pre="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Lre="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Ure="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Vre="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Wre(e){return"offset".concat(e)}function zre(e){var t=e.name,n=x$(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function jre(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function Hre(e,t,n){var r=N$(t).newShape,a=t.length,o=e&&3===a&&1===t[0],i=o?t.slice(1):r,s=!e&&a>1&&!k$(t,n)&&r.length<a||o;return{useSqueezeShape:s,uniformShape:s?i:t}}function Gre(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function qre(e,t){return t.map((function(t){return e[t]})).join(", ")}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Kre(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but was executed with ").concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],o=a.shape;if(!k$(r,o))throw Error("Binary was compiled with different shapes than the current args. Shapes ".concat(r," and ").concat(o," must match"));if(!e.isUniform||!a.isUniform){var i=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!k$(i,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape ".concat(i," and ").concat(s," must match"))}}))}function Xre(e){return Y$().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Qre=g9.addImpl,Yre=g9.bincountImpl,$re=g9.bincountReduceImpl,Zre=g9.ceilImpl,Jre=g9.concatImpl,eae=g9.equalImpl,tae=g9.expImpl,nae=g9.expm1Impl,rae=g9.floorImpl,aae=g9.gatherNdImpl,oae=g9.gatherV2Impl,iae=g9.greaterImpl,sae=g9.greaterEqualImpl,uae=g9.lessImpl,cae=g9.lessEqualImpl,lae=g9.linSpaceImpl,dae=g9.logImpl,pae=g9.maxImpl,fae=g9.maximumImpl,hae=g9.minimumImpl,mae=g9.multiplyImpl,gae=g9.negImpl,vae=g9.notEqualImpl,yae=g9.prodImpl,bae=g9.rangeImpl,xae=g9.rsqrtImpl,kae=g9.simpleAbsImpl,wae=g9.sliceImpl,Iae=g9.sparseFillEmptyRowsImpl,Cae=g9.sparseReshapeImpl,Sae=g9.sparseSegmentReductionImpl,Eae=g9.stridedSliceImpl,Tae=g9.stringNGramsImpl,Nae=g9.stringSplitImpl,Aae=g9.stringToHashBucketFastImpl,_ae=g9.subImpl,Rae=g9.tileImpl,Oae=g9.topKImpl,Fae=g9.transposeImpl,Mae=g9.uniqueImpl;
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Dae(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function Bae(e,t){return 1===t?[e]:Dae(e,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Pae=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(0===n)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var r=Bae("rc",n),a=jre(n),o=function(e,t,n){if(1===e)return"rc > ".concat(t[0]);for(var r="",a=e-2;a<e;a++)r+="".concat(n[a]," >= ").concat(t[a]),a<e-1&&(r+="||");return r}(n,t,r),i=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = ".concat(a[0],";\n    int c = ").concat(a[1],";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ").concat(t,";\n    bool rEdge = rp1 >= ").concat(n,";\n  ")}(n,t[t.length-1],t[t.length-2],r),s=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var o="".concat(0===r?"r":"rp1",", ").concat(0===a?"c":"cp1"),i=2;i<e;i++)o="".concat(t[t.length-1-i],",")+o;n.push(o)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= ".concat(e[0]," ? 0. : getA(rc + 1),\n            0, 0"):"getA(".concat(r[0],"),\n          cEdge ? 0. : getA(").concat(r[1],"),\n          rEdge ? 0. : getA(").concat(r[2],"),\n          rEdge || cEdge ? 0. : getA(").concat(r[3],")")}
/**
	     * @license
	     * Copyright 2018 Google LLC. All Rights Reserved.
	     * Licensed under the Apache License, Version 2.0 (the "License");
	     * you may not use this file except in compliance with the License.
	     * You may obtain a copy of the License at
	     *
	     * http://www.apache.org/licenses/LICENSE-2.0
	     *
	     * Unless required by applicable law or agreed to in writing, software
	     * distributed under the License is distributed on an "AS IS" BASIS,
	     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	     * See the License for the specific language governing permissions and
	     * limitations under the License.
	     * =============================================================================
	     */(t,r);this.userCode="\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n\n          if(").concat(o,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(s,"));\n          }\n        }\n      ")}},Lae=function e(t,n){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r,a="",o=0;o<4;o++){var i="thisRC = rc;";o%2==1&&(i+="thisRC.z += 1;"),o>1&&(i+="thisRC.y += 1;"),a+="\n        ".concat(i,"\n        ").concat(o>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(o,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(o>0?"}":"","\n      ")}
/**
	   * @license
	   * Copyright 2017 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
this.userCode="\n      ".concat((r=n,"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(pre(["r","c","d"],r),"\n      return ivec3(r, c, d);\n    }\n  ")),"\n      ").concat(hre(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(t[1],";\n        int cols = ").concat(t[2],";\n\n        ").concat(a,"\n\n        setOutput(result);\n      }\n    ")},Uae=function(){function e(t){_y(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return Oy(e,[{key:"acquireTexture",value:function(e,t,n){var r=Wae(t,n),a=zae(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var o,i=Vae(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===One.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===One.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===One.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===One.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===One.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=Wae(n,r),o=zae(t,a,r);o in this.freeTextures||(this.freeTextures[o]=[]);var i=Vae(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Y$().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=i):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;var u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}}]),e}();function Vae(e,t,n,r,a){var o,i=function(e,t){switch(e){case One.PACKED_2X2_FLOAT32:return Are(t);case One.PACKED_2X2_FLOAT16:return _re(t);case One.UNPACKED_FLOAT32:return Ere(t);case One.UNPACKED_FLOAT16:return Tre(t);case One.PACKED_4X1_UNSIGNED_BYTE:return Nre(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=Ky(Lne(e[0],e[1]),2);o=s[0]*s[1]}else{var u=Ky(Bne(e[0],e[1]),2);o=u[0]*u[1]}return o*function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;throw new Error("Unknown internal format ".concat(t))}(n,i)}function Wae(e,t){if(e===Rne.UPLOAD)return One.PACKED_2X2_FLOAT32;if(e===Rne.RENDER||null==e)return function(e){return Y$().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?One.PACKED_2X2_FLOAT32:One.UNPACKED_FLOAT32:e?One.PACKED_2X2_FLOAT16:One.UNPACKED_FLOAT16}(t);if(e===Rne.DOWNLOAD||e===Rne.PIXELS)return One.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function zae(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var jae=function e(t,n){_y(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=Xre(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},Hae="return abs(x);",Gae="return x;",qae=function e(t,n){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=Xre(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},Kae=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,r=Bae("rc",n),a=jre(n),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),i=r.slice(-2),s=n<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(o,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")},Xae=i4,Qae={},Yae=Y$().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),$ae=function(e){Dy(o,e);var t,n,r,a=Hy(o);function o(e){var t,n;if(_y(this,o),(t=a.call(this)).pendingRead=new WeakMap,t.pendingDisposal=new WeakSet,t.dataRefCount=new WeakMap,t.numBytesInGPU=0,t.uploadWaitMs=0,t.downloadWaitMs=0,t.lastGlFlushTime=0,t.warnedAboutMemory=!1,t.pendingDeletes=0,t.disposed=!1,!Y$().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var r=Dne(Y$().getNumber("WEBGL_VERSION"));t.binaryCache=((n=Y$().getNumber("WEBGL_VERSION"))in Qae||(Qae[n]={}),Qae[n]),t.gpgpu=new Ore(r),t.canvas=r.canvas,t.gpgpuCreatedLocally=!0}else t.gpgpu=e,t.binaryCache={},t.gpgpuCreatedLocally=!1,t.canvas=e.gl.canvas;return t.textureManager=new Uae(t.gpgpu),t.numMBBeforeWarning=null==Y$().global.screen?1024:Y$().global.screen.height*Y$().global.screen.width*window.devicePixelRatio*600/1024/1024,t.texData=new l$(zy(t),Y0()),jy(t)}return Oy(o,[{key:"nextDataId",value:function(){return o.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((Y$().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Y$().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:Rne.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(Y$().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:Rne.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,o=t.slice,i=t.shape,s=t.isPacked;if(null!=o){var u;u=s?new qae(i,Gae):new jae(i,Gae);var c=this.runWebGLProgram(u,[{dataId:e,shape:i,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,p,f=null!=this.activeTimers;return f&&(d=QZ()),p="complex64"===r?l6(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.getValuesFromTexture(e),f&&(this.downloadWaitMs+=QZ()-d),this.convertAndCacheOnCPU(e,p)}},{key:"read",value:(r=Ay(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,o=r.shape,i=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==i){e.next=8;break}return l=c?new qae(o,Gae):new jae(o,Gae),d=this.runWebGLProgram(l,[{dataId:t,shape:o,dtype:s}],s),p=this.read(d.dataId),e.abrupt("return",(this.disposeIntermediateTensorInfo(d),p));case 8:if(null==a){e.next=10;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 10:if(Y$().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==Y$().getNumber("WEBGL_VERSION")){e.next=12;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 12:if(m=null,"complex64"!==s&&Y$().get("WEBGL_BUFFER_SUPPORTED")&&(f=this.decode(t),v=this.texData.get(f.dataId),m=(g=this.gpgpu).createBufferFromTexture.apply(g,[v.texture].concat(Xy(Pne(o))))),this.pendingRead.set(t,[]),e.t0="complex64"!==s,!e.t0){e.next=19;break}return e.next=19,this.gpgpu.createAndWaitForFence();case 19:if("complex64"!==s){e.next=26;break}return e.next=22,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 22:y=e.sent,h=l6(y[0],y[1]),e.next=27;break;case 26:null==m?h=this.getValuesFromTexture(t):(b=x$(o),h=this.gpgpu.downloadFloat32MatrixFromBuffer(m,b));case 27:return null!=f&&this.disposeIntermediateTensorInfo(f),null!=m&&Vne(x=this.gpgpu.gl,(function(){return x.deleteBuffer(m)})),k=this.convertAndCacheOnCPU(t,h),w=this.pendingRead.get(t),e.abrupt("return",(this.pendingRead.delete(t),w.forEach((function(e){return e(k)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Y0().removeDataId(t,this),this.pendingDeletes--),k));case 30:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return $Z(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return m0(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!Wne(n)){if(Y$().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"));throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,o=x$(n);if(Y$().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var i,s=this.decode(e),u=this.texData.get(s.dataId),c=(i=this.gpgpu).downloadMatrixFromPackedTexture.apply(i,[u.texture].concat(Xy(Pne(n)))).subarray(0,o);return this.disposeIntermediateTensorInfo(s),c}var l=Y$().getBool("WEBGL_PACK")&&!0===a,d=l?nre(n):n,p=l?new bre(d):new yre(d),f=this.runWebGLProgram(p,[{shape:d,dtype:r,dataId:e}],"float32"),h=this.texData.get(f.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture,h.texShape[0],h.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(f),m}},{key:"timerAvailable",value:function(){return Y$().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:(n=Ay(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.activeTimers,r=[],a=!1,null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,t(),o=b$(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=b$(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=n,a&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},!(Y$().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=13;break}return e.next=9,Promise.all(o);case 9:u=e.sent,s.kernelMs=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}(u),s.getExtraProfileInfo=function(){return u.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=14;break;case 13:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 14:return e.abrupt("return",(this.uploadWaitMs=0,this.downloadWaitMs=0,s));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return Y$().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:QZ(),endMs:null}}},{key:"endTimer",value:function(e){return Y$().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=QZ(),e)}},{key:"getQueryTime",value:(t=Ay(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Y$().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,o=t.usage,i=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,o,i)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yae;return Y$().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&x$(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){c6("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Xae(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new qae(e.shape,t),a=this.compileAndRun(r,[e],n);return Y0().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=kae(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Y$().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Hae,e.dtype);var n=new jae(e.shape,Hae),r=this.compileAndRun(n,[e]);return Y0().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&M$(n[0])){var a=n.map((function(e){return YZ(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return Y0().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new Kae(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new Pae(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[ere(e.shape)].concat(Xy(tre(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[ere(t)].concat(Xy(tre(t))),o=new Lae(a,n),i=this.runWebGLProgram(o,[r],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}},{key:"decode",value:function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,o=n.dtype,i=nre(a);return t=r?new vre(i):new gre(i),{dtype:o,shape:a,dataId:this.runWebGLProgram(t,[{shape:i,dtype:o,dataId:e}],o,null,!0).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(i.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===_ne.DENSE){var u=Pne(e.outputShape);s.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===x$(i.shape))return s.values=A$(i.dtype,0),i;var c=[],l=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&x$(t.shape)<=Y$().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!are(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=a.packedReshape(t,o),c.push(t),n=a.texData.get(t.dataId),r.shape=o}return a.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);var d,p={shape:i.shape,texData:s,isUniform:!1},f=function(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var o=t.texData.texShape,i=Hre(e.packedInputs,t.shape,o),s=i.useSqueezeShape,u=i.uniformShape,c="",l="",d="";if(1===u.length&&e.packedInputs){var p=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];c="".concat(p[0]>1,"_").concat(p[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var f=L$(u);d="".concat(f[0]===o[1],"_").concat(f[f.length-1]===o[1])}}else l="".concat(u[0]>1,"_").concat(u[1]>1);var h=t.shape.length,m=2===h&&k$(t.shape,o),g=1===x$(t.shape),v=r2(t.shape,n.shape),y=!e.packedInputs&&h===n.shape.length&&k$(o,n.texData.texShape),b=e.packedInputs||h>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);r+="".concat(h,"_").concat(y,"_").concat(s,"_").concat(u.length,"_").concat(g,"_").concat(v,"_").concat(m,"_").concat(c,"_").concat(l,"_").concat(d,"_").concat(b,"_").concat(a)}else{var x=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(x,"_").concat(a)}}));var a=e.userCode,o=e.constructor.name;return o+="_"+r+"_"+a+"".concat(Y$().getNumber("WEBGL_VERSION"))}(e,l,p),h=this.getAndSaveBinary(f,(function(){return function(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=a.map((function(e){return e.shapeInfo})),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=Mre(a,i,t),u=e.createProgram(s),c=null,l=e.getUniformLocation(u,"NAN",!1);1===Y$().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(u,"INFINITY",!1));for(var d,p,f,h=!1,m={},g={},v={},y=0;y<t.variableNames.length;y++){var b=t.variableNames[y];m[b]=e.getUniformLocation(u,b,h),m["offset".concat(b)]=e.getUniformLocation(u,"offset".concat(b),h),t.enableShapeUniforms&&(g["".concat(b,"Shape")]=e.getUniformLocation(u,"".concat(b,"Shape"),h),v["".concat(b,"TexShape")]=e.getUniformLocation(u,"".concat(b,"TexShape"),h))}t.enableShapeUniforms&&(d=e.getUniformLocation(u,"outShape",h),f=e.getUniformLocation(u,"outShapeStrides",h),p=e.getUniformLocation(u,"outTexShape",h));var x=[];return t.customUniforms&&t.customUniforms.forEach((function(t,n){x[n]=e.getUniformLocation(u,t.name,h)})),{program:t,source:s,webGLProgram:u,uniformLocations:m,customUniformLocations:x,inShapeInfos:o,outShapeInfo:i,infLoc:c,nanLoc:l,inShapesLocations:g,inTexShapesLocations:v,outShapeLocation:d,outShapeStridesLocation:f,outTexShapeLocation:p}}(a.gpgpu,e,l,p)})),m=null!=this.activeTimers;m&&(d=this.startTimer()),function(e,t,n,r,a){t.program.enableShapeUniforms||(Kre(t.inShapeInfos,n),Kre([t.outShapeInfo],[r]));var o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o,i[0],i[1]):e.setOutputMatrixTexture(o,i[0],i[1]),e.setProgram(t.webGLProgram),1===Y$().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],o=t.uniformLocations[a],i=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var c=Hre(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(c.length){case 1:e.gl.uniform1iv(s,new Int32Array(c));break;case 2:e.gl.uniform2iv(s,new Int32Array(c));break;case 3:e.gl.uniform3iv(s,new Int32Array(c));break;case 4:e.gl.uniform4iv(s,new Int32Array(c))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=o)if(n.isUniform)if(x$(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var l=n.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(o,l)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=L$(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var o=t.customUniformLocations[r],i=a[r];if("float"===n.type)e.gl.uniform1fv(o,i);else if("vec2"===n.type)e.gl.uniform2fv(o,i);else if("vec3"===n.type)e.gl.uniform3fv(o,i);else if("vec4"===n.type)e.gl.uniform4fv(o,i);else if("int"===n.type)e.gl.uniform1iv(o,i);else if("ivec2"===n.type)e.gl.uniform2iv(o,i);else if("ivec3"===n.type)e.gl.uniform3iv(o,i);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(o,i)}})),e.executeProgram()}(this.gpgpu,h,l,p,r),c.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),m&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)}));var g=Y$().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var v=QZ();v-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!Y$().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){var y=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),y}return i}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;this.disposed||(Y$().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=$0((function(){if(!Y$().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Y$().getBool("DEBUG");Y$().set("DEBUG",!1);var n=e.abs(D3(1e-8)).dataSync()[0];if(Y$().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,o=t.texture,i=t.usage,s=t.isPacked;if(null==o){var u,c=null!=this.activeTimers;c&&(u=QZ());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Y$().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?h$(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=N$(e);e=r.newShape}var a=x$(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var o,i=ere(e),s=2,u=2;return e.length&&(s=(o=Ky(tre(e),2))[0],u=o[1]),I$(a=i*(s/2)*(u/2)).map((function(e){return 2*e}))}return I$(a)}(n,s),t.texShape=l),null!=a){var d,p,f=nre(n),h=l[1],m=l[0],g=a instanceof Uint8Array;s?(h=(d=Ky(Lne(l[0],l[1]),2))[0],m=d[1],p=new kre(f,[m,h],g)):p=new xre(f,[m,h],g);var v=this.makeTensorInfo([m,h],r);this.texData.get(v.dataId).usage=g?Rne.PIXELS:Rne.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),h,m,a);var y=this.runWebGLProgram(p,[v],r,null,!0),b=this.texData.get(y.dataId);t.texture=b.texture,t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,this.disposeIntermediateTensorInfo(v),this.texData.delete(y.dataId),t.values=null,c&&(this.uploadWaitMs+=QZ()-u)}else{var x=this.acquireTexture(l,i,r,s);t.texture=x}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}
/**
	       * @license
	       * Copyright 2020 Google Inc. All Rights Reserved.
	       * Licensed under the Apache License, Version 2.0 (the "License");
	       * you may not use this file except in compliance with the License.
	       * You may obtain a copy of the License at
	       *
	       * http://www.apache.org/licenses/LICENSE-2.0
	       *
	       * Unless required by applicable law or agreed to in writing, software
	       * distributed under the License is distributed on an "AS IS" BASIS,
	       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	       * See the License for the specific language governing permissions and
	       * limitations under the License.
	       * =============================================================================
	       */(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, most likely due to a memory leak"))}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*F$(t)}}]),o}(d$);$ae.nextDataId=0,AJ()&&e1("webgl",(function(){return new $ae}),2)
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */;var Zae=function e(t,n,r){_y(this,e),this.variableNames=["A","B"],this.outputShape=o2(n,r),this.enableShapeUniforms=Xre(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")},Jae=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_y(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o2(n,r);var o=this.outputShape.length;this.enableShapeUniforms=Xre(o);var i="";if(a)if(0===o||1===x$(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          ".concat(jre(o)," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var s=Bae("coords",o);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(s[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(s[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(s[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(s[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function eoe(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var toe={kernelName:"Identity",backendName:"webgl",kernelFunc:eoe};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function noe(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),s=eoe({inputs:{x:r},backend:n}),u=eoe({inputs:{x:a},backend:n});return i.complexTensorInfos={real:s,imag:u},o}var roe={kernelName:"Complex",backendName:"webgl",kernelFunc:noe},aoe="return (a < 0.) ? b * a : a;",ooe="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",ioe={kernelName:"LeakyRelu",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha,i=n.makeTensorInfo([],"float32",KZ(o,"float32")),s=Y$().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Jae(ooe,a.shape,i.shape):new Zae(aoe,a.shape,i.shape),u=n.runWebGLProgram(s,[a,i],a.dtype);return n.disposeIntermediateTensorInfo(i),u}},soe="return (a < 0.) ? b * a : a;",uoe="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",coe={kernelName:"Prelu",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=Y$().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Jae(uoe,r.shape,a.shape):new Zae(soe,r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function loe(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var o,i=e.inputs,s=e.backend,u=i.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var d=c.texData.get(u.dataId),p=r(d.values,l);return c.makeTensorInfo(u.shape,l,p)}return o=Y$().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new qae(u.shape,n):new jae(u.shape,t),c.runWebGLProgram(o,[u],l)}}function doe(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,o=e.supportsComplex,i=void 0!==o&&o,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,o=e.backend,c=r.a,l=r.b,d=o;if(i&&"complex64"===c.dtype){var p=d.texData.get(c.dataId),f=d.texData.get(l.dataId),h=[[p.complexTensorInfos.real,f.complexTensorInfos.real],[p.complexTensorInfos.imag,f.complexTensorInfos.imag]].map((function(e){var n=Ky(e,2),r=n[0],a=n[1],o={dataId:r.dataId,dtype:r.dtype,shape:c.shape},i={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new Zae(t,c.shape,l.shape);return d.runWebGLProgram(s,[o,i],vJ(r.dtype,a.dtype))})),m=Ky(h,2),g=m[0],v=m[1],y=noe({inputs:{real:g,imag:v},backend:d});return d.disposeIntermediateTensorInfo(g),d.disposeIntermediateTensorInfo(v),y}var b,x=u||vJ(c.dtype,l.dtype);if(("string"===c.dtype||"string"===l.dtype||d.shouldExecuteOnCPU([c,l]))&&null!=s){var k=d.texData.get(c.dataId).values,w=d.texData.get(l.dataId).values,I="string"===c.dtype?_6(k):k,C="string"===c.dtype?_6(w):w,S=Ky(s(c.shape,l.shape,I,C,x),2),E=S[0],T=S[1],N=d.makeTensorInfo(T,x);return d.texData.get(N.dataId).values=E,N}return b=Y$().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new Jae(n,c.shape,l.shape,a):new Zae(t,c.shape,l.shape),d.runWebGLProgram(b,[c,l],x)}}function poe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return t?uoe:soe;if("leakyrelu"===e)return t?ooe:aoe;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var foe=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];_y(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;var l=a?t[1]:t[2],d=Math.ceil(l/2),p=a?"i * 2, rc.y":"rc.y, i * 2",f=o?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",v="";s&&(g=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),v="result = activation(result);");var y=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(g,"\n\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(d,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(p,");\n          vec4 b = getMatrixB(batchB, ").concat(f,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(m[0],");\n          result += (").concat(h[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(v,"\n\n        setOutput(result);\n      }\n    ")},hoe="return areal * breal - aimag * bimag;",moe="return areal * bimag + aimag * breal;",goe=function e(t,n,r){_y(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=o2(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")},voe="return a * b;";
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function yoe(e){var t,n=e.inputs,r=e.backend,a=n.a,o=n.b,i=vJ(a.dtype,o.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(o.dataId),c=new goe(hoe,a.shape,o.shape),l=new goe(moe,a.shape,o.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:o.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:o.shape}],p=r.runWebGLProgram(c,d,"float32"),f=r.runWebGLProgram(l,d,"float32"),h=noe({inputs:{real:p,imag:f},backend:r});return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(f),h}if(r.shouldExecuteOnCPU([a,o])){var m=r.texData.get(a.dataId),g=r.texData.get(o.dataId),v=Ky(mae(a.shape,o.shape,m.values,g.values,i),2),y=v[0],b=v[1],x=r.makeTensorInfo(b,i);return r.texData.get(x.dataId).values=y,x}return t=Y$().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Jae(voe,a.shape,o.shape):new Zae(voe,a.shape,o.shape),r.runWebGLProgram(t,[a,o],i)}var boe={kernelName:"Multiply",backendName:"webgl",kernelFunc:yoe};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function xoe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=n,s=x$(a.shape),u=E$(o,s),c=x$(u);g$(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old shape (").concat(a.shape,") has ").concat(s," elements. The new shape and old shape must have the same number of elements.")}));var l=i.texData.get(a.dataId);return!l.isPacked||are(a.shape,u)||null!==l.texture&&are(l.shape,u)?(i.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[ere(e.shape)].concat(Xy(tre(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},o=[ere(t)].concat(Xy(tre(t))),i=new Lae(o,r),s=n.runWebGLProgram(i,[a],e.dtype,null,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}(a,u,i)}var koe={kernelName:"Reshape",backendName:"webgl",kernelFunc:xoe},woe=function e(t,n){_y(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(w$(l)?l.toPrecision(2):l,", ones);")}var d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")},Ioe=function e(t,n){_y(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),d=r%4,p="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),f="vec4";"all"===n?(s="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===n&&(s="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");var h="";o%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(p,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===d,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(p,"\n        } else if (").concat(2===d,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(p,"\n        } else if (").concat(3===d,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(p,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Coe(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=n6(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),o=e,i=0;i<a.length;i++){var s,u,c=a[i],l=c.inSize,d=c.windowSize,p=c.outSize;s="mean"===n?0===i?new woe({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:p},l):new woe({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:p}):new Ioe({windowSize:d,inSize:l,batchSize:e.shape[0],outSize:p},n),u=o,o=r.runWebGLProgram(s,[o],t),u.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(u)}return o}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Soe=function e(t,n){_y(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var o=jre(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}
/**
	   * @license
	   * Copyright 2019 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(n);this.userCode="\n    void main() {\n      ".concat(o," resRC = getOutputCoords();\n      setOutput(getA(").concat(i,"));\n    }\n    ")},Eoe=function e(t,n){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var o=jre(this.rank),i=Dae("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=i[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(i[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(o," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(l,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(i[this.rank-1],";\n      if(++").concat(i[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(l,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Toe(e,t,n){var r=Y$().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Eoe(e.shape,t):new Soe(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Noe(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,o=e.shape.length,i=T$(a,e.shape),s=i,u=j2(s,o),c=null!=u,l=e;c&&(l=Toe(e,u,r),s=G2(s.length,o)),z2("sum",s,o);var d=Ky(V2(l.shape,s),2),p=d[0],f=d[1],h=p;n&&(h=W2(p,i));var m=x$(f),g=xoe({inputs:{x:l},attrs:{shape:[x$(e.shape)/m,m]},backend:r}),v=Coe(g,yJ(e.dtype),"sum",r),y=xoe({inputs:{x:v},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(v),c&&r.disposeIntermediateTensorInfo(l),y}(t.x,r.axis,r.keepDims,n)}var Aoe={kernelName:"Sum",backendName:"webgl",kernelFunc:Noe};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function _oe(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.perm,s=r,u=o.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=o.shape[i[l]];if(s.shouldExecuteOnCPU([o])){var d=s.texData.get(o.dataId).values,p=Fae(d,o.shape,o.dtype,i,c);t=s.makeTensorInfo(c,o.dtype),s.texData.get(t.dataId).values=p}else t=Toe(o,i,s);return t}var Roe={kernelName:"Transpose",backendName:"webgl",kernelFunc:_oe};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Ooe(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,p=e.activation,f=void 0===p?null:p,h=t.shape.length,m=n.shape.length,g=r?t.shape[h-2]:t.shape[h-1],v=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[h-1]:t.shape[h-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),k=n.shape.slice(0,-2),w=x$(x),I=x$(k);g$(h>=2&&m>=2&&(w===I||1===w||1===I),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (".concat(x,") and (").concat(k,").")}));var C=(w>I?t.shape.slice(0,-2):n.shape.slice(0,-2)).concat([y,b]);g$(g===v,(function(){return"Error in matMul: inner shapes (".concat(g,") and (").concat(v,") of Tensors with shapes ").concat(t.shape," and ").concat(n.shape," and transposeA=").concat(r," and transposeB=").concat(a," must match.")}));var S,E=r?[w,g,y]:[w,y,g],T=a?[I,b,v]:[I,v,b],N=xoe({inputs:{x:t},backend:o,attrs:{shape:E}}),A=xoe({inputs:{x:n},backend:o,attrs:{shape:T}}),_=[N,A],R=Math.max(w,I),O=r?N.shape[1]:N.shape[2],F=null!=s,M=null!=c,D="leakyrelu"===f,B=null!=f?poe(f,!0):null;if((1===y||1===b)&&O>1e3&&!1===(F||M||D||null!=B)){var P=N,L=A;r&&(P=_oe({inputs:{x:N},backend:o,attrs:{perm:[0,2,1]}}),_.push(P)),a&&(L=_oe({inputs:{x:A},backend:o,attrs:{perm:[0,2,1]}}),_.push(L));var U=1===b,V=P;1!==b&&(V=xoe({inputs:{x:P},backend:o,attrs:{shape:[R,O,1]}}),_.push(V));var W=1===b?2:1,z=L;U&&(z=xoe({inputs:{x:L},backend:o,attrs:{shape:[R,1,O]}}),_.push(z));var j=yoe({inputs:{a:V,b:z},backend:o});S=Noe({inputs:{x:j},backend:o,attrs:{axis:W,keepDims:!0}}),_.push(j)}else{var H=vJ(t.dtype,n.dtype),G=new foe(E,T,[R,y,b],r,a,F,B,M,D),q=[N,A];if(null!=s&&q.push(s),M&&q.push(c),D){var K=o.makeTensorInfo([],"float32",KZ(d,"float32"));q.push(K),_.push(K)}S=o.runWebGLProgram(G,q,H)}var X=xoe({inputs:{x:S},backend:o,attrs:{shape:C}});_.push(S);for(var Q=0,Y=_;Q<Y.length;Q++){var $=Y[Q];o.disposeIntermediateTensorInfo($)}return X}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Foe={kernelName:"_FusedMatMul",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return Ooe({a:a,b:o,transposeA:u,transposeB:c,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},Moe={kernelName:"Abs",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var o=r.texData.get(a.dataId),i=kae(o.values);return r.makeTensorInfo(a.shape,a.dtype,i)}return t=Y$().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new qae(a.shape,"return abs(x);"):new jae(a.shape,"return abs(x);"),r.runWebGLProgram(t,[a],a.dtype)}},Doe={kernelName:"Acos",backendName:"webgl",kernelFunc:loe({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"})},Boe={kernelName:"Acosh",backendName:"webgl",kernelFunc:loe({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"})},Poe="return a + b;",Loe=doe({opSnippet:Poe,packedOpSnippet:Poe,supportsComplex:!0,cpuKernelImpl:Qre}),Uoe={kernelName:tZ,backendName:"webgl",kernelFunc:Loe},Voe=function e(t,n){_y(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},Woe=function e(t,n){_y(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},zoe={kernelName:"AddN",backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return eoe({inputs:{x:a[0]},backend:r});if(a.length>Y$().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(a.length/2),i=e({inputs:a.slice(0,o),backend:r}),s=e({inputs:a.slice(o),backend:r});return e({inputs:[i,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return vJ(e,t)})),c=a.map((function(e){return e.shape})),l=Y$().getBool("WEBGL_PACK")?new Woe(a[0].shape,c):new Voe(a[0].shape,c);return r.runWebGLProgram(l,a,u)}},joe={kernelName:"All",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=T$(o,a.shape),c=u,l=j2(c,s),d=a;null!=l&&(d=_oe({inputs:{x:a},backend:n,attrs:{perm:l}}),c=G2(c.length,s)),z2("all",c,s);var p,f=Ky(V2(d.shape,c),2),h=f[0],m=xoe({inputs:{x:d},backend:n,attrs:{shape:[-1,x$(f[1])]}}),g=Coe(m,m.dtype,"all",n);return p=xoe(i?{inputs:{x:g},backend:n,attrs:{shape:W2(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),p}},Hoe={kernelName:"Any",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=T$(o,a.shape),c=u,l=j2(c,s),d=a;null!=l&&(d=_oe({inputs:{x:a},backend:n,attrs:{perm:l}}),c=G2(c.length,s)),z2("any",c,s);var p,f=Ky(V2(d.shape,c),2),h=f[0],m=xoe({inputs:{x:d},backend:n,attrs:{shape:[-1,x$(f[1])]}}),g=Coe(m,m.dtype,"any",n);return p=xoe(i?{inputs:{x:g},backend:n,attrs:{shape:W2(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),p}},Goe=function e(t,n,r){_y(this,e),this.variableNames=["A"];var a=t.windowSize,o=t.batchSize,i=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")},qoe=function e(t,n,r,a){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,g$(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var o=t[t.length-1],i=Math.ceil(o/n);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,d=jre(l),p=Bae("coords",l);if(1===i){var f=jre(u=l+1);s="\n        ".concat(f," sourceLocR = ").concat(f,"(").concat(p.join(),", 0);\n        ++").concat(p[l-1],";\n        ").concat(f," sourceLocG = ").concat(f,"(").concat(p.join(),", 0);\n        ++").concat(p[l-2],";\n        ").concat(f," sourceLocA = ").concat(f,"(").concat(p.join(),", 0);\n        --").concat(p[l-1],";\n        ").concat(f," sourceLocB = ").concat(f,"(").concat(p.join(),", 0);\n        --").concat(p[l-2],";")}else u=l,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(p[l-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(p[l-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(p[l-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(p[l-2],";");var h=["x","y","z","w","u","v"].slice(0,u),m="."+h[u-1],g=h.map((function(e){return"int "+e})),v=Bae("sourceLocR",u-1).concat("inIdx.r"),y=Bae("sourceLocG",u-1).concat("inIdx.g"),b=Bae("sourceLocB",u-1).concat("inIdx.b"),x=Bae("sourceLocA",u-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(v.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),I="vec4(\n            getAChannel(".concat(v.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),C=a?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(C,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(p[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(p[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(I,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(I,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Koe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],o=t.shape[1];null!=r&&(a=r.shape[0],o=r.shape[1]);var i=n6(o),s={windowSize:i,inSize:o,batchSize:a,outSize:Math.ceil(o/i)},u=new Goe(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var d=Koe(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}function Xoe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,o=n6(a[a.length-1]),i=new qoe(a,o,n,null==r),s=null==r?[t]:[t,r],u=e.runWebGLProgram(i,s,"int32");if(u.shape.length===t.shape.length){var c=Xoe(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}return u}function Qoe(e,t,n,r){var a=[n];if(z2("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!Y$().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var o=[],i=Ky(V2(t.shape,a),2),s=i[0],u=x$(i[1]),c=xoe({inputs:{x:t},backend:e,attrs:{shape:[-1,u]}});o.push(c);var l=Koe(e,c,r);o.push(l);var d=xoe({inputs:{x:l},backend:e,attrs:{shape:s}});return o.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),d}return Xoe(e,t,r)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Yoe={kernelName:"ArgMax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=T$(r.axis,a.shape),i=j2(o,a.shape.length),s=a,u=[];null!=i&&(s=_oe({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(s),o=G2(o.length,s.shape.length)),z2("argMax",[o[0]],s.shape.length);var c=Qoe(n,s,o[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},$oe={kernelName:"ArgMin",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=T$(r.axis,a.shape),i=j2(o,a.shape.length),s=a,u=[];null!=i&&(s=_oe({inputs:{x:a},backend:n,attrs:{perm:i}}),u.push(s),o=G2(o.length,s.shape.length)),z2("argMin",[o[0]],s.shape.length);var c=Qoe(n,s,o[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},Zoe={kernelName:"Asin",backendName:"webgl",kernelFunc:loe({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"})},Joe={kernelName:"Asinh",backendName:"webgl",kernelFunc:loe({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"})},eie={kernelName:"Atan",backendName:"webgl",kernelFunc:loe({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"})},tie={kernelName:"Atan2",backendName:"webgl",kernelFunc:doe({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},nie={kernelName:"Atanh",backendName:"webgl",kernelFunc:loe({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"})},rie=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_y(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,p=t.effectiveFilterWidth,f=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,g="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),v="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(m||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(f,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?o?g:v:"wR * ".concat(p," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(x="avgValue / count");var k=4*Math.floor(i/4),w=i%4,I="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(h,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(I,"\n          }\n\n          int xC = xCCorner + ").concat(k,";\n          if (").concat(1===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(2===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(3===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(I,"\n          }\n        }\n        setOutput(").concat(x,");\n      }\n    ")}},aie=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(_y(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,p=t.dilationWidth,f=t.effectiveFilterDepth,h=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,v=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(v,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(f,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(p,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?o?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(h," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(w="avgValue / count");var I=4*Math.floor(i/4),C=i%4,S="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(v,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(I,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(p,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(p,", ch)\n              );\n\n              ").concat(S,"\n            }\n\n            int xC = xCCorner + ").concat(I,";\n            if (").concat(1===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(2===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(S,"\n            } else if (").concat(3===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(p,", ch),\n                initializationValue\n              );\n\n              ").concat(S,"\n            }\n          }\n          setOutput(").concat(w,");\n        }\n      }\n    ")}},oie={kernelName:"AvgPool",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;cre(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;g$(A1(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c=b1(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&k$(c.inShape,c.outShape))return eoe({inputs:{x:a},backend:n});var l=new rie(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}},iie={kernelName:"AvgPool3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=x1(a.shape,o,i,[1,1,1],s,u,c),d=new aie(l,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}},sie=function e(t){_y(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,d=c-1-t.padInfo.left,p=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(d,");\n      const float avgMultiplier = float(").concat(p,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},uie=function e(t){_y(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=d-1-t.padInfo.front,m=p-1-t.padInfo.top,g=f-1-t.padInfo.left,v=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(m,", ").concat(g,");\n      const float avgMultiplier = float(").concat(v,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(p,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},cie={kernelName:"AvgPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=x1(o.shape,i,s,[1,1,1],u,c),d=new uie(l);return n.runWebGLProgram(d,[a],o.dtype)}},lie={kernelName:"AvgPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;cre([a,o],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=b1(i.shape,s,u,1,c),d=new sie(l);return n.runWebGLProgram(d,[a],i.dtype)}},die={kernelName:"BatchMatMul",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return Ooe({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},pie=function e(t,n,r,a,o,i){_y(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],o2(t,n),o2(t,r);var s="0.0";null!=a&&(o2(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=o&&(o2(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")},fie=function e(t,n,r,a,o,i){_y(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],o2(t,n),o2(t,r);var s="vec4(0.0)";null!=a&&(o2(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=o&&(o2(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")},hie={kernelName:"FusedBatchNorm",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.mean,i=t.variance,s=t.offset,u=t.scale;g$(o.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),g$(null==s||o.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),g$(null==u||o.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,o,i],d=null;null!=s&&(d=s.shape,l.push(s));var p=null;null!=u&&(p=u.shape,l.push(u));var f=Y$().getBool("WEBGL_PACK_NORMALIZATION")?new fie(a.shape,o.shape,i.shape,d,p,c):new pie(a.shape,o.shape,i.shape,d,p,c);return n.runWebGLProgram(f,l,l[0].dtype)}},mie=function e(t){_y(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=jre(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return gie.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}
/**
	   * @license
	   * Copyright 2019 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(this.rank);r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(t.map((function(e,t){return"sourceLoc.".concat(gie[t]," = start[").concat(t,"] + coords.").concat(gie[t],";")})).join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")},gie=["x","y","z","w","u","v"],vie=function e(t){_y(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=jre(this.rank),r=Bae("coords",this.rank),a=Bae("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),i="getChannel(getSource(".concat(a.join(),"), ").concat(o,")"),s="\n      result.x = ".concat(i,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function yie(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=Ky(K0(a,r.begin,r.size),2),i=o[0],s=o[1];if(F0(a,i,s),0===x$(s))return n.makeTensorInfo(s,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var u=n.texData.get(a.dataId),c=wae(u.values,i,s,a.shape,a.dtype);return n.makeTensorInfo(s,a.dtype,c)}var l=n.texData.get(a.dataId).isPacked,d=G0(a.shape,i,s);if(l||!d){var p=Y$().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new vie(s):new mie(s),f=[i];return n.runWebGLProgram(p,[a],a.dtype,f)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),i=r.texData.get(o.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;var s=q0(t,L$(e.shape));a.slice&&(s+=a.slice.flatOffset),i.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),o}(a,i,s,n)}var bie={kernelName:"Slice",backendName:"webgl",kernelFunc:yie},xie={kernelName:"BatchToSpaceND",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;g$(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=a6(a.shape,o,s),c=o6(u.length,o.length),l=i6(a.shape,o,s),d=s6(i,o.length),p=u6(l,i,o.length),f=[],h=xoe({inputs:{x:a},backend:n,attrs:{shape:u}}),m=_oe({inputs:{x:h},backend:n,attrs:{perm:c}}),g=xoe({inputs:{x:m},backend:n,attrs:{shape:l}}),v=yie({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return f.push(h),f.push(m),f.push(g),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},kie={kernelName:"Bincount",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=Yre(s,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}},wie=doe({opSnippet:"return float(a != b);",cpuKernelImpl:vae,dtype:"bool"}),Iie={kernelName:"NotEqual",backendName:"webgl",kernelFunc:wie};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Cie(e){var t=e.inputs,n=e.backend,r=t.input;return eoe({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var Sie={kernelName:"Real",backendName:"webgl",kernelFunc:Cie},Eie={kernelName:"Cast",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function e(t){var n=t.inputs,r=t.backend,a=t.attrs,o=n.x,i=a.dtype;if("complex64"===i){if("complex64"===o.dtype)return eoe({inputs:{x:o},backend:r});var s=e3(o.shape),u=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),c=noe({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===o.dtype){var l=Cie({inputs:{input:o},backend:r}),d=e({inputs:{x:l},backend:r,attrs:{dtype:i}});return r.disposeIntermediateTensorInfo(l),d}if(!R$(o.dtype,i)){var p=eoe({inputs:{x:o},backend:r});return{dataId:p.dataId,shape:p.shape,dtype:i}}if("int32"===i)return function(e,t){var n=new jae(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===i){var f=r.makeTensorInfo([],"bool",A$("bool",1)),h=wie({inputs:{a:o,b:f},backend:r});return r.disposeIntermediateTensorInfo(f),h}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(i))}},Tie="return ceil(x);",Nie={kernelName:"Ceil",backendName:"webgl",kernelFunc:loe({opSnippet:Tie,packedOpSnippet:Tie,cpuKernelImpl:Zre})},Aie=function e(t){_y(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "},_ie=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "},Rie={kernelName:"ClipByValue",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.clipValueMin,s=a.clipValueMax;t=Y$().getBool("WEBGL_PACK_CLIP")?new _ie(o.shape):new Aie(o.shape);var u=[[i],[s]];return r.runWebGLProgram(t,[o],o.dtype,u)}},Oie=function e(t){_y(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Fie(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var Mie={kernelName:"ComplexAbs",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),o=new Oie(r.shape),i=[Fie(r,a.complexTensorInfos.real),Fie(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}},Die=function e(t){_y(this,e),this.outputShape=[],this.outputShape=t6(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],o=1;o<n.length;o++){var i=n[o-1];a.push("else if (yC < ".concat(n[o],") setOutput(getT").concat(o,"(yR, yC-").concat(i,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")},Bie=function e(t,n){_y(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=t6(t,n);var r=this.outputShape,a=r.length,o=jre(a),i=Bae("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],d=s.slice(-2),p=s.join(),f="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(p,"), vec2(").concat(d.join(),"));\n        }"),h=1;h<u.length;h++){var m=u[h-1];f+="\n        if (".concat(l," < ").concat(u[h],"  && ").concat(l," >= ").concat(u[h-1],") {\n          return getChannel(\n            getT").concat(h,"(").concat(Pie(s,l,m),"),\n            vec2(").concat(Pie(d,l,m),"));\n        }")}var g=u.length,v=u[u.length-1];f+="\n        return getChannel(\n          getT".concat(g,"(").concat(Pie(s,l,v),"),\n          vec2(").concat(Pie(d,l,v),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(f,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," + 1;\n        if (").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-2]," = ").concat(i[a-2]," + 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," - 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2]," &&\n            ").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Pie(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Lie(e){var t=e.inputs,n=e.backend,r=t.input;return eoe({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var Uie={kernelName:"Imag",backendName:"webgl",kernelFunc:Lie};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Vie(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return Cie({inputs:{input:e},backend:n})})),o=e.map((function(e){return Lie({inputs:{input:e},backend:n})})),i=Vie(a,t,n),s=Vie(o,t,n),u=noe({inputs:{real:i,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=x$(e.shape.slice(t));return xoe({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),p=t6(l.map((function(e){return e.shape})),1),f=1===l[0].shape[0],h=Jre(d,p,r,f),m=t6(e.map((function(e){return e.shape})),t),g=n.makeTensorInfo(m,r,h);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}if(e.length>Y$().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var v=Math.floor(e.length/2),y=Vie(e.slice(0,v),t,n),b=Vie(e.slice(v),t,n),x=Vie([y,b],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}if(Y$().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var k=new Bie(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(k,e,r)}var w=function(e,t,n){var r=t6(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return xoe({inputs:{x:e},attrs:{shape:[-1,x$(e.shape.slice(t))]},backend:n})})),outShape:r}}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(e,t,n),I=w.tensors2D,C=w.outShape,S=new Die(I.map((function(e){return e.shape}))),E=n.runWebGLProgram(S,I,r);I.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var T=xoe({inputs:{x:E},attrs:{shape:C},backend:n});return n.disposeIntermediateTensorInfo(E),T}function Wie(e){var t=e.inputs,n=e.backend,r=T$(e.attrs.axis,t[0].shape)[0],a=t6(t.map((function(e){return e.shape})),r);if(0===x$(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return x$(e.shape)>0}));return 1===o.length?eoe({inputs:{x:o[0]},backend:n}):(e6(o.map((function(e){return e.shape})),r),Vie(o,r,n))}var zie={kernelName:"Concat",backendName:"webgl",kernelFunc:Wie},jie=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,d=t.dilationWidth,p=t.filterHeight,f=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4,g="channelsLast"===t.dataFormat,v=g?1:2,y=g?2:3,b=g?3:1,x="",k="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(v,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(p,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(f,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")},Hie=function e(t){_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,p=t.filterHeight,f=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(i,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Gie=function e(t,n,r){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var a=r.filterWidth,o=r.inChannels,i=r.strideWidth,s=r.strideHeight,u=r.padInfo,c=r.outWidth,l=r.dilationWidth,d=r.dilationHeight,p=r.dataFormat,f=u.left,h=u.top,m=o*a,g=dre(),v="channelsLast"===p,y=v?0:1,b=v?1:2,x="",k=0;k<=1;k++)for(var w=0;w<=1;w++)x+="\n          blockIndex = rc.y + ".concat(w,";\n          pos = rc.x + ").concat(k,";\n\n          if(blockIndex < ").concat(t[1]," && pos < ").concat(t[0],") {\n            offsetY = int(blockIndex / (").concat(c,")) * ").concat(s," - ").concat(h,";\n            d0 = offsetY + ").concat(d," * (pos / ").concat(m,");\n\n            if(d0 < ").concat(n[y]," && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ").concat(c,".) * ").concat(i,". - ").concat(f,".);\n              d1 = offsetX + ").concat(l," * (int(mod(float(pos), ").concat(m,".) / ").concat(o,".));\n\n              if(d1 < ").concat(n[b]," && d1 >= 0) {\n\n                ch = int(mod(float(pos), ").concat(o,".));\n\n                if (").concat(v,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*k+w,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*k+w,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(x,"\n\n        ").concat(g.output," = result;\n      }\n    ")};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function qie(e){var t,n=e.x,r=e.filter,a=e.convInfo,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,p=e.activation,f=void 0===p?null:p,h=n.shape,m=o.texData.get(n.dataId),g=a.inChannels,v=h[0]*h[1]*h[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[],k=(1===v||1===y)&&g>1e3,w=h[2]%2!=0&&!!m.isPacked;if(!k&&Y$().getBool("WEBGL_LAZILY_UNPACK")&&Y$().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&w){var I=b?h[0]*h[1]*(h[2]+1):h[0]*h[2]*(h[3]+1),C={dataId:n.dataId,shape:[1,I,a.inChannels],dtype:n.dtype},S=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,g$(are(m.shape,C.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(C.shape," isn't free")}));var E=xoe({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(E);var T=Ooe({a:C,b:E,backend:o,transposeA:!1,transposeB:!1,bias:s,activation:f,preluActivationWeights:c,leakyreluAlpha:d}),N=o.texData.get(T.dataId);g$(N.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=S,N.shape=a.outShape,(t=eoe({inputs:{x:T},backend:o})).shape=a.outShape,x.push(T)}else{var A=xoe({inputs:{x:n},backend:o,attrs:{shape:[1,b?h[0]*h[1]*h[2]:h[0]*h[2]*h[3],a.inChannels]}}),_=xoe({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}}),R=Ooe({a:A,b:_,transposeA:!1,transposeB:!1,backend:o,bias:s,activation:f,preluActivationWeights:c,leakyreluAlpha:d});t=xoe({inputs:{x:R},backend:o,attrs:{shape:a.outShape}}),x.push(A),x.push(_),x.push(R)}for(var O=0,F=x;O<F.length;O++){var M=F[O];o.disposeIntermediateTensorInfo(M)}return t}function Kie(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,o=e.bias,i=void 0===o?null:o,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,d=e.activation,p=void 0===d?null:d,f=r.filterWidth,h=r.filterHeight,m=r.inChannels,g=r.outWidth,v=r.outHeight,y="channelsLast"===r.dataFormat,b=f*h*m,x=v*g,k=[b,x],w=[],I=xoe({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),C=xoe({inputs:{x:n},backend:a,attrs:{shape:[1,b,x$(n.shape)/b]}});w.push(I),w.push(C);var S=new Gie(k,I.shape,r),E=a.runWebGLProgram(S,[I],"float32"),T=xoe({inputs:{x:E},backend:a,attrs:{shape:[1,k[0],k[1]]}});w.push(E),w.push(T);var N=null!=i,A=null!=u,_="leakyrelu"===p,R=p?poe(p,!0):null,O=new foe(T.shape,C.shape,[1,x,r.outChannels],!0,!1,N,R,A,_),F=[T,C];if(i&&F.push(i),A&&F.push(u),_){var M=a.makeTensorInfo([],"float32",KZ(l,"float32"));F.push(M),w.push(M)}var D=a.runWebGLProgram(O,F,"float32"),B=xoe({inputs:{x:D},backend:a,attrs:{shape:y?[1,v,g,r.outChannels]:[1,r.outChannels,v,g]}});w.push(D);for(var P=0,L=w;P<L.length;P++){var U=L[P];a.disposeIntermediateTensorInfo(U)}return B}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Xie={kernelName:"Conv2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,d=a.dimRoundingMode,p=_1(c),f=k1(o.shape,i.shape,s,l,u,d,!1,p);if(1!==f.filterHeight||1!==f.filterWidth||1!==f.dilationHeight||1!==f.dilationWidth||1!==f.strideHeight||1!==f.strideWidth||"SAME"!==f.padInfo.type&&"VALID"!==f.padInfo.type)if(Y$().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=Kie({x:o,filter:i,convInfo:f,backend:r});else{var h=new jie(f);t=r.runWebGLProgram(h,[o,i],"float32")}else t=qie({x:o,filter:i,convInfo:f,backend:r});var m=xoe({inputs:{x:t},backend:r,attrs:{shape:f.outShape}});return r.disposeIntermediateTensorInfo(t),m}},Qie=function e(t){_y(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(i,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Yie=function e(t){_y(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=i?1:2,l=i?2:3,d=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},$ie=function e(t){_y(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.padInfo.front,i=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Zie=function e(t){_y(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Jie={kernelName:"Conv2DBackpropFilter",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,d=_1(u),p=k1(a.shape,l,i,1,s,c,!1,d),f=new Qie(p);return n.runWebGLProgram(f,[a,o],"float32")}},ese={kernelName:"Conv2DBackpropInput",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=_1(c),p=k1(i,o.shape,s,1,u,l,!1,d),f=new Yie(p);return n.runWebGLProgram(f,[a,o],"float32")}},tse={kernelName:"Conv3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=w1(a.shape,o.shape,i,u,s),l=new Hie(c);return n.runWebGLProgram(l,[a,o],"float32")}},nse={kernelName:"Conv3DBackpropFilterV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.filterShape,c=w1(a.shape,u,i,1,s),l=new $ie(c);return n.runWebGLProgram(l,[a,o],"float32")}},rse={kernelName:"Conv3DBackpropInputV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,u=w1(r.inputShape,o.shape,s,1,i),c=new Zie(u);return n.runWebGLProgram(c,[a,o],"float32")}},ase={kernelName:"Cos",backendName:"webgl",kernelFunc:loe({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"})},ose={kernelName:"Cosh",backendName:"webgl",kernelFunc:loe({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"})},ise=function e(t,n,r,a,o){_y(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=Ky(t,4),s=i[0],u=i[1],c=i[2],l=i[3],d=Ky(n,1)[0],p=Ky(r,2),f=p[0],h=p[1];this.outputShape=[d,f,h,l];var m="bilinear"===a?1:0,g=u-1+".0",v=c-1+".0",y=Ky(f>1?[""+(u-1)/(f-1),"(y2-y1) * height_ratio","y1*".concat(g," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(g)],3),b=y[0],x=y[1],k=y[2],w=Ky(h>1?[""+(c-1)/(h-1),"(x2-x1) * width_ratio","x1*".concat(v," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(v)],3),I=w[0],C=w[1],S=w[2];this.userCode="\n      const float height_ratio = float(".concat(b,");\n      const float width_ratio = float(").concat(I,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(x,";\n        float width_scale = ").concat(C,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(g," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n        float in_x = ").concat(S,";\n        if( in_x < 0.0 || in_x > ").concat(v," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")},sse={kernelName:"CropAndResize",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new ise(a.shape,o.shape,s,u,c);return n.runWebGLProgram(l,[a,o,i],"float32")}},use=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;var a=t.length,o=n?"0.0":"getX(".concat(cse(a,"coords"),")"),i=t[t.length-1],s="",u="";n?(s=r?"end != "+(i-1):"end != 0",u=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(i):"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(jre(a)," coords = getOutputCoords();\n        int end = ").concat(lse(a,"coords"),";\n        float val = ").concat(o,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(u,";\n          ").concat(lse(a,"coords")," = idx;\n          val += getX(").concat(cse(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function cse(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function lse(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var dse={kernelName:"Cumsum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse,u=a.shape.length,c=j2([o],u),l=a;null!=c&&(l=_oe({inputs:{x:a},backend:n,attrs:{perm:c}}));var d=G2(1,u)[0];if(d!==u-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," but got axis=").concat(o));for(var p=l.shape[d],f=eoe({inputs:{x:l},backend:n}),h=0;h<=Math.ceil(Math.log2(p))-1;h++){var m=new use(l.shape,!1,s),g=[[h]],v=f;f=n.runWebGLProgram(m,[f],f.dtype,g),n.disposeIntermediateTensorInfo(v)}if(i){var y=new use(l.shape,i,s),b=f;f=n.runWebGLProgram(y,[f],f.dtype),n.disposeIntermediateTensorInfo(b)}if(null!=c){var x=_oe({inputs:{x:f},backend:n,attrs:{perm:H2(c)}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(l),x}return f}},pse={kernelName:"DenseBincount",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=Yre(u,c,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,l)}if(2===a.shape.length){var d=n.bufferSync(a),p=n.bufferSync(o),f=$re(d,p,i,s);return n.makeTensorInfo(f.shape,o.dtype,f.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}},fse=function(){function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return Oy(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}(),hse={kernelName:"DepthToSpace",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;g$(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));var s=a.shape[0],u="NHWC"===i?a.shape[1]:a.shape[2],c="NHWC"===i?a.shape[2]:a.shape[3],l="NHWC"===i?a.shape[3]:a.shape[1],d=u*o,p=c*o,f=l/(o*o),h=new fse("NHWC"===i?[s,d,p,f]:[s,f,d,p],o,i);return n.runWebGLProgram(h,[a],a.dtype)}},mse=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,s=t.inWidth,u=t.padInfo.top,c=t.padInfo.left,l=t.strideHeight,d=t.strideWidth,p=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,m=t.filterWidth,g=t.outChannels/t.inChannels,v="",y="";r&&(v=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),y="result = activation(result);");var b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(v,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(d,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(g,";\n        int q = d2 - d1 * ").concat(g,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(p,";\n\n          if (xR < 0 || xR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(m,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(s,") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(b,"\n        ").concat(y,"\n        setOutput(result);\n      }\n    ")},gse=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_y(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.outChannels/t.inChannels,s=t.inHeight,u=t.inWidth,c=t.padInfo.top,l=t.padInfo.left,d=t.strideHeight,p=t.strideWidth,f=t.dilationHeight,h=t.dilationWidth,m=t.filterHeight,g=t.filterWidth,v=g,y="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",b=0;b<g;b++)y+="\n          vec4 xTexelC".concat(2*b,";\n          int xTexelC").concat(2*b,"Ready;\n          vec4 xTexelC").concat(2*b+1,";\n          int xTexelC").concat(2*b+1,"Ready;\n          vec4 xC").concat(b,";");for(var x=0;x<m;x++){for(var k=0;k<g;k++)y+="\n          xTexelC".concat(2*k," = vec4(0.0);\n          xTexelC").concat(2*k,"Ready = 0;\n          xTexelC").concat(2*k+1," = vec4(0.0);\n          xTexelC").concat(2*k+1,"Ready = 0;\n          xC").concat(k," = vec4(0.0);");y+="\n        xR = xRCorner + ".concat(x*f,";\n        if (xR >=0 && xR < ").concat(s,") {\n      ");for(var w=0;w<(v+1)/2;w++){var I=2*w,C=I*h;if(y+="\n          xC = xCCorner + ".concat(C,";\n          "),1===p){if(I<g&&(l%2==1?(y+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < ".concat(u," && xTexelC").concat(I,"Ready == 0) {\n                  xTexelC").concat(I," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= ").concat(u,") {\n                    xTexelC").concat(I,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I,"Ready = 1;\n                }\n              "),y+=1===h&&C>0?"\n                xC".concat(I," = vec4(xTexelC").concat(I-2,".zw, xTexelC").concat(I,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < ".concat(u,") {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= ").concat(u,") {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC").concat(I," = vec4(previous.zw, xTexelC").concat(I,".xy);\n                  } else {\n                    xC").concat(I," = vec4(0.0, 0.0, xTexelC").concat(I,".xy);\n                  }\n                  ")):y+="\n                if (xC >= 0 && xC < ".concat(u," && xTexelC").concat(I,"Ready == 0) {\n                  xTexelC").concat(I," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= ").concat(u,") {\n                    xTexelC").concat(I,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I,"Ready = 1;\n                }\n\n                xC").concat(I," = xTexelC").concat(I,";\n                "),C+1<g)){var S=l%2==0?h$(h):h;h%2==0&&l%2==1||h%2!=0&&l%2!=1?(y+="\n                  xCOffset = xC + ".concat(l%2," + ").concat(S,";\n\n                  if (xCOffset >= 0 && xCOffset < ").concat(u," && xTexelC").concat(I+1,"Ready == 0) {\n                    xTexelC").concat(I+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= ").concat(u,") {\n                      xTexelC").concat(I+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(I+1,"Ready = 1;\n                  }\n                  "),h>1&&(y+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < ".concat(u," && xTexelC").concat(I,"Ready == 0) {\n                      xTexelC").concat(I," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(I,"Ready = 1;\n                    }\n                    ")),y+="\n                  xC".concat(I+1," = vec4(xTexelC").concat(I,".zw, xTexelC").concat(I+1,".xy);\n                  ")):y+=1===S?"\n                    xC".concat(I+1," = xTexelC").concat(I,";\n                    "):"\n                    xCOffset = xC + ".concat(S,";\n\n                    if (xCOffset >= 0 && xCOffset < ").concat(u," && xTexelC").concat(I+1,"Ready == 0) {\n                      xTexelC").concat(I+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= ").concat(u,") {\n                        xTexelC").concat(I+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(I+1,"Ready = 1;\n                    }\n\n                    xC").concat(I+1," = xTexelC").concat(I+1,";\n                    ")}}else C<g&&(l%2==1?(y+="\n                xCOffset = xC + 1 - ".concat(p,";\n                if(xCOffset >= 0 && xCOffset < ").concat(u," && xTexelC").concat(I,"Ready == 0) {\n                  xTexelC").concat(I," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= ").concat(u,") {\n                    xTexelC").concat(I,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ").concat(u," && xTexelC").concat(I+1,"Ready == 0) {\n                  xTexelC").concat(I+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= ").concat(u,") {\n                    xTexelC").concat(I+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I+1,"Ready = 1;\n                }\n\n                xC").concat(I," = vec4(xTexelC").concat(I,".zw, xTexelC").concat(I+1,".zw);\n              "),C+1<g&&(y+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + ".concat(p,";\n                  if(xCOffset >= 0 && xCOffset < ").concat(u,") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC").concat(I+1," = vec4(xTexelC").concat(I+1,".xy, final.xy);\n                "))):(y+="\n                if(xC >= 0 && xC < ".concat(u," && xTexelC").concat(I,"Ready == 0) {\n                  xTexelC").concat(I," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= ").concat(u,") {\n                    xTexelC").concat(I,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(I,"Ready = 1;\n                }\n\n                xCOffset = xC + ").concat(p,";\n                if(xCOffset >= 0 && xCOffset < ").concat(u," && xTexelC").concat(I+1,"Ready == 0) {\n                  xTexelC").concat(I+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= ").concat(u,") {\n                    xTexelC").concat(I+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(I+1,"Ready = 1;\n                }\n\n                xC").concat(I," = vec4(\n                  xTexelC").concat(I,".xy, xTexelC").concat(I+1,".xy);\n              "),C+1<g&&(y+="\n                  xC".concat(I+1," = vec4(xTexelC").concat(I,".zw, xTexelC").concat(I+1,".zw);\n                "))));I<g&&(y+="\n            wTexel = getW(".concat(x,", ").concat(C,", d1, q);\n            dotProd += xC").concat(I," * vec4(wTexel.xz, wTexel.xz);\n          "),C+1<g&&(y+="\n              wTexel = getW(".concat(x,", ").concat(C+1,", d1, q);\n              dotProd += xC").concat(I+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}y+="\n        }\n      "}var E="",T="";r&&(E=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),T="result = activation(result);");var N=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(E,"\n\n      const ivec2 strides = ivec2(").concat(d,", ").concat(p,");\n      const ivec2 pads = ivec2(").concat(c,", ").concat(l,");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(y,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(N,"\n        ").concat(T,"\n        setOutput(result);\n      }\n    ")},vse={kernelName:"DepthwiseConv2dNative",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),g$(A1(i,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(l,"'")}));var d,p=k1(a.shape,o.shape,i,l,s,c,!0);return d=Y$().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels==1?new gse(p):new mse(p),n.runWebGLProgram(d,[a,o],"float32")}},yse=function e(t){_y(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},bse=function e(t){_y(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},xse={kernelName:"DepthwiseConv2dNativeBackpropFilter",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,d=k1(a.shape,l,i,s,u,c,!0),p=new yse(d);return n.runWebGLProgram(p,[a,o],"float32")}},kse={kernelName:"DepthwiseConv2dNativeBackpropInput",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=k1(r.inputShape,o.shape,i,s,u,c,!0),d=new bse(l);return n.runWebGLProgram(d,[a,o],"float32")}},wse=function e(t){_y(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},Ise={kernelName:"Diag",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat(Xy(r.shape),Xy(r.shape)),o=x$(r.shape),i=xoe({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new wse(o),u=n.runWebGLProgram(s,[i],i.dtype),c=xoe({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),c}},Cse=function e(t){_y(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,o=t.strideHeight,i=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,d=a.top,p=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")},Sse={kernelName:"Dilation2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=y1(o.shape,i.shape,s,u,"NHWC",c),d=new Cse(l),p=xoe({inputs:{x:t=r.runWebGLProgram(d,[o,i],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),p}},Ese={kernelName:"Einsum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=b6(e.attrs.equation,r.length),o=a.allDims,i=a.summedDims,s=a.idDims;k6(o.length,s,r);for(var u=w6(i,s),c=u.path,l=u.steps,d=l.length,p=null,f=o.length,h=[],m=0;m<d;++m){var g,v=rb(l[m]);try{for(v.s();!(g=v.n()).done;){var y=g.value,b=x6(f,s[y]),x=b.permutationIndices,k=b.expandDims,w=void 0;I6(x)?w=r[y]:(w=_oe({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),h.push(w));for(var I=w.shape.slice(),C=0;C<k.length;++C)I.splice(k[C],0,1);k$(w.shape,I)||(w=xoe({inputs:{x:w},backend:n,attrs:{shape:I}}),h.push(w)),null===p?p=w:(p=yoe({inputs:{a:w,b:p},backend:n}),h.push(p))}}catch(e){v.e(e)}finally{v.f()}m<d-1&&(c[m]>=0&&(p=Noe({inputs:{x:p},backend:n,attrs:{axis:c[m]-(o.length-f),keepDims:!1}}),h.push(p)),f--)}for(var S=0,E=h;S<E.length;S++){var T=E[S];T!==p&&n.disposeIntermediateTensorInfo(T)}return p}},Tse={kernelName:"Elu",backendName:"webgl",kernelFunc:loe({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"})},Nse={kernelName:"EluGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,o=Y$().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Jae("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new Zae("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}},Ase={kernelName:"Equal",backendName:"webgl",kernelFunc:doe({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:eae})},_se={kernelName:"Erf",backendName:"webgl",kernelFunc:loe({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n'})},Rse="return exp(x);",Ose=loe({opSnippet:Rse,packedOpSnippet:Rse,cpuKernelImpl:tae}),Fse={kernelName:"Exp",backendName:"webgl",kernelFunc:Ose};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Mse(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,o=t.input,i=o.shape.length,s=o.shape.slice(),u=a;return a<0&&(g$(-(i+1)<=a,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+a+1),s.splice(u,0,1),xoe({inputs:{x:o},backend:r,attrs:{shape:s}})}var Dse={kernelName:"ExpandDims",backendName:"webgl",kernelFunc:Mse},Bse="return exp(x) - 1.0;",Pse={kernelName:"Expm1",backendName:"webgl",kernelFunc:loe({opSnippet:Bse,packedOpSnippet:Bse,cpuKernelImpl:nae})},Lse=function e(t,n,r){_y(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var o,i=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)o="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));o="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(o,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Use(e,t,n){var r=n.texData.get(e.dataId),a=x$(e.shape),o=e.shape[e.shape.length-1],i=xoe({inputs:{x:e},backend:n,attrs:{shape:[a/o,o]}}),s=i.shape,u=new Lse("real",s,t),c=new Lse("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(u,l,"float32"),p=n.runWebGLProgram(c,l,"float32"),f=noe({inputs:{real:d,imag:p},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p);var h=xoe({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(f),h
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */}var Vse={kernelName:"FFT",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return Use(t.input,!1,n)}},Wse=function e(t,n){_y(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function zse(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype;if("string"===(o=o||D$(a))){var i=_$(o,x$(r));return i.fill(a),t.makeTensorInfo(r,o,i)}var s=new Wse(r,a),u=[[a]];return t.runWebGLProgram(s,[],o,u)}var jse,Hse={kernelName:"Fill",backendName:"webgl",kernelFunc:zse},Gse=function e(t){_y(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},qse={kernelName:"FlipLeftRight",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,o=new Gse(r.shape);return a.runWebGLProgram(o,[r],r.dtype)}},Kse="return floor(x);",Xse={kernelName:"Floor",backendName:"webgl",kernelFunc:loe({opSnippet:Kse,packedOpSnippet:Kse,cpuKernelImpl:rae})},Qse={kernelName:"FloorDiv",backendName:"webgl",kernelFunc:doe({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"})},Yse=function e(t){_y(this,e),this.variableNames=["A"];var n=dre(),r=Ky(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(o,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")},$se=function e(t){_y(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=dre(),r=Ky(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(o,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},Zse={kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,o=r.numChannels,i="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,u=Ky(i?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),c=u[0],l=u[1],d=[l,c],p=[l,c,o];(s||i)&&(null==jse&&(jse=document.createElement("canvas").getContext("2d")),jse.canvas.width=c,jse.canvas.height=l,jse.drawImage(a,0,0,c,l),a=jse.canvas);var f=n.makeTensorInfo(d,"int32");n.texData.get(f.dataId).usage=Rne.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),a);var h=Y$().getBool("WEBGL_PACK")?new $se(p):new Yse(p),m=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),m
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */}},Jse={kernelName:"FusedConv2D",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,d=a.dataFormat,p=a.dilations,f=a.dimRoundingMode,h=a.activation,m=a.leakyreluAlpha,g=_1(d),v=k1(o.shape,i.shape,c,p,l,f,!1,g),y=[];if(1!==v.filterHeight||1!==v.filterWidth||1!==v.dilationHeight||1!==v.dilationWidth||1!==v.strideHeight||1!==v.strideWidth||"SAME"!==v.padInfo.type&&"VALID"!==v.padInfo.type)if(Y$().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=Kie({x:o,filter:i,convInfo:v,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});else{var b=null!=s,x=null!=u,k="leakyrelu"===h,w=h?poe(h,!1):null,I=new jie(v,b,w,x,k),C=[o,i];if(s&&C.push(s),u&&C.push(u),k){var S=r.makeTensorInfo([],"float32",KZ(m,"float32"));C.push(S),y.push(S)}t=r.runWebGLProgram(I,C,"float32")}else t=qie({x:o,filter:i,convInfo:v,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});var E=xoe({inputs:{x:t},backend:r,attrs:{shape:v.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),E}},eue={kernelName:"FusedDepthwiseConv2D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,d=r.dimRoundingMode,p=r.activation,f=r.leakyreluAlpha,h=[],m=l;null==m&&(m=[1,1]),g$(A1(u,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(u," and dilations '").concat(m,"'")}));var g,v=k1(a.shape,o.shape,u,m,c,d,!0),y=Y$().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels==1,b=p?poe(p,y):null,x=[a,o],k=null!=i,w=null!=s,I="leakyrelu"===p;if(k&&x.push(i),w&&x.push(s),I){var C=n.makeTensorInfo([],"float32",KZ(f,"float32"));x.push(C),h.push(C)}g=y?new gse(v,k,b,w,I):new mse(v,k,b,w,I);var S=n.runWebGLProgram(g,x,"float32");return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),S}},tue=function e(t,n,r){_y(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=jre(n.length),o=jre(r.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(i,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")},nue={kernelName:"GatherNd",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=a.shape,i=o[o.length-1],s=x$(r.shape),u=Ky(A0(r,a),4),c=u[0],l=u[1],d=u[2],p=u[3],f=xoe({inputs:{x:a},backend:n,attrs:{shape:[l,i]}}),h=xoe({inputs:{x:r},backend:n,attrs:{shape:[x$(r.shape)/d,d]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var m=n.readSync(a.dataId),g=n.bufferSync(r),v=aae(m,g,r.dtype,l,i,d,p,r.shape,s);return n.makeTensorInfo(c,r.dtype,v.values)}var y=new tue(i,p,[l,d]),b=n.runWebGLProgram(y,[h,f],h.dtype),x=xoe({inputs:{x:b},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(b),x}},rue=function e(t,n){_y(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=jre(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("int(getIndices(resRC.x, resRC.z))"):r.push("".concat(n[a]));return r.join()}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function aue(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims,u=N6(a,o,T$(i,a.shape)[0],s),c=x$(o.shape),l=[],d=xoe({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),p=xoe({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});l.push(d),l.push(p);var f=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){var h=n.bufferSync(p),m=n.bufferSync(d),g=oae(m,h,f);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(u.outputShape,g.dtype,g.values)}var v=new rue(d.shape,f),y=n.runWebGLProgram(v,[d,p],d.dtype);l.push(y);var b=xoe({inputs:{x:y},backend:n,attrs:{shape:u.outputShape}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}var oue={kernelName:"GatherV2",backendName:"webgl",kernelFunc:aue},iue={kernelName:"Greater",backendName:"webgl",kernelFunc:doe({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:iae,dtype:"bool"})},sue={kernelName:"GreaterEqual",backendName:"webgl",kernelFunc:doe({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:sae})},uue={kernelName:"IFFT",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend;return Use(t.input,!0,n)}},cue={kernelName:"IsFinite",backendName:"webgl",kernelFunc:loe({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"})},lue={kernelName:"IsInf",backendName:"webgl",kernelFunc:loe({opSnippet:"return float(isinf(x));",dtype:"bool"})},due={kernelName:"IsNan",backendName:"webgl",kernelFunc:loe({opSnippet:"return float(isnan(x));",dtype:"bool"})},pue={kernelName:"Less",backendName:"webgl",kernelFunc:doe({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:uae,dtype:"bool"})},fue={kernelName:"LessEqual",backendName:"webgl",kernelFunc:doe({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:cae,dtype:"bool"})},hue={kernelName:"LinSpace",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.num,i=lae(r,a,o);return t.makeTensorInfo([i.length],"float32",i)}},mue={kernelName:"Log",backendName:"webgl",kernelFunc:loe({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:dae})},gue={kernelName:"Log1p",backendName:"webgl",kernelFunc:loe({opSnippet:"return log(1.0 + x);"})},vue={kernelName:"LogicalAnd",backendName:"webgl",kernelFunc:doe({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"})},yue={kernelName:"LogicalNot",backendName:"webgl",kernelFunc:loe({opSnippet:"return float(!(x >= 1.0));"})},bue={kernelName:"LogicalOr",backendName:"webgl",kernelFunc:doe({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"})},xue=function e(t,n,r,a,o){_y(this,e),this.variableNames=["x"],this.outputShape=[];var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(i,";\n        setOutput(val);\n      }\n    ")},kue=function e(t,n,r,a,o){_y(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(i,";\n        setOutput(result);\n      }\n    ")},wue={kernelName:"LRN",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta,c=Y$().getBool("WEBGL_PACK_NORMALIZATION")?new kue(a.shape,o,i,s,u):new xue(a.shape,o,i,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},Iue=function e(t,n,r,a,o){_y(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(o,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")},Cue={kernelName:"LRNGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,d=new Iue(a.shape,s,u,c,l);return n.runWebGLProgram(d,[a,o,i],a.dtype)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Sue(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,i=r.keepDims,s=a.shape.length,u=T$(o,a.shape),c=u,l=j2(c,s),d=null!=l,p=n.shouldExecuteOnCPU([a]),f=a;if(d){if(p){for(var h=n.texData.get(f.dataId).values,m=new Array(s),g=0;g<m.length;g++)m[g]=a.shape[l[g]];var v=Fae(h,a.shape,a.dtype,l,m);f=n.makeTensorInfo(m,a.dtype),n.texData.get(f.dataId).values=v}else f=Toe(a,l,n);c=G2(c.length,s)}z2("max",c,s);var y,b=Ky(V2(f.shape,c),2),x=b[0],k=b[1],w=x;if(i&&(w=W2(x,u)),p){var I=n.texData.get(f.dataId).values,C=pae(I,x$(k),w,a.dtype);y=n.makeTensorInfo(w,a.dtype),n.texData.get(y.dataId).values=C}else y=
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e,t,n,r){var a=x$(t),o=xoe({inputs:{x:e},attrs:{shape:[x$(e.shape)/a,a]},backend:r}),i=Coe(o,e.dtype,"max",r),s=xoe({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(f,k,w,n);return d&&n.disposeIntermediateTensorInfo(f),y}var Eue={kernelName:"Max",backendName:"webgl",kernelFunc:Sue},Tue={kernelName:"Maximum",backendName:"webgl",kernelFunc:doe({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:fae})},Nue={kernelName:"MaxPool",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;cre(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;g$(A1(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c=b1(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&k$(c.inShape,c.outShape))return eoe({inputs:{x:a},backend:n});var l=new rie(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}},Aue={kernelName:"MaxPool3D",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=x1(a.shape,o,i,[1,1,1],s,c,u),d=new aie(l,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}},_ue=function e(t){_y(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,o=t.effectiveFilterHeight,i=t.effectiveFilterWidth,s=o-1-t.padInfo.top,u=i-1-t.padInfo.left,c=o*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Rue=function e(t){_y(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=u-1-t.padInfo.front,p=c-1-t.padInfo.top,f=l-1-t.padInfo.left,h=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(p,", ").concat(f,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Oue={kernelName:"MaxPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=x1(o.shape,i,s,[1,1,1],u,c),d=new aie(l,"max",!0),p=n.runWebGLProgram(d,[o],o.dtype),f=new Rue(l),h=n.runWebGLProgram(f,[a,p],o.dtype);return n.disposeIntermediateTensorInfo(p),h}},Fue={kernelName:"MaxPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;cre([o,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=b1(i.shape,s,u,1,c,l),p=new rie(d,"max",!0),f=n.runWebGLProgram(p,[i],i.dtype),h=new _ue(d),m=n.runWebGLProgram(h,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),m}},Mue={kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,i=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;g$(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];g$(A1(i,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(l,"'")}));var d=b1(a.shape,o,i,l,s),p=Ky(function(e,t,n,r){var a=new rie(n,"max",!1),o=r.runWebGLProgram(a,[e],"float32");return a=new rie(n,"max",!0,!0,t),[o,r.runWebGLProgram(a,[e],"float32")]}(a,u,d,c),2);return[p[0],p[1]]}},Due={kernelName:"Mean",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.keepDims,i=n.axis,s=r,u=a.shape.length,c=T$(i,a.shape),l=c,d=j2(l,u),p=null!=d,f=s.shouldExecuteOnCPU([a]),h=[],m=a;if(p){if(f){for(var g=s.texData.get(m.dataId).values,v=new Array(u),y=0;y<v.length;y++)v[y]=a.shape[d[y]];var b=Fae(g,a.shape,a.dtype,d,v);m=s.makeTensorInfo(v,a.dtype),s.texData.get(m.dataId).values=b}else m=Toe(a,d,s);h.push(m),l=G2(l.length,u)}z2("sum",l,u);var x=Ky(V2(m.shape,l),2),k=x[0],w=x[1],I=k;o&&(I=W2(k,c));for(var C=function(e,t,n,r){var a=x$(t),o=xoe({inputs:{x:e},attrs:{shape:[x$(e.shape)/a,a]},backend:r}),i=Coe(o,"float32","mean",r),s=xoe({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(m,w,I,s),S=0,E=h;S<E.length;S++){var T=E[S];s.disposeIntermediateTensorInfo(T)}return C}},Bue={kernelName:"Min",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=a.shape.length,u=T$(o,a.shape),c=u,l=j2(c,s),d=a;null!=l&&(d=_oe({inputs:{x:a},backend:n,attrs:{perm:l}}),c=G2(c.length,a.shape.length)),z2("min",c,s);var p,f=Ky(V2(d.shape,c),2),h=f[0],m=xoe({inputs:{x:d},backend:n,attrs:{shape:[-1,x$(f[1])]}}),g=Coe(m,m.dtype,"min",n);return p=xoe(i?{inputs:{x:g},backend:n,attrs:{shape:W2(h,u)}}:{inputs:{x:g},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),p}},Pue={kernelName:"Minimum",backendName:"webgl",kernelFunc:doe({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:hae})},Lue=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=jre(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(o," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")},Uue=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=jre(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=Bae("rc",a),c=Bae("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),p="reflect"===r?0:1,f="";if(1===a){var h="\n        ".concat(o," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(p,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(p,";\n        }\n        source -= start;\n      ");f="\n        ".concat(o," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ")}else{var m="\n        ".concat(o," source = rc;\n        ").concat(o," lt = ").concat(o,"(lessThan(source, start));\n        ").concat(o," gte = ").concat(o,"(greaterThanEqual(source, end));\n        ").concat(o," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(p,") +\n                gte * ((end - 1) * 2 - source + ").concat(p,");\n        source -= start;\n      ");f="\n        ".concat(o," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")},Vue={kernelName:"MirrorPad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode,s=Y$().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Uue(a.shape,o,i):new Lue(a.shape,o,i);return n.runWebGLProgram(s,[a],a.dtype)}},Wue={kernelName:"Mod",backendName:"webgl",kernelFunc:doe({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},zue=function e(t,n,r){_y(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")},jue=doe({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),Hue={kernelName:"RealDiv",backendName:"webgl",kernelFunc:jue},Gue="return a - b;",que=doe({opSnippet:Gue,packedOpSnippet:Gue,supportsComplex:!0,cpuKernelImpl:_ae}),Kue={kernelName:"Sub",backendName:"webgl",kernelFunc:que};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Xue(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=T$([r.dim],a.shape),i=Sue({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),s=W2(i.shape,o),u=xoe({inputs:{x:i},backend:n,attrs:{shape:s}}),c=que({inputs:{a:a,b:u},backend:n}),l=Ose({inputs:{x:c},backend:n}),d=Noe({inputs:{x:l},backend:n,attrs:{axis:o,keepDims:!1}}),p=xoe({inputs:{x:d},backend:n,attrs:{shape:s}}),f=jue({inputs:{a:l,b:p},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}var Que={kernelName:"Softmax",backendName:"webgl",kernelFunc:Xue},Yue={kernelName:"Multinomial",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized,u=s?a:Xue({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],d=new zue(c,l,o),p=[[i]],f=n.runWebGLProgram(d,[u],"int32",p);return s||n.disposeIntermediateTensorInfo(u),f}},$ue="return -x;",Zue={kernelName:"Neg",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var o=r.texData.get(a.dataId),i=Ky(gae(o.values,a.shape,a.dtype),2),s=i[0],u=i[1];return r.makeTensorInfo(u,a.dtype,s)}return t=Y$().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new qae(a.shape,$ue):new jae(a.shape,$ue),r.runWebGLProgram(t,[a],a.dtype)}},Jue=N4,ece={kernelName:"NonMaxSuppressionV3",backendName:"webgl",kernelFunc:function(e){c6("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(o.dataId),d=Jue(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},tce=A4,nce={kernelName:"NonMaxSuppressionV4",backendName:"webgl",kernelFunc:function(e){c6("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),d=n.readSync(o.dataId),p=tce(l,d,i,s,u,c),f=p.selectedIndices,h=p.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},rce=_4,ace={kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){c6("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),d=n.readSync(o.dataId),p=rce(l,d,i,s,u,c),f=p.selectedIndices,h=p.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},oce=function e(t,n,r,a){_y(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")},ice={kernelName:"OneHot",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue,u=x$(a.shape),c=new oce(u,o,i,s),l=xoe({inputs:{x:a},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(c,[l],a.dtype);n.disposeIntermediateTensorInfo(l);var p=xoe({inputs:{x:d},backend:n,attrs:{shape:[].concat(Xy(a.shape),[o])}});return n.disposeIntermediateTensorInfo(d),p}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function sce(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=Cie({inputs:{input:r},backend:n}),o=sce({inputs:{x:a},backend:n}),i=Lie({inputs:{input:r},backend:n}),s=sce({inputs:{x:i},backend:n}),u=noe({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return zse({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var uce={kernelName:"ZerosLike",backendName:"webgl",kernelFunc:sce},cce={kernelName:"OnesLike",backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var o=Cie({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=Lie({inputs:{input:a},backend:r}),u=sce({inputs:{x:s},backend:r}),c=noe({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return zse({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}},lce={kernelName:"Pack",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Mse({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){v$(a,e.shape,"All tensors passed to stack must have matching shapes"),g$(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=Wie({inputs:t.map((function(e){var t=Mse({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},dce=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=jre(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(o," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")},pce=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,o=jre(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=Bae("rc",a),c=Bae("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),p=["".concat(o," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],f=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",m=0,g=1===a?2:4;m<g;m++)h+="\n        ".concat(p[m],"\n        if (").concat(f,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(o," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ");h+=1===a?"} ":"}}",this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")},fce=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue,s=Y$().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new pce(a.shape,o,i):new dce(a.shape,o,i),u=[[i]];return n.runWebGLProgram(s,[a],a.dtype,u)},hce={kernelName:"PadV2",backendName:"webgl",kernelFunc:fce},mce={kernelName:"Pow",backendName:"webgl",kernelFunc:doe({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},gce={kernelName:"Prod",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.axis,s=a.keepDims,u=o.shape.length,c=[],l=T$(i,o.shape),d=l,p=j2(d,u),f=o;if(null!=p&&(f=_oe({inputs:{x:o},backend:r,attrs:{perm:p}}),d=G2(d.length,u),c.push(f)),z2("prod",d,u),r.shouldExecuteOnCPU([f])){var h=r.texData.get(f.dataId).values,m=yae(f.shape,f.dtype,h,d),g=m.outVals,v=m.outShape,y=m.outDtype;t=r.makeTensorInfo(v,y,g)}else{var b=Ky(V2(f.shape,d),2),x=b[0],k=x$(b[1]),w=xoe({inputs:{x:f},backend:r,attrs:{shape:[-1,k]}}),I=Coe(w,yJ(o.dtype),"prod",r);t=xoe({inputs:{x:I},backend:r,attrs:{shape:x}}),c.push(w),c.push(I)}if(s){c.push(t);var C=W2(t.shape,l);t=xoe({inputs:{x:t},backend:r,attrs:{shape:C}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},vce=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,s=bae(r,a,o,i);return t.makeTensorInfo([s.length],i,s)},yce={kernelName:"Range",backendName:"webgl",kernelFunc:vce},bce={kernelName:"Reciprocal",backendName:"webgl",kernelFunc:loe({opSnippet:"return 1.0 / x;"})},xce={kernelName:"Relu",backendName:"webgl",kernelFunc:loe({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"})},kce={kernelName:"Relu6",backendName:"webgl",kernelFunc:loe({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"})},wce=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.outputShape=[];var i=Ky(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,p=[a&&n>1?u-1:u,a&&r>1?c-1:c],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/f[0],",\n          ").concat(p[1]/f[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")},Ice=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=Ky(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,p=[a&&n>1?u-1:u,a&&r>1?c-1:c],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/f[0],",\n          ").concat(p[1]/f[1],",\n          ").concat(p[1]/f[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")},Cce={kernelName:"ResizeBilinear",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=Ky(r.size,2),u=s[0],c=s[1],l=Y$().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Ice(a.shape,u,c,o,i):new wce(a.shape,u,c,o,i);return n.runWebGLProgram(l,[a],"float32")}},Sce=function e(t,n,r){_y(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Ky(n,3),o=a[1],i=a[2],s=Ky(t,3),u=s[1],c=s[2],l=[r&&u>1?o-1:o,r&&c>1?i-1:i],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],p=l[0]/d[0],f=l[1]/d[1],h=1/p,m=1/f,g=2*Math.ceil(h)+2,v=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(f,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(v,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(o-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(i-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")},Ece={kernelName:"ResizeBilinearGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new Sce(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},Tce=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.outputShape=[];var i=Ky(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,p=[a&&n>1?u-1:u,a&&r>1?c-1:c],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";d=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/f[0],",\n          ").concat(p[1]/f[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")},Nce=function e(t,n,r,a,o){_y(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=Ky(t,4),s=i[0],u=i[1],c=i[2],l=i[3];this.outputShape=[s,n,r,l];var d,p=[a&&n>1?u-1:u,a&&r>1?c-1:c],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";d=o?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/f[0],",\n          ").concat(p[1]/f[1],",\n          ").concat(p[1]/f[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")},Ace={kernelName:"ResizeNearestNeighbor",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=Ky(r.size,2),u=s[0],c=s[1],l=Y$().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Nce(a.shape,u,c,o,i):new Tce(a.shape,u,c,o,i);return n.runWebGLProgram(l,[a],a.dtype)}},_ce=function e(t,n,r){_y(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Ky(n,3),o=a[1],i=a[2],s=Ky(t,3),u=s[1],c=s[2],l=[r&&u>1?o-1:o,r&&c>1?i-1:i],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],p=l[0]/d[0],f=l[1]/d[1],h=1/p,m=1/f,g=2*Math.ceil(h)+2,v=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(f,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(v,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")},Rce={kernelName:"ResizeNearestNeighborGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new _ce(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},Oce=function e(t,n){_y(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),o=jre(r);this.userCode="\n      void main() {\n        ".concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")},Fce=function e(t,n){_y(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=Bae("rc",r),o="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),i="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=jre(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)}));return"getChannel(getX(".concat(r.join(","),"), vec2(").concat(r.slice(-2).join(","),"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")},Mce={kernelName:"Reverse",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims,i=a.shape.length,s=T$(o,a.shape);if(0===i)return eoe({inputs:{x:a},backend:n});var u=Y$().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Fce(a.shape,s):new Oce(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},Dce=function e(t,n){_y(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var o;o="number"==typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},Bce={kernelName:"RotateWithOffset",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,i=n.fillValue,s=n.center,u=r,c=new Dce(a.shape,i),l=Ky(r6(s,a.shape[1],a.shape[2]),2),d=[[l[0],l[1],Math.sin(o),Math.cos(o)]];return u.runWebGLProgram(c,[a],a.dtype,d)}},Pce={kernelName:"Round",backendName:"webgl",kernelFunc:loe({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"})},Lce={kernelName:"Rsqrt",backendName:"webgl",kernelFunc:loe({opSnippet:"return inversesqrt(x);",cpuKernelImpl:xae})},Uce=function e(t,n,r,a,o,i){_y(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=jre(o.length),u=jre(i.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var p="getUpdates(".concat(d,")"),f=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(f,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(p,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")},Vce={kernelName:"ScatterNd",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=O0(0,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,p=s.outputSize,f=[p/l,l];if(0===p)return n.makeTensorInfo(i,a.dtype);var h=xoe({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=xoe({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),v=new Uce(c,u,h.shape.length,m.shape.length,d,f),y=n.runWebGLProgram(v,[m,h,g],m.dtype),b=xoe({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),b}},Wce=function e(t,n,r){var a,o;if(_y(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)o="resRC",a="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(i[c])),c<t&&s.push("".concat(i[c]));a=s.join(),o=u.join()}var l=jre(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(o,"));\n        } else {\n          setOutput(getB(").concat(o,"));\n        }\n      }\n    ")},zce={kernelName:"Select",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=new Wce(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,o],vJ(a.dtype,o.dtype))}},jce={kernelName:"Selu",backendName:"webgl",kernelFunc:loe({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n"})},Hce={kernelName:"Sigmoid",backendName:"webgl",kernelFunc:loe({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"})},Gce={kernelName:"Sign",backendName:"webgl",kernelFunc:loe({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"})},qce={kernelName:"Sin",backendName:"webgl",kernelFunc:loe({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"})},Kce={kernelName:"Sinh",backendName:"webgl",kernelFunc:loe({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"})},Xce={kernelName:"Softplus",backendName:"webgl",kernelFunc:loe({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"})},Qce={kernelName:"SpaceToBatchND",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;g$(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,Xy(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=[],d=fce({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),p=a6(d.shape,o,s,!1),f=o6(p.length,o.length,!1),h=i6(d.shape,o,s,!1),m=xoe({inputs:{x:d},backend:n,attrs:{shape:p}}),g=_oe({inputs:{x:m},backend:n,attrs:{perm:f}}),v=xoe({inputs:{x:g},backend:n,attrs:{shape:h}});return l.push(d),l.push(m),l.push(g),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},Yce={kernelName:"SparseFillEmptyRows",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2021 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,i=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=n.readSync(i.dataId)[0],d=Ky(Iae(s,r.shape,r.dtype,u,a.dtype,c,l),5),p=d[0],f=d[1],h=d[2],m=d[3],g=d[4];return[n.makeTensorInfo(f,r.dtype,p),n.makeTensorInfo([f[0]],a.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}},$ce={kernelName:"SparseReshape",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var i=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(o.dataId)),c=Ky(Cae(s,r.shape,r.dtype,i,u),3),l=c[0],d=c[1],p=c[2];return[n.makeTensorInfo(d,r.dtype,l),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}},Zce={kernelName:"SparseSegmentMean",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));var i=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=Ky(Sae(i,r.shape,r.dtype,s,u,!0),2),l=c[0],d=c[1];return n.makeTensorInfo(d,r.dtype,l)}},Jce={kernelName:"SparseSegmentSum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));var i=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=Ky(Sae(i,r.shape,r.dtype,s,u),2),l=c[0],d=c[1];return n.makeTensorInfo(d,r.dtype,l)}},ele={kernelName:"SparseToDense",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,u=O0(0,a,s),c=u.sliceRank,l=u.numUpdates,d=u.strides,p=u.outputSize,f=new Uce(l,c,a.shape.length,o.shape.length,d,[p,1],!1),h=n.runWebGLProgram(f,[o,a,i],o.dtype),m=xoe({inputs:{x:h},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),m}},tle={kernelName:"SplitV",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=T$(r.axis,a.shape)[0],s=S6(a,o,i),u=a.shape.length,c=new Array(u).fill(0),l=a.shape.slice();return s.map((function(e){var t=Xy(l);t[i]=e;var r=yie({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[i]+=e,r}))}},nle={kernelName:"Sqrt",backendName:"webgl",kernelFunc:loe({opSnippet:"return sqrt(x);"})},rle={kernelName:"Square",backendName:"webgl",kernelFunc:loe({opSnippet:"return x * x;"})},ale={kernelName:"SquaredDifference",backendName:"webgl",kernelFunc:doe({opSnippet:"return (a - b) * (a - b);",packedOpSnippet:"return (a - b) * (a - b);"})},ole={kernelName:"Step",backendName:"webgl",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o="if (isnan(x)) return x;\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new jae(a.shape,o);return r.runWebGLProgram(i,[a],a.dtype)}},ile=function e(t,n,r){_y(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,o=jre(r.length),i=jre(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(o," begin = ").concat(o,"(").concat(t,");\n      ").concat(o," strides = ").concat(o,"(").concat(n,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")},sle={kernelName:"StridedSlice",backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,p=a.newAxisMask,f=a.shrinkAxisMask,h=X0(o.shape,i,s,u,c,l,d,p,f),m=h.nonStrided,g=h.$begin,v=h.$strides,y=h.size,b=h.newShape,x=h.outShape,k=xoe({inputs:{x:o},backend:r,attrs:{shape:b}});if(m){var w=yie({inputs:{x:k},backend:r,attrs:{begin:g,size:y}});t=xoe({inputs:{x:w},backend:r,attrs:{shape:x}}),r.disposeIntermediateTensorInfo(w)}else if(x.some((function(e){return 0===e})))t=r.makeTensorInfo(x,o.dtype,[]);else if(r.shouldExecuteOnCPU([k])){var I=r.texData.get(k.dataId).values,C=m0(k.shape,k.dtype,I),S=Eae(x,C,v,g);t=r.makeTensorInfo(x,k.dtype,S.values)}else{var E=new ile(g,v,x);t=r.runWebGLProgram(E,[k],k.dtype)}var T=xoe({inputs:{x:t},backend:r,attrs:{shape:x}});return r.disposeIntermediateTensorInfo(k),r.disposeIntermediateTensorInfo(t),T}},ule={kernelName:"StringNGrams",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,i=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,d=t.dataSplits,p=n.readSync(l.dataId),f=n.readSync(d.dataId),h=Ky(Tae(p,f,a,o,i,s,u,c),2),m=h[0],g=h[1];return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}},cle={kernelName:"StringSplit",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var i=n.readSync(a.dataId),s=n.readSync(o.dataId)[0],u=Ky(Nae(i,s,r),3),c=u[0],l=u[1],d=u[2],p=l.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}},lle={kernelName:"StringToHashBucketFast",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=n.readSync(a.dataId),i=Aae(o,r);return n.makeTensorInfo(a.shape,"int32",i)}},dle={kernelName:"Tan",backendName:"webgl",kernelFunc:loe({opSnippet:"return tan(x);"})},ple={kernelName:"Tanh",backendName:"webgl",kernelFunc:loe({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"})},fle=function e(t,n){_y(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var o=jre(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(t);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        setOutput(getA(").concat(i,"));\n      }\n    ")};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function hle(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;if("string"===a.dtype||a.shape.length>5){var i=n.readSync(a.dataId),s="string"===a.dtype?i.map((function(e){return $Z(e)})):i,u=m0(a.shape,a.dtype,s),c=Rae(u,o);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new fle(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}var mle={kernelName:"Tile",backendName:"webgl",kernelFunc:hle},gle=function e(t){_y(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "},vle=function e(t){_y(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function yle(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function ble(e){for(var t=1;t<e;)t*=2;return t}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
for(var xle={kernelName:"TopK",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted,s=Y$().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=Y$().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,l=c[c.length-1];if(n.shouldExecuteOnCPU([a])||l<s||o>u){var d=n.readSync(a.dataId),p=Ky(Oae(d,c,a.dtype,o,i),2),f=p[0],h=p[1];return[n.makeTensorInfo(f.shape,f.dtype,f.values),n.makeTensorInfo(h.shape,h.dtype,h.values)]}if(0===o)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===l)return[a,zse({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var m=n.texData.get(a.dataId),g=null!==m&&m.isPacked,v=g?n.unpackTensor(a):a,y=x$(c)/l,b=xoe({inputs:{x:v},attrs:{shape:[y,l]},backend:n});g&&yle(n,v);for(var x=ble(o),k=ble(l),w=null,I=function(){return null===w?[b,b]:[b,w]},C=function(e,t,r){var a=I(),o=new gle(r),i=[[l],[null===w?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=w;w=n.runWebGLProgram(o,a,"int32",i),yle(n,s)},S=1;S<x;S*=2)for(var E=2*S,T=S;T>=1;T/=2)C(E,T,[y,k]);for(var N=k;N>x;N/=2){var A=I(),_=new vle([y,N/2]),R=[[l],[null===w?1:0],[x]],O=w;w=n.runWebGLProgram(_,A,"int32",R),yle(n,O);for(var F=x/2,M=2*F,D=F;D>=1;D/=2)C(M,D,w.shape)}var B=w;w=yie({inputs:{x:w},backend:n,attrs:{begin:0,size:[y,o]}}),yle(n,B);var P=aue({inputs:{x:b,indices:w},backend:n,attrs:{axis:1,batchDims:1}});yle(n,b);var L=c.slice(0,-1);L.push(o),B=w,w=xoe({inputs:{x:w},attrs:{shape:L},backend:n}),yle(n,B);var U=P;return P=xoe({inputs:{x:P},attrs:{shape:L},backend:n}),yle(n,U),[P,w]}},kle=function e(t,n,r,a,o,i){_y(this,e),this.variableNames=["Image","Transforms"],this.outputShape=i;var s,u="nearest"===r?1:2;switch(a){case"constant":s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4;break;default:s=1}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")},wle={kernelName:"Transform",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.transforms,i=r.interpolation,s=r.fillMode,u=r.fillValue,c=r.outputShape,l=Ky(a.shape,4),d=l[0],p=l[1],f=l[2],h=l[3],m=Ky(null!=c?c:[p,f],2),g=m[0],v=m[1],y=new kle(p,f,i,s,u,[d,g,v,h]);return n.runWebGLProgram(y,[a,o],"float32")}},Ile={kernelName:"Unique",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;cre(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var i=r.readSync(o.dataId),s=Mae(i,a,o.shape,o.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,o.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}},Cle={kernelName:"Unpack",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a,s=i.shape.length,u=a.shape[o],c=new Array(s-1),l=0,d=0;d<s;d++)d!==o&&(c[l++]=i.shape[d]);var p=[],f=new Array(s).fill(0),h=i.shape.slice();h[o]=1;for(var m=new Array(u),g=0;g<m.length;g++){f[o]=g;var v=yie({inputs:{x:i},backend:n,attrs:{begin:f,size:h}}),y=xoe({inputs:{x:v},backend:n,attrs:{shape:c}});m[g]=y,p.push(v)}return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},Sle=function e(t,n){_y(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.numSegments,s=i*Math.ceil(o/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));var p="";o%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(p,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")},Ele=[wue,Cue,Foe,Moe,Doe,Boe,Uoe,zoe,joe,Hoe,Yoe,$oe,Zoe,Joe,tie,eie,nie,iie,oie,cie,lie,die,hie,xie,kie,Eie,Nie,Rie,Mie,roe,zie,Jie,ese,Xie,nse,rse,tse,ase,ose,sse,dse,pse,hse,xse,kse,vse,Ise,Sse,Ese,Tse,Nse,Ase,_se,Fse,Dse,Pse,Vse,Hse,qse,Xse,Qse,Zse,Jse,eue,nue,oue,iue,sue,toe,uue,Uie,cue,lue,due,ioe,pue,fue,hue,gue,mue,vue,yue,bue,Eue,Aue,Nue,Oue,Fue,Mue,Tue,Due,Bue,Pue,Vue,Wue,Yue,boe,Zue,ece,nce,ace,Iie,ice,cce,lce,hce,mce,coe,gce,yce,Sie,Hue,bce,kce,xce,koe,Cce,Ece,Ace,Rce,Mce,Bce,Pce,Lce,Vce,zce,jce,Hce,Gce,qce,Kce,bie,Que,Xce,Qce,Yce,$ce,Zce,Jce,ele,tle,nle,rle,ale,ole,sle,ule,cle,lle,Kue,Aoe,dle,ple,mle,xle,wle,Roe,Ile,Cle,{kernelName:"UnsortedSegmentSum",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments,s=a.shape.length,u=[],c=0,l=j2([c],s),d=a;null!=l&&(d=_oe({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(d),c=G2(1,s)[0]);var p=T6(d.shape,c,i),f=x$([d.shape[c]]),h=xoe({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});u.push(h);var m=xoe({inputs:{x:function e(t,r,a,o,i){var s=t.shape[0],c=t.shape[1],l=E6(c,i),d=new Sle({windowSize:l,inSize:c,batchSize:s,numSegments:i},r),p=n.compileAndRun(d,[t,a],o);if(u.push(p),p.shape[1]===i)return p;var f=vce({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),h=hle({inputs:{x:f},backend:n,attrs:{reps:[c/l]}});return u.push(f),u.push(h),e(p,r,h,o,i)}(h,"unsortedSegmentSum",o,yJ(a.dtype),i)},backend:n,attrs:{shape:p}}),g=m;if(null!=l){u.push(m);var v=H2(l);g=_oe({inputs:{x:g},backend:n,attrs:{perm:v}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},uce],Tle=0,Nle=Ele
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */;Tle<Nle.length;Tle++){var Ale=Nle[Tle];sZ(Ale)}
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var _le=i4,Rle=function(e){Dy(a,e);var t,n,r=Hy(a);function a(){var e;return _y(this,a),(e=r.call(this)).blockSize=48,e.firstUse=!0,e.data=new l$(zy(e),Y0()),e}return Oy(a,[{key:"nextDataId",value:function(){return a.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,Y$().get("IS_NODE")&&c6("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&M$(n[0])){var a=n.map((function(e){return YZ(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:(n=Ay(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?l6(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return $Z(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return m0(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return Y0().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:(t=Ay(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=QZ(),t(),e.abrupt("return",{kernelMs:QZ()-n});case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){R8([e],"where");var t=this.readSync(e.dataId);return _le(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return qy(By(a.prototype),"epsilon",this).call(this)}}]),a}(d$);Rle.nextDataId=0,
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
e1("cpu",(function(){return new Rle}),1);
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var Ole=J8("Elu",(function(e){return e>=0?e:Math.exp(e)-1})),Fle={kernelName:"Elu",backendName:"cpu",kernelFunc:Ole};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Mle(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha;R8([a],"leakyRelu");for(var i=x$(a.shape),s=n.data.get(a.dataId).values,u=A$("float32",i),c=0;c<s.length;c++)u[c]=s[c]<0?o*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var Dle={kernelName:"LeakyRelu",backendName:"cpu",kernelFunc:Mle},Ble=M8((function(e,t){return e<0?t*e:e}));
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Ple(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;R8([r,a],"prelu");var o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=Ky(Ble(r.shape,a.shape,o,i,r.dtype),2),u=s[0],c=s[1];return n.makeTensorInfo(c,r.dtype,u)}var Lle={kernelName:"Prelu",backendName:"cpu",kernelFunc:Ple},Ule=J8("Relu",(function(e){return Math.max(0,e)})),Vle={kernelName:"Relu",backendName:"cpu",kernelFunc:Ule},Wle=J8("Relu6",(function(e){return Math.min(Math.max(0,e),6)})),zle={kernelName:"Relu6",backendName:"cpu",kernelFunc:Wle},jle=J8("Sigmoid",(function(e){return 1/(1+Math.exp(-e))})),Hle={kernelName:"Sigmoid",backendName:"cpu",kernelFunc:jle};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Gle(e,t,n,r,a){if("linear"===n)return L8({inputs:{x:t},backend:e});if("relu"===n)return Ule({inputs:{x:t},backend:e});if("elu"===n)return Ole({inputs:{x:t},backend:e});if("relu6"===n)return Wle({inputs:{x:t},backend:e});if("prelu"===n)return Ple({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return Mle({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return jle({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function qle(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=x$(a.shape),s=E$(o,i),u=x$(s);g$(i===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old shape (").concat(a.shape,") has ").concat(i," elements. The new shape and old shape must have the same number of elements.")})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;l.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var Kle={kernelName:"Reshape",backendName:"cpu",kernelFunc:qle};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Xle(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=r.transposeA,s=r.transposeB;R8([a,o],"matMul");var u=a.shape.length,c=o.shape.length,l=i?a.shape[u-2]:a.shape[u-1],d=s?o.shape[c-1]:o.shape[c-2],p=i?a.shape[u-1]:a.shape[u-2],f=s?o.shape[c-2]:o.shape[c-1],h=a.shape.slice(0,-2),m=o.shape.slice(0,-2),g=x$(h),v=x$(m);g$(u>=2&&c>=2&&(g===v||1===g||1===v),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (".concat(h,") and (").concat(m,").")}));var y=(g>v?a.shape.slice(0,-2):o.shape.slice(0,-2)).concat([p,f]);g$(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (").concat(d,") of Tensors with shapes ").concat(a.shape," and ").concat(o.shape," and transposeA=").concat(i," and transposeB=").concat(s," must match.")}));for(var b=s?[v,f,d]:[v,d,f],x=qle({inputs:{x:a},backend:n,attrs:{shape:i?[g,l,p]:[g,p,l]}}),k=qle({inputs:{x:o},backend:n,attrs:{shape:b}}),w=i?x.shape[1]:x.shape[2],I=i?x.shape[2]:x.shape[1],C=s?k.shape[1]:k.shape[2],S=Math.max(g,v),E=n.data.get(x.dataId).values,T=n.data.get(k.dataId).values,N=L$(x.shape),A=L$(k.shape),_=Ky(i?[N[0],1,N[1]]:[N[0],N[1],1],3),R=_[0],O=_[1],F=_[2],M=Ky(s?[1,A[1],A[0]]:[A[1],1,A[0]],3),D=M[0],B=M[1],P=M[2],L=I*C,U=m0([S,I,C],x.dtype),V=U.values,W=n.blockSize,z=0;z<S;z++)for(var j=0;j<I;j+=W)for(var H=0;H<C;H+=W)for(var G=0;G<w;G+=W)for(var q=Math.min(j+W,I),K=Math.min(H+W,C),X=Math.min(G+W,w),Q=j;Q<q;Q++)for(var Y=H;Y<K;Y++){for(var $=0,Z=G;Z<X;Z++){var J=Math.min(z,g-1)*R,ee=Math.min(z,v-1)*P;$+=E[J+Q*O+Z*F]*T[Z*D+Y*B+ee]}V[z*L+(Q*C+Y)]+=$}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(y,U.dtype,U.values)}var Qle={kernelName:"BatchMatMul",backendName:"cpu",kernelFunc:Xle},Yle={kernelName:"_FusedMatMul",backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,o=e.backend,i=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,d=i.transposeA,p=i.transposeB,f=i.activation,h=i.leakyreluAlpha,m=[];t=Xle({inputs:{a:s,b:u},attrs:{transposeA:d,transposeB:p},backend:o}),c&&(n=X8({inputs:{a:t,b:c},backend:o}),m.push(t),t=n),f&&(r=Gle(o,t,f,l,h),m.push(t),t=r);for(var g=0,v=m;g<v.length;g++){var y=v[g];o.disposeIntermediateTensorInfo(y)}return t}},$le={kernelName:"Acos",backendName:"cpu",kernelFunc:J8("Acos",(function(e){return Math.acos(e)}))},Zle={kernelName:"Acosh",backendName:"cpu",kernelFunc:J8("Acosh",(function(e){return Math.acosh(e)}))},Jle={kernelName:"AddN",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=t;R8(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),o=m0(r[0].shape,r[0].dtype),i=o.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<i.length;c++)i[c]+=u[c];return n.makeTensorInfo(o.shape,o.dtype,o.values)}},ede={kernelName:"All",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;R8(a,"all");var s=T$(o,a.shape),u=s,c=j2(u,a.shape.length),l=a;null!=c&&(l=W7({inputs:{x:a},backend:n,attrs:{perm:c}}),u=G2(u.length,a.shape.length)),z2("all",u,l.shape.length);for(var d=Ky(V2(l.shape,u),2),p=d[0],f=x$(d[1]),h=z$(x$(p),l.dtype),m=n.data.get(l.dataId).values,g=0;g<h.length;++g){for(var v=g*f,y=m[v],b=0;b<f;++b){var x=m[v+b];y=y&&x}h[g]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(p,l.dtype,h);if(i){var w=qle({inputs:{x:k},backend:n,attrs:{shape:W2(p,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},tde={kernelName:"Any",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;R8(a,"any");var s=T$(o,a.shape),u=s,c=j2(u,a.shape.length),l=a;null!=c&&(l=W7({inputs:{x:a},backend:n,attrs:{perm:c}}),u=G2(u.length,a.shape.length)),z2("any",u,l.shape.length);for(var d=Ky(V2(l.shape,u),2),p=d[0],f=x$(d[1]),h=z$(x$(p),l.dtype),m=n.data.get(l.dataId).values,g=0;g<h.length;++g){for(var v=g*f,y=m[v],b=0;b<f;++b){var x=m[v+b];y=y||x}h[g]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(p,l.dtype,h);if(i){var w=qle({inputs:{x:k},backend:n,attrs:{shape:W2(p,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},nde={kernelName:"ArgMax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;R8(a,"argMax");var i=T$(o,a.shape),s=j2(i,a.shape.length),u=a,c=[];null!=s&&(u=W7({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=G2(i.length,u.shape.length)),z2("argMax",i=[i[0]],u.shape.length);for(var l=Ky(V2(u.shape,i),2),d=l[0],p=l[1],f=z$(x$(d),"int32"),h=x$(p),m=n.data.get(u.dataId).values,g=0;g<f.length;++g){for(var v=g*h,y=m[v],b=0,x=0;x<h;++x){var k=m[v+x];k>y&&(y=k,b=x)}f[g]=b}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",f)}},rde={kernelName:"ArgMin",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;R8(a,"argMin");var i=T$(o,a.shape),s=j2(i,a.shape.length),u=a,c=[];null!=s&&(u=W7({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=G2(i.length,u.shape.length)),z2("argMin",i=[i[0]],u.shape.length);for(var l=Ky(V2(u.shape,i),2),d=l[0],p=l[1],f=z$(x$(d),"int32"),h=x$(p),m=n.data.get(u.dataId).values,g=0;g<f.length;++g){for(var v=g*h,y=m[v],b=0,x=0;x<h;++x){var k=m[v+x];k<y&&(y=k,b=x)}f[g]=b}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(d,"int32",f)}},ade={kernelName:"Asin",backendName:"cpu",kernelFunc:J8("Asin",(function(e){return Math.asin(e)}))},ode={kernelName:"Asinh",backendName:"cpu",kernelFunc:J8("Asinh",(function(e){return Math.asinh(e)}))},ide={kernelName:"Atan",backendName:"cpu",kernelFunc:J8("Atan",(function(e){return Math.atan(e)}))},sde={kernelName:"Atan2",backendName:"cpu",kernelFunc:H8("Atan2",M8((function(e,t){return Math.atan2(e,t)})))},ude={kernelName:"Atanh",backendName:"cpu",kernelFunc:J8("Atanh",(function(e){return Math.atanh(e)}))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function cde(e,t,n,r,a,o){for(var i=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,d=a.effectiveFilterWidth,p=a.padInfo.top,f=a.padInfo.left,h="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=m0(a.outShape,n),g=m.values,v=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var k=x*v,w=x*r[0],I=0;I<a.inChannels;++I)for(var C=0;C<a.outHeight;++C)for(var S=C*i-p,E=Math.max(0,S),T=Math.min(a.inHeight,l+S),N=k+C*y,A=0;A<a.outWidth;++A){for(var _=A*s-f,R=Math.max(0,_),O=Math.min(a.inWidth,d+_),F=h,M=0,D=0,B=E;B<T;B+=u){for(var P=w+B*r[1],L=R;L<O;L+=c){var U=e[P+L*r[2]+I];"max"===o&&U>F?F=U:"avg"===o&&(M+=U,D++)}if(isNaN(F))break}g[N+A*b+I]="avg"===o?M/D:F}return m}function lde(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=m0(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,m=m0(t,n,e),g=0;g<r.batchSize;++g)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.outHeight;++y){for(var b=y*s-f,x=b;x<0;)x+=c;for(var k=Math.min(r.inHeight,d+b),w=0;w<r.outWidth;++w){for(var I=w*u-h,C=I;C<0;)C+=l;for(var S=Math.min(r.inWidth,p+I),E=Number.NEGATIVE_INFINITY,T=-1,N=x;N<k;N+=c)for(var A=N-b,_=C;_<S;_+=l){var R=_-I,O=m.get(g,N,_,v);O>E&&(E=O,T=a?o?((g*r.inHeight+N)*r.inWidth+_)*r.inChannels+v:(N*r.inWidth+_)*r.inChannels+v:A*p+R)}i.set(T,g,y,w,v)}}return i}function dde(e,t,n,r,a,o){for(var i=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,d=a.dilationWidth,p=a.effectiveFilterDepth,f=a.effectiveFilterHeight,h=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,v=a.padInfo.left,y="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=m0(a.outShape,n),x=b.values,k=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],I=a.outShape[3]*a.outShape[4],C=a.outShape[4],S=0;S<a.batchSize;++S)for(var E=S*k,T=S*r[0],N=0;N<a.inChannels;++N)for(var A=0;A<a.outDepth;++A){for(var _=A*i-m,R=_;R<0;)R+=c;for(var O=Math.min(a.inDepth,p+_),F=E+A*w,M=0;M<a.outHeight;++M){for(var D=M*s-g,B=D;B<0;)B+=l;for(var P=Math.min(a.inHeight,f+D),L=F+M*I,U=0;U<a.outWidth;++U){for(var V=U*u-v,W=V;W<0;)W+=d;for(var z=Math.min(a.inWidth,h+V),j=L+U*C,H=y,G=0,q=0,K=R;K<O;K+=c){for(var X=T+K*r[1],Q=B;Q<P;Q+=l){for(var Y=X+Q*r[2],$=W;$<z;$+=d){var Z=e[Y+$*r[3]+N];if("max"===o&&Z>H?H=Z:"avg"===o&&(G+=Z,q++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}x[j+N]="avg"===o?G/q:H}}}return b}var pde={kernelName:"AvgPool",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;R8(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;g$(A1(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c,l=b1(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&k$(l.inShape,l.outShape))c=L8({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,p=L$(a.shape),f=cde(d,a.shape,a.dtype,p,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,f.values)}return c}},fde={kernelName:"AvgPool3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;R8(a,"avgPool3d");var l=x1(a.shape,o,i,1,s,u,c),d=dde(n.data.get(a.dataId).values,a.shape,a.dtype,L$(a.shape),l,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}},hde={kernelName:"AvgPool3DGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;R8([a,o],"avgPool3DGrad");for(var l=x1(o.shape,i,s,1,u,c),d=l.strideDepth,p=l.strideHeight,f=l.strideWidth,h=l.filterDepth,m=l.filterHeight,g=l.filterWidth,v=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,k=l.effectiveFilterHeight,w=l.effectiveFilterWidth,I=x-1-l.padInfo.front,C=w-1-l.padInfo.left,S=k-1-l.padInfo.top,E=m0(o.shape,"float32"),T=1/(h*m*g),N=n.bufferSync(a),A=0;A<l.batchSize;++A)for(var _=0;_<l.inChannels;++_)for(var R=0;R<l.inDepth;++R)for(var O=0;O<l.inHeight;++O)for(var F=0;F<l.inWidth;++F){for(var M=R-I,D=O-S,B=F-C,P=0,L=0;L<x;L+=v){var U=(M+L)/d;if(!(U<0||U>=l.outDepth||Math.floor(U)!==U))for(var V=0;V<k;V+=y){var W=(D+V)/p;if(!(W<0||W>=l.outHeight||Math.floor(W)!==W))for(var z=0;z<w;z+=b){var j=(B+z)/f;j<0||j>=l.outWidth||Math.floor(j)!==j||(P+=N.get(A,U,W,j,_))}}}E.set(P*T,A,R,O,F,_)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}},mde={kernelName:"AvgPoolGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;R8([a,o],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=b1(i.shape,s,u,1,c),d=l.strideHeight,p=l.strideWidth,f=l.filterHeight,h=l.filterWidth,m=l.dilationHeight,g=l.dilationWidth,v=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,x=v-1-l.padInfo.top,k=m0(i.shape,"float32"),w=1/(f*h),I=n.data.get(a.dataId).values,C=m0(a.shape,"float32",I),S=0;S<l.batchSize;++S)for(var E=0;E<l.inChannels;++E)for(var T=0;T<l.inHeight;++T)for(var N=0;N<l.inWidth;++N){for(var A=T-x,_=N-b,R=0,O=0;O<v;O+=m){var F=(A+O)/d;if(!(F<0||F>=l.outHeight||Math.floor(F)!==F))for(var M=0;M<y;M+=g){var D=(_+M)/p;D<0||D>=l.outWidth||Math.floor(D)!==D||(R+=C.get(S,F,D,E))}}k.set(R*w,S,T,N,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}},gde={kernelName:"FusedBatchNorm",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.scale,i=t.offset,s=t.mean,u=t.variance;g$(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),g$(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),g$(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),R8([a,s,u,o,i],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,p=n.data.get(u.dataId).values,f=o?n.data.get(o.dataId).values:new Float32Array([1]),h=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(l.length),g=h.length,v=f.length,y=p.length,b=d.length,x=0,k=0,w=0,I=0,C=0;C<l.length;++C)m[C]=h[x++]+(l[C]-d[k++])*f[w++]/Math.sqrt(p[I++]+c),x>=g&&(x=0),k>=b&&(k=0),w>=v&&(w=0),I>=y&&(I=0);return n.makeTensorInfo(a.shape,a.dtype,m)}},vde={kernelName:"BatchToSpaceND",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;R8([a],"batchToSpaceND");var s=o.reduce((function(e,t){return e*t})),u=a6(a.shape,o,s),c=o6(u.length,o.length),l=i6(a.shape,o,s),d=s6(i,o.length),p=u6(l,i,o.length),f=qle({inputs:{x:a},backend:n,attrs:{shape:u}}),h=W7({inputs:{x:f},backend:n,attrs:{perm:c}}),m=qle({inputs:{x:h},backend:n,attrs:{shape:l}}),g=Q7({inputs:{x:m},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}},yde={kernelName:"Bincount",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=Y8(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,s)}},bde={kernelName:"ClipByValue",backendName:"cpu",kernelFunc:J8("ClipByValue",(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}))},xde={kernelName:"ComplexAbs",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(x$(t.shape)),a=n.data.get(t.dataId),o=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,s=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=0;c<s.length;c++){var l=s[c],d=u[c];r[c]=Math.hypot(l,d)}return n.makeOutput(r,t.shape,"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function kde(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var wde={kernelName:"Imag",backendName:"cpu",kernelFunc:kde};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Ide(e){var t=e.inputs,n=e.backend,r=T$(e.attrs.axis,t[0].shape)[0],a=t6(t.map((function(e){return e.shape})),r);if(0===x$(a))return n.makeTensorInfo(a,t[0].dtype,[]);var o=t.filter((function(e){return x$(e.shape)>0}));if(1===o.length)return L8({inputs:{x:o[0]},backend:n});if(e6(o.map((function(e){return e.shape})),r),"complex64"===o[0].dtype){var i=o.map((function(e){return V8({inputs:{input:e},backend:n})})),s=o.map((function(e){return kde({inputs:{input:e},backend:n})})),u=Ide({inputs:i,backend:n,attrs:{axis:r}}),c=Ide({inputs:s,backend:n,attrs:{axis:r}}),l=D8({inputs:{real:u,imag:c},backend:n});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),l}var d=o.map((function(e){var t=x$(e.shape.slice(r));return qle({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),p=d.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=t6(d.map((function(e){return e.shape})),1);var f=1===d[0].shape[0],h=r7(p,a,t[0].dtype,f),m=t6(o.map((function(e){return e.shape})),r),g=n.makeTensorInfo(m,t[0].dtype,h);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}var Cde={kernelName:"Concat",backendName:"cpu",kernelFunc:Ide};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Sde(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;R8([a,o],"conv2d");for(var d=_1(u),p=k1(a.shape,o.shape,i,c,s,l,!1,d),f=p.filterHeight,h=p.filterWidth,m=p.dilationHeight,g=p.dilationWidth,v=p.padInfo.left,y=p.padInfo.top,b="channelsLast"===p.dataFormat,x=new iJ(p.outShape,a.dtype),k=L$(a.shape),w=L$(o.shape),I=k[0],C=b?k[1]:k[2],S=b?k[2]:1,E=b?1:k[1],T=x.strides[0],N=b?x.strides[1]:x.strides[2],A=b?x.strides[2]:1,_=b?1:x.strides[1],R=n.data.get(a.dataId).values,O=n.data.get(o.dataId).values,F=x.values,M=0;M<p.batchSize;++M)for(var D=M*I,B=M*T,P=0;P<p.outHeight;++P)for(var L=B+P*N,U=P*p.strideHeight-y,V=0;V<f;++V){var W=U+V*m;if(!(W<0||W>=p.inHeight))for(var z=V*w[0],j=D+W*C,H=0;H<p.outWidth;++H)for(var G=L+H*A,q=H*p.strideWidth-v,K=0;K<h;++K){var X=q+K*g;if(!(X<0||X>=p.inWidth))for(var Q=j+X*S,Y=z+K*w[1],$=0;$<p.inChannels;++$){for(var Z=R[Q+$*E],J=0;J<p.outChannels;++J)F[G+J*_]+=Z*O[Y+J];Y+=p.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,F)}var Ede={kernelName:"Conv2D",backendName:"cpu",kernelFunc:Sde},Tde={kernelName:"Conv2DBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;R8([a,o],"conv2dBackpropFilter");for(var d=_1(u),p=k1(a.shape,l,i,1,s,c,!1,d),f=p.strideHeight,h=p.strideWidth,m=p.filterHeight,g=p.filterWidth,v="channelsLast"===p.dataFormat,y=new iJ(p.filterShape,"float32"),b=p.padInfo.left,x=p.padInfo.top,k=n.data.get(a.dataId).values,w=n.data.get(o.dataId).values,I=new iJ(a.shape,a.dtype,k),C=new iJ(o.shape,o.dtype,w),S=0;S<m;++S)for(var E=Math.max(0,Math.ceil((x-S)/f)),T=Math.min(p.outHeight,(p.inHeight+x-S)/f),N=0;N<g;++N)for(var A=Math.max(0,Math.ceil((b-N)/h)),_=Math.min(p.outWidth,(p.inWidth+b-N)/h),R=0;R<p.inChannels;++R)for(var O=0;O<p.outChannels;++O){for(var F=0,M=0;M<p.batchSize;++M)for(var D=E;D<T;++D)for(var B=S+D*f-x,P=A;P<_;++P){var L=N+P*h-b;F+=v?I.get(M,B,L,R)*C.get(M,D,P,O):I.get(M,R,B,L)*C.get(M,O,D,P)}y.set(F,S,N,R,O)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},Nde={kernelName:"Conv2DBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode;R8([a,o],"conv2dBackpropInput");var d=L$(o.shape),p=L$(a.shape),f=_1(c),h=k1(i,o.shape,s,1,u,l,!1,f),m=new iJ(h.inShape,"float32"),g=m.values,v=n.data.get(a.dataId).values,y=n.data.get(o.dataId).values,b=Ky(d,3),x=b[0],k=b[1],w=b[2],I=h.batchSize,C=h.filterHeight,S=h.filterWidth,E=h.inChannels,T=h.inHeight,N=h.inWidth,A=h.outChannels,_=h.outHeight,R=h.outWidth,O=h.strideHeight,F=h.strideWidth;f=h.dataFormat;for(var M=C-1-h.padInfo.top,D=S-1-h.padInfo.left,B="channelsLast"===f,P=m.strides[0],L=B?m.strides[1]:m.strides[2],U=B?m.strides[2]:1,V=B?1:m.strides[1],W=p[0],z=B?p[1]:p[2],j=B?p[2]:1,H=B?1:p[1],G=0;G<I;++G)for(var q=0;q<E;++q)for(var K=0;K<T;++K)for(var X=K-M,Q=Math.max(0,Math.ceil(X/O)),Y=Math.min(_,(C+X)/O),$=0;$<N;++$){for(var Z=$-D,J=Math.max(0,Math.ceil(Z/F)),ee=Math.min(R,(S+Z)/F),te=0,ne=Q;ne<Y;++ne)for(var re=ne*O-X,ae=J;ae<ee;++ae)for(var oe=W*G+z*ne+j*ae,ie=x*(C-1-re)+k*(S-1-(ae*F-Z))+w*q,se=0;se<A;++se)te+=v[oe+H*se]*y[ie+se];g[P*G+L*K+U*$+V*q]=te}return n.makeTensorInfo(m.shape,m.dtype,m.values)}},Ade={kernelName:"Conv3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations;R8([a,o],"conv3d");for(var c=w1(a.shape,o.shape,i,u,s),l=c.filterDepth,d=c.filterHeight,p=c.filterWidth,f=c.dilationDepth,h=c.dilationHeight,m=c.dilationWidth,g=c.padInfo,v=g.front,y=g.left,b=g.top,x=new iJ(c.outShape,a.dtype),k=n.data.get(a.dataId).values,w=n.data.get(o.dataId).values,I=x.values,C=L$(a.shape),S=L$(o.shape),E=0;E<c.batchSize;++E)for(var T=E*C[0],N=E*x.strides[0],A=0;A<c.outDepth;++A)for(var _=N+A*x.strides[1],R=A*c.strideDepth-v,O=0;O<l;++O){var F=R+O*f;if(!(F<0||F>=c.inDepth))for(var M=O*S[0],D=T+F*C[1],B=0;B<c.outHeight;++B)for(var P=_+B*x.strides[2],L=B*c.strideHeight-b,U=0;U<d;++U){var V=L+U*h;if(!(V<0||V>=c.inHeight))for(var W=M+U*S[1],z=D+V*C[2],j=0;j<c.outWidth;++j)for(var H=P+j*c.outChannels,G=j*c.strideWidth-y,q=0;q<p;++q){var K=G+q*m;if(!(K<0||K>=c.inWidth))for(var X=W+q*S[2],Q=z+K*c.inChannels,Y=X,$=0;$<c.inChannels;++$){for(var Z=k[Q+$],J=0;J<c.outChannels;++J)I[H+J]+=Z*w[Y+J];Y+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}},_de={kernelName:"Conv3DBackpropFilterV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.filterShape;R8([a,o],"conv3dBackpropFilterV2");for(var c=L$(a.shape),l=L$(o.shape),d=w1(a.shape,u,i,1,s),p=d.strideDepth,f=d.strideHeight,h=d.strideWidth,m=d.filterDepth,g=d.filterHeight,v=d.filterWidth,y=new iJ(d.filterShape,"float32"),b=y.values,x=Ky(y.strides,4),k=x[0],w=x[1],I=x[2],C=x[3],S=n.data.get(o.dataId).values,E=Ky(l,4),T=E[0],N=E[1],A=E[2],_=E[3],R=n.data.get(a.dataId).values,O=Ky(c,4),F=O[0],M=O[1],D=O[2],B=O[3],P=d.padInfo.front,L=d.padInfo.left,U=d.padInfo.top,V=0;V<m;++V)for(var W=Math.max(0,Math.ceil((P-V)/p)),z=Math.min(d.outDepth,(d.inDepth+P-V)/p),j=V*k,H=0;H<g;++H)for(var G=Math.max(0,Math.ceil((U-H)/f)),q=Math.min(d.outHeight,(d.inHeight+U-H)/f),K=H*w+j,X=0;X<v;++X)for(var Q=Math.max(0,Math.ceil((L-X)/h)),Y=Math.min(d.outWidth,(d.inWidth+L-X)/h),$=X*I+K,Z=0;Z<d.inChannels;++Z)for(var J=Z*C+$,ee=0;ee<d.outChannels;++ee){for(var te=0,ne=0;ne<d.batchSize;++ne)for(var re=ne*F,ae=ne*T,oe=W;oe<z;++oe)for(var ie=(V+oe*p-P)*M+re,se=oe*N+ae,ue=G;ue<q;++ue)for(var ce=(H+ue*f-U)*D+ie,le=ue*A+se,de=Q;de<Y;++de){var pe=de*_+le;te+=R[(X+de*h-L)*B+ce+Z]*S[pe+ee]}b[J+ee]=te}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},Rde={kernelName:"Conv3DBackpropInputV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,u=r.inputShape;R8([a],"conv3dBackpropInputV2");for(var c=L$(a.shape),l=L$(o.shape),d=w1(u,o.shape,s,1,i),p=new iJ(d.inShape,"float32"),f=p.values,h=Ky(p.strides,4),m=h[0],g=h[1],v=h[2],y=h[3],b=n.data.get(a.dataId).values,x=Ky(c,4),k=x[0],w=x[1],I=x[2],C=x[3],S=n.data.get(o.dataId).values,E=Ky(l,4),T=E[0],N=E[1],A=E[2],_=E[3],R=d.batchSize,O=d.filterDepth,F=d.filterHeight,M=d.filterWidth,D=d.inChannels,B=d.inDepth,P=d.inHeight,L=d.inWidth,U=d.outChannels,V=d.outDepth,W=d.outHeight,z=d.outWidth,j=d.strideDepth,H=d.strideHeight,G=d.strideWidth,q=O-1-d.padInfo.front,K=F-1-d.padInfo.top,X=M-1-d.padInfo.left,Q=0;Q<R;++Q)for(var Y=0;Y<D;++Y)for(var $=0;$<B;++$)for(var Z=$-q,J=Math.max(0,Math.ceil(Z/j)),ee=Math.min(V,(O+Z)/j),te=0;te<P;++te)for(var ne=te-K,re=Math.max(0,Math.ceil(ne/H)),ae=Math.min(W,(F+ne)/H),oe=0;oe<L;++oe){for(var ie=oe-X,se=Math.max(0,Math.ceil(ie/G)),ue=Math.min(z,(M+ie)/G),ce=0,le=J;le<ee;++le)for(var de=le*j-Z,pe=re;pe<ae;++pe)for(var fe=pe*H-ne,he=se;he<ue;++he)for(var me=k*Q+w*le+I*pe+C*he,ge=T*(O-1-de)+N*(F-1-fe)+A*(M-1-(he*G-ie))+_*Y,ve=0;ve<U;++ve)ce+=b[me+ve]*S[ge+ve];f[m*Q+g*$+v*te+y*oe+Y]=ce}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},Ode={kernelName:"Cos",backendName:"cpu",kernelFunc:J8("Cos",(function(e){return Math.cos(e)}))},Fde={kernelName:"Cosh",backendName:"cpu",kernelFunc:J8("Cosh",(function(e){return Math.cosh(e)}))},Mde={kernelName:"CropAndResize",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=Ky(a.shape,4),d=l[0],p=l[1],f=l[2],h=l[3],m=o.shape[0],g=Ky(s,2),v=g[0],y=g[1],b=m0([m,v,y,h],"float32"),x=n.data.get(o.dataId).values,k=n.data.get(i.dataId).values,w=n.data.get(a.dataId).values,I=L$(a.shape),C=L$(b.shape),S=0;S<m;S++){var E=4*S,T=x[E],N=x[E+1],A=x[E+2],_=x[E+3],R=k[S];if(!(R>=d))for(var O=v>1?(A-T)*(p-1)/(v-1):0,F=y>1?(_-N)*(f-1)/(y-1):0,M=0;M<v;M++){var D=v>1?T*(p-1)+M*O:.5*(T+A)*(p-1);if(D<0||D>p-1)for(var B=0;B<y;B++)for(var P=0;P<h;P++){var L=P+B*C[2]+M*C[1]+S*C[0];b.values[L]=c}else if("bilinear"===u)for(var U=Math.floor(D),V=Math.ceil(D),W=D-U,z=0;z<y;z++){var j=y>1?N*(f-1)+z*F:.5*(N+_)*(f-1);if(j<0||j>f-1)for(var H=0;H<h;H++){var G=H+z*C[2]+M*C[1]+S*C[0];b.values[G]=c}else for(var q=Math.floor(j),K=Math.ceil(j),X=j-q,Q=0;Q<h;Q++){var Y=Q+q*I[2]+U*I[1]+R*I[0],$=w[Y],Z=w[Y=Q+K*I[2]+U*I[1]+R*I[0]],J=w[Y=Q+q*I[2]+V*I[1]+R*I[0]],ee=$+(Z-$)*X,te=J+(w[Y=Q+K*I[2]+V*I[1]+R*I[0]]-J)*X;Y=Q+z*C[2]+M*C[1]+S*C[0],b.values[Y]=ee+(te-ee)*W}}else for(var ne=0;ne<y;++ne){var re=y>1?N*(f-1)+ne*F:.5*(N+_)*(f-1);if(re<0||re>f-1)for(var ae=0;ae<h;ae++){var oe=ae+ne*C[2]+M*C[1]+S*C[0];b.values[oe]=c}else for(var ie=Math.round(re),se=Math.round(D),ue=0;ue<h;ue++){var ce=ue+ie*I[2]+se*I[1]+R*I[0],le=ue+ne*C[2]+M*C[1]+S*C[0];b.values[le]=w[ce]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},Dde={kernelName:"Cumsum",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;R8(a,"cumsum");var u=j2([o],a.shape.length),c=a;null!=u&&(c=W7({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=G2(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=vJ(c.dtype,"int32"),p=z$(x$(c.shape),d),f=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},g=0;g<f.length;g+=h)for(var v=0;v<h;v++){var y=m(g,v);if(0===v)p[y]=i?0:f[y];else{var b=m(g,v-1);p[y]=i?f[b]+p[b]:f[y]+p[b]}}var x=n.makeTensorInfo(c.shape,d,p);if(null!=u){var k=W7({inputs:{x:x},backend:n,attrs:{perm:H2(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),k}return x}},Bde={kernelName:"DenseBincount",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=Y8(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}if(2===a.shape.length){var c=$8(n.bufferSync(a),n.bufferSync(o),i,s);return n.makeTensorInfo(c.shape,o.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}},Pde={kernelName:"DepthToSpace",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;g$("NHWC"===i,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i)})),g$(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],d=u*o,p=c*o,f=l/(o*o),h=n.data.get(a.dataId).values,m=new Float32Array(s*d*p*f),g=0,v=0;v<s;++v)for(var y=0;y<d;++y)for(var b=Math.floor(y/o),x=y%o,k=0;k<p;++k)for(var w=Math.floor(k/o),I=(x*o+k%o)*f,C=0;C<f;++C){var S=C+I+l*(w+c*(b+u*v));m[g++]=h[S]}return n.makeTensorInfo([s,d,p,f],a.dtype,m)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Lde(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;R8([a,o],"depthwiseConv2DNative");var l=L$(a.shape),d=L$(o.shape),p=u;null==p&&(p=[1,1]),g$(A1(i,p),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(p,"'")}));for(var f=k1(a.shape,o.shape,i,p,s,c,!0),h=f.filterHeight,m=f.filterWidth,g=f.dilationHeight,v=f.dilationWidth,y=f.padInfo,b=y.left,x=y.top,k=f.outChannels/f.inChannels,w=new iJ(f.outShape,a.dtype),I=n.data.get(a.dataId).values,C=n.data.get(o.dataId).values,S=w.values,E=0;E<f.batchSize;++E)for(var T=E*l[0],N=E*w.strides[0],A=0;A<f.outHeight;++A)for(var _=N+A*w.strides[1],R=A*f.strideHeight-x,O=0;O<h;++O){var F=R+O*g;if(!(F<0||F>=f.inHeight))for(var M=O*d[0],D=T+F*l[1],B=0;B<f.outWidth;++B)for(var P=_+B*w.strides[2],L=B*f.strideWidth-b,U=0;U<m;++U){var V=L+U*v;if(!(V<0||V>=f.inWidth))for(var W=M+U*d[1],z=D+V*f.inChannels,j=P,H=W,G=0;G<f.inChannels;++G){for(var q=I[z+G],K=0;K<k;++K)S[j+K]+=q*C[H+K];j+=k,H+=k}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var Ude={kernelName:"DepthwiseConv2dNative",backendName:"cpu",kernelFunc:Lde},Vde={kernelName:"DepthwiseConv2dNativeBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;R8([a,o],"depthwiseConv2dNativeBackpropFilter");for(var d=k1(a.shape,l,i,s,u,c,!0),p=d.strideHeight,f=d.strideWidth,h=d.filterHeight,m=d.filterWidth,g=new iJ(d.filterShape,"float32"),v=d.padInfo.left,y=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(a.dataId).values,k=new iJ(a.shape,a.dtype,x),w=n.data.get(o.dataId).values,I=new iJ(o.shape,o.dtype,w),C=0;C<h;++C)for(var S=Math.max(0,Math.ceil((y-C)/p)),E=Math.min(d.outHeight,(d.inHeight+y-C)/p),T=0;T<m;++T)for(var N=Math.max(0,Math.ceil((v-T)/f)),A=Math.min(d.outWidth,(d.inWidth+v-T)/f),_=0;_<d.outChannels;++_){for(var R=Math.trunc(_/b),O=_%b,F=0,M=0;M<d.batchSize;++M)for(var D=S;D<E;++D)for(var B=C+D*p-y,P=N;P<A;++P){var L=T+P*f-v;F+=k.get(M,B,L,R)*I.get(M,D,P,_)}g.set(F,C,T,R,O)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}},Wde={kernelName:"DepthwiseConv2dNativeBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape;R8([a,o],"depthwiseConv2DNativeBackpropInput");for(var d=L$(a.shape),p=L$(o.shape),f=k1(l,o.shape,i,s,u,c,!0),h=new iJ(f.inShape,"float32"),m=h.values,g=Ky(h.strides,3),v=g[0],y=g[1],b=g[2],x=n.data.get(a.dataId).values,k=Ky(d,3),w=k[0],I=k[1],C=k[2],S=n.data.get(o.dataId).values,E=Ky(p,3),T=E[0],N=E[1],A=E[2],_=f.batchSize,R=f.filterHeight,O=f.filterWidth,F=f.inChannels,M=f.inHeight,D=f.inWidth,B=f.outChannels,P=f.outHeight,L=f.outWidth,U=f.strideHeight,V=f.strideWidth,W=R-1-f.padInfo.top,z=O-1-f.padInfo.left,j=B/F,H=0;H<_;++H)for(var G=0;G<F;++G)for(var q=0;q<M;++q)for(var K=q-W,X=Math.max(0,Math.ceil(K/U)),Q=Math.min(P,(R+K)/U),Y=0;Y<D;++Y){for(var $=Y-z,Z=Math.max(0,Math.ceil($/V)),J=Math.min(L,(O+$)/V),ee=0,te=X;te<Q;++te)for(var ne=te*U-K,re=Z;re<J;++re)for(var ae=w*H+I*te+C*re,oe=T*(R-1-ne)+N*(O-1-(re*V-$))+A*G,ie=0;ie<j;++ie)ee+=x[ae+(G*j+ie)]*S[oe+ie];m[v*H+y*q+b*Y+G]=ee}return n.makeTensorInfo(h.shape,h.dtype,h.values)}},zde={kernelName:"Diag",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=x$(r.shape),o=n.data.get(r.dataId).values,i=m0([a,a],r.dtype),s=i.values,u=0;u<o.length;u++)s[u*a+u]=o[u];var c=[].concat(Xy(r.shape),Xy(r.shape));return n.makeTensorInfo(c,i.dtype,i.values)}},jde={kernelName:"Dilation2D",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,d=a.shape.length,p=c.data.get(o.dataId).values,f=o.shape.length,h=y1(a.shape,o.shape,i,s,"NHWC",u),m=h.batchSize,g=h.inHeight,v=h.inWidth,y=h.inChannels,b=h.outHeight,x=h.outWidth,k=h.padInfo,w=h.strideHeight,I=h.strideWidth,C=h.filterHeight,S=h.filterWidth,E=h.dilationHeight,T=h.dilationWidth,N=h.outShape,A=x$(N),_=N.length,R=_$(a.dtype,A),O=0;O<m;++O)for(var F=0;F<b;++F)for(var M=F*w-k.top,D=0;D<x;++D)for(var B=D*I-k.left,P=0;P<y;++P){for(var L=Number.MIN_SAFE_INTEGER,U=0;U<C;++U){var V=M+U*E;if(V>=0&&V<g)for(var W=0;W<S;++W){var z=B+W*T;if(z>=0&&z<v){var j=G$([O,V,z,P],d,L$(a.shape)),H=G$([U,W,P],f,L$(o.shape)),G=l[j]+p[H];G>L&&(L=G)}}}R[G$([O,F,D,P],_,L$(N))]=L}return{dataId:c.write(XZ(R,a.dtype),N,a.dtype),shape:N,dtype:a.dtype}}},Hde={kernelName:"Dilation2DBackpropFilter",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=V$(a.shape,l.data.get(a.dataId).values),p=V$(o.shape,l.data.get(o.dataId).values),f=y1(a.shape,o.shape,s,u,"NHWC",c),h=f.batchSize,m=f.inHeight,g=f.inWidth,v=f.inChannels,y=f.outHeight,b=f.outWidth,x=f.padInfo,k=f.strideHeight,w=f.strideWidth,I=f.filterHeight,C=f.filterWidth,S=f.dilationHeight,E=f.dilationWidth,T=f.outShape;g$(i.rank===T.length,(function(){return"Error in Dilation2DBackpropFilter, dy must have the same rank as output ".concat(T.length,", but got ").concat(i.rank)}));for(var N=V$(T,l.data.get(i.dataId).values),A=j$(o.shape,o.dtype),_=0;_<h;++_)for(var R=0;R<y;++R)for(var O=R*k-x.top,F=0;F<b;++F)for(var M=F*w-x.left,D=0;D<v;++D){for(var B=Number.MIN_SAFE_INTEGER,P=0,L=0,U=0;U<I;++U){var V=O+U*S;if(V>=0&&V<m)for(var W=0;W<C;++W){var z=M+W*E;if(z>=0&&z<g){var j=d[_][V][z][D]+p[U][W][D];j>B&&(B=j,P=U,L=W)}}}A[P][L][D]+=N[_][R][F][D]}return{dataId:l.write(XZ(A,a.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},Gde={kernelName:"Dilation2DBackpropInput",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=V$(a.shape,l.data.get(a.dataId).values),p=V$(o.shape,l.data.get(o.dataId).values),f=y1(a.shape,o.shape,s,u,"NHWC",c),h=f.batchSize,m=f.inHeight,g=f.inWidth,v=f.inChannels,y=f.outHeight,b=f.outWidth,x=f.padInfo,k=f.strideHeight,w=f.strideWidth,I=f.filterHeight,C=f.filterWidth,S=f.dilationHeight,E=f.dilationWidth,T=f.outShape;g$(i.rank===T.length,(function(){return"Error in Dilation2DBackpropInput, dy must have the same rank as output ".concat(T.length,", but got ").concat(i.rank)}));for(var N=V$(T,l.data.get(i.dataId).values),A=j$(a.shape,a.dtype),_=0;_<h;++_)for(var R=0;R<y;++R)for(var O=R*k-x.top,F=0;F<b;++F)for(var M=F*w-x.left,D=0;D<v;++D){for(var B=Number.MIN_SAFE_INTEGER,P=O<0?0:O,L=M<0?0:M,U=0;U<I;++U){var V=O+U*S;if(V>=0&&V<m)for(var W=0;W<C;++W){var z=M+W*E;if(z>=0&&z<g){var j=d[_][V][z][D]+p[U][W][D];j>B&&(B=j,P=V,L=z)}}}A[_][P][L][D]+=N[_][R][F][D]}return{dataId:l.write(XZ(A,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function qde(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.axis,s=a.keepDims;R8(o,"sum");var u=(t="bool"===o.dtype?z8({inputs:{x:o},backend:r,attrs:{dtype:"int32"}}):L8({inputs:{x:o},backend:r})).shape.length,c=T$(i,t.shape),l=j2(c,u),d=c,p=t;null!=l&&(p=W7({inputs:{x:t},backend:r,attrs:{perm:l}}),d=G2(d.length,u)),z2("sum",d,p.shape.length);for(var f=Ky(V2(p.shape,d),2),h=f[0],m=f[1],g=P8(r,h,vJ(p.dtype,"int32")),v=x$(m),y=r.data.get(g.dataId).values,b=r.data.get(p.dataId).values,x=0;x<y.length;++x){for(var k=x*v,w=0,I=0;I<v;++I)w+=b[k+I];y[x]=w}if(s){var C=g;g=qle({inputs:{x:g},backend:r,attrs:{shape:W2(g.shape,c)}}),r.disposeIntermediateTensorInfo(C)}return r.disposeIntermediateTensorInfo(t),null!=l&&r.disposeIntermediateTensorInfo(p),g}var Kde={kernelName:"Sum",backendName:"cpu",kernelFunc:qde},Xde={kernelName:"Einsum",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=b6(e.attrs.equation,r.length),o=a.allDims,i=a.summedDims,s=a.idDims;k6(o.length,s,r);for(var u=w6(i,s),c=u.path,l=u.steps,d=l.length,p=null,f=o.length,h=[],m=0;m<d;++m){var g,v=rb(l[m]);try{for(v.s();!(g=v.n()).done;){var y=g.value,b=x6(f,s[y]),x=b.permutationIndices,k=b.expandDims,w=void 0;I6(x)?w=r[y]:(w=W7({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),h.push(w));for(var I=w.shape.slice(),C=0;C<k.length;++C)I.splice(k[C],0,1);k$(w.shape,I)||(w=qle({inputs:{x:w},backend:n,attrs:{shape:I}}),h.push(w)),null===p?p=w:(p=M7({inputs:{a:w,b:p},backend:n}),h.push(p))}}catch(e){v.e(e)}finally{v.f()}m<d-1&&(c[m]>=0&&(p=qde({inputs:{x:p},backend:n,attrs:{axis:c[m]-(o.length-f),keepDims:!1}}),h.push(p)),f--)}for(var S=0,E=h;S<E.length;S++){var T=E[S];T!==p&&n.disposeIntermediateTensorInfo(T)}return p}},Qde={kernelName:"EluGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;R8([r,a],"eluGrad");for(var o=new Float32Array(x$(a.shape)),i=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<i.length;++u){var c=i[u];o[u]=c>=1?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",o)}},Yde={kernelName:"Erf",backendName:"cpu",kernelFunc:J8("Erf",(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))}))};
/**
	 * @license
	 * Copyright 2021 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function $de(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,o=r.dim,i=a.shape.length,s=a.shape.slice(),u=o;return o<0&&(g$(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+o+1),s.splice(u,0,1),qle({inputs:{x:a},backend:n,attrs:{shape:s}})}var Zde={kernelName:"ExpandDims",backendName:"cpu",kernelFunc:$de},Jde=H8("RealDiv",M8((function(e,t){return e/t}))),epe={kernelName:"RealDiv",backendName:"cpu",kernelFunc:Jde};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function tpe(e,t,n){for(var r=e.shape,a=r[0],o=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,c=[a,o],l=x$(c),d=A$("float32",l),p=A$("float32",l),f=0;f<a;f++){for(var h=Q7({inputs:{x:s},backend:n,attrs:{begin:[f,0],size:[1,o]}}),m=Q7({inputs:{x:u},backend:n,attrs:{begin:[f,0],size:[1,o]}}),g=D8({inputs:{real:h,imag:m},backend:n}),v=npe(g,t,n),y=l6(v.real,v.imag),b=0;b<o;b++){var x=h6(y,b);d[f*o+b]=x.real,p[f*o+b]=x.imag}n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g)}var k=n.makeTensorInfo(c,"float32",d),w=n.makeTensorInfo(c,"float32",p),I=D8({inputs:{real:k,imag:w},backend:n});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(w),I}function npe(e,t,n){var r,a=x$(e.shape),o=n.data.get(e.dataId),i=n.data.get(o.complexTensorInfos.real.dataId).values,s=n.data.get(o.complexTensorInfos.imag.dataId).values;if(0==((r=a)&r-1)){var u=rpe(i,s,a,t,n),c=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(c,"float32",u.real),d=n.makeTensorInfo(c,"float32",u.imag),p=n.makeTensorInfo([],"float32",KZ(a,"float32")),f=L8({inputs:{x:p},backend:n}),h=epe.kernelFunc({inputs:{a:l,b:p},backend:n}),m=epe.kernelFunc({inputs:{a:d,b:f},backend:n}),g=n.data.get(h.dataId).values,v=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),{real:g,imag:v}}return u}return d6(function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var o=0,i=0,s=0;s<t;s++){var u=v6(a*s,t,n),c=h6(e,s);o+=c.real*u.real-c.imag*u.imag,i+=c.real*u.imag+c.imag*u.real}n&&(o/=t,i/=t),m6(r,o,i,a)}return r}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(l6(i,s),a,t))}function rpe(e,t,n,r,a){if(1===n)return{real:e,imag:t};var o=l6(e,t),i=n/2,s=p6(o),u=s.real,c=s.imag,l=[u.length],d=a.makeTensorInfo(l,"float32",u),p=a.makeTensorInfo(l,"float32",c),f=D8({inputs:{real:d,imag:p},backend:a}),h=f6(o),m=h.real,g=h.imag,v=[m.length],y=a.makeTensorInfo(v,"float32",m),b=a.makeTensorInfo(v,"float32",g),x=D8({inputs:{real:y,imag:b},backend:a}),k=rpe(u,c,i,r,a),w=k.real,I=k.imag,C=[w.length],S=a.makeTensorInfo(C,"float32",w),E=a.makeTensorInfo(C,"float32",I),T=D8({inputs:{real:S,imag:E},backend:a}),N=rpe(m,g,i,r,a),A=N.real,_=N.imag,R=[A.length],O=a.makeTensorInfo(R,"float32",A),F=a.makeTensorInfo(R,"float32",_),M=D8({inputs:{real:O,imag:F},backend:a}),D=g6(n,r),B=[D.real.length],P=a.makeTensorInfo(B,"float32",D.real),L=a.makeTensorInfo(B,"float32",D.imag),U=D8({inputs:{real:P,imag:L},backend:a}),V=M7({inputs:{a:U,b:M},backend:a}),W=X8({inputs:{a:T,b:V},backend:a}),z=c9({inputs:{a:T,b:V},backend:a}),j=V8({inputs:{input:W},backend:a}),H=V8({inputs:{input:z},backend:a}),G=kde({inputs:{input:W},backend:a}),q=kde({inputs:{input:z},backend:a}),K=Ide({inputs:[j,H],backend:a,attrs:{axis:0}}),X=Ide({inputs:[G,q],backend:a,attrs:{axis:0}}),Q=a.data.get(K.dataId).values,Y=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(X),{real:Q,imag:Y}}var ape={kernelName:"FFT",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=x$(r.shape),o=r.shape[r.shape.length-1],i=qle({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=tpe(i,!1,n),u=qle({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function ope(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype||D$(a),i=_$(o,x$(r));return function(e,t,n){e.fill(t)}
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */(i,a),t.makeTensorInfo(r,o,i)}var ipe={kernelName:"Fill",backendName:"cpu",kernelFunc:ope},spe={kernelName:"FlipLeftRight",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,o=A$(r.dtype,x$(r.shape)),i=Ky(r.shape,4),s=i[0],u=i[1],c=i[2],l=i[3],d=a.data.get(r.dataId).values,p=0;p<s;p++)for(var f=p*c*u*l,h=0;h<u;h++)for(var m=h*(c*l),g=0;g<c;g++)for(var v=g*l,y=0;y<l;y++){var b=Math.round(c-g-1),x=f+m+v+y,k=d[x];b>=0&&b<c&&(k=d[f+m+b*l+y]),o[x]=k}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},upe={kernelName:"FloorDiv",backendName:"cpu",kernelFunc:H8("FloorDiv",M8((function(e,t){return Math.floor(e/t)})),null,"int32")},cpe={kernelName:"FusedConv2D",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,p=r.dimRoundingMode,f=r.activation,h=r.leakyreluAlpha,m=Sde({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p}});if(i){var g=m;m=X8({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(f){var v=m;m=Gle(n,m,f,s,h),n.disposeIntermediateTensorInfo(v)}return m}},lpe={kernelName:"FusedDepthwiseConv2D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,p=r.dimRoundingMode,f=r.activation,h=r.leakyreluAlpha,m=Lde({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p}});if(i){var g=m;m=X8({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(f){var v=m;m=Gle(n,m,f,s,h),n.disposeIntermediateTensorInfo(v)}return m}},dpe={kernelName:"GatherNd",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=x$(r.shape),i=a.shape,s=i[i.length-1],u=Ky(A0(r,a),4),c=u[0],l=u[1],d=u[2],p=u[3];if(0===l)return n.makeTensorInfo(c,r.dtype,[]);var f=h7(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,l,s,d,p,r.shape,o);return n.makeTensorInfo(c,r.dtype,f.values)}},ppe={kernelName:"GatherV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims;R8([a,o],"gatherV2");var u=s;null==s&&(u=0);var c=x$(o.shape),l=N6(a,o,T$(i,a.shape)[0],u),d=qle({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),p=qle({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}}),f=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize],h=n.bufferSync(p),m=m7(n.bufferSync(d),h,f);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.makeTensorInfo(l.outputShape,m.dtype,m.values)}},fpe={kernelName:"IFFT",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=x$(r.shape),o=r.shape[r.shape.length-1],i=qle({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=tpe(i,!0,n),u=qle({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}},hpe={kernelName:"IsFinite",backendName:"cpu",kernelFunc:J8("IsFinite",(function(e){return Number.isFinite(e)?1:0}),"bool")},mpe={kernelName:"IsInf",backendName:"cpu",kernelFunc:J8("IsInf",(function(e){return Math.abs(e)===1/0?1:0}),"bool")},gpe={kernelName:"IsNan",backendName:"cpu",kernelFunc:J8("IsNan",(function(e){return Number.isNaN(e)?1:0}),"bool")},vpe={kernelName:"LinSpace",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.backend,n=e.attrs,r=C7(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},ype={kernelName:"Log1p",backendName:"cpu",kernelFunc:J8("Log1p",(function(e){return Math.log1p(e)}))},bpe={kernelName:"LogicalAnd",backendName:"cpu",kernelFunc:H8("LogicalAnd",M8((function(e,t){return e&&t})),null,"bool")},xpe={kernelName:"LogicalNot",backendName:"cpu",kernelFunc:J8("LogicalNot",(function(e){return e?0:1}),"bool")},kpe={kernelName:"LogicalOr",backendName:"cpu",kernelFunc:H8("LogicalOr",M8((function(e,t){return e||t})),null,"bool")},wpe={kernelName:"LRN",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta;R8(a,"LRN");var c=a.shape[3],l=c-1,d=n.data.get(a.dataId).values,p=x$(a.shape),f=new Float32Array(p);function h(e){for(var t=e%c,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,l),a=0;n<=r;n++){var i=d[n];a+=i*i}return a}for(var m=0;m<p;m++){var g=h(m),v=d[m]*Math.pow(i+s*g,-u);f[m]=v}return n.makeTensorInfo(a.shape,a.dtype,f)}},Ipe={kernelName:"LRNGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;R8(i,"LRNGrad");for(var d=x$(i.shape),p=i.shape[3],f=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,m=n.data.get(o.dataId).values,g=new Float32Array(d),v=d,y=0;y<v;y++){for(var b=y%p,x=y-b+Math.max(0,b-s),k=y-b+Math.min(p,b+s+1),w=0,I=x;I<k;I++)w+=Math.pow(h[I],2);w=c*w+u;for(var C=x;C<k;C++){var S=-2*c*l*h[C]*m[y]/w;y===C&&(S+=Math.pow(w,-l)),S*=f[y],g[C]+=S}}return n.makeTensorInfo(i.shape,a.dtype,g)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Cpe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,i=r.keepDims,s=n,u=a.shape,c=u.length,l=T$(o,u),d=l,p=j2(d,c),f=s.data.get(a.dataId).values;if(null!=p){for(var h=new Array(c),m=0;m<h.length;m++)h[m]=u[p[m]];f=V7(f,u,a.dtype,p,h),d=G2(d.length,c),u=h}R8(a,"max"),z2("max",d,c);var g=Ky(V2(u,d),2),v=g[0],y=T7(f,x$(g[1]),v,a.dtype),b=s.write(y,v,a.dtype),x=v;return i&&(x=W2(v,l)),{dataId:b,shape:x,dtype:a.dtype}}var Spe={kernelName:"Max",backendName:"cpu",kernelFunc:Cpe},Epe={kernelName:"MaxPool",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;R8(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;g$(A1(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '1'")}));var c,l=b1(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&k$(l.inShape,l.outShape))c=L8({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,p=L$(a.shape),f=cde(d,a.shape,a.dtype,p,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,f.values)}return c}},Tpe={kernelName:"MaxPool3D",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;R8(a,"maxPool3d");var l=x1(a.shape,o,i,1,s,u,c),d=dde(n.data.get(a.dataId).values,a.shape,a.dtype,L$(a.shape),l,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}},Npe={kernelName:"MaxPool3DGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;R8([a,o],"maxPool3DGrad");for(var l=x1(o.shape,i,s,1,u,c),d=function(e,t){for(var n=m0(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.front,f=t.padInfo.top,h=t.padInfo.left,m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var v=0;v<t.outDepth;++v){for(var y=v*r-p,b=y;b<0;)b+=i;for(var x=Math.min(t.inDepth,c+y),k=0;k<t.outHeight;++k){for(var w=k*a-f,I=w;I<0;)I+=s;for(var C=Math.min(t.inHeight,l+w),S=0;S<t.outWidth;++S){for(var E=S*o-h,T=E;T<0;)T+=u;for(var N=Math.min(t.inWidth,d+E),A=Number.NEGATIVE_INFINITY,_=-1,R=b;R<x;R+=i)for(var O=R-y,F=I;F<C;F+=s)for(var M=F-w,D=T;D<N;D+=u){var B=D-E,P=e.get(m,R,F,D,g);P>=A&&(A=P,_=O*l*d+M*l+B)}n.set(_,m,v,k,S,g)}}}return n}(n.bufferSync(o),l),p=l.strideDepth,f=l.strideHeight,h=l.strideWidth,m=l.dilationDepth,g=l.dilationHeight,v=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,k=y-1-l.padInfo.front,w=x-1-l.padInfo.left,I=b-1-l.padInfo.top,C=m0(o.shape,"float32"),S=n.bufferSync(a),E=0;E<l.batchSize;++E)for(var T=0;T<l.inChannels;++T)for(var N=0;N<l.inDepth;++N)for(var A=0;A<l.inHeight;++A)for(var _=0;_<l.inWidth;++_){for(var R=N-k,O=A-I,F=_-w,M=0,D=0;D<y;D+=m){var B=(R+D)/p;if(!(B<0||B>=l.outDepth||Math.floor(B)!==B))for(var P=0;P<b;P+=g){var L=(O+P)/f;if(!(L<0||L>=l.outHeight||Math.floor(L)!==L))for(var U=0;U<x;U+=v){var V=(F+U)/h;if(!(V<0||V>=l.outWidth||Math.floor(V)!==V)){var W=y*b*x-1-d.get(E,B,L,V,T)===D*b*x+P*x+U?1:0;0!==W&&(M+=S.get(E,B,L,V,T)*W)}}}}C.set(M,E,N,A,_,T)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}},Ape={kernelName:"MaxPoolGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;R8([o,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=b1(i.shape,s,u,1,c,l),p=n.data.get(i.dataId).values,f=m0(d.outShape,i.dtype,lde(p,i.shape,i.dtype,d).values),h=d.strideHeight,m=d.strideWidth,g=d.dilationHeight,v=d.dilationWidth,y=d.effectiveFilterHeight,b=d.effectiveFilterWidth,x=b-1-d.padInfo.left,k=y-1-d.padInfo.top,w=m0(i.shape,"float32"),I=n.data.get(a.dataId).values,C=m0(a.shape,"float32",I),S=0;S<d.batchSize;++S)for(var E=0;E<d.inChannels;++E)for(var T=0;T<d.inHeight;++T)for(var N=0;N<d.inWidth;++N){for(var A=T-k,_=N-x,R=0,O=0;O<y;O+=g){var F=(A+O)/h;if(!(F<0||F>=d.outHeight||Math.floor(F)!==F))for(var M=0;M<b;M+=v){var D=(_+M)/m;if(!(D<0||D>=d.outWidth||Math.floor(D)!==D)){var B=y*b-1-f.get(S,F,D,E)===O*b+M?1:0;0!==B&&(R+=C.get(S,F,D,E)*B)}}}w.set(R,S,T,N,E)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},_pe={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,i=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;R8(a,"MaxPoolWithArgmax");var l=c.data.get(a.dataId).values,d=b1(a.shape,o,i,[1,1],s),p=Ky(function(e,t,n,r,a){var o=cde(e,0,n,L$(t),a,"max"),i=lde(e,t,n,a,!0,r);return[o.values,i.values]}(l,a.shape,a.dtype,u,d),2),f=p[0],h=p[1],m=c.write(f,d.outShape,a.dtype),g=c.write(h,d.outShape,a.dtype);return[{dataId:m,shape:d.outShape,dtype:a.dtype},{dataId:g,shape:d.outShape,dtype:"int32"}]}},Rpe={kernelName:"Mean",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=T$(o,a.shape),u=x$(V2(a.shape,s)[1]),c=[],l=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(l);var d=z8({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(d);var p=Jde({inputs:{a:d,b:l},backend:n});c.push(p);var f=qde({inputs:{x:p},backend:n,attrs:{axis:o,keepDims:i}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),f}},Ope={kernelName:"Min",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;R8(a,"min");var s=T$(o,a.shape),u=s,c=j2(u,a.shape.length),l=a;null!=c&&(l=W7({inputs:{x:a},backend:n,attrs:{perm:c}}),u=G2(u.length,a.shape.length)),z2("min",u,l.shape.length);for(var d=Ky(V2(l.shape,u),2),p=d[0],f=x$(d[1]),h=z$(x$(p),l.dtype),m=n.data.get(l.dataId).values,g=0;g<h.length;++g){for(var v=g*f,y=m[v],b=0;b<f;++b){var x=m[v+b];(Number.isNaN(x)||x<y)&&(y=x)}h[g]=y}null!=c&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(p,l.dtype,h);if(i){var w=qle({inputs:{x:k},backend:n,attrs:{shape:W2(p,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},Fpe={kernelName:"MirrorPad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode;R8(a,"mirrorPad");for(var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=o.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===i?0:1,d=n.data.get(a.dataId).values,p=a.shape.length,f=L$(a.shape),h=x$(s),m=s.length,g=L$(s),v=A$(a.dtype,h),y=0;y<h;y++){for(var b=q$(y,m,g),x=0;x<m;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);var k=G$(b=b.map((function(e,t){return e-u[t]})),p,f);v[y]=d[k]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},Mpe={kernelName:"Mod",backendName:"cpu",kernelFunc:H8("Mod",M8((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Dpe(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.dim,i=a.shape.length,s=o;if(-1===s&&(s=i-1),s!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(i," and dim was ").concat(s));var u=T$([s],a.shape),c=Cpe({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=W2(c.shape,u),d=qle({inputs:{x:c},backend:n,attrs:{shape:l}}),p=c9({inputs:{a:a,b:d},backend:n}),f=u7({inputs:{x:p},backend:n}),h=qde({inputs:{x:f},backend:n,attrs:{axis:u,keepDims:!1}}),m=qle({inputs:{x:h},backend:n,attrs:{shape:l}}),g=Jde({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}var Bpe={kernelName:"Softmax",backendName:"cpu",kernelFunc:Dpe},Ppe={kernelName:"Multinomial",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized;R8(a,"multinomial");for(var u=s?a:Dpe({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],d=n.data.get(u.dataId).values,p=[c,o],f=z$(x$(p),"int32"),h=0;h<c;++h){var m=h*l,g=new Float32Array(l-1);g[0]=d[m];for(var v=1;v<g.length;++v)g[v]=g[v-1]+d[m+v];for(var y=I3.alea(i.toString()),b=h*o,x=0;x<o;++x){var k=y();f[b+x]=g.length;for(var w=0;w<g.length;w++)if(k<g[w]){f[b+x]=w;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(p,"int32",f)}},Lpe=N4,Upe={kernelName:"NonMaxSuppressionV3",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;R8(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,d=Lpe(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},Vpe=A4,Wpe={kernelName:"NonMaxSuppressionV4",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;R8(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,p=Vpe(l,d,i,s,u,c),f=p.selectedIndices,h=p.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},zpe=_4,jpe={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;R8(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,p=zpe(l,d,i,s,u,c),f=p.selectedIndices,h=p.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},Hpe={kernelName:"OneHot",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.depth,i=r.onValue,s=r.offValue;R8(a,"oneHot");var u=x$(a.shape),c=new Float32Array(u*o);c.fill(s);for(var l=n.data.get(a.dataId).values,d=0;d<u;++d)l[d]>=0&&l[d]<o&&(c[d*o+l[d]]=i);return n.makeTensorInfo([].concat(Xy(a.shape),[o]),"int32",c)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Gpe(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=V8({inputs:{input:r},backend:n}),o=Gpe({inputs:{x:a},backend:n}),i=kde({inputs:{input:r},backend:n}),s=Gpe({inputs:{x:i},backend:n}),u=D8({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return ope({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var qpe={kernelName:"ZerosLike",backendName:"cpu",kernelFunc:Gpe},Kpe={kernelName:"OnesLike",backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var o=V8({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=kde({inputs:{input:a},backend:r}),u=Gpe({inputs:{x:s},backend:r}),c=D8({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return ope({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Xpe(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return $de({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){v$(a,e.shape,"All tensors passed to stack must have matching shapes"),g$(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=Ide({inputs:t.map((function(e){var t=$de({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var Qpe={kernelName:"Pack",backendName:"cpu",kernelFunc:Xpe},Ype={kernelName:"PadV2",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;R8(a,"pad");var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=x$(a.shape),d=a.shape.length,p=L$(a.shape),f=x$(s),h=s.length,m=L$(s),g=A$(a.dtype,f);0!==i&&g.fill(i);for(var v=0;v<l;v++)g[G$(q$(v,d,p).map((function(e,t){return e+u[t]})),h,m)]=c[v];return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},$pe={kernelName:"Pow",backendName:"cpu",kernelFunc:H8("Pow",M8((function(e,t){return Math.pow(e,t)})))},Zpe={kernelName:"Range",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.dtype,i=G7(r,a,n.step,o);return t.makeTensorInfo([i.length],o,i)}},Jpe={kernelName:"Reciprocal",backendName:"cpu",kernelFunc:J8("Reciprocal",(function(e){return 1/e}))},efe={kernelName:"ResizeBilinear",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size;R8(a,"resizeBilinear");for(var u=L$(a.shape),c=Ky(s,2),l=c[0],d=c[1],p=Ky(a.shape,4),f=p[0],h=p[1],m=p[2],g=p[3],v=n.data.get(a.dataId).values,y=new Float32Array(x$([f,l,d,g])),b=[o&&l>1?h-1:h,o&&d>1?m-1:m],x=[o&&l>1?l-1:l,o&&d>1?d-1:d],k=0,w=b[0]/x[0],I=b[1]/x[1],C=0;C<f;C++)for(var S=0;S<l;S++){var E;E=i?w*(S+.5)-.5:w*S;for(var T=Math.max(0,Math.floor(E)),N=E-T,A=Math.min(h-1,Math.ceil(E)),_=C*u[0]+T*u[1],R=C*u[0]+A*u[1],O=0;O<d;O++){var F;F=i?I*(O+.5)-.5:I*O;for(var M=Math.max(0,Math.floor(F)),D=F-M,B=Math.min(m-1,Math.ceil(F)),P=_+M*u[2],L=R+M*u[2],U=_+B*u[2],V=R+B*u[2],W=0;W<g;W++){var z=v[P+W],j=v[L+W],H=z+(v[U+W]-z)*D,G=H+(j+(v[V+W]-j)*D-H)*N;y[k++]=G}}}return n.makeTensorInfo([f,l,d,g],"float32",y)}},tfe={kernelName:"ResizeBilinearGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners;R8([o,a],"resizeBilinearGrad");for(var s=L$(a.shape),u=Ky(a.shape,4),c=u[0],l=u[1],d=u[2],p=u[3],f=Ky(o.shape,3),h=f[1],m=f[2],g=new Float32Array(c*l*d*p),v=[i&&h>1?l-1:l,i&&m>1?d-1:d],y=[i&&h>1?h-1:h,i&&m>1?m-1:m],b=v[0]/y[0],x=v[1]/y[1],k=n.data.get(o.dataId).values,w=0,I=0;I<c;I++)for(var C=I*s[0],S=0;S<h;S++)for(var E=S*b,T=Math.floor(E),N=Math.min(Math.ceil(E),l-1),A=C+T*s[1],_=C+N*s[1],R=E-T,O=1-R,F=0;F<m;F++)for(var M=F*x,D=Math.floor(M),B=Math.min(Math.ceil(M),d-1),P=M-D,L=1-P,U=A+D*s[2],V=A+B*s[2],W=_+D*s[2],z=_+B*s[2],j=O*L,H=O*P,G=R*L,q=R*P,K=0;K<p;K++){var X=k[w++];g[U+K]+=X*j,g[V+K]+=X*H,g[W+K]+=X*G,g[z+K]+=X*q}return n.makeTensorInfo([c,d,l,p],"float32",g)}},nfe={kernelName:"ResizeNearestNeighbor",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,i=r.halfPixelCenters,s=r.size;R8(a,"resizeNearestNeighbor");for(var u=L$(a.shape),c=Ky(s,2),l=c[0],d=c[1],p=Ky(a.shape,4),f=p[0],h=p[1],m=p[2],g=p[3],v=n.data.get(a.dataId).values,y=new Float32Array(f*l*d*g),b=[o&&l>1?h-1:h,o&&d>1?m-1:m],x=[o&&l>1?l-1:l,o&&d>1?d-1:d],k=b[0]/x[0],w=b[1]/x[1],I=0,C=0;C<f;C++)for(var S=C*u[0],E=0;E<l;E++){var T=i?k*(E+.5):k*E,N=Math.min(h-1,o?Math.round(T):Math.floor(T));i&&(N=Math.max(0,N));for(var A=S+N*u[1],_=0;_<d;_++){var R=i?w*(_+.5):w*_,O=Math.min(m-1,o?Math.round(R):Math.floor(R));i&&(O=Math.max(0,O));for(var F=A+O*u[2],M=0;M<g;M++){var D=v[F+M];y[I++]=D}}}return n.makeTensorInfo([f,l,d,g],a.dtype,y)}},rfe={kernelName:"ResizeNearestNeighborGrad",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners;R8([o,a],"resizeNearestNeighborGrad");for(var s=L$(a.shape),u=L$(o.shape),c=Ky(a.shape,4),l=c[0],d=c[1],p=c[2],f=c[3],h=Ky(o.shape,3),m=h[1],g=h[2],v=new Float32Array(l*d*p*f),y=n.data.get(o.dataId).values,b=[i&&m>1?d-1:d,i&&g>1?p-1:p],x=[i&&m>1?m-1:m,i&&g>1?g-1:g],k=b[0]/x[0],w=b[1]/x[1],I=1/k,C=1/w,S=2*Math.ceil(I)+2,E=2*Math.ceil(C)+2,T=0;T<l;T++)for(var N=T*s[0],A=0;A<d;A++)for(var _=N+A*s[1],R=Math.floor(A*I),O=Math.floor(R-S/2),F=0;F<p;F++)for(var M=_+F*s[2],D=Math.floor(F*C),B=Math.floor(D-E/2),P=0;P<f;P++){for(var L=0,U=0;U<S;U++){var V=U+O;if(!(V<0||V>=m)){var W=N+V*u[1],z=V*k;if(A===Math.min(d-1,i?Math.round(z):Math.floor(z)))for(var j=0;j<E;j++){var H=j+B;if(!(H<0||H>=g)){var G=W+H*u[2],q=H*w;F===Math.min(p-1,i?Math.round(q):Math.floor(q))&&(L+=y[G+P])}}}}v[M+P]=L}return n.makeTensorInfo(a.shape,a.dtype,v)}},afe={kernelName:"Reverse",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims;R8(a,"reverse");var i=a.shape.length,s=T$(o,a.shape);if(0===i)return L8({inputs:{x:a},backend:n});for(var u=new iJ(a.shape,a.dtype),c=n.bufferSync(a),l=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[c.get.apply(c,Xy(n))].concat(Xy(t)))},d=0;d<u.size;d++)l(d);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},ofe={kernelName:"RotateWithOffset",backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,i=n.fillValue,s=n.center,u=r,c=A$(a.dtype,x$(a.shape)),l=Ky(a.shape,4),d=l[0],p=l[1],f=l[2],h=l[3],m=Ky(r6(s,p,f),2),g=m[0],v=m[1],y=Math.sin(o),b=Math.cos(o),x=u.data.get(a.dataId).values,k=0;k<d;k++)for(var w=k*f*p*h,I=0;I<p;I++)for(var C=I*(f*h),S=0;S<f;S++)for(var E=S*h,T=0;T<h;T++){var N=[d,I,S,T],A=N[2],_=N[1],R=(A-g)*b-(_-v)*y,O=(A-g)*y+(_-v)*b;R=Math.round(R+g),O=Math.round(O+v);var F=i;"number"!=typeof i&&(F=3===T?255:i[T]),R>=0&&R<f&&O>=0&&O<p&&(F=x[w+O*(f*h)+R*h+T]),c[w+C+E+T]=F}return{dataId:u.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},ife={kernelName:"Round",backendName:"cpu",kernelFunc:J8("Round",(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1}))};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function sfe(e,t,n,r,a,o,i,s,u,c){var l=[r/a,a],d=e.values,p=t.values;if(0===r)return m0(n,t.dtype);var f=m0(l,t.dtype);f.values.fill(u);for(var h=0;h<o;h++){for(var m=[],g=0,v=0;v<i;v++){var y=d[h*i+v];m.push(y),g+=y*s[v]}if(g<0||g>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var b=0;b<a;b++)c?f.values[g*a+b]+=p[h*a+b]:f.values[g*a+b]=0===t.rank?p[0]:p[h*a+b]}return f}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ufe={kernelName:"ScatterNd",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=O0(0,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,p=s.outputSize,f=sfe(n.bufferSync(a),n.bufferSync(o),i,p,l,c,u,d,0,!0);return n.makeTensorInfo(i,f.dtype,f.values)}},cfe={kernelName:"Select",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e;R8([r,a,o],"select");for(var i=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=vJ(a.dtype,o.dtype),d=z$(x$(a.shape),l),p=0,f=0===i||i>1||1===a.shape.length?1:x$(a.shape.slice(1)),h=0;h<s.length;h++)for(var m=0;m<f;m++)1===s[h]?d[p++]=u[h]:d[p++]=c[h];return n.makeTensorInfo(a.shape,l,d)}},lfe={kernelName:"Selu",backendName:"cpu",kernelFunc:J8("Selu",(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)}))},dfe={kernelName:"Sign",backendName:"cpu",kernelFunc:J8("Sign",(function(e){return e<0?-1:e>0?1:0}))},pfe={kernelName:"Sin",backendName:"cpu",kernelFunc:J8("Sin",(function(e){return Math.sin(e)}))},ffe={kernelName:"Sinh",backendName:"cpu",kernelFunc:J8("Sinh",(function(e){return Math.sinh(e)}))},hfe=Math.log(1.1920928955078125e-7)+2,mfe={kernelName:"Softplus",backendName:"cpu",kernelFunc:J8("Softplus",(function(e){var t=e>-hfe,n=e<hfe,r=Math.exp(e);return n?r:t?e:Math.log(1+r)}))},gfe={kernelName:"SpaceToBatchND",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;R8([a],"spaceToBatchND");var s=x$(o),u=[[0,0]];u.push.apply(u,Xy(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=Ype.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=a6(l.shape,o,s,!1),p=o6(d.length,o.length,!1),f=i6(l.shape,o,s,!1),h=qle({inputs:{x:l},backend:n,attrs:{shape:d}}),m=W7({inputs:{x:h},backend:n,attrs:{perm:p}}),g=qle({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}},vfe={kernelName:"SparseFillEmptyRows",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,i=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==i.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(i.shape));var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=n.data.get(i.dataId).values[0],d=Ky($7(s,r.shape,r.dtype,u,a.dtype,c,l),5),p=d[0],f=d[1],h=d[2],m=d[3],g=d[4];return[n.makeTensorInfo(f,r.dtype,p),n.makeTensorInfo([f[0]],a.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}},yfe={kernelName:"SparseReshape",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var i=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(o.dataId).values),c=Ky(Z7(s,r.shape,r.dtype,i,u),3),l=c[0],d=c[1],p=c[2];return[n.makeTensorInfo(d,r.dtype,l),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}},bfe={kernelName:"SparseSegmentMean",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(o.shape));var i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,c=Ky(J7(i,r.shape,r.dtype,s,u,!0),2),l=c[0],d=c[1];return n.makeTensorInfo(d,r.dtype,l)}},xfe={kernelName:"SparseSegmentSum",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(o.shape));var i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values,c=Ky(J7(i,r.shape,r.dtype,s,u),2),l=c[0],d=c[1];return n.makeTensorInfo(d,r.dtype,l)}},kfe={kernelName:"SparseToDense",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,u=O0(0,a,s),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,p=u.strides,f=u.outputSize,h=sfe(n.bufferSync(a),n.bufferSync(o),s,f,d,l,c,p,n.data.get(i.dataId).values[0],!1);return n.makeTensorInfo(s,h.dtype,h.values)}},wfe={kernelName:"SplitV",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=T$(r.axis,a.shape)[0],s=S6(a,o,i),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=Xy(c);t[i]=e;var r=Q7({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[i]+=e,r}))}},Ife={kernelName:"Sqrt",backendName:"cpu",kernelFunc:J8("Sqrt",(function(e){return Math.sqrt(e)}))},Cfe={kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;R8(r,"square");for(var o=a.data.get(r.dataId).values,i=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];i[s]=u*u}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Sfe={kernelName:"Step",backendName:"cpu",kernelFunc:J8("Step",(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha}))},Efe={kernelName:"StridedSlice",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,d=r.newAxisMask,p=r.shrinkAxisMask;R8(a,"stridedSlice");var f,h=X0(a.shape,o,i,s,u,c,l,d,p),m=h.nonStrided,g=h.$begin,v=h.$strides,y=h.size,b=h.newShape,x=h.outShape,k=qle({inputs:{x:a},backend:n,attrs:{shape:b}});if(m){var w=Q7({inputs:{x:k},backend:n,attrs:{begin:g,size:y}});f=qle({inputs:{x:w},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(w)}else if(x.some((function(e){return 0===e})))f=n.makeTensorInfo(x,a.dtype,[]);else{var I=n9(x,n.bufferSync(k),v,g);f=n.makeTensorInfo(I.shape,I.dtype,I.values)}var C=qle({inputs:{x:f},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(f),C}},Tfe={kernelName:"StringNGrams",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,i=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,d=t.dataSplits,p=Ky(a9(n.data.get(l.dataId).values,n.data.get(d.dataId).values,a,o,i,s,u,c),2),f=p[0],h=p[1];return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(d.shape,"int32",h)]}},Nfe={kernelName:"StringSplit",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var i=Ky(i9(n.data.get(a.dataId).values,n.data.get(o.dataId).values[0],r),3),s=i[0],u=i[1],c=i[2],l=u.length;return[n.makeTensorInfo([l,2],"int32",s),n.makeTensorInfo([l],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(c))]}},Afe={kernelName:"StringToHashBucketFast",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=s9(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",o)}},_fe={kernelName:"Tan",backendName:"cpu",kernelFunc:J8("Tan",(function(e){return Math.tan(e)}))},Rfe=J8("Tanh",(function(e){return Math.tanh(e)}));
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Ofe(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return f$(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return f$(0,n,t-1)}(e,t);case"nearest":return function(e,t){return f$(0,e,t-1)}(e,t);case"constant":default:return function(e,t){return e}(e)}}function Ffe(e,t,n,r,a,o,i,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[i*r+s*a+u*o+c]:l}function Mfe(e,t,n,r,a,o,i,s,u,c,l){return Ffe(e,t,n,r,a,o,i,Math.round(s),Math.round(u),c,l)}function Dfe(e,t,n,r,a,o,i,s,u,c,l){var d=Math.floor(s),p=Math.floor(u),f=d+1,h=p+1;return(f-s)*((h-u)*Ffe(e,t,n,r,a,o,i,d,p,c,l)+(u-p)*Ffe(e,t,n,r,a,o,i,d,h,c,l))+(s-d)*((h-u)*Ffe(e,t,n,r,a,o,i,f,p,c,l)+(u-p)*Ffe(e,t,n,r,a,o,i,f,h,c,l))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
for(var Bfe=[Yle,F8,$le,Zle,Q8,Jle,ede,tde,nde,rde,ade,ode,ide,sde,ude,pde,fde,hde,mde,Qle,gde,vde,yde,j8,n7,bde,B8,xde,Cde,Tde,Nde,Ede,_de,Rde,Ade,Ode,Fde,Mde,Dde,Bde,Pde,Ude,Vde,Wde,zde,jde,Gde,Hde,epe,Xde,Fle,Qde,i7,Yde,c7,Zde,d7,ape,ipe,spe,f7,upe,cpe,lpe,dpe,ppe,v7,b7,U8,fpe,wde,hpe,mpe,gpe,Dle,k7,I7,vpe,E7,ype,bpe,xpe,kpe,wpe,Ipe,A7,Epe,Tpe,Npe,Ape,_pe,Spe,Rpe,Ope,R7,Fpe,Mpe,Ppe,D7,P7,Upe,Wpe,jpe,U7,Hpe,Kpe,Qpe,Ype,$pe,Lle,H7,Zpe,W8,Jpe,Vle,zle,Kle,efe,tfe,nfe,rfe,afe,ofe,ife,K7,ufe,cfe,lfe,Hle,dfe,pfe,ffe,Y7,Bpe,mfe,gfe,vfe,yfe,bfe,xfe,kfe,wfe,Ife,Cfe,t9,Sfe,Efe,Tfe,Nfe,Afe,l9,Kde,_fe,{kernelName:"Tanh",backendName:"cpu",kernelFunc:Rfe},{kernelName:"Tile",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;R8(a,"tile");var i=d9(n.bufferSync(a),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},{kernelName:"TopK",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,i=r.sorted;R8(a,"topk");var s=Ky(h9(n.data.get(a.dataId).values,a.shape,a.dtype,o,i),2),u=s[0],c=s[1];return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}},z7,{kernelName:"Transform",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2021 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=t.transforms,i=n.interpolation,s=n.fillMode,u=n.fillValue,c=n.outputShape,l=Ky(a.shape,4),d=l[0],p=l[1],f=l[2],h=l[3],m=Ky(null!=c?c:[p,f],2),g=m[0],v=m[1],y=[d,g,v,h],b=L$(a.shape),x=b[0],k=b[1],w=b[2],I=A$(a.dtype,x$(y));I.fill(u);for(var C=r.data.get(a.dataId).values,S=r.data.get(o.dataId).values,E=0;E<d;++E){for(var T=1===o.shape[0]?S:S.subarray(8*E,8*E+8),N=0;N<g;++N)for(var A=0;A<v;++A)for(var _=0;_<h;++_){var R=void 0,O=T[6]*A+T[7]*N+1;if(0!==O){var F=(T[0]*A+T[1]*N+T[2])/O,M=(T[3]*A+T[4]*N+T[5])/O,D=Ofe(F,f,s),B=Ofe(M,p,s);switch(i){case"nearest":R=Mfe(C,p,f,x,k,w,E,B,D,_,u);break;case"bilinear":R=Dfe(C,p,f,x,k,w,E,B,D,_,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got ".concat(i))}I[E*x+N*k+A*w+_]=R}}return r.makeTensorInfo(y,a.dtype,I)}return{dataId:r.write(I,y,a.dtype),shape:a.shape,dtype:a.dtype}}},{kernelName:"Unique",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;R8(o,"unique");var i=m9(r.data.get(o.dataId).values,a,o.shape,o.dtype),s=i.outputValues,u=i.outputShape,c=i.indices;return[r.makeTensorInfo(u,o.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}},{kernelName:"Unpack",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape.length,s=a.shape[o],u=new Array(i-1),c=0,l=0;l<i;l++)l!==o&&(u[c++]=a.shape[l]);var d=new Array(i).fill(0),p=a.shape.slice();p[o]=1;for(var f=new Array(s),h=0;h<f.length;h++){d[o]=h;var m=Q7({inputs:{x:a},backend:n,attrs:{begin:d,size:p}});f[h]=qle({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return f}},{kernelName:"UnsortedSegmentSum",backendName:"cpu",kernelFunc:
/**
	   * @license
	   * Copyright 2020 Google LLC. All Rights Reserved.
	   * Licensed under the Apache License, Version 2.0 (the "License");
	   * you may not use this file except in compliance with the License.
	   * You may obtain a copy of the License at
	   *
	   * http://www.apache.org/licenses/LICENSE-2.0
	   *
	   * Unless required by applicable law or agreed to in writing, software
	   * distributed under the License is distributed on an "AS IS" BASIS,
	   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	   * See the License for the specific language governing permissions and
	   * limitations under the License.
	   * =============================================================================
	   */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments;R8(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-o.shape.length,l=o,d=0;d<c;++d){var p=$de({inputs:{input:l},backend:n,attrs:{dim:d+1}});l=p,u.push(p)}for(var f=0;f<i;++f){var h=KZ(f,"int32"),m=n.makeTensorInfo([],"int32",h),g=o7({inputs:{a:m,b:l},backend:n}),v=z8({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),y=M7({inputs:{a:v,b:a},backend:n}),b=qde({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(m),u.push(g),u.push(v),u.push(y),u.push(b)}var x=Xpe({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},qpe],Pfe=0,Lfe=Bfe;Pfe<Lfe.length;Pfe++){var Ufe=Lfe[Pfe];sZ(Ufe)}var Vfe,Wfe=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return LY(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),c$(e,t,{leading:r,maxWait:t,trailing:a})},zfe=function(e){if(!LY(e))return!1;var t=ZY(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},jfe=WY["__core-js_shared__"],Hfe=(Vfe=/[^.]+$/.exec(jfe&&jfe.keys&&jfe.keys.IE_PROTO||""))?"Symbol(src)_1."+Vfe:"",Gfe=function(e){return!!Hfe&&Hfe in e},qfe=Function.prototype.toString,Kfe=function(e){if(null!=e){try{return qfe.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Xfe=/^\[object .+?Constructor\]$/,Qfe=Function.prototype,Yfe=Object.prototype,$fe=Qfe.toString,Zfe=Yfe.hasOwnProperty,Jfe=RegExp("^"+$fe.call(Zfe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ehe=function(e){return!(!LY(e)||Gfe(e))&&(zfe(e)?Jfe:Xfe).test(Kfe(e))},the=function(e,t){return null==e?void 0:e[t]},nhe=function(e,t){var n=the(e,t);return ehe(n)?n:void 0},rhe=function(){try{var e=nhe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ahe=function(e,t,n){"__proto__"==t&&rhe?rhe(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},ohe=function(e,t){return e===t||e!=e&&t!=t},ihe=Object.prototype.hasOwnProperty,she=function(e,t,n){var r=e[t];ihe.call(e,t)&&ohe(r,n)&&(void 0!==n||t in e)||ahe(e,t,n)},uhe=function(e,t,n,r){var a=!n;n||(n={});for(var o=-1,i=t.length;++o<i;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),a?ahe(n,s,u):she(n,s,u)}return n},che=function(e){return e},lhe=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},dhe=Math.max,phe=function(e,t,n){return t=dhe(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,o=dhe(r.length-t,0),i=Array(o);++a<o;)i[a]=r[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=r[a];return s[t]=n(i),lhe(e,this,s)}},fhe=function(e){return function(){return e}},hhe=rhe?function(e,t){return rhe(e,"toString",{configurable:!0,enumerable:!1,value:fhe(t),writable:!0})}:che,mhe=Date.now,ghe=function(e){var t=0,n=0;return function(){var r=mhe(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(hhe),vhe=function(e,t){return ghe(phe(e,t,che),e+"")},yhe=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},bhe=function(e){return null!=e&&yhe(e.length)&&!zfe(e)},xhe=/^(?:0|[1-9]\d*)$/,khe=function(e,t){var n=Ty(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&xhe.test(e))&&e>-1&&e%1==0&&e<t},whe=function(e,t,n){if(!LY(n))return!1;var r=Ty(t);return!!("number"==r?bhe(n)&&khe(t,n.length):"string"==r&&t in n)&&ohe(n[t],e)},Ihe=function(e){return vhe((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,i=a>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(a--,o):void 0,i&&whe(n[0],n[1],i)&&(o=a<3?void 0:o,a=1),t=Object(t);++r<a;){var s=n[r];s&&e(t,s,r,o)}return t}))},Che=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},She=function(e){return JY(e)&&"[object Arguments]"==ZY(e)},Ehe=Object.prototype,The=Ehe.hasOwnProperty,Nhe=Ehe.propertyIsEnumerable,Ahe=She(function(){return arguments}())?She:function(e){return JY(e)&&The.call(e,"callee")&&!Nhe.call(e,"callee")},_he=Array.isArray,Rhe=function(){return!1},Ohe=HQ((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,a=r&&r.exports===n?WY.Buffer:void 0,o=(a?a.isBuffer:void 0)||Rhe;e.exports=o})),Fhe={};Fhe["[object Float32Array]"]=Fhe["[object Float64Array]"]=Fhe["[object Int8Array]"]=Fhe["[object Int16Array]"]=Fhe["[object Int32Array]"]=Fhe["[object Uint8Array]"]=Fhe["[object Uint8ClampedArray]"]=Fhe["[object Uint16Array]"]=Fhe["[object Uint32Array]"]=!0,Fhe["[object Arguments]"]=Fhe["[object Array]"]=Fhe["[object ArrayBuffer]"]=Fhe["[object Boolean]"]=Fhe["[object DataView]"]=Fhe["[object Date]"]=Fhe["[object Error]"]=Fhe["[object Function]"]=Fhe["[object Map]"]=Fhe["[object Number]"]=Fhe["[object Object]"]=Fhe["[object RegExp]"]=Fhe["[object Set]"]=Fhe["[object String]"]=Fhe["[object WeakMap]"]=!1;var Mhe=function(e){return JY(e)&&yhe(e.length)&&!!Fhe[ZY(e)]},Dhe=function(e){return function(t){return e(t)}},Bhe=HQ((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,a=r&&r.exports===n&&UY.process,o=function(){try{return r&&r.require&&r.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=o})),Phe=Bhe&&Bhe.isTypedArray,Lhe=Phe?Dhe(Phe):Mhe,Uhe=Object.prototype.hasOwnProperty,Vhe=function(e,t){var n=_he(e),r=!n&&Ahe(e),a=!n&&!r&&Ohe(e),o=!n&&!r&&!a&&Lhe(e),i=n||r||a||o,s=i?Che(e.length,String):[],u=s.length;for(var c in e)!t&&!Uhe.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||khe(c,u))||s.push(c);return s},Whe=Object.prototype,zhe=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Whe)},jhe=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},Hhe=Object.prototype.hasOwnProperty,Ghe=function(e){if(!LY(e))return jhe(e);var t=zhe(e),n=[];for(var r in e)("constructor"!=r||!t&&Hhe.call(e,r))&&n.push(r);return n},qhe=function(e){return bhe(e)?Vhe(e,!0):Ghe(e)},Khe=Ihe((function(e,t,n,r){uhe(t,qhe(t),e,r)})),Xhe=function(e,t){return function(n){return e(t(n))}},Qhe=Xhe(Object.getPrototypeOf,Object),Yhe=Function.prototype,$he=Object.prototype,Zhe=Yhe.toString,Jhe=$he.hasOwnProperty,eme=Zhe.call(Object),tme=function(e){if(!JY(e)||"[object Object]"!=ZY(e))return!1;var t=Qhe(e);if(null===t)return!0;var n=Jhe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Zhe.call(n)==eme},nme=function(e){if(!JY(e))return!1;var t=ZY(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!tme(e)},rme=vhe((function(e,t){try{return lhe(e,void 0,t)}catch(e){return nme(e)?e:new Error(e)}})),ame=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a},ome=function(e,t){return ame(t,(function(t){return e[t]}))},ime=Object.prototype,sme=ime.hasOwnProperty,ume=function(e,t,n,r){return void 0===e||ohe(e,ime[n])&&!sme.call(r,n)?t:e},cme={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lme=function(e){return"\\"+cme[e]},dme=Xhe(Object.keys,Object),pme=Object.prototype.hasOwnProperty,fme=function(e){if(!zhe(e))return dme(e);var t=[];for(var n in Object(e))pme.call(e,n)&&"constructor"!=n&&t.push(n);return t},hme=function(e){return bhe(e)?Vhe(e):fme(e)},mme=/<%=([\s\S]+?)%>/g,gme=function(e){return function(t){return null==e?void 0:e[t]}}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),vme=jY?jY.prototype:void 0,yme=vme?vme.toString:void 0,bme=function e(t){if("string"==typeof t)return t;if(_he(t))return ame(t,e)+"";if(e$(t))return yme?yme.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},xme=function(e){return null==e?"":bme(e)},kme=/[&<>"']/g,wme=RegExp(kme.source),Ime={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:mme,variable:"",imports:{_:{escape:function(e){return(e=xme(e))&&wme.test(e)?e.replace(kme,gme):e}}}},Cme=/\b__p \+= '';/g,Sme=/\b(__p \+=) '' \+/g,Eme=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tme=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nme=/($^)/,Ame=/['\n\r\u2028\u2029\\]/g,_me=Object.prototype.hasOwnProperty,Rme=function(e,t,n){var r=Ime.imports._.templateSettings||Ime;n&&whe(e,t,n)&&(t=void 0),e=xme(e),t=Khe({},t,r,ume);var a,o,i=Khe({},t.imports,r.imports,ume),s=hme(i),u=ome(i,s),c=0,l=t.interpolate||Nme,d="__p += '",p=RegExp((t.escape||Nme).source+"|"+l.source+"|"+(l===mme?Tme:Nme).source+"|"+(t.evaluate||Nme).source+"|$","g"),f=_me.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(p,(function(t,n,r,i,s,u){return r||(r=i),d+=e.slice(c,u).replace(Ame,lme),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),d+="';\n";var h=_me.call(t,"variable")&&t.variable;h||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(Cme,""):d).replace(Sme,"$1").replace(Eme,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=rme((function(){return Function(s,f+"return "+d).apply(void 0,u)}));if(m.source=d,nme(m))throw m;return m},Ome=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fme=/^\w*$/,Mme=function(e,t){if(_he(e))return!1;var n=Ty(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!e$(e))||Fme.test(e)||!Ome.test(e)||null!=t&&e in Object(t)},Dme=nhe(Object,"create"),Bme=function(){this.__data__=Dme?Dme(null):{},this.size=0},Pme=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Lme=Object.prototype.hasOwnProperty,Ume=function(e){var t=this.__data__;if(Dme){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Lme.call(t,e)?t[e]:void 0},Vme=Object.prototype.hasOwnProperty,Wme=function(e){var t=this.__data__;return Dme?void 0!==t[e]:Vme.call(t,e)},zme=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Dme&&void 0===t?"__lodash_hash_undefined__":t,this};function jme(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}jme.prototype.clear=Bme,jme.prototype.delete=Pme,jme.prototype.get=Ume,jme.prototype.has=Wme,jme.prototype.set=zme;var Hme=jme,Gme=function(){this.__data__=[],this.size=0},qme=function(e,t){for(var n=e.length;n--;)if(ohe(e[n][0],t))return n;return-1},Kme=Array.prototype.splice,Xme=function(e){var t=this.__data__,n=qme(t,e);return!(n<0||(n==t.length-1?t.pop():Kme.call(t,n,1),--this.size,0))},Qme=function(e){var t=this.__data__,n=qme(t,e);return n<0?void 0:t[n][1]},Yme=function(e){return qme(this.__data__,e)>-1},$me=function(e,t){var n=this.__data__,r=qme(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Zme(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Zme.prototype.clear=Gme,Zme.prototype.delete=Xme,Zme.prototype.get=Qme,Zme.prototype.has=Yme,Zme.prototype.set=$me;var Jme=Zme,ege=nhe(WY,"Map"),tge=function(){this.size=0,this.__data__={hash:new Hme,map:new(ege||Jme),string:new Hme}},nge=function(e){var t=Ty(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},rge=function(e,t){var n=e.__data__;return nge(t)?n["string"==typeof t?"string":"hash"]:n.map},age=function(e){var t=rge(this,e).delete(e);return this.size-=t?1:0,t},oge=function(e){return rge(this,e).get(e)},ige=function(e){return rge(this,e).has(e)},sge=function(e,t){var n=rge(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function uge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}uge.prototype.clear=tge,uge.prototype.delete=age,uge.prototype.get=oge,uge.prototype.has=ige,uge.prototype.set=sge;var cge=uge;function lge(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,r);return n.cache=o.set(a,i)||o,i};return n.cache=new(lge.Cache||cge),n}lge.Cache=cge;var dge=lge,pge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fge=/\\(\\)?/g,hge=function(e){var t=dge((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(pge,(function(e,n,r,a){t.push(r?a.replace(fge,"$1"):n||e)})),t}),(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}(),mge=function(e,t){return _he(e)?e:Mme(e,t)?[e]:hge(xme(e))},gge=function(e){if("string"==typeof e||e$(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},vge=function(e,t){for(var n=0,r=(t=mge(t,e)).length;null!=e&&n<r;)e=e[gge(t[n++])];return n&&n==r?e:void 0},yge=function(e,t,n){var r=null==e?void 0:vge(e,t);return void 0===r?n:r},bge=_k.Errors;function xge(e){var t=e.livenessSettings,n=e.apiClient,r=e.apiCheck,a=e.onError,o=LQ(Tx.useState({face_tracking_setting:{enable:!1,web_terminate_threshold:.0030152991993743408,web_warning_threshold:.0017317430600108828,limit_for:"all_flow",max_warning_time:5},flow_interval_time_ms:3e3,limit_time_liveness_check:{enable:!1,limit_time_second:45},terminate_if_no_face:{enable:!1,max_invalid_frame:5,max_time_ms:1e3}}),2),i=o[0],s=o[1];return Tx.useEffect((function(){t?yge(t,"face_tracking_setting.web_terminate_threshold")?s(t):a(bge.client_web_setting_not_found):r&&n.clientSettings().then((function(e){if(e&&e.data){var t=yge(e,"data.settings.sdk_settings.active_liveness_settings.face_tracking_setting.enable"),n=yge(e,"data.settings.sdk_settings.active_liveness_settings.face_tracking_setting.web_terminate_threshold");if(t&&n){var r=yge(e,"data.settings.sdk_settings.active_liveness_settings");s(r)}t&&!n&&a(bge.client_web_setting_not_found)}e&&e.errors&&a(bge.server_error)})).catch((function(e){a(e)}))}),[t,n,a,r]),i}function kge(e){var t,n=e.canvas,r=e.resultsOutput,a=void 0===r?[]:r,o=n.captureStream(25);try{t=new MediaRecorder(o);var i=function(){var e=RQ(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){t.ondataavailable=function(t){return function(e,t,n,r){if(e.data.size>0){var a=new Blob([e.data],{type:"video/webm"});t.push({id:null,blob:a}),n()}else console.error("No video have recored!"),r()}(t,a,e,n)},"inactive"!==t.state&&t.stop()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.stopVideoRecording=i}catch(e){}return t||(t={start:function(){},stop:function(){},pause:function(){},resume:function(){},requestData:function(){},stopVideoRecording:function(){}}),{mediaRecorder:t}}var wge,Ige=function(e){var t=e.curStep,n=e.faceDirection,r=yge(t,"stepTimeConstraints.delayTime");return!!r&&(null===t.firstFrameSpottedAt?(t.name===n&&(t.firstFrameSpottedAt=(new Date).getTime()),!0):(new Date).getTime()-t.firstFrameSpottedAt<r)},Cge=Lw.faceTracker(),Sge=_k.Mode,Ege=_k.FaceDirection,Tge=_k.Errors,Nge=_k.Messages;function Age(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.apiCheck,r=t.mode,a=t.bgCameraMask,o=t.bgCameraMaskRed,i=t.surroundStyle,s=t.cropAreaDimension,u=t.customInstructions,c=t.customIcon,l=t.customDirectionIcon,d=t.customStepTimeConstraints,p=void 0===d?(FQ(e={},_k.FaceDirection.UP,{delayTime:1e3}),FQ(e,_k.FaceDirection.LEFT,{delayTime:1e3}),FQ(e,_k.FaceDirection.RIGHT,{delayTime:1e3}),FQ(e,_k.FaceDirection.FRONTAL,{delayTime:2e3}),e):d,f=t.onLivenessDetectionDone,h=t.onError,m=t.frontalMinSize,g=t.enableRecording,v=void 0!==g&&g,y=t.waitingTimeToGetBetterFrames,b=void 0===y?500:y,x=t.captureFrameData,k=void 0!==x&&x,w=t.livenessSettings,I=t.setRemainingTime,C=void 0===I?function(){}:I,S=t.onApiCheck,E=t.customErrors,T=t.framesIntervalTime,N=void 0===T?180:T,A=Tx.useState(!1),_=LQ(A,2),R=_[0],O=_[1],F=Tx.useState(),M=LQ(F,2),D=M[0],B=M[1],P=Tx.useState(!1),L=LQ(P,2),U=L[0],V=L[1],W=Tx.useState(!1),z=LQ(W,2),j=z[0],H=z[1],G=Tx.useRef(null),q=Mk.useSDKSettings(),K=q.lang,X=q.assetRoot,Q=q.apiClient,Y=r===Sge.ACTIVE,$=Tx.useReducer((function(e){return e+1}),0),Z=LQ($,2),J=(Z[0],Z[1]),ee=Tx.useRef(null),te=Tx.useRef(!1),ne=Tx.useRef(null);null===ne.current&&(ne.current=Lw.initFaceVerificationData({assetRoot:X,customInstructions:u,customIcon:c,customDirectionIcon:l,customStepTimeConstraints:p}));var re=Tx.useState(""),ae=LQ(re,2),oe=ae[0],ie=ae[1],se=Tx.useMemo((function(){return Wfe(ie,500)}),[ie]),ue=Tx.useRef([]),ce=Tx.useRef(),le=Tx.useRef([]),de=Tx.useRef(-1),pe=Tx.useRef(),fe=xge({livenessSettings:w,apiClient:Q,apiCheck:n,onError:h}),he=fe.face_tracking_setting,me=fe.flow_interval_time_ms,ge=fe.limit_time_liveness_check,ve=fe.terminate_if_no_face,ye=Tx.useRef(0),be=Tx.useRef(),xe=Tx.useCallback((function(){C(""),ne.current.curStepIndex=ne.current.steps.length,V(!1),setTimeout((function(){ne.current=Lw.initFaceVerificationData({assetRoot:X,customInstructions:u,customIcon:c,customDirectionIcon:l}),pe.current=Date.now(),ye.current=0,be.current=null,le.current=[],de.current=0,H(!1),J()}),me)}),[X,u,c,l,me,C]),ke=Tx.useRef(null),we=Tx.useMemo((function(){return BQ(BQ({},Tge),E)}),[E]);Tx.useEffect((function(){if(R&&ge.enable&&j){pe.current=Date.now();var e=ge.limit_time_second+1;ke.current=setInterval((function(){var t=Math.round((1e3*e-(Date.now()-pe.current))/1e3);if(ne.current.curStepIndex<ne.current.steps.length){if(t<=10&&t>=1){var n=Rme(Nge.REMAIN_TIME[K]);C(n({x:t}))}if(Math.round((Date.now()-pe.current)/1e3)===e){var r=Rme(we.liveness_terminated_time_out.msg[K]);ie({error:r({x:ge.limit_time_second}),duration:me}),xe()}}}),1e3)}return function(){clearInterval(ke.current)}}),[xe,C,R,K,me,ge.enable,ge.limit_time_second,j,we.liveness_terminated_time_out]);var Ie=Tx.useCallback((function(e){var t,n,r=e.clientWidth,o=e.clientHeight,u=e.videoAreaWidth,c=e.videoAreaHeight,l=e.lostX,d=e.lostY;qQ.isMobile?n=t=u:t=n=c-200;var p=Math.floor((u-t)/2)+l,f=5+d,h=a;ee.current={x:p,y:f,width:t,height:n,image:h,surroundStyle:i},"object"===AQ(s)?ee.current=BQ(BQ({},ee.current),s):"function"==typeof s&&(ee.current=BQ(BQ({},ee.current),s({clientWidth:r,clientHeight:o,videoAreaWidth:u,videoAreaHeight:c,lostX:l,lostY:d,isMobile:qQ.isMobile,width:t,height:n}))),J(),O(!0)}),[a,i,s]),Ce=Tx.useState(3),Se=LQ(Ce,2),Ee=Se[0],Te=Se[1],Ne=Tx.useState(!1),Ae=LQ(Ne,2),_e=Ae[0],Re=Ae[1],Oe=Tx.useRef(!1),Fe=Tx.useCallback((function(e){Re(e),Oe.current=e}),[]),Me=Tx.useRef(null),De=Tx.useRef([]),Be=Tx.useCallback((function(){Te(3),clearInterval(Me.current),Fe(!0),Me.current=setInterval((function(){Te((function(e){if(e-1==0){clearInterval(Me.current);var t=De.current,r=ue.current.map((function(e){return e.blob}));if(n){var a=t.map((function(e){return Q.uploadImage({file:e.blob,label:"portrait",metadata:JSON.stringify({gesture_score:e.leftRightScore,gesture:Ege.FRONTAL})})})).concat(r.map((function(e){return Q.uploadFile({file:e,label:"video"})})));Promise.all(a).then((function(e){var n=e.filter((function(e,n){return n<t.length})),r=e.filter((function(e,n){return n>=t.length}));return Q.verifyFaceLiveness({images:n.map((function(e){return{id:e.data.image_id}})),videos:r.map((function(e){return{id:e.data.file_id}}))})})).then((function(e){f({apiCheckPassed:e.data.is_live,verifyFaceLivenessResult:e.data})})).catch((function(e){h({error:e})}))}else f({frontalFaces:t,videoRecord:r})}return e-1}))}),1e3)}),[Fe,n,f,Q,h]);Tx.useEffect((function(){oe&&(clearInterval(Me.current),Fe(!1))}),[oe,Fe]),Tx.useEffect((function(){var e=!1;(function(){var t=RQ(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Z$.set("WASM_HAS_SIMD_SUPPORT",!1),Z$.set("WASM_HAS_MULTITHREAD_SUPPORT",!1),t.prev=2,t.next=5,J0("wasm");case 5:t.next=25;break;case 7:return t.prev=7,t.t0=t.catch(2),t.prev=9,t.next=12,J0("webgl");case 12:t.next=25;break;case 14:return t.prev=14,t.t1=t.catch(9),t.prev=16,t.next=19,J0("cpu");case 19:t.next=25;break;case 21:t.prev=21,t.t2=t.catch(16),console.error(t.t2),e=!0;case 25:case"end":return t.stop()}}),t,null,[[2,7],[9,14],[16,21]])})));return function(){return t.apply(this,arguments)}})()().then(RQ(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}ie(we.unable_to_load_model.msg[K]),h(we.unable_to_load_model),t.next=9;break;case 5:return t.next=7,o8();case 7:n=t.sent,B(n);case 9:case"end":return t.stop()}}),t)}))))}),[K,h,we.unable_to_load_model]),Tx.useEffect((function(){var e,t=G.current,r=function(){var e=RQ(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ne.current.steps,n=[],t.forEach((function(e){var t=e.name,r=e.image,a=e.frontalFaceImage;t!==Ege.FRONTAL?n.push(Q.uploadImage({file:r.blob,label:"portrait",metadata:JSON.stringify({gesture_score:r.leftRightScore,gesture:t})})):n.push(Promise.resolve({data:{image_id:null}})),a.blob?n.push(Q.uploadImage({file:a.blob,label:"portrait",metadata:JSON.stringify({gesture_score:a.leftRightScore,gesture:Ege.FRONTAL})})):n.push(Promise.resolve({data:{image_id:null}}))})),e.next=5,Promise.all(n);case 5:r=e.sent,t.forEach((function(e,t){e.image.imageId=r[2*t].data.image_id,e.frontalFaceImage.imageId=r[2*t+1].data.image_id}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=RQ(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:t=ne.current.steps,0===(n=t.filter((function(e){return e.frontalFaceImage.imageId}))).length?f({error:"wrong_face_movement"}):Q.verifyFaceLiveness({images:n.map((function(e){return{id:e.frontalFaceImage.imageId}})),gesture_images:t.filter((function(e){return e.image.imageId&&e.name!==Ege.FRONTAL})).map((function(e){return{gesture:e.name,images:[{id:e.image.imageId}]}})),videos:[{frames:le.current}],metadata:k?{sdk_logs:{tracking_frames:le.current.map((function(e){return{index:e.index,landmarks:e.landmarks,original_landmarks:e.original_landmarks,score:e.score,time:e.time,bbox:e.bbox,original_bbox:e.original_bbox}}))}}:void 0}).then((function(e){var t=!0===e.data.is_live;f({apiCheckPassed:t,verifyFaceLivenessResult:e.data})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h({error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=RQ(regeneratorRuntime.mark((function e(){var t,r,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ne.current.steps,ne.current.curStepIndex++,he.enable&&"each_gesture"===he.limit_for&&(ye.current=0),ne.current.curStepIndex!==t.length){e.next=28;break}if(!v){e.next=7;break}return e.next=7,ce.current.stopVideoRecording();case 7:if(ge.enable&&C(""),!f){e.next=28;break}if(n){e.next=25;break}if(o=t.filter((function(e){return e.name!==Ege.FRONTAL})).map((function(e){return{name:e.name,image:{blob:e.image.blob}}})),s=t.filter((function(e){return e.name!==Ege.FRONTAL})).map((function(e){return e.frontalFaceImage.blob})).filter((function(e){return null!==e})),!(u=null===(r=t.find((function(e){return e.name===Ege.FRONTAL})))||void 0===r||null===(a=r.image)||void 0===a?void 0:a.blob)||!m){e.next=19;break}return e.next=16,YI.scaleImage(u,{minSize:m});case 16:e.t0=e.sent,e.next=20;break;case 19:e.t0=null;case 20:c=e.t0,u&&s.push(u),f({steps:o,frontalFaces:s,videoRecord:[],frontalScaledImage:c,capturedFrames:le.current}),e.next=28;break;case 25:return S(),e.next=28,i();case 28:J();case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=c$((function(){var e=ne.current,t=e.curStepIndex,n=e.steps,r=n[t],a=null!==(null==r?void 0:r.image.blob),o=null!==(null==r?void 0:r.frontalFaceImage.blob),i=n.filter((function(e){return e.frontalFaceImage.blob})).length,u=!1;return a&&(o||![1].includes(t)||i>=1)?(te.current=!1,s(),u=!0):te.current=!(!a||o),V(!1),u}),b);function c(e,t,n,r){return l.apply(this,arguments)}function l(){return(l=RQ(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,c,l,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=ne.current,i=o.curStepIndex,c=o.steps,!(i<c.length)){e.next=24;break}if(l=c[i],!Ige({faceDirection:t,curStep:l})){e.next=5;break}return e.abrupt("return");case 5:if(t!==Ege.FRONTAL||null!==l.frontalFaceImage.blurScore&&!kw.hasBetterBlurScore(r,l.frontalFaceImage.blurScore)){e.next=13;break}return l.frontalFaceImage.blurScore=r,e.next=9,Iw.takePicture({canvas:n});case 9:d=e.sent,l.frontalFaceImage.blob=d,l.frontalFaceImage.leftRightScore=a,te.current&&(te.current=!1,s());case 13:if(l.name!==t||null!==l.image.blurScore&&!kw.hasBetterBlurScore(r,l.image.blurScore)){e.next=24;break}return V(!0),l.image.blurScore=r,e.next=18,Iw.takePicture({canvas:n});case 18:p=e.sent,l.image.blob=p,l.image.leftRightScore=a,l.image.objUrl&&URL.revokeObjectURL(l.image.objUrl),l.image.objUrl=URL.createObjectURL(p),u();case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t,n){return p.apply(this,arguments)}function p(){return(p=RQ(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!0===Oe.current&&t===Ege.FRONTAL&&De.current.length<3&&(Iw.takePicture({canvas:n}).then((function(e){De.current.push({blob:e,leftRightScore:r})})),2===De.current.length&&v&&ce.current.stopVideoRecording());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,n,r){if(le.current.length&&Date.now()-le.current[le.current.length-1].time<N)return null;if(de.current++,k&&!r){var a=e.topLeft,o=e.bottomRight,i=[].concat(UQ(a),UQ(o)),s=[];[a,o].forEach((function(e){s=[].concat(UQ(s),[e[0]/zw.SIZE*t.width,e[1]/zw.SIZE*t.height])}));var u=Cge(e,0===le.current.length),c=u.score,l=u.time,d=t.toDataURL("image/jpeg",.8);return le.current.push({label:"portrait",base64:d.split(",")[1],landmarks:n,original_landmarks:n.map((function(e){return[e[0]/zw.SIZE*t.width,e[1]/zw.SIZE*t.height]})),score:c,time:l,index:le.current.length,bbox:i,original_bbox:s}),c}return null}function y(e){if(!he.enable||null===e||!j)return!0;var t=he.web_warning_threshold,n=he.web_terminate_threshold,r=he.max_warning_time;return e<t||(e<n&&ye.current<r?(ye.current++,ye.current===r?ie({error:we.liveness_terminated_face_tracking.msg[K],duration:me}):ie({error:we.liveness_too_fast.msg[K],duration:1500}),!0):(ie({error:we.liveness_terminated.msg[K],duration:me}),xe(),!1))}function x(e){if(ve.enable&&j){var t=ve.max_time_ms;be.current&&e||(be.current={time:Date.now(),frame:0}),e&&be.current.frame++;var n=be.current.time;e&&Date.now()-n>=t&&(ie({error:we.liveness_terminated_no_face.msg[K],duration:me}),xe())}}function w(e,t){return I.apply(this,arguments)}function I(){return(I=RQ(regeneratorRuntime.mark((function n(r,i){var s,u,l,p,f,h,m,v,b,k,I,C,S,E,T,N,A,_,R,O,F;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=r.cropX,u=r.cropY,l=r.cropWidth,p=r.cropHeight,i.getContext("2d").drawImage(t,s,u,l,p,0,0,l,p),n.next=5,kw.calculateBlurScore(i);case 5:return f=n.sent,n.next=8,zw.getModelPredictions({model:D,sCanvas:i});case 8:return h=n.sent,n.next=11,Lw.validatePredictions({predictions:h,width:zw.SIZE,height:zw.SIZE});case 11:if(m=n.sent,v=m.error,b=m.fullFace,k="",ee.current.image=a,I=null,C=null,S=null,E=ne.current,T=E.curStepIndex,N=E.steps,!b){n.next=27;break}return A=N[T],S=b.landmarks,n.next=25,Lw.calculateFaceDirection({landmarks:S,getPerfectFrontal:A&&A.name===Ege.FRONTAL});case 25:(_=n.sent)&&(I=_.gesture,C=_.leftRightScore);case 27:if(R="no_face"===(null==v?void 0:v.code)||"partial_face"===(null==v?void 0:v.code),O=T<N.length,x(R&&O),v&&("face_too_small"!==v.code||![Ege.DOWN,Ege.UP,Ege.LEFT,Ege.RIGHT].includes(I))){n.next=43;break}if(!Y){n.next=39;break}if(j||H(!0),!y(g(h[0],i,S,T>=N.length))){n.next=37;break}return n.next=37,c(I,i,f,C);case 37:n.next=41;break;case 39:return n.next=41,d(I,i,C);case 41:n.next=44;break;case 43:T<N.length&&(k=null===(F=we[v.code])||void 0===F?void 0:F.msg[K],ee.current.image=o);case 44:se(k),-1!==e&&(e=requestAnimationFrame((function(){return w(r,i)})));case 46:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function E(){return(E=RQ(regeneratorRuntime.mark((function e(){var n,r,a,o,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D&&(n=Iw.analyzeVideoAndWindowSizes(t,ee.current),r=n.cropWidth,a=n.cropHeight,(o=document.createElement("canvas")).width=r,o.height=a,(i=o.getContext("2d")).translate(r,0),i.scale(-1,1),s=v?kge({canvas:o,resultsOutput:ue.current}):{},u=s.mediaRecorder,ce.current=u,ce.current&&ce.current.start(),w(n,o));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return R&&setTimeout((function(){!function(){E.apply(this,arguments)}()}),2e3),function(){cancelAnimationFrame(e),e=-1}}),[R,K,Y,Q,n,a,o,f,h,v,m,b,k,S,he,ge.enable,C,se,me,xe,ve,D,j,we,N]);var Pe=ne.current,Le=Pe.curStepIndex,Ue=Pe.steps,Ve=Tx.useMemo((function(){return Ue.find((function(e){return e.name===_k.FaceDirection.FRONTAL}))}),[Ue]),We=te.current?Ve:Ue[Le],ze=We&&j?We.instructions[K]:null,je=We&&j?We.directionIcon:"",He=We?We.directionIconAnimation:"";return{countdownToTakePicture:Ee,cropArea:ee,curStepIndex:Le,directionIcon:je,directionIconAnimation:He,faceDetectionError:oe,handleTriggerPassiveMode:Be,handleVideoPlayed:Ie,instructions:ze,isActiveMode:Y,refVideo:G,showCountdown:_e,steps:Ue,videoPlayed:R,activeCapturing:U,isFirstValidFrameFound:j}}function _ge(){var e=PQ(["\n  animation-delay: 1s;\n"]);return _ge=function(){return e},e}function Rge(){var e=PQ(["\n  animation-delay: 0.5s;\n"]);return Rge=function(){return e},e}function Oge(){var e=PQ(["\n  animation-delay: 0s;\n"]);return Oge=function(){return e},e}function Fge(){var e=PQ(["\n  display: flex;\n  margin: 4px 0;\n  width: 100%;\n  height: 15px;\n  animation: "," 1s infinite;\n  animation-direction: alternate;\n\n  &::before,\n  &::after {\n    content: '';\n    height: 100%;\n    width: 50%;\n    background: rgba(255, 255, 255, 0.8);\n  }\n\n  &::before {\n    transform: skewY(32deg);\n  }\n\n  &::after {\n    width: 50%;\n    transform: skewY(-32deg);\n  }\n"]);return Fge=function(){return e},e}function Mge(){var e=PQ(["\n  width: 70px;\n  transform: rotate(","deg);\n"]);return Mge=function(){return e},e}function Dge(){var e=PQ(["\n  width: 200px;\n  height: 200px;\n  position: relative;\n  transform: scale(0.48);\n\n  .top,\n  .right,\n  .bottom,\n  .left {\n    position: absolute;\n  }\n\n  .top {\n    top: 0;\n    left: 50%;\n    transform: rotate(","deg) translateX(-50%);\n  }\n\n  .right {\n    right: 0;\n    top: 50%;\n    transform: rotate(","deg) translateX(-50%);\n  }\n\n  .bottom {\n    bottom: 0;\n    left: 50%;\n    transform: rotate(","deg) translateX(50%);\n  }\n\n  .left {\n    left: 0;\n    top: 50%;\n    transform: rotate(","deg) translateX(50%);\n  }\n"]);return Dge=function(){return e},e}!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Nne)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)Ene=e;else{Tne=e;var n=Cne.filter((function(e){return null==Tne[e]}));if(n.length>0)throw new Error("There were no entries found for the following binaries: ".concat(n.join(","),". Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found."))}Ane=t}
/** @license See the LICENSE file. */("//cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@".concat("3.8.0","/dist/"));var Bge=(FQ(wge={},_k.FaceDirection.LEFT,90),FQ(wge,_k.FaceDirection.RIGHT,270),FQ(wge,_k.FaceDirection.UP,180),FQ(wge,_k.FaceDirection.DOWN,0),wge),Pge=NQ(["0%{opacity:0.15;}50%{opacity:0.3;}100%{opacity:1;}"]),Lge=SQ.div(Dge(),Bge[_k.FaceDirection.DOWN],Bge[_k.FaceDirection.LEFT],Bge[_k.FaceDirection.UP],Bge[_k.FaceDirection.RIGHT]),Uge=SQ.div(Mge(),(function(e){var t,n=e.direction;return null!==(t=Bge[n])&&void 0!==t?t:0})),Vge=SQ.span(Fge(),Pge),Wge=SQ(Vge)(Oge()),zge=SQ(Vge)(Rge()),jge=SQ(Vge)(_ge());function Hge(e){var t=e.type;return t!==_k.FaceDirection.FRONTAL?Tx.createElement(Uge,{direction:t},Tx.createElement(Wge,null),Tx.createElement(zge,null),Tx.createElement(jge,null)):Tx.createElement(Lge,null,Tx.createElement(Uge,{className:"top"},Tx.createElement(Wge,null),Tx.createElement(zge,null),Tx.createElement(jge,null)),Tx.createElement(Uge,{className:"right"},Tx.createElement(Wge,null),Tx.createElement(zge,null),Tx.createElement(jge,null)),Tx.createElement(Uge,{className:"bottom"},Tx.createElement(Wge,null),Tx.createElement(zge,null),Tx.createElement(jge,null)),Tx.createElement(Uge,{className:"left"},Tx.createElement(Wge,null),Tx.createElement(zge,null),Tx.createElement(jge,null)))}Hge.propTypes={type:Tk.oneOf([_k.FaceDirection.LEFT,_k.FaceDirection.RIGHT,_k.FaceDirection.UP,_k.FaceDirection.FRONTAL])},Hge.defaultProps={type:_k.FaceDirection.LEFT};var Gge=_k.ErrorDuration;function qge(e){var t=e.children,n=e.className,r=Tx.useRef(0),a=Tx.useRef(""),o=Tx.useRef(Gge.SHORT),i="",s=0;if("string"==typeof t)i=t;else{var u=t.error;s=t.duration,i=u}return Date.now()-r.current>=o.current?(r.current=Date.now(),a.current=i,o.current=s,i?Tx.createElement("div",{className:n},i):null):a.current?Tx.createElement("div",{className:n},a.current):null}function Kge(){var e=PQ(["\n  transition: stroke-dashoffset 0.4s;\n  transform: rotate(-90deg);\n  transform-origin: 50% 50%;\n"]);return Kge=function(){return e},e}qge.propTypes={children:Tk.node.isRequired,className:Tk.string},qge.defaultProps={className:""};var Xge,Qge,Yge=SQ.circle(Kge());function $ge(e){var t=e.className,n=e.style,r=e.radius,a=e.strokeWidth,o=e.progress,i=e.hasError,s=e.activeColor,u=e.innerPadding,c=e.outsideRingColor,l=e.outsideRingOpacity,d=e.insideRingColor,p=e.insideRingWidth,f=e.insideRingStrokeDash,h=e.errorRingWidth,m=e.errorRingColor,g=e.dashedRingColor,v=e.dashedRingOpacity,y=e.dashedRingWidth,b=e.dashedRingLineThick,x=e.dashedRingLineSpacing,k=e.dashedInsideRingColor,w=e.dashedInsideRingWidth,I=e.showOutsideRing,C=e.showInsideRing,S=e.showDashedRing,E=2*r,T=2*r,N=r-2*a,A=2*Math.PI*N,_=A-o/100*A,R=N-y/2-a/2-u,O=2*Math.PI*R,F=O-o/100*O,M=R-w/2-y/2,D=2*Math.PI*M,B=D-o/100*D,P=M-p/2-w/2,L=M-h/2-w/2;return Tx.createElement("svg",{className:t,style:n,width:E,height:T,viewBox:"0 0 ".concat(E," ").concat(T),fill:"none",xmlns:"http://www.w3.org/2000/svg"},I?Tx.createElement(Tx.Fragment,null,Tx.createElement("circle",{opacity:l,cx:r,cy:r,r:N,stroke:c}),Tx.createElement(Yge,{cx:r,cy:r,r:N,stroke:s,strokeWidth:a,strokeLinecap:"round",strokeDasharray:"".concat(A," ").concat(A),style:{strokeDashoffset:_}})):null,S?Tx.createElement(Tx.Fragment,null,Tx.createElement("circle",{opacity:v,cx:r,cy:r,r:R,stroke:g,strokeWidth:y,strokeDasharray:"".concat(b," ").concat(x)}),Tx.createElement("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse"},Tx.createElement("circle",{cx:r,cy:r,r:R,stroke:s,strokeWidth:y,strokeDasharray:"".concat(b," ").concat(x)})),Tx.createElement("g",{mask:"url(#mask0)"},Tx.createElement(Yge,{cx:r,cy:r,r:R,stroke:s,strokeWidth:y,strokeDasharray:"".concat(O," ").concat(O),style:{strokeDashoffset:F}})),Tx.createElement("circle",{opacity:v,cx:r,cy:r,r:M,stroke:k,strokeWidth:w}),Tx.createElement(Yge,{cx:r,cy:r,r:M,stroke:s,strokeWidth:w,strokeLinecap:"round",strokeDasharray:"".concat(D," ").concat(D),style:{strokeDashoffset:B}})):null,C?Tx.createElement("circle",{strokeDasharray:f,cx:r,cy:r,r:P,stroke:d,strokeWidth:p}):null,i?Tx.createElement("circle",{strokeDasharray:f,cx:r,cy:r,r:L,stroke:m,strokeWidth:h}):null)}function Zge(e){var t=e.className;return Tx.createElement("svg",{className:t,width:"320",height:"320",viewBox:"0 0 320 320",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Tx.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M320 0H0V320H320V0ZM160 296C235.111 296 296 235.111 296 160C296 84.8893 235.111 24 160 24C84.8893 24 24 84.8893 24 160C24 235.111 84.8893 296 160 296Z",fill:"currentColor"}))}function Jge(){var e=PQ(["\n  position: absolute;\n  width: 100%;\n  top: 0;\n  bottom: 0;\n  z-index: -1;\n  background: rgba(255, 255, 255, 0.3);\n  animation: "," 1s infinite;\n  border-radius: 50%;\n"]);return Jge=function(){return e},e}function eve(){var e=PQ(["\n  position: absolute;\n  z-index: -1;\n  background: rgba(223, 0, 0, 0.2);\n  border-radius: 50%;\n  width: 86%;\n  height: 86%;\n  top: 7%;\n  left: 7%;\n"]);return eve=function(){return e},e}function tve(){var e=PQ(["\n  width: 100%;\n  height: 100%;\n  vertical-align: middle;\n  margin: 0;\n  color: ",";\n"]);return tve=function(){return e},e}function nve(){var e=PQ(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n"]);return nve=function(){return e},e}function rve(){var e=PQ(["\n  position: absolute;\n  width: 100%;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return rve=function(){return e},e}function ave(){var e=PQ(["\n  position: absolute;\n  width: 100%;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #ffffff;\n  font-size: 140px;\n  opacity: 0.6;\n"]);return ave=function(){return e},e}function ove(){var e=PQ(["\n  cursor: pointer;\n  text-align: center;\n  width: 50px;\n\n  img {\n    width: 100%;\n  }\n"]);return ove=function(){return e},e}function ive(){var e=PQ(["\n  color: #ffffff;\n  height: 70px;\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: ",";\n"]);return ive=function(){return e},e}function sve(){var e=PQ(["\n  width: ",";\n  height: ",";\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 2px solid #ffffff;\n  font-size: 16px;\n  color: #fff;\n  font-weight: 700;\n\n  & + & {\n    margin-left: 10px;\n  }\n\n  ","\n  img {\n    width: 100%;\n    margin: 0;\n    border-radius: 50%;\n  }\n"]);return sve=function(){return e},e}function uve(){var e=PQ(["\n  height: ",";\n  position: absolute;\n  ","\n  ","\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: ",";\n"]);return uve=function(){return e},e}function cve(){var e=PQ(["\n  position: absolute;\n  ","\n  ","\n  font-size: ",";\n  text-shadow: 2px 2px 4px #000000;\n"]);return cve=function(){return e},e}function lve(){var e=PQ(["\n  ","\n  font-size: 18px;\n  background: #ea3223;\n  color: #fff;\n  padding: 5px 10px;\n  border-radius: 3px;\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, 0);\n  white-space: nowrap;\n"]);return lve=function(){return e},e}function dve(){var e=PQ(["\n  ","\n  ","\n  ","\n  ","\n  font-size: 18px;\n  background: #ea3223;\n  color: #fff;\n  padding: 5px 10px;\n  border-radius: 3px;\n  position: absolute;\n  white-space: pre-wrap;\n  text-align: center;\n  max-width: 80%;\n"]);return dve=function(){return e},e}function pve(){var e=PQ(["\n  ","\n"]);return pve=function(){return e},e}$ge.propTypes={className:Tk.string,style:Tk.shape({}),radius:Tk.number,strokeWidth:Tk.number,progress:Tk.number,hasError:Tk.bool,activeColor:Tk.string,innerPadding:Tk.number,outsideRingColor:Tk.string,outsideRingOpacity:Tk.number,insideRingColor:Tk.string,insideRingWidth:Tk.number,insideRingStrokeDash:Tk.string,errorRingColor:Tk.string,errorRingWidth:Tk.number,dashedRingColor:Tk.string,dashedRingOpacity:Tk.number,dashedRingWidth:Tk.number,dashedRingLineThick:Tk.number,dashedRingLineSpacing:Tk.number,dashedInsideRingColor:Tk.string,dashedInsideRingWidth:Tk.number,showOutsideRing:Tk.bool,showDashedRing:Tk.bool,showInsideRing:Tk.bool},$ge.defaultProps={className:"",style:null,radius:160,strokeWidth:3,progress:0,hasError:!1,activeColor:"#0092ff",innerPadding:5,outsideRingColor:"#f2f6f9",outsideRingOpacity:.1,insideRingColor:"#f2f6f9",insideRingWidth:3,insideRingStrokeDash:"0",errorRingColor:"#df0000",errorRingWidth:3,dashedRingColor:"#ffffff",dashedRingOpacity:.3,dashedRingWidth:10,dashedRingLineThick:1,dashedRingLineSpacing:6,dashedInsideRingColor:"#ffffff",dashedInsideRingWidth:0,showOutsideRing:!0,showDashedRing:!0,showInsideRing:!0},Zge.propTypes={className:Tk.string},Zge.defaultProps={className:""};var fve=dQ(["z-index:",";color:#ffffff;"],1020),hve=SQ.div(pve(),fve),mve=SQ(qge)(dve(),fve,(function(e){var t=e.top;return t&&dQ(["top:","px;"],t)}),(function(e){var t=e.bottom;return t&&dQ(["bottom:","px;"],t)}),(function(e){return e.centerY&&dQ(["top:50%;transform:translateY(-50%);"])})),gve=SQ(hve)(lve(),(function(e){var t=e.top;return t&&dQ(["top:","px;"],t)})),vve=SQ(hve)(cve(),(function(e){var t=e.top;return t&&dQ(["top:","px;"],t)}),(function(e){var t=e.bottom;return t&&dQ(["bottom:","px;"],t)}),(function(){return qQ.isMobile?"20px":"22px"})),yve=SQ.div(uve(),(function(){return qQ.isMobile?"50px":"70px"}),(function(e){var t=e.top;return t&&dQ(["top:","px;"],t)}),(function(e){var t=e.bottom;return t&&dQ(["bottom:","px;"],t)}),1020),bve=SQ.div(sve(),(function(){return qQ.isMobile?"40px":"50px"}),(function(){return qQ.isMobile?"40px":"50px"}),(function(e){return!e.active&&dQ(["opacity:0.6;"])})),xve=SQ.div(ive(),1020),kve=SQ.div(ove()),wve=SQ.div(ave()),Ive=SQ.div(rve()),Cve=SQ($ge)(nve()),Sve=SQ(Zge)(tve(),(function(e){var t=e.color;return null!=t?t:"rgba(0, 0, 0, 0.6)"})),Eve=SQ.div(eve()),Tve=NQ(["from{opacity:1;}to{opacity:0;}"]),Nve=SQ.div(Jge(),Tve),Ave=qQ.isMobile?{width:640}:null,_ve={background:"#000000",opacity:.6};function Rve(e){var t=e.apiCheck,n=e.mode,r=e.onLivenessDetectionDone,a=e.onClose,o=e.onError,i=e.captureFrameData,s=e.frontCamera,u=e.customDirectionIcon,c=e.customStepTimeConstraints,l=e.onApiCheck,d=e.customErrors,p=e.framesIntervalTime,f=e.livenessSettings,h=Pk.useAsset("bg_camera_mask.png"),m=Pk.useAsset("bg_camera_mask_red.png"),g=LQ(Tx.useState({}),2),v=g[0],y=g[1],b=v.yFaceDetectionError,x=v.yFaceVerificationStepsWrapper,k=LQ(Tx.useState(""),2),w=k[0],I=k[1],C=Tx.useCallback((function(e){var t=e.lostY,n=e.height,r=t+25,a=r+30;return y({yFaceDetectionError:r,yFaceVerificationStepsWrapper:a+n+20}),{y:Math.floor(a)}}),[]),S=Age({apiCheck:t,mode:n,bgCameraMask:h,bgCameraMaskRed:m,surroundStyle:_ve,onLivenessDetectionDone:r,onError:o,cropAreaDimension:C,customDirectionIcon:u,captureFrameData:i,livenessSettings:f,setRemainingTime:I,customStepTimeConstraints:c,onApiCheck:l,customErrors:d,framesIntervalTime:p}),E=S.countdownToTakePicture,T=S.cropArea,N=S.curStepIndex,A=S.directionIcon,_=S.faceDetectionError,R=S.handleTriggerPassiveMode,O=S.handleVideoPlayed,F=S.instructions,M=S.isActiveMode,D=S.refVideo,B=S.showCountdown,P=S.steps,L=S.videoPlayed,U=S.activeCapturing,V=S.isFirstValidFrameFound;return Tx.createElement(SY,{frontCamera:s,onVideoPlayed:O,onClose:a,flipHorizontal:s,ref:D,videoSettings:Ave,onError:o},L?Tx.createElement(Tx.Fragment,null,Tx.createElement(mve,{top:b-15,className:"face-detection-error"},_),T.current?Tx.createElement(DY,{x:"".concat(T.current.x,"px"),y:"".concat(T.current.y,"px"),width:"".concat(T.current.width,"px"),height:"".concat(T.current.height,"px"),surroundStyle:T.current.surroundStyle},Tx.createElement(Sve,null),Tx.createElement(Cve,{progress:N/P.length*100,hasError:!!_,showDashedRing:!1,showOutsideRing:!1,insideRingWidth:1,errorRingWidth:1,insideRingStrokeDash:"2"}),B?Tx.createElement(wve,null,E):null,M?Tx.createElement(Tx.Fragment,null,Tx.createElement(Ive,null,A),U&&Tx.createElement(Nve,null)):null,_&&Tx.createElement(Eve,null)):null,M?Tx.createElement(Tx.Fragment,null,w&&Tx.createElement(gve,{top:x-30},w),F?Tx.createElement(vve,{top:x+5,className:"instructions"},F):null,V&&Tx.createElement(yve,{top:x+35},P.map((function(e,t){var n=e.name,r=e.image.objUrl;return Tx.createElement(bve,{key:n,active:N>=t,className:"step-item"},r?Tx.createElement("img",{src:r,alt:""}):Tx.createElement("span",null,t+1))})))):Tx.createElement(Tx.Fragment,null,_?null:Tx.createElement(xve,null,Tx.createElement(kve,{onClick:R},Tx.createElement(PY,null))))):null)}Rve.propTypes={apiCheck:Tk.bool,mode:Tk.string,onLivenessDetectionDone:Tk.func,onClose:Tk.func,onError:Tk.func,captureFrameData:Tk.bool,frontCamera:Tk.bool,customDirectionIcon:Tk.shape({}),customStepTimeConstraints:Tk.shape({}),onApiCheck:Tk.func,customErrors:Tk.shape({}),framesIntervalTime:Tk.number,livenessSettings:Tk.shape({})},Rve.defaultProps={apiCheck:!1,mode:null,onLivenessDetectionDone:null,onClose:null,onError:function(){},captureFrameData:!1,frontCamera:!0,customDirectionIcon:(Xge={},FQ(Xge,_k.FaceDirection.LEFT,Tx.createElement(Hge,{type:_k.FaceDirection.LEFT})),FQ(Xge,_k.FaceDirection.RIGHT,Tx.createElement(Hge,{type:_k.FaceDirection.RIGHT})),FQ(Xge,_k.FaceDirection.UP,Tx.createElement(Hge,{type:_k.FaceDirection.UP})),FQ(Xge,_k.FaceDirection.FRONTAL,Tx.createElement(Hge,{type:_k.FaceDirection.FRONTAL})),Xge),customStepTimeConstraints:(Qge={},FQ(Qge,_k.FaceDirection.UP,{delayTime:1e3}),FQ(Qge,_k.FaceDirection.LEFT,{delayTime:1e3}),FQ(Qge,_k.FaceDirection.RIGHT,{delayTime:1e3}),FQ(Qge,_k.FaceDirection.FRONTAL,{delayTime:2e3}),Qge),onApiCheck:function(){},customErrors:null,framesIntervalTime:180,livenessSettings:null};var Ove=Object.freeze({__proto__:null,Text:hve,FaceDetectionError:mve,CountdownTime:gve,FaceVerificationInstructions:vve,FaceVerificationStepsWrapper:yve,StepItem:bve,BottomButtonsOverlay:xve,Button:kve,CountDownOverlay:wve,InstructionsOverlay:Ive,default:Rve,useLivenessDetection:Age});function Fve(){return(Fve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Mve(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Dve(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Bve(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}
/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/var Pve=Object.getOwnPropertySymbols,Lve=Object.prototype.hasOwnProperty,Uve=Object.prototype.propertyIsEnumerable;function Vve(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var Wve=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,a=Vve(e),o=1;o<arguments.length;o++){for(var i in n=Object(arguments[o]))Lve.call(n,i)&&(a[i]=n[i]);if(Pve){r=Pve(n);for(var s=0;s<r.length;s++)Uve.call(n,r[s])&&(a[r[s]]=n[r[s]])}}return a},zve=HQ((function(e,t){var n,r,a,o,i;if("undefined"==typeof window||"function"!=typeof MessageChannel){var s=null,u=null,c=function e(){if(null!==s)try{var n=t.unstable_now();s(!0,n),s=null}catch(n){throw setTimeout(e,0),n}},l=Date.now();t.unstable_now=function(){return Date.now()-l},n=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){null!==s?setTimeout(n,0,e):(s=e,setTimeout(c,0))})),r=function(e,t){u=setTimeout(e,t)},a=function(){clearTimeout(u)},o=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,p=window.Date,f=window.setTimeout,h=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==Ty(d)&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var g=p.now();t.unstable_now=function(){return p.now()-g}}var v=!1,y=null,b=-1,x=5,k=0;o=function(){return t.unstable_now()>=k},i=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):x=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,I=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+x;try{y(!0,e)?I.postMessage(null):(v=!1,y=null)}catch(e){throw I.postMessage(null),e}}else v=!1},n=function(e){y=e,v||(v=!0,I.postMessage(null))},r=function(e,n){b=f((function(){e(t.unstable_now())}),n)},a=function(){h(b),b=-1}}function C(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<T(a,t)))break e;e[r]=t,e[n]=a,n=r}}function S(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var o=2*(r+1)-1,i=e[o],s=o+1,u=e[s];if(void 0!==i&&0>T(i,n))void 0!==u&&0>T(u,i)?(e[r]=u,e[s]=n,r=s):(e[r]=i,e[o]=n,r=o);else{if(!(void 0!==u&&0>T(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var N=[],A=[],_=1,R=null,O=3,F=!1,M=!1,D=!1;function B(e){for(var t=S(A);null!==t;){if(null===t.callback)E(A);else{if(!(t.startTime<=e))break;E(A),t.sortIndex=t.expirationTime,C(N,t)}t=S(A)}}function P(e){if(D=!1,B(e),!M)if(null!==S(N))M=!0,n(L);else{var t=S(A);null!==t&&r(P,t.startTime-e)}}function L(e,n){M=!1,D&&(D=!1,a()),F=!0;var i=O;try{for(B(n),R=S(N);null!==R&&(!(R.expirationTime>n)||e&&!o());){var s=R.callback;if(null!==s){R.callback=null,O=R.priorityLevel;var u=s(R.expirationTime<=n);n=t.unstable_now(),"function"==typeof u?R.callback=u:R===S(N)&&E(N),B(n)}else E(N);R=S(N)}if(null!==R)var c=!0;else{var l=S(A);null!==l&&r(P,l.startTime-n),c=!1}return c}finally{R=null,O=i,F=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){M||F||(M=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return S(N)},t.unstable_next=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},t.unstable_scheduleCallback=function(e,o,i){var s=t.unstable_now();if("object"==Ty(i)&&null!==i){var u=i.delay;u="number"==typeof u&&0<u?s+u:s,i="number"==typeof i.timeout?i.timeout:U(e)}else i=U(e),u=s;return e={id:_++,callback:o,priorityLevel:e,startTime:u,expirationTime:i=u+i,sortIndex:-1},u>s?(e.sortIndex=u,C(A,e),null===S(N)&&e===S(A)&&(D?a():D=!0,r(P,u-s))):(e.sortIndex=i,C(N,e),M||F||(M=!0,n(L))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();B(e);var n=S(N);return n!==R&&null!==R&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<R.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}}})),jve=(HQ((function(e,t){})),HQ((function(e){e.exports=zve})));function Hve(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Tx)throw Error(Hve(227));function Gve(e,t,n,r,a,o,i,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var qve=!1,Kve=null,Xve=!1,Qve=null,Yve={onError:function(e){qve=!0,Kve=e}};function $ve(e,t,n,r,a,o,i,s,u){qve=!1,Kve=null,Gve.apply(Yve,arguments)}var Zve=null,Jve=null,eye=null;function tye(e,t,n){var r=e.type||"unknown-event";e.currentTarget=eye(n),function(e,t,n,r,a,o,i,s,u){if($ve.apply(this,arguments),qve){if(!qve)throw Error(Hve(198));var c=Kve;qve=!1,Kve=null,Xve||(Xve=!0,Qve=c)}}(r,t,void 0,e),e.currentTarget=null}var nye=null,rye={};function aye(){if(nye)for(var e in rye){var t=rye[e],n=nye.indexOf(e);if(!(-1<n))throw Error(Hve(96,e));if(!iye[n]){if(!t.extractEvents)throw Error(Hve(97,e));for(var r in iye[n]=t,n=t.eventTypes){var a=void 0,o=n[r],i=t,s=r;if(sye.hasOwnProperty(s))throw Error(Hve(99,s));sye[s]=o;var u=o.phasedRegistrationNames;if(u){for(a in u)u.hasOwnProperty(a)&&oye(u[a],i,s);a=!0}else o.registrationName?(oye(o.registrationName,i,s),a=!0):a=!1;if(!a)throw Error(Hve(98,r,e))}}}}function oye(e,t,n){if(uye[e])throw Error(Hve(100,e));uye[e]=t,cye[e]=t.eventTypes[n].dependencies}var iye=[],sye={},uye={},cye={};function lye(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!rye.hasOwnProperty(t)||rye[t]!==r){if(rye[t])throw Error(Hve(102,t));rye[t]=r,n=!0}}n&&aye()}var dye=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),pye=null,fye=null,hye=null;function mye(e){if(e=Jve(e)){if("function"!=typeof pye)throw Error(Hve(280));var t=e.stateNode;t&&(t=Zve(t),pye(e.stateNode,e.type,t))}}function gye(e){fye?hye?hye.push(e):hye=[e]:fye=e}function vye(){if(fye){var e=fye,t=hye;if(hye=fye=null,mye(e),t)for(e=0;e<t.length;e++)mye(t[e])}}function yye(e,t){return e(t)}function bye(e,t,n,r,a){return e(t,n,r,a)}function xye(){}var kye=yye,wye=!1,Iye=!1;function Cye(){null===fye&&null===hye||(xye(),vye())}function Sye(e,t,n){if(Iye)return e(t,n);Iye=!0;try{return kye(e,t,n)}finally{Iye=!1,Cye()}}var Eye=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tye=Object.prototype.hasOwnProperty,Nye={},Aye={};function _ye(e,t,n,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var Rye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){Rye[e]=new _ye(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];Rye[t]=new _ye(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Rye[e]=new _ye(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Rye[e]=new _ye(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){Rye[e]=new _ye(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Rye[e]=new _ye(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){Rye[e]=new _ye(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){Rye[e]=new _ye(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){Rye[e]=new _ye(e,5,!1,e.toLowerCase(),null,!1)}));var Oye=/[\-:]([a-z])/g;function Fye(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Oye,Fye);Rye[t]=new _ye(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Oye,Fye);Rye[t]=new _ye(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Oye,Fye);Rye[t]=new _ye(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){Rye[e]=new _ye(e,1,!1,e.toLowerCase(),null,!1)})),Rye.xlinkHref=new _ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){Rye[e]=new _ye(e,1,!1,e.toLowerCase(),null,!0)}));var Mye=Tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Dye(e,t,n,r){var a=Rye.hasOwnProperty(t)?Rye[t]:null;(null!==a?0===a.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(Ty(t)){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!Tye.call(Aye,e)||!Tye.call(Nye,e)&&(Eye.test(e)?Aye[e]=!0:(Nye[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}Mye.hasOwnProperty("ReactCurrentDispatcher")||(Mye.ReactCurrentDispatcher={current:null}),Mye.hasOwnProperty("ReactCurrentBatchConfig")||(Mye.ReactCurrentBatchConfig={suspense:null});var Bye=/^(.*)[\\\/]/,Pye="function"==typeof Symbol&&Symbol.for,Lye=Pye?Symbol.for("react.element"):60103,Uye=Pye?Symbol.for("react.portal"):60106,Vye=Pye?Symbol.for("react.fragment"):60107,Wye=Pye?Symbol.for("react.strict_mode"):60108,zye=Pye?Symbol.for("react.profiler"):60114,jye=Pye?Symbol.for("react.provider"):60109,Hye=Pye?Symbol.for("react.context"):60110,Gye=Pye?Symbol.for("react.concurrent_mode"):60111,qye=Pye?Symbol.for("react.forward_ref"):60112,Kye=Pye?Symbol.for("react.suspense"):60113,Xye=Pye?Symbol.for("react.suspense_list"):60120,Qye=Pye?Symbol.for("react.memo"):60115,Yye=Pye?Symbol.for("react.lazy"):60116,$ye=Pye?Symbol.for("react.block"):60121,Zye="function"==typeof Symbol&&Symbol.iterator;function Jye(e){return null===e||"object"!=Ty(e)?null:"function"==typeof(e=Zye&&e[Zye]||e["@@iterator"])?e:null}function ebe(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Vye:return"Fragment";case Uye:return"Portal";case zye:return"Profiler";case Wye:return"StrictMode";case Kye:return"Suspense";case Xye:return"SuspenseList"}if("object"==Ty(e))switch(e.$$typeof){case Hye:return"Context.Consumer";case jye:return"Context.Provider";case qye:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Qye:return ebe(e.type);case $ye:return ebe(e.render);case Yye:if(e=1===e._status?e._result:null)return ebe(e)}return null}function tbe(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,a=e._debugSource,o=ebe(e.type);n=null,r&&(n=ebe(r.type)),r=o,o="",a?o=" (at "+a.fileName.replace(Bye,"")+":"+a.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function nbe(e){switch(Ty(e)){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function rbe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function abe(e){e._valueTracker||(e._valueTracker=function(e){var t=rbe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function obe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=rbe(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ibe(e,t){var n=t.checked;return Wve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function sbe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=nbe(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ube(e,t){null!=(t=t.checked)&&Dye(e,"checked",t,!1)}function cbe(e,t){ube(e,t);var n=nbe(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?dbe(e,t.type,n):t.hasOwnProperty("defaultValue")&&dbe(e,t.type,nbe(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function lbe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function dbe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function pbe(e,t){return e=Wve({children:void 0},t),(t=function(e){var t="";return Tx.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function fbe(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+nbe(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function hbe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(Hve(91));return Wve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mbe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(Hve(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Hve(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:nbe(n)}}function gbe(e,t){var n=nbe(t.value),r=nbe(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function vbe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var ybe="http://www.w3.org/1999/xhtml",bbe="http://www.w3.org/2000/svg";function xbe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kbe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?xbe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var wbe,Ibe,Cbe=(Ibe=function(e,t){if(e.namespaceURI!==bbe||"innerHTML"in e)e.innerHTML=t;else{for((wbe=wbe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wbe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ibe(e,t)}))}:Ibe);function Sbe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ebe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Tbe={animationend:Ebe("Animation","AnimationEnd"),animationiteration:Ebe("Animation","AnimationIteration"),animationstart:Ebe("Animation","AnimationStart"),transitionend:Ebe("Transition","TransitionEnd")},Nbe={},Abe={};function _be(e){if(Nbe[e])return Nbe[e];if(!Tbe[e])return e;var t,n=Tbe[e];for(t in n)if(n.hasOwnProperty(t)&&t in Abe)return Nbe[e]=n[t];return e}dye&&(Abe=document.createElement("div").style,"AnimationEvent"in window||(delete Tbe.animationend.animation,delete Tbe.animationiteration.animation,delete Tbe.animationstart.animation),"TransitionEvent"in window||delete Tbe.transitionend.transition);var Rbe=_be("animationend"),Obe=_be("animationiteration"),Fbe=_be("animationstart"),Mbe=_be("transitionend"),Dbe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bbe=new("function"==typeof WeakMap?WeakMap:Map);function Pbe(e){var t=Bbe.get(e);return void 0===t&&(t=new Map,Bbe.set(e,t)),t}function Lbe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ube(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Vbe(e){if(Lbe(e)!==e)throw Error(Hve(188))}function Wbe(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Lbe(e)))throw Error(Hve(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Vbe(a),e;if(o===r)return Vbe(a),t;o=o.sibling}throw Error(Hve(188))}if(n.return!==r.return)n=a,r=o;else{for(var i=!1,s=a.child;s;){if(s===n){i=!0,n=a,r=o;break}if(s===r){i=!0,r=a,n=o;break}s=s.sibling}if(!i){for(s=o.child;s;){if(s===n){i=!0,n=o,r=a;break}if(s===r){i=!0,r=o,n=a;break}s=s.sibling}if(!i)throw Error(Hve(189))}}if(n.alternate!==r)throw Error(Hve(190))}if(3!==n.tag)throw Error(Hve(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function zbe(e,t){if(null==t)throw Error(Hve(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function jbe(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var Hbe=null;function Gbe(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)tye(e,t[r],n[r]);else t&&tye(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function qbe(e){if(null!==e&&(Hbe=zbe(Hbe,e)),e=Hbe,Hbe=null,e){if(jbe(e,Gbe),Hbe)throw Error(Hve(95));if(Xve)throw e=Qve,Xve=!1,Qve=null,e}}function Kbe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Xbe(e){if(!dye)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var Qbe=[];function Ybe(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Qbe.length&&Qbe.push(e)}function $be(e,t,n,r){if(Qbe.length){var a=Qbe.pop();return a.topLevelType=e,a.eventSystemFlags=r,a.nativeEvent=t,a.targetInst=n,a}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function Zbe(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=pke(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var a=Kbe(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,i=e.eventSystemFlags;0===n&&(i|=64);for(var s=null,u=0;u<iye.length;u++){var c=iye[u];c&&(c=c.extractEvents(r,t,o,a,i))&&(s=zbe(s,c))}qbe(s)}}function Jbe(e,t,n){if(!n.has(e)){switch(e){case"scroll":Fxe(t,"scroll",!0);break;case"focus":case"blur":Fxe(t,"focus",!0),Fxe(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":Xbe(e)&&Fxe(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Dbe.indexOf(e)&&Oxe(e,t)}n.set(e,null)}}var exe,txe,nxe,rxe=!1,axe=[],oxe=null,ixe=null,sxe=null,uxe=new Map,cxe=new Map,lxe=[],dxe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),pxe="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function fxe(e,t,n,r,a){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:a,container:r}}function hxe(e,t){switch(e){case"focus":case"blur":oxe=null;break;case"dragenter":case"dragleave":ixe=null;break;case"mouseover":case"mouseout":sxe=null;break;case"pointerover":case"pointerout":uxe.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cxe.delete(t.pointerId)}}function mxe(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e=fxe(t,n,r,a,o),null!==t&&null!==(t=fke(t))&&txe(t),e):(e.eventSystemFlags|=r,e)}function gxe(e){var t=pke(e.target);if(null!==t){var n=Lbe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ube(n)))return e.blockedOn=t,void jve.unstable_runWithPriority(e.priority,(function(){nxe(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function vxe(e){if(null!==e.blockedOn)return!1;var t=Pxe(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=fke(t);return null!==n&&txe(n),e.blockedOn=t,!1}return!0}function yxe(e,t,n){vxe(e)&&n.delete(t)}function bxe(){for(rxe=!1;0<axe.length;){var e=axe[0];if(null!==e.blockedOn){null!==(e=fke(e.blockedOn))&&exe(e);break}var t=Pxe(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:axe.shift()}null!==oxe&&vxe(oxe)&&(oxe=null),null!==ixe&&vxe(ixe)&&(ixe=null),null!==sxe&&vxe(sxe)&&(sxe=null),uxe.forEach(yxe),cxe.forEach(yxe)}function xxe(e,t){e.blockedOn===t&&(e.blockedOn=null,rxe||(rxe=!0,jve.unstable_scheduleCallback(jve.unstable_NormalPriority,bxe)))}function kxe(e){function t(t){return xxe(t,e)}if(0<axe.length){xxe(axe[0],e);for(var n=1;n<axe.length;n++){var r=axe[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==oxe&&xxe(oxe,e),null!==ixe&&xxe(ixe,e),null!==sxe&&xxe(sxe,e),uxe.forEach(t),cxe.forEach(t),n=0;n<lxe.length;n++)(r=lxe[n]).blockedOn===e&&(r.blockedOn=null);for(;0<lxe.length&&null===(n=lxe[0]).blockedOn;)gxe(n),null===n.blockedOn&&lxe.shift()}var wxe={},Ixe=new Map,Cxe=new Map,Sxe=["abort","abort",Rbe,"animationEnd",Obe,"animationIteration",Fbe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Mbe,"transitionEnd","waiting","waiting"];function Exe(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1],o="on"+(a[0].toUpperCase()+a.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},Cxe.set(r,t),Ixe.set(r,o),wxe[a]=o}}Exe("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Exe("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Exe(Sxe,2);for(var Txe="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Nxe=0;Nxe<Txe.length;Nxe++)Cxe.set(Txe[Nxe],0);var Axe=jve.unstable_UserBlockingPriority,_xe=jve.unstable_runWithPriority,Rxe=!0;function Oxe(e,t){Fxe(t,e,!1)}function Fxe(e,t,n){var r=Cxe.get(t);switch(void 0===r?2:r){case 0:r=Mxe.bind(null,t,1,e);break;case 1:r=Dxe.bind(null,t,1,e);break;default:r=Bxe.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Mxe(e,t,n,r){wye||xye();var a=Bxe,o=wye;wye=!0;try{bye(a,e,t,n,r)}finally{(wye=o)||Cye()}}function Dxe(e,t,n,r){_xe(Axe,Bxe.bind(null,e,t,n,r))}function Bxe(e,t,n,r){if(Rxe)if(0<axe.length&&-1<dxe.indexOf(e))e=fxe(null,e,t,n,r),axe.push(e);else{var a=Pxe(e,t,n,r);if(null===a)hxe(e,r);else if(-1<dxe.indexOf(e))e=fxe(a,e,t,n,r),axe.push(e);else if(!function(e,t,n,r,a){switch(t){case"focus":return oxe=mxe(oxe,e,t,n,r,a),!0;case"dragenter":return ixe=mxe(ixe,e,t,n,r,a),!0;case"mouseover":return sxe=mxe(sxe,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return uxe.set(o,mxe(uxe.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,cxe.set(o,mxe(cxe.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r)){hxe(e,r),e=$be(e,r,null,t);try{Sye(Zbe,e)}finally{Ybe(e)}}}}function Pxe(e,t,n,r){if(null!==(n=pke(n=Kbe(r)))){var a=Lbe(n);if(null===a)n=null;else{var o=a.tag;if(13===o){if(null!==(n=Ube(a)))return n;n=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}e=$be(e,r,n,t);try{Sye(Zbe,e)}finally{Ybe(e)}return null}var Lxe={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Uxe=["Webkit","ms","Moz","O"];function Vxe(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Lxe.hasOwnProperty(e)&&Lxe[e]?(""+t).trim():t+"px"}function Wxe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=Vxe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(Lxe).forEach((function(e){Uxe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Lxe[t]=Lxe[e]}))}));var zxe=Wve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jxe(e,t){if(t){if(zxe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(Hve(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(Hve(60));if("object"!=Ty(t.dangerouslySetInnerHTML)||!("__html"in t.dangerouslySetInnerHTML))throw Error(Hve(61))}if(null!=t.style&&"object"!=Ty(t.style))throw Error(Hve(62,""))}}function Hxe(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gxe=ybe;function qxe(e,t){var n=Pbe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=cye[t];for(var r=0;r<t.length;r++)Jbe(t[r],e,n)}function Kxe(){}function Xxe(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Qxe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yxe(e,t){var n,r=Qxe(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qxe(r)}}function $xe(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?$xe(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Zxe(){for(var e=window,t=Xxe();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Xxe((e=t.contentWindow).document)}return t}function Jxe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var eke=null,tke=null;function nke(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function rke(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==Ty(t.dangerouslySetInnerHTML)&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ake="function"==typeof setTimeout?setTimeout:void 0,oke="function"==typeof clearTimeout?clearTimeout:void 0;function ike(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function ske(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var uke=Math.random().toString(36).slice(2),cke="__reactInternalInstance$"+uke,lke="__reactEventHandlers$"+uke,dke="__reactContainere$"+uke;function pke(e){var t=e[cke];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dke]||n[cke]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ske(e);null!==e;){if(n=e[cke])return n;e=ske(e)}return t}n=(e=n).parentNode}return null}function fke(e){return!(e=e[cke]||e[dke])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function hke(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(Hve(33))}function mke(e){return e[lke]||null}function gke(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function vke(e,t){var n=e.stateNode;if(!n)return null;var r=Zve(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(Hve(231,t,Ty(n)));return n}function yke(e,t,n){(t=vke(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=zbe(n._dispatchListeners,t),n._dispatchInstances=zbe(n._dispatchInstances,e))}function bke(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=gke(t);for(t=n.length;0<t--;)yke(n[t],"captured",e);for(t=0;t<n.length;t++)yke(n[t],"bubbled",e)}}function xke(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=vke(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=zbe(n._dispatchListeners,t),n._dispatchInstances=zbe(n._dispatchInstances,e))}function kke(e){e&&e.dispatchConfig.registrationName&&xke(e._targetInst,null,e)}function wke(e){jbe(e,bke)}var Ike=null,Cke=null,Ske=null;function Eke(){if(Ske)return Ske;var e,t,n=Cke,r=n.length,a="value"in Ike?Ike.value:Ike.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return Ske=a.slice(e,1<t?1-t:void 0)}function Tke(){return!0}function Nke(){return!1}function Ake(e,t,n,r){for(var a in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(a)&&((t=e[a])?this[a]=t(n):"target"===a?this.target=r:this[a]=n[a]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Tke:Nke,this.isPropagationStopped=Nke,this}function _ke(e,t,n,r){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,e,t,n,r),a}return new this(e,t,n,r)}function Rke(e){if(!(e instanceof this))throw Error(Hve(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Oke(e){e.eventPool=[],e.getPooled=_ke,e.release=Rke}Wve(Ake.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Tke)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Tke)},persist:function(){this.isPersistent=Tke},isPersistent:Nke,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Nke,this._dispatchInstances=this._dispatchListeners=null}}),Ake.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Ake.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return Wve(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=Wve({},r.Interface,e),n.extend=r.extend,Oke(n),n},Oke(Ake);var Fke=Ake.extend({data:null}),Mke=Ake.extend({data:null}),Dke=[9,13,27,32],Bke=dye&&"CompositionEvent"in window,Pke=null;dye&&"documentMode"in document&&(Pke=document.documentMode);var Lke=dye&&"TextEvent"in window&&!Pke,Uke=dye&&(!Bke||Pke&&8<Pke&&11>=Pke),Vke=String.fromCharCode(32),Wke={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},zke=!1;function jke(e,t){switch(e){case"keyup":return-1!==Dke.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Hke(e){return"object"==Ty(e=e.detail)&&"data"in e?e.data:null}var Gke=!1,qke={eventTypes:Wke,extractEvents:function(e,t,n,r){var a;if(Bke)e:{switch(e){case"compositionstart":var o=Wke.compositionStart;break e;case"compositionend":o=Wke.compositionEnd;break e;case"compositionupdate":o=Wke.compositionUpdate;break e}o=void 0}else Gke?jke(e,n)&&(o=Wke.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=Wke.compositionStart);return o?(Uke&&"ko"!==n.locale&&(Gke||o!==Wke.compositionStart?o===Wke.compositionEnd&&Gke&&(a=Eke()):(Cke="value"in(Ike=r)?Ike.value:Ike.textContent,Gke=!0)),o=Fke.getPooled(o,t,n,r),(a||null!==(a=Hke(n)))&&(o.data=a),wke(o),a=o):a=null,(e=Lke?function(e,t){switch(e){case"compositionend":return Hke(t);case"keypress":return 32!==t.which?null:(zke=!0,Vke);case"textInput":return(e=t.data)===Vke&&zke?null:e;default:return null}}(e,n):function(e,t){if(Gke)return"compositionend"===e||!Bke&&jke(e,t)?(e=Eke(),Ske=Cke=Ike=null,Gke=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Uke&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Mke.getPooled(Wke.beforeInput,t,n,r)).data=e,wke(t)):t=null,null===a?t:null===t?a:[a,t]}},Kke={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xke(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kke[e.type]:"textarea"===t}var Qke={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Yke(e,t,n){return(e=Ake.getPooled(Qke.change,e,t,n)).type="change",gye(n),wke(e),e}var $ke=null,Zke=null;function Jke(e){qbe(e)}function ewe(e){if(obe(hke(e)))return e}function twe(e,t){if("change"===e)return t}var nwe=!1;function rwe(){$ke&&($ke.detachEvent("onpropertychange",awe),Zke=$ke=null)}function awe(e){if("value"===e.propertyName&&ewe(Zke))if(e=Yke(Zke,e,Kbe(e)),wye)qbe(e);else{wye=!0;try{yye(Jke,e)}finally{wye=!1,Cye()}}}function owe(e,t,n){"focus"===e?(rwe(),Zke=n,($ke=t).attachEvent("onpropertychange",awe)):"blur"===e&&rwe()}function iwe(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return ewe(Zke)}function swe(e,t){if("click"===e)return ewe(t)}function uwe(e,t){if("input"===e||"change"===e)return ewe(t)}dye&&(nwe=Xbe("input")&&(!document.documentMode||9<document.documentMode));var cwe={eventTypes:Qke,_isInputEventSupported:nwe,extractEvents:function(e,t,n,r){var a=t?hke(t):window,o=a.nodeName&&a.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===a.type)var i=twe;else if(Xke(a))if(nwe)i=uwe;else{i=iwe;var s=owe}else(o=a.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(i=swe);if(i&&(i=i(e,t)))return Yke(i,n,r);s&&s(e,a,t),"blur"===e&&(e=a._wrapperState)&&e.controlled&&"number"===a.type&&dbe(a,"number",a.value)}},lwe=Ake.extend({view:null,detail:null}),dwe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pwe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dwe[e])&&!!t[e]}function fwe(){return pwe}var hwe=0,mwe=0,gwe=!1,vwe=!1,ywe=lwe.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:fwe,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=hwe;return hwe=e.screenX,gwe?"mousemove"===e.type?e.screenX-t:0:(gwe=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=mwe;return mwe=e.screenY,vwe?"mousemove"===e.type?e.screenY-t:0:(vwe=!0,0)}}),bwe=ywe.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),xwe={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},kwe={eventTypes:xwe,extractEvents:function(e,t,n,r,a){var o="mouseover"===e||"pointerover"===e,i="mouseout"===e||"pointerout"===e;if(o&&0==(32&a)&&(n.relatedTarget||n.fromElement)||!i&&!o)return null;if(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,i?(i=t,null!==(t=(t=n.relatedTarget||n.toElement)?pke(t):null)&&(t!==Lbe(t)||5!==t.tag&&6!==t.tag)&&(t=null)):i=null,i===t)return null;if("mouseout"===e||"mouseover"===e)var s=ywe,u=xwe.mouseLeave,c=xwe.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=bwe,u=xwe.pointerLeave,c=xwe.pointerEnter,l="pointer");if(e=null==i?o:hke(i),o=null==t?o:hke(t),(u=s.getPooled(u,i,n,r)).type=l+"leave",u.target=e,u.relatedTarget=o,(n=s.getPooled(c,t,n,r)).type=l+"enter",n.target=o,n.relatedTarget=e,l=t,(r=i)&&l)e:{for(c=l,i=0,e=s=r;e;e=gke(e))i++;for(e=0,t=c;t;t=gke(t))e++;for(;0<i-e;)s=gke(s),i--;for(;0<e-i;)c=gke(c),e--;for(;i--;){if(s===c||s===c.alternate)break e;s=gke(s),c=gke(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(i=r.alternate)||i!==c);)s.push(r),r=gke(r);for(r=[];l&&l!==c&&(null===(i=l.alternate)||i!==c);)r.push(l),l=gke(l);for(l=0;l<s.length;l++)xke(s[l],"bubbled",u);for(l=r.length;0<l--;)xke(r[l],"captured",n);return 0==(64&a)?[u]:[u,n]}},wwe="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Iwe=Object.prototype.hasOwnProperty;function Cwe(e,t){if(wwe(e,t))return!0;if("object"!=Ty(e)||null===e||"object"!=Ty(t)||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Iwe.call(t,n[r])||!wwe(e[n[r]],t[n[r]]))return!1;return!0}var Swe=dye&&"documentMode"in document&&11>=document.documentMode,Ewe={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Twe=null,Nwe=null,Awe=null,_we=!1;function Rwe(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return _we||null==Twe||Twe!==Xxe(n)?null:(n="selectionStart"in(n=Twe)&&Jxe(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Awe&&Cwe(Awe,n)?null:(Awe=n,(e=Ake.getPooled(Ewe.select,Nwe,e,t)).type="select",e.target=Twe,wke(e),e))}var Owe={eventTypes:Ewe,extractEvents:function(e,t,n,r,a,o){if(!(o=!(a=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{a=Pbe(a),o=cye.onSelect;for(var i=0;i<o.length;i++)if(!a.has(o[i])){a=!1;break e}a=!0}o=!a}if(o)return null;switch(a=t?hke(t):window,e){case"focus":(Xke(a)||"true"===a.contentEditable)&&(Twe=a,Nwe=t,Awe=null);break;case"blur":Awe=Nwe=Twe=null;break;case"mousedown":_we=!0;break;case"contextmenu":case"mouseup":case"dragend":return _we=!1,Rwe(n,r);case"selectionchange":if(Swe)break;case"keydown":case"keyup":return Rwe(n,r)}return null}},Fwe=Ake.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Mwe=Ake.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dwe=lwe.extend({relatedTarget:null});function Bwe(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Pwe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lwe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uwe=lwe.extend({key:function(e){if(e.key){var t=Pwe[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Bwe(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Lwe[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:fwe,charCode:function(e){return"keypress"===e.type?Bwe(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Bwe(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Vwe=ywe.extend({dataTransfer:null}),Wwe=lwe.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:fwe}),zwe=Ake.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),jwe=ywe.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Hwe={eventTypes:wxe,extractEvents:function(e,t,n,r){var a=Ixe.get(e);if(!a)return null;switch(e){case"keypress":if(0===Bwe(n))return null;case"keydown":case"keyup":e=Uwe;break;case"blur":case"focus":e=Dwe;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=ywe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=Vwe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=Wwe;break;case Rbe:case Obe:case Fbe:e=Fwe;break;case Mbe:e=zwe;break;case"scroll":e=lwe;break;case"wheel":e=jwe;break;case"copy":case"cut":case"paste":e=Mwe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=bwe;break;default:e=Ake}return wke(t=e.getPooled(a,t,n,r)),t}};if(nye)throw Error(Hve(101));nye=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),aye(),Zve=mke,Jve=fke,eye=hke,lye({SimpleEventPlugin:Hwe,EnterLeaveEventPlugin:kwe,ChangeEventPlugin:cwe,SelectEventPlugin:Owe,BeforeInputEventPlugin:qke});var Gwe=[],qwe=-1;function Kwe(e){0>qwe||(e.current=Gwe[qwe],Gwe[qwe]=null,qwe--)}function Xwe(e,t){qwe++,Gwe[qwe]=e.current,e.current=t}var Qwe={},Ywe={current:Qwe},$we={current:!1},Zwe=Qwe;function Jwe(e,t){var n=e.type.contextTypes;if(!n)return Qwe;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function eIe(e){return null!=e.childContextTypes}function tIe(){Kwe($we),Kwe(Ywe)}function nIe(e,t,n){if(Ywe.current!==Qwe)throw Error(Hve(168));Xwe(Ywe,t),Xwe($we,n)}function rIe(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(Hve(108,ebe(t)||"Unknown",a));return Wve({},n,{},r)}function aIe(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qwe,Zwe=Ywe.current,Xwe(Ywe,e),Xwe($we,$we.current),!0}function oIe(e,t,n){var r=e.stateNode;if(!r)throw Error(Hve(169));n?(e=rIe(e,t,Zwe),r.__reactInternalMemoizedMergedChildContext=e,Kwe($we),Kwe(Ywe),Xwe(Ywe,e)):Kwe($we),Xwe($we,n)}var iIe=jve.unstable_runWithPriority,sIe=jve.unstable_scheduleCallback,uIe=jve.unstable_cancelCallback,cIe=jve.unstable_requestPaint,lIe=jve.unstable_now,dIe=jve.unstable_getCurrentPriorityLevel,pIe=jve.unstable_ImmediatePriority,fIe=jve.unstable_UserBlockingPriority,hIe=jve.unstable_NormalPriority,mIe=jve.unstable_LowPriority,gIe=jve.unstable_IdlePriority,vIe={},yIe=jve.unstable_shouldYield,bIe=void 0!==cIe?cIe:function(){},xIe=null,kIe=null,wIe=!1,IIe=lIe(),CIe=1e4>IIe?lIe:function(){return lIe()-IIe};function SIe(){switch(dIe()){case pIe:return 99;case fIe:return 98;case hIe:return 97;case mIe:return 96;case gIe:return 95;default:throw Error(Hve(332))}}function EIe(e){switch(e){case 99:return pIe;case 98:return fIe;case 97:return hIe;case 96:return mIe;case 95:return gIe;default:throw Error(Hve(332))}}function TIe(e,t){return e=EIe(e),iIe(e,t)}function NIe(e,t,n){return e=EIe(e),sIe(e,t,n)}function AIe(e){return null===xIe?(xIe=[e],kIe=sIe(pIe,RIe)):xIe.push(e),vIe}function _Ie(){if(null!==kIe){var e=kIe;kIe=null,uIe(e)}RIe()}function RIe(){if(!wIe&&null!==xIe){wIe=!0;var e=0;try{var t=xIe;TIe(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),xIe=null}catch(t){throw null!==xIe&&(xIe=xIe.slice(e+1)),sIe(pIe,_Ie),t}finally{wIe=!1}}}function OIe(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function FIe(e,t){if(e&&e.defaultProps)for(var n in t=Wve({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var MIe={current:null},DIe=null,BIe=null,PIe=null;function LIe(){PIe=BIe=DIe=null}function UIe(e){var t=MIe.current;Kwe(MIe),e.type._context._currentValue=t}function VIe(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function WIe(e,t){DIe=e,PIe=BIe=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(hSe=!0),e.firstContext=null)}function zIe(e,t){if(PIe!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(PIe=e,t=1073741823),t={context:e,observedBits:t,next:null},null===BIe){if(null===DIe)throw Error(Hve(308));BIe=t,DIe.dependencies={expirationTime:0,firstContext:t,responders:null}}else BIe=BIe.next=t;return e._currentValue}var jIe=!1;function HIe(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function GIe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function qIe(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function KIe(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function XIe(e,t){var n=e.alternate;null!==n&&GIe(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function QIe(e,t,n,r){var a=e.updateQueue;jIe=!1;var o=a.baseQueue,i=a.shared.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}o=i,a.shared.pending=null,null!==(s=e.alternate)&&null!==(s=s.updateQueue)&&(s.baseQueue=i)}if(null!==o){s=o.next;var u=a.baseState,c=0,l=null,d=null,p=null;if(null!==s)for(var f=s;;){if((i=f.expirationTime)<r){var h={expirationTime:f.expirationTime,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null};null===p?(d=p=h,l=u):p=p.next=h,i>c&&(c=i)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null}),GEe(i,f.suspenseConfig);e:{var m=e,g=f;switch(i=t,h=n,g.tag){case 1:if("function"==typeof(m=g.payload)){u=m.call(h,u,i);break e}u=m;break e;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null==(i="function"==typeof(m=g.payload)?m.call(h,u,i):m))break e;u=Wve({},u,i);break e;case 2:jIe=!0}}null!==f.callback&&(e.effectTag|=32,null===(i=a.effects)?a.effects=[f]:i.push(f))}if(null===(f=f.next)||f===s){if(null===(i=a.shared.pending))break;f=o.next=i.next,i.next=s,a.baseQueue=o=i,a.shared.pending=null}}null===p?l=u:p.next=d,a.baseState=l,a.baseQueue=p,qEe(c),e.expirationTime=c,e.memoizedState=u}}function YIe(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=a,a=n,"function"!=typeof r)throw Error(Hve(191,r));r.call(a)}}}var $Ie=Mye.ReactCurrentBatchConfig,ZIe=(new Tx.Component).refs;function JIe(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Wve({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var eCe={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Lbe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=OEe(),a=$Ie.suspense;(a=qIe(r=FEe(r,e,a),a)).payload=t,null!=n&&(a.callback=n),KIe(e,a),MEe(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=OEe(),a=$Ie.suspense;(a=qIe(r=FEe(r,e,a),a)).tag=1,a.payload=t,null!=n&&(a.callback=n),KIe(e,a),MEe(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=OEe(),r=$Ie.suspense;(r=qIe(n=FEe(n,e,r),r)).tag=2,null!=t&&(r.callback=t),KIe(e,r),MEe(e,n)}};function tCe(e,t,n,r,a,o,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!(t.prototype&&t.prototype.isPureReactComponent&&Cwe(n,r)&&Cwe(a,o))}function nCe(e,t,n){var r=!1,a=Qwe,o=t.contextType;return"object"==Ty(o)&&null!==o?o=zIe(o):(a=eIe(t)?Zwe:Ywe.current,o=(r=null!=(r=t.contextTypes))?Jwe(e,a):Qwe),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=eCe,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function rCe(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&eCe.enqueueReplaceState(t,t.state,null)}function aCe(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=ZIe,HIe(e);var o=t.contextType;"object"==Ty(o)&&null!==o?a.context=zIe(o):(o=eIe(t)?Zwe:Ywe.current,a.context=Jwe(e,o)),QIe(e,n,a,r),a.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(JIe(e,t,o,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&eCe.enqueueReplaceState(a,a.state,null),QIe(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.effectTag|=4)}var oCe=Array.isArray;function iCe(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=Ty(e)){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(Hve(309));var r=n.stateNode}if(!r)throw Error(Hve(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=r.refs;t===ZIe&&(t=r.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(Hve(284));if(!n._owner)throw Error(Hve(290,e))}return e}function sCe(e,t){if("textarea"!==e.type)throw Error(Hve(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function uCe(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=pTe(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function i(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=mTe(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=iCe(e,t,n),r.return=e,r):((r=fTe(n.type,n.key,n.props,null,e.mode,r)).ref=iCe(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=gTe(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function l(e,t,n,r,o){return null===t||7!==t.tag?((t=hTe(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=mTe(""+t,e.mode,n)).return=e,t;if("object"==Ty(t)&&null!==t){switch(t.$$typeof){case Lye:return(n=fTe(t.type,t.key,t.props,null,e.mode,n)).ref=iCe(e,null,t),n.return=e,n;case Uye:return(t=gTe(t,e.mode,n)).return=e,t}if(oCe(t)||Jye(t))return(t=hTe(t,e.mode,n,null)).return=e,t;sCe(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==a?null:s(e,t,""+n,r);if("object"==Ty(n)&&null!==n){switch(n.$$typeof){case Lye:return n.key===a?n.type===Vye?l(e,t,n.props.children,r,a):u(e,t,n,r):null;case Uye:return n.key===a?c(e,t,n,r):null}if(oCe(n)||Jye(n))return null!==a?null:l(e,t,n,r,null);sCe(e,n)}return null}function f(e,t,n,r,a){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"==Ty(r)&&null!==r){switch(r.$$typeof){case Lye:return e=e.get(null===r.key?n:r.key)||null,r.type===Vye?l(t,e,r.props.children,a,r.key):u(t,e,r,a);case Uye:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(oCe(r)||Jye(r))return l(t,e=e.get(n)||null,r,a,null);sCe(t,r)}return null}function h(a,i,s,u){for(var c=null,l=null,h=i,m=i=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=p(a,h,s[m],u);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(a,h),i=o(v,i,m),null===l?c=v:l.sibling=v,l=v,h=g}if(m===s.length)return n(a,h),c;if(null===h){for(;m<s.length;m++)null!==(h=d(a,s[m],u))&&(i=o(h,i,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(a,h);m<s.length;m++)null!==(g=f(h,a,m,s[m],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),i=o(g,i,m),null===l?c=g:l.sibling=g,l=g);return e&&h.forEach((function(e){return t(a,e)})),c}function m(a,i,s,u){var c=Jye(s);if("function"!=typeof c)throw Error(Hve(150));if(null==(s=c.call(s)))throw Error(Hve(151));for(var l=c=null,h=i,m=i=0,g=null,v=s.next();null!==h&&!v.done;m++,v=s.next()){h.index>m?(g=h,h=null):g=h.sibling;var y=p(a,h,v.value,u);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(a,h),i=o(y,i,m),null===l?c=y:l.sibling=y,l=y,h=g}if(v.done)return n(a,h),c;if(null===h){for(;!v.done;m++,v=s.next())null!==(v=d(a,v.value,u))&&(i=o(v,i,m),null===l?c=v:l.sibling=v,l=v);return c}for(h=r(a,h);!v.done;m++,v=s.next())null!==(v=f(h,a,m,v.value,u))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),i=o(v,i,m),null===l?c=v:l.sibling=v,l=v);return e&&h.forEach((function(e){return t(a,e)})),c}return function(e,r,o,s){var u="object"==Ty(o)&&null!==o&&o.type===Vye&&null===o.key;u&&(o=o.props.children);var c="object"==Ty(o)&&null!==o;if(c)switch(o.$$typeof){case Lye:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){switch(u.tag){case 7:if(o.type===Vye){n(e,u.sibling),(r=a(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=a(u,o.props)).ref=iCe(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===Vye?((r=hTe(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=fTe(o.type,o.key,o.props,null,e.mode,s)).ref=iCe(e,r,o),s.return=e,e=s)}return i(e);case Uye:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=a(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=gTe(o,e.mode,s)).return=e,e=r}return i(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,o)).return=e,e=r):(n(e,r),(r=mTe(o,e.mode,s)).return=e,e=r),i(e);if(oCe(o))return h(e,r,o,s);if(Jye(o))return m(e,r,o,s);if(c&&sCe(e,o),void 0===o&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(Hve(152,e.displayName||e.name||"Component"))}return n(e,r)}}var cCe=uCe(!0),lCe=uCe(!1),dCe={},pCe={current:dCe},fCe={current:dCe},hCe={current:dCe};function mCe(e){if(e===dCe)throw Error(Hve(174));return e}function gCe(e,t){switch(Xwe(hCe,t),Xwe(fCe,e),Xwe(pCe,dCe),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kbe(null,"");break;default:t=kbe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Kwe(pCe),Xwe(pCe,t)}function vCe(){Kwe(pCe),Kwe(fCe),Kwe(hCe)}function yCe(e){mCe(hCe.current);var t=mCe(pCe.current),n=kbe(t,e.type);t!==n&&(Xwe(fCe,e),Xwe(pCe,n))}function bCe(e){fCe.current===e&&(Kwe(pCe),Kwe(fCe))}var xCe={current:0};function kCe(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function wCe(e,t){return{responder:e,props:t}}var ICe=Mye.ReactCurrentDispatcher,CCe=Mye.ReactCurrentBatchConfig,SCe=0,ECe=null,TCe=null,NCe=null,ACe=!1;function _Ce(){throw Error(Hve(321))}function RCe(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wwe(e[n],t[n]))return!1;return!0}function OCe(e,t,n,r,a,o){if(SCe=o,ECe=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,ICe.current=null===e||null===e.memoizedState?tSe:nSe,e=n(r,a),t.expirationTime===SCe){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(Hve(301));o+=1,NCe=TCe=null,t.updateQueue=null,ICe.current=rSe,e=n(r,a)}while(t.expirationTime===SCe)}if(ICe.current=eSe,t=null!==TCe&&null!==TCe.next,SCe=0,NCe=TCe=ECe=null,ACe=!1,t)throw Error(Hve(300));return e}function FCe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===NCe?ECe.memoizedState=NCe=e:NCe=NCe.next=e,NCe}function MCe(){if(null===TCe){var e=ECe.alternate;e=null!==e?e.memoizedState:null}else e=TCe.next;var t=null===NCe?ECe.memoizedState:NCe.next;if(null!==t)NCe=t,TCe=e;else{if(null===e)throw Error(Hve(310));e={memoizedState:(TCe=e).memoizedState,baseState:TCe.baseState,baseQueue:TCe.baseQueue,queue:TCe.queue,next:null},null===NCe?ECe.memoizedState=NCe=e:NCe=NCe.next=e}return NCe}function DCe(e,t){return"function"==typeof t?t(e):t}function BCe(e){var t=MCe(),n=t.queue;if(null===n)throw Error(Hve(311));n.lastRenderedReducer=e;var r=TCe,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var i=a.next;a.next=o.next,o.next=i}r.baseQueue=a=o,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var s=i=o=null,u=a;do{var c=u.expirationTime;if(c<SCe){var l={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(i=s=l,o=r):s=s.next=l,c>ECe.expirationTime&&(ECe.expirationTime=c,qEe(c))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),GEe(c,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==a);null===s?o=r:s.next=i,wwe(r,t.memoizedState)||(hSe=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function PCe(e){var t=MCe(),n=t.queue;if(null===n)throw Error(Hve(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var i=a=a.next;do{o=e(o,i.action),i=i.next}while(i!==a);wwe(o,t.memoizedState)||(hSe=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function LCe(e){var t=FCe();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:DCe,lastRenderedState:e}).dispatch=JCe.bind(null,ECe,e),[t.memoizedState,e]}function UCe(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ECe.updateQueue)?(t={lastEffect:null},ECe.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function VCe(){return MCe().memoizedState}function WCe(e,t,n,r){var a=FCe();ECe.effectTag|=e,a.memoizedState=UCe(1|t,n,void 0,void 0===r?null:r)}function zCe(e,t,n,r){var a=MCe();r=void 0===r?null:r;var o=void 0;if(null!==TCe){var i=TCe.memoizedState;if(o=i.destroy,null!==r&&RCe(r,i.deps))return void UCe(t,n,o,r)}ECe.effectTag|=e,a.memoizedState=UCe(1|t,n,o,r)}function jCe(e,t){return WCe(516,4,e,t)}function HCe(e,t){return zCe(516,4,e,t)}function GCe(e,t){return zCe(4,2,e,t)}function qCe(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function KCe(e,t,n){return n=null!=n?n.concat([e]):null,zCe(4,2,qCe.bind(null,t,e),n)}function XCe(){}function QCe(e,t){return FCe().memoizedState=[e,void 0===t?null:t],e}function YCe(e,t){var n=MCe();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&RCe(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $Ce(e,t){var n=MCe();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&RCe(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ZCe(e,t,n){var r=SIe();TIe(98>r?98:r,(function(){e(!0)})),TIe(97<r?97:r,(function(){var r=CCe.suspense;CCe.suspense=void 0===t?null:t;try{e(!1),n()}finally{CCe.suspense=r}}))}function JCe(e,t,n){var r=OEe(),a=$Ie.suspense;a={expirationTime:r=FEe(r,e,a),suspenseConfig:a,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===ECe||null!==o&&o===ECe)ACe=!0,a.expirationTime=SCe,ECe.expirationTime=SCe;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.eagerReducer=o,a.eagerState=s,wwe(s,i))return}catch(e){}MEe(e,r)}}var eSe={readContext:zIe,useCallback:_Ce,useContext:_Ce,useEffect:_Ce,useImperativeHandle:_Ce,useLayoutEffect:_Ce,useMemo:_Ce,useReducer:_Ce,useRef:_Ce,useState:_Ce,useDebugValue:_Ce,useResponder:_Ce,useDeferredValue:_Ce,useTransition:_Ce},tSe={readContext:zIe,useCallback:QCe,useContext:zIe,useEffect:jCe,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,WCe(4,2,qCe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return WCe(4,2,e,t)},useMemo:function(e,t){var n=FCe();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=FCe();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=JCe.bind(null,ECe,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},FCe().memoizedState=e},useState:LCe,useDebugValue:XCe,useResponder:wCe,useDeferredValue:function(e,t){var n=LCe(e),r=n[0],a=n[1];return jCe((function(){var n=CCe.suspense;CCe.suspense=void 0===t?null:t;try{a(e)}finally{CCe.suspense=n}}),[e,t]),r},useTransition:function(e){var t=LCe(!1),n=t[0];return t=t[1],[QCe(ZCe.bind(null,t,e),[t,e]),n]}},nSe={readContext:zIe,useCallback:YCe,useContext:zIe,useEffect:HCe,useImperativeHandle:KCe,useLayoutEffect:GCe,useMemo:$Ce,useReducer:BCe,useRef:VCe,useState:function(){return BCe(DCe)},useDebugValue:XCe,useResponder:wCe,useDeferredValue:function(e,t){var n=BCe(DCe),r=n[0],a=n[1];return HCe((function(){var n=CCe.suspense;CCe.suspense=void 0===t?null:t;try{a(e)}finally{CCe.suspense=n}}),[e,t]),r},useTransition:function(e){var t=BCe(DCe),n=t[0];return t=t[1],[YCe(ZCe.bind(null,t,e),[t,e]),n]}},rSe={readContext:zIe,useCallback:YCe,useContext:zIe,useEffect:HCe,useImperativeHandle:KCe,useLayoutEffect:GCe,useMemo:$Ce,useReducer:PCe,useRef:VCe,useState:function(){return PCe(DCe)},useDebugValue:XCe,useResponder:wCe,useDeferredValue:function(e,t){var n=PCe(DCe),r=n[0],a=n[1];return HCe((function(){var n=CCe.suspense;CCe.suspense=void 0===t?null:t;try{a(e)}finally{CCe.suspense=n}}),[e,t]),r},useTransition:function(e){var t=PCe(DCe),n=t[0];return t=t[1],[YCe(ZCe.bind(null,t,e),[t,e]),n]}},aSe=null,oSe=null,iSe=!1;function sSe(e,t){var n=lTe(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function uSe(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function cSe(e){if(iSe){var t=oSe;if(t){var n=t;if(!uSe(e,t)){if(!(t=ike(n.nextSibling))||!uSe(e,t))return e.effectTag=-1025&e.effectTag|2,iSe=!1,void(aSe=e);sSe(aSe,n)}aSe=e,oSe=ike(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,iSe=!1,aSe=e}}function lSe(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;aSe=e}function dSe(e){if(e!==aSe)return!1;if(!iSe)return lSe(e),iSe=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!rke(t,e.memoizedProps))for(t=oSe;t;)sSe(e,t),t=ike(t.nextSibling);if(lSe(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Hve(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oSe=ike(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oSe=null}}else oSe=aSe?ike(e.stateNode.nextSibling):null;return!0}function pSe(){oSe=aSe=null,iSe=!1}var fSe=Mye.ReactCurrentOwner,hSe=!1;function mSe(e,t,n,r){t.child=null===e?lCe(t,null,n,r):cCe(t,e.child,n,r)}function gSe(e,t,n,r,a){n=n.render;var o=t.ref;return WIe(t,a),r=OCe(e,t,n,r,o,a),null===e||hSe?(t.effectTag|=1,mSe(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),OSe(e,t,a))}function vSe(e,t,n,r,a,o){if(null===e){var i=n.type;return"function"!=typeof i||dTe(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=fTe(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ySe(e,t,i,r,a,o))}return i=e.child,a<o&&(a=i.memoizedProps,(n=null!==(n=n.compare)?n:Cwe)(a,r)&&e.ref===t.ref)?OSe(e,t,o):(t.effectTag|=1,(e=pTe(i,r)).ref=t.ref,e.return=t,t.child=e)}function ySe(e,t,n,r,a,o){return null!==e&&Cwe(e.memoizedProps,r)&&e.ref===t.ref&&(hSe=!1,a<o)?(t.expirationTime=e.expirationTime,OSe(e,t,o)):xSe(e,t,n,r,o)}function bSe(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function xSe(e,t,n,r,a){var o=eIe(n)?Zwe:Ywe.current;return o=Jwe(t,o),WIe(t,a),n=OCe(e,t,n,r,o,a),null===e||hSe?(t.effectTag|=1,mSe(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),OSe(e,t,a))}function kSe(e,t,n,r,a){if(eIe(n)){var o=!0;aIe(t)}else o=!1;if(WIe(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),nCe(t,n,r),aCe(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var u=i.context,c=n.contextType;c="object"==Ty(c)&&null!==c?zIe(c):Jwe(t,c=eIe(n)?Zwe:Ywe.current);var l=n.getDerivedStateFromProps,d="function"==typeof l||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==r||u!==c)&&rCe(t,i,r,c),jIe=!1;var p=t.memoizedState;i.state=p,QIe(t,r,i,a),u=t.memoizedState,s!==r||p!==u||$we.current||jIe?("function"==typeof l&&(JIe(t,n,l,r),u=t.memoizedState),(s=jIe||tCe(t,n,s,r,p,u,c))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.effectTag|=4)):("function"==typeof i.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=c,r=s):("function"==typeof i.componentDidMount&&(t.effectTag|=4),r=!1)}else i=t.stateNode,GIe(e,t),s=t.memoizedProps,i.props=t.type===t.elementType?s:FIe(t.type,s),u=i.context,c="object"==Ty(c=n.contextType)&&null!==c?zIe(c):Jwe(t,c=eIe(n)?Zwe:Ywe.current),(d="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==r||u!==c)&&rCe(t,i,r,c),jIe=!1,u=t.memoizedState,i.state=u,QIe(t,r,i,a),p=t.memoizedState,s!==r||u!==p||$we.current||jIe?("function"==typeof l&&(JIe(t,n,l,r),p=t.memoizedState),(l=jIe||tCe(t,n,s,r,u,p,c))?(d||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,c),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,c)),"function"==typeof i.componentDidUpdate&&(t.effectTag|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=c,r=l):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return wSe(e,t,n,r,o,a)}function wSe(e,t,n,r,a,o){bSe(e,t);var i=0!=(64&t.effectTag);if(!r&&!i)return a&&oIe(t,n,!1),OSe(e,t,o);r=t.stateNode,fSe.current=t;var s=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&i?(t.child=cCe(t,e.child,null,o),t.child=cCe(t,null,s,o)):mSe(e,t,s,o),t.memoizedState=r.state,a&&oIe(t,n,!0),t.child}function ISe(e){var t=e.stateNode;t.pendingContext?nIe(0,t.pendingContext,t.pendingContext!==t.context):t.context&&nIe(0,t.context,!1),gCe(e,t.containerInfo)}var CSe,SSe,ESe,TSe={dehydrated:null,retryTime:0};function NSe(e,t,n){var r,a=t.mode,o=t.pendingProps,i=xCe.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&i)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(i|=1),Xwe(xCe,1&i),null===e){if(void 0!==o.fallback&&cSe(t),s){if(s=o.fallback,(o=hTe(null,a,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=hTe(s,a,n,null)).return=t,o.sibling=n,t.memoizedState=TSe,t.child=o,n}return a=o.children,t.memoizedState=null,t.child=lCe(t,null,a,n)}if(null!==e.memoizedState){if(a=(e=e.child).sibling,s){if(o=o.fallback,(n=pTe(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(a=pTe(a,o)).return=t,n.sibling=a,n.childExpirationTime=0,t.memoizedState=TSe,t.child=n,a}return n=cCe(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=hTe(null,a,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=hTe(s,a,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=TSe,t.child=o,n}return t.memoizedState=null,t.child=cCe(t,e,o.children,n)}function ASe(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),VIe(e.return,t)}function _Se(e,t,n,r,a,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:a,lastEffect:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailExpiration=0,i.tailMode=a,i.lastEffect=o)}function RSe(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(mSe(e,t,r.children,n),0!=(2&(r=xCe.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ASe(e,n);else if(19===e.tag)ASe(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Xwe(xCe,r),0==(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===kCe(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),_Se(t,!1,a,n,o,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===kCe(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}_Se(t,!0,n,null,o,t.lastEffect);break;case"together":_Se(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function OSe(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&qEe(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(Hve(153));if(null!==t.child){for(n=pTe(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=pTe(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function FSe(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function MSe(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return eIe(t.type)&&tIe(),null;case 3:return vCe(),Kwe($we),Kwe(Ywe),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!dSe(t)||(t.effectTag|=4),null;case 5:bCe(t),n=mCe(hCe.current);var a=t.type;if(null!==e&&null!=t.stateNode)SSe(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(Hve(166));return null}if(e=mCe(pCe.current),dSe(t)){r=t.stateNode,a=t.type;var o=t.memoizedProps;switch(r[cke]=t,r[lke]=o,a){case"iframe":case"object":case"embed":Oxe("load",r);break;case"video":case"audio":for(e=0;e<Dbe.length;e++)Oxe(Dbe[e],r);break;case"source":Oxe("error",r);break;case"img":case"image":case"link":Oxe("error",r),Oxe("load",r);break;case"form":Oxe("reset",r),Oxe("submit",r);break;case"details":Oxe("toggle",r);break;case"input":sbe(r,o),Oxe("invalid",r),qxe(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Oxe("invalid",r),qxe(n,"onChange");break;case"textarea":mbe(r,o),Oxe("invalid",r),qxe(n,"onChange")}for(var i in jxe(a,o),e=null,o)if(o.hasOwnProperty(i)){var s=o[i];"children"===i?"string"==typeof s?r.textContent!==s&&(e=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(e=["children",""+s]):uye.hasOwnProperty(i)&&null!=s&&qxe(n,i)}switch(a){case"input":abe(r),lbe(r,o,!0);break;case"textarea":abe(r),vbe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Kxe)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(i=9===n.nodeType?n:n.ownerDocument,e===Gxe&&(e=xbe(a)),e===Gxe?"script"===a?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=i.createElement(a,{is:r.is}):(e=i.createElement(a),"select"===a&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,a),e[cke]=t,e[lke]=r,CSe(e,t),t.stateNode=e,i=Hxe(a,r),a){case"iframe":case"object":case"embed":Oxe("load",e),s=r;break;case"video":case"audio":for(s=0;s<Dbe.length;s++)Oxe(Dbe[s],e);s=r;break;case"source":Oxe("error",e),s=r;break;case"img":case"image":case"link":Oxe("error",e),Oxe("load",e),s=r;break;case"form":Oxe("reset",e),Oxe("submit",e),s=r;break;case"details":Oxe("toggle",e),s=r;break;case"input":sbe(e,r),s=ibe(e,r),Oxe("invalid",e),qxe(n,"onChange");break;case"option":s=pbe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Wve({},r,{value:void 0}),Oxe("invalid",e),qxe(n,"onChange");break;case"textarea":mbe(e,r),s=hbe(e,r),Oxe("invalid",e),qxe(n,"onChange");break;default:s=r}jxe(a,s);var u=s;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?Wxe(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&Cbe(e,c):"children"===o?"string"==typeof c?("textarea"!==a||""!==c)&&Sbe(e,c):"number"==typeof c&&Sbe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(uye.hasOwnProperty(o)?null!=c&&qxe(n,o):null!=c&&Dye(e,o,c,i))}switch(a){case"input":abe(e),lbe(e,r,!1);break;case"textarea":abe(e),vbe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+nbe(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?fbe(e,!!r.multiple,n,!1):null!=r.defaultValue&&fbe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=Kxe)}nke(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)ESe(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(Hve(166));n=mCe(hCe.current),mCe(pCe.current),dSe(t)?(n=t.stateNode,r=t.memoizedProps,n[cke]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[cke]=t,t.stateNode=n)}return null;case 13:return Kwe(xCe),r=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&dSe(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(o=t.firstEffect)?(t.firstEffect=a,a.nextEffect=o):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&xCe.current)?fEe===iEe&&(fEe=sEe):(fEe!==iEe&&fEe!==sEe||(fEe=uEe),0!==yEe&&null!==lEe&&(bTe(lEe,pEe),xTe(lEe,yEe)))),(n||r)&&(t.effectTag|=4),null);case 4:return vCe(),null;case 10:return UIe(t),null;case 17:return eIe(t.type)&&tIe(),null;case 19:if(Kwe(xCe),null===(r=t.memoizedState))return null;if(a=0!=(64&t.effectTag),null===(o=r.rendering)){if(a)FSe(r,!1);else if(fEe!==iEe||null!==e&&0!=(64&e.effectTag))for(o=t.child;null!==o;){if(null!==(e=kCe(o))){for(t.effectTag|=64,FSe(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)o=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=o,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,o=e.dependencies,a.dependencies=null===o?null:{expirationTime:o.expirationTime,firstContext:o.firstContext,responders:o.responders}),r=r.sibling;return Xwe(xCe,1&xCe.current|2),t.child}o=o.sibling}}else{if(!a)if(null!==(e=kCe(o))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),FSe(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*CIe()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,FSe(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=r.last)?n.sibling=o:t.child=o,r.last=o)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=CIe()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=CIe(),n.sibling=null,t=xCe.current,Xwe(xCe,a?1&t|2:1&t),n):null}throw Error(Hve(156,t.tag))}function DSe(e){switch(e.tag){case 1:eIe(e.type)&&tIe();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(vCe(),Kwe($we),Kwe(Ywe),0!=(64&(t=e.effectTag)))throw Error(Hve(285));return e.effectTag=-4097&t|64,e;case 5:return bCe(e),null;case 13:return Kwe(xCe),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return Kwe(xCe),null;case 4:return vCe(),null;case 10:return UIe(e),null;default:return null}}function BSe(e,t){return{value:e,source:t,stack:tbe(t)}}CSe=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},SSe=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var i,s,u=t.stateNode;switch(mCe(pCe.current),e=null,n){case"input":o=ibe(u,o),r=ibe(u,r),e=[];break;case"option":o=pbe(u,o),r=pbe(u,r),e=[];break;case"select":o=Wve({},o,{value:void 0}),r=Wve({},r,{value:void 0}),e=[];break;case"textarea":o=hbe(u,o),r=hbe(u,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(u.onclick=Kxe)}for(i in jxe(n,r),n=null,o)if(!r.hasOwnProperty(i)&&o.hasOwnProperty(i)&&null!=o[i])if("style"===i)for(s in u=o[i])u.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==i&&"children"!==i&&"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(uye.hasOwnProperty(i)?e||(e=[]):(e=e||[]).push(i,null));for(i in r){var c=r[i];if(u=null!=o?o[i]:void 0,r.hasOwnProperty(i)&&c!==u&&(null!=c||null!=u))if("style"===i)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(e||(e=[]),e.push(i,n)),n=c;else"dangerouslySetInnerHTML"===i?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(i,c)):"children"===i?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(i,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&(uye.hasOwnProperty(i)?(null!=c&&qxe(a,i),e||u===c||(e=[])):(e=e||[]).push(i,c))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},ESe=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var PSe="function"==typeof WeakSet?WeakSet:Set;function LSe(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=tbe(n)),null!==n&&ebe(n.type),t=t.value,null!==e&&1===e.tag&&ebe(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function USe(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){aTe(e,t)}else t.current=null}function VSe(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:FIe(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(Hve(163))}function WSe(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function zSe(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function jSe(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void zSe(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:FIe(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&YIe(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}YIe(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&nke(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&kxe(n)))));case 19:case 17:case 20:case 21:return}throw Error(Hve(163))}function HSe(e,t,n){switch("function"==typeof uTe&&uTe(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;TIe(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var a=t;try{n()}catch(e){aTe(a,e)}}e=e.next}while(e!==r)}))}break;case 1:USe(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){aTe(e,t)}}(t,n);break;case 5:USe(t);break;case 4:YSe(e,t,n)}}function GSe(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&GSe(t)}function qSe(e){return 5===e.tag||3===e.tag||4===e.tag}function KSe(e){e:{for(var t=e.return;null!==t;){if(qSe(t)){var n=t;break e}t=t.return}throw Error(Hve(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(Hve(161))}16&n.effectTag&&(Sbe(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||qSe(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?XSe(e,n,t):QSe(e,n,t)}function XSe(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Kxe));else if(4!==r&&null!==(e=e.child))for(XSe(e,t,n),e=e.sibling;null!==e;)XSe(e,t,n),e=e.sibling}function QSe(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(QSe(e,t,n),e=e.sibling;null!==e;)QSe(e,t,n),e=e.sibling}function YSe(e,t,n){for(var r,a,o=t,i=!1;;){if(!i){i=o.return;e:for(;;){if(null===i)throw Error(Hve(160));switch(r=i.stateNode,i.tag){case 5:a=!1;break e;case 3:case 4:r=r.containerInfo,a=!0;break e}i=i.return}i=!0}if(5===o.tag||6===o.tag){e:for(var s=e,u=o,c=n,l=u;;)if(HSe(s,l,c),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}a?(s=r,u=o.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,a=!0,o.child.return=o,o=o.child;continue}}else if(HSe(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(i=!1)}o.sibling.return=o.return,o=o.sibling}}function $Se(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void WSe(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,a=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[lke]=r,"input"===e&&"radio"===r.type&&null!=r.name&&ube(n,r),Hxe(e,a),t=Hxe(e,r),a=0;a<o.length;a+=2){var i=o[a],s=o[a+1];"style"===i?Wxe(n,s):"dangerouslySetInnerHTML"===i?Cbe(n,s):"children"===i?Sbe(n,s):Dye(n,i,s,t)}switch(e){case"input":cbe(n,r);break;case"textarea":gbe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?fbe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?fbe(n,!!r.multiple,r.defaultValue,!0):fbe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(Hve(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,kxe(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,xEe=CIe()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,a=null!=(a=e.memoizedProps.style)&&a.hasOwnProperty("display")?a.display:null,o.style.display=Vxe("display",a));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void ZSe(t);case 19:return void ZSe(t);case 17:return}throw Error(Hve(163))}function ZSe(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new PSe),t.forEach((function(t){var r=iTe.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var JSe="function"==typeof WeakMap?WeakMap:Map;function eEe(e,t,n){(n=qIe(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){wEe||(wEe=!0,IEe=r),LSe(e,t)},n}function tEe(e,t,n){(n=qIe(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return LSe(e,t),r(a)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===CEe?CEe=new Set([this]):CEe.add(this),LSe(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var nEe,rEe=Math.ceil,aEe=Mye.ReactCurrentDispatcher,oEe=Mye.ReactCurrentOwner,iEe=0,sEe=3,uEe=4,cEe=0,lEe=null,dEe=null,pEe=0,fEe=iEe,hEe=null,mEe=1073741823,gEe=1073741823,vEe=null,yEe=0,bEe=!1,xEe=0,kEe=null,wEe=!1,IEe=null,CEe=null,SEe=!1,EEe=null,TEe=90,NEe=null,AEe=0,_Ee=null,REe=0;function OEe(){return 0!=(48&cEe)?1073741821-(CIe()/10|0):0!==REe?REe:REe=1073741821-(CIe()/10|0)}function FEe(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=SIe();if(0==(4&t))return 99===r?1073741823:1073741822;if(0!=(16&cEe))return pEe;if(null!==n)e=OIe(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=OIe(e,150,100);break;case 97:case 96:e=OIe(e,5e3,250);break;case 95:e=2;break;default:throw Error(Hve(326))}return null!==lEe&&e===pEe&&--e,e}function MEe(e,t){if(50<AEe)throw AEe=0,_Ee=null,Error(Hve(185));if(null!==(e=DEe(e,t))){var n=SIe();1073741823===t?0!=(8&cEe)&&0==(48&cEe)?UEe(e):(PEe(e),0===cEe&&_Ie()):PEe(e),0==(4&cEe)||98!==n&&99!==n||(null===NEe?NEe=new Map([[e,t]]):(void 0===(n=NEe.get(e))||n>t)&&NEe.set(e,t))}}function DEe(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,a=null;if(null===r&&3===e.tag)a=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){a=r.stateNode;break}r=r.return}return null!==a&&(lEe===a&&(qEe(t),fEe===uEe&&bTe(a,pEe)),xTe(a,t)),a}function BEe(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!yTe(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function PEe(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=AIe(UEe.bind(null,e));else{var t=BEe(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=OEe();if(r=1073741823===t?99:1===t||2===t?95:0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var a=e.callbackPriority;if(e.callbackExpirationTime===t&&a>=r)return;n!==vIe&&uIe(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?AIe(UEe.bind(null,e)):NIe(r,LEe.bind(null,e),{timeout:10*(1073741821-t)-CIe()}),e.callbackNode=t}}}function LEe(e,t){if(REe=0,t)return kTe(e,t=OEe()),PEe(e),null;var n=BEe(e);if(0!==n){if(t=e.callbackNode,0!=(48&cEe))throw Error(Hve(327));if(tTe(),e===lEe&&n===pEe||zEe(e,n),null!==dEe){var r=cEe;cEe|=16;for(var a=HEe();;)try{XEe();break}catch(t){jEe(e,t)}if(LIe(),cEe=r,aEe.current=a,1===fEe)throw t=hEe,zEe(e,n),bTe(e,n),PEe(e),t;if(null===dEe)switch(a=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=fEe,lEe=null,r){case iEe:case 1:throw Error(Hve(345));case 2:kTe(e,2<n?2:n);break;case sEe:if(bTe(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=$Ee(a)),1073741823===mEe&&10<(a=xEe+500-CIe())){if(bEe){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,zEe(e,n);break}}if(0!==(o=BEe(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=ake(ZEe.bind(null,e),a);break}ZEe(e);break;case uEe:if(bTe(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=$Ee(a)),bEe&&(0===(a=e.lastPingedTime)||a>=n)){e.lastPingedTime=n,zEe(e,n);break}if(0!==(a=BEe(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==gEe?r=10*(1073741821-gEe)-CIe():1073741823===mEe?r=0:(r=10*(1073741821-mEe)-5e3,0>(r=(a=CIe())-r)&&(r=0),(n=10*(1073741821-n)-a)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rEe(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=ake(ZEe.bind(null,e),r);break}ZEe(e);break;case 5:if(1073741823!==mEe&&null!==vEe){o=mEe;var i=vEe;if(0>=(r=0|i.busyMinDurationMs)?r=0:(a=0|i.busyDelayMs,r=(o=CIe()-(10*(1073741821-o)-(0|i.timeoutMs||5e3)))<=a?0:a+r-o),10<r){bTe(e,n),e.timeoutHandle=ake(ZEe.bind(null,e),r);break}}ZEe(e);break;default:throw Error(Hve(329))}if(PEe(e),e.callbackNode===t)return LEe.bind(null,e)}}return null}function UEe(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&cEe))throw Error(Hve(327));if(tTe(),e===lEe&&t===pEe||zEe(e,t),null!==dEe){var n=cEe;cEe|=16;for(var r=HEe();;)try{KEe();break}catch(t){jEe(e,t)}if(LIe(),cEe=n,aEe.current=r,1===fEe)throw n=hEe,zEe(e,t),bTe(e,t),PEe(e),n;if(null!==dEe)throw Error(Hve(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,lEe=null,ZEe(e),PEe(e)}return null}function VEe(e,t){var n=cEe;cEe|=1;try{return e(t)}finally{0===(cEe=n)&&_Ie()}}function WEe(e,t){var n=cEe;cEe&=-2,cEe|=8;try{return e(t)}finally{0===(cEe=n)&&_Ie()}}function zEe(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oke(n)),null!==dEe)for(n=dEe.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&tIe();break;case 3:vCe(),Kwe($we),Kwe(Ywe);break;case 5:bCe(r);break;case 4:vCe();break;case 13:case 19:Kwe(xCe);break;case 10:UIe(r)}n=n.return}lEe=e,dEe=pTe(e.current,null),pEe=t,fEe=iEe,hEe=null,gEe=mEe=1073741823,vEe=null,yEe=0,bEe=!1}function jEe(e,t){for(;;){try{if(LIe(),ICe.current=eSe,ACe)for(var n=ECe.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(SCe=0,NCe=TCe=ECe=null,ACe=!1,null===dEe||null===dEe.return)return fEe=1,hEe=t,dEe=null;e:{var a=e,o=dEe.return,i=dEe,s=t;if(t=pEe,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==s&&"object"==Ty(s)&&"function"==typeof s.then){var u=s;if(0==(2&i.mode)){var c=i.alternate;c?(i.updateQueue=c.updateQueue,i.memoizedState=c.memoizedState,i.expirationTime=c.expirationTime):(i.updateQueue=null,i.memoizedState=null)}var l=0!=(1&xCe.current),d=o;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var h=d.memoizedProps;p=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!l)}}if(p){var m=d.updateQueue;if(null===m){var g=new Set;g.add(u),d.updateQueue=g}else m.add(u);if(0==(2&d.mode)){if(d.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var v=qIe(1073741823,null);v.tag=2,KIe(i,v)}i.expirationTime=1073741823;break e}s=void 0,i=t;var y=a.pingCache;if(null===y?(y=a.pingCache=new JSe,s=new Set,y.set(u,s)):void 0===(s=y.get(u))&&(s=new Set,y.set(u,s)),!s.has(i)){s.add(i);var b=oTe.bind(null,a,u,i);u.then(b,b)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);s=Error((ebe(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+tbe(i))}5!==fEe&&(fEe=2),s=BSe(s,i),d=o;do{switch(d.tag){case 3:u=s,d.effectTag|=4096,d.expirationTime=t,XIe(d,eEe(d,u,t));break e;case 1:u=s;var x=d.type,k=d.stateNode;if(0==(64&d.effectTag)&&("function"==typeof x.getDerivedStateFromError||null!==k&&"function"==typeof k.componentDidCatch&&(null===CEe||!CEe.has(k)))){d.effectTag|=4096,d.expirationTime=t,XIe(d,tEe(d,u,t));break e}}d=d.return}while(null!==d)}dEe=YEe(dEe)}catch(e){t=e;continue}break}}function HEe(){var e=aEe.current;return aEe.current=eSe,null===e?eSe:e}function GEe(e,t){e<mEe&&2<e&&(mEe=e),null!==t&&e<gEe&&2<e&&(gEe=e,vEe=t)}function qEe(e){e>yEe&&(yEe=e)}function KEe(){for(;null!==dEe;)dEe=QEe(dEe)}function XEe(){for(;null!==dEe&&!yIe();)dEe=QEe(dEe)}function QEe(e){var t=nEe(e.alternate,e,pEe);return e.memoizedProps=e.pendingProps,null===t&&(t=YEe(e)),oEe.current=null,t}function YEe(e){dEe=e;do{var t=dEe.alternate;if(e=dEe.return,0==(2048&dEe.effectTag)){if(t=MSe(t,dEe,pEe),1===pEe||1!==dEe.childExpirationTime){for(var n=0,r=dEe.child;null!==r;){var a=r.expirationTime,o=r.childExpirationTime;a>n&&(n=a),o>n&&(n=o),r=r.sibling}dEe.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=dEe.firstEffect),null!==dEe.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=dEe.firstEffect),e.lastEffect=dEe.lastEffect),1<dEe.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=dEe:e.firstEffect=dEe,e.lastEffect=dEe))}else{if(null!==(t=DSe(dEe)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=dEe.sibling))return t;dEe=e}while(null!==dEe);return fEe===iEe&&(fEe=5),null}function $Ee(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function ZEe(e){var t=SIe();return TIe(99,JEe.bind(null,e,t)),null}function JEe(e,t){do{tTe()}while(null!==EEe);if(0!=(48&cEe))throw Error(Hve(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(Hve(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var a=$Ee(n);if(e.firstPendingTime=a,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===lEe&&(dEe=lEe=null,pEe=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,a=n.firstEffect):a=n:a=n.firstEffect,null!==a){var o=cEe;cEe|=32,oEe.current=null,eke=Rxe;var i=Zxe();if(Jxe(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{var u=(s=(s=i.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(u&&0!==u.rangeCount){s=u.anchorNode;var c=u.anchorOffset,l=u.focusNode;u=u.focusOffset;try{s.nodeType,l.nodeType}catch(e){s=null;break e}var d=0,p=-1,f=-1,h=0,m=0,g=i,v=null;t:for(;;){for(var y;g!==s||0!==c&&3!==g.nodeType||(p=d+c),g!==l||0!==u&&3!==g.nodeType||(f=d+u),3===g.nodeType&&(d+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===i)break t;if(v===s&&++h===c&&(p=d),v===l&&++m===u&&(f=d),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}s=-1===p||-1===f?null:{start:p,end:f}}else s=null}s=s||{start:0,end:0}}else s=null;tke={activeElementDetached:null,focusedElem:i,selectionRange:s},Rxe=!1,kEe=a;do{try{eTe()}catch(e){if(null===kEe)throw Error(Hve(330));aTe(kEe,e),kEe=kEe.nextEffect}}while(null!==kEe);kEe=a;do{try{for(i=e,s=t;null!==kEe;){var b=kEe.effectTag;if(16&b&&Sbe(kEe.stateNode,""),128&b){var x=kEe.alternate;if(null!==x){var k=x.ref;null!==k&&("function"==typeof k?k(null):k.current=null)}}switch(1038&b){case 2:KSe(kEe),kEe.effectTag&=-3;break;case 6:KSe(kEe),kEe.effectTag&=-3,$Se(kEe.alternate,kEe);break;case 1024:kEe.effectTag&=-1025;break;case 1028:kEe.effectTag&=-1025,$Se(kEe.alternate,kEe);break;case 4:$Se(kEe.alternate,kEe);break;case 8:YSe(i,c=kEe,s),GSe(c)}kEe=kEe.nextEffect}}catch(e){if(null===kEe)throw Error(Hve(330));aTe(kEe,e),kEe=kEe.nextEffect}}while(null!==kEe);if(k=tke,x=Zxe(),b=k.focusedElem,s=k.selectionRange,x!==b&&b&&b.ownerDocument&&$xe(b.ownerDocument.documentElement,b)){null!==s&&Jxe(b)&&(x=s.start,void 0===(k=s.end)&&(k=x),"selectionStart"in b?(b.selectionStart=x,b.selectionEnd=Math.min(k,b.value.length)):(k=(x=b.ownerDocument||document)&&x.defaultView||window).getSelection&&(k=k.getSelection(),c=b.textContent.length,i=Math.min(s.start,c),s=void 0===s.end?i:Math.min(s.end,c),!k.extend&&i>s&&(c=s,s=i,i=c),c=Yxe(b,i),l=Yxe(b,s),c&&l&&(1!==k.rangeCount||k.anchorNode!==c.node||k.anchorOffset!==c.offset||k.focusNode!==l.node||k.focusOffset!==l.offset)&&((x=x.createRange()).setStart(c.node,c.offset),k.removeAllRanges(),i>s?(k.addRange(x),k.extend(l.node,l.offset)):(x.setEnd(l.node,l.offset),k.addRange(x))))),x=[];for(k=b;k=k.parentNode;)1===k.nodeType&&x.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<x.length;b++)(k=x[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Rxe=!!eke,tke=eke=null,e.current=n,kEe=a;do{try{for(b=e;null!==kEe;){var w=kEe.effectTag;if(36&w&&jSe(b,kEe.alternate,kEe),128&w){x=void 0;var I=kEe.ref;if(null!==I){var C=kEe.stateNode;switch(kEe.tag){case 5:x=C;break;default:x=C}"function"==typeof I?I(x):I.current=x}}kEe=kEe.nextEffect}}catch(e){if(null===kEe)throw Error(Hve(330));aTe(kEe,e),kEe=kEe.nextEffect}}while(null!==kEe);kEe=null,bIe(),cEe=o}else e.current=n;if(SEe)SEe=!1,EEe=e,TEe=t;else for(kEe=a;null!==kEe;)t=kEe.nextEffect,kEe.nextEffect=null,kEe=t;if(0===(t=e.firstPendingTime)&&(CEe=null),1073741823===t?e===_Ee?AEe++:(AEe=0,_Ee=e):AEe=0,"function"==typeof sTe&&sTe(n.stateNode,r),PEe(e),wEe)throw wEe=!1,e=IEe,IEe=null,e;return 0!=(8&cEe)||_Ie(),null}function eTe(){for(;null!==kEe;){var e=kEe.effectTag;0!=(256&e)&&VSe(kEe.alternate,kEe),0==(512&e)||SEe||(SEe=!0,NIe(97,(function(){return tTe(),null}))),kEe=kEe.nextEffect}}function tTe(){if(90!==TEe){var e=97<TEe?97:TEe;return TEe=90,TIe(e,nTe)}}function nTe(){if(null===EEe)return!1;var e=EEe;if(EEe=null,0!=(48&cEe))throw Error(Hve(331));var t=cEe;for(cEe|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:WSe(5,n),zSe(5,n)}}catch(t){if(null===e)throw Error(Hve(330));aTe(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return cEe=t,_Ie(),!0}function rTe(e,t,n){KIe(e,t=eEe(e,t=BSe(n,t),1073741823)),null!==(e=DEe(e,1073741823))&&PEe(e)}function aTe(e,t){if(3===e.tag)rTe(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){rTe(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===CEe||!CEe.has(r))){KIe(n,e=tEe(n,e=BSe(t,e),1073741823)),null!==(n=DEe(n,1073741823))&&PEe(n);break}}n=n.return}}function oTe(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),lEe===e&&pEe===n?fEe===uEe||fEe===sEe&&1073741823===mEe&&CIe()-xEe<500?zEe(e,pEe):bEe=!0:yTe(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,PEe(e)))}function iTe(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(t=FEe(t=OEe(),e,null)),null!==(e=DEe(e,t))&&PEe(e)}nEe=function(e,t,n){var r=t.expirationTime;if(null!==e){var a=t.pendingProps;if(e.memoizedProps!==a||$we.current)hSe=!0;else{if(r<n){switch(hSe=!1,t.tag){case 3:ISe(t),pSe();break;case 5:if(yCe(t),4&t.mode&&1!==n&&a.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:eIe(t.type)&&aIe(t);break;case 4:gCe(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,a=t.type._context,Xwe(MIe,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?NSe(e,t,n):(Xwe(xCe,1&xCe.current),null!==(t=OSe(e,t,n))?t.sibling:null);Xwe(xCe,1&xCe.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return RSe(e,t,n);t.effectTag|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null),Xwe(xCe,xCe.current),!r)return null}return OSe(e,t,n)}hSe=!1}}else hSe=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,a=Jwe(t,Ywe.current),WIe(t,n),a=OCe(null,t,r,e,a,n),t.effectTag|=1,"object"==Ty(a)&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,eIe(r)){var o=!0;aIe(t)}else o=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,HIe(t);var i=r.getDerivedStateFromProps;"function"==typeof i&&JIe(t,r,i,e),a.updater=eCe,t.stateNode=a,a._reactInternalFiber=t,aCe(t,r,e,n),t=wSe(null,t,r,!0,o,n)}else t.tag=0,mSe(null,t,a,n),t=t.child;return t;case 16:e:{if(a=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(a),1!==a._status)throw a._result;switch(a=a._result,t.type=a,o=t.tag=function(e){if("function"==typeof e)return dTe(e)?1:0;if(null!=e){if((e=e.$$typeof)===qye)return 11;if(e===Qye)return 14}return 2}(a),e=FIe(a,e),o){case 0:t=xSe(null,t,a,e,n);break e;case 1:t=kSe(null,t,a,e,n);break e;case 11:t=gSe(null,t,a,e,n);break e;case 14:t=vSe(null,t,a,FIe(a.type,e),r,n);break e}throw Error(Hve(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,xSe(e,t,r,a=t.elementType===r?a:FIe(r,a),n);case 1:return r=t.type,a=t.pendingProps,kSe(e,t,r,a=t.elementType===r?a:FIe(r,a),n);case 3:if(ISe(t),r=t.updateQueue,null===e||null===r)throw Error(Hve(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,GIe(e,t),QIe(t,r,null,n),(r=t.memoizedState.element)===a)pSe(),t=OSe(e,t,n);else{if((a=t.stateNode.hydrate)&&(oSe=ike(t.stateNode.containerInfo.firstChild),aSe=t,a=iSe=!0),a)for(n=lCe(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else mSe(e,t,r,n),pSe();t=t.child}return t;case 5:return yCe(t),null===e&&cSe(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,rke(r,a)?i=null:null!==o&&rke(r,o)&&(t.effectTag|=16),bSe(e,t),4&t.mode&&1!==n&&a.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(mSe(e,t,i,n),t=t.child),t;case 6:return null===e&&cSe(t),null;case 13:return NSe(e,t,n);case 4:return gCe(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=cCe(t,null,r,n):mSe(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,gSe(e,t,r,a=t.elementType===r?a:FIe(r,a),n);case 7:return mSe(e,t,t.pendingProps,n),t.child;case 8:case 12:return mSe(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value;var s=t.type._context;if(Xwe(MIe,s._currentValue),s._currentValue=o,null!==i)if(s=i.value,0==(o=wwe(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(i.children===a.children&&!$we.current){t=OSe(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){i=s.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===s.tag&&((c=qIe(n,null)).tag=2,KIe(s,c)),s.expirationTime<n&&(s.expirationTime=n),null!==(c=s.alternate)&&c.expirationTime<n&&(c.expirationTime=n),VIe(s.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else i=10===s.tag&&s.type===t.type?null:s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===t){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}mSe(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(o=t.pendingProps).children,WIe(t,n),r=r(a=zIe(a,o.unstable_observedBits)),t.effectTag|=1,mSe(e,t,r,n),t.child;case 14:return o=FIe(a=t.type,t.pendingProps),vSe(e,t,a,o=FIe(a.type,o),r,n);case 15:return ySe(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:FIe(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,eIe(r)?(e=!0,aIe(t)):e=!1,WIe(t,n),nCe(t,r,a),aCe(t,r,a,n),wSe(null,t,r,!0,e,n);case 19:return RSe(e,t,n)}throw Error(Hve(156,t.tag))};var sTe=null,uTe=null;function cTe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function lTe(e,t,n,r){return new cTe(e,t,n,r)}function dTe(e){return!(!(e=e.prototype)||!e.isReactComponent)}function pTe(e,t){var n=e.alternate;return null===n?((n=lTe(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fTe(e,t,n,r,a,o){var i=2;if(r=e,"function"==typeof e)dTe(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case Vye:return hTe(n.children,a,o,t);case Gye:i=8,a|=7;break;case Wye:i=8,a|=1;break;case zye:return(e=lTe(12,n,t,8|a)).elementType=zye,e.type=zye,e.expirationTime=o,e;case Kye:return(e=lTe(13,n,t,a)).type=Kye,e.elementType=Kye,e.expirationTime=o,e;case Xye:return(e=lTe(19,n,t,a)).elementType=Xye,e.expirationTime=o,e;default:if("object"==Ty(e)&&null!==e)switch(e.$$typeof){case jye:i=10;break e;case Hye:i=9;break e;case qye:i=11;break e;case Qye:i=14;break e;case Yye:i=16,r=null;break e;case $ye:i=22;break e}throw Error(Hve(130,null==e?e:Ty(e),""))}return(t=lTe(i,n,t,a)).elementType=e,t.type=r,t.expirationTime=o,t}function hTe(e,t,n,r){return(e=lTe(7,e,r,t)).expirationTime=n,e}function mTe(e,t,n){return(e=lTe(6,e,null,t)).expirationTime=n,e}function gTe(e,t,n){return(t=lTe(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vTe(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function yTe(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function bTe(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function xTe(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function kTe(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function wTe(e,t,n,r){var a=t.current,o=OEe(),i=$Ie.suspense;o=FEe(o,a,i);e:if(n){t:{if(Lbe(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(Hve(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(eIe(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(Hve(171))}if(1===n.tag){var u=n.type;if(eIe(u)){n=rIe(n,u,s);break e}}n=s}else n=Qwe;return null===t.context?t.context=n:t.pendingContext=n,(t=qIe(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),KIe(a,t),MEe(a,o),o}function ITe(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function CTe(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function STe(e,t){CTe(e,t),(e=e.alternate)&&CTe(e,t)}function ETe(e,t,n){var r=new vTe(e,t,n=null!=n&&!0===n.hydrate),a=lTe(3,null,null,2===t?7:1===t?3:0);r.current=a,a.stateNode=r,HIe(a),e[dke]=r.current,n&&0!==t&&function(e,t){var n=Pbe(t);dxe.forEach((function(e){Jbe(e,t,n)})),pxe.forEach((function(e){Jbe(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function TTe(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function NTe(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o._internalRoot;if("function"==typeof a){var s=a;a=function(){var e=ITe(i);s.call(e)}}wTe(t,i,e,a)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ETe(e,0,t?{hydrate:!0}:void 0)}(n,r),i=o._internalRoot,"function"==typeof a){var u=a;a=function(){var e=ITe(i);u.call(e)}}WEe((function(){wTe(t,i,e,a)}))}return ITe(i)}function ATe(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Uye,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function _Te(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!TTe(t))throw Error(Hve(200));return ATe(e,t,null,n)}ETe.prototype.render=function(e){wTe(e,this._internalRoot,null,null)},ETe.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;wTe(null,e,null,(function(){t[dke]=null}))},exe=function(e){if(13===e.tag){var t=OIe(OEe(),150,100);MEe(e,t),STe(e,t)}},txe=function(e){13===e.tag&&(MEe(e,3),STe(e,3))},nxe=function(e){if(13===e.tag){var t=OEe();MEe(e,t=FEe(t,e,null)),STe(e,t)}},pye=function(e,t,n){switch(t){case"input":if(cbe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=mke(r);if(!a)throw Error(Hve(90));obe(r),cbe(r,a)}}}break;case"textarea":gbe(e,n);break;case"select":null!=(t=n.value)&&fbe(e,!!n.multiple,t,!1)}},yye=VEe,bye=function(e,t,n,r,a){var o=cEe;cEe|=4;try{return TIe(98,e.bind(null,t,n,r,a))}finally{0===(cEe=o)&&_Ie()}},xye=function(){0==(49&cEe)&&(function(){if(null!==NEe){var e=NEe;NEe=null,e.forEach((function(e,t){kTe(t,e),PEe(t)})),_Ie()}}(),tTe())},kye=function(e,t){var n=cEe;cEe|=2;try{return e(t)}finally{0===(cEe=n)&&_Ie()}};var RTe={Events:[fke,hke,mke,lye,sye,wke,function(e){jbe(e,kke)},gye,vye,Bxe,qbe,tTe,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;!function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);sTe=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},uTe=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(Wve({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mye.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Wbe(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:pke,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});var OTe={__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:RTe,createPortal:_Te,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(Hve(188));throw Error(Hve(268,Object.keys(e)))}return null===(e=Wbe(t))?null:e.stateNode},flushSync:function(e,t){if(0!=(48&cEe))throw Error(Hve(187));var n=cEe;cEe|=1;try{return TIe(99,e.bind(null,t))}finally{cEe=n,_Ie()}},hydrate:function(e,t,n){if(!TTe(t))throw Error(Hve(200));return NTe(null,e,t,!0,n)},render:function(e,t,n){if(!TTe(t))throw Error(Hve(200));return NTe(null,e,t,!1,n)},unmountComponentAtNode:function(e){if(!TTe(e))throw Error(Hve(40));return!!e._reactRootContainer&&(WEe((function(){NTe(null,null,e,!1,(function(){e._reactRootContainer=null,e[dke]=null}))})),!0)},unstable_batchedUpdates:VEe,unstable_createPortal:function(e,t){return _Te(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){if(!TTe(n))throw Error(Hve(200));if(null==e||void 0===e._reactInternalFiber)throw Error(Hve(38));return NTe(e,t,n,!1,r)},version:"16.14.0"},FTe=0,MTe={__interactionsRef:null,__subscriberRef:null,unstable_clear:function(e){return e()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++FTe},unstable_subscribe:function(){},unstable_trace:function(e,t,n){return n()},unstable_unsubscribe:function(){},unstable_wrap:function(e){return e}},DTe=(HQ((function(e,t){})),HQ((function(e){e.exports=MTe})),HQ((function(e,t){})),HQ((function(e){!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=OTe}))),BTe=!1,PTe=Tx.createContext(null),LTe="entering",UTe="entered",VTe=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(a="exited",r.appearStatus=LTe):a=UTe:a=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:a},r.nextCallback=null,r}Dve(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==LTe&&n!==UTe&&(t=LTe):n!==LTe&&n!==UTe||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===LTe?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[DTe.findDOMNode(this),r],o=a[0],i=a[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!e&&!n||BTe?this.safeSetState({status:UTe},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,i),this.safeSetState({status:LTe},(function(){t.props.onEntering(o,i),t.onTransitionEnd(u,(function(){t.safeSetState({status:UTe},(function(){t.props.onEntered(o,i)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:DTe.findDOMNode(this);t&&!BTe?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:DTe.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],i=a[1];this.props.addEndListener(o,i)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Mve(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return Tx.createElement(PTe.Provider,{value:null},"function"==typeof n?n(e,r):Tx.cloneElement(Tx.Children.only(n),r))},t}(Tx.Component);function WTe(){}VTe.contextType=PTe,VTe.propTypes={},VTe.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:WTe,onEntering:WTe,onEntered:WTe,onExit:WTe,onExiting:WTe,onExited:WTe},VTe.UNMOUNTED="unmounted",VTe.EXITED="exited",VTe.ENTERING=LTe,VTe.ENTERED=UTe,VTe.EXITING="exiting";var zTe,jTe,HTe=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))},GTe=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=Bve(n.className,r):n.setAttribute("class",Bve(n.className&&n.className.baseVal||"",r)));var n,r}))},qTe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),a=r[0],o=r[1];t.removeClasses(a,"exit"),t.addClass(a,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),a=r[0],o=r[1]?"appear":"enter";t.addClass(a,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),a=r[0],o=r[1]?"appear":"enter";t.removeClasses(a,o),t.addClass(a,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,a=r?(r&&n?n+"-":"")+e:n[e];return{baseClassName:a,activeClassName:r?a+"-active":n[e+"Active"],doneClassName:r?a+"-done":n[e+"Done"]}},t}Dve(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],a=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&a&&(r+=" "+a),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,HTe(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,a=n.active,o=n.done;this.appliedClasses[t]={},r&&GTe(e,r),a&&GTe(e,a),o&&GTe(e,o)},n.render=function(){var e=this.props,t=(e.classNames,Mve(e,["classNames"]));return Tx.createElement(VTe,Fve({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(Tx.Component);qTe.defaultProps={classNames:""},qTe.propTypes={};var KTe="out-in",XTe="in-out",QTe=function(e,t,n){return function(){var r;e.props[t]&&(r=e.props)[t].apply(r,arguments),n()}},YTe=((zTe={})[KTe]=function(e){var t=e.current,n=e.changeState;return Tx.cloneElement(t,{in:!1,onExited:QTe(t,"onExited",(function(){n(LTe,null)}))})},zTe[XTe]=function(e){var t=e.current,n=e.changeState,r=e.children;return[t,Tx.cloneElement(r,{in:!0,onEntered:QTe(r,"onEntered",(function(){n(LTe)}))})]},zTe),$Te=((jTe={})[KTe]=function(e){var t=e.children,n=e.changeState;return Tx.cloneElement(t,{in:!0,onEntered:QTe(t,"onEntered",(function(){n(UTe,Tx.cloneElement(t,{in:!0}))}))})},jTe[XTe]=function(e){var t=e.current,n=e.children,r=e.changeState;return[Tx.cloneElement(t,{in:!1,onExited:QTe(t,"onExited",(function(){r(UTe,Tx.cloneElement(n,{in:!0}))}))}),Tx.cloneElement(n,{in:!0})]},jTe),ZTe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={status:UTe,current:null},t.appeared=!1,t.changeState=function(e,n){void 0===n&&(n=t.state.current),t.setState({status:e,current:n})},t}Dve(t,e);var n=t.prototype;return n.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){return null==e.children?{current:null}:t.status===LTe&&e.mode===XTe?{status:LTe}:!t.current||((n=t.current)===(r=e.children)||Tx.isValidElement(n)&&Tx.isValidElement(r)&&null!=n.key&&n.key===r.key)?{current:Tx.cloneElement(e.children,{in:!0})}:{status:"exiting"};var n,r},n.render=function(){var e,t=this.props,n=t.children,r=t.mode,a=this.state,o=a.status,i=a.current,s={children:n,current:i,changeState:this.changeState,status:o};switch(o){case LTe:e=$Te[r](s);break;case"exiting":e=YTe[r](s);break;case UTe:e=i}return Tx.createElement(PTe.Provider,{value:{isMounting:!this.appeared}},e)},t}(Tx.Component);ZTe.propTypes={},ZTe.defaultProps={mode:KTe};var JTe=_k.IDCardSide,eNe=_k.Errors;function tNe(e){return nNe.apply(this,arguments)}function nNe(){return(nNe=RQ(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.image,r=t.cardType,a=t.cardSide,o=t.apiClient,e.abrupt("return",o.uploadImage({file:n,label:"id_card.".concat(r,".").concat(a)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rNe(e){return aNe.apply(this,arguments)}function aNe(){return(aNe=RQ(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.imageId,r=t.cardType,a=t.apiClient,e.abrupt("return",a.requestVerifyIDCard({card_type:r,image1:{id:n}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oNe(e){return iNe.apply(this,arguments)}function iNe(){return(iNe=RQ(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.apiClient,r=t.cardType,a=t.frontCardId,o=t.isCapturingFrontSide,i=t.backCardId,s=t.recordedVideos,u=s.filter((function(e){return null!==e.id})),c=s.filter((function(e){return null===e.id&&e.frames.length>0})),e.next=5,Promise.all(c.map((function(e){return n.fileService.request({frames:e.frames})})));case 5:return l=e.sent,e.abrupt("return",n.detectIDTampering({card_type:r,image:{id:a},image2:o?void 0:{id:i},videos:[].concat(UQ(u.map((function(e){return{id:e.id}}))),UQ(l.map((function(e){return{id:e.data.file_id}}))))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sNe(e){return uNe.apply(this,arguments)}function uNe(){return(uNe=RQ(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cardType,r=t.apiClient,a=t.frontCardId,o=t.backCardId,i=t.isCapturingFrontSide,e.abrupt("return",r.readIDCard({card_type:n,image1:i?{id:a}:{id:o}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cNe(e){return lNe.apply(this,arguments)}function lNe(){return(lNe=RQ(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,p,f,h,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.image,r=t.frontCardId,a=t.onError,o=t.recordedVideos,i=t.apiClient,s=t.cardType,(u=t.cardSide)!==JTe.BACK||r){e.next=4;break}return a(eNe.missing_front_id_card),e.abrupt("return");case 4:return e.next=6,tNe({image:n,cardType:s,cardSide:u,apiClient:i});case 6:if(!(c=e.sent).errors){e.next=10;break}return a(BQ(BQ({},eNe.upload_error),{},{details:c.errors})),e.abrupt("return");case 10:return l=c.data.image_id,(f=u===JTe.FRONT)?d=l:(d=r,p=l),e.next=15,rNe({imageId:l,cardType:s,apiClient:i});case 15:if(!(h=e.sent).errors){e.next=19;break}return a(BQ(BQ({},eNe.sanity_check_error),{},{details:h.errors})),e.abrupt("return");case 19:return e.next=21,sNe({cardType:s,apiClient:i,frontCardId:d,backCardId:p,isCapturingFrontSide:f});case 21:if(!(m=e.sent).errors){e.next=25;break}return a(BQ(BQ({},eNe.read_id_card_error),{},{details:m.errors})),e.abrupt("return");case 25:return e.next=27,oNe({apiClient:i,cardType:s,frontCardId:d,isCapturingFrontSide:f,backCardId:p,recordedVideos:o});case 27:if(!(g=e.sent).errors){e.next=31;break}return a(BQ(BQ({},eNe.detect_id_tampering_error),{},{details:g.errors})),e.abrupt("return");case 31:return e.abrupt("return",{sanityResult:h.data,tamperingInfo:g.data,cardInfo:m.data});case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dNe=_k.Errors;function pNe(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)}function fNe(e,t){return Math.sqrt(pNe(e,t))}function hNe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canvas,n=e.imgMargin,r=void 0===n?.15:n,a=t.width,o=t.height,i=r;i<1&&(i=parseInt(.5*(o+a)*i,10));var s=a+2*i,u=o+2*i,c=i,l=i,d=document.createElement("canvas");d.width=s,d.height=u;var p=d.getContext("2d");return p.fillStyle="#000000",p.fillRect(0,0,d.width,d.height),p.drawImage(t,0,0,t.width,t.height,c,l,t.width,t.height),{canvas:d,margin:i}}function mNe(e,t){var n=window.cv,r=LQ(t.map((function(e){return e.location})),4),a=r[0],o=r[1],i=r[2],s=r[3],u=fNe(i,s),c=fNe(o,a),l=Math.max(u,c),d=fNe(o,i),p=fNe(a,s),f=Math.max(d,p),h=[a.x,a.y,o.x,o.y,i.x,i.y,s.x,s.y],m=[0,0,l-1,0,l-1,f-1,0,f-1],g=n.imread(e),v=new n.Mat,y=new n.Size(l,f),b=n.matFromArray(4,1,n.CV_32FC2,h),x=n.matFromArray(4,1,n.CV_32FC2,m),k=n.getPerspectiveTransform(b,x);n.warpPerspective(g,v,k,y,n.INTER_LINEAR,n.BORDER_CONSTANT,new n.Scalar);var w=new ImageData(new Uint8ClampedArray(v.data),v.cols,v.rows);return g.delete(),v.delete(),b.delete(),x.delete(),w}function gNe(e,t,n){var r={x:t.x-e.x,y:t.y-e.y},a={x:n.x-e.x,y:n.y-e.y},o=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2)),i=Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2));return 180*Math.acos((r.x*a.x+r.y*a.y)/(o*i))/Math.PI}function vNe(e){var t=e.corners,n=e.width,r=e.height,a=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;t.forEach((function(e){var t=e.location,n=t.x,r=t.y;a=Math.min(a,n),o=Math.min(o,r),i=Math.max(i,n),s=Math.max(s,r)}));var u=.06;return!(a/n<u||o/r<u||(r-s)/r<u||(n-i)/n<u)}function yNe(e){for(var t=e.length,n=0;n<t;n++){var r=(n+t-1)%t,a=(n+1)%t,o=gNe(e[n].location,e[r].location,e[a].location);if(o<70||o>110)return!1}return!0}function bNe(e){return xNe.apply(this,arguments)}function xNe(){return(xNe=RQ(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.blazefaceModel,r=t.predictedIdCardCanvas,a=t.frontSide,o=r.width,i=r.height,s=Math.floor(o/3),u=Math.floor(4*i/5),c=document.createElement("canvas"),l=c.getContext("2d"),c.width=s,c.height=u,l.drawImage(r,0,Math.floor(i/5),s,u,0,0,s,u),e.next=12,zw.getModelPredictions({model:n,sCanvas:c});case 12:if(d=e.sent,p=d.filter((function(e){var t=e.topLeft,n=e.bottomRight,r=LQ(e.probability,1)[0],a=e.landmarks;return!(r<.9||a.length<4||_w.rectAreaRatio({small:{coords:[t,n]},big:{coords:[[0,0],[zw.SIZE,zw.SIZE]]}})<.025)})),f=p.length,!a){e.next=22;break}if(0!==f){e.next=18;break}return e.abrupt("return",dNe.id_detector_error_front_side_no_faces);case 18:if(!(f>1)){e.next=20;break}return e.abrupt("return",dNe.id_detector_error_front_side_multiple_faces);case 20:e.next=24;break;case 22:if(!(f>0)){e.next=24;break}return e.abrupt("return",dNe.id_detector_error_back_side_has_faces);case 24:return e.abrupt("return",null);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kNe=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e},wNe=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=i$(n))==n?n:0),void 0!==t&&(t=(t=i$(t))==t?t:0),kNe(i$(e),t,n)},INe="https://unpkg.com/id-card-model@1.0.2/models/web_model/web_model_uint8/model.json",CNe="https://unpkg.com/id-card-model-testing@1.0.5/libs/opencv.js",SNe={0:"top-left",1:"top-right",2:"bottom-right",3:"bottom-left",4:"cccd.front",5:"passport",6:"cmnd_old.front",7:"cmnd_old.back",8:"cmnd_new.front",9:"cmnd_new.back",10:"cccd_new.front",11:"cccd_new.back"};function ENe(e){var t,n,r,a,o,i=e.card,s=e.corners,u=i.box,c={x:(u[1]+u[3])/2,y:(u[0]+u[2])/2},l=u[2]-u[0],d=u[1]-u[3],p=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=VQ(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=n.next();return i=e.done,e})),e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}(s);try{for(p.s();!(o=p.n()).done;){var f=o.value;switch(f.label){case"top-left":t||(t=f.location);break;case"top-right":n||(n=f.location);break;case"bottom-right":r||(r=f.location);break;case"bottom-left":a||(a=f.location)}}}catch(e){p.e(e)}finally{p.f()}if(![t,n,r,a].every(Boolean))return console.debug("Not qualified, corners missing"),!1;var h={x:(t.x+r.x)/2,y:(t.y+r.y)/2},m={x:(n.x+a.x)/2,y:(n.y+a.y)/2},g=pNe(c,h),v=pNe(c,m);return Math.sqrt(g)>(l+d)/8||Math.sqrt(v)>(l+d)/8?(console.debug("Not qualified, not close enough"),!1):(console.debug("Qualified"),!0)}function TNe(e){return NNe.apply(this,arguments)}function NNe(){return(NNe=RQ(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,nC.loadExternalScript({url:n});case 3:return e.abrupt("return",new Promise((function(e){window.cv.onRuntimeInitialized=e})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ANe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,a,o,i,s;return t=e,(n=[{key:"load",value:(s=RQ(regeneratorRuntime.mark((function e(){var t,n,r,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.opencvUrl,r=void 0===n?CNe:n,a=t.modelUrl,e.next=3,Promise.all([TNe({url:r}),this.loadModel({modelUrl:a})]);case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"loadModel",value:(i=RQ(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.modelUrl,r=void 0===n?INe:n,e.next=3,zG.initTensorFlow();case 3:return e.next=5,K5(r);case 5:this.model=e.sent,a=this.model.inputs,o=this.model.outputs,this.boxesIndex=o.findIndex((function(e){return"Identity_3"===e.name})),this.classesIndex=o.findIndex((function(e){return"Identity_2"===e.name})),this.scoresIndex=o.findIndex((function(e){return"Identity_1"===e.name})),this.inputSize=[a[0].shape[1],a[0].shape[2]];case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"dispose",value:(o=RQ(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.model&&this.model.dispose();case 1:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"predict",value:(a=RQ(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,w,I,C,S,E=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E.length>1&&void 0!==E[1]?E[1]:{},r=n.imgMargin,a=void 0===r?.5:r,o=n.detectThreshold,i=void 0===o?.3:o,s=n.maxNumReturns,u=void 0===s?100:s,c={},l=t.width,d=t.height,c.originalWidth=l,c.originalHeight=d,p=hNe({canvas:t,imgMargin:a}),f=p.canvas,h=p.margin,m=LQ(this.inputSize,2),g=m[0],v=m[1],y=f.width/g,b=f.height/v,(x=document.createElement("canvas")).width=g,x.height=v,x.getContext("2d").drawImage(f,0,0,f.width,f.height,0,0,x.width,x.height),c.canvas=x,c.margin=h,e.next=19,this.detect(x,{detectThreshold:i,maxNumReturns:u});case 19:if(k=e.sent,w={inputImage:c,card:null},I=[],C=[],k.forEach((function(e){var t=LQ(e.box,4),n=t[0],r=t[1],a=t[2],o=t[3];e.clazz<=3?I.push({clazz:e.clazz,label:e.label,score:e.score,location:{x:wNe(Math.floor((o+r)/2*y-h),0,l),y:wNe(Math.floor((n+a)/2*b-h),0,d)},scaledLocation:{x:wNe(Math.floor((o+r)/2),0,x.width),y:wNe(Math.floor((n+a)/2),0,x.height)}}):C.push({label:e.label,score:e.score,box:[wNe(Math.floor(n*b-h),0,d),wNe(Math.floor(r*y-h),0,l),wNe(Math.floor(a*b-h),0,d),wNe(Math.floor(o*y-h),0,l)]})})),I.sort((function(e,t){return t.score-e.score})),C.sort((function(e,t){return t.score-e.score})),!(C.length>0)){e.next=35;break}if(ENe({card:S=C[0],corners:I})){e.next=31;break}return console.debug("Not qualified.",S,I),e.abrupt("return",w);case 31:return I.sort((function(e,t){return e.clazz-t.clazz})),S.corners=I,w.card=S,e.abrupt("return",w);case 35:return e.abrupt("return",w);case 36:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"detect",value:(r=RQ(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,w,I,C=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.length>1&&void 0!==C[1]?C[1]:{},r=n.detectThreshold,a=n.maxNumReturns,o=t.width,i=t.height,s=$0((function(){var e=t;return e instanceof cJ||(e=N0(e)),h2(g0(e,"float32"),0)})),u=this.model.execute(s),s.dispose(),e.next=8,Promise.all([u[this.boxesIndex].array(),u[this.classesIndex].data(),u[this.scoresIndex].data()]);case 8:for(c=e.sent,l=LQ(c,3),d=LQ(l[0],1),p=d[0],f=l[1],h=l[2],m=[],g=Math.min(h.length,a),v=0;v<g;v++)(y=h[v])>r&&(x=f[v],k=null!==(b=SNe[Math.round(x)])&&void 0!==b?b:"NA",w=p[v],I=[w[0]*i,w[3]*o,w[2]*i,w[1]*o],m.push({score:y,clazz:x,box:I,label:k}));return e.abrupt("return",m);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}])&&OQ(t.prototype,n),e}();function _Ne(){return RNe.apply(this,arguments)}function RNe(){return(RNe=RQ(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.opencvUrl,r=t.modelUrl,a=new ANe,e.next=4,Promise.all([o8(),a.load({opencvUrl:n,modelUrl:r})]);case 4:return o=e.sent,i=LQ(o,1),s=i[0],e.abrupt("return",{idCardModel:a,blazefaceModel:s});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ONe=_k.Errors;function FNe(){return(FNe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var MNe="undefined"!=typeof window?Tx.useLayoutEffect:Tx.useEffect,DNe={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},BNe=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],PNe=function(e,t,n,r,a){var o=a.offsetX,i=a.offsetY,s=r?8:0,u=n.split(" "),c=e.top+e.height/2,l=e.left+e.width/2,d=t.height,p=t.width,f=c-d/2,h=l-p/2,m="",g="0%",v="0%";switch(u[0]){case"top":f-=d/2+e.height/2+s,m="rotate(180deg)  translateX(50%)",g="100%",v="50%";break;case"bottom":f+=d/2+e.height/2+s,m="rotate(0deg) translateY(-100%) translateX(-50%)",v="50%";break;case"left":h-=p/2+e.width/2+s,m=" rotate(90deg)  translateY(50%) translateX(-25%)",v="100%",g="50%";break;case"right":h+=p/2+e.width/2+s,m="rotate(-90deg)  translateY(-150%) translateX(25%)",g="50%"}switch(u[1]){case"top":f=e.top,g=e.height/2+"px";break;case"bottom":f=e.top-d+e.height,g=d-e.height/2+"px";break;case"left":h=e.left,v=e.width/2+"px";break;case"right":h=e.left-p+e.width,v=p-e.width/2+"px"}return{top:f="top"===u[0]?f-i:f+i,left:h="left"===u[0]?h-o:h+o,transform:m,arrowLeft:v,arrowTop:g}},LNe=function(e,t,n,r,a,o){var i=a.offsetX,s=a.offsetY,u={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},c=0,l=function(e){var t={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof e){var n=document.querySelector(e);null!==n&&(t=n.getBoundingClientRect())}return t}(o),d=Array.isArray(n)?n:[n];for((o||Array.isArray(n))&&(d=[].concat(d,BNe));c<d.length;){var p={top:(u=PNe(e,t,d[c],r,{offsetX:i,offsetY:s})).top,left:u.left,width:t.width,height:t.height};if(!(p.top<=l.top||p.left<=l.left||p.top+p.height>=l.top+l.height||p.left+p.width>=l.left+l.width))break;c++}return u},UNe=0,VNe=Tx.forwardRef((function(e,t){var n=e.trigger,r=void 0===n?null:n,a=e.onOpen,o=void 0===a?function(){}:a,i=e.onClose,s=void 0===i?function(){}:i,u=e.defaultOpen,c=void 0!==u&&u,l=e.open,d=void 0===l?void 0:l,p=e.disabled,f=void 0!==p&&p,h=e.nested,m=void 0!==h&&h,g=e.closeOnDocumentClick,v=void 0===g||g,y=e.repositionOnResize,b=void 0===y||y,x=e.closeOnEscape,k=void 0===x||x,w=e.on,I=void 0===w?["click"]:w,C=e.contentStyle,S=void 0===C?{}:C,E=e.arrowStyle,T=void 0===E?{}:E,N=e.overlayStyle,A=void 0===N?{}:N,_=e.className,R=void 0===_?"":_,O=e.position,F=void 0===O?"bottom center":O,M=e.modal,D=void 0!==M&&M,B=e.lockScroll,P=void 0!==B&&B,L=e.arrow,U=void 0===L||L,V=e.offsetX,W=void 0===V?0:V,z=e.offsetY,j=void 0===z?0:z,H=e.mouseEnterDelay,G=void 0===H?100:H,q=e.mouseLeaveDelay,K=void 0===q?100:q,X=e.keepTooltipInside,Q=void 0!==X&&X,Y=e.children,$=Tx.useState(d||c),Z=$[0],J=$[1],ee=Tx.useRef(null),te=Tx.useRef(null),ne=Tx.useRef(null),re=Tx.useRef(null),ae=Tx.useRef("popup-"+ ++UNe),oe=!!D||!r,ie=Tx.useRef(0);MNe((function(){return Z?(re.current=document.activeElement,ge(),me(),fe()):he(),function(){clearTimeout(ie.current)}}),[Z]),Tx.useEffect((function(){"boolean"==typeof d&&(d?se():ue())}),[d,f]);var se=function(e){Z||f||(J(!0),setTimeout((function(){return o(e)}),0))},ue=function(e){var t;Z&&!f&&(J(!1),oe&&(null===(t=re.current)||void 0===t||t.focus()),setTimeout((function(){return s(e)}),0))},ce=function(e){null==e||e.stopPropagation(),Z?ue(e):se(e)},le=function(e){clearTimeout(ie.current),ie.current=setTimeout((function(){return se(e)}),G)},de=function(e){null==e||e.preventDefault(),ce()},pe=function(e){clearTimeout(ie.current),ie.current=setTimeout((function(){return ue(e)}),K)},fe=function(){oe&&P&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},he=function(){oe&&P&&(document.getElementsByTagName("body")[0].style.overflow="auto")},me=function(){var e,t=null==te||null===(e=te.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),n=Array.prototype.slice.call(t)[0];null==n||n.focus()};Tx.useImperativeHandle(t,(function(){return{open:function(){se()},close:function(){ue()},toggle:function(){ce()}}}));var ge=function(){if(!oe&&Z&&(null==ee?void 0:ee.current)&&(null==ee?void 0:ee.current)&&(null==te?void 0:te.current)){var e,t,n=ee.current.getBoundingClientRect(),r=te.current.getBoundingClientRect(),a=LNe(n,r,F,U,{offsetX:W,offsetY:j},Q);te.current.style.top=a.top+window.scrollY+"px",te.current.style.left=a.left+window.scrollX+"px",U&&ne.current&&(ne.current.style.transform=a.transform,ne.current.style.setProperty("-ms-transform",a.transform),ne.current.style.setProperty("-webkit-transform",a.transform),ne.current.style.top=(null===(e=T.top)||void 0===e?void 0:e.toString())||a.arrowTop,ne.current.style.left=(null===(t=T.left)||void 0===t?void 0:t.toString())||a.arrowLeft)}};!function(e,t){void 0===t&&(t=!0),Tx.useEffect((function(){if(t){var n=function(t){"Escape"===t.key&&e(t)};return document.addEventListener("keyup",n),function(){t&&document.removeEventListener("keyup",n)}}}),[e,t])}(ue,k),function(e,t){void 0===t&&(t=!0),Tx.useEffect((function(){if(t){var n=function(t){if(9===t.keyCode){var n,r=null==e||null===(n=e.current)||void 0===n?void 0:n.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),a=Array.prototype.slice.call(r);if(1===a.length)return void t.preventDefault();var o=a[0],i=a[a.length-1];t.shiftKey&&document.activeElement===o?(t.preventDefault(),i.focus()):document.activeElement===i&&(t.preventDefault(),o.focus())}};return document.addEventListener("keydown",n),function(){t&&document.removeEventListener("keydown",n)}}}),[e,t])}(te,Z&&oe),function(e,t){void 0===t&&(t=!0),Tx.useEffect((function(){if(t){var n=function(){e()};return window.addEventListener("resize",n),function(){t&&window.removeEventListener("resize",n)}}}),[e,t])}(ge,b),function(e,t,n){void 0===n&&(n=!0),Tx.useEffect((function(){if(n){var r=function(n){var r=Array.isArray(e)?e:[e],a=!1;r.forEach((function(e){e.current&&!e.current.contains(n.target)||(a=!0)})),n.stopPropagation(),a||t(n)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),function(){n&&(document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r))}}}),[e,t,n])}(r?[te,ee]:[te],ue,v&&!m);var ve,ye=function(){return Tx.createElement("div",Object.assign({},(e=oe?DNe.popupContent.modal:DNe.popupContent.tooltip,t={className:"popup-content "+(""!==R?R.split(" ").map((function(e){return e+"-content"})).join(" "):""),style:FNe({},e,S,{pointerEvents:"auto"}),ref:te,onClick:function(e){e.stopPropagation()}},!D&&I.indexOf("hover")>=0&&(t.onMouseEnter=le,t.onMouseLeave=pe),t),{key:"C",role:oe?"dialog":"tooltip",id:ae.current}),U&&!oe&&Tx.createElement("div",{ref:ne,style:DNe.popupArrow},Tx.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==R?R.split(" ").map((function(e){return e+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:FNe({position:"absolute"},T)},Tx.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),Y&&"function"==typeof Y?Y(ue,Z):Y);var e,t},be=!(I.indexOf("hover")>=0),xe=oe?DNe.overlay.modal:DNe.overlay.tooltip,ke=[be&&Tx.createElement("div",{key:"O","data-testid":"overlay","data-popup":oe?"modal":"tooltip",className:"popup-overlay "+(""!==R?R.split(" ").map((function(e){return e+"-overlay"})).join(" "):""),style:FNe({},xe,A,{pointerEvents:v&&m||oe?"auto":"none"}),onClick:v&&m?ue:void 0,tabIndex:-1},oe&&ye()),!oe&&ye()];return Tx.createElement(Tx.Fragment,null,function(){for(var e={key:"T",ref:ee,"aria-describedby":ae.current},t=Array.isArray(I)?I:[I],n=0,a=t.length;n<a;n++)switch(t[n]){case"click":e.onClick=ce;break;case"right-click":e.onContextMenu=de;break;case"hover":e.onMouseEnter=le,e.onMouseLeave=pe;break;case"focus":e.onFocus=le,e.onBlur=pe}if("function"==typeof r){var o=r(Z);return!!r&&Tx.cloneElement(o,e)}return!!r&&Tx.cloneElement(r,e)}(),Z&&DTe.createPortal(ke,(null===(ve=document.getElementById("popup-root"))&&((ve=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(ve)),ve)))}));function WNe(){var e=PQ(["\n  .popup-content {\n    margin: auto;\n    background: #fff;\n    width: 100%;\n    padding: 5px;\n    border: 1px solid #d7d7d7;\n    max-width: 568px;\n    border-radius: 0.25rem;\n  }\n\n  [role=tooltip].popup-content {\n    width: 200px;\n    box-shadow: 0 0 3px rgba(0, 0, 0, .16);\n    border-radius: 5px\n  }\n\n  .popup-overlay {\n    background: rgba(0, 0, 0, .5);\n    padding: 10px;\n  }\n\n  [data-popup=tooltip].popup-overlay {\n    background: transparent\n  }\n\n  .popup-arrow {\n    -webkit-filter: drop-shadow(0 -3px 3px rgba(0, 0, 0, .16));\n    filter: drop-shadow(0 -3px 3px rgba(0, 0, 0, .16));\n    color: #fff;\n    stroke-width: 2px;\n    stroke: #d7d7d7;\n    stroke-dasharray: 30px;\n    stroke-dashoffset: -54px;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0\n  }\n"]);return WNe=function(){return e},e}var zNe=TQ(WNe()),jNe=function(e){var t=e.open,n=e.children;return Tx.createElement(Tx.Fragment,null,Tx.createElement(VNe,{overlayStyle:{zIndex:2e3},closeOnDocumentClick:!1,closeOnEscape:!1,modal:!0,open:t},n),Tx.createElement(zNe,null))};jNe.propTypes={open:Tk.bool,children:Tk.node},jNe.defaultProps={open:!1,children:null};var HNe=NQ(["from{transform:perspective(400px);}to{transform:perspective(400px) rotateY(90deg);}"]),GNe=NQ(["from{transform:perspective(400px) rotateY(-90deg);}to{transform:perspective(400px);}"]),qNe=dQ([".flipY-exit{animation-name:",";animation-duration:","ms;animation-timing-function:ease-in;}.flipY-enter{animation-name:",";animation-duration:","ms;animation-timing-function:ease-out;}"],HNe,500,GNe,500),KNe=Object.freeze({__proto__:null,animationDuration:500,default:qNe}),XNe=NQ(["from,to{transform:translate3d(-","px,0,0);}50%{transform:translate3d(","px,0,0);}"],20,20),QNe=NQ(["from,to{transform:translate3d(0,-","px,0);}50%{transform:translate3d(0,","px,0);}"],20,20),YNe=dQ([".slide-horizontal{animation-name:",";animation-iteration-count:infinite;animation-duration:2000ms;animation-timing-function:linear;}.slide-vertical{animation-name:",";animation-iteration-count:infinite;animation-duration:2000ms;animation-timing-function:linear;}"],XNe,QNe),$Ne=Object.freeze({__proto__:null,default:YNe}),ZNe=NQ(["from,to{opacity:1;}50%{opacity:0;}"]),JNe=dQ([".blink{animation-name:",";animation-iteration-count:infinite;animation-duration:2000ms;animation-timing-function:linear;}"],ZNe),eAe=Object.freeze({__proto__:null,default:JNe});function tAe(){var e=PQ(["\n  ","\n"]);return tAe=function(){return e},e}function nAe(){var e=PQ(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: ","; // must be higher than BASE_Z_INDEX and lower than other layers\n"]);return nAe=function(){return e},e}var rAe=SQ.div(nAe(),1001),aAe=NQ(["from{background:#000;}to{}"]),oAe=dQ([".splash-enter{animation-name:",";animation-duration:","ms;animation-timing-function:ease-in;}"],aAe,300),iAe=SQ.div(tAe(),oAe),sAe=function(e){var t=e.keyForTransition,n=void 0===t?0:t;return Tx.createElement(iAe,null,Tx.createElement(ZTe,null,Tx.createElement(qTe,{key:n,timeout:{enter:300,exit:0},classNames:"splash",unmountOnExit:!1},Tx.createElement(rAe,null))))},uAe=Object.freeze({__proto__:null,default:sAe}),cAe=NQ(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),lAe=dQ([".spin{animation-name:",";animation-iteration-count:infinite;animation-duration:1000ms;animation-timing-function:linear;}"],cAe),dAe=Object.freeze({__proto__:null,default:lAe}),pAe=Object.freeze({__proto__:null,flipY:KNe,slide:$Ne,blink:eAe,splash:uAe,spin:dAe});function fAe(e){var t=e.className,n=e.width,r=e.height;return Tx.createElement("svg",{width:n,height:r,className:t},Tx.createElement("rect",{x:3,y:3,rx:10,ry:10,width:n-6,height:r-6,style:{fill:"rgba(234,50,35, 0.1)",strokeWidth:3,stroke:"#ea3223"}}))}function hAe(){var e=PQ(["\n  position: absolute;\n  top: 0;\n  left: 0;\n"]);return hAe=function(){return e},e}function mAe(){var e=PQ(["\n  font-size: 18px;\n  text-align: center;\n  padding: 10px;\n"]);return mAe=function(){return e},e}function gAe(){var e=PQ(["\n  position: absolute;\n  font-size: 18px;\n  text-align: center;\n  border-radius: 3px;\n  padding: 5px 10px;\n  background: #ea3223;\n  color: #fff;\n  margin: 0 10px;\n  top: ",";\n  z-index: ",";\n"]);return gAe=function(){return e},e}function vAe(){var e=PQ(["\n  background: #ea3223;\n  padding: 5px 10px;\n  border-radius: 3px;\n"]);return vAe=function(){return e},e}function yAe(){var e=PQ(["\n  position: absolute;\n  font-size: 16px;\n  text-align: center;\n  color: #fff;\n  top: ",";\n  z-index: ",";\n"]);return yAe=function(){return e},e}function bAe(){var e=PQ(["\n  font-size: 20px;\n  margin-left: 10px;\n  color: green;\n  position: absolute;\n  left: 0;\n  top: 10px;\n  background: white;\n  z-index: ",";\n"]);return bAe=function(){return e},e}function xAe(){var e=PQ(["\n  font-size: 20px;\n  margin-left: 10px;\n  color: #fff;\n"]);return xAe=function(){return e},e}function kAe(){var e=PQ(["\n  display: flex;\n  align-items: center;\n"]);return kAe=function(){return e},e}function wAe(){var e=PQ(["\n  transform: translateZ(1000px); // to fix rotating bug on safari\n  transform-style: preserve-3d;\n  position: absolute;\n  top: ",";\n  z-index: ",";\n"]);return wAe=function(){return e},e}function IAe(){var e=PQ(["\n  color: #fff;\n  text-align: center;\n"]);return IAe=function(){return e},e}function CAe(){var e=PQ(["\n  cursor: pointer;\n  text-align: center;\n  width: ","px;\n\n  img {\n    width: 100%;\n  }\n\n  z-index: ",";\n  position: fixed;\n  bottom: ","px;\n"]);return CAe=function(){return e},e}function SAe(){var e=PQ(["\n  border-radius: 5px;\n  opacity: 0.7;\n  height: 38px;\n"]);return SAe=function(){return e},e}function EAe(){var e=PQ(["\n  ","\n  ","\n"]);return EAe=function(){return e},e}fAe.propTypes={className:Tk.string,width:Tk.number,height:Tk.number},fAe.defaultProps={className:"",width:300,height:200};var TAe=sAe,NAe=SQ.div(EAe(),qNe,lAe),AAe=SQ.img(SAe()),_Ae=SQ.div(CAe(),60,1020,10),RAe=SQ.div(IAe()),OAe=SQ.div(wAe(),(function(e){return e.y}),1020),FAe=SQ.div(kAe()),MAe=SQ(RAe)(xAe()),DAe=SQ(RAe)(bAe(),1030),BAe=SQ(RAe)(yAe(),(function(e){return e.y}),1020),PAe=SQ(BAe)(vAe()),LAe=SQ(RAe)(gAe(),(function(e){return e.y}),1020),UAe=SQ.div(mAe()),VAe=SQ(fAe)(hAe()),WAe={BTN_OK:{en:"OK",vi:"Tôi đã hiểu"},FRONT:{en:"front",vi:"trước"},BACK:{en:"back",vi:"sau"}},zAe={WARMUP_INTRO:{en:"Warming up... Please wait a moment",vi:"Đang khởi động, vui lòng chờ trong giây lát..."}};function jAe(){var e=PQ(["\n  margin-top: 20px;\n  width: 100%;\n  max-width: 160px;\n  height: 50px;\n  background-color: #007bff;\n  border: 0;\n  outline: none;\n  border-radius: 0.25rem;\n  color: #fff;\n  font-weight: 400;\n  cursor: pointer;\n  font-size: 1rem;\n"]);return jAe=function(){return e},e}function HAe(){var e=PQ(["\n  text-align: center;\n  font-size: 1rem;\n"]);return HAe=function(){return e},e}function GAe(){var e=PQ(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding: 10px;\n"]);return GAe=function(){return e},e}var qAe=_k.IDCardMessage,KAe=SQ.div(GAe()),XAe=SQ.div(HAe()),QAe=SQ.button(jAe()),YAe=function(e){var t=e.onOk,n=e.maxSessionTime,r=Mk.useSDKSettings().lang;return Tx.createElement(KAe,null,Tx.createElement(XAe,{className:"popup-message"},Rme(qAe.TIMEOUT_INSTRUCTION[r])({x:n})),Tx.createElement(QAe,{className:"popup-button",onClick:t},WAe.BTN_OK[r]))};YAe.propTypes={onOk:Tk.func,maxSessionTime:Tk.number},YAe.defaultProps={onOk:function(){},maxSessionTime:30};var $Ae=_k.IDCardMessage,ZAe=_k.IDCardSide,JAe=_k.IDCardType,e_e=_k.Errors;function t_e(e){var t=e.frontCamera,n=e.title,r=e.description,a=e.onClose,o=e.usePortraitMask,i=e.onError,s=e.cardType,u=e.cardSide,c=e.apiCheck,l=e.onSuccess,d=e.frontCardId,p=e.enableRecording,f=e.onApiCheck,h=e.resultWarmup,m=LQ(Tx.useState(0),2),g=m[0],v=m[1],y=u===ZAe.FRONT,b=e.titleIcon||(y?"id_card_front.svg":"id_card_back.svg"),x=Pk.useAsset(b),k=LQ(Tx.useState({}),2),w=k[0],I=k[1],C=w.yTitle,S=w.yDescription,E=w.yMessage,T=Pk.useAsset("ic_camera.svg"),N=LQ(Tx.useState(""),2),A=N[0],_=N[1],R=Mk.useSDKSettings(),O=R.apiClient,F=R.debug,M=R.lang,D=Tx.useRef(null),B=LQ(Tx.useState(null),2),P=B[0],L=B[1],U=LQ(Tx.useState(!1),2),V=U[0],W=U[1],z=LQ(Tx.useState(null),2),j=z[0],H=z[1],G=LQ(Tx.useState(!1),2),q=G[0],K=G[1],X=LQ(Tx.useState(!1),2),Q=X[0],Y=X[1],$=LQ(Tx.useState(""),2),Z=$[0],J=$[1],ee=LQ(Tx.useState(null),2),te=ee[0],ne=ee[1],re=Tx.useCallback((function(e){J(null===e?"":Rme(e.msg[M])({side:y?WAe.FRONT[M]:WAe.BACK[M]}))}),[M,y]),ae=function(e){var t=e.resultWarmup,n=e.refVideo,r=e.videoPlayed,a=e.cropArea,o=e.apiSettings,i=e.onError,s=e.frontSide,u=Tx.useRef(null),c=Tx.useRef(!1),l=Tx.useRef(null),d=Tx.useRef(null),p=Tx.useRef(null),f=LQ(Tx.useState(!1),2),h=f[0],m=f[1];Tx.useEffect((function(){function e(){return(e=RQ(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=9;break}if(n=t){e.next=6;break}return e.next=5,_Ne();case 5:n=e.sent;case 6:d.current=n.idCardModel,p.current=n.blazefaceModel,m(!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,h]);var g=Tx.useCallback((function(){!0===c.current&&(c.current=!1)}),[]),v=Tx.useCallback(RQ(regeneratorRuntime.mark((function e(){var t,r,a,f,m,g,v,y,b,x,k,w,I,C,S,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&h){e.next=2;break}return e.abrupt("return");case 2:t=d.current,r=p.current,a=l.current,f=n.current,c.current=!0,m=u.current,g=m.getContext("2d"),v=a.cropX,y=a.cropY,b=a.cropWidth,x=a.cropHeight,k=document.createElement("canvas"),w=k.getContext("2d");case 12:return g.drawImage(f,v,y,b,x,0,0,b,x),I=null,e.next=17,t.predict(m,{detectThreshold:.3});case 17:if(C=e.sent,console.log("result",C),!C.card){e.next=55;break}if(!vNe({corners:C.card.corners,width:b,height:x})){e.next=52;break}if(!yNe(C.card.corners)){e.next=49;break}if(S=mNe(m,C.card.corners),!((E=_w.rectAreaRatio({small:{area:S.width*S.height},big:{area:b*x}}))<.5)){e.next=30;break}I=ONe.id_detector_card_too_small,e.next=47;break;case 30:if(!(E>.8)){e.next=34;break}I=ONe.id_detector_error_incomplete,e.next=47;break;case 34:return k.width=S.width,k.height=S.height,w.putImageData(S,0,0),e.next=39,JI.isCardGlare(k);case 39:if(!e.sent){e.next=44;break}I=ONe.glare_detected,e.next=47;break;case 44:return e.next=46,bNe({blazefaceModel:r,predictedIdCardCanvas:k,frontSide:s});case 46:I=e.sent;case 47:e.next=50;break;case 49:I=ONe.id_detector_validate_angle_error;case 50:e.next=53;break;case 52:I=ONe.id_detector_error_incomplete;case 53:e.next=56;break;case 55:I=ONe.id_detector_no_cards;case 56:if(i(I),c.current){e.next=59;break}return e.abrupt("break",63);case 59:return e.next=61,Lk.sleep(15);case 61:e.next=12;break;case 63:case"end":return e.stop()}}),e)}))),[n,o,h,s,i]);return Tx.useEffect((function(){var e=n.current;function t(){return(t=RQ(regeneratorRuntime.mark((function t(){var n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Iw.analyzeVideoAndWindowSizes(e,a),r=n.cropWidth,o=n.cropHeight,l.current=n,(i=document.createElement("canvas")).width=r,i.height=o,u.current=i,t.next=9,v();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r&&a&&h&&function(){t.apply(this,arguments)}(),function(){g()}}),[r,a,n,g,v,h]),{refWorkingCanvas:u,stopCheckFrame:g,checkFrame:v,warmupDone:h}}({resultWarmup:h,refVideo:D,videoPlayed:V,cropArea:j,apiSettings:te,onError:re,frontSide:y}),oe=ae.refWorkingCanvas,ie=ae.stopCheckFrame,se=ae.checkFrame,ue=ae.warmupDone,ce=function(e){var t=e.refVideo,n=e.videoPlayed,r=e.cropArea,a=e.apiSettings,o=Tx.useRef(null),i=Tx.useRef(!1),s=Tx.useRef([{id:null,frames:[]}]),u=Tx.useRef(YI.createResizer({width:960,height:640})),c=Tx.useRef(null),l=Tx.useCallback((function(){!0===i.current&&(i.current=!1)}),[]),d=Tx.useCallback((function(){s.current=[{id:null,frames:[]}]}),[]),p=Tx.useCallback((function(){var e=s.current;e[e.length-1].frames.length>0&&e.push({id:null,frames:[]})}),[]),f=Tx.useCallback(function(){var e=RQ(regeneratorRuntime.mark((function e(t){var n,r,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.workingCanvas,r=u.current,o=s.current,i=r.resize({srcCanvas:n}),c=i.toDataURL("image/jpeg",a.saveFrameQuality/100).split(",")[1],o[o.length-1].frames.push({base64:c});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]),h=Tx.useCallback(RQ(regeneratorRuntime.mark((function e(){var n,r,s,u,l,d,p,h,m,g,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:if(n=a.frameCaptureIntervalMs,a.enableRecording){e.next=5;break}return e.abrupt("return");case 5:r=c.current,s=t.current,i.current=!0,u=o.current,l=u.getContext("2d"),d=r.cropX,p=r.cropY,h=r.cropWidth,m=r.cropHeight,g=null;case 12:if(l.drawImage(s,d,p,h,m,0,0,h,m),!n){e.next=23;break}if(!((v=(new Date).getTime())-g>=n)){e.next=21;break}return e.next=20,f({workingCanvas:u});case 20:g=v;case 21:e.next=25;break;case 23:return e.next=25,f({workingCanvas:u});case 25:if(i.current){e.next=27;break}return e.abrupt("break",31);case 27:return e.next=29,Lk.sleep(15);case 29:e.next=12;break;case 31:case"end":return e.stop()}}),e)}))),[t,f,a]);return Tx.useEffect((function(){var e=t.current;function a(){return(a=RQ(regeneratorRuntime.mark((function t(){var n,a,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Iw.analyzeVideoAndWindowSizes(e,r),a=n.cropWidth,i=n.cropHeight,c.current=n,(s=document.createElement("canvas")).width=a,s.height=i,o.current=s,t.next=9,h();case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return n&&r&&function(){a.apply(this,arguments)}(),function(){l()}}),[n,r,t,l,p,h]),{refWorkingCanvas:o,stopCheckFrame:l,refRecordedVideos:s,splitVideos:p,resetRecordedVideos:d,checkFrame:h}}({refVideo:D,videoPlayed:V,cropArea:j,apiSettings:te}),le=ce.stopCheckFrame,de=ce.refRecordedVideos,pe=ce.splitVideos,fe=ce.resetRecordedVideos,he=ce.checkFrame;Tx.useEffect((function(){function e(){return(e=RQ(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},!c){e.next=5;break}return e.next=4,O.clientSettings();case 4:t=e.sent;case 5:n=yge(t,"data.settings.sdk_settings.id_detection_settings.save_frame_settings.enable",p),r=yge(t,"data.settings.sdk_settings.id_detection_settings.save_frame_settings.frames_interval_ms",190),a=yge(t,"data.settings.sdk_settings.id_detection_settings.save_frame_settings.quality_web",80),o=yge(t,"data.settings.sdk_settings.id_detection_settings.limit_time_settings.enable",!0),i=yge(t,"data.settings.sdk_settings.id_detection_settings.limit_time_settings.limit_time_second",30),s=yge(t,"data.settings.sdk_settings.id_detection_settings.limit_time_settings.video_partial_length_seconds",15),ne({enableRecording:n,frameCaptureIntervalMs:r,sessionTime:i,maxRecordingTimePerVideo:s,saveFrameQuality:a,enableTimers:o});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[O,c,p]),function(e){var t=e.debug,n=e.refRecordedVideos,r=e.refWorkingCanvas,a=e.refVideo,o=e.onChange;Tx.useEffect((function(){var e;return t&&(e=setInterval((function(){var e=a.current,t=n.current,i=r.current,s=t[t.length-1],u={videoWidth:e.videoWidth,videoHeight:e.videoHeight,framesCount:s.frames.length,"window.innerWidth":window.innerWidth,"window.innerHeight":window.innerHeight,"canvas.width":null==i?void 0:i.width,"canvas.height":null==i?void 0:i.height};o(JSON.stringify(u,null,2))}),1e3)),function(){return clearInterval(e)}}),[o,t,n,r,a])}({debug:F,refRecordedVideos:de,refWorkingCanvas:oe,refVideo:D,onChange:_});var me=Pk.useAsset("id_card_mask_landscape.png"),ge=Pk.useAsset("id_card_mask_portrait.png"),ve=Pk.useAsset("ic_loading.png"),ye=Tx.useCallback((function(){le(),ie(),fe(),L(""),Y(!0)}),[fe,le,ie]),be=Tx.useCallback((function(){pe()}),[pe]),xe=Tx.useCallback((function(e){var t=e.curTimeLeft;L(Rme($Ae.REMAINING_TIME[M])({x:t}))}),[M]),ke=function(e){var t=e.videoPlayed,n=e.lang,r=e.onAboutToTimeout,a=e.onSessionTimeout,o=e.onVideoTimeLimitReached,i=e.apiSettings,s=e.warmupDone,u=Tx.useRef(),c=LQ(Tx.useState(0),2),l=c[0],d=c[1],p=Tx.useCallback((function(){clearInterval(u.current)}),[]),f=Tx.useCallback((function(){d((function(e){return e+1}))}),[]);return Tx.useEffect((function(){if(s&&t&&null!=i&&i.enableTimers){var e=i.sessionTime,n=i.maxRecordingTimePerVideo,c=0,l=e/3;u.current=setInterval((function(){var t=e-(c+=1);t<=l&&r({curTimeLeft:t}),c>0&&c%n==0&&o(),0===t&&(p(),a())}),1e3)}return function(){p()}}),[t,n,r,p,a,o,l,i,s]),{stopTimers:p,startTimers:f}}({videoPlayed:V,lang:M,onAboutToTimeout:xe,apiClient:O,apiCheck:c,onSessionTimeout:ye,onVideoTimeLimitReached:be,apiSettings:te,warmupDone:ue}),we=ke.stopTimers,Ie=ke.startTimers,Ce=Tx.useCallback(RQ(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!1),Ie(),e.next=4,Promise.all([he(),se()]);case 4:case"end":return e.stop()}}),e)}))),[he,se,Ie]),Se=Tx.useCallback((function(e){var t,n,r,a,i,s,u=e.videoAreaWidth,c=e.videoAreaHeight,l=e.lostX,d=e.lostY,p=e.clientHeight;o?(a=.7*(i=c-150),n=(s=(t=d+10)+45)+i+10,r=s+20):(a=qQ.isMobile?u-6:Math.floor(.7*u),n=(s=(t=d+10)+50)+(i=Math.floor(Math.min(a/1.5,p-2*d-80-100)))+10,r=s+20);var f=Math.floor((u-a)/2)+l;H({x:f,y:s,width:a,height:i,image:o?ge:me,surroundStyle:{opacity:.6,background:"#000"}}),I({yTitle:t,yDescription:n,yMessage:r}),W(!0)}),[ge,me,o]),Ee=Tx.useCallback(RQ(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),le(),ie(),we(),L(""),v((function(e){return e+1})),e.next=8,Iw.takePicture({canvas:oe.current});case 8:if(t=e.sent,n={image:t,recordedVideos:null!=te&&te.enableRecording?de.current:[]},!c){e.next=25;break}return r=null,e.prev=12,f(),e.next=16,cNe({image:t,cardSide:u,frontCardId:d,onError:i,apiClient:O,cardType:s,recordedVideos:de.current});case 16:r=e.sent,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),i(BQ(BQ({},e_e.api_call_error),{},{details:e.t0}));case 22:r&&l(BQ(BQ({},n),{},{apiResult:r})),e.next=26;break;case 25:l(n);case 26:K(!1);case 27:case"end":return e.stop()}}),e,null,[[12,19]])}))),[c,O,s,u,d,i,l,f,oe,le,ie,de,we,te]);return Tx.createElement(NAe,null,Tx.createElement(SY,{frontCamera:t,onVideoPlayed:Se,onClose:a,flipHorizontal:t,ref:D,onError:i},!ue&&Tx.createElement(jNe,{open:!0},Tx.createElement(UAe,{className:"warmup-message"},zAe.WARMUP_INTRO[M])),V?Tx.createElement(Tx.Fragment,null,F&&Tx.createElement(DAe,null,A),Tx.createElement(TAe,{keyForTransition:g}),j?Tx.createElement(DY,{x:"".concat(j.x,"px"),y:"".concat(j.y,"px"),width:"".concat(j.width,"px"),height:"".concat(j.height,"px"),surroundStyle:j.surroundStyle},Tx.createElement(BY,{src:j.image,width:j.width}),Z&&Tx.createElement(VAe,{width:j.width,height:j.height})):null,Tx.createElement(OAe,{y:"".concat(C,"px")},Tx.createElement(ZTe,null,Tx.createElement(qTe,{key:n,timeout:{enter:500,exit:500},classNames:"flipY",unmountOnExit:!0},Tx.createElement(FAe,null,Tx.createElement(AAe,{src:x,alt:""}),Tx.createElement(MAe,{className:"title"},n))))),!Z&&Tx.createElement(BAe,{y:"".concat(S,"px"),className:"description"},r),Z&&Tx.createElement(PAe,{y:"".concat(S,"px")},Z),!Z&&Tx.createElement(_Ae,{onClick:q?null:Ee},q?Tx.createElement("img",{src:ve,alt:"",className:"spin"}):Tx.createElement("img",{src:T,alt:""})),P&&Tx.createElement(LAe,{key:P,className:"message",y:"".concat(E,"px")},P)):null),Tx.createElement(jNe,{open:Q},Tx.createElement(YAe,{onOk:Ce,maxSessionTime:null==te?void 0:te.sessionTime})))}t_e.propTypes={frontCamera:Tk.bool,usePortraitMask:Tk.bool,cardType:Tk.string,cardSide:Tk.string,title:Tk.string,titleIcon:Tk.string,description:Tk.string,onClose:Tk.func,apiCheck:Tk.bool,onSuccess:Tk.func,onError:Tk.func,frontCardId:Tk.string,enableRecording:Tk.bool,onApiCheck:Tk.func,resultWarmup:Tk.shape({})},t_e.defaultProps={frontCamera:!0,usePortraitMask:!1,cardType:JAe.VN,cardSide:ZAe.FRONT,title:"",titleIcon:null,description:"",onClose:function(){},apiCheck:!1,onSuccess:function(){},onError:function(){},frontCardId:null,enableRecording:!1,onApiCheck:function(){},resultWarmup:null};var n_e=Object.freeze({__proto__:null,Camera:PY}),r_e="landscape",a_e="portrait",o_e="desktop";function i_e(){var e=PQ(["\n  text-align: center;\n  font-size: 20px;\n  font-weight: 600;\n"]);return i_e=function(){return e},e}var s_e=_k.Errors,u_e=SQ.div(i_e());function c_e(e){var t=MQ({},e),n=Mk.useSDKSettings().lang,r=s_e.wrong_orientation.msg[n],a=function(){var e=Tx.useRef(window.innerWidth>window.innerHeight?r_e:a_e),t=LQ(Tx.useState(e.current),2),n=t[0],r=t[1];return Tx.useEffect((function(){function e(){window.innerWidth>window.innerHeight?r(r_e):r(a_e)}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),qQ.isMobile?{curOrientation:n,initOrientation:e.current}:{curOrientation:o_e}}().curOrientation;return Tx.createElement(Tx.Fragment,null,a===r_e&&Tx.createElement(jNe,{open:!0},Tx.createElement(u_e,null,r)),(a===a_e||a===o_e)&&Tx.createElement(Rve,t))}var l_e=Age,d_e=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(Ove,["useLivenessDetection"]),p_e=i((function(e,t){var n,r,a,o,i;if("undefined"==typeof window||"function"!=typeof MessageChannel){var s=null,u=null,c=function(){if(null!==s)try{var e=t.unstable_now();s(!0,e),s=null}catch(e){throw setTimeout(c,0),e}},l=Date.now();t.unstable_now=function(){return Date.now()-l},n=function(e){null!==s?setTimeout(n,0,e):(s=e,setTimeout(c,0))},r=function(e,t){u=setTimeout(e,t)},a=function(){clearTimeout(u)},o=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,p=window.Date,f=window.setTimeout,h=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof d&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var g=p.now();t.unstable_now=function(){return p.now()-g}}var v=!1,y=null,b=-1,x=5,k=0;o=function(){return t.unstable_now()>=k},i=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):x=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,I=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+x;try{y(!0,e)?I.postMessage(null):(v=!1,y=null)}catch(e){throw I.postMessage(null),e}}else v=!1},n=function(e){y=e,v||(v=!0,I.postMessage(null))},r=function(e,n){b=f((function(){e(t.unstable_now())}),n)},a=function(){h(b),b=-1}}function C(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<T(a,t)))break e;e[r]=t,e[n]=a,n=r}}function S(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var o=2*(r+1)-1,i=e[o],s=o+1,u=e[s];if(void 0!==i&&0>T(i,n))void 0!==u&&0>T(u,i)?(e[r]=u,e[s]=n,r=s):(e[r]=i,e[o]=n,r=o);else{if(!(void 0!==u&&0>T(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var N=[],A=[],_=1,R=null,O=3,F=!1,M=!1,D=!1;function B(e){for(var t=S(A);null!==t;){if(null===t.callback)E(A);else{if(!(t.startTime<=e))break;E(A),t.sortIndex=t.expirationTime,C(N,t)}t=S(A)}}function P(e){if(D=!1,B(e),!M)if(null!==S(N))M=!0,n(L);else{var t=S(A);null!==t&&r(P,t.startTime-e)}}function L(e,n){M=!1,D&&(D=!1,a()),F=!0;var i=O;try{for(B(n),R=S(N);null!==R&&(!(R.expirationTime>n)||e&&!o());){var s=R.callback;if(null!==s){R.callback=null,O=R.priorityLevel;var u=s(R.expirationTime<=n);n=t.unstable_now(),"function"==typeof u?R.callback=u:R===S(N)&&E(N),B(n)}else E(N);R=S(N)}if(null!==R)var c=!0;else{var l=S(A);null!==l&&r(P,l.startTime-n),c=!1}return c}finally{R=null,O=i,F=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){M||F||(M=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return S(N)},t.unstable_next=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},t.unstable_scheduleCallback=function(e,o,i){var s=t.unstable_now();if("object"==typeof i&&null!==i){var u=i.delay;u="number"==typeof u&&0<u?s+u:s,i="number"==typeof i.timeout?i.timeout:U(e)}else i=U(e),u=s;return e={id:_++,callback:o,priorityLevel:e,startTime:u,expirationTime:i=u+i,sortIndex:-1},u>s?(e.sortIndex=u,C(A,e),null===S(N)&&e===S(A)&&(D?a():D=!0,r(P,u-s))):(e.sortIndex=i,C(N,e),M||F||(M=!0,n(L))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();B(e);var n=S(N);return n!==R&&null!==R&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<R.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}}})),f_e=(i((function(e,t){})),i((function(e){e.exports=p_e})));function h_e(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Tx)throw Error(h_e(227));function m_e(e,t,n,r,a,o,i,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var g_e=!1,v_e=null,y_e=!1,b_e=null,x_e={onError:function(e){g_e=!0,v_e=e}};function k_e(e,t,n,r,a,o,i,s,u){g_e=!1,v_e=null,m_e.apply(x_e,arguments)}function w_e(e,t,n,r,a,o,i,s,u){if(k_e.apply(this,arguments),g_e){if(!g_e)throw Error(h_e(198));var c=v_e;g_e=!1,v_e=null,y_e||(y_e=!0,b_e=c)}}var I_e=null,C_e=null,S_e=null;function E_e(e,t,n){var r=e.type||"unknown-event";e.currentTarget=S_e(n),w_e(r,t,void 0,e),e.currentTarget=null}var T_e=null,N_e={};function A_e(){if(T_e)for(var e in N_e){var t=N_e[e],n=T_e.indexOf(e);if(!(-1<n))throw Error(h_e(96,e));if(!R_e[n]){if(!t.extractEvents)throw Error(h_e(97,e));for(var r in R_e[n]=t,n=t.eventTypes){var a=void 0,o=n[r],i=t,s=r;if(O_e.hasOwnProperty(s))throw Error(h_e(99,s));O_e[s]=o;var u=o.phasedRegistrationNames;if(u){for(a in u)u.hasOwnProperty(a)&&__e(u[a],i,s);a=!0}else o.registrationName?(__e(o.registrationName,i,s),a=!0):a=!1;if(!a)throw Error(h_e(98,r,e))}}}}function __e(e,t,n){if(F_e[e])throw Error(h_e(100,e));F_e[e]=t,M_e[e]=t.eventTypes[n].dependencies}var R_e=[],O_e={},F_e={},M_e={};function D_e(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!N_e.hasOwnProperty(t)||N_e[t]!==r){if(N_e[t])throw Error(h_e(102,t));N_e[t]=r,n=!0}}n&&A_e()}var B_e=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),P_e=null,L_e=null,U_e=null;function V_e(e){if(e=C_e(e)){if("function"!=typeof P_e)throw Error(h_e(280));var t=e.stateNode;t&&(t=I_e(t),P_e(e.stateNode,e.type,t))}}function W_e(e){L_e?U_e?U_e.push(e):U_e=[e]:L_e=e}function z_e(){if(L_e){var e=L_e,t=U_e;if(U_e=L_e=null,V_e(e),t)for(e=0;e<t.length;e++)V_e(t[e])}}function j_e(e,t){return e(t)}function H_e(e,t,n,r,a){return e(t,n,r,a)}function G_e(){}var q_e=j_e,K_e=!1,X_e=!1;function Q_e(){null===L_e&&null===U_e||(G_e(),z_e())}function Y_e(e,t,n){if(X_e)return e(t,n);X_e=!0;try{return q_e(e,t,n)}finally{X_e=!1,Q_e()}}var $_e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Z_e=Object.prototype.hasOwnProperty,J_e={},eRe={};function tRe(e){return!!Z_e.call(eRe,e)||!Z_e.call(J_e,e)&&($_e.test(e)?eRe[e]=!0:(J_e[e]=!0,!1))}function nRe(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function rRe(e,t,n,r){if(null==t||nRe(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function aRe(e,t,n,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var oRe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){oRe[e]=new aRe(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];oRe[t]=new aRe(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){oRe[e]=new aRe(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){oRe[e]=new aRe(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){oRe[e]=new aRe(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){oRe[e]=new aRe(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){oRe[e]=new aRe(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){oRe[e]=new aRe(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){oRe[e]=new aRe(e,5,!1,e.toLowerCase(),null,!1)}));var iRe=/[\-:]([a-z])/g;function sRe(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(iRe,sRe);oRe[t]=new aRe(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(iRe,sRe);oRe[t]=new aRe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(iRe,sRe);oRe[t]=new aRe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){oRe[e]=new aRe(e,1,!1,e.toLowerCase(),null,!1)})),oRe.xlinkHref=new aRe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){oRe[e]=new aRe(e,1,!1,e.toLowerCase(),null,!0)}));var uRe=Tx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function cRe(e,t,n,r){var a=oRe.hasOwnProperty(t)?oRe[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(rRe(t,n,a,r)&&(n=null),r||null===a?tRe(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}uRe.hasOwnProperty("ReactCurrentDispatcher")||(uRe.ReactCurrentDispatcher={current:null}),uRe.hasOwnProperty("ReactCurrentBatchConfig")||(uRe.ReactCurrentBatchConfig={suspense:null});var lRe=/^(.*)[\\\/]/,dRe="function"==typeof Symbol&&Symbol.for,pRe=dRe?Symbol.for("react.element"):60103,fRe=dRe?Symbol.for("react.portal"):60106,hRe=dRe?Symbol.for("react.fragment"):60107,mRe=dRe?Symbol.for("react.strict_mode"):60108,gRe=dRe?Symbol.for("react.profiler"):60114,vRe=dRe?Symbol.for("react.provider"):60109,yRe=dRe?Symbol.for("react.context"):60110,bRe=dRe?Symbol.for("react.concurrent_mode"):60111,xRe=dRe?Symbol.for("react.forward_ref"):60112,kRe=dRe?Symbol.for("react.suspense"):60113,wRe=dRe?Symbol.for("react.suspense_list"):60120,IRe=dRe?Symbol.for("react.memo"):60115,CRe=dRe?Symbol.for("react.lazy"):60116,SRe=dRe?Symbol.for("react.block"):60121,ERe="function"==typeof Symbol&&Symbol.iterator;function TRe(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ERe&&e[ERe]||e["@@iterator"])?e:null}function NRe(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}function ARe(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case hRe:return"Fragment";case fRe:return"Portal";case gRe:return"Profiler";case mRe:return"StrictMode";case kRe:return"Suspense";case wRe:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case yRe:return"Context.Consumer";case vRe:return"Context.Provider";case xRe:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case IRe:return ARe(e.type);case SRe:return ARe(e.render);case CRe:if(e=1===e._status?e._result:null)return ARe(e)}return null}function _Re(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,a=e._debugSource,o=ARe(e.type);n=null,r&&(n=ARe(r.type)),r=o,o="",a?o=" (at "+a.fileName.replace(lRe,"")+":"+a.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function RRe(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ORe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function FRe(e){var t=ORe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function MRe(e){e._valueTracker||(e._valueTracker=FRe(e))}function DRe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ORe(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function BRe(e,t){var n=t.checked;return cb({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function PRe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=RRe(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function LRe(e,t){null!=(t=t.checked)&&cRe(e,"checked",t,!1)}function URe(e,t){LRe(e,t);var n=RRe(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?WRe(e,t.type,n):t.hasOwnProperty("defaultValue")&&WRe(e,t.type,RRe(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function VRe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function WRe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function zRe(e){var t="";return Tx.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}function jRe(e,t){return e=cb({children:void 0},t),(t=zRe(t.children))&&(e.children=t),e}function HRe(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+RRe(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function GRe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(h_e(91));return cb({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qRe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(h_e(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(h_e(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:RRe(n)}}function KRe(e,t){var n=RRe(t.value),r=RRe(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function XRe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var QRe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function YRe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $Re(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?YRe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ZRe,JRe=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==QRe.svg||"innerHTML"in e)e.innerHTML=t;else{for((ZRe=ZRe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ZRe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function eOe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function tOe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nOe={animationend:tOe("Animation","AnimationEnd"),animationiteration:tOe("Animation","AnimationIteration"),animationstart:tOe("Animation","AnimationStart"),transitionend:tOe("Transition","TransitionEnd")},rOe={},aOe={};function oOe(e){if(rOe[e])return rOe[e];if(!nOe[e])return e;var t,n=nOe[e];for(t in n)if(n.hasOwnProperty(t)&&t in aOe)return rOe[e]=n[t];return e}B_e&&(aOe=document.createElement("div").style,"AnimationEvent"in window||(delete nOe.animationend.animation,delete nOe.animationiteration.animation,delete nOe.animationstart.animation),"TransitionEvent"in window||delete nOe.transitionend.transition);var iOe=oOe("animationend"),sOe=oOe("animationiteration"),uOe=oOe("animationstart"),cOe=oOe("transitionend"),lOe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dOe=new("function"==typeof WeakMap?WeakMap:Map);function pOe(e){var t=dOe.get(e);return void 0===t&&(t=new Map,dOe.set(e,t)),t}function fOe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function hOe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function mOe(e){if(fOe(e)!==e)throw Error(h_e(188))}function gOe(e){var t=e.alternate;if(!t){if(null===(t=fOe(e)))throw Error(h_e(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return mOe(a),e;if(o===r)return mOe(a),t;o=o.sibling}throw Error(h_e(188))}if(n.return!==r.return)n=a,r=o;else{for(var i=!1,s=a.child;s;){if(s===n){i=!0,n=a,r=o;break}if(s===r){i=!0,r=a,n=o;break}s=s.sibling}if(!i){for(s=o.child;s;){if(s===n){i=!0,n=o,r=a;break}if(s===r){i=!0,r=o,n=a;break}s=s.sibling}if(!i)throw Error(h_e(189))}}if(n.alternate!==r)throw Error(h_e(190))}if(3!==n.tag)throw Error(h_e(188));return n.stateNode.current===n?e:t}function vOe(e){if(!(e=gOe(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function yOe(e,t){if(null==t)throw Error(h_e(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function bOe(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var xOe=null;function kOe(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)E_e(e,t[r],n[r]);else t&&E_e(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function wOe(e){if(null!==e&&(xOe=yOe(xOe,e)),e=xOe,xOe=null,e){if(bOe(e,kOe),xOe)throw Error(h_e(95));if(y_e)throw e=b_e,y_e=!1,b_e=null,e}}function IOe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function COe(e){if(!B_e)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var SOe=[];function EOe(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>SOe.length&&SOe.push(e)}function TOe(e,t,n,r){if(SOe.length){var a=SOe.pop();return a.topLevelType=e,a.eventSystemFlags=r,a.nativeEvent=t,a.targetInst=n,a}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function NOe(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=XFe(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var a=IOe(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,i=e.eventSystemFlags;0===n&&(i|=64);for(var s=null,u=0;u<R_e.length;u++){var c=R_e[u];c&&(c=c.extractEvents(r,t,o,a,i))&&(s=yOe(s,c))}wOe(s)}}function AOe(e,t,n){if(!n.has(e)){switch(e){case"scroll":dFe(t,"scroll",!0);break;case"focus":case"blur":dFe(t,"focus",!0),dFe(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":COe(e)&&dFe(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===lOe.indexOf(e)&&lFe(e,t)}n.set(e,null)}}var _Oe,ROe,OOe,FOe=!1,MOe=[],DOe=null,BOe=null,POe=null,LOe=new Map,UOe=new Map,VOe=[],WOe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),zOe="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function jOe(e,t){var n=pOe(t);WOe.forEach((function(e){AOe(e,t,n)})),zOe.forEach((function(e){AOe(e,t,n)}))}function HOe(e,t,n,r,a){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:a,container:r}}function GOe(e,t){switch(e){case"focus":case"blur":DOe=null;break;case"dragenter":case"dragleave":BOe=null;break;case"mouseover":case"mouseout":POe=null;break;case"pointerover":case"pointerout":LOe.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":UOe.delete(t.pointerId)}}function qOe(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e=HOe(t,n,r,a,o),null!==t&&(null!==(t=QFe(t))&&ROe(t)),e):(e.eventSystemFlags|=r,e)}function KOe(e,t,n,r,a){switch(t){case"focus":return DOe=qOe(DOe,e,t,n,r,a),!0;case"dragenter":return BOe=qOe(BOe,e,t,n,r,a),!0;case"mouseover":return POe=qOe(POe,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return LOe.set(o,qOe(LOe.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,UOe.set(o,qOe(UOe.get(o)||null,e,t,n,r,a)),!0}return!1}function XOe(e){var t=XFe(e.target);if(null!==t){var n=fOe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=hOe(n)))return e.blockedOn=t,void f_e.unstable_runWithPriority(e.priority,(function(){OOe(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function QOe(e){if(null!==e.blockedOn)return!1;var t=mFe(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=QFe(t);return null!==n&&ROe(n),e.blockedOn=t,!1}return!0}function YOe(e,t,n){QOe(e)&&n.delete(t)}function $Oe(){for(FOe=!1;0<MOe.length;){var e=MOe[0];if(null!==e.blockedOn){null!==(e=QFe(e.blockedOn))&&_Oe(e);break}var t=mFe(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:MOe.shift()}null!==DOe&&QOe(DOe)&&(DOe=null),null!==BOe&&QOe(BOe)&&(BOe=null),null!==POe&&QOe(POe)&&(POe=null),LOe.forEach(YOe),UOe.forEach(YOe)}function ZOe(e,t){e.blockedOn===t&&(e.blockedOn=null,FOe||(FOe=!0,f_e.unstable_scheduleCallback(f_e.unstable_NormalPriority,$Oe)))}function JOe(e){function t(t){return ZOe(t,e)}if(0<MOe.length){ZOe(MOe[0],e);for(var n=1;n<MOe.length;n++){var r=MOe[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==DOe&&ZOe(DOe,e),null!==BOe&&ZOe(BOe,e),null!==POe&&ZOe(POe,e),LOe.forEach(t),UOe.forEach(t),n=0;n<VOe.length;n++)(r=VOe[n]).blockedOn===e&&(r.blockedOn=null);for(;0<VOe.length&&null===(n=VOe[0]).blockedOn;)XOe(n),null===n.blockedOn&&VOe.shift()}var eFe={},tFe=new Map,nFe=new Map,rFe=["abort","abort",iOe,"animationEnd",sOe,"animationIteration",uOe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",cOe,"transitionEnd","waiting","waiting"];function aFe(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1],o="on"+(a[0].toUpperCase()+a.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},nFe.set(r,t),tFe.set(r,o),eFe[a]=o}}aFe("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),aFe("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),aFe(rFe,2);for(var oFe="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),iFe=0;iFe<oFe.length;iFe++)nFe.set(oFe[iFe],0);var sFe=f_e.unstable_UserBlockingPriority,uFe=f_e.unstable_runWithPriority,cFe=!0;function lFe(e,t){dFe(t,e,!1)}function dFe(e,t,n){var r=nFe.get(t);switch(void 0===r?2:r){case 0:r=pFe.bind(null,t,1,e);break;case 1:r=fFe.bind(null,t,1,e);break;default:r=hFe.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function pFe(e,t,n,r){K_e||G_e();var a=hFe,o=K_e;K_e=!0;try{H_e(a,e,t,n,r)}finally{(K_e=o)||Q_e()}}function fFe(e,t,n,r){uFe(sFe,hFe.bind(null,e,t,n,r))}function hFe(e,t,n,r){if(cFe)if(0<MOe.length&&-1<WOe.indexOf(e))e=HOe(null,e,t,n,r),MOe.push(e);else{var a=mFe(e,t,n,r);if(null===a)GOe(e,r);else if(-1<WOe.indexOf(e))e=HOe(a,e,t,n,r),MOe.push(e);else if(!KOe(a,e,t,n,r)){GOe(e,r),e=TOe(e,r,null,t);try{Y_e(NOe,e)}finally{EOe(e)}}}}function mFe(e,t,n,r){if(null!==(n=XFe(n=IOe(r)))){var a=fOe(n);if(null===a)n=null;else{var o=a.tag;if(13===o){if(null!==(n=hOe(a)))return n;n=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}e=TOe(e,r,n,t);try{Y_e(NOe,e)}finally{EOe(e)}return null}var gFe={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vFe=["Webkit","ms","Moz","O"];function yFe(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||gFe.hasOwnProperty(e)&&gFe[e]?(""+t).trim():t+"px"}function bFe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=yFe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(gFe).forEach((function(e){vFe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gFe[t]=gFe[e]}))}));var xFe=cb({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kFe(e,t){if(t){if(xFe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(h_e(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(h_e(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(h_e(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(h_e(62,""))}}function wFe(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var IFe=QRe.html;function CFe(e,t){var n=pOe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=M_e[t];for(var r=0;r<t.length;r++)AOe(t[r],e,n)}function SFe(){}function EFe(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function TFe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function NFe(e,t){var n,r=TFe(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=TFe(r)}}function AFe(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?AFe(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function _Fe(){for(var e=window,t=EFe();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=EFe((e=t.contentWindow).document)}return t}function RFe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var OFe="$",FFe="/$",MFe="$?",DFe="$!",BFe=null,PFe=null;function LFe(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function UFe(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var VFe="function"==typeof setTimeout?setTimeout:void 0,WFe="function"==typeof clearTimeout?clearTimeout:void 0;function zFe(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function jFe(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===OFe||n===DFe||n===MFe){if(0===t)return e;t--}else n===FFe&&t++}e=e.previousSibling}return null}var HFe=Math.random().toString(36).slice(2),GFe="__reactInternalInstance$"+HFe,qFe="__reactEventHandlers$"+HFe,KFe="__reactContainere$"+HFe;function XFe(e){var t=e[GFe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[KFe]||n[GFe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=jFe(e);null!==e;){if(n=e[GFe])return n;e=jFe(e)}return t}n=(e=n).parentNode}return null}function QFe(e){return!(e=e[GFe]||e[KFe])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function YFe(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(h_e(33))}function $Fe(e){return e[qFe]||null}function ZFe(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function JFe(e,t){var n=e.stateNode;if(!n)return null;var r=I_e(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(h_e(231,t,typeof n));return n}function eMe(e,t,n){(t=JFe(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=yOe(n._dispatchListeners,t),n._dispatchInstances=yOe(n._dispatchInstances,e))}function tMe(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=ZFe(t);for(t=n.length;0<t--;)eMe(n[t],"captured",e);for(t=0;t<n.length;t++)eMe(n[t],"bubbled",e)}}function nMe(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=JFe(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=yOe(n._dispatchListeners,t),n._dispatchInstances=yOe(n._dispatchInstances,e))}function rMe(e){e&&e.dispatchConfig.registrationName&&nMe(e._targetInst,null,e)}function aMe(e){bOe(e,tMe)}var oMe=null,iMe=null,sMe=null;function uMe(){if(sMe)return sMe;var e,t,n=iMe,r=n.length,a="value"in oMe?oMe.value:oMe.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return sMe=a.slice(e,1<t?1-t:void 0)}function cMe(){return!0}function lMe(){return!1}function dMe(e,t,n,r){for(var a in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(a)&&((t=e[a])?this[a]=t(n):"target"===a?this.target=r:this[a]=n[a]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?cMe:lMe,this.isPropagationStopped=lMe,this}function pMe(e,t,n,r){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,e,t,n,r),a}return new this(e,t,n,r)}function fMe(e){if(!(e instanceof this))throw Error(h_e(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function hMe(e){e.eventPool=[],e.getPooled=pMe,e.release=fMe}cb(dMe.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=cMe)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=cMe)},persist:function(){this.isPersistent=cMe},isPersistent:lMe,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=lMe,this._dispatchInstances=this._dispatchListeners=null}}),dMe.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},dMe.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return cb(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=cb({},r.Interface,e),n.extend=r.extend,hMe(n),n},hMe(dMe);var mMe=dMe.extend({data:null}),gMe=dMe.extend({data:null}),vMe=[9,13,27,32],yMe=B_e&&"CompositionEvent"in window,bMe=null;B_e&&"documentMode"in document&&(bMe=document.documentMode);var xMe=B_e&&"TextEvent"in window&&!bMe,kMe=B_e&&(!yMe||bMe&&8<bMe&&11>=bMe),wMe=String.fromCharCode(32),IMe={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},CMe=!1;function SMe(e,t){switch(e){case"keyup":return-1!==vMe.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function EMe(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var TMe=!1;function NMe(e,t){switch(e){case"compositionend":return EMe(t);case"keypress":return 32!==t.which?null:(CMe=!0,wMe);case"textInput":return(e=t.data)===wMe&&CMe?null:e;default:return null}}function AMe(e,t){if(TMe)return"compositionend"===e||!yMe&&SMe(e,t)?(e=uMe(),sMe=iMe=oMe=null,TMe=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kMe&&"ko"!==t.locale?null:t.data;default:return null}}var _Me={eventTypes:IMe,extractEvents:function(e,t,n,r){var a;if(yMe)e:{switch(e){case"compositionstart":var o=IMe.compositionStart;break e;case"compositionend":o=IMe.compositionEnd;break e;case"compositionupdate":o=IMe.compositionUpdate;break e}o=void 0}else TMe?SMe(e,n)&&(o=IMe.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=IMe.compositionStart);return o?(kMe&&"ko"!==n.locale&&(TMe||o!==IMe.compositionStart?o===IMe.compositionEnd&&TMe&&(a=uMe()):(iMe="value"in(oMe=r)?oMe.value:oMe.textContent,TMe=!0)),o=mMe.getPooled(o,t,n,r),a?o.data=a:null!==(a=EMe(n))&&(o.data=a),aMe(o),a=o):a=null,(e=xMe?NMe(e,n):AMe(e,n))?((t=gMe.getPooled(IMe.beforeInput,t,n,r)).data=e,aMe(t)):t=null,null===a?t:null===t?a:[a,t]}},RMe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OMe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!RMe[e.type]:"textarea"===t}var FMe={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function MMe(e,t,n){return(e=dMe.getPooled(FMe.change,e,t,n)).type="change",W_e(n),aMe(e),e}var DMe=null,BMe=null;function PMe(e){wOe(e)}function LMe(e){if(DRe(YFe(e)))return e}function UMe(e,t){if("change"===e)return t}var VMe=!1;function WMe(){DMe&&(DMe.detachEvent("onpropertychange",zMe),BMe=DMe=null)}function zMe(e){if("value"===e.propertyName&&LMe(BMe))if(e=MMe(BMe,e,IOe(e)),K_e)wOe(e);else{K_e=!0;try{j_e(PMe,e)}finally{K_e=!1,Q_e()}}}function jMe(e,t,n){"focus"===e?(WMe(),BMe=n,(DMe=t).attachEvent("onpropertychange",zMe)):"blur"===e&&WMe()}function HMe(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return LMe(BMe)}function GMe(e,t){if("click"===e)return LMe(t)}function qMe(e,t){if("input"===e||"change"===e)return LMe(t)}B_e&&(VMe=COe("input")&&(!document.documentMode||9<document.documentMode));var KMe={eventTypes:FMe,_isInputEventSupported:VMe,extractEvents:function(e,t,n,r){var a=t?YFe(t):window,o=a.nodeName&&a.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===a.type)var i=UMe;else if(OMe(a))if(VMe)i=qMe;else{i=HMe;var s=jMe}else(o=a.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(i=GMe);if(i&&(i=i(e,t)))return MMe(i,n,r);s&&s(e,a,t),"blur"===e&&(e=a._wrapperState)&&e.controlled&&"number"===a.type&&WRe(a,"number",a.value)}},XMe=dMe.extend({view:null,detail:null}),QMe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YMe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=QMe[e])&&!!t[e]}function $Me(){return YMe}var ZMe=0,JMe=0,eDe=!1,tDe=!1,nDe=XMe.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:$Me,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=ZMe;return ZMe=e.screenX,eDe?"mousemove"===e.type?e.screenX-t:0:(eDe=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=JMe;return JMe=e.screenY,tDe?"mousemove"===e.type?e.screenY-t:0:(tDe=!0,0)}}),rDe=nDe.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),aDe={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},oDe={eventTypes:aDe,extractEvents:function(e,t,n,r,a){var o="mouseover"===e||"pointerover"===e,i="mouseout"===e||"pointerout"===e;if(o&&0==(32&a)&&(n.relatedTarget||n.fromElement)||!i&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,i)?(i=t,null!==(t=(t=n.relatedTarget||n.toElement)?XFe(t):null)&&(t!==fOe(t)||5!==t.tag&&6!==t.tag)&&(t=null)):i=null;if(i===t)return null;if("mouseout"===e||"mouseover"===e)var s=nDe,u=aDe.mouseLeave,c=aDe.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=rDe,u=aDe.pointerLeave,c=aDe.pointerEnter,l="pointer");if(e=null==i?o:YFe(i),o=null==t?o:YFe(t),(u=s.getPooled(u,i,n,r)).type=l+"leave",u.target=e,u.relatedTarget=o,(n=s.getPooled(c,t,n,r)).type=l+"enter",n.target=o,n.relatedTarget=e,l=t,(r=i)&&l)e:{for(c=l,i=0,e=s=r;e;e=ZFe(e))i++;for(e=0,t=c;t;t=ZFe(t))e++;for(;0<i-e;)s=ZFe(s),i--;for(;0<e-i;)c=ZFe(c),e--;for(;i--;){if(s===c||s===c.alternate)break e;s=ZFe(s),c=ZFe(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(i=r.alternate)||i!==c);)s.push(r),r=ZFe(r);for(r=[];l&&l!==c&&(null===(i=l.alternate)||i!==c);)r.push(l),l=ZFe(l);for(l=0;l<s.length;l++)nMe(s[l],"bubbled",u);for(l=r.length;0<l--;)nMe(r[l],"captured",n);return 0==(64&a)?[u]:[u,n]}};function iDe(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var sDe="function"==typeof Object.is?Object.is:iDe,uDe=Object.prototype.hasOwnProperty;function cDe(e,t){if(sDe(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!uDe.call(t,n[r])||!sDe(e[n[r]],t[n[r]]))return!1;return!0}var lDe=B_e&&"documentMode"in document&&11>=document.documentMode,dDe={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},pDe=null,fDe=null,hDe=null,mDe=!1;function gDe(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return mDe||null==pDe||pDe!==EFe(n)?null:("selectionStart"in(n=pDe)&&RFe(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},hDe&&cDe(hDe,n)?null:(hDe=n,(e=dMe.getPooled(dDe.select,fDe,e,t)).type="select",e.target=pDe,aMe(e),e))}var vDe={eventTypes:dDe,extractEvents:function(e,t,n,r,a,o){if(!(o=!(a=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{a=pOe(a),o=M_e.onSelect;for(var i=0;i<o.length;i++)if(!a.has(o[i])){a=!1;break e}a=!0}o=!a}if(o)return null;switch(a=t?YFe(t):window,e){case"focus":(OMe(a)||"true"===a.contentEditable)&&(pDe=a,fDe=t,hDe=null);break;case"blur":hDe=fDe=pDe=null;break;case"mousedown":mDe=!0;break;case"contextmenu":case"mouseup":case"dragend":return mDe=!1,gDe(n,r);case"selectionchange":if(lDe)break;case"keydown":case"keyup":return gDe(n,r)}return null}},yDe=dMe.extend({animationName:null,elapsedTime:null,pseudoElement:null}),bDe=dMe.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xDe=XMe.extend({relatedTarget:null});function kDe(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var wDe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IDe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CDe=XMe.extend({key:function(e){if(e.key){var t=wDe[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=kDe(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?IDe[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:$Me,charCode:function(e){return"keypress"===e.type?kDe(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?kDe(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),SDe=nDe.extend({dataTransfer:null}),EDe=XMe.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:$Me}),TDe=dMe.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),NDe=nDe.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),ADe={eventTypes:eFe,extractEvents:function(e,t,n,r){var a=tFe.get(e);if(!a)return null;switch(e){case"keypress":if(0===kDe(n))return null;case"keydown":case"keyup":e=CDe;break;case"blur":case"focus":e=xDe;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=nDe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=SDe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=EDe;break;case iOe:case sOe:case uOe:e=yDe;break;case cOe:e=TDe;break;case"scroll":e=XMe;break;case"wheel":e=NDe;break;case"copy":case"cut":case"paste":e=bDe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=rDe;break;default:e=dMe}return aMe(t=e.getPooled(a,t,n,r)),t}};if(T_e)throw Error(h_e(101));T_e=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),A_e();var _De=QFe;I_e=$Fe,C_e=_De,S_e=YFe,D_e({SimpleEventPlugin:ADe,EnterLeaveEventPlugin:oDe,ChangeEventPlugin:KMe,SelectEventPlugin:vDe,BeforeInputEventPlugin:_Me});var RDe=[],ODe=-1;function FDe(e){0>ODe||(e.current=RDe[ODe],RDe[ODe]=null,ODe--)}function MDe(e,t){ODe++,RDe[ODe]=e.current,e.current=t}var DDe={},BDe={current:DDe},PDe={current:!1},LDe=DDe;function UDe(e,t){var n=e.type.contextTypes;if(!n)return DDe;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function VDe(e){return null!=(e=e.childContextTypes)}function WDe(){FDe(PDe),FDe(BDe)}function zDe(e,t,n){if(BDe.current!==DDe)throw Error(h_e(168));MDe(BDe,t),MDe(PDe,n)}function jDe(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(h_e(108,ARe(t)||"Unknown",a));return cb({},n,{},r)}function HDe(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||DDe,LDe=BDe.current,MDe(BDe,e),MDe(PDe,PDe.current),!0}function GDe(e,t,n){var r=e.stateNode;if(!r)throw Error(h_e(169));n?(e=jDe(e,t,LDe),r.__reactInternalMemoizedMergedChildContext=e,FDe(PDe),FDe(BDe),MDe(BDe,e)):FDe(PDe),MDe(PDe,n)}var qDe=f_e.unstable_runWithPriority,KDe=f_e.unstable_scheduleCallback,XDe=f_e.unstable_cancelCallback,QDe=f_e.unstable_requestPaint,YDe=f_e.unstable_now,$De=f_e.unstable_getCurrentPriorityLevel,ZDe=f_e.unstable_ImmediatePriority,JDe=f_e.unstable_UserBlockingPriority,eBe=f_e.unstable_NormalPriority,tBe=f_e.unstable_LowPriority,nBe=f_e.unstable_IdlePriority,rBe={},aBe=f_e.unstable_shouldYield,oBe=void 0!==QDe?QDe:function(){},iBe=null,sBe=null,uBe=!1,cBe=YDe(),lBe=1e4>cBe?YDe:function(){return YDe()-cBe};function dBe(){switch($De()){case ZDe:return 99;case JDe:return 98;case eBe:return 97;case tBe:return 96;case nBe:return 95;default:throw Error(h_e(332))}}function pBe(e){switch(e){case 99:return ZDe;case 98:return JDe;case 97:return eBe;case 96:return tBe;case 95:return nBe;default:throw Error(h_e(332))}}function fBe(e,t){return e=pBe(e),qDe(e,t)}function hBe(e,t,n){return e=pBe(e),KDe(e,t,n)}function mBe(e){return null===iBe?(iBe=[e],sBe=KDe(ZDe,vBe)):iBe.push(e),rBe}function gBe(){if(null!==sBe){var e=sBe;sBe=null,XDe(e)}vBe()}function vBe(){if(!uBe&&null!==iBe){uBe=!0;var e=0;try{var t=iBe;fBe(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),iBe=null}catch(t){throw null!==iBe&&(iBe=iBe.slice(e+1)),KDe(ZDe,gBe),t}finally{uBe=!1}}}function yBe(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function bBe(e,t){if(e&&e.defaultProps)for(var n in t=cb({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var xBe={current:null},kBe=null,wBe=null,IBe=null;function CBe(){IBe=wBe=kBe=null}function SBe(e){var t=xBe.current;FDe(xBe),e.type._context._currentValue=t}function EBe(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function TBe(e,t){kBe=e,IBe=wBe=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(eLe=!0),e.firstContext=null)}function NBe(e,t){if(IBe!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(IBe=e,t=1073741823),t={context:e,observedBits:t,next:null},null===wBe){if(null===kBe)throw Error(h_e(308));wBe=t,kBe.dependencies={expirationTime:0,firstContext:t,responders:null}}else wBe=wBe.next=t;return e._currentValue}var ABe=!1;function _Be(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function RBe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function OBe(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function FBe(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function MBe(e,t){var n=e.alternate;null!==n&&RBe(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function DBe(e,t,n,r){var a=e.updateQueue;ABe=!1;var o=a.baseQueue,i=a.shared.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}o=i,a.shared.pending=null,null!==(s=e.alternate)&&(null!==(s=s.updateQueue)&&(s.baseQueue=i))}if(null!==o){s=o.next;var u=a.baseState,c=0,l=null,d=null,p=null;if(null!==s)for(var f=s;;){if((i=f.expirationTime)<r){var h={expirationTime:f.expirationTime,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null};null===p?(d=p=h,l=u):p=p.next=h,i>c&&(c=i)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null}),zUe(i,f.suspenseConfig);e:{var m=e,g=f;switch(i=t,h=n,g.tag){case 1:if("function"==typeof(m=g.payload)){u=m.call(h,u,i);break e}u=m;break e;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null==(i="function"==typeof(m=g.payload)?m.call(h,u,i):m))break e;u=cb({},u,i);break e;case 2:ABe=!0}}null!==f.callback&&(e.effectTag|=32,null===(i=a.effects)?a.effects=[f]:i.push(f))}if(null===(f=f.next)||f===s){if(null===(i=a.shared.pending))break;f=o.next=i.next,i.next=s,a.baseQueue=o=i,a.shared.pending=null}}null===p?l=u:p.next=d,a.baseState=l,a.baseQueue=p,jUe(c),e.expirationTime=c,e.memoizedState=u}}function BBe(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=a,a=n,"function"!=typeof r)throw Error(h_e(191,r));r.call(a)}}}var PBe=uRe.ReactCurrentBatchConfig,LBe=(new Tx.Component).refs;function UBe(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:cb({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var VBe={isMounted:function(e){return!!(e=e._reactInternalFiber)&&fOe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=NUe(),a=PBe.suspense;(a=OBe(r=AUe(r,e,a),a)).payload=t,null!=n&&(a.callback=n),FBe(e,a),_Ue(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=NUe(),a=PBe.suspense;(a=OBe(r=AUe(r,e,a),a)).tag=1,a.payload=t,null!=n&&(a.callback=n),FBe(e,a),_Ue(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=NUe(),r=PBe.suspense;(r=OBe(n=AUe(n,e,r),r)).tag=2,null!=t&&(r.callback=t),FBe(e,r),_Ue(e,n)}};function WBe(e,t,n,r,a,o,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!cDe(n,r)||!cDe(a,o))}function zBe(e,t,n){var r=!1,a=DDe,o=t.contextType;return"object"==typeof o&&null!==o?o=NBe(o):(a=VDe(t)?LDe:BDe.current,o=(r=null!=(r=t.contextTypes))?UDe(e,a):DDe),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=VBe,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function jBe(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&VBe.enqueueReplaceState(t,t.state,null)}function HBe(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=LBe,_Be(e);var o=t.contextType;"object"==typeof o&&null!==o?a.context=NBe(o):(o=VDe(t)?LDe:BDe.current,a.context=UDe(e,o)),DBe(e,n,a,r),a.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(UBe(e,t,o,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&VBe.enqueueReplaceState(a,a.state,null),DBe(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.effectTag|=4)}var GBe=Array.isArray;function qBe(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(h_e(309));var r=n.stateNode}if(!r)throw Error(h_e(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=r.refs;t===LBe&&(t=r.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(h_e(284));if(!n._owner)throw Error(h_e(290,e))}return e}function KBe(e,t){if("textarea"!==e.type)throw Error(h_e(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function XBe(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=dVe(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function i(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=hVe(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=qBe(e,t,n),r.return=e,r):((r=pVe(n.type,n.key,n.props,null,e.mode,r)).ref=qBe(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=mVe(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function l(e,t,n,r,o){return null===t||7!==t.tag?((t=fVe(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=hVe(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case pRe:return(n=pVe(t.type,t.key,t.props,null,e.mode,n)).ref=qBe(e,null,t),n.return=e,n;case fRe:return(t=mVe(t,e.mode,n)).return=e,t}if(GBe(t)||TRe(t))return(t=fVe(t,e.mode,n,null)).return=e,t;KBe(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==a?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case pRe:return n.key===a?n.type===hRe?l(e,t,n.props.children,r,a):u(e,t,n,r):null;case fRe:return n.key===a?c(e,t,n,r):null}if(GBe(n)||TRe(n))return null!==a?null:l(e,t,n,r,null);KBe(e,n)}return null}function f(e,t,n,r,a){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case pRe:return e=e.get(null===r.key?n:r.key)||null,r.type===hRe?l(t,e,r.props.children,a,r.key):u(t,e,r,a);case fRe:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(GBe(r)||TRe(r))return l(t,e=e.get(n)||null,r,a,null);KBe(t,r)}return null}function h(a,i,s,u){for(var c=null,l=null,h=i,m=i=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=p(a,h,s[m],u);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(a,h),i=o(v,i,m),null===l?c=v:l.sibling=v,l=v,h=g}if(m===s.length)return n(a,h),c;if(null===h){for(;m<s.length;m++)null!==(h=d(a,s[m],u))&&(i=o(h,i,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(a,h);m<s.length;m++)null!==(g=f(h,a,m,s[m],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),i=o(g,i,m),null===l?c=g:l.sibling=g,l=g);return e&&h.forEach((function(e){return t(a,e)})),c}function m(a,i,s,u){var c=TRe(s);if("function"!=typeof c)throw Error(h_e(150));if(null==(s=c.call(s)))throw Error(h_e(151));for(var l=c=null,h=i,m=i=0,g=null,v=s.next();null!==h&&!v.done;m++,v=s.next()){h.index>m?(g=h,h=null):g=h.sibling;var y=p(a,h,v.value,u);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(a,h),i=o(y,i,m),null===l?c=y:l.sibling=y,l=y,h=g}if(v.done)return n(a,h),c;if(null===h){for(;!v.done;m++,v=s.next())null!==(v=d(a,v.value,u))&&(i=o(v,i,m),null===l?c=v:l.sibling=v,l=v);return c}for(h=r(a,h);!v.done;m++,v=s.next())null!==(v=f(h,a,m,v.value,u))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),i=o(v,i,m),null===l?c=v:l.sibling=v,l=v);return e&&h.forEach((function(e){return t(a,e)})),c}return function(e,r,o,s){var u="object"==typeof o&&null!==o&&o.type===hRe&&null===o.key;u&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case pRe:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){switch(u.tag){case 7:if(o.type===hRe){n(e,u.sibling),(r=a(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=a(u,o.props)).ref=qBe(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===hRe?((r=fVe(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=pVe(o.type,o.key,o.props,null,e.mode,s)).ref=qBe(e,r,o),s.return=e,e=s)}return i(e);case fRe:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=a(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=mVe(o,e.mode,s)).return=e,e=r}return i(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,o)).return=e,e=r):(n(e,r),(r=hVe(o,e.mode,s)).return=e,e=r),i(e);if(GBe(o))return h(e,r,o,s);if(TRe(o))return m(e,r,o,s);if(c&&KBe(e,o),void 0===o&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(h_e(152,e.displayName||e.name||"Component"))}return n(e,r)}}var QBe=XBe(!0),YBe=XBe(!1),$Be={},ZBe={current:$Be},JBe={current:$Be},ePe={current:$Be};function tPe(e){if(e===$Be)throw Error(h_e(174));return e}function nPe(e,t){switch(MDe(ePe,t),MDe(JBe,e),MDe(ZBe,$Be),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$Re(null,"");break;default:t=$Re(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}FDe(ZBe),MDe(ZBe,t)}function rPe(){FDe(ZBe),FDe(JBe),FDe(ePe)}function aPe(e){tPe(ePe.current);var t=tPe(ZBe.current),n=$Re(t,e.type);t!==n&&(MDe(JBe,e),MDe(ZBe,n))}function oPe(e){JBe.current===e&&(FDe(ZBe),FDe(JBe))}var iPe={current:0};function sPe(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===MFe||n.data===DFe))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function uPe(e,t){return{responder:e,props:t}}var cPe=uRe.ReactCurrentDispatcher,lPe=uRe.ReactCurrentBatchConfig,dPe=0,pPe=null,fPe=null,hPe=null,mPe=!1;function gPe(){throw Error(h_e(321))}function vPe(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sDe(e[n],t[n]))return!1;return!0}function yPe(e,t,n,r,a,o){if(dPe=o,pPe=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,cPe.current=null===e||null===e.memoizedState?WPe:zPe,e=n(r,a),t.expirationTime===dPe){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(h_e(301));o+=1,hPe=fPe=null,t.updateQueue=null,cPe.current=jPe,e=n(r,a)}while(t.expirationTime===dPe)}if(cPe.current=VPe,t=null!==fPe&&null!==fPe.next,dPe=0,hPe=fPe=pPe=null,mPe=!1,t)throw Error(h_e(300));return e}function bPe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===hPe?pPe.memoizedState=hPe=e:hPe=hPe.next=e,hPe}function xPe(){if(null===fPe){var e=pPe.alternate;e=null!==e?e.memoizedState:null}else e=fPe.next;var t=null===hPe?pPe.memoizedState:hPe.next;if(null!==t)hPe=t,fPe=e;else{if(null===e)throw Error(h_e(310));e={memoizedState:(fPe=e).memoizedState,baseState:fPe.baseState,baseQueue:fPe.baseQueue,queue:fPe.queue,next:null},null===hPe?pPe.memoizedState=hPe=e:hPe=hPe.next=e}return hPe}function kPe(e,t){return"function"==typeof t?t(e):t}function wPe(e){var t=xPe(),n=t.queue;if(null===n)throw Error(h_e(311));n.lastRenderedReducer=e;var r=fPe,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var i=a.next;a.next=o.next,o.next=i}r.baseQueue=a=o,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var s=i=o=null,u=a;do{var c=u.expirationTime;if(c<dPe){var l={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(i=s=l,o=r):s=s.next=l,c>pPe.expirationTime&&(pPe.expirationTime=c,jUe(c))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),zUe(c,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==a);null===s?o=r:s.next=i,sDe(r,t.memoizedState)||(eLe=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function IPe(e){var t=xPe(),n=t.queue;if(null===n)throw Error(h_e(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var i=a=a.next;do{o=e(o,i.action),i=i.next}while(i!==a);sDe(o,t.memoizedState)||(eLe=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function CPe(e){var t=bPe();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:kPe,lastRenderedState:e}).dispatch=UPe.bind(null,pPe,e),[t.memoizedState,e]}function SPe(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=pPe.updateQueue)?(t={lastEffect:null},pPe.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function EPe(){return xPe().memoizedState}function TPe(e,t,n,r){var a=bPe();pPe.effectTag|=e,a.memoizedState=SPe(1|t,n,void 0,void 0===r?null:r)}function NPe(e,t,n,r){var a=xPe();r=void 0===r?null:r;var o=void 0;if(null!==fPe){var i=fPe.memoizedState;if(o=i.destroy,null!==r&&vPe(r,i.deps))return void SPe(t,n,o,r)}pPe.effectTag|=e,a.memoizedState=SPe(1|t,n,o,r)}function APe(e,t){return TPe(516,4,e,t)}function _Pe(e,t){return NPe(516,4,e,t)}function RPe(e,t){return NPe(4,2,e,t)}function OPe(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function FPe(e,t,n){return n=null!=n?n.concat([e]):null,NPe(4,2,OPe.bind(null,t,e),n)}function MPe(){}function DPe(e,t){return bPe().memoizedState=[e,void 0===t?null:t],e}function BPe(e,t){var n=xPe();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&vPe(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function PPe(e,t){var n=xPe();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&vPe(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function LPe(e,t,n){var r=dBe();fBe(98>r?98:r,(function(){e(!0)})),fBe(97<r?97:r,(function(){var r=lPe.suspense;lPe.suspense=void 0===t?null:t;try{e(!1),n()}finally{lPe.suspense=r}}))}function UPe(e,t,n){var r=NUe(),a=PBe.suspense;a={expirationTime:r=AUe(r,e,a),suspenseConfig:a,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===pPe||null!==o&&o===pPe)mPe=!0,a.expirationTime=dPe,pPe.expirationTime=dPe;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.eagerReducer=o,a.eagerState=s,sDe(s,i))return}catch(e){}_Ue(e,r)}}var VPe={readContext:NBe,useCallback:gPe,useContext:gPe,useEffect:gPe,useImperativeHandle:gPe,useLayoutEffect:gPe,useMemo:gPe,useReducer:gPe,useRef:gPe,useState:gPe,useDebugValue:gPe,useResponder:gPe,useDeferredValue:gPe,useTransition:gPe},WPe={readContext:NBe,useCallback:DPe,useContext:NBe,useEffect:APe,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,TPe(4,2,OPe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return TPe(4,2,e,t)},useMemo:function(e,t){var n=bPe();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bPe();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=UPe.bind(null,pPe,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bPe().memoizedState=e},useState:CPe,useDebugValue:MPe,useResponder:uPe,useDeferredValue:function(e,t){var n=CPe(e),r=n[0],a=n[1];return APe((function(){var n=lPe.suspense;lPe.suspense=void 0===t?null:t;try{a(e)}finally{lPe.suspense=n}}),[e,t]),r},useTransition:function(e){var t=CPe(!1),n=t[0];return t=t[1],[DPe(LPe.bind(null,t,e),[t,e]),n]}},zPe={readContext:NBe,useCallback:BPe,useContext:NBe,useEffect:_Pe,useImperativeHandle:FPe,useLayoutEffect:RPe,useMemo:PPe,useReducer:wPe,useRef:EPe,useState:function(){return wPe(kPe)},useDebugValue:MPe,useResponder:uPe,useDeferredValue:function(e,t){var n=wPe(kPe),r=n[0],a=n[1];return _Pe((function(){var n=lPe.suspense;lPe.suspense=void 0===t?null:t;try{a(e)}finally{lPe.suspense=n}}),[e,t]),r},useTransition:function(e){var t=wPe(kPe),n=t[0];return t=t[1],[BPe(LPe.bind(null,t,e),[t,e]),n]}},jPe={readContext:NBe,useCallback:BPe,useContext:NBe,useEffect:_Pe,useImperativeHandle:FPe,useLayoutEffect:RPe,useMemo:PPe,useReducer:IPe,useRef:EPe,useState:function(){return IPe(kPe)},useDebugValue:MPe,useResponder:uPe,useDeferredValue:function(e,t){var n=IPe(kPe),r=n[0],a=n[1];return _Pe((function(){var n=lPe.suspense;lPe.suspense=void 0===t?null:t;try{a(e)}finally{lPe.suspense=n}}),[e,t]),r},useTransition:function(e){var t=IPe(kPe),n=t[0];return t=t[1],[BPe(LPe.bind(null,t,e),[t,e]),n]}},HPe=null,GPe=null,qPe=!1;function KPe(e,t){var n=uVe(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function XPe(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function QPe(e){if(qPe){var t=GPe;if(t){var n=t;if(!XPe(e,t)){if(!(t=zFe(n.nextSibling))||!XPe(e,t))return e.effectTag=-1025&e.effectTag|2,qPe=!1,void(HPe=e);KPe(HPe,n)}HPe=e,GPe=zFe(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,qPe=!1,HPe=e}}function YPe(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;HPe=e}function $Pe(e){if(e!==HPe)return!1;if(!qPe)return YPe(e),qPe=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!UFe(t,e.memoizedProps))for(t=GPe;t;)KPe(e,t),t=zFe(t.nextSibling);if(YPe(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(h_e(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===FFe){if(0===t){GPe=zFe(e.nextSibling);break e}t--}else n!==OFe&&n!==DFe&&n!==MFe||t++}e=e.nextSibling}GPe=null}}else GPe=HPe?zFe(e.stateNode.nextSibling):null;return!0}function ZPe(){GPe=HPe=null,qPe=!1}var JPe=uRe.ReactCurrentOwner,eLe=!1;function tLe(e,t,n,r){t.child=null===e?YBe(t,null,n,r):QBe(t,e.child,n,r)}function nLe(e,t,n,r,a){n=n.render;var o=t.ref;return TBe(t,a),r=yPe(e,t,n,r,o,a),null===e||eLe?(t.effectTag|=1,tLe(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),bLe(e,t,a))}function rLe(e,t,n,r,a,o){if(null===e){var i=n.type;return"function"!=typeof i||cVe(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=pVe(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,aLe(e,t,i,r,a,o))}return i=e.child,a<o&&(a=i.memoizedProps,(n=null!==(n=n.compare)?n:cDe)(a,r)&&e.ref===t.ref)?bLe(e,t,o):(t.effectTag|=1,(e=dVe(i,r)).ref=t.ref,e.return=t,t.child=e)}function aLe(e,t,n,r,a,o){return null!==e&&cDe(e.memoizedProps,r)&&e.ref===t.ref&&(eLe=!1,a<o)?(t.expirationTime=e.expirationTime,bLe(e,t,o)):iLe(e,t,n,r,o)}function oLe(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function iLe(e,t,n,r,a){var o=VDe(n)?LDe:BDe.current;return o=UDe(t,o),TBe(t,a),n=yPe(e,t,n,r,o,a),null===e||eLe?(t.effectTag|=1,tLe(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=a&&(e.expirationTime=0),bLe(e,t,a))}function sLe(e,t,n,r,a){if(VDe(n)){var o=!0;HDe(t)}else o=!1;if(TBe(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),zBe(t,n,r),HBe(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var u=i.context,c=n.contextType;"object"==typeof c&&null!==c?c=NBe(c):c=UDe(t,c=VDe(n)?LDe:BDe.current);var l=n.getDerivedStateFromProps,d="function"==typeof l||"function"==typeof i.getSnapshotBeforeUpdate;d||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==r||u!==c)&&jBe(t,i,r,c),ABe=!1;var p=t.memoizedState;i.state=p,DBe(t,r,i,a),u=t.memoizedState,s!==r||p!==u||PDe.current||ABe?("function"==typeof l&&(UBe(t,n,l,r),u=t.memoizedState),(s=ABe||WBe(t,n,s,r,p,u,c))?(d||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.effectTag|=4)):("function"==typeof i.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=c,r=s):("function"==typeof i.componentDidMount&&(t.effectTag|=4),r=!1)}else i=t.stateNode,RBe(e,t),s=t.memoizedProps,i.props=t.type===t.elementType?s:bBe(t.type,s),u=i.context,"object"==typeof(c=n.contextType)&&null!==c?c=NBe(c):c=UDe(t,c=VDe(n)?LDe:BDe.current),(d="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==r||u!==c)&&jBe(t,i,r,c),ABe=!1,u=t.memoizedState,i.state=u,DBe(t,r,i,a),p=t.memoizedState,s!==r||u!==p||PDe.current||ABe?("function"==typeof l&&(UBe(t,n,l,r),p=t.memoizedState),(l=ABe||WBe(t,n,s,r,u,p,c))?(d||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,c),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,c)),"function"==typeof i.componentDidUpdate&&(t.effectTag|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=c,r=l):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return uLe(e,t,n,r,o,a)}function uLe(e,t,n,r,a,o){oLe(e,t);var i=0!=(64&t.effectTag);if(!r&&!i)return a&&GDe(t,n,!1),bLe(e,t,o);r=t.stateNode,JPe.current=t;var s=i&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&i?(t.child=QBe(t,e.child,null,o),t.child=QBe(t,null,s,o)):tLe(e,t,s,o),t.memoizedState=r.state,a&&GDe(t,n,!0),t.child}function cLe(e){var t=e.stateNode;t.pendingContext?zDe(0,t.pendingContext,t.pendingContext!==t.context):t.context&&zDe(0,t.context,!1),nPe(e,t.containerInfo)}var lLe,dLe,pLe,fLe,hLe={dehydrated:null,retryTime:0};function mLe(e,t,n){var r,a=t.mode,o=t.pendingProps,i=iPe.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&i)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(i|=1),MDe(iPe,1&i),null===e){if(void 0!==o.fallback&&QPe(t),s){if(s=o.fallback,(o=fVe(null,a,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=fVe(s,a,n,null)).return=t,o.sibling=n,t.memoizedState=hLe,t.child=o,n}return a=o.children,t.memoizedState=null,t.child=YBe(t,null,a,n)}if(null!==e.memoizedState){if(a=(e=e.child).sibling,s){if(o=o.fallback,(n=dVe(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(a=dVe(a,o)).return=t,n.sibling=a,n.childExpirationTime=0,t.memoizedState=hLe,t.child=n,a}return n=QBe(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=fVe(null,a,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=fVe(s,a,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=hLe,t.child=o,n}return t.memoizedState=null,t.child=QBe(t,e,o.children,n)}function gLe(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),EBe(e.return,t)}function vLe(e,t,n,r,a,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:a,lastEffect:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailExpiration=0,i.tailMode=a,i.lastEffect=o)}function yLe(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(tLe(e,t,r.children,n),0!=(2&(r=iPe.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&gLe(e,n);else if(19===e.tag)gLe(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(MDe(iPe,r),0==(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===sPe(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),vLe(t,!1,a,n,o,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===sPe(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}vLe(t,!0,n,null,o,t.lastEffect);break;case"together":vLe(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function bLe(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&jUe(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(h_e(153));if(null!==t.child){for(n=dVe(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=dVe(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function xLe(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function kLe(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return VDe(t.type)&&WDe(),null;case 3:return rPe(),FDe(PDe),FDe(BDe),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!$Pe(t)||(t.effectTag|=4),dLe(t),null;case 5:oPe(t),n=tPe(ePe.current);var a=t.type;if(null!==e&&null!=t.stateNode)pLe(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(h_e(166));return null}if(e=tPe(ZBe.current),$Pe(t)){r=t.stateNode,a=t.type;var o=t.memoizedProps;switch(r[GFe]=t,r[qFe]=o,a){case"iframe":case"object":case"embed":lFe("load",r);break;case"video":case"audio":for(e=0;e<lOe.length;e++)lFe(lOe[e],r);break;case"source":lFe("error",r);break;case"img":case"image":case"link":lFe("error",r),lFe("load",r);break;case"form":lFe("reset",r),lFe("submit",r);break;case"details":lFe("toggle",r);break;case"input":PRe(r,o),lFe("invalid",r),CFe(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!o.multiple},lFe("invalid",r),CFe(n,"onChange");break;case"textarea":qRe(r,o),lFe("invalid",r),CFe(n,"onChange")}for(var i in kFe(a,o),e=null,o)if(o.hasOwnProperty(i)){var s=o[i];"children"===i?"string"==typeof s?r.textContent!==s&&(e=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(e=["children",""+s]):F_e.hasOwnProperty(i)&&null!=s&&CFe(n,i)}switch(a){case"input":MRe(r),VRe(r,o,!0);break;case"textarea":MRe(r),XRe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=SFe)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(i=9===n.nodeType?n:n.ownerDocument,e===IFe&&(e=YRe(a)),e===IFe?"script"===a?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=i.createElement(a,{is:r.is}):(e=i.createElement(a),"select"===a&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,a),e[GFe]=t,e[qFe]=r,lLe(e,t,!1,!1),t.stateNode=e,i=wFe(a,r),a){case"iframe":case"object":case"embed":lFe("load",e),s=r;break;case"video":case"audio":for(s=0;s<lOe.length;s++)lFe(lOe[s],e);s=r;break;case"source":lFe("error",e),s=r;break;case"img":case"image":case"link":lFe("error",e),lFe("load",e),s=r;break;case"form":lFe("reset",e),lFe("submit",e),s=r;break;case"details":lFe("toggle",e),s=r;break;case"input":PRe(e,r),s=BRe(e,r),lFe("invalid",e),CFe(n,"onChange");break;case"option":s=jRe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=cb({},r,{value:void 0}),lFe("invalid",e),CFe(n,"onChange");break;case"textarea":qRe(e,r),s=GRe(e,r),lFe("invalid",e),CFe(n,"onChange");break;default:s=r}kFe(a,s);var u=s;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?bFe(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&JRe(e,c):"children"===o?"string"==typeof c?("textarea"!==a||""!==c)&&eOe(e,c):"number"==typeof c&&eOe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(F_e.hasOwnProperty(o)?null!=c&&CFe(n,o):null!=c&&cRe(e,o,c,i))}switch(a){case"input":MRe(e),VRe(e,r,!1);break;case"textarea":MRe(e),XRe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+RRe(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?HRe(e,!!r.multiple,n,!1):null!=r.defaultValue&&HRe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=SFe)}LFe(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)fLe(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(h_e(166));n=tPe(ePe.current),tPe(ZBe.current),$Pe(t)?(n=t.stateNode,r=t.memoizedProps,n[GFe]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[GFe]=t,t.stateNode=n)}return null;case 13:return FDe(iPe),r=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&$Pe(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(o=t.firstEffect)?(t.firstEffect=a,a.nextEffect=o):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&iPe.current)?uUe===ZLe&&(uUe=tUe):(uUe!==ZLe&&uUe!==tUe||(uUe=nUe),0!==fUe&&null!==oUe&&(yVe(oUe,sUe),bVe(oUe,fUe)))),(n||r)&&(t.effectTag|=4),null);case 4:return rPe(),dLe(t),null;case 10:return SBe(t),null;case 17:return VDe(t.type)&&WDe(),null;case 19:if(FDe(iPe),null===(r=t.memoizedState))return null;if(a=0!=(64&t.effectTag),null===(o=r.rendering)){if(a)xLe(r,!1);else if(uUe!==ZLe||null!==e&&0!=(64&e.effectTag))for(o=t.child;null!==o;){if(null!==(e=sPe(o))){for(t.effectTag|=64,xLe(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)o=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=o,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,o=e.dependencies,a.dependencies=null===o?null:{expirationTime:o.expirationTime,firstContext:o.firstContext,responders:o.responders}),r=r.sibling;return MDe(iPe,1&iPe.current|2),t.child}o=o.sibling}}else{if(!a)if(null!==(e=sPe(o))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),xLe(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*lBe()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,xLe(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=r.last)?n.sibling=o:t.child=o,r.last=o)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=lBe()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=lBe(),n.sibling=null,t=iPe.current,MDe(iPe,a?1&t|2:1&t),n):null}throw Error(h_e(156,t.tag))}function wLe(e){switch(e.tag){case 1:VDe(e.type)&&WDe();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(rPe(),FDe(PDe),FDe(BDe),0!=(64&(t=e.effectTag)))throw Error(h_e(285));return e.effectTag=-4097&t|64,e;case 5:return oPe(e),null;case 13:return FDe(iPe),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return FDe(iPe),null;case 4:return rPe(),null;case 10:return SBe(e),null;default:return null}}function ILe(e,t){return{value:e,source:t,stack:_Re(t)}}lLe=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},dLe=function(){},pLe=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var i,s,u=t.stateNode;switch(tPe(ZBe.current),e=null,n){case"input":o=BRe(u,o),r=BRe(u,r),e=[];break;case"option":o=jRe(u,o),r=jRe(u,r),e=[];break;case"select":o=cb({},o,{value:void 0}),r=cb({},r,{value:void 0}),e=[];break;case"textarea":o=GRe(u,o),r=GRe(u,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(u.onclick=SFe)}for(i in kFe(n,r),n=null,o)if(!r.hasOwnProperty(i)&&o.hasOwnProperty(i)&&null!=o[i])if("style"===i)for(s in u=o[i])u.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==i&&"children"!==i&&"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(F_e.hasOwnProperty(i)?e||(e=[]):(e=e||[]).push(i,null));for(i in r){var c=r[i];if(u=null!=o?o[i]:void 0,r.hasOwnProperty(i)&&c!==u&&(null!=c||null!=u))if("style"===i)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(e||(e=[]),e.push(i,n)),n=c;else"dangerouslySetInnerHTML"===i?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(i,c)):"children"===i?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(i,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&(F_e.hasOwnProperty(i)?(null!=c&&CFe(a,i),e||u===c||(e=[])):(e=e||[]).push(i,c))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},fLe=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var CLe="function"==typeof WeakSet?WeakSet:Set;function SLe(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=_Re(n)),null!==n&&ARe(n.type),t=t.value,null!==e&&1===e.tag&&ARe(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function ELe(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){tVe(e,t)}}function TLe(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){tVe(e,t)}else t.current=null}function NLe(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:bBe(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(h_e(163))}function ALe(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function _Le(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function RLe(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void _Le(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:bBe(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&BBe(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}BBe(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&LFe(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&JOe(n)))));case 19:case 17:case 20:case 21:return}throw Error(h_e(163))}function OLe(e,t,n){switch("function"==typeof oVe&&oVe(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;fBe(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var a=t;try{n()}catch(e){tVe(a,e)}}e=e.next}while(e!==r)}))}break;case 1:TLe(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&ELe(t,n);break;case 5:TLe(t);break;case 4:LLe(e,t,n)}}function FLe(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&FLe(t)}function MLe(e){return 5===e.tag||3===e.tag||4===e.tag}function DLe(e){e:{for(var t=e.return;null!==t;){if(MLe(t)){var n=t;break e}t=t.return}throw Error(h_e(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(h_e(161))}16&n.effectTag&&(eOe(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||MLe(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?BLe(e,n,t):PLe(e,n,t)}function BLe(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=SFe));else if(4!==r&&null!==(e=e.child))for(BLe(e,t,n),e=e.sibling;null!==e;)BLe(e,t,n),e=e.sibling}function PLe(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(PLe(e,t,n),e=e.sibling;null!==e;)PLe(e,t,n),e=e.sibling}function LLe(e,t,n){for(var r,a,o=t,i=!1;;){if(!i){i=o.return;e:for(;;){if(null===i)throw Error(h_e(160));switch(r=i.stateNode,i.tag){case 5:a=!1;break e;case 3:case 4:r=r.containerInfo,a=!0;break e}i=i.return}i=!0}if(5===o.tag||6===o.tag){e:for(var s=e,u=o,c=n,l=u;;)if(OLe(s,l,c),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}a?(s=r,u=o.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,a=!0,o.child.return=o,o=o.child;continue}}else if(OLe(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(i=!1)}o.sibling.return=o.return,o=o.sibling}}function ULe(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ALe(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,a=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[qFe]=r,"input"===e&&"radio"===r.type&&null!=r.name&&LRe(n,r),wFe(e,a),t=wFe(e,r),a=0;a<o.length;a+=2){var i=o[a],s=o[a+1];"style"===i?bFe(n,s):"dangerouslySetInnerHTML"===i?JRe(n,s):"children"===i?eOe(n,s):cRe(n,i,s,t)}switch(e){case"input":URe(n,r);break;case"textarea":KRe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?HRe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?HRe(n,!!r.multiple,r.defaultValue,!0):HRe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(h_e(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,JOe(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,mUe=lBe()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,a=null!=(a=e.memoizedProps.style)&&a.hasOwnProperty("display")?a.display:null,o.style.display=yFe("display",a));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void VLe(t);case 19:return void VLe(t);case 17:return}throw Error(h_e(163))}function VLe(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new CLe),t.forEach((function(t){var r=rVe.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var WLe="function"==typeof WeakMap?WeakMap:Map;function zLe(e,t,n){(n=OBe(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){yUe||(yUe=!0,bUe=r),SLe(e,t)},n}function jLe(e,t,n){(n=OBe(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return SLe(e,t),r(a)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===xUe?xUe=new Set([this]):xUe.add(this),SLe(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var HLe,GLe=Math.ceil,qLe=uRe.ReactCurrentDispatcher,KLe=uRe.ReactCurrentOwner,XLe=0,QLe=8,YLe=16,$Le=32,ZLe=0,JLe=1,eUe=2,tUe=3,nUe=4,rUe=5,aUe=XLe,oUe=null,iUe=null,sUe=0,uUe=ZLe,cUe=null,lUe=1073741823,dUe=1073741823,pUe=null,fUe=0,hUe=!1,mUe=0,gUe=500,vUe=null,yUe=!1,bUe=null,xUe=null,kUe=!1,wUe=null,IUe=90,CUe=null,SUe=0,EUe=null,TUe=0;function NUe(){return(aUe&(YLe|$Le))!==XLe?1073741821-(lBe()/10|0):0!==TUe?TUe:TUe=1073741821-(lBe()/10|0)}function AUe(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=dBe();if(0==(4&t))return 99===r?1073741823:1073741822;if((aUe&YLe)!==XLe)return sUe;if(null!==n)e=yBe(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=yBe(e,150,100);break;case 97:case 96:e=yBe(e,5e3,250);break;case 95:e=2;break;default:throw Error(h_e(326))}return null!==oUe&&e===sUe&&--e,e}function _Ue(e,t){if(50<SUe)throw SUe=0,EUe=null,Error(h_e(185));if(null!==(e=RUe(e,t))){var n=dBe();1073741823===t?(aUe&QLe)!==XLe&&(aUe&(YLe|$Le))===XLe?DUe(e):(FUe(e),aUe===XLe&&gBe()):FUe(e),(4&aUe)===XLe||98!==n&&99!==n||(null===CUe?CUe=new Map([[e,t]]):(void 0===(n=CUe.get(e))||n>t)&&CUe.set(e,t))}}function RUe(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,a=null;if(null===r&&3===e.tag)a=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){a=r.stateNode;break}r=r.return}return null!==a&&(oUe===a&&(jUe(t),uUe===nUe&&yVe(a,sUe)),bVe(a,t)),a}function OUe(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!vVe(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function FUe(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=mBe(DUe.bind(null,e));else{var t=OUe(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=NUe();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var a=e.callbackPriority;if(e.callbackExpirationTime===t&&a>=r)return;n!==rBe&&XDe(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?mBe(DUe.bind(null,e)):hBe(r,MUe.bind(null,e),{timeout:10*(1073741821-t)-lBe()}),e.callbackNode=t}}}function MUe(e,t){if(TUe=0,t)return xVe(e,t=NUe()),FUe(e),null;var n=OUe(e);if(0!==n){if(t=e.callbackNode,(aUe&(YLe|$Le))!==XLe)throw Error(h_e(327));if(ZUe(),e===oUe&&n===sUe||UUe(e,n),null!==iUe){var r=aUe;aUe|=YLe;for(var a=WUe();;)try{GUe();break}catch(t){VUe(e,t)}if(CBe(),aUe=r,qLe.current=a,uUe===JLe)throw t=cUe,UUe(e,n),yVe(e,n),FUe(e),t;if(null===iUe)switch(a=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=uUe,oUe=null,r){case ZLe:case JLe:throw Error(h_e(345));case eUe:xVe(e,2<n?2:n);break;case tUe:if(yVe(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=XUe(a)),1073741823===lUe&&10<(a=mUe+gUe-lBe())){if(hUe){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,UUe(e,n);break}}if(0!==(o=OUe(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=VFe(QUe.bind(null,e),a);break}QUe(e);break;case nUe:if(yVe(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=XUe(a)),hUe&&(0===(a=e.lastPingedTime)||a>=n)){e.lastPingedTime=n,UUe(e,n);break}if(0!==(a=OUe(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==dUe?r=10*(1073741821-dUe)-lBe():1073741823===lUe?r=0:(r=10*(1073741821-lUe)-5e3,0>(r=(a=lBe())-r)&&(r=0),(n=10*(1073741821-n)-a)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GLe(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=VFe(QUe.bind(null,e),r);break}QUe(e);break;case rUe:if(1073741823!==lUe&&null!==pUe){o=lUe;var i=pUe;if(0>=(r=0|i.busyMinDurationMs)?r=0:(a=0|i.busyDelayMs,r=(o=lBe()-(10*(1073741821-o)-(0|i.timeoutMs||5e3)))<=a?0:a+r-o),10<r){yVe(e,n),e.timeoutHandle=VFe(QUe.bind(null,e),r);break}}QUe(e);break;default:throw Error(h_e(329))}if(FUe(e),e.callbackNode===t)return MUe.bind(null,e)}}return null}function DUe(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(aUe&(YLe|$Le))!==XLe)throw Error(h_e(327));if(ZUe(),e===oUe&&t===sUe||UUe(e,t),null!==iUe){var n=aUe;aUe|=YLe;for(var r=WUe();;)try{HUe();break}catch(t){VUe(e,t)}if(CBe(),aUe=n,qLe.current=r,uUe===JLe)throw n=cUe,UUe(e,t),yVe(e,t),FUe(e),n;if(null!==iUe)throw Error(h_e(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,oUe=null,QUe(e),FUe(e)}return null}function BUe(){if(null!==CUe){var e=CUe;CUe=null,e.forEach((function(e,t){xVe(t,e),FUe(t)})),gBe()}}function PUe(e,t){var n=aUe;aUe|=1;try{return e(t)}finally{(aUe=n)===XLe&&gBe()}}function LUe(e,t){var n=aUe;aUe&=-2,aUe|=QLe;try{return e(t)}finally{(aUe=n)===XLe&&gBe()}}function UUe(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,WFe(n)),null!==iUe)for(n=iUe.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&WDe();break;case 3:rPe(),FDe(PDe),FDe(BDe);break;case 5:oPe(r);break;case 4:rPe();break;case 13:case 19:FDe(iPe);break;case 10:SBe(r)}n=n.return}oUe=e,iUe=dVe(e.current,null),sUe=t,uUe=ZLe,cUe=null,dUe=lUe=1073741823,pUe=null,fUe=0,hUe=!1}function VUe(e,t){for(;;){try{if(CBe(),cPe.current=VPe,mPe)for(var n=pPe.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(dPe=0,hPe=fPe=pPe=null,mPe=!1,null===iUe||null===iUe.return)return uUe=JLe,cUe=t,iUe=null;e:{var a=e,o=iUe.return,i=iUe,s=t;if(t=sUe,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var u=s;if(0==(2&i.mode)){var c=i.alternate;c?(i.updateQueue=c.updateQueue,i.memoizedState=c.memoizedState,i.expirationTime=c.expirationTime):(i.updateQueue=null,i.memoizedState=null)}var l=0!=(1&iPe.current),d=o;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var h=d.memoizedProps;p=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!l)}}if(p){var m=d.updateQueue;if(null===m){var g=new Set;g.add(u),d.updateQueue=g}else m.add(u);if(0==(2&d.mode)){if(d.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var v=OBe(1073741823,null);v.tag=2,FBe(i,v)}i.expirationTime=1073741823;break e}s=void 0,i=t;var y=a.pingCache;if(null===y?(y=a.pingCache=new WLe,s=new Set,y.set(u,s)):void 0===(s=y.get(u))&&(s=new Set,y.set(u,s)),!s.has(i)){s.add(i);var b=nVe.bind(null,a,u,i);u.then(b,b)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);s=Error((ARe(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+_Re(i))}uUe!==rUe&&(uUe=eUe),s=ILe(s,i),d=o;do{switch(d.tag){case 3:u=s,d.effectTag|=4096,d.expirationTime=t,MBe(d,zLe(d,u,t));break e;case 1:u=s;var x=d.type,k=d.stateNode;if(0==(64&d.effectTag)&&("function"==typeof x.getDerivedStateFromError||null!==k&&"function"==typeof k.componentDidCatch&&(null===xUe||!xUe.has(k)))){d.effectTag|=4096,d.expirationTime=t,MBe(d,jLe(d,u,t));break e}}d=d.return}while(null!==d)}iUe=KUe(iUe)}catch(e){t=e;continue}break}}function WUe(){var e=qLe.current;return qLe.current=VPe,null===e?VPe:e}function zUe(e,t){e<lUe&&2<e&&(lUe=e),null!==t&&e<dUe&&2<e&&(dUe=e,pUe=t)}function jUe(e){e>fUe&&(fUe=e)}function HUe(){for(;null!==iUe;)iUe=qUe(iUe)}function GUe(){for(;null!==iUe&&!aBe();)iUe=qUe(iUe)}function qUe(e){var t=HLe(e.alternate,e,sUe);return e.memoizedProps=e.pendingProps,null===t&&(t=KUe(e)),KLe.current=null,t}function KUe(e){iUe=e;do{var t=iUe.alternate;if(e=iUe.return,0==(2048&iUe.effectTag)){if(t=kLe(t,iUe,sUe),1===sUe||1!==iUe.childExpirationTime){for(var n=0,r=iUe.child;null!==r;){var a=r.expirationTime,o=r.childExpirationTime;a>n&&(n=a),o>n&&(n=o),r=r.sibling}iUe.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=iUe.firstEffect),null!==iUe.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=iUe.firstEffect),e.lastEffect=iUe.lastEffect),1<iUe.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=iUe:e.firstEffect=iUe,e.lastEffect=iUe))}else{if(null!==(t=wLe(iUe)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=iUe.sibling))return t;iUe=e}while(null!==iUe);return uUe===ZLe&&(uUe=rUe),null}function XUe(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function QUe(e){var t=dBe();return fBe(99,YUe.bind(null,e,t)),null}function YUe(e,t){do{ZUe()}while(null!==wUe);if((aUe&(YLe|$Le))!==XLe)throw Error(h_e(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(h_e(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var a=XUe(n);if(e.firstPendingTime=a,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===oUe&&(iUe=oUe=null,sUe=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,a=n.firstEffect):a=n:a=n.firstEffect,null!==a){var o=aUe;aUe|=$Le,KLe.current=null,BFe=cFe;var i=_Fe();if(RFe(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{var u=(s=(s=i.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(u&&0!==u.rangeCount){s=u.anchorNode;var c=u.anchorOffset,l=u.focusNode;u=u.focusOffset;try{s.nodeType,l.nodeType}catch(e){s=null;break e}var d=0,p=-1,f=-1,h=0,m=0,g=i,v=null;t:for(;;){for(var y;g!==s||0!==c&&3!==g.nodeType||(p=d+c),g!==l||0!==u&&3!==g.nodeType||(f=d+u),3===g.nodeType&&(d+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===i)break t;if(v===s&&++h===c&&(p=d),v===l&&++m===u&&(f=d),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}s=-1===p||-1===f?null:{start:p,end:f}}else s=null}s=s||{start:0,end:0}}else s=null;PFe={activeElementDetached:null,focusedElem:i,selectionRange:s},cFe=!1,vUe=a;do{try{$Ue()}catch(e){if(null===vUe)throw Error(h_e(330));tVe(vUe,e),vUe=vUe.nextEffect}}while(null!==vUe);vUe=a;do{try{for(i=e,s=t;null!==vUe;){var b=vUe.effectTag;if(16&b&&eOe(vUe.stateNode,""),128&b){var x=vUe.alternate;if(null!==x){var k=x.ref;null!==k&&("function"==typeof k?k(null):k.current=null)}}switch(1038&b){case 2:DLe(vUe),vUe.effectTag&=-3;break;case 6:DLe(vUe),vUe.effectTag&=-3,ULe(vUe.alternate,vUe);break;case 1024:vUe.effectTag&=-1025;break;case 1028:vUe.effectTag&=-1025,ULe(vUe.alternate,vUe);break;case 4:ULe(vUe.alternate,vUe);break;case 8:LLe(i,c=vUe,s),FLe(c)}vUe=vUe.nextEffect}}catch(e){if(null===vUe)throw Error(h_e(330));tVe(vUe,e),vUe=vUe.nextEffect}}while(null!==vUe);if(k=PFe,x=_Fe(),b=k.focusedElem,s=k.selectionRange,x!==b&&b&&b.ownerDocument&&AFe(b.ownerDocument.documentElement,b)){null!==s&&RFe(b)&&(x=s.start,void 0===(k=s.end)&&(k=x),"selectionStart"in b?(b.selectionStart=x,b.selectionEnd=Math.min(k,b.value.length)):(k=(x=b.ownerDocument||document)&&x.defaultView||window).getSelection&&(k=k.getSelection(),c=b.textContent.length,i=Math.min(s.start,c),s=void 0===s.end?i:Math.min(s.end,c),!k.extend&&i>s&&(c=s,s=i,i=c),c=NFe(b,i),l=NFe(b,s),c&&l&&(1!==k.rangeCount||k.anchorNode!==c.node||k.anchorOffset!==c.offset||k.focusNode!==l.node||k.focusOffset!==l.offset)&&((x=x.createRange()).setStart(c.node,c.offset),k.removeAllRanges(),i>s?(k.addRange(x),k.extend(l.node,l.offset)):(x.setEnd(l.node,l.offset),k.addRange(x))))),x=[];for(k=b;k=k.parentNode;)1===k.nodeType&&x.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<x.length;b++)(k=x[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}cFe=!!BFe,PFe=BFe=null,e.current=n,vUe=a;do{try{for(b=e;null!==vUe;){var w=vUe.effectTag;if(36&w&&RLe(b,vUe.alternate,vUe),128&w){x=void 0;var I=vUe.ref;if(null!==I){var C=vUe.stateNode;switch(vUe.tag){case 5:x=C;break;default:x=C}"function"==typeof I?I(x):I.current=x}}vUe=vUe.nextEffect}}catch(e){if(null===vUe)throw Error(h_e(330));tVe(vUe,e),vUe=vUe.nextEffect}}while(null!==vUe);vUe=null,oBe(),aUe=o}else e.current=n;if(kUe)kUe=!1,wUe=e,IUe=t;else for(vUe=a;null!==vUe;)t=vUe.nextEffect,vUe.nextEffect=null,vUe=t;if(0===(t=e.firstPendingTime)&&(xUe=null),1073741823===t?e===EUe?SUe++:(SUe=0,EUe=e):SUe=0,"function"==typeof aVe&&aVe(n.stateNode,r),FUe(e),yUe)throw yUe=!1,e=bUe,bUe=null,e;return(aUe&QLe)!==XLe||gBe(),null}function $Ue(){for(;null!==vUe;){var e=vUe.effectTag;0!=(256&e)&&NLe(vUe.alternate,vUe),0==(512&e)||kUe||(kUe=!0,hBe(97,(function(){return ZUe(),null}))),vUe=vUe.nextEffect}}function ZUe(){if(90!==IUe){var e=97<IUe?97:IUe;return IUe=90,fBe(e,JUe)}}function JUe(){if(null===wUe)return!1;var e=wUe;if(wUe=null,(aUe&(YLe|$Le))!==XLe)throw Error(h_e(331));var t=aUe;for(aUe|=$Le,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ALe(5,n),_Le(5,n)}}catch(t){if(null===e)throw Error(h_e(330));tVe(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return aUe=t,gBe(),!0}function eVe(e,t,n){FBe(e,t=zLe(e,t=ILe(n,t),1073741823)),null!==(e=RUe(e,1073741823))&&FUe(e)}function tVe(e,t){if(3===e.tag)eVe(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){eVe(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===xUe||!xUe.has(r))){FBe(n,e=jLe(n,e=ILe(t,e),1073741823)),null!==(n=RUe(n,1073741823))&&FUe(n);break}}n=n.return}}function nVe(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),oUe===e&&sUe===n?uUe===nUe||uUe===tUe&&1073741823===lUe&&lBe()-mUe<gUe?UUe(e,sUe):hUe=!0:vVe(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,FUe(e)))}function rVe(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=AUe(t=NUe(),e,null)),null!==(e=RUe(e,t))&&FUe(e)}HLe=function(e,t,n){var r=t.expirationTime;if(null!==e){var a=t.pendingProps;if(e.memoizedProps!==a||PDe.current)eLe=!0;else{if(r<n){switch(eLe=!1,t.tag){case 3:cLe(t),ZPe();break;case 5:if(aPe(t),4&t.mode&&1!==n&&a.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:VDe(t.type)&&HDe(t);break;case 4:nPe(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,a=t.type._context,MDe(xBe,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?mLe(e,t,n):(MDe(iPe,1&iPe.current),null!==(t=bLe(e,t,n))?t.sibling:null);MDe(iPe,1&iPe.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return yLe(e,t,n);t.effectTag|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null),MDe(iPe,iPe.current),!r)return null}return bLe(e,t,n)}eLe=!1}}else eLe=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,a=UDe(t,BDe.current),TBe(t,n),a=yPe(null,t,r,e,a,n),t.effectTag|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,VDe(r)){var o=!0;HDe(t)}else o=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,_Be(t);var i=r.getDerivedStateFromProps;"function"==typeof i&&UBe(t,r,i,e),a.updater=VBe,t.stateNode=a,a._reactInternalFiber=t,HBe(t,r,e,n),t=uLe(null,t,r,!0,o,n)}else t.tag=0,tLe(null,t,a,n),t=t.child;return t;case 16:e:{if(a=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,NRe(a),1!==a._status)throw a._result;switch(a=a._result,t.type=a,o=t.tag=lVe(a),e=bBe(a,e),o){case 0:t=iLe(null,t,a,e,n);break e;case 1:t=sLe(null,t,a,e,n);break e;case 11:t=nLe(null,t,a,e,n);break e;case 14:t=rLe(null,t,a,bBe(a.type,e),r,n);break e}throw Error(h_e(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,iLe(e,t,r,a=t.elementType===r?a:bBe(r,a),n);case 1:return r=t.type,a=t.pendingProps,sLe(e,t,r,a=t.elementType===r?a:bBe(r,a),n);case 3:if(cLe(t),r=t.updateQueue,null===e||null===r)throw Error(h_e(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,RBe(e,t),DBe(t,r,null,n),(r=t.memoizedState.element)===a)ZPe(),t=bLe(e,t,n);else{if((a=t.stateNode.hydrate)&&(GPe=zFe(t.stateNode.containerInfo.firstChild),HPe=t,a=qPe=!0),a)for(n=YBe(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else tLe(e,t,r,n),ZPe();t=t.child}return t;case 5:return aPe(t),null===e&&QPe(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,UFe(r,a)?i=null:null!==o&&UFe(r,o)&&(t.effectTag|=16),oLe(e,t),4&t.mode&&1!==n&&a.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(tLe(e,t,i,n),t=t.child),t;case 6:return null===e&&QPe(t),null;case 13:return mLe(e,t,n);case 4:return nPe(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=QBe(t,null,r,n):tLe(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,nLe(e,t,r,a=t.elementType===r?a:bBe(r,a),n);case 7:return tLe(e,t,t.pendingProps,n),t.child;case 8:case 12:return tLe(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value;var s=t.type._context;if(MDe(xBe,s._currentValue),s._currentValue=o,null!==i)if(s=i.value,0===(o=sDe(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(i.children===a.children&&!PDe.current){t=bLe(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){i=s.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===s.tag&&((c=OBe(n,null)).tag=2,FBe(s,c)),s.expirationTime<n&&(s.expirationTime=n),null!==(c=s.alternate)&&c.expirationTime<n&&(c.expirationTime=n),EBe(s.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else i=10===s.tag&&s.type===t.type?null:s.child;if(null!==i)i.return=s;else for(i=s;null!==i;){if(i===t){i=null;break}if(null!==(s=i.sibling)){s.return=i.return,i=s;break}i=i.return}s=i}tLe(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(o=t.pendingProps).children,TBe(t,n),r=r(a=NBe(a,o.unstable_observedBits)),t.effectTag|=1,tLe(e,t,r,n),t.child;case 14:return o=bBe(a=t.type,t.pendingProps),rLe(e,t,a,o=bBe(a.type,o),r,n);case 15:return aLe(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:bBe(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,VDe(r)?(e=!0,HDe(t)):e=!1,TBe(t,n),zBe(t,r,a),HBe(t,r,a,n),uLe(null,t,r,!0,e,n);case 19:return yLe(e,t,n)}throw Error(h_e(156,t.tag))};var aVe=null,oVe=null;function iVe(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);aVe=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},oVe=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}return!0}function sVe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function uVe(e,t,n,r){return new sVe(e,t,n,r)}function cVe(e){return!(!(e=e.prototype)||!e.isReactComponent)}function lVe(e){if("function"==typeof e)return cVe(e)?1:0;if(null!=e){if((e=e.$$typeof)===xRe)return 11;if(e===IRe)return 14}return 2}function dVe(e,t){var n=e.alternate;return null===n?((n=uVe(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function pVe(e,t,n,r,a,o){var i=2;if(r=e,"function"==typeof e)cVe(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case hRe:return fVe(n.children,a,o,t);case bRe:i=8,a|=7;break;case mRe:i=8,a|=1;break;case gRe:return(e=uVe(12,n,t,8|a)).elementType=gRe,e.type=gRe,e.expirationTime=o,e;case kRe:return(e=uVe(13,n,t,a)).type=kRe,e.elementType=kRe,e.expirationTime=o,e;case wRe:return(e=uVe(19,n,t,a)).elementType=wRe,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case vRe:i=10;break e;case yRe:i=9;break e;case xRe:i=11;break e;case IRe:i=14;break e;case CRe:i=16,r=null;break e;case SRe:i=22;break e}throw Error(h_e(130,null==e?e:typeof e,""))}return(t=uVe(i,n,t,a)).elementType=e,t.type=r,t.expirationTime=o,t}function fVe(e,t,n,r){return(e=uVe(7,e,r,t)).expirationTime=n,e}function hVe(e,t,n){return(e=uVe(6,e,null,t)).expirationTime=n,e}function mVe(e,t,n){return(t=uVe(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gVe(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function vVe(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function yVe(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function bVe(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function xVe(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function kVe(e,t,n,r){var a=t.current,o=NUe(),i=PBe.suspense;o=AUe(o,a,i);e:if(n){t:{if(fOe(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(h_e(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(VDe(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(h_e(171))}if(1===n.tag){var u=n.type;if(VDe(u)){n=jDe(n,u,s);break e}}n=s}else n=DDe;return null===t.context?t.context=n:t.pendingContext=n,(t=OBe(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),FBe(a,t),_Ue(a,o),o}function wVe(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function IVe(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function CVe(e,t){IVe(e,t),(e=e.alternate)&&IVe(e,t)}function SVe(e,t,n){var r=new gVe(e,t,n=null!=n&&!0===n.hydrate),a=uVe(3,null,null,2===t?7:1===t?3:0);r.current=a,a.stateNode=r,_Be(a),e[KFe]=r.current,n&&0!==t&&jOe(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function EVe(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function TVe(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new SVe(e,0,t?{hydrate:!0}:void 0)}function NVe(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o._internalRoot;if("function"==typeof a){var s=a;a=function(){var e=wVe(i);s.call(e)}}kVe(t,i,e,a)}else{if(o=n._reactRootContainer=TVe(n,r),i=o._internalRoot,"function"==typeof a){var u=a;a=function(){var e=wVe(i);u.call(e)}}LUe((function(){kVe(t,i,e,a)}))}return wVe(i)}function AVe(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:fRe,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function _Ve(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!EVe(t))throw Error(h_e(200));return AVe(e,t,null,n)}SVe.prototype.render=function(e){kVe(e,this._internalRoot,null,null)},SVe.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;kVe(null,e,null,(function(){t[KFe]=null}))},_Oe=function(e){if(13===e.tag){var t=yBe(NUe(),150,100);_Ue(e,t),CVe(e,t)}},ROe=function(e){13===e.tag&&(_Ue(e,3),CVe(e,3))},OOe=function(e){if(13===e.tag){var t=NUe();_Ue(e,t=AUe(t,e,null)),CVe(e,t)}},P_e=function(e,t,n){switch(t){case"input":if(URe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=$Fe(r);if(!a)throw Error(h_e(90));DRe(r),URe(r,a)}}}break;case"textarea":KRe(e,n);break;case"select":null!=(t=n.value)&&HRe(e,!!n.multiple,t,!1)}},j_e=PUe,H_e=function(e,t,n,r,a){var o=aUe;aUe|=4;try{return fBe(98,e.bind(null,t,n,r,a))}finally{(aUe=o)===XLe&&gBe()}},G_e=function(){(aUe&(1|YLe|$Le))===XLe&&(BUe(),ZUe())},q_e=function(e,t){var n=aUe;aUe|=2;try{return e(t)}finally{(aUe=n)===XLe&&gBe()}};var RVe={Events:[QFe,YFe,$Fe,D_e,O_e,aMe,function(e){bOe(e,rMe)},W_e,z_e,hFe,wOe,ZUe,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;iVe(cb({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:uRe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=vOe(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:XFe,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});var OVe=RVe,FVe=_Ve,MVe=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(h_e(188));throw Error(h_e(268,Object.keys(e)))}return e=null===(e=vOe(t))?null:e.stateNode},DVe=function(e,t){if((aUe&(YLe|$Le))!==XLe)throw Error(h_e(187));var n=aUe;aUe|=1;try{return fBe(99,e.bind(null,t))}finally{aUe=n,gBe()}},BVe=function(e,t,n){if(!EVe(t))throw Error(h_e(200));return NVe(null,e,t,!0,n)},PVe=function(e,t,n){if(!EVe(t))throw Error(h_e(200));return NVe(null,e,t,!1,n)},LVe=function(e){if(!EVe(e))throw Error(h_e(40));return!!e._reactRootContainer&&(LUe((function(){NVe(null,null,e,!1,(function(){e._reactRootContainer=null,e[KFe]=null}))})),!0)},UVe=PUe,VVe=function(e,t){return _Ve(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},WVe=function(e,t,n,r){if(!EVe(n))throw Error(h_e(200));if(null==e||void 0===e._reactInternalFiber)throw Error(h_e(38));return NVe(e,t,n,!1,r)},zVe="16.14.0",jVe={__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:OVe,createPortal:FVe,findDOMNode:MVe,flushSync:DVe,hydrate:BVe,render:PVe,unmountComponentAtNode:LVe,unstable_batchedUpdates:UVe,unstable_createPortal:VVe,unstable_renderSubtreeIntoContainer:WVe,version:zVe},HVe=0,GVe=null,qVe=null,KVe=function(e){return e()},XVe=function(){return null},QVe=function(){return++HVe},YVe=function(){},$Ve=function(e,t,n){return n()},ZVe=function(){},JVe=function(e){return e},eWe={__interactionsRef:GVe,__subscriberRef:qVe,unstable_clear:KVe,unstable_getCurrent:XVe,unstable_getThreadID:QVe,unstable_subscribe:YVe,unstable_trace:$Ve,unstable_unsubscribe:ZVe,unstable_wrap:JVe},tWe=(i((function(e,t){})),i((function(e){e.exports=eWe})),i((function(e,t){})),i((function(e){!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=jVe}))),nWe=function(e,t,n,r,a,o,i,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,o,i,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}},rWe=nWe,aWe=i((function(e,t){!function(e,t){t=t&&t.hasOwnProperty("default")?t.default:t;var n=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/read_id_card_info_sync",e,t)},e}(),r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};
/*! *****************************************************************************
	  Copyright (c) Microsoft Corporation. All rights reserved.
	  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	  this file except in compliance with the License. You may obtain a copy of the
	  License at http://www.apache.org/licenses/LICENSE-2.0

	  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	  MERCHANTABLITY OR NON-INFRINGEMENT.

	  See the Apache Version 2.0 License for specific language governing permissions
	  and limitations under the License.
	  ***************************************************************************** */function o(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}function i(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function s(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var c=function(){function e(e){this.httpClient=e}return e.prototype.uploadImage=function(e){return this.httpClient.postFormData("/v1/images",e)},e.prototype.request=function(e){var t="application/pdf"===e.file.type;return this.httpClient.postFormData(t?"/v1/files":"/v1/images",e)},e.prototype.requestWithHeaders=function(e,t){return this.httpClient.postFormData("/v1/images",e,t)},e.prototype.download=function(e){return s(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.downloadFile("/v1/images/"+e)];case 1:return t=n.sent(),[4,URL.createObjectURL(t)];case 2:return[2,n.sent()]}}))}))},e.prototype.updateMetadata=function(e,t){return this.httpClient.patch("/v1/images/"+e,t)},e}(),l=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/files",e,t)},e.prototype.uploadFile=function(e){return this.httpClient.postFormData("/v1/files",e)},e.prototype.requestWithHeaders=function(e,t){return this.httpClient.postFormData("/v1/files",e,t)},e}(),d=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/compare_faces_sync",e,t)},e}(),p=function(){function e(e){this.httpClient=e}return e.prototype.getClientSettings=function(){return this.httpClient.get("/v1/client_settings")},e.prototype.request=function(){return this.httpClient.get("/v1/client_settings")},e}(),f=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/verify_face_liveness_sync",e,t)},e}(),h=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/verify_id_card_sanity_sync",e,t)},e}(),m=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/verify_portrait_sanity_sync",e,t)},e}(),g=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/detect_id_card_tampering_sync",e,t)},e.prototype.requestWithAuthHeaders=function(e,t){return this.httpClient.post("/v1/detect_id_card_tampering_sync",e,t)},e}(),v=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/search_faces_sync",e,t)},e.prototype.indexFaces=function(e,t){return this.httpClient.post("/v1/index_faces_sync",e,t)},e.prototype.deleteFaces=function(e,t){return this.httpClient.post("/v1/delete_faces",e,t)},e.prototype.downloadFaceImage=function(e){return s(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return[4,this.httpClient.downloadFile("/v1/face_images/"+e)];case 1:return t=n.sent(),[2,URL.createObjectURL(t)]}}))}))},e}(),y=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.postFormData("/v1/convert_pdf_sync",e,t)},e}(),b=function(){function e(e){this.httpClient=e}return e.prototype.request=function(e,t){return this.httpClient.post("/v1/ekyc_pdf",e,t)},e}(),x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==a?a:"undefined"!=typeof self?self:{};function k(e,t){return e(t={exports:{}},t.exports),t.exports}var w=k((function(e){var t,n;t=x,n=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var n=e.shift();e[0]=n+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<e.length;r++){var a=e[r];if("string"!=typeof a)throw new TypeError("Url must be a string. Received "+a);""!==a&&(r>0&&(a=a.replace(/^[\/]+/,"")),a=r<e.length-1?a.replace(/[\/]+$/,""):a.replace(/[\/]+$/,"/"),t.push(a))}var o=t.join("/"),i=(o=o.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return i.shift()+(i.length>0?"?":"")+i.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=n():t.urljoin=n()}));function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var C=function(e,t,n,r){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var o=/\+/g;e=e.split(t);var i=1e3;r&&"number"==typeof r.maxKeys&&(i=r.maxKeys);var s=e.length;i>0&&s>i&&(s=i);for(var u=0;u<s;++u){var c,l,d,p,f=e[u].replace(o,"%20"),h=f.indexOf(n);h>=0?(c=f.substr(0,h),l=f.substr(h+1)):(c=f,l=""),d=decodeURIComponent(c),p=decodeURIComponent(l),I(a,d)?Array.isArray(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a},S=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},E=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(r){var a=encodeURIComponent(S(r))+n;return Array.isArray(e[r])?e[r].map((function(e){return a+encodeURIComponent(S(e))})).join(t):a+encodeURIComponent(S(e[r]))})).join(t):r?encodeURIComponent(S(r))+n+encodeURIComponent(S(e)):""},T=k((function(e,t){t.decode=t.parse=C,t.encode=t.stringify=E})),N=(T.decode,T.parse,T.encode,T.stringify),A=function(){function e(e){this.authorizer=e.authorizer,this.domain=e.domain,this.onError=e.onError,this.configHeaders=e.headers}return e.prototype.get=function(e,t,n){var r=new URL(this.resolveUrl(e));return t&&(r.search=N(t)),this.request(r.toString(),{requestPath:e,method:"GET",headers:n})},e.prototype.post=function(e,t,n){var a=this.resolveUrl(e);return this.request(a,{requestPath:e,method:"POST",body:JSON.stringify(t),headers:r({"Content-Type":"application/json"},n)})},e.prototype.postFormData=function(e,t,n){var r,a=t instanceof FormData?t:(r=t,Object.entries(r).reduce((function(e,t){var n=t[0],r=t[1];return Array.isArray(r)?r.forEach((function(t,a){return e.append(n+"["+a+"]",r)})):!(r instanceof Object)||r instanceof File||r instanceof Date||r instanceof Blob?e.append(n,r):Object.entries(r).forEach((function(t,a){return e.append(n+"["+a+"]",r[a])})),e}),new FormData)),o=this.resolveUrl(e);return this.request(o,{requestPath:e,method:"POST",body:a,headers:n})},e.prototype.patch=function(e,t,n){var a=this.resolveUrl(e);return this.request(a,{requestPath:e,method:"PATCH",body:JSON.stringify(t),headers:r({"Content-Type":"application/json"},n)})},e.prototype.delete=function(e,t,n){var a=this.resolveUrl(e);return this.request(a,{requestPath:e,method:"DELETE",body:JSON.stringify(t),headers:r({"Content-Type":"application/json"},n)})},e.prototype.downloadFile=function(e){var t=this.resolveUrl(e);return this.request(t,{requestPath:e,method:"GET"},"blob")},e.prototype.request=function(e,t,n){return void 0===n&&(n="json"),s(this,void 0,void 0,(function(){var a,o,i,s;return u(this,(function(u){switch(u.label){case 0:return a={},o={},this.authorizer&&(a=this.authorizer.getHeaders(t)),this.configHeaders&&(o=this.configHeaders),t.headers=r(r(r({},t.headers),a),o),[4,fetch(e,t)];case 1:return i=u.sent(),[4,"blob"===n?i.blob():i.json()];case 2:if((s=u.sent()).errors&&this.onError)throw this.onError(s.errors),s;return[2,s]}}))}))},e.prototype.resolveUrl=function(e){return w(this.domain,e)},e}(),_=function(){function e(e){this.mocks=e}return e.prototype.get=function(e,t){return this.findInMocks(e,t)},e.prototype.post=function(e,t){return this.findInMocks(e)},e.prototype.postFormData=function(e,t){return this.findInMocks(e)},e.prototype.patch=function(e,t){return this.findInMocks(e)},e.prototype.delete=function(e,t){return this.findInMocks(e)},e.prototype.downloadFile=function(e){return this.findInMocks(e)},e.prototype.resolveUrl=function(e){return this.mocks.resolveUrl?this.mocks.resolveUrl(e):e},e.prototype.findInMocks=function(e,t){return s(this,void 0,void 0,(function(){return u(this,(function(n){return this.mocks[e]?"function"==typeof this.mocks[e]?[2,Promise.resolve(this.mocks[e](t))]:[2,Promise.resolve(this.mocks[e])]:[2,Promise.reject(new Error(e+" is not presented in mocks"))]}))}))},e}(),R=k((function(e,t){var n;e.exports=n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},a=r.lib={},o=a.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},i=a.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,a=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<a;o++){var i=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=i<<24-(r+o)%4*8}else for(o=0;o<a;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],a=function(t){t=t;var n=987654321,r=4294967295;return function(){var a=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return a/=4294967296,(a+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var s=a(4294967296*(n||e.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new i.init(r,t)}}),s=r.enc={},u=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var o=t[a>>>2]>>>24-a%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new i.init(n,t/2)}},c=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var o=t[a>>>2]>>>24-a%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new i.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=a.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,o=this.blockSize,s=a/(4*o),u=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*o,c=e.min(4*u,a);if(u){for(var l=0;l<u;l+=o)this._doProcessBlock(r,l);var d=r.splice(0,u);n.sigBytes-=c}return new i.init(d,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(a.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math)})),O=k((function(e,t){var n,r,a;e.exports=(r=(n=a=R).lib.WordArray,n.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var a=[],o=0;o<n;o+=3)for(var i=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)a.push(r.charAt(i>>>6*(3-s)&63));var u=r.charAt(64);if(u)for(;a.length%4;)a.push(u);return a.join("")},parse:function(e){var t=e.length,n=this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var o=0;o<n.length;o++)a[n.charCodeAt(o)]=o}var i=n.charAt(64);if(i){var s=e.indexOf(i);-1!==s&&(t=s)}return function(e,t,n){for(var a=[],o=0,i=0;i<t;i++)if(i%4){var s=n[e.charCodeAt(i-1)]<<i%4*2,u=n[e.charCodeAt(i)]>>>6-i%4*2;a[o>>>2]|=(s|u)<<24-o%4*8,o++}return r.create(a,o)}(e,t,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},a.enc.Base64)})),F=(k((function(e,t){var n;e.exports=(n=R,function(e){var t=n,r=t.lib,a=r.WordArray,o=r.Hasher,i=t.algo,s=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,a=0;a<64;)t(r)&&(a<8&&(s[a]=n(e.pow(r,.5))),u[a]=n(e.pow(r,1/3)),a++),r++}();var c=[],l=i.SHA256=o.extend({_doReset:function(){this._hash=new a.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],o=n[2],i=n[3],s=n[4],l=n[5],d=n[6],p=n[7],f=0;f<64;f++){if(f<16)c[f]=0|e[t+f];else{var h=c[f-15],m=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=c[f-2],v=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[f]=m+c[f-7]+v+c[f-16]}var y=r&a^r&o^a&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),x=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&d)+u[f]+c[f];p=d,d=l,l=s,s=i+x|0,i=o,o=a,a=r,r=x+(b+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+o|0,n[3]=n[3]+i|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+d|0,n[7]=n[7]+p|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;return n[a>>>5]|=128<<24-a%32,n[14+(a+64>>>9<<4)]=e.floor(r/4294967296),n[15+(a+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),n.SHA256)})),k((function(e,t){var n,r,a;e.exports=(r=(n=R).lib.Base,a=n.enc.Utf8,void(n.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=a.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),i=this._iKey=t.clone(),s=o.words,u=i.words,c=0;c<n;c++)s[c]^=1549556828,u[c]^=909522486;o.sigBytes=i.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))})),k((function(e,t){e.exports=R.HmacSHA256}))),M=function(){function e(e,t){this.accessKey=e,this.keySecret=t}return e.prototype.getHeaders=function(e){var t=function(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+(0===(n=e.getTimezoneOffset())?"Z":(r=n>0?"-":"+",n=Math.abs(n),r+t(Math.floor(n/60))+":"+t(n%60)));var n,r}(new Date);return{Authorization:this.generateAuthorization(e.requestPath,e.method,t),"X-TV-Timestamp":t}},e.prototype.generateAuthorization=function(e,t,n){var r=this.computeStringToSign(e,t,n),a=O.stringify(this.computeSignature(r));return this.formatAuthToken("TV",a)},e.prototype.formatAuthToken=function(e,t){return e+" "+this.accessKey+":"+t},e.prototype.computeStringToSign=function(e,t,n){return t+"\n"+e+"\n"+n},e.prototype.computeSignature=function(e){return F(e,this.keySecret)},e}();function D(e){switch(e){case"testing":return"https://tv-testing.trustingsocial.com/api";case"staging":return"https://tv-staging.trustingsocial.com/api";case"production":return"https://vn-vision.trustingsocial.com/api";default:return e}}function B(e,t,n,r){void 0===n&&(n="production");var a=(void 0===r?{}:r).headers,o=new M(e,t),i=D(n);return new A({authorizer:o,domain:i,headers:a})}var P=function(){function e(e){void 0===e&&(e="production");var t=new A({domain:D(e)});this.imagesService=new c(t),this.detectIDTamperingService=new g(t)}return e.prototype.uploadImage=function(e,t){return this.imagesService.requestWithHeaders(e,t)},e.prototype.detectTampering=function(e,t){return this.detectIDTamperingService.requestWithAuthHeaders(e,t)},e}();function L(e){var t=e.headerIndex;return function(e,n,a){var o=a.value,i=r({},a);return i.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return s(this,void 0,void 0,(function(){var n,a,i,s;return u(this,(function(u){switch(u.label){case 0:return this.transactionEnabled?[4,this.transactionManager.begin()]:[3,4];case 1:return n=u.sent(),a=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r}(e),(i=r({},a[t]))["X-TV-Transaction"]=n,a[t]=i,[4,o.apply(this,a)];case 2:return s=u.sent(),[4,this.transactionManager.end()];case 3:return u.sent(),[2,s];case 4:return[4,o.apply(this,e)];case 5:return[2,u.sent()]}}))}))},i}}function U(e){return void 0===e&&(e={encryptedField:"data"}),function(t,n,a){var o=a.value,i=r({},a);return i.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return s(this,void 0,void 0,(function(){var n,r;return u(this,(function(a){switch(a.label){case 0:return[4,o.apply(this,t)];case 1:return n=a.sent(),this.encryptionEnabled&&"string"==typeof n[e.encryptedField]?(r=this.encryptionService.decrypt(n[e.encryptedField],{transactionID:this.transactionManager.currentTransactionID}),[2,JSON.parse(r)]):[2,n]}}))}))},i}}var V=function(){function e(e){this.httpClient=e,this.transactionID="",this.totalTransactions=0,this.currentTransaction=0}return Object.defineProperty(e.prototype,"currentTransactionID",{get:function(){return this.transactionID},enumerable:!0,configurable:!0}),e.prototype.begin=function(){return s(this,void 0,void 0,(function(){var e,t,n=this;return u(this,(function(r){switch(r.label){case 0:return e=this.totalTransactions++,[4,new Promise((function(t,r){var a=window.performance.now(),o=setInterval((function(){e===n.currentTransaction&&(clearInterval(o),t(!0)),window.performance.now()-a>=3e3&&(clearInterval(o),r(new Error("Transaction timeout")))}),100)}))];case 1:return r.sent(),[4,this.httpClient.post("/v1/transactions",{})];case 2:return t=r.sent().data,this.transactionID=t.id,[2,t.id]}}))}))},e.prototype.end=function(){return s(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return[4,this.httpClient.post("/v1/transactions/"+this.transactionID+"/finish")];case 1:return e=t.sent(),this.transactionID="",this.currentTransaction++,[2,e]}}))}))},e}(),W={options:{usePureJavaScript:!1}},z={},j=z,H={};z.encode=function(e,t,n){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==n&&"number"!=typeof n)throw new TypeError('"maxline" must be a number.');var r="";if(e instanceof Uint8Array){var a=0,o=t.length,i=t.charAt(0),s=[0];for(a=0;a<e.length;++a){for(var u=0,c=e[a];u<s.length;++u)c+=s[u]<<8,s[u]=c%o,c=c/o|0;for(;c>0;)s.push(c%o),c=c/o|0}for(a=0;0===e[a]&&a<e.length-1;++a)r+=i;for(a=s.length-1;a>=0;--a)r+=t[s[a]]}else r=function(e,t){var n=0,r=t.length,a=t.charAt(0),o=[0];for(n=0;n<e.length();++n){for(var i=0,s=e.at(n);i<o.length;++i)s+=o[i]<<8,o[i]=s%r,s=s/r|0;for(;s>0;)o.push(s%r),s=s/r|0}var u="";for(n=0;0===e.at(n)&&n<e.length()-1;++n)u+=a;for(n=o.length-1;n>=0;--n)u+=t[o[n]];return u}(e,t);if(n){var l=new RegExp(".{1,"+n+"}","g");r=r.match(l).join("\r\n")}return r},z.decode=function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');var n=H[t];if(!n){n=H[t]=[];for(var r=0;r<t.length;++r)n[t.charCodeAt(r)]=r}e=e.replace(/\s/g,"");var a=t.length,o=t.charAt(0),i=[0];for(r=0;r<e.length;r++){var s=n[e.charCodeAt(r)];if(void 0===s)return;for(var u=0,c=s;u<i.length;++u)c+=i[u]*a,i[u]=255&c,c>>=8;for(;c>0;)i.push(255&c),c>>=8}for(var l=0;e[l]===o&&l<e.length-1;++l)i.push(0);return"undefined"!=typeof Buffer?Buffer.from(i.reverse()):new Uint8Array(i.reverse())},k((function(e){var t=e.exports=W.util=W.util||{};function n(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function r(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(t.isArrayBuffer(e)||t.isArrayBufferView(e))if("undefined"!=typeof Buffer&&e instanceof Buffer)this.data=e.toString("binary");else{var n=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,n)}catch(e){for(var a=0;a<n.length;++a)this.putByte(n[a])}}else(e instanceof r||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return t.nextTick=process.nextTick,void("function"==typeof setImmediate?t.setImmediate=setImmediate:t.setImmediate=t.nextTick);if("function"==typeof setImmediate)return t.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(t.nextTick=function(e){return setImmediate(e)});if(t.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",n=[];t.setImmediate=function(t){n.push(t),1===n.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(t){if(t.source===window&&t.data===e){t.stopPropagation();var r=n.slice();n.length=0,r.forEach((function(e){e()}))}}),!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),a=!0,o=document.createElement("div");n=[],new MutationObserver((function(){var e=n.slice();n.length=0,e.forEach((function(e){e()}))})).observe(o,{attributes:!0});var i=t.setImmediate;t.setImmediate=function(e){Date.now()-r>15?(r=Date.now(),i(e)):(n.push(e),1===n.length&&o.setAttribute("a",a=!a))}}t.nextTick=t.setImmediate}(),t.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,t.globalScope=t.isNodejs?x:"undefined"==typeof self?window:self,t.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},t.isArrayBufferView=function(e){return e&&t.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},t.ByteBuffer=r,t.ByteStringBuffer=r,t.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},t.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},t.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},t.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},t.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var n=this.data;t>0;)1&t&&(n+=e),(t>>>=1)>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this},t.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},t.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(t.encodeUtf8(e))},t.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},t.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},t.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},t.ByteStringBuffer.prototype.putInt=function(e,t){n(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},t.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},t.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},t.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},t.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},t.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},t.ByteStringBuffer.prototype.getInt=function(e){n(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},t.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},t.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},t.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},t.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},t.ByteStringBuffer.prototype.copy=function(){var e=t.createBuffer(this.data);return e.read=this.read,e},t.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},t.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},t.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},t.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e},t.ByteStringBuffer.prototype.toString=function(){return t.decodeUtf8(this.bytes())},t.DataBuffer=function(e,n){n=n||{},this.read=n.readOffset||0,this.growSize=n.growSize||1024;var r=t.isArrayBuffer(e),a=t.isArrayBufferView(e);if(r||a)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in n?n.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in n&&(this.write=n.writeOffset)},t.DataBuffer.prototype.length=function(){return this.write-this.read},t.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},t.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+t);return r.set(n),this.data=new DataView(r.buffer),this},t.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},t.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this},t.DataBuffer.prototype.putBytes=function(e,n){if(t.isArrayBufferView(e)){var r=(a=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-a.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(a),this.write+=r,this}if(t.isArrayBuffer(e)){var a=new Uint8Array(e);return this.accommodate(a.byteLength),new Uint8Array(this.data.buffer).set(a,this.write),this.write+=a.byteLength,this}if(e instanceof t.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&t.isArrayBufferView(e.data))return a=new Uint8Array(e.data.byteLength,e.read,e.length()),this.accommodate(a.byteLength),new Uint8Array(e.data.byteLength,this.write).set(a),this.write+=a.byteLength,this;if(e instanceof t.ByteStringBuffer&&(e=e.data,n="binary"),n=n||"binary","string"==typeof e){var o;if("hex"===n)return this.accommodate(Math.ceil(e.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.hex.decode(e,o,this.write),this;if("base64"===n)return this.accommodate(3*Math.ceil(e.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.base64.decode(e,o,this.write),this;if("utf8"===n&&(e=t.encodeUtf8(e),n="binary"),"binary"===n||"raw"===n)return this.accommodate(e.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.raw.decode(o),this;if("utf16"===n)return this.accommodate(2*e.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=t.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+n)}throw Error("Invalid parameter: "+e)},t.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},t.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},t.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},t.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},t.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},t.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},t.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},t.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},t.DataBuffer.prototype.putInt=function(e,t){n(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},t.DataBuffer.prototype.putSignedInt=function(e,t){return n(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},t.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},t.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},t.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},t.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},t.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},t.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},t.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},t.DataBuffer.prototype.getInt=function(e){n(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},t.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},t.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},t.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},t.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},t.DataBuffer.prototype.copy=function(){return new t.DataBuffer(this)},t.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},t.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},t.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},t.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+="0"),e+=n.toString(16)}return e},t.DataBuffer.prototype.toString=function(e){var n=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return t.binary.raw.encode(n);if("hex"===e)return t.binary.hex.encode(n);if("base64"===e)return t.binary.base64.encode(n);if("utf8"===e)return t.text.utf8.decode(n);if("utf16"===e)return t.text.utf16.decode(n);throw new Error("Invalid encoding: "+e)},t.createBuffer=function(e,n){return n=n||"raw",void 0!==e&&"utf8"===n&&(e=t.encodeUtf8(e)),new t.ByteBuffer(e)},t.fillString=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>>=1)>0&&(e+=e);return n},t.xorBytes=function(e,t,n){for(var r="",a="",o="",i=0,s=0;n>0;--n,++i)a=e.charCodeAt(i)^t.charCodeAt(i),s>=10&&(r+=o,o="",s=0),o+=String.fromCharCode(a),++s;return r+o},t.hexToBytes=function(e){var t="",n=0;for(!0&e.length&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},t.bytesToHex=function(e){return t.createBuffer(e).toHex()},t.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";t.encode64=function(e,t){for(var n,r,o,i="",s="",u=0;u<e.length;)n=e.charCodeAt(u++),r=e.charCodeAt(u++),o=e.charCodeAt(u++),i+=a.charAt(n>>2),i+=a.charAt((3&n)<<4|r>>4),isNaN(r)?i+="==":(i+=a.charAt((15&r)<<2|o>>6),i+=isNaN(o)?"=":a.charAt(63&o)),t&&i.length>t&&(s+=i.substr(0,t)+"\r\n",i=i.substr(t));return s+i},t.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,n,r,a,i="",s=0;s<e.length;)t=o[e.charCodeAt(s++)-43],n=o[e.charCodeAt(s++)-43],r=o[e.charCodeAt(s++)-43],a=o[e.charCodeAt(s++)-43],i+=String.fromCharCode(t<<2|n>>4),64!==r&&(i+=String.fromCharCode((15&n)<<4|r>>2),64!==a&&(i+=String.fromCharCode((3&r)<<6|a)));return i},t.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},t.decodeUtf8=function(e){return decodeURIComponent(escape(e))},t.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:j.encode,decode:j.decode}},t.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},t.binary.raw.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length));for(var a=n=n||0,o=0;o<e.length;++o)r[a++]=e.charCodeAt(o);return t?a-n:r},t.binary.hex.encode=t.bytesToHex,t.binary.hex.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/2)));var a=0,o=n=n||0;for(1&e.length&&(a=1,r[o++]=parseInt(e[0],16));a<e.length;a+=2)r[o++]=parseInt(e.substr(a,2),16);return t?o-n:r},t.binary.base64.encode=function(e,t){for(var n,r,o,i="",s="",u=0;u<e.byteLength;)n=e[u++],r=e[u++],o=e[u++],i+=a.charAt(n>>2),i+=a.charAt((3&n)<<4|r>>4),isNaN(r)?i+="==":(i+=a.charAt((15&r)<<2|o>>6),i+=isNaN(o)?"=":a.charAt(63&o)),t&&i.length>t&&(s+=i.substr(0,t)+"\r\n",i=i.substr(t));return s+i},t.binary.base64.decode=function(e,t,n){var r,a,i,s,u=t;u||(u=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var c=0,l=n=n||0;c<e.length;)r=o[e.charCodeAt(c++)-43],a=o[e.charCodeAt(c++)-43],i=o[e.charCodeAt(c++)-43],s=o[e.charCodeAt(c++)-43],u[l++]=r<<2|a>>4,64!==i&&(u[l++]=(15&a)<<4|i>>2,64!==s&&(u[l++]=(3&i)<<6|s));return t?l-n:u.subarray(0,l)},t.binary.base58.encode=function(e,n){return t.binary.baseN.encode(e,i,n)},t.binary.base58.decode=function(e,n){return t.binary.baseN.decode(e,i,n)},t.text={utf8:{},utf16:{}},t.text.utf8.encode=function(e,n,r){e=t.encodeUtf8(e);var a=n;a||(a=new Uint8Array(e.length));for(var o=r=r||0,i=0;i<e.length;++i)a[o++]=e.charCodeAt(i);return n?o-r:a},t.text.utf8.decode=function(e){return t.decodeUtf8(String.fromCharCode.apply(null,e))},t.text.utf16.encode=function(e,t,n){var r=t;r||(r=new Uint8Array(2*e.length));for(var a=new Uint16Array(r.buffer),o=n=n||0,i=n,s=0;s<e.length;++s)a[i++]=e.charCodeAt(s),o+=2;return t?o-n:r},t.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},t.deflate=function(e,n,r){if(n=t.decode64(e.deflate(t.encode64(n)).rval),r){var a=2;32&n.charCodeAt(1)&&(a=6),n=n.substring(a,n.length-4)}return n},t.inflate=function(e,n,r){var a=e.inflate(t.encode64(n)).rval;return null===a?null:t.decode64(a)};var s=function(e,n,r){if(!e)throw new Error("WebStorage not available.");var a;if(null===r?a=e.removeItem(n):(r=t.encode64(JSON.stringify(r)),a=e.setItem(n,r)),void 0!==a&&!0!==a.rval){var o=new Error(a.error.message);throw o.id=a.error.id,o.name=a.error.name,o}},u=function(e,n){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(n);if(e.init)if(null===r.rval){if(r.error){var a=new Error(r.error.message);throw a.id=r.error.id,a.name=r.error.name,a}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(t.decode64(r))),r},c=function(e,t,n,r){var a=u(e,t);null===a&&(a={}),a[n]=r,s(e,t,a)},l=function(e,t,n){var r=u(e,t);return null!==r&&(r=n in r?r[n]:null),r},d=function(e,t,n){var r=u(e,t);if(null!==r&&n in r){delete r[n];var a=!0;for(var o in r){a=!1;break}a&&(r=null),s(e,t,r)}},p=function(e,t){s(e,t,null)},f=function(e,t,n){var r,a=null;void 0===n&&(n=["web","flash"]);var o=!1,i=null;for(var s in n){r=n[s];try{if("flash"===r||"both"===r){if(null===t[0])throw new Error("Flash local storage not available.");a=e.apply(this,t),o="flash"===r}"web"!==r&&"both"!==r||(t[0]=localStorage,a=e.apply(this,t),o=!0)}catch(e){i=e}if(o)break}if(!o)throw i;return a};t.setItem=function(e,t,n,r,a){f(c,arguments,a)},t.getItem=function(e,t,n,r){return f(l,arguments,r)},t.removeItem=function(e,t,n,r){f(d,arguments,r)},t.clearItems=function(e,t,n){f(p,arguments,n)},t.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var n=t.exec(e),r=null===n?null:{full:e,scheme:n[1],host:n[2],port:n[3],path:n[4]};return r&&(r.fullHost=r.host,r.port?(80!==r.port&&"http"===r.scheme||443!==r.port&&"https"===r.scheme)&&(r.fullHost+=":"+r.port):"http"===r.scheme?r.port=80:"https"===r.scheme&&(r.port=443),r.full=r.scheme+"://"+r.fullHost),r};var h=null;t.getQueryVariables=function(e){var t,n=function(e){for(var t={},n=e.split("&"),r=0;r<n.length;r++){var a,o,i=n[r].indexOf("=");i>0?(a=n[r].substring(0,i),o=n[r].substring(i+1)):(a=n[r],o=null),a in t||(t[a]=[]),a in Object.prototype||null===o||t[a].push(unescape(o))}return t};return void 0===e?(null===h&&(h="undefined"!=typeof window&&window.location&&window.location.search?n(window.location.search.substring(1)):{}),t=h):t=n(e),t},t.parseFragment=function(e){var n=e,r="",a=e.indexOf("?");a>0&&(n=e.substring(0,a),r=e.substring(a+1));var o=n.split("/");return o.length>0&&""===o[0]&&o.shift(),{pathString:n,queryString:r,path:o,query:""===r?{}:t.getQueryVariables(r)}},t.makeRequest=function(e){var n=t.parseFragment(e),r={path:n.pathString,query:n.queryString,getPath:function(e){return void 0===e?n.path:n.path[e]},getQuery:function(e,t){var r;return void 0===e?r=n.query:(r=n.query[e])&&void 0!==t&&(r=r[t]),r},getQueryLast:function(e,t){var n=r.getQuery(e);return n?n[n.length-1]:t}};return r},t.makeLink=function(e,t,n){e=jQuery.isArray(e)?e.join("/"):e;var r=jQuery.param(t||{});return n=n||"",e+(r.length>0?"?"+r:"")+(n.length>0?"#"+n:"")},t.setPath=function(e,t,n){if("object"==typeof e&&null!==e)for(var r=0,a=t.length;r<a;){var o=t[r++];if(r==a)e[o]=n;else{var i=o in e;(!i||i&&"object"!=typeof e[o]||i&&null===e[o])&&(e[o]={}),e=e[o]}}},t.getPath=function(e,t,n){for(var r=0,a=t.length,o=!0;o&&r<a&&"object"==typeof e&&null!==e;){var i=t[r++];(o=i in e)&&(e=e[i])}return o?e:n},t.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var n=0,r=t.length;n<r;){var a=t[n++];if(n==r)delete e[a];else{if(!(a in e)||"object"!=typeof e[a]||null===e[a])break;e=e[a]}}},t.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.format=function(e){for(var t,n,r=/%./g,a=0,o=[],i=0;t=r.exec(e);){(n=e.substring(i,r.lastIndex-2)).length>0&&o.push(n),i=r.lastIndex;var s=t[0][1];switch(s){case"s":case"o":a<arguments.length?o.push(arguments[1+a++]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+s+"?>")}}return o.push(e.substring(i)),o.join("")},t.formatNumber=function(e,t,n,r){var a=e,o=isNaN(t=Math.abs(t))?2:t,i=void 0===n?",":n,s=void 0===r?".":r,u=a<0?"-":"",c=parseInt(a=Math.abs(+a||0).toFixed(o),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+s:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(o?i+Math.abs(a-c).toFixed(o).slice(2):"")},t.formatSize=function(e){return e>=1073741824?t.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?t.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?t.formatNumber(e/1024,0)+" KiB":t.formatNumber(e,0)+" bytes"},t.bytesFromIP=function(e){return-1!==e.indexOf(".")?t.bytesFromIPv4(e):-1!==e.indexOf(":")?t.bytesFromIPv6(e):null},t.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var n=t.createBuffer(),r=0;r<e.length;++r){var a=parseInt(e[r],10);if(isNaN(a))return null;n.putByte(a)}return n.getBytes()},t.bytesFromIPv6=function(e){for(var n=0,r=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++n,!0}))).length+n),a=t.createBuffer(),o=0;o<8;++o)if(e[o]&&0!==e[o].length){var i=t.hexToBytes(e[o]);i.length<2&&a.putByte(0),a.putBytes(i)}else a.fillWithByte(0,r),r=0;return a.getBytes()},t.bytesToIP=function(e){return 4===e.length?t.bytesToIPv4(e):16===e.length?t.bytesToIPv6(e):null},t.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")},t.bytesToIPv6=function(e){if(16!==e.length)return null;for(var n=[],r=[],a=0,o=0;o<e.length;o+=2){for(var i=t.bytesToHex(e[o]+e[o+1]);"0"===i[0]&&"0"!==i;)i=i.substr(1);if("0"===i){var s=r[r.length-1],u=n.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[a].end-r[a].start&&(a=r.length-1)):r.push({start:u,end:u})}n.push(i)}if(r.length>0){var c=r[a];c.end-c.start>0&&(n.splice(c.start,c.end-c.start+1,""),0===c.start&&n.unshift(""),7===c.end&&n.push(""))}return n.join(":")},t.estimateCores=function(e,n){if("function"==typeof e&&(n=e,e={}),e=e||{},"cores"in t&&!e.update)return n(null,t.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return t.cores=navigator.hardwareConcurrency,n(null,t.cores);if("undefined"==typeof Worker)return t.cores=1,n(null,t.cores);if("undefined"==typeof Blob)return t.cores=2,n(null,t.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){var t=Date.now(),n=t+4;self.postMessage({st:t,et:n})}))}.toString(),")()"],{type:"application/javascript"}));!function e(a,o,i){if(0===o){var s=Math.floor(a.reduce((function(e,t){return e+t}),0)/a.length);return t.cores=Math.max(1,s),URL.revokeObjectURL(r),n(null,t.cores)}!function(e,t){for(var n=[],a=[],o=0;o<e;++o){var i=new Worker(r);i.addEventListener("message",(function(r){if(a.push(r.data),a.length===e){for(var o=0;o<e;++o)n[o].terminate();t(null,a)}})),n.push(i)}for(o=0;o<e;++o)n[o].postMessage(o)}(i,(function(t,n){a.push(function(e,t){for(var n=[],r=0;r<e;++r)for(var a=t[r],o=n[r]=[],i=0;i<e;++i)if(r!==i){var s=t[i];(a.st>s.st&&a.st<s.et||s.st>a.st&&s.st<a.et)&&o.push(i)}return n.reduce((function(e,t){return Math.max(e,t.length)}),0)}(i,n)),e(a,o-1,i)}))}([],5,16)}})),W.cipher=W.cipher||{},W.cipher.algorithms=W.cipher.algorithms||{},W.cipher.createCipher=function(e,t){var n=e;if("string"==typeof n&&(n=W.cipher.getAlgorithm(n))&&(n=n()),!n)throw new Error("Unsupported algorithm: "+e);return new W.cipher.BlockCipher({algorithm:n,key:t,decrypt:!1})},W.cipher.createDecipher=function(e,t){var n=e;if("string"==typeof n&&(n=W.cipher.getAlgorithm(n))&&(n=n()),!n)throw new Error("Unsupported algorithm: "+e);return new W.cipher.BlockCipher({algorithm:n,key:t,decrypt:!0})},W.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),W.cipher.algorithms[e]=t},W.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in W.cipher.algorithms?W.cipher.algorithms[e]:null};var G=W.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};function q(e,t){W.cipher.registerAlgorithm(e,(function(){return new W.aes.Algorithm(e,t)}))}G.prototype.start=function(e){e=e||{};var t={};for(var n in e)t[n]=e[n];t.decrypt=this._decrypt,this._finish=!1,this._input=W.util.createBuffer(),this.output=e.output||W.util.createBuffer(),this.mode.start(t)},G.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},G.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))},k((function(e){W.cipher=W.cipher||{};var t=e.exports=W.cipher.modes=W.cipher.modes||{};function n(e,t){if("string"==typeof e&&(e=W.util.createBuffer(e)),W.util.isArray(e)&&e.length>4){var n=e;e=W.util.createBuffer();for(var r=0;r<n.length;++r)e.putByte(n[r])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!W.util.isArray(e)){var a=[],o=t/4;for(r=0;r<o;++r)a.push(e.getInt32());e=a}return e}function r(e){e[e.length-1]=e[e.length-1]+1&4294967295}function a(e){return[e/4294967296|0,4294967295&e]}t.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.ecb.prototype.start=function(e){},t.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},t.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},t.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},t.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return!(r>this.blockSize<<2||(e.truncate(r),0))},t.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},t.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)t.putInt32(this._outBlock[r]);this._prev=this._outBlock},t.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),r=0;r<this._ints;++r)t.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)},t.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},t.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return!(r>this.blockSize<<2||(e.truncate(r),0))},t.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=W.util.createBuffer(),this._partialBytes=0},t.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.cfb.prototype.encrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32()^this._outBlock[a],t.putInt32(this._inBlock[a]);else{var o=(this.blockSize-r)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32()^this._outBlock[a],this._partialOutput.putInt32(this._partialBlock[a]);if(o>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},t.cfb.prototype.decrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32(),t.putInt32(this._inBlock[a]^this._outBlock[a]);else{var o=(this.blockSize-r)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[a]^this._outBlock[a]);if(o>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},t.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=W.util.createBuffer(),this._partialBytes=0},t.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ofb.prototype.encrypt=function(e,t,n){var r=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]),this._inBlock[a]=this._outBlock[a];else{var o=(this.blockSize-r)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(o>0)e.read-=this.blockSize;else for(a=0;a<this._ints;++a)this._inBlock[a]=this._outBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},t.ofb.prototype.decrypt=t.ofb.prototype.encrypt,t.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=W.util.createBuffer(),this._partialBytes=0},t.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ctr.prototype.encrypt=function(e,t,n){var a=e.length();if(0===a)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize)for(var o=0;o<this._ints;++o)t.putInt32(e.getInt32()^this._outBlock[o]);else{var i=(this.blockSize-a)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(i>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!n)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}r(this._inBlock)},t.ctr.prototype.decrypt=t.ctr.prototype.encrypt,t.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=W.util.createBuffer(),this._partialBytes=0,this._R=3774873600},t.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,n=W.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?W.util.createBuffer(e.additionalData):W.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=W.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=n.length();if(12===o)this._j0=[n.getInt32(),n.getInt32(),n.getInt32(),1];else{for(this._j0=[0,0,0,0];n.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*o)))}this._inBlock=this._j0.slice(0),r(this._inBlock),this._partialBytes=0,t=W.util.createBuffer(t),this._aDataLength=a(8*t.length());var i=t.length()%this.blockSize;for(i&&t.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},t.gcm.prototype.encrypt=function(e,t,n){var a=e.length();if(0===a)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&a>=this.blockSize){for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^=e.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-a)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(i<=0||n){if(n){var s=a%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),r(this._inBlock)},t.gcm.prototype.decrypt=function(e,t,n){var a=e.length();if(a<this.blockSize&&!(n&&a>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),r(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^this._hashBlock[o]);a<this.blockSize?this._cipherLength+=a%this.blockSize:this._cipherLength+=this.blockSize},t.gcm.prototype.afterFinish=function(e,t){var n=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=W.util.createBuffer();var r=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,r);var o=[];this.cipher.encrypt(this._j0,o);for(var i=0;i<this._ints;++i)this.tag.putInt32(this._s[i]^o[i]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n},t.gcm.prototype.multiply=function(e,t){for(var n=[0,0,0,0],r=t.slice(0),a=0;a<128;++a)e[a/32|0]&1<<31-a%32&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r);return n},t.gcm.prototype.pow=function(e,t){for(var n=1&e[3],r=3;r>0;--r)t[r]=e[r]>>>1|(1&e[r-1])<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)},t.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],n=0;n<32;++n){var r=e[n/8|0]>>>4*(7-n%8)&15,a=this._m[n][r];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t},t.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)},t.gcm.prototype.generateHashTable=function(e,t){for(var n=8/t,r=4*n,a=16*n,o=new Array(a),i=0;i<a;++i){var s=[0,0,0,0],u=(r-1-i%r)*t;s[i/r|0]=1<<t-1<<u,o[i]=this.generateSubHashTable(this.multiply(s,e),t)}return o},t.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,r=n>>>1,a=new Array(n);a[r]=e.slice(0);for(var o=r>>>1;o>0;)this.pow(a[2*o],a[o]=[]),o>>=1;for(o=2;o<r;){for(var i=1;i<o;++i){var s=a[o],u=a[i];a[o+i]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}o*=2}for(a[0]=[0,0,0,0],o=r+1;o<n;++o){var c=a[o^r];a[o]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return a}})),W.aes=W.aes||{},W.aes.startEncrypting=function(e,t,n,r){var a=re({key:e,output:n,decrypt:!1,mode:r});return a.start(t),a},W.aes.createEncryptionCipher=function(e,t){return re({key:e,output:null,decrypt:!1,mode:t})},W.aes.startDecrypting=function(e,t,n,r){var a=re({key:e,output:n,decrypt:!0,mode:r});return a.start(t),a},W.aes.createDecryptionCipher=function(e,t){return re({key:e,output:null,decrypt:!0,mode:t})},W.aes.Algorithm=function(e,t){Z||ee();var n=this;n.name=e,n.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return ne(n._w,e,t,!1)},decrypt:function(e,t){return ne(n._w,e,t,!0)}}}),n._init=!1},W.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,n=e.key;if("string"!=typeof n||16!==n.length&&24!==n.length&&32!==n.length){if(W.util.isArray(n)&&(16===n.length||24===n.length||32===n.length)){t=n,n=W.util.createBuffer();for(var r=0;r<t.length;++r)n.putByte(t[r])}}else n=W.util.createBuffer(n);if(!W.util.isArray(n)){t=n,n=[];var a=t.length();if(16===a||24===a||32===a)for(a>>>=2,r=0;r<a;++r)n.push(t.getInt32())}if(!W.util.isArray(n)||4!==n.length&&6!==n.length&&8!==n.length)throw new Error("Invalid key parameter.");var o=this.mode.name,i=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=te(n,e.decrypt&&!i),this._init=!0}},W.aes._expandKey=function(e,t){return Z||ee(),te(e,t)},W.aes._updateBlock=ne,q("AES-ECB",W.cipher.modes.ecb),q("AES-CBC",W.cipher.modes.cbc),q("AES-CFB",W.cipher.modes.cfb),q("AES-OFB",W.cipher.modes.ofb),q("AES-CTR",W.cipher.modes.ctr),q("AES-GCM",W.cipher.modes.gcm);var K,X,Q,Y,$,Z=!1,J=4;function ee(){Z=!0,Q=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;for(K=new Array(256),X=new Array(256),Y=new Array(4),$=new Array(4),t=0;t<4;++t)Y[t]=new Array(256),$[t]=new Array(256);var n,r,a,o,i,s,u,c=0,l=0;for(t=0;t<256;++t){o=(o=l^l<<1^l<<2^l<<3^l<<4)>>8^255&o^99,K[c]=o,X[o]=c,s=(i=e[o])<<24^o<<16^o<<8^o^i,u=((n=e[c])^(r=e[n])^(a=e[r]))<<24^(c^a)<<16^(c^r^a)<<8^c^n^a;for(var d=0;d<4;++d)Y[d][c]=s,$[d][o]=u,s=s<<24|s>>>8,u=u<<24|u>>>8;0===c?c=l=1:(c=n^e[e[e[n^a]]],l^=e[e[l]])}}function te(e,t){for(var n,r=e.slice(0),a=1,o=r.length,i=J*(o+6+1),s=o;s<i;++s)n=r[s-1],s%o==0?(n=K[n>>>16&255]<<24^K[n>>>8&255]<<16^K[255&n]<<8^K[n>>>24]^Q[a]<<24,a++):o>6&&s%o==4&&(n=K[n>>>24]<<24^K[n>>>16&255]<<16^K[n>>>8&255]<<8^K[255&n]),r[s]=r[s-o]^n;if(t){for(var u,c=$[0],l=$[1],d=$[2],p=$[3],f=r.slice(0),h=(s=0,(i=r.length)-J);s<i;s+=J,h-=J)if(0===s||s===i-J)f[s]=r[h],f[s+1]=r[h+3],f[s+2]=r[h+2],f[s+3]=r[h+1];else for(var m=0;m<J;++m)u=r[h+m],f[s+(3&-m)]=c[K[u>>>24]]^l[K[u>>>16&255]]^d[K[u>>>8&255]]^p[K[255&u]];r=f}return r}function ne(e,t,n,r){var a,o,i,s,u,c,l,d,p,f,h,m,g=e.length/4-1;r?(a=$[0],o=$[1],i=$[2],s=$[3],u=X):(a=Y[0],o=Y[1],i=Y[2],s=Y[3],u=K),c=t[0]^e[0],l=t[r?3:1]^e[1],d=t[2]^e[2],p=t[r?1:3]^e[3];for(var v=3,y=1;y<g;++y)f=a[c>>>24]^o[l>>>16&255]^i[d>>>8&255]^s[255&p]^e[++v],h=a[l>>>24]^o[d>>>16&255]^i[p>>>8&255]^s[255&c]^e[++v],m=a[d>>>24]^o[p>>>16&255]^i[c>>>8&255]^s[255&l]^e[++v],p=a[p>>>24]^o[c>>>16&255]^i[l>>>8&255]^s[255&d]^e[++v],c=f,l=h,d=m;n[0]=u[c>>>24]<<24^u[l>>>16&255]<<16^u[d>>>8&255]<<8^u[255&p]^e[++v],n[r?3:1]=u[l>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[255&c]^e[++v],n[2]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[c>>>8&255]<<8^u[255&l]^e[++v],n[r?1:3]=u[p>>>24]<<24^u[c>>>16&255]<<16^u[l>>>8&255]<<8^u[255&d]^e[++v]}function re(e){var t,n="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),r=(t=e.decrypt?W.cipher.createDecipher(n,e.key):W.cipher.createCipher(n,e.key)).start;return t.start=function(e,n){var a=null;n instanceof W.util.ByteBuffer&&(a=n,n={}),(n=n||{}).output=a,n.iv=e,r.call(t,n)},t}function ae(e,t){W.cipher.registerAlgorithm(e,(function(){return new W.des.Algorithm(e,t)}))}k((function(e){W.pki=W.pki||{};var t=e.exports=W.pki.oids=W.oids=W.oids||{};function n(e,n){t[e]=n,t[n]=e}function r(e,n){t[e]=n}n("1.2.840.113549.1.1.1","rsaEncryption"),n("1.2.840.113549.1.1.4","md5WithRSAEncryption"),n("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),n("1.2.840.113549.1.1.7","RSAES-OAEP"),n("1.2.840.113549.1.1.8","mgf1"),n("1.2.840.113549.1.1.9","pSpecified"),n("1.2.840.113549.1.1.10","RSASSA-PSS"),n("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),n("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),n("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),n("1.3.101.112","EdDSA25519"),n("1.2.840.10040.4.3","dsa-with-sha1"),n("1.3.14.3.2.7","desCBC"),n("1.3.14.3.2.26","sha1"),n("2.16.840.1.101.3.4.2.1","sha256"),n("2.16.840.1.101.3.4.2.2","sha384"),n("2.16.840.1.101.3.4.2.3","sha512"),n("1.2.840.113549.2.5","md5"),n("1.2.840.113549.1.7.1","data"),n("1.2.840.113549.1.7.2","signedData"),n("1.2.840.113549.1.7.3","envelopedData"),n("1.2.840.113549.1.7.4","signedAndEnvelopedData"),n("1.2.840.113549.1.7.5","digestedData"),n("1.2.840.113549.1.7.6","encryptedData"),n("1.2.840.113549.1.9.1","emailAddress"),n("1.2.840.113549.1.9.2","unstructuredName"),n("1.2.840.113549.1.9.3","contentType"),n("1.2.840.113549.1.9.4","messageDigest"),n("1.2.840.113549.1.9.5","signingTime"),n("1.2.840.113549.1.9.6","counterSignature"),n("1.2.840.113549.1.9.7","challengePassword"),n("1.2.840.113549.1.9.8","unstructuredAddress"),n("1.2.840.113549.1.9.14","extensionRequest"),n("1.2.840.113549.1.9.20","friendlyName"),n("1.2.840.113549.1.9.21","localKeyId"),n("1.2.840.113549.1.9.22.1","x509Certificate"),n("1.2.840.113549.1.12.10.1.1","keyBag"),n("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),n("1.2.840.113549.1.12.10.1.3","certBag"),n("1.2.840.113549.1.12.10.1.4","crlBag"),n("1.2.840.113549.1.12.10.1.5","secretBag"),n("1.2.840.113549.1.12.10.1.6","safeContentsBag"),n("1.2.840.113549.1.5.13","pkcs5PBES2"),n("1.2.840.113549.1.5.12","pkcs5PBKDF2"),n("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),n("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),n("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),n("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),n("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),n("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),n("1.2.840.113549.2.7","hmacWithSHA1"),n("1.2.840.113549.2.8","hmacWithSHA224"),n("1.2.840.113549.2.9","hmacWithSHA256"),n("1.2.840.113549.2.10","hmacWithSHA384"),n("1.2.840.113549.2.11","hmacWithSHA512"),n("1.2.840.113549.3.7","des-EDE3-CBC"),n("2.16.840.1.101.3.4.1.2","aes128-CBC"),n("2.16.840.1.101.3.4.1.22","aes192-CBC"),n("2.16.840.1.101.3.4.1.42","aes256-CBC"),n("2.5.4.3","commonName"),n("2.5.4.5","serialName"),n("2.5.4.6","countryName"),n("2.5.4.7","localityName"),n("2.5.4.8","stateOrProvinceName"),n("2.5.4.9","streetAddress"),n("2.5.4.10","organizationName"),n("2.5.4.11","organizationalUnitName"),n("2.5.4.13","description"),n("2.5.4.15","businessCategory"),n("2.5.4.17","postalCode"),n("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),n("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),n("2.16.840.1.113730.1.1","nsCertType"),n("2.16.840.1.113730.1.13","nsComment"),r("2.5.29.1","authorityKeyIdentifier"),r("2.5.29.2","keyAttributes"),r("2.5.29.3","certificatePolicies"),r("2.5.29.4","keyUsageRestriction"),r("2.5.29.5","policyMapping"),r("2.5.29.6","subtreesConstraint"),r("2.5.29.7","subjectAltName"),r("2.5.29.8","issuerAltName"),r("2.5.29.9","subjectDirectoryAttributes"),r("2.5.29.10","basicConstraints"),r("2.5.29.11","nameConstraints"),r("2.5.29.12","policyConstraints"),r("2.5.29.13","basicConstraints"),n("2.5.29.14","subjectKeyIdentifier"),n("2.5.29.15","keyUsage"),r("2.5.29.16","privateKeyUsagePeriod"),n("2.5.29.17","subjectAltName"),n("2.5.29.18","issuerAltName"),n("2.5.29.19","basicConstraints"),r("2.5.29.20","cRLNumber"),r("2.5.29.21","cRLReason"),r("2.5.29.22","expirationDate"),r("2.5.29.23","instructionCode"),r("2.5.29.24","invalidityDate"),r("2.5.29.25","cRLDistributionPoints"),r("2.5.29.26","issuingDistributionPoint"),r("2.5.29.27","deltaCRLIndicator"),r("2.5.29.28","issuingDistributionPoint"),r("2.5.29.29","certificateIssuer"),r("2.5.29.30","nameConstraints"),n("2.5.29.31","cRLDistributionPoints"),n("2.5.29.32","certificatePolicies"),r("2.5.29.33","policyMappings"),r("2.5.29.34","policyConstraints"),n("2.5.29.35","authorityKeyIdentifier"),r("2.5.29.36","policyConstraints"),n("2.5.29.37","extKeyUsage"),r("2.5.29.46","freshestCRL"),r("2.5.29.54","inhibitAnyPolicy"),n("1.3.6.1.4.1.11129.2.4.2","timestampList"),n("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),n("1.3.6.1.5.5.7.3.1","serverAuth"),n("1.3.6.1.5.5.7.3.2","clientAuth"),n("1.3.6.1.5.5.7.3.3","codeSigning"),n("1.3.6.1.5.5.7.3.4","emailProtection"),n("1.3.6.1.5.5.7.3.8","timeStamping")})),k((function(e){var t=e.exports=W.asn1=W.asn1||{};function n(e,t,n){if(n>t){var r=new Error("Too few bytes to parse DER.");throw r.available=e.length(),r.remaining=t,r.requested=n,r}}t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(e,n,r,a,o){if(W.util.isArray(a)){for(var i=[],s=0;s<a.length;++s)void 0!==a[s]&&i.push(a[s]);a=i}var u={tagClass:e,type:n,constructed:r,composed:r||W.util.isArray(a),value:a};return o&&"bitStringContents"in o&&(u.bitStringContents=o.bitStringContents,u.original=t.copy(u)),u},t.copy=function(e,n){var r;if(W.util.isArray(e)){r=[];for(var a=0;a<e.length;++a)r.push(t.copy(e[a],n));return r}return"string"==typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:t.copy(e.value,n)},n&&!n.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},t.equals=function(e,n,r){if(W.util.isArray(e)){if(!W.util.isArray(n))return!1;if(e.length!==n.length)return!1;for(var a=0;a<e.length;++a)if(!t.equals(e[a],n[a]))return!1;return!0}if(typeof e!=typeof n)return!1;if("string"==typeof e)return e===n;var o=e.tagClass===n.tagClass&&e.type===n.type&&e.constructed===n.constructed&&e.composed===n.composed&&t.equals(e.value,n.value);return r&&r.includeBitStringContents&&(o=o&&e.bitStringContents===n.bitStringContents),o},t.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};var r=function(e,t){var r=e.getByte();if(t--,128!==r){var a;if(128&r){var o=127&r;n(e,t,o),a=e.getInt(o<<3)}else a=r;if(a<0)throw new Error("Negative length: "+a);return a}};t.fromDer=function(e,a){return void 0===a&&(a={strict:!0,decodeBitStrings:!0}),"boolean"==typeof a&&(a={strict:a,decodeBitStrings:!0}),"strict"in a||(a.strict=!0),"decodeBitStrings"in a||(a.decodeBitStrings=!0),"string"==typeof e&&(e=W.util.createBuffer(e)),function e(a,o,i,s){var u;n(a,o,2);var c=a.getByte();o--;var l=192&c,d=31&c;u=a.length();var p,f,h=r(a,o);if(o-=u-a.length(),void 0!==h&&h>o){if(s.strict){var m=new Error("Too few bytes to read ASN.1 value.");throw m.available=a.length(),m.remaining=o,m.requested=h,m}h=o}var g=32==(32&c);if(g)if(p=[],void 0===h)for(;;){if(n(a,o,2),a.bytes(2)===String.fromCharCode(0,0)){a.getBytes(2),o-=2;break}u=a.length(),p.push(e(a,o,i+1,s)),o-=u-a.length()}else for(;h>0;)u=a.length(),p.push(e(a,h,i+1,s)),o-=u-a.length(),h-=u-a.length();if(void 0===p&&l===t.Class.UNIVERSAL&&d===t.Type.BITSTRING&&(f=a.bytes(h)),void 0===p&&s.decodeBitStrings&&l===t.Class.UNIVERSAL&&d===t.Type.BITSTRING&&h>1){var v=a.read,y=o,b=0;if(d===t.Type.BITSTRING&&(n(a,o,1),b=a.getByte(),o--),0===b)try{u=a.length();var x=e(a,o,i+1,{verbose:s.verbose,strict:!0,decodeBitStrings:!0}),k=u-a.length();o-=k,d==t.Type.BITSTRING&&k++;var w=x.tagClass;k!==h||w!==t.Class.UNIVERSAL&&w!==t.Class.CONTEXT_SPECIFIC||(p=[x])}catch(e){}void 0===p&&(a.read=v,o=y)}if(void 0===p){if(void 0===h){if(s.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");h=o}if(d===t.Type.BMPSTRING)for(p="";h>0;h-=2)n(a,o,2),p+=String.fromCharCode(a.getInt16()),o-=2;else p=a.getBytes(h)}var I=void 0===f?null:{bitStringContents:f};return t.create(l,d,g,p,I)}(e,e.length(),0,a)},t.toDer=function(e){var n=W.util.createBuffer(),r=e.tagClass|e.type,a=W.util.createBuffer(),o=!1;if("bitStringContents"in e&&(o=!0,e.original&&(o=t.equals(e,e.original))),o)a.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:a.putByte(0);for(var i=0;i<e.value.length;++i)void 0!==e.value[i]&&a.putBuffer(t.toDer(e.value[i]))}else if(e.type===t.Type.BMPSTRING)for(i=0;i<e.value.length;++i)a.putInt16(e.value.charCodeAt(i));else e.type===t.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?a.putBytes(e.value.substr(1)):a.putBytes(e.value);if(n.putByte(r),a.length()<=127)n.putByte(127&a.length());else{var s=a.length(),u="";do{u+=String.fromCharCode(255&s),s>>>=8}while(s>0);for(n.putByte(128|u.length),i=u.length-1;i>=0;--i)n.putByte(u.charCodeAt(i))}return n.putBuffer(a),n},t.oidToDer=function(e){var t,n,r,a,o=e.split("."),i=W.util.createBuffer();i.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var s=2;s<o.length;++s){t=!0,n=[],r=parseInt(o[s],10);do{a=127&r,r>>>=7,t||(a|=128),n.push(a),t=!1}while(r>0);for(var u=n.length-1;u>=0;--u)i.putByte(n[u])}return i},t.derToOid=function(e){var t;"string"==typeof e&&(e=W.util.createBuffer(e));var n=e.getByte();t=Math.floor(n/40)+"."+n%40;for(var r=0;e.length()>0;)r<<=7,128&(n=e.getByte())?r+=127&n:(t+="."+(r+n),r=0);return t},t.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(e.substr(2,2),10)-1,a=parseInt(e.substr(4,2),10),o=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),s=0;if(e.length>11){var u=e.charAt(10),c=10;"+"!==u&&"-"!==u&&(s=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(n,r,a),t.setUTCHours(o,i,s,0),c&&("+"===(u=e.charAt(c))||"-"===u)){var l=60*parseInt(e.substr(c+1,2),10)+parseInt(e.substr(c+4,2),10);l*=6e4,"+"===u?t.setTime(+t-l):t.setTime(+t+l)}return t},t.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),r=parseInt(e.substr(4,2),10)-1,a=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),i=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),u=0,c=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var d=e.length-5,p=e.charAt(d);return"+"!==p&&"-"!==p||(c=60*parseInt(e.substr(d+1,2),10)+parseInt(e.substr(d+4,2),10),c*=6e4,"+"===p&&(c*=-1),l=!0),"."===e.charAt(14)&&(u=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(n,r,a),t.setUTCHours(o,i,s,u),t.setTime(+t+c)):(t.setFullYear(n,r,a),t.setHours(o,i,s,u)),t},t.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",n=[];n.push((""+e.getUTCFullYear()).substr(2)),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+"Z"},t.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",n=[];n.push(""+e.getUTCFullYear()),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+"Z"},t.integerToDer=function(e){var t=W.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=e,n},t.derToInteger=function(e){"string"==typeof e&&(e=W.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},t.validate=function(e,n,r,a){var o=!1;if(e.tagClass!==n.tagClass&&void 0!==n.tagClass||e.type!==n.type&&void 0!==n.type)a&&(e.tagClass!==n.tagClass&&a.push("["+n.name+'] Expected tag class "'+n.tagClass+'", got "'+e.tagClass+'"'),e.type!==n.type&&a.push("["+n.name+'] Expected type "'+n.type+'", got "'+e.type+'"'));else if(e.constructed===n.constructed||void 0===n.constructed){if(o=!0,n.value&&W.util.isArray(n.value))for(var i=0,s=0;o&&s<n.value.length;++s)o=n.value[s].optional||!1,e.value[i]&&((o=t.validate(e.value[i],n.value[s],r,a))?++i:n.value[s].optional&&(o=!0)),!o&&a&&a.push("["+n.name+'] Tag class "'+n.tagClass+'", type "'+n.type+'" expected value length "'+n.value.length+'", got "'+e.value.length+'"');if(o&&r&&(n.capture&&(r[n.capture]=e.value),n.captureAsn1&&(r[n.captureAsn1]=e),n.captureBitStringContents&&"bitStringContents"in e&&(r[n.captureBitStringContents]=e.bitStringContents),n.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)r[n.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[n.captureBitStringValue]=e.bitStringContents.slice(1)}}else a&&a.push("["+n.name+'] Expected constructed "'+n.constructed+'", got "'+e.constructed+'"');return o};var a=/[^\\u0000-\\u00ff]/;t.prettyPrint=function(e,n,r){var o="";r=r||2,(n=n||0)>0&&(o+="\n");for(var i="",s=0;s<n*r;++s)i+=" ";switch(o+=i+"Tag: ",e.tagClass){case t.Class.UNIVERSAL:o+="Universal:";break;case t.Class.APPLICATION:o+="Application:";break;case t.Class.CONTEXT_SPECIFIC:o+="Context-Specific:";break;case t.Class.PRIVATE:o+="Private:"}if(e.tagClass===t.Class.UNIVERSAL)switch(o+=e.type,e.type){case t.Type.NONE:o+=" (None)";break;case t.Type.BOOLEAN:o+=" (Boolean)";break;case t.Type.INTEGER:o+=" (Integer)";break;case t.Type.BITSTRING:o+=" (Bit string)";break;case t.Type.OCTETSTRING:o+=" (Octet string)";break;case t.Type.NULL:o+=" (Null)";break;case t.Type.OID:o+=" (Object Identifier)";break;case t.Type.ODESC:o+=" (Object Descriptor)";break;case t.Type.EXTERNAL:o+=" (External or Instance of)";break;case t.Type.REAL:o+=" (Real)";break;case t.Type.ENUMERATED:o+=" (Enumerated)";break;case t.Type.EMBEDDED:o+=" (Embedded PDV)";break;case t.Type.UTF8:o+=" (UTF8)";break;case t.Type.ROID:o+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:o+=" (Sequence)";break;case t.Type.SET:o+=" (Set)";break;case t.Type.PRINTABLESTRING:o+=" (Printable String)";break;case t.Type.IA5String:o+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:o+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:o+=" (Generalized time)";break;case t.Type.BMPSTRING:o+=" (BMP String)"}else o+=e.type;if(o+="\n",o+=i+"Constructed: "+e.constructed+"\n",e.composed){var u=0,c="";for(s=0;s<e.value.length;++s)void 0!==e.value[s]&&(u+=1,c+=t.prettyPrint(e.value[s],n+1,r),s+1<e.value.length&&(c+=","));o+=i+"Sub values: "+u+c}else{if(o+=i+"Value: ",e.type===t.Type.OID){var l=t.derToOid(e.value);o+=l,W.pki&&W.pki.oids&&l in W.pki.oids&&(o+=" ("+W.pki.oids[l]+") ")}if(e.type===t.Type.INTEGER)try{o+=t.derToInteger(e.value)}catch(t){o+="0x"+W.util.bytesToHex(e.value)}else if(e.type===t.Type.BITSTRING){if(e.value.length>1?o+="0x"+W.util.bytesToHex(e.value.slice(1)):o+="(none)",e.value.length>0){var d=e.value.charCodeAt(0);1==d?o+=" (1 unused bit shown)":d>1&&(o+=" ("+d+" unused bits shown)")}}else e.type===t.Type.OCTETSTRING?(a.test(e.value)||(o+="("+e.value+") "),o+="0x"+W.util.bytesToHex(e.value)):e.type===t.Type.UTF8?o+=W.util.decodeUtf8(e.value):e.type===t.Type.PRINTABLESTRING||e.type===t.Type.IA5String?o+=e.value:a.test(e.value)?o+="0x"+W.util.bytesToHex(e.value):0===e.value.length?o+="[null]":o+=e.value}return o}})),W.md=W.md||{},W.md.algorithms=W.md.algorithms||{},k((function(e){(e.exports=W.hmac=W.hmac||{}).create=function(){var e=null,t=null,n=null,r=null,a={start:function(a,o){if(null!==a)if("string"==typeof a){if(!((a=a.toLowerCase())in W.md.algorithms))throw new Error('Unknown hash algorithm "'+a+'"');t=W.md.algorithms[a].create()}else t=a;if(null===o)o=e;else{if("string"==typeof o)o=W.util.createBuffer(o);else if(W.util.isArray(o)){var i=o;o=W.util.createBuffer();for(var s=0;s<i.length;++s)o.putByte(i[s])}var u=o.length();for(u>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),n=W.util.createBuffer(),r=W.util.createBuffer(),u=o.length(),s=0;s<u;++s)i=o.at(s),n.putByte(54^i),r.putByte(92^i);if(u<t.blockLength)for(i=t.blockLength-u,s=0;s<i;++s)n.putByte(54),r.putByte(92);e=o,n=n.bytes(),r=r.bytes()}t.start(),t.update(n)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(r),t.update(e),t.digest()}};return a.digest=a.getMac,a}})),k((function(e){var t=e.exports=W.md5=W.md5||{};W.md.md5=W.md.algorithms.md5=t,t.create=function(){i||function(){n=String.fromCharCode(128),n+=W.util.fillString(String.fromCharCode(0),64),r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],a=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],o=new Array(64);for(var e=0;e<64;++e)o[e]=Math.floor(4294967296*Math.abs(Math.sin(e+1)));i=!0}();var e=null,t=W.util.createBuffer(),u=new Array(16),c={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){c.messageLength=0,c.fullMessageLength=c.messageLength64=[];for(var n=c.messageLengthSize/4,r=0;r<n;++r)c.fullMessageLength.push(0);return t=W.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},c}};return c.start(),c.update=function(n,r){"utf8"===r&&(n=W.util.encodeUtf8(n));var a=n.length;c.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=c.fullMessageLength.length-1;o>=0;--o)c.fullMessageLength[o]+=a[1],a[1]=a[0]+(c.fullMessageLength[o]/4294967296>>>0),c.fullMessageLength[o]=c.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(n),s(e,u,t),(t.read>2048||0===t.length())&&t.compact(),c},c.digest=function(){var r=W.util.createBuffer();r.putBytes(t.bytes());var a=c.fullMessageLength[c.fullMessageLength.length-1]+c.messageLengthSize&c.blockLength-1;r.putBytes(n.substr(0,c.blockLength-a));for(var o,i=0,l=c.fullMessageLength.length-1;l>=0;--l)i=(o=8*c.fullMessageLength[l]+i)/4294967296>>>0,r.putInt32Le(o>>>0);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};s(d,u,r);var p=W.util.createBuffer();return p.putInt32Le(d.h0),p.putInt32Le(d.h1),p.putInt32Le(d.h2),p.putInt32Le(d.h3),p},c};var n=null,r=null,a=null,o=null,i=!1;function s(e,t,n){for(var i,s,u,c,l,d,p,f=n.length();f>=64;){for(s=e.h0,u=e.h1,c=e.h2,l=e.h3,p=0;p<16;++p)t[p]=n.getInt32Le(),i=s+(l^u&(c^l))+o[p]+t[p],s=l,l=c,c=u,u+=i<<(d=a[p])|i>>>32-d;for(;p<32;++p)i=s+(c^l&(u^c))+o[p]+t[r[p]],s=l,l=c,c=u,u+=i<<(d=a[p])|i>>>32-d;for(;p<48;++p)i=s+(u^c^l)+o[p]+t[r[p]],s=l,l=c,c=u,u+=i<<(d=a[p])|i>>>32-d;for(;p<64;++p)i=s+(c^(u|~l))+o[p]+t[r[p]],s=l,l=c,c=u,u+=i<<(d=a[p])|i>>>32-d;e.h0=e.h0+s|0,e.h1=e.h1+u|0,e.h2=e.h2+c|0,e.h3=e.h3+l|0,f-=64}}})),k((function(e){var t=e.exports=W.pem=W.pem||{};function n(e){for(var t=e.name+": ",n=[],r=function(e,t){return" "+t},a=0;a<e.values.length;++a)n.push(e.values[a].replace(/^(\S+\r\n)/,r));t+=n.join(",")+"\r\n";var o=0,i=-1;for(a=0;a<t.length;++a,++o)if(o>65&&-1!==i){var s=t[i];","===s?(++i,t=t.substr(0,i)+"\r\n "+t.substr(i)):t=t.substr(0,i)+"\r\n"+s+t.substr(i+1),o=a-i-1,i=-1,++a}else" "!==t[a]&&"\t"!==t[a]&&","!==t[a]||(i=a);return t}function r(e){return e.replace(/^\s+/,"")}t.encode=function(e,t){t=t||{};var r,a="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(a+=n(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(a+=n(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),a+=n(r)),e.headers)for(var o=0;o<e.headers.length;++o)a+=n(e.headers[o]);return e.procType&&(a+="\r\n"),(a+=W.util.encode64(e.body,t.maxline||64)+"\r\n")+"-----END "+e.type+"-----\r\n"},t.decode=function(e){for(var t,n=[],a=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,o=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/;t=a.exec(e);){var s={type:t[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:W.util.decode64(t[3])};if(n.push(s),t[2]){for(var u=t[2].split(i),c=0;t&&c<u.length;){for(var l=u[c].replace(/\s+$/,""),d=c+1;d<u.length;++d){var p=u[d];if(!/\s/.test(p[0]))break;l+=p,c=d}if(t=l.match(o)){for(var f={name:t[1],values:[]},h=t[2].split(","),m=0;m<h.length;++m)f.values.push(r(h[m]));if(s.procType)if(s.contentDomain||"Content-Domain"!==f.name)if(s.dekInfo||"DEK-Info"!==f.name)s.headers.push(f);else{if(0===f.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');s.dekInfo={algorithm:h[0],parameters:h[1]||null}}else s.contentDomain=h[0]||"";else{if("Proc-Type"!==f.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==f.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');s.procType={version:h[0],type:h[1]}}}++c}if("ENCRYPTED"===s.procType&&!s.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===n.length)throw new Error("Invalid PEM formatted message.");return n}})),W.des=W.des||{},W.des.startEncrypting=function(e,t,n,r){var a=he({key:e,output:n,decrypt:!1,mode:r||(null===t?"ECB":"CBC")});return a.start(t),a},W.des.createEncryptionCipher=function(e,t){return he({key:e,output:null,decrypt:!1,mode:t})},W.des.startDecrypting=function(e,t,n,r){var a=he({key:e,output:n,decrypt:!0,mode:r||(null===t?"ECB":"CBC")});return a.start(t),a},W.des.createDecryptionCipher=function(e,t){return he({key:e,output:null,decrypt:!0,mode:t})},W.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return fe(n._keys,e,t,!1)},decrypt:function(e,t){return fe(n._keys,e,t,!0)}}}),n._init=!1},W.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=W.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,n=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],a=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],i=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=e.length()>8?3:1,v=[],y=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,x=0;x<g;x++){var k=e.getInt32(),w=e.getInt32();k^=(t=252645135&(k>>>4^w))<<4,k^=t=65535&((w^=t)>>>-16^k),k^=(t=858993459&(k>>>2^(w^=t<<-16)))<<2,k^=t=65535&((w^=t)>>>-16^k),k^=(t=1431655765&(k>>>1^(w^=t<<-16)))<<1,k^=t=16711935&((w^=t)>>>8^k),t=(k^=(t=1431655765&(k>>>1^(w^=t<<8)))<<1)<<8|(w^=t)>>>20&240,k=w<<24|w<<8&16711680|w>>>8&65280|w>>>24&240,w=t;for(var I=0;I<y.length;++I){y[I]?(k=k<<2|k>>>26,w=w<<2|w>>>26):(k=k<<1|k>>>27,w=w<<1|w>>>27);var C=n[(k&=-15)>>>28]|r[k>>>24&15]|a[k>>>20&15]|o[k>>>16&15]|i[k>>>12&15]|s[k>>>8&15]|u[k>>>4&15],S=c[(w&=-15)>>>28]|l[w>>>24&15]|d[w>>>20&15]|p[w>>>16&15]|f[w>>>12&15]|h[w>>>8&15]|m[w>>>4&15];t=65535&(S>>>16^C),v[b++]=C^t,v[b++]=S^t<<16}}return v}(t),this._init=!0}},ae("DES-ECB",W.cipher.modes.ecb),ae("DES-CBC",W.cipher.modes.cbc),ae("DES-CFB",W.cipher.modes.cfb),ae("DES-OFB",W.cipher.modes.ofb),ae("DES-CTR",W.cipher.modes.ctr),ae("3DES-ECB",W.cipher.modes.ecb),ae("3DES-CBC",W.cipher.modes.cbc),ae("3DES-CFB",W.cipher.modes.cfb),ae("3DES-OFB",W.cipher.modes.ofb),ae("3DES-CTR",W.cipher.modes.ctr);var oe=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],ie=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],se=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],ue=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],ce=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],le=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],de=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],pe=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function fe(e,t,n,r){var a,o,i=32===e.length?3:9;a=3===i?r?[30,-2,-2]:[0,32,2]:r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s=t[0],u=t[1];s^=(o=252645135&(s>>>4^u))<<4,s^=(o=65535&(s>>>16^(u^=o)))<<16,s^=o=858993459&((u^=o)>>>2^s),s^=o=16711935&((u^=o<<2)>>>8^s),s=(s^=(o=1431655765&(s>>>1^(u^=o<<8)))<<1)<<1|s>>>31,u=(u^=o)<<1|u>>>31;for(var c=0;c<i;c+=3){for(var l=a[c+1],d=a[c+2],p=a[c];p!=l;p+=d){var f=u^e[p],h=(u>>>4|u<<28)^e[p+1];o=s,s=u,u=o^(ie[f>>>24&63]|ue[f>>>16&63]|le[f>>>8&63]|pe[63&f]|oe[h>>>24&63]|se[h>>>16&63]|ce[h>>>8&63]|de[63&h])}o=s,s=u,u=o}u=u>>>1|u<<31,u^=o=1431655765&((s=s>>>1|s<<31)>>>1^u),u^=(o=16711935&(u>>>8^(s^=o<<1)))<<8,u^=(o=858993459&(u>>>2^(s^=o)))<<2,u^=o=65535&((s^=o)>>>16^u),u^=o=252645135&((s^=o<<16)>>>4^u),s^=o<<4,n[0]=s,n[1]=u}function he(e){var t,n="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),r=(t=e.decrypt?W.cipher.createDecipher(n,e.key):W.cipher.createCipher(n,e.key)).start;return t.start=function(e,n){var a=null;n instanceof W.util.ByteBuffer&&(a=n,n={}),(n=n||{}).output=a,n.iv=e,r.call(t,n)},t}var me,ge=W.pkcs5=W.pkcs5||{};W.util.isNodejs&&!W.options.usePureJavaScript&&(me=t),W.pbkdf2=ge.pbkdf2=function(e,t,n,r,a,o){if("function"==typeof a&&(o=a,a=null),W.util.isNodejs&&!W.options.usePureJavaScript&&me.pbkdf2&&(null===a||"object"!=typeof a)&&(me.pbkdf2Sync.length>4||!a||"sha1"===a))return"string"!=typeof a&&(a="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),o?4===me.pbkdf2Sync.length?me.pbkdf2(e,t,n,r,(function(e,t){if(e)return o(e);o(null,t.toString("binary"))})):me.pbkdf2(e,t,n,r,a,(function(e,t){if(e)return o(e);o(null,t.toString("binary"))})):4===me.pbkdf2Sync.length?me.pbkdf2Sync(e,t,n,r).toString("binary"):me.pbkdf2Sync(e,t,n,r,a).toString("binary");if(null==a&&(a="sha1"),"string"==typeof a){if(!(a in W.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=W.md[a].create()}var i=a.digestLength;if(r>4294967295*i){var s=new Error("Derived key is too long.");if(o)return o(s);throw s}var u=Math.ceil(r/i),c=r-(u-1)*i,l=W.hmac.create();l.start(a,e);var d,p,f,h="";if(!o){for(var m=1;m<=u;++m){l.start(null,null),l.update(t),l.update(W.util.int32ToBytes(m)),d=f=l.digest().getBytes();for(var g=2;g<=n;++g)l.start(null,null),l.update(f),p=l.digest().getBytes(),d=W.util.xorBytes(d,p,i),f=p;h+=m<u?d:d.substr(0,c)}return h}function v(){if(m>u)return o(null,h);l.start(null,null),l.update(t),l.update(W.util.int32ToBytes(m)),d=f=l.digest().getBytes(),g=2,y()}function y(){if(g<=n)return l.start(null,null),l.update(f),p=l.digest().getBytes(),d=W.util.xorBytes(d,p,i),f=p,++g,W.util.setImmediate(y);h+=m<u?d:d.substr(0,c),++m,v()}m=1,v()},k((function(e){var t=e.exports=W.sha256=W.sha256||{};W.md.sha256=W.md.algorithms.sha256=t,t.create=function(){r||(n=String.fromCharCode(128),n+=W.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=!0);var e=null,t=W.util.createBuffer(),i=new Array(64),s={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var n=s.messageLengthSize/4,r=0;r<n;++r)s.fullMessageLength.push(0);return t=W.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},s}};return s.start(),s.update=function(n,r){"utf8"===r&&(n=W.util.encodeUtf8(n));var a=n.length;s.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=s.fullMessageLength.length-1;u>=0;--u)s.fullMessageLength[u]+=a[1],a[1]=a[0]+(s.fullMessageLength[u]/4294967296>>>0),s.fullMessageLength[u]=s.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(n),o(e,i,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var r=W.util.createBuffer();r.putBytes(t.bytes());var a,u=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize&s.blockLength-1;r.putBytes(n.substr(0,s.blockLength-u));for(var c=8*s.fullMessageLength[0],l=0;l<s.fullMessageLength.length-1;++l)c+=(a=8*s.fullMessageLength[l+1])/4294967296>>>0,r.putInt32(c>>>0),c=a>>>0;r.putInt32(c);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};o(d,i,r);var p=W.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p.putInt32(d.h5),p.putInt32(d.h6),p.putInt32(d.h7),p},s};var n=null,r=!1,a=null;function o(e,t,n){for(var r,o,i,s,u,c,l,d,p,f,h,m,g,v=n.length();v>=64;){for(u=0;u<16;++u)t[u]=n.getInt32();for(;u<64;++u)r=((r=t[u-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,o=((o=t[u-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,t[u]=r+t[u-7]+o+t[u-16]|0;for(c=e.h0,l=e.h1,d=e.h2,p=e.h3,f=e.h4,h=e.h5,m=e.h6,g=e.h7,u=0;u<64;++u)i=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),s=c&l|d&(c^l),r=g+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(m^f&(h^m))+a[u]+t[u],g=m,m=h,h=f,f=p+r>>>0,p=d,d=l,l=c,c=r+(o=i+s)>>>0;e.h0=e.h0+c|0,e.h1=e.h1+l|0,e.h2=e.h2+d|0,e.h3=e.h3+p|0,e.h4=e.h4+f|0,e.h5=e.h5+h|0,e.h6=e.h6+m|0,e.h7=e.h7+g|0,v-=64}}})),k((function(e){var n=null;!W.util.isNodejs||W.options.usePureJavaScript||process.versions["node-webkit"]||(n=t),(e.exports=W.prng=W.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,a=new Array(32),o=0;o<32;++o)a[o]=r.create();function i(){if(t.pools[0].messageLength>=32)return s();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),s()}function s(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var n=1,r=0;r<32;++r)t.reseeds%n==0&&(e.update(t.pools[r].digest().getBytes()),t.pools[r].start()),n<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var a=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(a),t.generated=0}function u(e){var t=null,n=W.util.globalScope,r=n.crypto||n.msCrypto;r&&r.getRandomValues&&(t=function(e){return r.getRandomValues(e)});var a=W.util.createBuffer();if(t)for(;a.length()<e;){var o=Math.max(1,Math.min(e-a.length(),65536)/4),i=new Uint32Array(Math.floor(o));try{t(i);for(var s=0;s<i.length;++s)a.putInt32(i[s])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(a.length()<e)for(var u,c,l,d=Math.floor(65536*Math.random());a.length()<e;)for(c=16807*(65535&d),c+=(32767&(u=16807*(d>>16)))<<16,d=4294967295&(c=(2147483647&(c+=u>>15))+(c>>31)),s=0;s<3;++s)l=d>>>(s<<3),l^=Math.floor(256*Math.random()),a.putByte(String.fromCharCode(255&l));return a.getBytes(e)}return t.pools=a,t.pool=0,t.generate=function(e,n){if(!n)return t.generateSync(e);var r=t.plugin.cipher,a=t.plugin.increment,o=t.plugin.formatKey,i=t.plugin.formatSeed,u=W.util.createBuffer();t.key=null,function c(l){if(l)return n(l);if(u.length()>=e)return n(null,u.getBytes(e));if(t.generated>1048575&&(t.key=null),null===t.key)return W.util.nextTick((function(){!function(e){if(t.pools[0].messageLength>=32)return s(),e();var n=32-t.pools[0].messageLength<<5;t.seedFile(n,(function(n,r){if(n)return e(n);t.collect(r),s(),e()}))}(c)}));var d=r(t.key,t.seed);t.generated+=d.length,u.putBytes(d),t.key=o(r(t.key,a(t.seed))),t.seed=i(r(t.key,t.seed)),W.util.setImmediate(c)}()},t.generateSync=function(e){var n=t.plugin.cipher,r=t.plugin.increment,a=t.plugin.formatKey,o=t.plugin.formatSeed;t.key=null;for(var s=W.util.createBuffer();s.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&i();var u=n(t.key,t.seed);t.generated+=u.length,s.putBytes(u),t.key=a(n(t.key,r(t.seed))),t.seed=o(n(t.key,t.seed))}return s.getBytes(e)},n?(t.seedFile=function(e,t){n.randomBytes(e,(function(e,n){if(e)return t(e);t(null,n.toString())}))},t.seedFileSync=function(e){return n.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,u(e))}catch(e){t(e)}},t.seedFileSync=u),t.collect=function(e){for(var n=e.length,r=0;r<n;++r)t.pools[t.pool].update(e.substr(r,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,n){for(var r="",a=0;a<n;a+=8)r+=String.fromCharCode(e>>a&255);t.collect(r)},t.registerWorker=function(e){e===self?t.seedFile=function(e,t){self.addEventListener("message",(function e(n){var r=n.data;r.forge&&r.forge.prng&&(self.removeEventListener("message",e),t(r.forge.prng.err,r.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:e}}})}:e.addEventListener("message",(function(n){var r=n.data;r.forge&&r.forge.prng&&t.seedFile(r.forge.prng.needed,(function(t,n){e.postMessage({forge:{prng:{err:t,bytes:n}}})}))}))},t}})),k((function(e){W.random&&W.random.getBytes?e.exports=W.random:function(t){var n={},r=new Array(4),a=W.util.createBuffer();function o(){var e=W.prng.create(n);return e.getBytes=function(t,n){return e.generate(t,n)},e.getBytesSync=function(t){return e.generate(t)},e}n.formatKey=function(e){var t=W.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),W.aes._expandKey(e,!1)},n.formatSeed=function(e){var t=W.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},n.cipher=function(e,t){return W.aes._updateBlock(e,t,r,!1),a.putInt32(r[0]),a.putInt32(r[1]),a.putInt32(r[2]),a.putInt32(r[3]),a.getBytes()},n.increment=function(e){return++e[3],e},n.md=W.md.sha256;var i=o(),s=null,u=W.util.globalScope,c=u.crypto||u.msCrypto;if(c&&c.getRandomValues&&(s=function(e){return c.getRandomValues(e)}),!W.util.isNodejs&&!s){if(i.collectInt(+new Date,32),"undefined"!=typeof navigator){var l="";for(var d in navigator)try{"string"==typeof navigator[d]&&(l+=navigator[d])}catch(e){}i.collect(l),l=null}t&&(t().mousemove((function(e){i.collectInt(e.clientX,16),i.collectInt(e.clientY,16)})),t().keypress((function(e){i.collectInt(e.charCode,8)})))}if(W.random)for(var d in i)W.random[d]=i[d];else W.random=i;W.random.createInstance=o,e.exports=W.random}("undefined"!=typeof jQuery?jQuery:null)}));var ve=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],ye=[1,2,3,5],be=function(e,t){return e<<t&65535|(65535&e)>>16-t},xe=function(e,t){return(65535&e)>>t|e<<16-t&65535};W.rc2=W.rc2||{},W.rc2.expandKey=function(e,t){"string"==typeof e&&(e=W.util.createBuffer(e)),t=t||128;var n,r=e,a=e.length(),o=t,i=Math.ceil(o/8),s=255>>(7&o);for(n=a;n<128;n++)r.putByte(ve[r.at(n-1)+r.at(n-a)&255]);for(r.setAt(128-i,ve[r.at(128-i)&s]),n=127-i;n>=0;n--)r.setAt(n,ve[r.at(n+1)^r.at(n+i)]);return r};var ke,we=function(e,t,n){var r,a,o,i,s=!1,u=null,c=null,l=null,d=[];for(e=W.rc2.expandKey(e,t),o=0;o<64;o++)d.push(e.getInt16Le());n?(r=function(e){for(o=0;o<4;o++)e[o]+=d[i]+(e[(o+3)%4]&e[(o+2)%4])+(~e[(o+3)%4]&e[(o+1)%4]),e[o]=be(e[o],ye[o]),i++},a=function(e){for(o=0;o<4;o++)e[o]+=d[63&e[(o+3)%4]]}):(r=function(e){for(o=3;o>=0;o--)e[o]=xe(e[o],ye[o]),e[o]-=d[i]+(e[(o+3)%4]&e[(o+2)%4])+(~e[(o+3)%4]&e[(o+1)%4]),i--},a=function(e){for(o=3;o>=0;o--)e[o]-=d[63&e[(o+3)%4]]});var p=function(e){var t=[];for(o=0;o<4;o++){var r=u.getInt16Le();null!==l&&(n?r^=l.getInt16Le():l.putInt16Le(r)),t.push(65535&r)}i=n?0:63;for(var a=0;a<e.length;a++)for(var s=0;s<e[a][0];s++)e[a][1](t);for(o=0;o<4;o++)null!==l&&(n?l.putInt16Le(t[o]):t[o]^=l.getInt16Le()),c.putInt16Le(t[o])},f=null;return f={start:function(e,t){e&&"string"==typeof e&&(e=W.util.createBuffer(e)),s=!1,u=W.util.createBuffer(),c=t||new W.util.createBuffer,l=e,f.output=c},update:function(e){for(s||u.putBuffer(e);u.length()>=8;)p([[5,r],[1,a],[6,r],[1,a],[5,r]])},finish:function(e){var t=!0;if(n)if(e)t=e(8,u,!n);else{var r=8===u.length()?8:8-u.length();u.fillWithByte(r,r)}if(t&&(s=!0,f.update()),!n&&(t=0===u.length()))if(e)t=e(8,c,!n);else{var a=c.length(),o=c.at(a-1);o>a?t=!1:c.truncate(o)}return t}}};function Ie(e,t,n){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function Ce(){return new Ie(null)}function Se(e,t,n,r,a,o){for(var i=16383&t,s=t>>14;--o>=0;){var u=16383&this.data[e],c=this.data[e++]>>14,l=s*u+c*i;a=((u=i*u+((16383&l)<<14)+n.data[r]+a)>>28)+(l>>14)+s*c,n.data[r++]=268435455&u}return a}W.rc2.startEncrypting=function(e,t,n){var r=W.rc2.createEncryptionCipher(e,128);return r.start(t,n),r},W.rc2.createEncryptionCipher=function(e,t){return we(e,t,!0)},W.rc2.startDecrypting=function(e,t,n){var r=W.rc2.createDecryptionCipher(e,128);return r.start(t,n),r},W.rc2.createDecryptionCipher=function(e,t){return we(e,t,!1)},W.jsbn=W.jsbn||{},W.jsbn.BigInteger=Ie,"undefined"==typeof navigator?(Ie.prototype.am=Se,ke=28):"Microsoft Internet Explorer"==navigator.appName?(Ie.prototype.am=function(e,t,n,r,a,o){for(var i=32767&t,s=t>>15;--o>=0;){var u=32767&this.data[e],c=this.data[e++]>>15,l=s*u+c*i;a=((u=i*u+((32767&l)<<15)+n.data[r]+(1073741823&a))>>>30)+(l>>>15)+s*c+(a>>>30),n.data[r++]=1073741823&u}return a},ke=30):"Netscape"!=navigator.appName?(Ie.prototype.am=function(e,t,n,r,a,o){for(;--o>=0;){var i=t*this.data[e++]+n.data[r]+a;a=Math.floor(i/67108864),n.data[r++]=67108863&i}return a},ke=26):(Ie.prototype.am=Se,ke=28),Ie.prototype.DB=ke,Ie.prototype.DM=(1<<ke)-1,Ie.prototype.DV=1<<ke,Ie.prototype.FV=Math.pow(2,52),Ie.prototype.F1=52-ke,Ie.prototype.F2=2*ke-52;var Ee,Te,Ne="0123456789abcdefghijklmnopqrstuvwxyz",Ae=new Array;for(Ee="0".charCodeAt(0),Te=0;Te<=9;++Te)Ae[Ee++]=Te;for(Ee="a".charCodeAt(0),Te=10;Te<36;++Te)Ae[Ee++]=Te;for(Ee="A".charCodeAt(0),Te=10;Te<36;++Te)Ae[Ee++]=Te;function _e(e){return Ne.charAt(e)}function Re(e,t){var n=Ae[e.charCodeAt(t)];return null==n?-1:n}function Oe(e){var t=Ce();return t.fromInt(e),t}function Fe(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function Me(e){this.m=e}function De(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Be(e,t){return e&t}function Pe(e,t){return e|t}function Le(e,t){return e^t}function Ue(e,t){return e&~t}function Ve(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function We(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function ze(){}function je(e){return e}function He(e){this.r2=Ce(),this.q3=Ce(),Ie.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}Me.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},Me.prototype.revert=function(e){return e},Me.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},Me.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},Me.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},De.prototype.convert=function(e){var t=Ce();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(Ie.ZERO)>0&&this.m.subTo(t,t),t},De.prototype.revert=function(e){var t=Ce();return e.copyTo(t),this.reduce(t),t},De.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e.data[t],r=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},De.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},De.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Ie.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},Ie.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},Ie.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,a=!1,o=0;--r>=0;){var i=8==n?255&e[r]:Re(e,r);i<0?"-"==e.charAt(r)&&(a=!0):(a=!1,0==o?this.data[this.t++]=i:o+n>this.DB?(this.data[this.t-1]|=(i&(1<<this.DB-o)-1)<<o,this.data[this.t++]=i>>this.DB-o):this.data[this.t-1]|=i<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&Ie.ZERO.subTo(this,this)},Ie.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},Ie.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s},Ie.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s},Ie.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,a=this.DB-r,o=(1<<a)-1,i=Math.floor(e/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t.data[n+i+1]=this.data[n]>>a|s,s=(this.data[n]&o)<<r;for(n=i-1;n>=0;--n)t.data[n]=0;t.data[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()},Ie.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,a=this.DB-r,o=(1<<r)-1;t.data[0]=this.data[n]>>r;for(var i=n+1;i<this.t;++i)t.data[i-n-1]|=(this.data[i]&o)<<a,t.data[i-n]=this.data[i]>>r;r>0&&(t.data[this.t-n-1]|=(this.s&o)<<a),t.t=this.t-n,t.clamp()}},Ie.prototype.subTo=function(e,t){for(var n=0,r=0,a=Math.min(e.t,this.t);n<a;)r+=this.data[n]-e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t.data[n++]=this.DV+r:r>0&&(t.data[n++]=r),t.t=n,t.clamp()},Ie.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),a=n.t;for(t.t=a+r.t;--a>=0;)t.data[a]=0;for(a=0;a<r.t;++a)t.data[a+n.t]=n.am(0,r.data[a],t,a,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&Ie.ZERO.subTo(t,t)},Ie.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e.data[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()},Ie.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var a=this.abs();if(a.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=Ce());var o=Ce(),i=this.s,s=e.s,u=this.DB-Fe(r.data[r.t-1]);u>0?(r.lShiftTo(u,o),a.lShiftTo(u,n)):(r.copyTo(o),a.copyTo(n));var c=o.t,l=o.data[c-1];if(0!=l){var d=l*(1<<this.F1)+(c>1?o.data[c-2]>>this.F2:0),p=this.FV/d,f=(1<<this.F1)/d,h=1<<this.F2,m=n.t,g=m-c,v=null==t?Ce():t;for(o.dlShiftTo(g,v),n.compareTo(v)>=0&&(n.data[n.t++]=1,n.subTo(v,n)),Ie.ONE.dlShiftTo(c,v),v.subTo(o,o);o.t<c;)o.data[o.t++]=0;for(;--g>=0;){var y=n.data[--m]==l?this.DM:Math.floor(n.data[m]*p+(n.data[m-1]+h)*f);if((n.data[m]+=o.am(0,y,n,g,0,c))<y)for(o.dlShiftTo(g,v),n.subTo(v,n);n.data[m]<--y;)n.subTo(v,n)}null!=t&&(n.drShiftTo(c,t),i!=s&&Ie.ZERO.subTo(t,t)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),i<0&&Ie.ZERO.subTo(n,n)}}},Ie.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},Ie.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},Ie.prototype.exp=function(e,t){if(e>4294967295||e<1)return Ie.ONE;var n=Ce(),r=Ce(),a=t.convert(this),o=Fe(e)-1;for(a.copyTo(n);--o>=0;)if(t.sqrTo(n,r),(e&1<<o)>0)t.mulTo(r,a,n);else{var i=n;n=r,r=i}return t.revert(n)},Ie.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,a=!1,o="",i=this.t,s=this.DB-i*this.DB%t;if(i-- >0)for(s<this.DB&&(n=this.data[i]>>s)>0&&(a=!0,o=_e(n));i>=0;)s<t?(n=(this.data[i]&(1<<s)-1)<<t-s,n|=this.data[--i]>>(s+=this.DB-t)):(n=this.data[i]>>(s-=t)&r,s<=0&&(s+=this.DB,--i)),n>0&&(a=!0),a&&(o+=_e(n));return a?o:"0"},Ie.prototype.negate=function(){var e=Ce();return Ie.ZERO.subTo(this,e),e},Ie.prototype.abs=function(){return this.s<0?this.negate():this},Ie.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this.data[n]-e.data[n]))return t;return 0},Ie.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Fe(this.data[this.t-1]^this.s&this.DM)},Ie.prototype.mod=function(e){var t=Ce();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(Ie.ZERO)>0&&e.subTo(t,t),t},Ie.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new Me(t):new De(t),this.exp(e,n)},Ie.ZERO=Oe(0),Ie.ONE=Oe(1),ze.prototype.convert=je,ze.prototype.revert=je,ze.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},ze.prototype.sqrTo=function(e,t){e.squareTo(t)},He.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Ce();return e.copyTo(t),this.reduce(t),t},He.prototype.revert=function(e){return e},He.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},He.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},He.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var Ge=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],qe=(1<<26)/Ge[Ge.length-1];if(Ie.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},Ie.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=Oe(n),a=Ce(),o=Ce(),i="";for(this.divRemTo(r,a,o);a.signum()>0;)i=(n+o.intValue()).toString(e).substr(1)+i,a.divRemTo(r,a,o);return o.intValue().toString(e)+i},Ie.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),a=!1,o=0,i=0,s=0;s<e.length;++s){var u=Re(e,s);u<0?"-"==e.charAt(s)&&0==this.signum()&&(a=!0):(i=t*i+u,++o>=n&&(this.dMultiply(r),this.dAddOffset(i,0),o=0,i=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(i,0)),a&&Ie.ZERO.subTo(this,this)},Ie.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(Ie.ONE.shiftLeft(e-1),Pe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(Ie.ONE.shiftLeft(e-1),this);else{var r=new Array,a=7&e;r.length=1+(e>>3),t.nextBytes(r),a>0?r[0]&=(1<<a)-1:r[0]=0,this.fromString(r,256)}},Ie.prototype.bitwiseTo=function(e,t,n){var r,a,o=Math.min(e.t,this.t);for(r=0;r<o;++r)n.data[r]=t(this.data[r],e.data[r]);if(e.t<this.t){for(a=e.s&this.DM,r=o;r<this.t;++r)n.data[r]=t(this.data[r],a);n.t=this.t}else{for(a=this.s&this.DM,r=o;r<e.t;++r)n.data[r]=t(a,e.data[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},Ie.prototype.changeBit=function(e,t){var n=Ie.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},Ie.prototype.addTo=function(e,t){for(var n=0,r=0,a=Math.min(e.t,this.t);n<a;)r+=this.data[n]+e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t.data[n++]=r:r<-1&&(t.data[n++]=this.DV+r),t.t=n,t.clamp()},Ie.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},Ie.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},Ie.prototype.multiplyLowerTo=function(e,t,n){var r,a=Math.min(this.t+e.t,t);for(n.s=0,n.t=a;a>0;)n.data[--a]=0;for(r=n.t-this.t;a<r;++a)n.data[a+this.t]=this.am(0,e.data[a],n,a,0,this.t);for(r=Math.min(e.t,t);a<r;++a)this.am(0,e.data[a],n,a,0,t-a);n.clamp()},Ie.prototype.multiplyUpperTo=function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n.data[this.t+r-t]=this.am(t-r,e.data[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},Ie.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this.data[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this.data[r])%e;return n},Ie.prototype.millerRabin=function(e){var t=this.subtract(Ie.ONE),n=t.getLowestSetBit();if(n<=0)return!1;for(var r,a=t.shiftRight(n),o={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},i=0;i<e;++i){do{r=new Ie(this.bitLength(),o)}while(r.compareTo(Ie.ONE)<=0||r.compareTo(t)>=0);var s=r.modPow(a,this);if(0!=s.compareTo(Ie.ONE)&&0!=s.compareTo(t)){for(var u=1;u++<n&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(Ie.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},Ie.prototype.clone=function(){var e=Ce();return this.copyTo(e),e},Ie.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},Ie.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},Ie.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},Ie.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},Ie.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,a=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[a++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&n)&&(n|=-256),0==a&&(128&this.s)!=(128&n)&&++a,(a>0||n!=this.s)&&(t[a++]=n);return t},Ie.prototype.equals=function(e){return 0==this.compareTo(e)},Ie.prototype.min=function(e){return this.compareTo(e)<0?this:e},Ie.prototype.max=function(e){return this.compareTo(e)>0?this:e},Ie.prototype.and=function(e){var t=Ce();return this.bitwiseTo(e,Be,t),t},Ie.prototype.or=function(e){var t=Ce();return this.bitwiseTo(e,Pe,t),t},Ie.prototype.xor=function(e){var t=Ce();return this.bitwiseTo(e,Le,t),t},Ie.prototype.andNot=function(e){var t=Ce();return this.bitwiseTo(e,Ue,t),t},Ie.prototype.not=function(){for(var e=Ce(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},Ie.prototype.shiftLeft=function(e){var t=Ce();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},Ie.prototype.shiftRight=function(e){var t=Ce();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},Ie.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+Ve(this.data[e]);return this.s<0?this.t*this.DB:-1},Ie.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=We(this.data[n]^t);return e},Ie.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},Ie.prototype.setBit=function(e){return this.changeBit(e,Pe)},Ie.prototype.clearBit=function(e){return this.changeBit(e,Ue)},Ie.prototype.flipBit=function(e){return this.changeBit(e,Le)},Ie.prototype.add=function(e){var t=Ce();return this.addTo(e,t),t},Ie.prototype.subtract=function(e){var t=Ce();return this.subTo(e,t),t},Ie.prototype.multiply=function(e){var t=Ce();return this.multiplyTo(e,t),t},Ie.prototype.divide=function(e){var t=Ce();return this.divRemTo(e,t,null),t},Ie.prototype.remainder=function(e){var t=Ce();return this.divRemTo(e,null,t),t},Ie.prototype.divideAndRemainder=function(e){var t=Ce(),n=Ce();return this.divRemTo(e,t,n),new Array(t,n)},Ie.prototype.modPow=function(e,t){var n,r,a=e.bitLength(),o=Oe(1);if(a<=0)return o;n=a<18?1:a<48?3:a<144?4:a<768?5:6,r=a<8?new Me(t):t.isEven()?new He(t):new De(t);var i=new Array,s=3,u=n-1,c=(1<<n)-1;if(i[1]=r.convert(this),n>1){var l=Ce();for(r.sqrTo(i[1],l);s<=c;)i[s]=Ce(),r.mulTo(l,i[s-2],i[s]),s+=2}var d,p,f=e.t-1,h=!0,m=Ce();for(a=Fe(e.data[f])-1;f>=0;){for(a>=u?d=e.data[f]>>a-u&c:(d=(e.data[f]&(1<<a+1)-1)<<u-a,f>0&&(d|=e.data[f-1]>>this.DB+a-u)),s=n;0==(1&d);)d>>=1,--s;if((a-=s)<0&&(a+=this.DB,--f),h)i[d].copyTo(o),h=!1;else{for(;s>1;)r.sqrTo(o,m),r.sqrTo(m,o),s-=2;s>0?r.sqrTo(o,m):(p=o,o=m,m=p),r.mulTo(m,i[d],o)}for(;f>=0&&0==(e.data[f]&1<<a);)r.sqrTo(o,m),p=o,o=m,m=p,--a<0&&(a=this.DB-1,--f)}return r.revert(o)},Ie.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return Ie.ZERO;for(var n=e.clone(),r=this.clone(),a=Oe(1),o=Oe(0),i=Oe(0),s=Oe(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);n.compareTo(r)>=0?(n.subTo(r,n),t&&a.subTo(i,a),o.subTo(s,o)):(r.subTo(n,r),t&&i.subTo(a,i),s.subTo(o,s))}return 0!=r.compareTo(Ie.ONE)?Ie.ZERO:s.compareTo(e)>=0?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s},Ie.prototype.pow=function(e){return this.exp(e,new ze)},Ie.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var a=t.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return t;for(a<o&&(o=a),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(a=t.getLowestSetBit())>0&&t.rShiftTo(a,t),(a=n.getLowestSetBit())>0&&n.rShiftTo(a,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},Ie.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n.data[0]<=Ge[Ge.length-1]){for(t=0;t<Ge.length;++t)if(n.data[0]==Ge[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<Ge.length;){for(var r=Ge[t],a=t+1;a<Ge.length&&r<qe;)r*=Ge[a++];for(r=n.modInt(r);t<a;)if(r%Ge[t++]==0)return!1}return n.millerRabin(e)},k((function(e){var t=e.exports=W.sha1=W.sha1||{};W.md.sha1=W.md.algorithms.sha1=t,t.create=function(){r||(n=String.fromCharCode(128),n+=W.util.fillString(String.fromCharCode(0),64),r=!0);var e=null,t=W.util.createBuffer(),o=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,r=0;r<n;++r)i.fullMessageLength.push(0);return t=W.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(n,r){"utf8"===r&&(n=W.util.encodeUtf8(n));var s=n.length;i.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=s[1],s[1]=s[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(n),a(e,o,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var r=W.util.createBuffer();r.putBytes(t.bytes());var s,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;r.putBytes(n.substr(0,i.blockLength-u));for(var c=8*i.fullMessageLength[0],l=0;l<i.fullMessageLength.length-1;++l)c+=(s=8*i.fullMessageLength[l+1])/4294967296>>>0,r.putInt32(c>>>0),c=s>>>0;r.putInt32(c);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};a(d,o,r);var p=W.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p},i};var n=null,r=!1;function a(e,t,n){for(var r,a,o,i,s,u,c,l=n.length();l>=64;){for(a=e.h0,o=e.h1,i=e.h2,s=e.h3,u=e.h4,c=0;c<16;++c)r=n.getInt32(),t[c]=r,r=(a<<5|a>>>27)+(s^o&(i^s))+u+1518500249+r,u=s,s=i,i=(o<<30|o>>>2)>>>0,o=a,a=r;for(;c<20;++c)r=(r=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|r>>>31,t[c]=r,r=(a<<5|a>>>27)+(s^o&(i^s))+u+1518500249+r,u=s,s=i,i=(o<<30|o>>>2)>>>0,o=a,a=r;for(;c<32;++c)r=(r=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|r>>>31,t[c]=r,r=(a<<5|a>>>27)+(o^i^s)+u+1859775393+r,u=s,s=i,i=(o<<30|o>>>2)>>>0,o=a,a=r;for(;c<40;++c)r=(r=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|r>>>30,t[c]=r,r=(a<<5|a>>>27)+(o^i^s)+u+1859775393+r,u=s,s=i,i=(o<<30|o>>>2)>>>0,o=a,a=r;for(;c<60;++c)r=(r=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|r>>>30,t[c]=r,r=(a<<5|a>>>27)+(o&i|s&(o^i))+u+2400959708+r,u=s,s=i,i=(o<<30|o>>>2)>>>0,o=a,a=r;for(;c<80;++c)r=(r=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|r>>>30,t[c]=r,r=(a<<5|a>>>27)+(o^i^s)+u+3395469782+r,u=s,s=i,i=(o<<30|o>>>2)>>>0,o=a,a=r;e.h0=e.h0+a|0,e.h1=e.h1+o|0,e.h2=e.h2+i|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,l-=64}}})),k((function(e){var t=e.exports=W.pkcs1=W.pkcs1||{};function n(e,t,n){n||(n=W.md.sha1.create());for(var r="",a=Math.ceil(t/n.digestLength),o=0;o<a;++o){var i=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);n.start(),n.update(e+i),r+=n.digest().getBytes()}return r.substring(0,t)}t.encode_rsa_oaep=function(e,t,r){var a,o,i,s;"string"==typeof r?(a=r,o=arguments[3]||void 0,i=arguments[4]||void 0):r&&(a=r.label||void 0,o=r.seed||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),i?i.start():i=W.md.sha1.create(),s||(s=i);var u=Math.ceil(e.n.bitLength()/8),c=u-2*i.digestLength-2;if(t.length>c)throw(h=new Error("RSAES-OAEP input message length is too long.")).length=t.length,h.maxLength=c,h;a||(a=""),i.update(a,"raw");for(var l=i.digest(),d="",p=c-t.length,f=0;f<p;f++)d+="\0";var h,m=l.getBytes()+d+""+t;if(o){if(o.length!==i.digestLength)throw(h=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=o.length,h.digestLength=i.digestLength,h}else o=W.random.getBytes(i.digestLength);var g=n(o,u-i.digestLength-1,s),v=W.util.xorBytes(m,g,m.length),y=n(v,i.digestLength,s);return"\0"+W.util.xorBytes(o,y,o.length)+v},t.decode_rsa_oaep=function(e,t,r){var a,o,i;"string"==typeof r?(a=r,o=arguments[3]||void 0):r&&(a=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(i=r.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s)throw(g=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,g.expectedLength=s,g;if(void 0===o?o=W.md.sha1.create():o.start(),i||(i=o),s<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");a||(a=""),o.update(a,"raw");for(var u=o.digest().getBytes(),c=t.charAt(0),l=t.substring(1,o.digestLength+1),d=t.substring(1+o.digestLength),p=n(d,o.digestLength,i),f=n(W.util.xorBytes(l,p,l.length),s-o.digestLength-1,i),h=W.util.xorBytes(d,f,d.length),m=h.substring(0,o.digestLength),g="\0"!==c,v=0;v<o.digestLength;++v)g|=u.charAt(v)!==m.charAt(v);for(var y=1,b=o.digestLength,x=o.digestLength;x<h.length;x++){var k=h.charCodeAt(x);g|=k&(y?65534:0),b+=y&=1&k^1}if(g||1!==h.charCodeAt(b))throw new Error("Invalid RSAES-OAEP padding.");return h.substring(b+1)}})),k((function(e){!function(){if(W.prime)e.exports=W.prime;else{var t=e.exports=W.prime=W.prime||{},n=W.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],a=new n(null);a.fromInt(30);var o=function(e,t){return e|t};t.generateProbablePrime=function(e,t,r){"function"==typeof t&&(r=t,t={});var a=(t=t||{}).algorithm||"PRIMEINC";"string"==typeof a&&(a={name:a}),a.options=a.options||{};var o=t.prng||W.random,u={nextBytes:function(e){for(var t=o.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}};if("PRIMEINC"===a.name)return function(e,t,r,a){return"workers"in r?function(e,t,r,a){if("undefined"==typeof Worker)return i(e,t,r,a);var o=s(e,t),u=r.workers,c=r.workLoad||100,l=30*c/8,d=r.workerScript||"forge/prime.worker.js";if(-1===u)return W.util.estimateCores((function(e,t){e&&(t=2),u=t-1,p()}));function p(){u=Math.max(1,u);for(var r=[],i=0;i<u;++i)r[i]=new Worker(d);for(i=0;i<u;++i)r[i].addEventListener("message",f);var p=!1;function f(i){if(!p){var u=i.data;if(u.found){for(var d=0;d<r.length;++d)r[d].terminate();return p=!0,a(null,new n(u.prime,16))}o.bitLength()>e&&(o=s(e,t));var f=o.toString(16);i.target.postMessage({hex:f,workLoad:c}),o.dAddOffset(l,0)}}}p()}(e,t,r,a):i(e,t,r,a)}(e,u,a.options,r);throw new Error("Invalid prime generation algorithm: "+a.name)}}function i(e,t,n,a){var o=s(e,t),i=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(o.bitLength());"millerRabinTests"in n&&(i=n.millerRabinTests);var u=10;"maxBlockTime"in n&&(u=n.maxBlockTime),function e(t,n,a,o,i,u,c){var l=+new Date;do{if(t.bitLength()>n&&(t=s(n,a)),t.isProbablePrime(i))return c(null,t);t.dAddOffset(r[o++%8],0)}while(u<0||+new Date-l<u);W.util.setImmediate((function(){e(t,n,a,o,i,u,c)}))}(o,e,t,0,i,u,a)}function s(e,t){var r=new n(e,t),i=e-1;return r.testBit(i)||r.bitwiseTo(n.ONE.shiftLeft(i),o,r),r.dAddOffset(31-r.mod(a).byteValue(),0),r}}()})),void 0===Ke)var Ke=W.jsbn.BigInteger;var Xe=W.util.isNodejs?t:null,Qe=W.asn1,Ye=W.util;W.pki=W.pki||{},W.pki.rsa=W.rsa=W.rsa||{};var $e=W.pki,Ze=[6,4,2,4,2,4,6,2],Je={name:"PrivateKeyInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},et={name:"RSAPrivateKey",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},tt={name:"RSAPublicKey",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},nt=W.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:Qe.Class.UNIVERSAL,type:Qe.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},rt=function(e){var t;if(!(e.algorithm in $e.oids)){var n=new Error("Unknown message digest algorithm.");throw n.algorithm=e.algorithm,n}t=$e.oids[e.algorithm];var r=Qe.oidToDer(t).getBytes(),a=Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[]),o=Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[]);o.value.push(Qe.create(Qe.Class.UNIVERSAL,Qe.Type.OID,!1,r)),o.value.push(Qe.create(Qe.Class.UNIVERSAL,Qe.Type.NULL,!1,""));var i=Qe.create(Qe.Class.UNIVERSAL,Qe.Type.OCTETSTRING,!1,e.digest().getBytes());return a.value.push(o),a.value.push(i),Qe.toDer(a).getBytes()},at=function(e,t,n){if(n)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var r;t.dP||(t.dP=t.d.mod(t.p.subtract(Ke.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(Ke.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{r=new Ke(W.util.bytesToHex(W.random.getBytes(t.n.bitLength()/8)),16)}while(r.compareTo(t.n)>=0||!r.gcd(t.n).equals(Ke.ONE));for(var a=(e=e.multiply(r.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),o=e.mod(t.q).modPow(t.dQ,t.q);a.compareTo(o)<0;)a=a.add(t.p);var i=a.subtract(o).multiply(t.qInv).mod(t.p).multiply(t.q).add(o);return i.multiply(r.modInverse(t.n)).mod(t.n)};function ot(e,t,n){var r=W.util.createBuffer(),a=Math.ceil(t.n.bitLength()/8);if(e.length>a-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=e.length,o.max=a-11,o}r.putByte(0),r.putByte(n);var i,s=a-3-e.length;if(0===n||1===n){i=0===n?0:255;for(var u=0;u<s;++u)r.putByte(i)}else for(;s>0;){var c=0,l=W.random.getBytes(s);for(u=0;u<s;++u)0===(i=l.charCodeAt(u))?++c:r.putByte(i);s=c}return r.putByte(0),r.putBytes(e),r}function it(e,t,n,r){var a=Math.ceil(t.n.bitLength()/8),o=W.util.createBuffer(e),i=o.getByte(),s=o.getByte();if(0!==i||n&&0!==s&&1!==s||!n&&2!=s||n&&0===s&&void 0===r)throw new Error("Encryption block is invalid.");var u=0;if(0===s){u=a-3-r;for(var c=0;c<u;++c)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===s)for(u=0;o.length()>1;){if(255!==o.getByte()){--o.read;break}++u}else if(2===s)for(u=0;o.length()>1;){if(0===o.getByte()){--o.read;break}++u}if(0!==o.getByte()||u!==a-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function st(e,t,n){"function"==typeof t&&(n=t,t={});var r={algorithm:{name:(t=t||{}).algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};function a(){o(e.pBits,(function(t,r){return t?n(t):(e.p=r,null!==e.q?i(t,e.q):void o(e.qBits,i))}))}function o(e,t){W.prime.generateProbablePrime(e,r,t)}function i(t,r){if(t)return n(t);if(e.q=r,e.p.compareTo(e.q)<0){var s=e.p;e.p=e.q,e.q=s}if(0!==e.p.subtract(Ke.ONE).gcd(e.e).compareTo(Ke.ONE))return e.p=null,void a();if(0!==e.q.subtract(Ke.ONE).gcd(e.e).compareTo(Ke.ONE))return e.q=null,void o(e.qBits,i);if(e.p1=e.p.subtract(Ke.ONE),e.q1=e.q.subtract(Ke.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(Ke.ONE))return e.p=e.q=null,void a();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void o(e.qBits,i);var u=e.e.modInverse(e.phi);e.keys={privateKey:$e.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:$e.rsa.setPublicKey(e.n,e.e)},n(null,e.keys)}"prng"in t&&(r.prng=t.prng),a()}function ut(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var n=W.util.hexToBytes(t);return n.length>1&&(0===n.charCodeAt(0)&&0==(128&n.charCodeAt(1))||255===n.charCodeAt(0)&&128==(128&n.charCodeAt(1)))?n.substr(1):n}function ct(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function lt(e){return W.util.isNodejs&&"function"==typeof Xe[e]}function dt(e){return void 0!==Ye.globalScope&&"object"==typeof Ye.globalScope.crypto&&"object"==typeof Ye.globalScope.crypto.subtle&&"function"==typeof Ye.globalScope.crypto.subtle[e]}function pt(e){return void 0!==Ye.globalScope&&"object"==typeof Ye.globalScope.msCrypto&&"object"==typeof Ye.globalScope.msCrypto.subtle&&"function"==typeof Ye.globalScope.msCrypto.subtle[e]}function ft(e){for(var t=W.util.hexToBytes(e.toString(16)),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}if($e.rsa.encrypt=function(e,t,n){var r,a=n,o=Math.ceil(t.n.bitLength()/8);!1!==n&&!0!==n?(a=2===n,r=ot(e,t,n)):(r=W.util.createBuffer()).putBytes(e);for(var i=new Ke(r.toHex(),16),s=at(i,t,a).toString(16),u=W.util.createBuffer(),c=o-Math.ceil(s.length/2);c>0;)u.putByte(0),--c;return u.putBytes(W.util.hexToBytes(s)),u.getBytes()},$e.rsa.decrypt=function(e,t,n,r){var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var o=new Error("Encrypted message length is invalid.");throw o.length=e.length,o.expected=a,o}var i=new Ke(W.util.createBuffer(e).toHex(),16);if(i.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var s=at(i,t,n).toString(16),u=W.util.createBuffer(),c=a-Math.ceil(s.length/2);c>0;)u.putByte(0),--c;return u.putBytes(W.util.hexToBytes(s)),!1!==r?it(u.getBytes(),t,n):u.getBytes()},$e.rsa.createKeyPairGenerationState=function(e,t,n){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048;var r,a=(n=n||{}).prng||W.random,o={nextBytes:function(e){for(var t=a.getBytesSync(e.length),n=0;n<e.length;++n)e[n]=t.charCodeAt(n)}},i=n.algorithm||"PRIMEINC";if("PRIMEINC"!==i)throw new Error("Invalid key generation algorithm: "+i);return(r={algorithm:i,state:0,bits:e,rng:o,eInt:t||65537,e:new Ke(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(r.eInt),r},$e.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var n=new Ke(null);n.fromInt(30);for(var r,a=0,o=function(e,t){return e|t},i=+new Date,s=0;null===e.keys&&(t<=0||s<t);){if(0===e.state){var u=null===e.p?e.pBits:e.qBits,c=u-1;0===e.pqState?(e.num=new Ke(u,e.rng),e.num.testBit(c)||e.num.bitwiseTo(Ke.ONE.shiftLeft(c),o,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),a=0,++e.pqState):1===e.pqState?e.num.bitLength()>u?e.pqState=0:e.num.isProbablePrime(ct(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(Ze[a++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(Ke.ONE).gcd(e.e).compareTo(Ke.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(Ke.ONE),e.q1=e.q.subtract(Ke.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(Ke.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var l=e.e.modInverse(e.phi);e.keys={privateKey:$e.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:$e.rsa.setPublicKey(e.n,e.e)}}s+=(r=+new Date)-i,i=r}return null!==e.keys},$e.rsa.generateKeyPair=function(e,t,n,r){if(1===arguments.length?"object"==typeof e?(n=e,e=void 0):"function"==typeof e&&(r=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(r=t,t=void 0):"number"!=typeof t&&(n=t,t=void 0):(n=e,r=t,e=void 0,t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof n&&(r=n,n=void 0):(r=n,n=t,t=void 0)),n=n||{},void 0===e&&(e=n.bits||2048),void 0===t&&(t=n.e||65537),!n.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(r){if(lt("generateKeyPair"))return Xe.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,n){if(e)return r(e);r(null,{privateKey:$e.privateKeyFromPem(n),publicKey:$e.publicKeyFromPem(t)})}));if(dt("generateKey")&&dt("exportKey"))return Ye.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:ft(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return Ye.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){r(e)})).then((function(e){if(e){var t=$e.privateKeyFromAsn1(Qe.fromDer(W.util.createBuffer(e)));r(null,{privateKey:t,publicKey:$e.setRsaPublicKey(t.n,t.e)})}}));if(pt("generateKey")&&pt("exportKey")){var a=Ye.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:ft(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return a.oncomplete=function(e){var t=e.target.result,n=Ye.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);n.oncomplete=function(e){var t=e.target.result,n=$e.privateKeyFromAsn1(Qe.fromDer(W.util.createBuffer(t)));r(null,{privateKey:n,publicKey:$e.setRsaPublicKey(n.n,n.e)})},n.onerror=function(e){r(e)}},void(a.onerror=function(e){r(e)})}}else if(lt("generateKeyPairSync")){var o=Xe.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:$e.privateKeyFromPem(o.privateKey),publicKey:$e.publicKeyFromPem(o.publicKey)}}var i=$e.rsa.createKeyPairGenerationState(e,t,n);if(!r)return $e.rsa.stepKeyPairGenerationState(i,0),i.keys;st(i,n,r)},$e.setRsaPublicKey=$e.rsa.setPublicKey=function(e,t){var n={n:e,e:t,encrypt:function(e,t,r){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,n){return ot(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return W.pkcs1.encode_rsa_oaep(t,e,r)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var a=t.encode(e,n,!0);return $e.rsa.encrypt(a,n,!0)},verify:function(e,t,r){"string"==typeof r?r=r.toUpperCase():void 0===r&&(r="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===r?r={verify:function(e,t){return t=it(t,n,!0),e===Qe.fromDer(t).value[1].value}}:"NONE"!==r&&"NULL"!==r&&null!==r||(r={verify:function(e,t){return e===it(t,n,!0)}});var a=$e.rsa.decrypt(t,n,!0,!1);return r.verify(e,a,n.n.bitLength())}};return n},$e.setRsaPrivateKey=$e.rsa.setPrivateKey=function(e,t,n,r,a,o,i,s){var u={n:e,e:t,d:n,p:r,q:a,dP:o,dQ:i,qInv:s,decrypt:function(e,t,n){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var r=$e.rsa.decrypt(e,u,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:it};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return W.pkcs1.decode_rsa_oaep(t,e,n)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(r,u,!1)},sign:function(e,t){var n=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:rt},n=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},n=1);var r=t.encode(e,u.n.bitLength());return $e.rsa.encrypt(r,u,n)}};return u},$e.wrapRsaPrivateKey=function(e){return Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,Qe.integerToDer(0).getBytes()),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[Qe.create(Qe.Class.UNIVERSAL,Qe.Type.OID,!1,Qe.oidToDer($e.oids.rsaEncryption).getBytes()),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.NULL,!1,"")]),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.OCTETSTRING,!1,Qe.toDer(e).getBytes())])},$e.privateKeyFromAsn1=function(e){var t,n,r,a,o,i,s,u,c={},l=[];if(Qe.validate(e,Je,c,l)&&(e=Qe.fromDer(W.util.createBuffer(c.privateKey))),c={},l=[],!Qe.validate(e,et,c,l)){var d=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw d.errors=l,d}return t=W.util.createBuffer(c.privateKeyModulus).toHex(),n=W.util.createBuffer(c.privateKeyPublicExponent).toHex(),r=W.util.createBuffer(c.privateKeyPrivateExponent).toHex(),a=W.util.createBuffer(c.privateKeyPrime1).toHex(),o=W.util.createBuffer(c.privateKeyPrime2).toHex(),i=W.util.createBuffer(c.privateKeyExponent1).toHex(),s=W.util.createBuffer(c.privateKeyExponent2).toHex(),u=W.util.createBuffer(c.privateKeyCoefficient).toHex(),$e.setRsaPrivateKey(new Ke(t,16),new Ke(n,16),new Ke(r,16),new Ke(a,16),new Ke(o,16),new Ke(i,16),new Ke(s,16),new Ke(u,16))},$e.privateKeyToAsn1=$e.privateKeyToRSAPrivateKey=function(e){return Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,Qe.integerToDer(0).getBytes()),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.n)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.e)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.d)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.p)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.q)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.dP)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.dQ)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.qInv))])},$e.publicKeyFromAsn1=function(e){var t={},n=[];if(Qe.validate(e,nt,t,n)){var r,a=Qe.derToOid(t.publicKeyOid);if(a!==$e.oids.rsaEncryption)throw(r=new Error("Cannot read public key. Unknown OID.")).oid=a,r;e=t.rsaPublicKey}if(n=[],!Qe.validate(e,tt,t,n))throw(r=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=n,r;var o=W.util.createBuffer(t.publicKeyModulus).toHex(),i=W.util.createBuffer(t.publicKeyExponent).toHex();return $e.setRsaPublicKey(new Ke(o,16),new Ke(i,16))},$e.publicKeyToAsn1=$e.publicKeyToSubjectPublicKeyInfo=function(e){return Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[Qe.create(Qe.Class.UNIVERSAL,Qe.Type.OID,!1,Qe.oidToDer($e.oids.rsaEncryption).getBytes()),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.NULL,!1,"")]),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.BITSTRING,!1,[$e.publicKeyToRSAPublicKey(e)])])},$e.publicKeyToRSAPublicKey=function(e){return Qe.create(Qe.Class.UNIVERSAL,Qe.Type.SEQUENCE,!0,[Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.n)),Qe.create(Qe.Class.UNIVERSAL,Qe.Type.INTEGER,!1,ut(e.e))])},void 0===ht)var ht=W.jsbn.BigInteger;var mt=W.asn1,gt=W.pki=W.pki||{},vt=(gt.pbe=W.pbe=W.pbe||{},gt.oids),yt={name:"EncryptedPrivateKeyInfo",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},bt={name:"PBES2Algorithms",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},xt={name:"pkcs-12PbeParams",tagClass:mt.Class.UNIVERSAL,type:mt.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:mt.Class.UNIVERSAL,type:mt.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:mt.Class.UNIVERSAL,type:mt.Type.INTEGER,constructed:!1,capture:"iterations"}]};function kt(e,t){return e.start().update(t).digest().getBytes()}function wt(e){var t;if(e){if(!(t=gt.oids[mt.derToOid(e)])){var n=new Error("Unsupported PRF OID.");throw n.oid=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}}else t="hmacWithSHA1";return It(t)}function It(e){var t=W.md;switch(e){case"hmacWithSHA224":t=W.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}gt.encryptPrivateKeyInfo=function(e,t,n){(n=n||{}).saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var r,a,o,i=W.random.getBytesSync(n.saltSize),s=n.count,u=mt.integerToDer(s);if(0===n.algorithm.indexOf("aes")||"des"===n.algorithm){var c,l,d;switch(n.algorithm){case"aes128":r=16,c=16,l=vt["aes128-CBC"],d=W.aes.createEncryptionCipher;break;case"aes192":r=24,c=16,l=vt["aes192-CBC"],d=W.aes.createEncryptionCipher;break;case"aes256":r=32,c=16,l=vt["aes256-CBC"],d=W.aes.createEncryptionCipher;break;case"des":r=8,c=8,l=vt.desCBC,d=W.des.createEncryptionCipher;break;default:throw(v=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=n.algorithm,v}var p="hmacWith"+n.prfAlgorithm.toUpperCase(),f=It(p),h=W.pkcs5.pbkdf2(t,i,s,r,f),m=W.random.getBytesSync(c);(y=d(h)).start(m),y.update(mt.toDer(e)),y.finish(),o=y.output.getBytes();var g=function(e,t,n,r){var a=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,e),mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,t.getBytes())]);return"hmacWithSHA1"!==r&&a.value.push(mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,W.util.hexToBytes(n.toString(16))),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(gt.oids[r]).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.NULL,!1,"")])),a}(i,u,r,p);a=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(vt.pkcs5PBES2).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(vt.pkcs5PBKDF2).getBytes()),g]),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(l).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,m)])])])}else{var v;if("3des"!==n.algorithm)throw(v=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=n.algorithm,v;r=24;var y,b=new W.util.ByteBuffer(i);h=gt.pbe.generatePkcs12Key(t,b,1,s,r),m=gt.pbe.generatePkcs12Key(t,b,2,s,r),(y=W.des.createEncryptionCipher(h)).start(m),y.update(mt.toDer(e)),y.finish(),o=y.output.getBytes(),a=mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OID,!1,mt.oidToDer(vt["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,i),mt.create(mt.Class.UNIVERSAL,mt.Type.INTEGER,!1,u.getBytes())])])}return mt.create(mt.Class.UNIVERSAL,mt.Type.SEQUENCE,!0,[a,mt.create(mt.Class.UNIVERSAL,mt.Type.OCTETSTRING,!1,o)])},gt.decryptPrivateKeyInfo=function(e,t){var n=null,r={},a=[];if(!mt.validate(e,yt,r,a)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=a,o}var i=mt.derToOid(r.encryptionOid),s=gt.pbe.getCipher(i,r.encryptionParams,t),u=W.util.createBuffer(r.encryptedData);return s.update(u),s.finish()&&(n=mt.fromDer(s.output)),n},gt.encryptedPrivateKeyToPem=function(e,t){var n={type:"ENCRYPTED PRIVATE KEY",body:mt.toDer(e).getBytes()};return W.pem.encode(n,{maxline:t})},gt.encryptedPrivateKeyFromPem=function(e){var t=W.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return mt.fromDer(t.body)},gt.encryptRsaPrivateKey=function(e,t,n){if(!(n=n||{}).legacy){var r=gt.wrapRsaPrivateKey(gt.privateKeyToAsn1(e));return r=gt.encryptPrivateKeyInfo(r,t,n),gt.encryptedPrivateKeyToPem(r)}var a,o,i,s;switch(n.algorithm){case"aes128":a="AES-128-CBC",i=16,o=W.random.getBytesSync(16),s=W.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",i=24,o=W.random.getBytesSync(16),s=W.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",i=32,o=W.random.getBytesSync(16),s=W.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",i=24,o=W.random.getBytesSync(8),s=W.des.createEncryptionCipher;break;case"des":a="DES-CBC",i=8,o=W.random.getBytesSync(8),s=W.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw u.algorithm=n.algorithm,u}var c=s(W.pbe.opensslDeriveBytes(t,o.substr(0,8),i));c.start(o),c.update(mt.toDer(gt.privateKeyToAsn1(e))),c.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:W.util.bytesToHex(o).toUpperCase()},body:c.output.getBytes()};return W.pem.encode(l)},gt.decryptRsaPrivateKey=function(e,t){var n=null,r=W.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==r.type&&"PRIVATE KEY"!==r.type&&"RSA PRIVATE KEY"!==r.type)throw(i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=i,i;if(r.procType&&"ENCRYPTED"===r.procType.type){var a,o;switch(r.dekInfo.algorithm){case"DES-CBC":a=8,o=W.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,o=W.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,o=W.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,o=W.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,o=W.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,o=function(e){return W.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":a=8,o=function(e){return W.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":a=16,o=function(e){return W.rc2.createDecryptionCipher(e,128)};break;default:var i;throw(i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+r.dekInfo.algorithm+'".')).algorithm=r.dekInfo.algorithm,i}var s=W.util.hexToBytes(r.dekInfo.parameters),u=o(W.pbe.opensslDeriveBytes(t,s.substr(0,8),a));if(u.start(s),u.update(W.util.createBuffer(r.body)),!u.finish())return n;n=u.output.getBytes()}else n=r.body;return null!==(n="ENCRYPTED PRIVATE KEY"===r.type?gt.decryptPrivateKeyInfo(mt.fromDer(n),t):mt.fromDer(n))&&(n=gt.privateKeyFromAsn1(n)),n},gt.pbe.generatePkcs12Key=function(e,t,n,r,a,o){var i,s;if(null==o){if(!("sha1"in W.md))throw new Error('"sha1" hash algorithm unavailable.');o=W.md.sha1.create()}var u=o.digestLength,c=o.blockLength,l=new W.util.ByteBuffer,d=new W.util.ByteBuffer;if(null!=e){for(s=0;s<e.length;s++)d.putInt16(e.charCodeAt(s));d.putInt16(0)}var p=d.length(),f=t.length(),h=new W.util.ByteBuffer;h.fillWithByte(n,c);var m=c*Math.ceil(f/c),g=new W.util.ByteBuffer;for(s=0;s<m;s++)g.putByte(t.at(s%f));var v=c*Math.ceil(p/c),y=new W.util.ByteBuffer;for(s=0;s<v;s++)y.putByte(d.at(s%p));var b=g;b.putBuffer(y);for(var x=Math.ceil(a/u),k=1;k<=x;k++){var w=new W.util.ByteBuffer;w.putBytes(h.bytes()),w.putBytes(b.bytes());for(var I=0;I<r;I++)o.start(),o.update(w.getBytes()),w=o.digest();var C=new W.util.ByteBuffer;for(s=0;s<c;s++)C.putByte(w.at(s%u));var S=Math.ceil(f/c)+Math.ceil(p/c),E=new W.util.ByteBuffer;for(i=0;i<S;i++){var T=new W.util.ByteBuffer(b.getBytes(c)),N=511;for(s=C.length()-1;s>=0;s--)N>>=8,N+=C.at(s)+T.at(s),T.setAt(s,255&N);E.putBuffer(T)}b=E,l.putBuffer(w)}return l.truncate(l.length()-a),l},gt.pbe.getCipher=function(e,t,n){switch(e){case gt.oids.pkcs5PBES2:return gt.pbe.getCipherForPBES2(e,t,n);case gt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case gt.oids["pbewithSHAAnd40BitRC2-CBC"]:return gt.pbe.getCipherForPKCS12PBE(e,t,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=e,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}},gt.pbe.getCipherForPBES2=function(e,t,n){var r,a={},o=[];if(!mt.validate(t,bt,a,o))throw(r=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=o,r;if((e=mt.derToOid(a.kdfOid))!==gt.oids.pkcs5PBKDF2)throw(r=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,r.supportedOids=["pkcs5PBKDF2"],r;if((e=mt.derToOid(a.encOid))!==gt.oids["aes128-CBC"]&&e!==gt.oids["aes192-CBC"]&&e!==gt.oids["aes256-CBC"]&&e!==gt.oids["des-EDE3-CBC"]&&e!==gt.oids.desCBC)throw(r=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,r.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],r;var i,s,u=a.kdfSalt,c=W.util.createBuffer(a.kdfIterationCount);switch(c=c.getInt(c.length()<<3),gt.oids[e]){case"aes128-CBC":i=16,s=W.aes.createDecryptionCipher;break;case"aes192-CBC":i=24,s=W.aes.createDecryptionCipher;break;case"aes256-CBC":i=32,s=W.aes.createDecryptionCipher;break;case"des-EDE3-CBC":i=24,s=W.des.createDecryptionCipher;break;case"desCBC":i=8,s=W.des.createDecryptionCipher}var l=wt(a.prfOid),d=W.pkcs5.pbkdf2(n,u,c,i,l),p=a.encIv,f=s(d);return f.start(p),f},gt.pbe.getCipherForPKCS12PBE=function(e,t,n){var r={},a=[];if(!mt.validate(t,xt,r,a))throw(l=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,l;var o,i,s,u=W.util.createBuffer(r.salt),c=W.util.createBuffer(r.iterations);switch(c=c.getInt(c.length()<<3),e){case gt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:o=24,i=8,s=W.des.startDecrypting;break;case gt.oids["pbewithSHAAnd40BitRC2-CBC"]:o=5,i=8,s=function(e,t){var n=W.rc2.createDecryptionCipher(e,40);return n.start(t,null),n};break;default:var l;throw(l=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,l}var d=wt(r.prfOid),p=gt.pbe.generatePkcs12Key(n,u,1,c,o,d);return d.start(),s(p,gt.pbe.generatePkcs12Key(n,u,2,c,i,d))},gt.pbe.opensslDeriveBytes=function(e,t,n,r){if(null==r){if(!("md5"in W.md))throw new Error('"md5" hash algorithm unavailable.');r=W.md.md5.create()}null===t&&(t="");for(var a=[kt(r,e+t)],o=16,i=1;o<n;++i,o+=16)a.push(kt(r,a[i-1]+e+t));return a.join("").substr(0,n)},k((function(e){var t=W.asn1,n=e.exports=W.pkcs7asn1=W.pkcs7asn1||{};W.pkcs7=W.pkcs7||{},W.pkcs7.asn1=n;var r={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};n.contentInfoValidator=r;var a={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};n.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},n.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var o={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};n.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},r,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[o]}]},n.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}})),k((function(e){W.mgf=W.mgf||{},(e.exports=W.mgf.mgf1=W.mgf1=W.mgf1||{}).create=function(e){return{generate:function(t,n){for(var r=new W.util.ByteBuffer,a=Math.ceil(n/e.digestLength),o=0;o<a;o++){var i=new W.util.ByteBuffer;i.putInt32(o),e.start(),e.update(t+i.getBytes()),r.putBuffer(e.digest())}return r.truncate(r.length()-n),r.getBytes()}}}})),W.mgf=W.mgf||{},W.mgf.mgf1=W.mgf1,k((function(e){(e.exports=W.pss=W.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,n=e.md,r=e.mgf,a=n.digestLength,o=e.salt||null;if("string"==typeof o&&(o=W.util.createBuffer(o)),"saltLength"in e)t=e.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");t=o.length()}if(null!==o&&o.length()!==t)throw new Error("Given salt length does not match length of given salt.");var i=e.prng||W.random;return{encode:function(e,s){var u,c,l=s-1,d=Math.ceil(l/8),p=e.digest().getBytes();if(d<a+t+2)throw new Error("Message is too long to encrypt.");c=null===o?i.getBytesSync(t):o.bytes();var f=new W.util.ByteBuffer;f.fillWithByte(0,8),f.putBytes(p),f.putBytes(c),n.start(),n.update(f.getBytes());var h=n.digest().getBytes(),m=new W.util.ByteBuffer;m.fillWithByte(0,d-t-a-2),m.putByte(1),m.putBytes(c);var g=m.getBytes(),v=d-a-1,y=r.generate(h,v),b="";for(u=0;u<v;u++)b+=String.fromCharCode(g.charCodeAt(u)^y.charCodeAt(u));var x=65280>>8*d-l&255;return(b=String.fromCharCode(b.charCodeAt(0)&~x)+b.substr(1))+h+String.fromCharCode(188)},verify:function(e,o,i){var s,u=i-1,c=Math.ceil(u/8);if(o=o.substr(-c),c<a+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(c-1))throw new Error("Encoded message does not end in 0xBC.");var l=c-a-1,d=o.substr(0,l),p=o.substr(l,a),f=65280>>8*c-u&255;if(0!=(d.charCodeAt(0)&f))throw new Error("Bits beyond keysize not zero as expected.");var h=r.generate(p,l),m="";for(s=0;s<l;s++)m+=String.fromCharCode(d.charCodeAt(s)^h.charCodeAt(s));m=String.fromCharCode(m.charCodeAt(0)&~f)+m.substr(1);var g=c-a-t-2;for(s=0;s<g;s++)if(0!==m.charCodeAt(s))throw new Error("Leftmost octets not zero as expected");if(1!==m.charCodeAt(g))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var v=m.substr(-t),y=new W.util.ByteBuffer;return y.fillWithByte(0,8),y.putBytes(e),y.putBytes(v),n.start(),n.update(y.getBytes()),p===n.digest().getBytes()}}}})),k((function(e){var t=W.asn1,n=e.exports=W.pki=W.pki||{},r=n.oids,a={};a.CN=r.commonName,a.commonName="CN",a.C=r.countryName,a.countryName="C",a.L=r.localityName,a.localityName="L",a.ST=r.stateOrProvinceName,a.stateOrProvinceName="ST",a.O=r.organizationName,a.organizationName="O",a.OU=r.organizationalUnitName,a.organizationalUnitName="OU",a.E=r.emailAddress,a.emailAddress="E";var o=W.pki.rsa.publicKeyValidator,i={name:"Certificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},o,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},s={name:"rsapss",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},u={name:"CertificationRequestInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},o,{name:"CertificationRequestInfo.attributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0}]}]}]},c={name:"CertificationRequest",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[u,{name:"CertificationRequest.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function l(e,t){"string"==typeof t&&(t={shortName:t});for(var n,r=null,a=0;null===r&&a<e.attributes.length;++a)n=e.attributes[a],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}n.RDNAttributesAsArray=function(e,n){for(var o,i,s,u=[],c=0;c<e.value.length;++c){o=e.value[c];for(var l=0;l<o.value.length;++l)s={},i=o.value[l],s.type=t.derToOid(i.value[0].value),s.value=i.value[1].value,s.valueTagClass=i.value[1].type,s.type in r&&(s.name=r[s.type],s.name in a&&(s.shortName=a[s.name])),n&&(n.update(s.type),n.update(s.value)),u.push(s)}return u},n.CRIAttributesAsArray=function(e){for(var o=[],i=0;i<e.length;++i)for(var s=e[i],u=t.derToOid(s.value[0].value),c=s.value[1].value,l=0;l<c.length;++l){var d={};if(d.type=u,d.value=c[l].value,d.valueTagClass=c[l].type,d.type in r&&(d.name=r[d.type],d.name in a&&(d.shortName=a[d.name])),d.type===r.extensionRequest){d.extensions=[];for(var p=0;p<d.value.length;++p)d.extensions.push(n.certificateExtensionFromAsn1(d.value[p]))}o.push(d)}return o};var d=function(e,n,a){var o={};if(e!==r["RSASSA-PSS"])return o;a&&(o={hash:{algorithmOid:r.sha1},mgf:{algorithmOid:r.mgf1,hash:{algorithmOid:r.sha1}},saltLength:20});var i={},u=[];if(!t.validate(n,s,i,u)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=u,c}return void 0!==i.hashOid&&(o.hash=o.hash||{},o.hash.algorithmOid=t.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(o.mgf=o.mgf||{},o.mgf.algorithmOid=t.derToOid(i.maskGenOid),o.mgf.hash=o.mgf.hash||{},o.mgf.hash.algorithmOid=t.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(o.saltLength=i.saltLength.charCodeAt(0)),o};function p(e){for(var n,r,a=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),o=e.attributes,i=0;i<o.length;++i){var s=(n=o[i]).value,u=t.Type.PRINTABLESTRING;"valueTagClass"in n&&(u=n.valueTagClass)===t.Type.UTF8&&(s=W.util.encodeUtf8(s)),r=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.type).getBytes()),t.create(t.Class.UNIVERSAL,u,!1,s)])]),a.value.push(r)}return a}function f(e){for(var o,i=0;i<e.length;++i){if(void 0===(o=e[i]).name&&(o.type&&o.type in n.oids?o.name=n.oids[o.type]:o.shortName&&o.shortName in a&&(o.name=n.oids[a[o.shortName]])),void 0===o.type){if(!o.name||!(o.name in n.oids))throw(u=new Error("Attribute type not specified.")).attribute=o,u;o.type=n.oids[o.name]}if(void 0===o.shortName&&o.name&&o.name in a&&(o.shortName=a[o.name]),o.type===r.extensionRequest&&(o.valueConstructed=!0,o.valueTagClass=t.Type.SEQUENCE,!o.value&&o.extensions)){o.value=[];for(var s=0;s<o.extensions.length;++s)o.value.push(n.certificateExtensionToAsn1(h(o.extensions[s])))}var u;if(void 0===o.value)throw(u=new Error("Attribute value not specified.")).attribute=o,u}}function h(e,a){if(a=a||{},void 0===e.name&&e.id&&e.id in n.oids&&(e.name=n.oids[e.id]),void 0===e.id){if(!e.name||!(e.name in n.oids))throw(x=new Error("Extension ID not specified.")).extension=e,x;e.id=n.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var o=0,i=0,s=0;e.digitalSignature&&(i|=128,o=7),e.nonRepudiation&&(i|=64,o=6),e.keyEncipherment&&(i|=32,o=5),e.dataEncipherment&&(i|=16,o=4),e.keyAgreement&&(i|=8,o=3),e.keyCertSign&&(i|=4,o=2),e.cRLSign&&(i|=2,o=1),e.encipherOnly&&(i|=1,o=0),e.decipherOnly&&(s|=128,o=7);var u=String.fromCharCode(o);0!==s?u+=String.fromCharCode(i)+String.fromCharCode(s):0!==i&&(u+=String.fromCharCode(i)),e.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,u)}else if("basicConstraints"===e.name)e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var c=e.value.value;for(var l in e)!0===e[l]&&(l in r?c.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r[l]).getBytes())):-1!==l.indexOf(".")&&c.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(l).getBytes())))}else if("nsCertType"===e.name)o=0,i=0,e.client&&(i|=128,o=7),e.server&&(i|=64,o=6),e.email&&(i|=32,o=5),e.objsign&&(i|=16,o=4),e.reserved&&(i|=8,o=3),e.sslCA&&(i|=4,o=2),e.emailCA&&(i|=2,o=1),e.objCA&&(i|=1,o=0),u=String.fromCharCode(o),0!==i&&(u+=String.fromCharCode(i)),e.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,u);else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var d=0;d<e.altNames.length;++d){if(u=(v=e.altNames[d]).value,7===v.type&&v.ip){if(null===(u=W.util.bytesFromIP(v.ip)))throw(x=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,x}else 8===v.type&&(u=v.oid?t.oidToDer(t.oidToDer(v.oid)):t.oidToDer(u));e.value.value.push(t.create(t.Class.CONTEXT_SPECIFIC,v.type,!1,u))}}else if("nsComment"===e.name&&a.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=t.create(t.Class.UNIVERSAL,t.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&a.cert){var f=a.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,f.getBytes())}else if("authorityKeyIdentifier"===e.name&&a.cert){if(e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),c=e.value.value,e.keyIdentifier){var h=!0===e.keyIdentifier?a.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;c.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!1,h))}if(e.authorityCertIssuer){var m=[t.create(t.Class.CONTEXT_SPECIFIC,4,!0,[p(!0===e.authorityCertIssuer?a.cert.issuer:e.authorityCertIssuer)])];c.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,m))}if(e.serialNumber){var g=W.util.hexToBytes(!0===e.serialNumber?a.cert.serialNumber:e.serialNumber);c.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if("cRLDistributionPoints"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),c=e.value.value;var v,y=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),b=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(d=0;d<e.altNames.length;++d){if(u=(v=e.altNames[d]).value,7===v.type&&v.ip){if(null===(u=W.util.bytesFromIP(v.ip)))throw(x=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,x}else 8===v.type&&(u=v.oid?t.oidToDer(t.oidToDer(v.oid)):t.oidToDer(u));b.value.push(t.create(t.Class.CONTEXT_SPECIFIC,v.type,!1,u))}y.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[b])),c.push(y)}var x;if(void 0===e.value)throw(x=new Error("Extension value not specified.")).extension=e,x;return e}function m(e,n){switch(e){case r["RSASSA-PSS"]:var a=[];return void 0!==n.hash.algorithmOid&&a.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])),void 0!==n.mgf.algorithmOid&&a.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.mgf.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.mgf.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])])),void 0!==n.saltLength&&a.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(n.saltLength).getBytes())])),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,a);default:return t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")}}function g(e){var n=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return n;for(var r=e.attributes,a=0;a<r.length;++a){var o=r[a],i=o.value,s=t.Type.UTF8;"valueTagClass"in o&&(s=o.valueTagClass),s===t.Type.UTF8&&(i=W.util.encodeUtf8(i));var u=!1;"valueConstructed"in o&&(u=o.valueConstructed);var c=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(o.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,s,u,i)])]);n.value.push(c)}return n}n.certificateFromPem=function(e,r,a){var o=W.pem.decode(e)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=o.type,i}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=t.fromDer(o.body,a);return n.certificateFromAsn1(s,r)},n.certificateToPem=function(e,r){var a={type:"CERTIFICATE",body:t.toDer(n.certificateToAsn1(e)).getBytes()};return W.pem.encode(a,{maxline:r})},n.publicKeyFromPem=function(e){var r=W.pem.decode(e)[0];if("PUBLIC KEY"!==r.type&&"RSA PUBLIC KEY"!==r.type){var a=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw a.headerType=r.type,a}if(r.procType&&"ENCRYPTED"===r.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=t.fromDer(r.body);return n.publicKeyFromAsn1(o)},n.publicKeyToPem=function(e,r){var a={type:"PUBLIC KEY",body:t.toDer(n.publicKeyToAsn1(e)).getBytes()};return W.pem.encode(a,{maxline:r})},n.publicKeyToRSAPublicKeyPem=function(e,r){var a={type:"RSA PUBLIC KEY",body:t.toDer(n.publicKeyToRSAPublicKey(e)).getBytes()};return W.pem.encode(a,{maxline:r})},n.getPublicKeyFingerprint=function(e,r){var a,o=(r=r||{}).md||W.md.sha1.create();switch(r.type||"RSAPublicKey"){case"RSAPublicKey":a=t.toDer(n.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":a=t.toDer(n.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+r.type+'".')}o.start(),o.update(a);var i=o.digest();if("hex"===r.encoding){var s=i.toHex();return r.delimiter?s.match(/.{2}/g).join(r.delimiter):s}if("binary"===r.encoding)return i.getBytes();if(r.encoding)throw new Error('Unknown encoding "'+r.encoding+'".');return i},n.certificationRequestFromPem=function(e,r,a){var o=W.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==o.type){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=o.type,i}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=t.fromDer(o.body,a);return n.certificationRequestFromAsn1(s,r)},n.certificationRequestToPem=function(e,r){var a={type:"CERTIFICATE REQUEST",body:t.toDer(n.certificationRequestToAsn1(e)).getBytes()};return W.pem.encode(a,{maxline:r})},n.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return l(e.issuer,t)},e.issuer.addField=function(t){f([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return l(e.subject,t)},e.subject.addField=function(t){f([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,n){f(t),e.subject.attributes=t,delete e.subject.uniqueId,n&&(e.subject.uniqueId=n),e.subject.hash=null},e.setIssuer=function(t,n){f(t),e.issuer.attributes=t,delete e.issuer.uniqueId,n&&(e.issuer.uniqueId=n),e.issuer.hash=null},e.setExtensions=function(t){for(var n=0;n<t.length;++n)h(t[n],{cert:e});e.extensions=t},e.getExtension=function(t){"string"==typeof t&&(t={name:t});for(var n,r=null,a=0;null===r&&a<e.extensions.length;++a)n=e.extensions[a],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(a,o){e.md=o||W.md.sha1.create();var i=r[e.md.algorithm+"WithRSAEncryption"];if(!i){var s=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw s.algorithm=e.md.algorithm,s}e.signatureOid=e.siginfo.algorithmOid=i,e.tbsCertificate=n.getTBSCertificate(e);var u=t.toDer(e.tbsCertificate);e.md.update(u.getBytes()),e.signature=a.sign(e.md)},e.verify=function(a){var o=!1;if(!e.issued(a)){var i=a.issuer,s=e.subject;throw(h=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.")).expectedIssuer=i.attributes,h.actualIssuer=s.attributes,h}var u=a.md;if(null===u){if(a.signatureOid in r)switch(r[a.signatureOid]){case"sha1WithRSAEncryption":u=W.md.sha1.create();break;case"md5WithRSAEncryption":u=W.md.md5.create();break;case"sha256WithRSAEncryption":u=W.md.sha256.create();break;case"sha384WithRSAEncryption":u=W.md.sha384.create();break;case"sha512WithRSAEncryption":u=W.md.sha512.create();break;case"RSASSA-PSS":u=W.md.sha256.create()}if(null===u)throw(h=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=a.signatureOid,h;var c=a.tbsCertificate||n.getTBSCertificate(a),l=t.toDer(c);u.update(l.getBytes())}if(null!==u){var d;switch(a.signatureOid){case r.sha1WithRSAEncryption:d=void 0;break;case r["RSASSA-PSS"]:var p,f,h;if(void 0===(p=r[a.signatureParameters.mgf.hash.algorithmOid])||void 0===W.md[p])throw(h=new Error("Unsupported MGF hash function.")).oid=a.signatureParameters.mgf.hash.algorithmOid,h.name=p,h;if(void 0===(f=r[a.signatureParameters.mgf.algorithmOid])||void 0===W.mgf[f])throw(h=new Error("Unsupported MGF function.")).oid=a.signatureParameters.mgf.algorithmOid,h.name=f,h;if(f=W.mgf[f].create(W.md[p].create()),void 0===(p=r[a.signatureParameters.hash.algorithmOid])||void 0===W.md[p])throw{message:"Unsupported RSASSA-PSS hash function.",oid:a.signatureParameters.hash.algorithmOid,name:p};d=W.pss.create(W.md[p].create(),f,a.signatureParameters.saltLength)}o=e.publicKey.verify(u.digest().getBytes(),a.signature,d)}return o},e.isIssuer=function(t){var n=!1,r=e.issuer,a=t.subject;if(r.hash&&a.hash)n=r.hash===a.hash;else if(r.attributes.length===a.attributes.length){var o,i;n=!0;for(var s=0;n&&s<r.attributes.length;++s)o=r.attributes[s],i=a.attributes[s],o.type===i.type&&o.value===i.value||(n=!1)}return n},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return n.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=r.subjectKeyIdentifier,n=0;n<e.extensions.length;++n){var a=e.extensions[n];if(a.id===t){var o=e.generateSubjectKeyIdentifier().getBytes();return W.util.hexToBytes(a.subjectKeyIdentifier)===o}}return!1},e},n.certificateFromAsn1=function(e,a){var o={},s=[];if(!t.validate(e,i,o,s))throw(h=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.")).errors=s,h;if(t.derToOid(o.publicKeyOid)!==n.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=n.createCertificate();u.version=o.certVersion?o.certVersion.charCodeAt(0):0;var c=W.util.createBuffer(o.certSerialNumber);u.serialNumber=c.toHex(),u.signatureOid=W.asn1.derToOid(o.certSignatureOid),u.signatureParameters=d(u.signatureOid,o.certSignatureParams,!0),u.siginfo.algorithmOid=W.asn1.derToOid(o.certinfoSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,o.certinfoSignatureParams,!1),u.signature=o.certSignature;var p=[];if(void 0!==o.certValidity1UTCTime&&p.push(t.utcTimeToDate(o.certValidity1UTCTime)),void 0!==o.certValidity2GeneralizedTime&&p.push(t.generalizedTimeToDate(o.certValidity2GeneralizedTime)),void 0!==o.certValidity3UTCTime&&p.push(t.utcTimeToDate(o.certValidity3UTCTime)),void 0!==o.certValidity4GeneralizedTime&&p.push(t.generalizedTimeToDate(o.certValidity4GeneralizedTime)),p.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(p.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=p[0],u.validity.notAfter=p[1],u.tbsCertificate=o.tbsCertificate,a){var h;if(u.md=null,u.signatureOid in r)switch(r[u.signatureOid]){case"sha1WithRSAEncryption":u.md=W.md.sha1.create();break;case"md5WithRSAEncryption":u.md=W.md.md5.create();break;case"sha256WithRSAEncryption":u.md=W.md.sha256.create();break;case"sha384WithRSAEncryption":u.md=W.md.sha384.create();break;case"sha512WithRSAEncryption":u.md=W.md.sha512.create();break;case"RSASSA-PSS":u.md=W.md.sha256.create()}if(null===u.md)throw(h=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=u.signatureOid,h;var m=t.toDer(u.tbsCertificate);u.md.update(m.getBytes())}var g=W.md.sha1.create();u.issuer.getField=function(e){return l(u.issuer,e)},u.issuer.addField=function(e){f([e]),u.issuer.attributes.push(e)},u.issuer.attributes=n.RDNAttributesAsArray(o.certIssuer,g),o.certIssuerUniqueId&&(u.issuer.uniqueId=o.certIssuerUniqueId),u.issuer.hash=g.digest().toHex();var v=W.md.sha1.create();return u.subject.getField=function(e){return l(u.subject,e)},u.subject.addField=function(e){f([e]),u.subject.attributes.push(e)},u.subject.attributes=n.RDNAttributesAsArray(o.certSubject,v),o.certSubjectUniqueId&&(u.subject.uniqueId=o.certSubjectUniqueId),u.subject.hash=v.digest().toHex(),o.certExtensions?u.extensions=n.certificateExtensionsFromAsn1(o.certExtensions):u.extensions=[],u.publicKey=n.publicKeyFromAsn1(o.subjectPublicKeyInfo),u},n.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var a=e.value[r],o=0;o<a.value.length;++o)t.push(n.certificateExtensionFromAsn1(a.value[o]));return t},n.certificateExtensionFromAsn1=function(e){var n={};if(n.id=t.derToOid(e.value[0].value),n.critical=!1,e.value[1].type===t.Type.BOOLEAN?(n.critical=0!==e.value[1].value.charCodeAt(0),n.value=e.value[2].value):n.value=e.value[1].value,n.id in r)if(n.name=r[n.id],"keyUsage"===n.name){var a=0,o=0;(s=t.fromDer(n.value)).value.length>1&&(a=s.value.charCodeAt(1),o=s.value.length>2?s.value.charCodeAt(2):0),n.digitalSignature=128==(128&a),n.nonRepudiation=64==(64&a),n.keyEncipherment=32==(32&a),n.dataEncipherment=16==(16&a),n.keyAgreement=8==(8&a),n.keyCertSign=4==(4&a),n.cRLSign=2==(2&a),n.encipherOnly=1==(1&a),n.decipherOnly=128==(128&o)}else if("basicConstraints"===n.name){(s=t.fromDer(n.value)).value.length>0&&s.value[0].type===t.Type.BOOLEAN?n.cA=0!==s.value[0].value.charCodeAt(0):n.cA=!1;var i=null;s.value.length>0&&s.value[0].type===t.Type.INTEGER?i=s.value[0].value:s.value.length>1&&(i=s.value[1].value),null!==i&&(n.pathLenConstraint=t.derToInteger(i))}else if("extKeyUsage"===n.name)for(var s=t.fromDer(n.value),u=0;u<s.value.length;++u){var c=t.derToOid(s.value[u].value);c in r?n[r[c]]=!0:n[c]=!0}else if("nsCertType"===n.name)a=0,(s=t.fromDer(n.value)).value.length>1&&(a=s.value.charCodeAt(1)),n.client=128==(128&a),n.server=64==(64&a),n.email=32==(32&a),n.objsign=16==(16&a),n.reserved=8==(8&a),n.sslCA=4==(4&a),n.emailCA=2==(2&a),n.objCA=1==(1&a);else if("subjectAltName"===n.name||"issuerAltName"===n.name){var l;n.altNames=[],s=t.fromDer(n.value);for(var d=0;d<s.value.length;++d){var p={type:(l=s.value[d]).type,value:l.value};switch(n.altNames.push(p),l.type){case 1:case 2:case 6:break;case 7:p.ip=W.util.bytesToIP(l.value);break;case 8:p.oid=t.derToOid(l.value)}}}else"subjectKeyIdentifier"===n.name&&(s=t.fromDer(n.value),n.subjectKeyIdentifier=W.util.bytesToHex(s.value));return n},n.certificationRequestFromAsn1=function(e,a){var o={},i=[];if(!t.validate(e,c,o,i))throw(u=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.")).errors=i,u;if(t.derToOid(o.publicKeyOid)!==n.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=n.createCertificationRequest();if(s.version=o.csrVersion?o.csrVersion.charCodeAt(0):0,s.signatureOid=W.asn1.derToOid(o.csrSignatureOid),s.signatureParameters=d(s.signatureOid,o.csrSignatureParams,!0),s.siginfo.algorithmOid=W.asn1.derToOid(o.csrSignatureOid),s.siginfo.parameters=d(s.siginfo.algorithmOid,o.csrSignatureParams,!1),s.signature=o.csrSignature,s.certificationRequestInfo=o.certificationRequestInfo,a){var u;if(s.md=null,s.signatureOid in r)switch(r[s.signatureOid]){case"sha1WithRSAEncryption":s.md=W.md.sha1.create();break;case"md5WithRSAEncryption":s.md=W.md.md5.create();break;case"sha256WithRSAEncryption":s.md=W.md.sha256.create();break;case"sha384WithRSAEncryption":s.md=W.md.sha384.create();break;case"sha512WithRSAEncryption":s.md=W.md.sha512.create();break;case"RSASSA-PSS":s.md=W.md.sha256.create()}if(null===s.md)throw(u=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=s.signatureOid,u;var p=t.toDer(s.certificationRequestInfo);s.md.update(p.getBytes())}var h=W.md.sha1.create();return s.subject.getField=function(e){return l(s.subject,e)},s.subject.addField=function(e){f([e]),s.subject.attributes.push(e)},s.subject.attributes=n.RDNAttributesAsArray(o.certificationRequestInfoSubject,h),s.subject.hash=h.digest().toHex(),s.publicKey=n.publicKeyFromAsn1(o.subjectPublicKeyInfo),s.getAttribute=function(e){return l(s,e)},s.addAttribute=function(e){f([e]),s.attributes.push(e)},s.attributes=n.CRIAttributesAsArray(o.certificationRequestInfoAttributes||[]),s},n.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return l(e.subject,t)},e.subject.addField=function(t){f([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return l(e,t)},e.addAttribute=function(t){f([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){f(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){f(t),e.attributes=t},e.sign=function(a,o){e.md=o||W.md.sha1.create();var i=r[e.md.algorithm+"WithRSAEncryption"];if(!i){var s=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw s.algorithm=e.md.algorithm,s}e.signatureOid=e.siginfo.algorithmOid=i,e.certificationRequestInfo=n.getCertificationRequestInfo(e);var u=t.toDer(e.certificationRequestInfo);e.md.update(u.getBytes()),e.signature=a.sign(e.md)},e.verify=function(){var a=!1,o=e.md;if(null===o){if(e.signatureOid in r)switch(r[e.signatureOid]){case"sha1WithRSAEncryption":o=W.md.sha1.create();break;case"md5WithRSAEncryption":o=W.md.md5.create();break;case"sha256WithRSAEncryption":o=W.md.sha256.create();break;case"sha384WithRSAEncryption":o=W.md.sha384.create();break;case"sha512WithRSAEncryption":o=W.md.sha512.create();break;case"RSASSA-PSS":o=W.md.sha256.create()}if(null===o)throw(d=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=e.signatureOid,d;var i=e.certificationRequestInfo||n.getCertificationRequestInfo(e),s=t.toDer(i);o.update(s.getBytes())}if(null!==o){var u;switch(e.signatureOid){case r.sha1WithRSAEncryption:break;case r["RSASSA-PSS"]:var c,l,d;if(void 0===(c=r[e.signatureParameters.mgf.hash.algorithmOid])||void 0===W.md[c])throw(d=new Error("Unsupported MGF hash function.")).oid=e.signatureParameters.mgf.hash.algorithmOid,d.name=c,d;if(void 0===(l=r[e.signatureParameters.mgf.algorithmOid])||void 0===W.mgf[l])throw(d=new Error("Unsupported MGF function.")).oid=e.signatureParameters.mgf.algorithmOid,d.name=l,d;if(l=W.mgf[l].create(W.md[c].create()),void 0===(c=r[e.signatureParameters.hash.algorithmOid])||void 0===W.md[c])throw(d=new Error("Unsupported RSASSA-PSS hash function.")).oid=e.signatureParameters.hash.algorithmOid,d.name=c,d;u=W.pss.create(W.md[c].create(),l,e.signatureParameters.saltLength)}a=e.publicKey.verify(o.digest().getBytes(),e.signature,u)}return a},e};var v=new Date("1950-01-01T00:00:00Z"),y=new Date("2050-01-01T00:00:00Z");function b(e){return e>=v&&e<y?t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(e)):t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(e))}n.getTBSCertificate=function(e){var r=b(e.validity.notBefore),a=b(e.validity.notAfter),o=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,W.util.hexToBytes(e.serialNumber)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.siginfo.algorithmOid).getBytes()),m(e.siginfo.algorithmOid,e.siginfo.parameters)]),p(e.issuer),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r,a]),p(e.subject),n.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&o.value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&o.value.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&o.value.push(n.certificateExtensionsToAsn1(e.extensions)),o},n.getCertificationRequestInfo=function(e){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),p(e.subject),n.publicKeyToAsn1(e.publicKey),g(e)])},n.distinguishedNameToAsn1=function(e){return p(e)},n.certificateToAsn1=function(e){var r=e.tbsCertificate||n.getTBSCertificate(e);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureOid).getBytes()),m(e.signatureOid,e.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},n.certificateExtensionsToAsn1=function(e){var r=t.create(t.Class.CONTEXT_SPECIFIC,3,!0,[]),a=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);r.value.push(a);for(var o=0;o<e.length;++o)a.value.push(n.certificateExtensionToAsn1(e[o]));return r},n.certificateExtensionToAsn1=function(e){var n=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);n.value.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.id).getBytes())),e.critical&&n.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!=typeof e.value&&(r=t.toDer(r).getBytes()),n.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r)),n},n.certificationRequestToAsn1=function(e){var r=e.certificationRequestInfo||n.getCertificationRequestInfo(e);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureOid).getBytes()),m(e.signatureOid,e.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},n.createCaStore=function(e){var r={certs:{}};function a(e){return o(e),r.certs[e.hash]||null}function o(e){if(!e.hash){var t=W.md.sha1.create();e.attributes=n.RDNAttributesAsArray(p(e),t),e.hash=t.digest().toHex()}}if(r.getIssuer=function(e){return a(e.issuer)},r.addCertificate=function(e){if("string"==typeof e&&(e=W.pki.certificateFromPem(e)),o(e.subject),!r.hasCertificate(e))if(e.subject.hash in r.certs){var t=r.certs[e.subject.hash];W.util.isArray(t)||(t=[t]),t.push(e),r.certs[e.subject.hash]=t}else r.certs[e.subject.hash]=e},r.hasCertificate=function(e){"string"==typeof e&&(e=W.pki.certificateFromPem(e));var r=a(e.subject);if(!r)return!1;W.util.isArray(r)||(r=[r]);for(var o=t.toDer(n.certificateToAsn1(e)).getBytes(),i=0;i<r.length;++i)if(o===t.toDer(n.certificateToAsn1(r[i])).getBytes())return!0;return!1},r.listAllCertificates=function(){var e=[];for(var t in r.certs)if(r.certs.hasOwnProperty(t)){var n=r.certs[t];if(W.util.isArray(n))for(var a=0;a<n.length;++a)e.push(n[a]);else e.push(n)}return e},r.removeCertificate=function(e){var i;if("string"==typeof e&&(e=W.pki.certificateFromPem(e)),o(e.subject),!r.hasCertificate(e))return null;var s=a(e.subject);if(!W.util.isArray(s))return i=r.certs[e.subject.hash],delete r.certs[e.subject.hash],i;for(var u=t.toDer(n.certificateToAsn1(e)).getBytes(),c=0;c<s.length;++c)u===t.toDer(n.certificateToAsn1(s[c])).getBytes()&&(i=s[c],s.splice(c,1));return 0===s.length&&delete r.certs[e.subject.hash],i},e)for(var i=0;i<e.length;++i){var s=e[i];r.addCertificate(s)}return r},n.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},n.verifyCertificateChain=function(e,t,r){"function"==typeof r&&(r={verify:r}),r=r||{};var a=(t=t.slice(0)).slice(0),o=r.validityCheckDate;void 0===o&&(o=new Date);var i=!0,s=null,u=0;do{var c=t.shift(),l=null,d=!1;if(o&&(o<c.validity.notBefore||o>c.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:n.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:o}),null===s){if(null===(l=t[0]||e.getIssuer(c))&&c.isIssuer(c)&&(d=!0,l=c),l){var p=l;W.util.isArray(p)||(p=[p]);for(var f=!1;!f&&p.length>0;){l=p.shift();try{f=l.verify(c)}catch(e){}}f||(s={message:"Certificate signature is invalid.",error:n.certificateError.bad_certificate})}null!==s||l&&!d||e.hasCertificate(c)||(s={message:"Certificate is not trusted.",error:n.certificateError.unknown_ca})}if(null===s&&l&&!c.isIssuer(l)&&(s={message:"Certificate issuer is invalid.",error:n.certificateError.bad_certificate}),null===s)for(var h={keyUsage:!0,basicConstraints:!0},m=0;null===s&&m<c.extensions.length;++m){var g=c.extensions[m];!g.critical||g.name in h||(s={message:"Certificate has an unsupported critical extension.",error:n.certificateError.unsupported_certificate})}if(null===s&&(!i||0===t.length&&(!l||d))){var v=c.getExtension("basicConstraints"),y=c.getExtension("keyUsage");null!==y&&(y.keyCertSign&&null!==v||(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:n.certificateError.bad_certificate})),null!==s||null===v||v.cA||(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:n.certificateError.bad_certificate}),null===s&&null!==y&&"pathLenConstraint"in v&&u-1>v.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:n.certificateError.bad_certificate})}var b=null===s||s.error,x=r.verify?r.verify(b,u,a):b;if(!0!==x)throw!0===b&&(s={message:"The application rejected the certificate.",error:n.certificateError.bad_certificate}),(x||0===x)&&("object"!=typeof x||W.util.isArray(x)?"string"==typeof x&&(s.error=x):(x.message&&(s.message=x.message),x.error&&(s.error=x.error))),s;s=null,i=!1,++u}while(t.length>0);return!0}})),k((function(e){var t=W.asn1,n=W.pki,r=e.exports=W.pkcs12=W.pkcs12||{},a={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},o={name:"PFX",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},a,{name:"PFX.macData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},i={name:"SafeBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},s={name:"Attribute",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,capture:"values"}]},u={name:"CertBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:t.Class.UNIVERSAL,type:t.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function c(e,t,n,r){for(var a=[],o=0;o<e.length;o++)for(var i=0;i<e[o].safeBags.length;i++){var s=e[o].safeBags[i];void 0!==r&&s.type!==r||(null!==t?void 0!==s.attributes[t]&&s.attributes[t].indexOf(n)>=0&&a.push(s):a.push(s))}return a}function l(e){if(e.composed||e.constructed){for(var t=W.util.createBuffer(),n=0;n<e.value.length;++n)t.putBytes(e.value[n].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function d(e,r){var a={},o=[];if(!t.validate(e,W.pkcs7.asn1.encryptedDataValidator,a,o))throw(i=new Error("Cannot read EncryptedContentInfo.")).errors=o,i;var i,s=t.derToOid(a.contentType);if(s!==n.oids.data)throw(i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=s,i;s=t.derToOid(a.encAlgorithm);var u=n.pbe.getCipher(s,a.encParameter,r),c=l(a.encryptedContentAsn1),d=W.util.createBuffer(c.value);if(u.update(d),!u.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return u.output.getBytes()}function p(e,r,a){if(!r&&0===e.length)return[];if((e=t.fromDer(e,r)).tagClass!==t.Class.UNIVERSAL||e.type!==t.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var o=[],s=0;s<e.value.length;s++){var c=e.value[s],l={},d=[];if(!t.validate(c,i,l,d))throw(v=new Error("Cannot read SafeBag.")).errors=d,v;var p,h,m={type:t.derToOid(l.bagId),attributes:f(l.bagAttributes)};o.push(m);var g=l.bagValue.value[0];switch(m.type){case n.oids.pkcs8ShroudedKeyBag:if(null===(g=n.decryptPrivateKeyInfo(g,a)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case n.oids.keyBag:try{m.key=n.privateKeyFromAsn1(g)}catch(e){m.key=null,m.asn1=g}continue;case n.oids.certBag:p=u,h=function(){if(t.derToOid(l.certId)!==n.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=t.derToOid(l.certId),e}var a=t.fromDer(l.cert,r);try{m.cert=n.certificateFromAsn1(a,!0)}catch(e){m.cert=null,m.asn1=a}};break;default:var v;throw(v=new Error("Unsupported PKCS#12 SafeBag type.")).oid=m.type,v}if(void 0!==p&&!t.validate(g,p,l,d))throw(v=new Error("Cannot read PKCS#12 "+p.name)).errors=d,v;h()}return o}function f(e){var r={};if(void 0!==e)for(var a=0;a<e.length;++a){var o={},i=[];if(!t.validate(e[a],s,o,i)){var u=new Error("Cannot read PKCS#12 BagAttribute.");throw u.errors=i,u}var c=t.derToOid(o.oid);if(void 0!==n.oids[c]){r[n.oids[c]]=[];for(var l=0;l<o.values.length;++l)r[n.oids[c]].push(o.values[l].value)}}return r}r.pkcs12FromAsn1=function(e,i,s){"string"==typeof i?(s=i,i=!0):void 0===i&&(i=!0);var u={};if(!t.validate(e,o,u,[]))throw(f=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=f,f;var f,h={version:u.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,n={};return"localKeyId"in e?t=e.localKeyId:"localKeyIdHex"in e&&(t=W.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!("friendlyName"in e)&&"bagType"in e&&(n[e.bagType]=c(h.safeContents,null,null,e.bagType)),void 0!==t&&(n.localKeyId=c(h.safeContents,"localKeyId",t,e.bagType)),"friendlyName"in e&&(n.friendlyName=c(h.safeContents,"friendlyName",e.friendlyName,e.bagType)),n},getBagsByFriendlyName:function(e,t){return c(h.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return c(h.safeContents,"localKeyId",e,t)}};if(3!==u.version.charCodeAt(0))throw(f=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=u.version.charCodeAt(0),f;if(t.derToOid(u.contentType)!==n.oids.data)throw(f=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=t.derToOid(u.contentType),f;var m=u.content.value[0];if(m.tagClass!==t.Class.UNIVERSAL||m.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(m=l(m),u.mac){var g=null,v=0,y=t.derToOid(u.macAlgorithm);switch(y){case n.oids.sha1:g=W.md.sha1.create(),v=20;break;case n.oids.sha256:g=W.md.sha256.create(),v=32;break;case n.oids.sha384:g=W.md.sha384.create(),v=48;break;case n.oids.sha512:g=W.md.sha512.create(),v=64;break;case n.oids.md5:g=W.md.md5.create(),v=16}if(null===g)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+y);var b=new W.util.ByteBuffer(u.macSalt),x="macIterations"in u?parseInt(W.util.bytesToHex(u.macIterations),16):1,k=r.generateKey(s,b,3,x,v,g),w=W.hmac.create();if(w.start(g,k),w.update(m.value),w.getMac().getBytes()!==u.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(e,r,o,i){if((r=t.fromDer(r,o)).tagClass!==t.Class.UNIVERSAL||r.type!==t.Type.SEQUENCE||!0!==r.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var s=0;s<r.value.length;s++){var u=r.value[s],c={},f=[];if(!t.validate(u,a,c,f))throw(v=new Error("Cannot read ContentInfo.")).errors=f,v;var h={encrypted:!1},m=null,g=c.content.value[0];switch(t.derToOid(c.contentType)){case n.oids.data:if(g.tagClass!==t.Class.UNIVERSAL||g.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");m=l(g).value;break;case n.oids.encryptedData:m=d(g,i),h.encrypted=!0;break;default:var v;throw(v=new Error("Unsupported PKCS#12 contentType.")).contentType=t.derToOid(c.contentType),v}h.safeBags=p(m,o,i),e.safeContents.push(h)}}(h,m.value,i,s),h},r.toPkcs12Asn1=function(e,a,o,i){(i=i||{}).saltSize=i.saltSize||8,i.count=i.count||2048,i.algorithm=i.algorithm||i.encAlgorithm||"aes128","useMac"in i||(i.useMac=!0),"localKeyId"in i||(i.localKeyId=null),"generateLocalKeyId"in i||(i.generateLocalKeyId=!0);var s,u=i.localKeyId;if(null!==u)u=W.util.hexToBytes(u);else if(i.generateLocalKeyId)if(a){var c=W.util.isArray(a)?a[0]:a;"string"==typeof c&&(c=n.certificateFromPem(c)),(E=W.md.sha1.create()).update(t.toDer(n.certificateToAsn1(c)).getBytes()),u=E.digest().getBytes()}else u=W.random.getBytes(20);var l=[];null!==u&&l.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.localKeyId).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,u)])])),"friendlyName"in i&&l.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.friendlyName).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.BMPSTRING,!1,i.friendlyName)])])),l.length>0&&(s=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,l));var d=[],p=[];null!==a&&(p=W.util.isArray(a)?a:[a]);for(var f=[],h=0;h<p.length;++h){"string"==typeof(a=p[h])&&(a=n.certificateFromPem(a));var m=0===h?s:void 0,g=n.certificateToAsn1(a),v=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.certBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.x509Certificate).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(g).getBytes())])])]),m]);f.push(v)}if(f.length>0){var y=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,f),b=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(y).getBytes())])]);d.push(b)}var x=null;if(null!==e){var k=n.wrapRsaPrivateKey(n.privateKeyToAsn1(e));x=null===o?t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.keyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[k]),s]):t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.pkcs8ShroudedKeyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[n.encryptPrivateKeyInfo(k,o,i)]),s]);var w=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[x]),I=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(w).getBytes())])]);d.push(I)}var C,S=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,d);if(i.useMac){var E=W.md.sha1.create(),T=new W.util.ByteBuffer(W.random.getBytes(i.saltSize)),N=i.count,A=(e=r.generateKey(o,T,3,N,20),W.hmac.create());A.start(E,e),A.update(t.toDer(S).getBytes());var _=A.getMac();C=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.sha1).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,_.getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,T.getBytes()),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(N).getBytes())])}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(3).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(S).getBytes())])]),C])},r.generateKey=W.pbe.generatePkcs12Key})),k((function(e){var t=W.asn1,n=e.exports=W.pki=W.pki||{};n.pemToDer=function(e){var t=W.pem.decode(e)[0];if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return W.util.createBuffer(t.body)},n.privateKeyFromPem=function(e){var r=W.pem.decode(e)[0];if("PRIVATE KEY"!==r.type&&"RSA PRIVATE KEY"!==r.type){var a=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw a.headerType=r.type,a}if(r.procType&&"ENCRYPTED"===r.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var o=t.fromDer(r.body);return n.privateKeyFromAsn1(o)},n.privateKeyToPem=function(e,r){var a={type:"RSA PRIVATE KEY",body:t.toDer(n.privateKeyToAsn1(e)).getBytes()};return W.pem.encode(a,{maxline:r})},n.privateKeyInfoToPem=function(e,n){var r={type:"PRIVATE KEY",body:t.toDer(e).getBytes()};return W.pem.encode(r,{maxline:n})}}));var Ct=function(e,t,n,r){var a=W.util.createBuffer(),o=e.length>>1,i=o+(1&e.length),s=e.substr(0,i),u=e.substr(o,i),c=W.util.createBuffer(),l=W.hmac.create();n=t+n;var d=Math.ceil(r/16),p=Math.ceil(r/20);l.start("MD5",s);var f=W.util.createBuffer();c.putBytes(n);for(var h=0;h<d;++h)l.start(null,null),l.update(c.getBytes()),c.putBuffer(l.digest()),l.start(null,null),l.update(c.bytes()+n),f.putBuffer(l.digest());l.start("SHA1",u);var m=W.util.createBuffer();for(c.clear(),c.putBytes(n),h=0;h<p;++h)l.start(null,null),l.update(c.getBytes()),c.putBuffer(l.digest()),l.start(null,null),l.update(c.bytes()+n),m.putBuffer(l.digest());return a.putBytes(W.util.xorBytes(f.getBytes(),m.getBytes(),r)),a},St=function(e,t,n){var r=!1;try{var a=e.deflate(t.fragment.getBytes());t.fragment=W.util.createBuffer(a),t.length=a.length,r=!0}catch(e){}return r},Et=function(e,t,n){var r=!1;try{var a=e.inflate(t.fragment.getBytes());t.fragment=W.util.createBuffer(a),t.length=a.length,r=!0}catch(e){}return r},Tt=function(e,t){var n=0;switch(t){case 1:n=e.getByte();break;case 2:n=e.getInt16();break;case 3:n=e.getInt24();break;case 4:n=e.getInt32()}return W.util.createBuffer(e.getBytes(n))},Nt=function(e,t,n){e.putInt(n.length(),t<<3),e.putBuffer(n)},At={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};At.SupportedVersions=[At.Versions.TLS_1_1,At.Versions.TLS_1_0],At.Version=At.SupportedVersions[0],At.MaxFragment=15360,At.ConnectionEnd={server:0,client:1},At.PRFAlgorithm={tls_prf_sha256:0},At.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},At.CipherType={stream:0,block:1,aead:2},At.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},At.CompressionMethod={none:0,deflate:1},At.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},At.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},At.Alert={},At.Alert.Level={warning:1,fatal:2},At.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},At.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},At.CipherSuites={},At.getCipherSuite=function(e){var t=null;for(var n in At.CipherSuites){var r=At.CipherSuites[n];if(r.id[0]===e.charCodeAt(0)&&r.id[1]===e.charCodeAt(1)){t=r;break}}return t},At.handleUnexpected=function(e,t){!e.open&&e.entity===At.ConnectionEnd.client||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.unexpected_message}})},At.handleHelloRequest=function(e,t,n){!e.handshaking&&e.handshakes>0&&(At.queue(e,At.createAlert(e,{level:At.Alert.Level.warning,description:At.Alert.Description.no_renegotiation})),At.flush(e)),e.process()},At.parseHelloMessage=function(e,t,n){var r=null,a=e.entity===At.ConnectionEnd.client;if(n<38)e.error(e,{message:a?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.illegal_parameter}});else{var o=t.fragment,i=o.length();if(r={version:{major:o.getByte(),minor:o.getByte()},random:W.util.createBuffer(o.getBytes(32)),session_id:Tt(o,1),extensions:[]},a?(r.cipher_suite=o.getBytes(2),r.compression_method=o.getByte()):(r.cipher_suites=Tt(o,2),r.compression_methods=Tt(o,1)),(i=n-(i-o.length()))>0){for(var s=Tt(o,2);s.length()>0;)r.extensions.push({type:[s.getByte(),s.getByte()],data:Tt(s,2)});if(!a)for(var u=0;u<r.extensions.length;++u){var c=r.extensions[u];if(0===c.type[0]&&0===c.type[1])for(var l=Tt(c.data,2);l.length()>0&&0===l.getByte();)e.session.extensions.server_name.serverNameList.push(Tt(l,2).getBytes())}}if(e.session.version&&(r.version.major!==e.session.version.major||r.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.protocol_version}});if(a)e.session.cipherSuite=At.getCipherSuite(r.cipher_suite);else for(var d=W.util.createBuffer(r.cipher_suites.bytes());d.length()>0&&(e.session.cipherSuite=At.getCipherSuite(d.getBytes(2)),null===e.session.cipherSuite););if(null===e.session.cipherSuite)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.handshake_failure},cipherSuite:W.util.bytesToHex(r.cipher_suite)});e.session.compressionMethod=a?r.compression_method:At.CompressionMethod.none}return r},At.createSecurityParameters=function(e,t){var n=e.entity===At.ConnectionEnd.client,r=t.random.bytes(),a=n?e.session.sp.client_random:r,o=n?r:At.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:At.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:a,server_random:o}},At.handleServerHello=function(e,t,n){var r=At.parseHelloMessage(e,t,n);if(!e.fail){if(!(r.version.minor<=e.version.minor))return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.protocol_version}});e.version.minor=r.version.minor,e.session.version=e.version;var a=r.session_id.bytes();a.length>0&&a===e.session.id?(e.expect=Mt,e.session.resuming=!0,e.session.sp.server_random=r.random.bytes()):(e.expect=_t,e.session.resuming=!1,At.createSecurityParameters(e,r)),e.session.id=a,e.process()}},At.handleClientHello=function(e,t,n){var r=At.parseHelloMessage(e,t,n);if(!e.fail){var a=r.session_id.bytes(),o=null;if(e.sessionCache&&(null===(o=e.sessionCache.getSession(a))?a="":(o.version.major!==r.version.major||o.version.minor>r.version.minor)&&(o=null,a="")),0===a.length&&(a=W.random.getBytes(32)),e.session.id=a,e.session.clientHelloVersion=r.version,e.session.sp={},o)e.version=e.session.version=o.version,e.session.sp=o.sp;else{for(var i,s=1;s<At.SupportedVersions.length&&!((i=At.SupportedVersions[s]).minor<=r.version.minor);++s);e.version={major:i.major,minor:i.minor},e.session.version=e.version}null!==o?(e.expect=Wt,e.session.resuming=!0,e.session.sp.client_random=r.random.bytes()):(e.expect=!1!==e.verifyClient?Lt:Ut,e.session.resuming=!1,At.createSecurityParameters(e,r)),e.open=!0,At.queue(e,At.createRecord(e,{type:At.ContentType.handshake,data:At.createServerHello(e)})),e.session.resuming?(At.queue(e,At.createRecord(e,{type:At.ContentType.change_cipher_spec,data:At.createChangeCipherSpec()})),e.state.pending=At.createConnectionState(e),e.state.current.write=e.state.pending.write,At.queue(e,At.createRecord(e,{type:At.ContentType.handshake,data:At.createFinished(e)}))):(At.queue(e,At.createRecord(e,{type:At.ContentType.handshake,data:At.createCertificate(e)})),e.fail||(At.queue(e,At.createRecord(e,{type:At.ContentType.handshake,data:At.createServerKeyExchange(e)})),!1!==e.verifyClient&&At.queue(e,At.createRecord(e,{type:At.ContentType.handshake,data:At.createCertificateRequest(e)})),At.queue(e,At.createRecord(e,{type:At.ContentType.handshake,data:At.createServerHelloDone(e)})))),At.flush(e),e.process()}},At.handleCertificate=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.illegal_parameter}});var r,a,o=t.fragment,i={certificate_list:Tt(o,3)},s=[];try{for(;i.certificate_list.length()>0;)r=Tt(i.certificate_list,3),a=W.asn1.fromDer(r),r=W.pki.certificateFromAsn1(a,!0),s.push(r)}catch(t){return e.error(e,{message:"Could not parse certificate list.",cause:t,send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.bad_certificate}})}var u=e.entity===At.ConnectionEnd.client;!u&&!0!==e.verifyClient||0!==s.length?0===s.length?e.expect=u?Rt:Ut:(u?e.session.serverCertificate=s[0]:e.session.clientCertificate=s[0],At.verifyCertificateChain(e,s)&&(e.expect=u?Rt:Ut)):e.error(e,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.illegal_parameter}}),e.process()},At.handleServerKeyExchange=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.unsupported_certificate}});e.expect=Ot,e.process()},At.handleClientKeyExchange=function(e,t,n){if(n<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.unsupported_certificate}});var r=t.fragment,a={enc_pre_master_secret:Tt(r,2).getBytes()},o=null;if(e.getPrivateKey)try{o=e.getPrivateKey(e,e.session.serverCertificate),o=W.pki.privateKeyFromPem(o)}catch(t){e.error(e,{message:"Could not get private key.",cause:t,send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.internal_error}})}if(null===o)return e.error(e,{message:"No private key set.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.internal_error}});try{var i=e.session.sp;i.pre_master_secret=o.decrypt(a.enc_pre_master_secret);var s=e.session.clientHelloVersion;if(s.major!==i.pre_master_secret.charCodeAt(0)||s.minor!==i.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(e){i.pre_master_secret=W.random.getBytes(48)}e.expect=Wt,null!==e.session.clientCertificate&&(e.expect=Vt),e.process()},At.handleCertificateRequest=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.illegal_parameter}});var r=t.fragment,a={certificate_types:Tt(r,1),certificate_authorities:Tt(r,2)};e.session.certificateRequest=a,e.expect=Ft,e.process()},At.handleCertificateVerify=function(e,t,n){if(n<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.illegal_parameter}});var r=t.fragment;r.read-=4;var a=r.bytes();r.read+=4;var o={signature:Tt(r,2).getBytes()},i=W.util.createBuffer();i.putBuffer(e.session.md5.digest()),i.putBuffer(e.session.sha1.digest()),i=i.getBytes();try{if(!e.session.clientCertificate.publicKey.verify(i,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(a),e.session.sha1.update(a)}catch(t){return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.handshake_failure}})}e.expect=Wt,e.process()},At.handleServerHelloDone=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.record_overflow}});if(null===e.serverCertificate){var r={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.insufficient_security}},a=e.verify(e,r.alert.description,0,[]);if(!0!==a)return(a||0===a)&&("object"!=typeof a||W.util.isArray(a)?"number"==typeof a&&(r.alert.description=a):(a.message&&(r.message=a.message),a.alert&&(r.alert.description=a.alert))),e.error(e,r)}null!==e.session.certificateRequest&&(t=At.createRecord(e,{type:At.ContentType.handshake,data:At.createCertificate(e)}),At.queue(e,t)),t=At.createRecord(e,{type:At.ContentType.handshake,data:At.createClientKeyExchange(e)}),At.queue(e,t),e.expect=Pt;var o=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&At.queue(e,At.createRecord(e,{type:At.ContentType.handshake,data:At.createCertificateVerify(e,t)})),At.queue(e,At.createRecord(e,{type:At.ContentType.change_cipher_spec,data:At.createChangeCipherSpec()})),e.state.pending=At.createConnectionState(e),e.state.current.write=e.state.pending.write,At.queue(e,At.createRecord(e,{type:At.ContentType.handshake,data:At.createFinished(e)})),e.expect=Mt,At.flush(e),e.process()};if(null===e.session.certificateRequest||null===e.session.clientCertificate)return o(e,null);At.getClientSignature(e,o)},At.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.illegal_parameter}});var n=e.entity===At.ConnectionEnd.client;(e.session.resuming&&n||!e.session.resuming&&!n)&&(e.state.pending=At.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&n||e.session.resuming&&!n)&&(e.state.pending=null),e.expect=n?Dt:zt,e.process()},At.handleFinished=function(e,t,n){var r=t.fragment;r.read-=4;var a=r.bytes();r.read+=4;var o=t.fragment.getBytes();(r=W.util.createBuffer()).putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest());var i=e.entity===At.ConnectionEnd.client,s=i?"server finished":"client finished",u=e.session.sp;if((r=Ct(u.master_secret,s,r.getBytes(),12)).getBytes()!==o)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.decrypt_error}});e.session.md5.update(a),e.session.sha1.update(a),(e.session.resuming&&i||!e.session.resuming&&!i)&&(At.queue(e,At.createRecord(e,{type:At.ContentType.change_cipher_spec,data:At.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,At.queue(e,At.createRecord(e,{type:At.ContentType.handshake,data:At.createFinished(e)}))),e.expect=i?Bt:jt,e.handshaking=!1,++e.handshakes,e.peerCertificate=i?e.session.serverCertificate:e.session.clientCertificate,At.flush(e),e.isConnected=!0,e.connected(e),e.process()},At.handleAlert=function(e,t){var n,r=t.fragment,a={level:r.getByte(),description:r.getByte()};switch(a.description){case At.Alert.Description.close_notify:n="Connection closed.";break;case At.Alert.Description.unexpected_message:n="Unexpected message.";break;case At.Alert.Description.bad_record_mac:n="Bad record MAC.";break;case At.Alert.Description.decryption_failed:n="Decryption failed.";break;case At.Alert.Description.record_overflow:n="Record overflow.";break;case At.Alert.Description.decompression_failure:n="Decompression failed.";break;case At.Alert.Description.handshake_failure:n="Handshake failure.";break;case At.Alert.Description.bad_certificate:n="Bad certificate.";break;case At.Alert.Description.unsupported_certificate:n="Unsupported certificate.";break;case At.Alert.Description.certificate_revoked:n="Certificate revoked.";break;case At.Alert.Description.certificate_expired:n="Certificate expired.";break;case At.Alert.Description.certificate_unknown:n="Certificate unknown.";break;case At.Alert.Description.illegal_parameter:n="Illegal parameter.";break;case At.Alert.Description.unknown_ca:n="Unknown certificate authority.";break;case At.Alert.Description.access_denied:n="Access denied.";break;case At.Alert.Description.decode_error:n="Decode error.";break;case At.Alert.Description.decrypt_error:n="Decrypt error.";break;case At.Alert.Description.export_restriction:n="Export restriction.";break;case At.Alert.Description.protocol_version:n="Unsupported protocol version.";break;case At.Alert.Description.insufficient_security:n="Insufficient security.";break;case At.Alert.Description.internal_error:n="Internal error.";break;case At.Alert.Description.user_canceled:n="User canceled.";break;case At.Alert.Description.no_renegotiation:n="Renegotiation not supported.";break;default:n="Unknown error."}if(a.description===At.Alert.Description.close_notify)return e.close();e.error(e,{message:n,send:!1,origin:e.entity===At.ConnectionEnd.client?"server":"client",alert:a}),e.process()},At.handleHandshake=function(e,t){var n=t.fragment,r=n.getByte(),a=n.getInt24();if(a>n.length())return e.fragmented=t,t.fragment=W.util.createBuffer(),n.read-=4,e.process();e.fragmented=null,n.read-=4;var o=n.bytes(a+4);n.read+=4,r in an[e.entity][e.expect]?(e.entity!==At.ConnectionEnd.server||e.open||e.fail||(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:W.md.md5.create(),sha1:W.md.sha1.create()}),r!==At.HandshakeType.hello_request&&r!==At.HandshakeType.certificate_verify&&r!==At.HandshakeType.finished&&(e.session.md5.update(o),e.session.sha1.update(o)),an[e.entity][e.expect][r](e,t,a)):At.handleUnexpected(e,t)},At.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},At.handleHeartbeat=function(e,t){var n=t.fragment,r=n.getByte(),a=n.getInt16(),o=n.getBytes(a);if(r===At.HeartbeatMessageType.heartbeat_request){if(e.handshaking||a>o.length)return e.process();At.queue(e,At.createRecord(e,{type:At.ContentType.heartbeat,data:At.createHeartbeat(At.HeartbeatMessageType.heartbeat_response,o)})),At.flush(e)}else if(r===At.HeartbeatMessageType.heartbeat_response){if(o!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,W.util.createBuffer(o))}e.process()};var _t=1,Rt=2,Ot=3,Ft=4,Mt=5,Dt=6,Bt=7,Pt=8,Lt=1,Ut=2,Vt=3,Wt=4,zt=5,jt=6,Ht=At.handleUnexpected,Gt=At.handleChangeCipherSpec,qt=At.handleAlert,Kt=At.handleHandshake,Xt=At.handleApplicationData,Qt=At.handleHeartbeat,Yt=[];Yt[At.ConnectionEnd.client]=[[Ht,qt,Kt,Ht,Qt],[Ht,qt,Kt,Ht,Qt],[Ht,qt,Kt,Ht,Qt],[Ht,qt,Kt,Ht,Qt],[Ht,qt,Kt,Ht,Qt],[Gt,qt,Ht,Ht,Qt],[Ht,qt,Kt,Ht,Qt],[Ht,qt,Kt,Xt,Qt],[Ht,qt,Kt,Ht,Qt]],Yt[At.ConnectionEnd.server]=[[Ht,qt,Kt,Ht,Qt],[Ht,qt,Kt,Ht,Qt],[Ht,qt,Kt,Ht,Qt],[Ht,qt,Kt,Ht,Qt],[Gt,qt,Ht,Ht,Qt],[Ht,qt,Kt,Ht,Qt],[Ht,qt,Kt,Xt,Qt],[Ht,qt,Kt,Ht,Qt]];var $t=At.handleHelloRequest,Zt=At.handleServerHello,Jt=At.handleCertificate,en=At.handleServerKeyExchange,tn=At.handleCertificateRequest,nn=At.handleServerHelloDone,rn=At.handleFinished,an=[];an[At.ConnectionEnd.client]=[[Ht,Ht,Zt,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Jt,en,tn,nn,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,en,tn,nn,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,tn,nn,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,nn,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,rn],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[$t,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht]];var on=At.handleClientHello,sn=At.handleClientKeyExchange,un=At.handleCertificateVerify;an[At.ConnectionEnd.server]=[[Ht,on,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Jt,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,sn,Ht,Ht,Ht,Ht],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,un,Ht,Ht,Ht,Ht,Ht],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,rn],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht],[Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht]],At.generateKeys=function(e,t){var n=Ct,r=t.client_random+t.server_random;e.session.resuming||(t.master_secret=n(t.pre_master_secret,"master secret",r,48).bytes(),t.pre_master_secret=null),r=t.server_random+t.client_random;var a=2*t.mac_key_length+2*t.enc_key_length,o=e.version.major===At.Versions.TLS_1_0.major&&e.version.minor===At.Versions.TLS_1_0.minor;o&&(a+=2*t.fixed_iv_length);var i=n(t.master_secret,"key expansion",r,a),s={client_write_MAC_key:i.getBytes(t.mac_key_length),server_write_MAC_key:i.getBytes(t.mac_key_length),client_write_key:i.getBytes(t.enc_key_length),server_write_key:i.getBytes(t.enc_key_length)};return o&&(s.client_write_IV=i.getBytes(t.fixed_iv_length),s.server_write_IV=i.getBytes(t.fixed_iv_length)),s},At.createConnectionState=function(e){var t=e.entity===At.ConnectionEnd.client,n=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},r={read:n(),write:n()};if(r.read.update=function(e,t){return r.read.cipherFunction(t,r.read)?r.read.compressFunction(e,t,r.read)||e.error(e,{message:"Could not decompress record.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.decompression_failure}}):e.error(e,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.bad_record_mac}}),!e.fail},r.write.update=function(e,t){return r.write.compressFunction(e,t,r.write)?r.write.cipherFunction(t,r.write)||e.error(e,{message:"Could not encrypt record.",send:!1,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.internal_error}}):e.error(e,{message:"Could not compress record.",send:!1,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.internal_error}}),!e.fail},e.session){var a=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(a),a.keys=At.generateKeys(e,a),r.read.macKey=t?a.keys.server_write_MAC_key:a.keys.client_write_MAC_key,r.write.macKey=t?a.keys.client_write_MAC_key:a.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(r,e,a),a.compression_algorithm){case At.CompressionMethod.none:break;case At.CompressionMethod.deflate:r.read.compressFunction=Et,r.write.compressFunction=St;break;default:throw new Error("Unsupported compression algorithm.")}}return r},At.createRandom=function(){var e=new Date,t=+e+6e4*e.getTimezoneOffset(),n=W.util.createBuffer();return n.putInt32(t),n.putBytes(W.random.getBytes(28)),n},At.createRecord=function(e,t){return t.data?{type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data}:null},At.createAlert=function(e,t){var n=W.util.createBuffer();return n.putByte(t.level),n.putByte(t.description),At.createRecord(e,{type:At.ContentType.alert,data:n})},At.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=W.util.createBuffer(),n=0;n<e.cipherSuites.length;++n){var r=e.cipherSuites[n];t.putByte(r.id[0]),t.putByte(r.id[1])}var a=t.length(),o=W.util.createBuffer();o.putByte(At.CompressionMethod.none);var i=o.length(),s=W.util.createBuffer();if(e.virtualHost){var u=W.util.createBuffer();u.putByte(0),u.putByte(0);var c=W.util.createBuffer();c.putByte(0),Nt(c,2,W.util.createBuffer(e.virtualHost));var l=W.util.createBuffer();Nt(l,2,c),Nt(u,2,l),s.putBuffer(u)}var d=s.length();d>0&&(d+=2);var p=e.session.id,f=p.length+1+2+4+28+2+a+1+i+d,h=W.util.createBuffer();return h.putByte(At.HandshakeType.client_hello),h.putInt24(f),h.putByte(e.version.major),h.putByte(e.version.minor),h.putBytes(e.session.sp.client_random),Nt(h,1,W.util.createBuffer(p)),Nt(h,2,t),Nt(h,1,o),d>0&&Nt(h,2,s),h},At.createServerHello=function(e){var t=e.session.id,n=t.length+1+2+4+28+2+1,r=W.util.createBuffer();return r.putByte(At.HandshakeType.server_hello),r.putInt24(n),r.putByte(e.version.major),r.putByte(e.version.minor),r.putBytes(e.session.sp.server_random),Nt(r,1,W.util.createBuffer(t)),r.putByte(e.session.cipherSuite.id[0]),r.putByte(e.session.cipherSuite.id[1]),r.putByte(e.session.compressionMethod),r},At.createCertificate=function(e){var t,n=e.entity===At.ConnectionEnd.client,r=null;e.getCertificate&&(t=n?e.session.certificateRequest:e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,t));var a=W.util.createBuffer();if(null!==r)try{W.util.isArray(r)||(r=[r]);for(var o=null,i=0;i<r.length;++i){var s=W.pem.decode(r[i])[0];if("CERTIFICATE"!==s.type&&"X509 CERTIFICATE"!==s.type&&"TRUSTED CERTIFICATE"!==s.type){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=s.type,u}if(s.procType&&"ENCRYPTED"===s.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=W.util.createBuffer(s.body);null===o&&(o=W.asn1.fromDer(c.bytes(),!1));var l=W.util.createBuffer();Nt(l,3,c),a.putBuffer(l)}r=W.pki.certificateFromAsn1(o),n?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(t){return e.error(e,{message:"Could not send certificate list.",cause:t,send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.bad_certificate}})}var d=3+a.length(),p=W.util.createBuffer();return p.putByte(At.HandshakeType.certificate),p.putInt24(d),Nt(p,3,a),p},At.createClientKeyExchange=function(e){var t=W.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(W.random.getBytes(46));var n=e.session.sp;n.pre_master_secret=t.getBytes();var r=(t=e.session.serverCertificate.publicKey.encrypt(n.pre_master_secret)).length+2,a=W.util.createBuffer();return a.putByte(At.HandshakeType.client_key_exchange),a.putInt24(r),a.putInt16(t.length),a.putBytes(t),a},At.createServerKeyExchange=function(e){return W.util.createBuffer()},At.getClientSignature=function(e,t){var n=W.util.createBuffer();n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest()),n=n.getBytes(),e.getSignature=e.getSignature||function(e,t,n){var r=null;if(e.getPrivateKey)try{r=e.getPrivateKey(e,e.session.clientCertificate),r=W.pki.privateKeyFromPem(r)}catch(t){e.error(e,{message:"Could not get private key.",cause:t,send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.internal_error}})}null===r?e.error(e,{message:"No private key set.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.internal_error}}):t=r.sign(t,null),n(e,t)},e.getSignature(e,n,t)},At.createCertificateVerify=function(e,t){var n=t.length+2,r=W.util.createBuffer();return r.putByte(At.HandshakeType.certificate_verify),r.putInt24(n),r.putInt16(t.length),r.putBytes(t),r},At.createCertificateRequest=function(e){var t=W.util.createBuffer();t.putByte(1);var n=W.util.createBuffer();for(var r in e.caStore.certs){var a=e.caStore.certs[r],o=W.pki.distinguishedNameToAsn1(a.subject),i=W.asn1.toDer(o);n.putInt16(i.length()),n.putBuffer(i)}var s=1+t.length()+2+n.length(),u=W.util.createBuffer();return u.putByte(At.HandshakeType.certificate_request),u.putInt24(s),Nt(u,1,t),Nt(u,2,n),u},At.createServerHelloDone=function(e){var t=W.util.createBuffer();return t.putByte(At.HandshakeType.server_hello_done),t.putInt24(0),t},At.createChangeCipherSpec=function(){var e=W.util.createBuffer();return e.putByte(1),e},At.createFinished=function(e){var t=W.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var n=e.entity===At.ConnectionEnd.client,r=e.session.sp,a=n?"client finished":"server finished";t=Ct(r.master_secret,a,t.getBytes(),12);var o=W.util.createBuffer();return o.putByte(At.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o},At.createHeartbeat=function(e,t,n){void 0===n&&(n=t.length);var r=W.util.createBuffer();r.putByte(e),r.putInt16(n),r.putBytes(t);var a=r.length(),o=Math.max(16,a-n-3);return r.putBytes(W.random.getBytes(o)),r},At.queue=function(e,t){if(t&&(0!==t.fragment.length()||t.type!==At.ContentType.handshake&&t.type!==At.ContentType.alert&&t.type!==At.ContentType.change_cipher_spec)){if(t.type===At.ContentType.handshake){var n=t.fragment.bytes();e.session.md5.update(n),e.session.sha1.update(n),n=null}var r;if(t.fragment.length()<=At.MaxFragment)r=[t];else{r=[];for(var a=t.fragment.bytes();a.length>At.MaxFragment;)r.push(At.createRecord(e,{type:t.type,data:W.util.createBuffer(a.slice(0,At.MaxFragment))})),a=a.slice(At.MaxFragment);a.length>0&&r.push(At.createRecord(e,{type:t.type,data:W.util.createBuffer(a)}))}for(var o=0;o<r.length&&!e.fail;++o){var i=r[o];e.state.current.write.update(e,i)&&e.records.push(i)}}},At.flush=function(e){for(var t=0;t<e.records.length;++t){var n=e.records[t];e.tlsData.putByte(n.type),e.tlsData.putByte(n.version.major),e.tlsData.putByte(n.version.minor),e.tlsData.putInt16(n.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var cn=function(e){switch(e){case!0:return!0;case W.pki.certificateError.bad_certificate:return At.Alert.Description.bad_certificate;case W.pki.certificateError.unsupported_certificate:return At.Alert.Description.unsupported_certificate;case W.pki.certificateError.certificate_revoked:return At.Alert.Description.certificate_revoked;case W.pki.certificateError.certificate_expired:return At.Alert.Description.certificate_expired;case W.pki.certificateError.certificate_unknown:return At.Alert.Description.certificate_unknown;case W.pki.certificateError.unknown_ca:return At.Alert.Description.unknown_ca;default:return At.Alert.Description.bad_certificate}};for(var ln in At.verifyCertificateChain=function(e,t){try{var n={};for(var r in e.verifyOptions)n[r]=e.verifyOptions[r];n.verify=function(t,n,r){cn(t);var a=e.verify(e,t,n,r);if(!0!==a){if("object"==typeof a&&!W.util.isArray(a)){var o=new Error("The application rejected the certificate.");throw o.send=!0,o.alert={level:At.Alert.Level.fatal,description:At.Alert.Description.bad_certificate},a.message&&(o.message=a.message),a.alert&&(o.alert.description=a.alert),o}a!==t&&(a=function(e){switch(e){case!0:return!0;case At.Alert.Description.bad_certificate:return W.pki.certificateError.bad_certificate;case At.Alert.Description.unsupported_certificate:return W.pki.certificateError.unsupported_certificate;case At.Alert.Description.certificate_revoked:return W.pki.certificateError.certificate_revoked;case At.Alert.Description.certificate_expired:return W.pki.certificateError.certificate_expired;case At.Alert.Description.certificate_unknown:return W.pki.certificateError.certificate_unknown;case At.Alert.Description.unknown_ca:return W.pki.certificateError.unknown_ca;default:return W.pki.certificateError.bad_certificate}}(a))}return a},W.pki.verifyCertificateChain(e.caStore,t,n)}catch(t){var a=t;("object"!=typeof a||W.util.isArray(a))&&(a={send:!0,alert:{level:At.Alert.Level.fatal,description:cn(t)}}),"send"in a||(a.send=!0),"alert"in a||(a.alert={level:At.Alert.Level.fatal,description:cn(a.error)}),e.error(e,a)}return!e.fail},At.createSessionCache=function(e,t){var n=null;if(e&&e.getSession&&e.setSession&&e.order)n=e;else{for(var r in(n={}).cache=e||{},n.capacity=Math.max(t||100,1),n.order=[],e)n.order.length<=t?n.order.push(r):delete e[r];n.getSession=function(e){var t=null,r=null;if(e?r=W.util.bytesToHex(e):n.order.length>0&&(r=n.order[0]),null!==r&&r in n.cache)for(var a in t=n.cache[r],delete n.cache[r],n.order)if(n.order[a]===r){n.order.splice(a,1);break}return t},n.setSession=function(e,t){if(n.order.length===n.capacity){var r=n.order.shift();delete n.cache[r]}r=W.util.bytesToHex(e),n.order.push(r),n.cache[r]=t}}return n},At.createConnection=function(e){var t=null;t=e.caStore?W.util.isArray(e.caStore)?W.pki.createCaStore(e.caStore):e.caStore:W.pki.createCaStore();var n=e.cipherSuites||null;if(null===n)for(var r in n=[],At.CipherSuites)n.push(At.CipherSuites[r]);var a=e.server?At.ConnectionEnd.server:At.ConnectionEnd.client,o=e.sessionCache?At.createSessionCache(e.sessionCache):null,i={version:{major:At.Version.major,minor:At.Version.minor},entity:a,sessionId:e.sessionId,caStore:t,sessionCache:o,cipherSuites:n,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(e,t,n,r){return t},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:W.util.createBuffer(),tlsData:W.util.createBuffer(),data:W.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(t,n){n.origin=n.origin||(t.entity===At.ConnectionEnd.client?"client":"server"),n.send&&(At.queue(t,At.createAlert(t,n.alert)),At.flush(t));var r=!1!==n.fatal;r&&(t.fail=!0),e.error(t,n),r&&t.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null,reset:function(e){i.version={major:At.Version.major,minor:At.Version.minor},i.record=null,i.session=null,i.peerCertificate=null,i.state={pending:null,current:null},i.expect=(At.ConnectionEnd.client,0),i.fragmented=null,i.records=[],i.open=!1,i.handshakes=0,i.handshaking=!1,i.isConnected=!1,i.fail=!(e||void 0===e),i.input.clear(),i.tlsData.clear(),i.data.clear(),i.state.current=At.createConnectionState(i)}};return i.reset(),i.handshake=function(e){if(i.entity!==At.ConnectionEnd.client)i.error(i,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(i.handshaking)i.error(i,{message:"Handshake already in progress.",fatal:!1});else{i.fail&&!i.open&&0===i.handshakes&&(i.fail=!1),i.handshaking=!0;var t=null;(e=e||"").length>0&&(i.sessionCache&&(t=i.sessionCache.getSession(e)),null===t&&(e="")),0===e.length&&i.sessionCache&&null!==(t=i.sessionCache.getSession())&&(e=t.id),i.session={id:e,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:W.md.md5.create(),sha1:W.md.sha1.create()},t&&(i.version=t.version,i.session.sp=t.sp),i.session.sp.client_random=At.createRandom().getBytes(),i.open=!0,At.queue(i,At.createRecord(i,{type:At.ContentType.handshake,data:At.createClientHello(i)})),At.flush(i)}},i.process=function(e){var t=0;return e&&i.input.putBytes(e),i.fail||(null!==i.record&&i.record.ready&&i.record.fragment.isEmpty()&&(i.record=null),null===i.record&&(t=function(e){var t=0,n=e.input,r=n.length();if(r<5)t=5-r;else{e.record={type:n.getByte(),version:{major:n.getByte(),minor:n.getByte()},length:n.getInt16(),fragment:W.util.createBuffer(),ready:!1};var a=e.record.version.major===e.version.major;a&&e.session&&e.session.version&&(a=e.record.version.minor===e.version.minor),a||e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.protocol_version}})}return t}(i)),i.fail||null===i.record||i.record.ready||(t=function(e){var t=0,n=e.input,r=n.length();return r<e.record.length?t=e.record.length-r:(e.record.fragment.putBytes(n.getBytes(e.record.length)),n.compact(),e.state.current.read.update(e,e.record)&&(null!==e.fragmented&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:"Invalid fragmented record.",send:!0,alert:{level:At.Alert.Level.fatal,description:At.Alert.Description.unexpected_message}})),e.record.ready=!0)),t}(i)),!i.fail&&null!==i.record&&i.record.ready&&function(e,t){var n=t.type-At.ContentType.change_cipher_spec,r=Yt[e.entity][e.expect];n in r?r[n](e,t):At.handleUnexpected(e,t)}(i,i.record)),t},i.prepare=function(e){return At.queue(i,At.createRecord(i,{type:At.ContentType.application_data,data:W.util.createBuffer(e)})),At.flush(i)},i.prepareHeartbeatRequest=function(e,t){return e instanceof W.util.ByteBuffer&&(e=e.bytes()),void 0===t&&(t=e.length),i.expectedHeartbeatPayload=e,At.queue(i,At.createRecord(i,{type:At.ContentType.heartbeat,data:At.createHeartbeat(At.HeartbeatMessageType.heartbeat_request,e,t)})),At.flush(i)},i.close=function(e){if(!i.fail&&i.sessionCache&&i.session){var t={id:i.session.id,version:i.session.version,sp:i.session.sp};t.sp.keys=null,i.sessionCache.setSession(t.id,t)}i.open&&(i.open=!1,i.input.clear(),(i.isConnected||i.handshaking)&&(i.isConnected=i.handshaking=!1,At.queue(i,At.createAlert(i,{level:At.Alert.Level.warning,description:At.Alert.Description.close_notify})),At.flush(i)),i.closed(i)),i.reset(e)},i},W.tls=W.tls||{},At)"function"!=typeof At[ln]&&(W.tls[ln]=At[ln]);W.tls.prf_tls1=Ct,W.tls.hmac_sha1=function(e,t,n){var r=W.hmac.create();r.start("SHA1",e);var a=W.util.createBuffer();return a.putInt32(t[0]),a.putInt32(t[1]),a.putByte(n.type),a.putByte(n.version.major),a.putByte(n.version.minor),a.putInt16(n.length),a.putBytes(n.fragment.bytes()),r.update(a.getBytes()),r.digest().getBytes()},W.tls.createSessionCache=At.createSessionCache,W.tls.createConnection=At.createConnection,k((function(e){var t=e.exports=W.tls;function n(e,n,a){var o=n.entity===W.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:W.cipher.createDecipher("AES-CBC",o?a.keys.server_write_key:a.keys.client_write_key),iv:o?a.keys.server_write_IV:a.keys.client_write_IV},e.write.cipherState={init:!1,cipher:W.cipher.createCipher("AES-CBC",o?a.keys.client_write_key:a.keys.server_write_key),iv:o?a.keys.client_write_IV:a.keys.server_write_IV},e.read.cipherFunction=i,e.write.cipherFunction=r,e.read.macLength=e.write.macLength=a.mac_length,e.read.macFunction=e.write.macFunction=t.hmac_sha1}function r(e,n){var r,o=!1,i=n.macFunction(n.macKey,n.sequenceNumber,e);e.fragment.putBytes(i),n.updateSequenceNumber(),r=e.version.minor===t.Versions.TLS_1_0.minor?n.cipherState.init?null:n.cipherState.iv:W.random.getBytesSync(16),n.cipherState.init=!0;var s=n.cipherState.cipher;return s.start({iv:r}),e.version.minor>=t.Versions.TLS_1_1.minor&&s.output.putBytes(r),s.update(e.fragment),s.finish(a)&&(e.fragment=s.output,e.length=e.fragment.length(),o=!0),o}function a(e,t,n){if(!n){var r=e-t.length()%e;t.fillWithByte(r-1,r)}return!0}function o(e,t,n){var r=!0;if(n){for(var a=t.length(),o=t.last(),i=a-1-o;i<a-1;++i)r=r&&t.at(i)==o;r&&t.truncate(o+1)}return r}function i(e,n){var r,a=!1;r=e.version.minor===t.Versions.TLS_1_0.minor?n.cipherState.init?null:n.cipherState.iv:e.fragment.getBytes(16),n.cipherState.init=!0;var i=n.cipherState.cipher;i.start({iv:r}),i.update(e.fragment),a=i.finish(o);var s=n.macLength,u=W.random.getBytesSync(s),c=i.output.length();c>=s?(e.fragment=i.output.getBytes(c-s),u=i.output.getBytes(s)):e.fragment=i.output.getBytes(),e.fragment=W.util.createBuffer(e.fragment),e.length=e.fragment.length();var l=n.macFunction(n.macKey,n.sequenceNumber,e);return n.updateSequenceNumber(),function(e,t,n){var r=W.hmac.create();return r.start("SHA1",e),r.update(t),t=r.digest().getBytes(),r.start(null,null),r.update(n),t===(n=r.digest().getBytes())}(n.macKey,u,l)&&a}t.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,e.cipher_type=t.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=t.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:n},t.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,e.cipher_type=t.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=t.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:n}})),W.debug=W.debug||{},W.debug.storage={},W.debug.get=function(e,t){var n;return void 0===e?n=W.debug.storage:e in W.debug.storage&&(n=void 0===t?W.debug.storage[e]:W.debug.storage[e][t]),n},W.debug.set=function(e,t,n){e in W.debug.storage||(W.debug.storage[e]={}),W.debug.storage[e][t]=n},W.debug.clear=function(e,t){void 0===e?W.debug.storage={}:e in W.debug.storage&&(void 0===t?delete W.debug.storage[e]:delete W.debug.storage[e][t])},k((function(e){var t=e.exports=W.sha512=W.sha512||{};W.md.sha512=W.md.algorithms.sha512=t;var n=W.sha384=W.sha512.sha384=W.sha512.sha384||{};n.create=function(){return t.create("SHA-384")},W.md.sha384=W.md.algorithms.sha384=n,W.sha512.sha256=W.sha512.sha256||{create:function(){return t.create("SHA-512/256")}},W.md["sha512/256"]=W.md.algorithms["sha512/256"]=W.sha512.sha256,W.sha512.sha224=W.sha512.sha224||{create:function(){return t.create("SHA-512/224")}},W.md["sha512/224"]=W.md.algorithms["sha512/224"]=W.sha512.sha224,t.create=function(e){if(a||(r=String.fromCharCode(128),r+=W.util.fillString(String.fromCharCode(0),128),o=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(i={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],i["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],i["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],i["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0),void 0===e&&(e="SHA-512"),!(e in i))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=i[e],n=null,u=W.util.createBuffer(),c=new Array(80),l=0;l<80;++l)c[l]=new Array(2);var d=64;switch(e){case"SHA-384":d=48;break;case"SHA-512/256":d=32;break;case"SHA-512/224":d=28}var p={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:d,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){p.messageLength=0,p.fullMessageLength=p.messageLength128=[];for(var e=p.messageLengthSize/4,r=0;r<e;++r)p.fullMessageLength.push(0);for(u=W.util.createBuffer(),n=new Array(t.length),r=0;r<t.length;++r)n[r]=t[r].slice(0);return p}};return p.start(),p.update=function(e,t){"utf8"===t&&(e=W.util.encodeUtf8(e));var r=e.length;p.messageLength+=r,r=[r/4294967296>>>0,r>>>0];for(var a=p.fullMessageLength.length-1;a>=0;--a)p.fullMessageLength[a]+=r[1],r[1]=r[0]+(p.fullMessageLength[a]/4294967296>>>0),p.fullMessageLength[a]=p.fullMessageLength[a]>>>0,r[0]=r[1]/4294967296>>>0;return u.putBytes(e),s(n,c,u),(u.read>2048||0===u.length())&&u.compact(),p},p.digest=function(){var t=W.util.createBuffer();t.putBytes(u.bytes());var a,o=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize&p.blockLength-1;t.putBytes(r.substr(0,p.blockLength-o));for(var i=8*p.fullMessageLength[0],l=0;l<p.fullMessageLength.length-1;++l)i+=(a=8*p.fullMessageLength[l+1])/4294967296>>>0,t.putInt32(i>>>0),i=a>>>0;t.putInt32(i);var d=new Array(n.length);for(l=0;l<n.length;++l)d[l]=n[l].slice(0);s(d,c,t);var f,h=W.util.createBuffer();for(f="SHA-512"===e?d.length:"SHA-384"===e?d.length-2:d.length-4,l=0;l<f;++l)h.putInt32(d[l][0]),l===f-1&&"SHA-512/224"===e||h.putInt32(d[l][1]);return h},p};var r=null,a=!1,o=null,i=null;function s(e,t,n){for(var r,a,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,w,I,C,S,E,T,N,A,_,R,O,F,M,D,B,P=n.length();P>=128;){for(_=0;_<16;++_)t[_][0]=n.getInt32()>>>0,t[_][1]=n.getInt32()>>>0;for(;_<80;++_)r=(((R=(F=t[_-2])[0])>>>19|(O=F[1])<<13)^(O>>>29|R<<3)^R>>>6)>>>0,a=((R<<13|O>>>19)^(O<<3|R>>>29)^(R<<26|O>>>6))>>>0,i=(((R=(D=t[_-15])[0])>>>1|(O=D[1])<<31)^(R>>>8|O<<24)^R>>>7)>>>0,s=((R<<31|O>>>1)^(R<<24|O>>>8)^(R<<25|O>>>7))>>>0,M=t[_-7],B=t[_-16],O=a+M[1]+s+B[1],t[_][0]=r+M[0]+i+B[0]+(O/4294967296>>>0)>>>0,t[_][1]=O>>>0;for(h=e[0][0],m=e[0][1],g=e[1][0],v=e[1][1],y=e[2][0],b=e[2][1],x=e[3][0],k=e[3][1],w=e[4][0],I=e[4][1],C=e[5][0],S=e[5][1],E=e[6][0],T=e[6][1],N=e[7][0],A=e[7][1],_=0;_<80;++_)l=((w>>>14|I<<18)^(w>>>18|I<<14)^(I>>>9|w<<23))>>>0,d=(E^w&(C^E))>>>0,u=((h>>>28|m<<4)^(m>>>2|h<<30)^(m>>>7|h<<25))>>>0,c=((h<<4|m>>>28)^(m<<30|h>>>2)^(m<<25|h>>>7))>>>0,p=(h&g|y&(h^g))>>>0,f=(m&v|b&(m^v))>>>0,O=A+(((w<<18|I>>>14)^(w<<14|I>>>18)^(I<<23|w>>>9))>>>0)+((T^I&(S^T))>>>0)+o[_][1]+t[_][1],r=N+l+d+o[_][0]+t[_][0]+(O/4294967296>>>0)>>>0,a=O>>>0,i=u+p+((O=c+f)/4294967296>>>0)>>>0,s=O>>>0,N=E,A=T,E=C,T=S,C=w,S=I,w=x+r+((O=k+a)/4294967296>>>0)>>>0,I=O>>>0,x=y,k=b,y=g,b=v,g=h,v=m,h=r+i+((O=a+s)/4294967296>>>0)>>>0,m=O>>>0;O=e[0][1]+m,e[0][0]=e[0][0]+h+(O/4294967296>>>0)>>>0,e[0][1]=O>>>0,O=e[1][1]+v,e[1][0]=e[1][0]+g+(O/4294967296>>>0)>>>0,e[1][1]=O>>>0,O=e[2][1]+b,e[2][0]=e[2][0]+y+(O/4294967296>>>0)>>>0,e[2][1]=O>>>0,O=e[3][1]+k,e[3][0]=e[3][0]+x+(O/4294967296>>>0)>>>0,e[3][1]=O>>>0,O=e[4][1]+I,e[4][0]=e[4][0]+w+(O/4294967296>>>0)>>>0,e[4][1]=O>>>0,O=e[5][1]+S,e[5][0]=e[5][0]+C+(O/4294967296>>>0)>>>0,e[5][1]=O>>>0,O=e[6][1]+T,e[6][0]=e[6][0]+E+(O/4294967296>>>0)>>>0,e[6][1]=O>>>0,O=e[7][1]+A,e[7][0]=e[7][0]+N+(O/4294967296>>>0)>>>0,e[7][1]=O>>>0,P-=128}}}));var dn=W.asn1,pn={privateKeyValidator:{name:"PrivateKeyInfo",tagClass:dn.Class.UNIVERSAL,type:dn.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:dn.Class.UNIVERSAL,type:dn.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:dn.Class.UNIVERSAL,type:dn.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:dn.Class.UNIVERSAL,type:dn.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:dn.Class.UNIVERSAL,type:dn.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},publicKeyValidator:{name:"SubjectPublicKeyInfo",tagClass:dn.Class.UNIVERSAL,type:dn.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:dn.Class.UNIVERSAL,type:dn.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:dn.Class.UNIVERSAL,type:dn.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:dn.Class.UNIVERSAL,type:dn.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}},fn=pn.publicKeyValidator,hn=pn.privateKeyValidator;if(void 0===mn)var mn=W.jsbn.BigInteger;var gn=W.util.ByteBuffer,vn="undefined"==typeof Buffer?Uint8Array:Buffer;W.pki=W.pki||{},W.pki.ed25519=W.ed25519=W.ed25519||{};var yn=W.ed25519;function bn(e){var t=e.message;if(t instanceof Uint8Array||t instanceof vn)return t;var n=e.encoding;if(void 0===t){if(!e.md)throw new TypeError('"options.message" or "options.md" not specified.');t=e.md.digest().getBytes(),n="binary"}if("string"==typeof t&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if("string"==typeof t){if("undefined"!=typeof Buffer)return Buffer.from(t,n);t=new gn(t,n)}else if(!(t instanceof gn))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var r=new vn(t.length()),a=0;a<r.length;++a)r[a]=t.at(a);return r}yn.constants={},yn.constants.PUBLIC_KEY_BYTE_LENGTH=32,yn.constants.PRIVATE_KEY_BYTE_LENGTH=64,yn.constants.SEED_BYTE_LENGTH=32,yn.constants.SIGN_BYTE_LENGTH=64,yn.constants.HASH_BYTE_LENGTH=64,yn.generateKeyPair=function(e){var t=(e=e||{}).seed;if(void 0===t)t=W.random.getBytesSync(yn.constants.SEED_BYTE_LENGTH);else if("string"==typeof t){if(t.length!==yn.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+yn.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=bn({message:t,encoding:"binary"});for(var n=new vn(yn.constants.PUBLIC_KEY_BYTE_LENGTH),r=new vn(yn.constants.PRIVATE_KEY_BYTE_LENGTH),a=0;a<32;++a)r[a]=t[a];return function(e,t){var n,r=[jn(),jn(),jn(),jn()],a=Nn(t,32);for(a[0]&=248,a[31]&=127,a[31]|=64,Un(r,a),Fn(e,r),n=0;n<32;++n)t[n+32]=e[n]}(n,r),{publicKey:n,privateKey:r}},yn.privateKeyFromAsn1=function(e){var t={},n=[];if(!W.asn1.validate(e,hn,t,n)){var r=new Error("Invalid Key.");throw r.errors=n,r}var a=W.asn1.derToOid(t.privateKeyOid),o=W.oids.EdDSA25519;if(a!==o)throw new Error('Invalid OID "'+a+'"; OID must be "'+o+'".');var i=t.privateKey;return{privateKeyBytes:bn({message:W.asn1.fromDer(i).value,encoding:"binary"})}},yn.publicKeyFromAsn1=function(e){var t={},n=[];if(!W.asn1.validate(e,fn,t,n)){var r=new Error("Invalid Key.");throw r.errors=n,r}var a=W.asn1.derToOid(t.publicKeyOid),o=W.oids.EdDSA25519;if(a!==o)throw new Error('Invalid OID "'+a+'"; OID must be "'+o+'".');var i=t.ed25519PublicKey;if(i.length!==yn.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return bn({message:i,encoding:"binary"})},yn.publicKeyFromPrivateKey=function(e){var t=bn({message:(e=e||{}).privateKey,encoding:"binary"});if(t.length!==yn.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+yn.constants.PRIVATE_KEY_BYTE_LENGTH);for(var n=new vn(yn.constants.PUBLIC_KEY_BYTE_LENGTH),r=0;r<n.length;++r)n[r]=t[32+r];return n},yn.sign=function(e){var t=bn(e=e||{}),n=bn({message:e.privateKey,encoding:"binary"});if(n.length===yn.constants.SEED_BYTE_LENGTH)n=yn.generateKeyPair({seed:n}).privateKey;else if(n.length!==yn.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+yn.constants.SEED_BYTE_LENGTH+" or "+yn.constants.PRIVATE_KEY_BYTE_LENGTH);var r=new vn(yn.constants.SIGN_BYTE_LENGTH+t.length);!function(e,t,n,r){var a,o,i=new Float64Array(64),s=[jn(),jn(),jn(),jn()],u=Nn(r,32);for(u[0]&=248,u[31]&=127,u[31]|=64,a=0;a<n;++a)e[64+a]=t[a];for(a=0;a<32;++a)e[32+a]=u[32+a];var c=Nn(e.subarray(32),n+32);for(_n(c),Un(s,c),Fn(e,s),a=32;a<64;++a)e[a]=r[a];var l=Nn(e,n+64);for(_n(l),a=32;a<64;++a)i[a]=0;for(a=0;a<32;++a)i[a]=c[a];for(a=0;a<32;++a)for(o=0;o<32;o++)i[a+o]+=l[a]*u[o];An(e.subarray(32),i)}(r,t,t.length,n);for(var a=new vn(yn.constants.SIGN_BYTE_LENGTH),o=0;o<a.length;++o)a[o]=r[o];return a},yn.verify=function(e){var t=bn(e=e||{});if(void 0===e.signature)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var n=bn({message:e.signature,encoding:"binary"});if(n.length!==yn.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+yn.constants.SIGN_BYTE_LENGTH);var r=bn({message:e.publicKey,encoding:"binary"});if(r.length!==yn.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+yn.constants.PUBLIC_KEY_BYTE_LENGTH);var a,o=new vn(yn.constants.SIGN_BYTE_LENGTH+t.length),i=new vn(yn.constants.SIGN_BYTE_LENGTH+t.length);for(a=0;a<yn.constants.SIGN_BYTE_LENGTH;++a)o[a]=n[a];for(a=0;a<t.length;++a)o[a+yn.constants.SIGN_BYTE_LENGTH]=t[a];return function(e,t,n,r){var a,o=new vn(32),i=[jn(),jn(),jn(),jn()],s=[jn(),jn(),jn(),jn()];if(n<64)return-1;if(function(e,t){var n=jn(),r=jn(),a=jn(),o=jn(),i=jn(),s=jn(),u=jn();return Vn(e[2],kn),function(e,t){var n;for(n=0;n<16;++n)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}(e[1],t),qn(a,e[1]),Kn(o,a,wn),Gn(a,a,e[2]),Hn(o,e[2],o),qn(i,o),qn(s,i),Kn(u,s,i),Kn(n,u,a),Kn(n,n,o),function(e,t){var n,r=jn();for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)qn(r,r),1!==n&&Kn(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}(n,n),Kn(n,n,a),Kn(n,n,o),Kn(n,n,o),Kn(e[0],n,o),qn(r,e[0]),Kn(r,r,o),Dn(r,a)&&Kn(e[0],e[0],Tn),qn(r,e[0]),Kn(r,r,o),Dn(r,a)?-1:(Pn(e[0])===t[31]>>7&&Gn(e[0],xn,e[0]),Kn(e[3],e[0],e[1]),0)}(s,r))return-1;for(a=0;a<n;++a)e[a]=t[a];for(a=0;a<32;++a)e[a+32]=r[a];var u=Nn(e,n);if(_n(u),Ln(i,s,u),Un(s,t.subarray(32)),Rn(i,s),Fn(o,i),n-=64,Bn(t,0,o,0)){for(a=0;a<n;++a)e[a]=0;return-1}for(a=0;a<n;++a)e[a]=t[a+64];return n}(i,o,o.length,r)>=0};var xn=jn(),kn=jn([1]),wn=jn([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),In=jn([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Cn=jn([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Sn=jn([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),En=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Tn=jn([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Nn(e,t){var n=W.md.sha512.create(),r=new gn(e);n.update(r.getBytes(t),"binary");var a=n.digest().getBytes();if("undefined"!=typeof Buffer)return Buffer.from(a,"binary");for(var o=new vn(yn.constants.HASH_BYTE_LENGTH),i=0;i<64;++i)o[i]=a.charCodeAt(i);return o}function An(e,t){var n,r,a,o;for(r=63;r>=32;--r){for(n=0,a=r-32,o=r-12;a<o;++a)t[a]+=n-16*t[r]*En[a-(r-32)],n=t[a]+128>>8,t[a]-=256*n;t[a]+=n,t[r]=0}for(n=0,a=0;a<32;++a)t[a]+=n-(t[31]>>4)*En[a],n=t[a]>>8,t[a]&=255;for(a=0;a<32;++a)t[a]-=n*En[a];for(r=0;r<32;++r)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function _n(e){for(var t=new Float64Array(64),n=0;n<64;++n)t[n]=e[n],e[n]=0;An(e,t)}function Rn(e,t){var n=jn(),r=jn(),a=jn(),o=jn(),i=jn(),s=jn(),u=jn(),c=jn(),l=jn();Gn(n,e[1],e[0]),Gn(l,t[1],t[0]),Kn(n,n,l),Hn(r,e[0],e[1]),Hn(l,t[0],t[1]),Kn(r,r,l),Kn(a,e[3],t[3]),Kn(a,a,In),Kn(o,e[2],t[2]),Hn(o,o,o),Gn(i,r,n),Gn(s,o,a),Hn(u,o,a),Hn(c,r,n),Kn(e[0],i,s),Kn(e[1],c,u),Kn(e[2],u,s),Kn(e[3],i,c)}function On(e,t,n){for(var r=0;r<4;++r)zn(e[r],t[r],n)}function Fn(e,t){var n=jn(),r=jn(),a=jn();!function(e,t){var n,r=jn();for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)qn(r,r),2!==n&&4!==n&&Kn(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}(a,t[2]),Kn(n,t[0],a),Kn(r,t[1],a),Mn(e,r),e[31]^=Pn(n)<<7}function Mn(e,t){var n,r,a,o=jn(),i=jn();for(n=0;n<16;++n)i[n]=t[n];for(Wn(i),Wn(i),Wn(i),r=0;r<2;++r){for(o[0]=i[0]-65517,n=1;n<15;++n)o[n]=i[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=i[15]-32767-(o[14]>>16&1),a=o[15]>>16&1,o[14]&=65535,zn(i,o,1-a)}for(n=0;n<16;n++)e[2*n]=255&i[n],e[2*n+1]=i[n]>>8}function Dn(e,t){var n=new vn(32),r=new vn(32);return Mn(n,e),Mn(r,t),Bn(n,0,r,0)}function Bn(e,t,n,r){return function(e,t,n,r,a){var o,i=0;for(o=0;o<a;++o)i|=e[t+o]^n[r+o];return(1&i-1>>>8)-1}(e,t,n,r,32)}function Pn(e){var t=new vn(32);return Mn(t,e),1&t[0]}function Ln(e,t,n){var r,a;for(Vn(e[0],xn),Vn(e[1],kn),Vn(e[2],kn),Vn(e[3],xn),a=255;a>=0;--a)On(e,t,r=n[a/8|0]>>(7&a)&1),Rn(t,e),Rn(e,e),On(e,t,r)}function Un(e,t){var n=[jn(),jn(),jn(),jn()];Vn(n[0],Cn),Vn(n[1],Sn),Vn(n[2],kn),Kn(n[3],Cn,Sn),Ln(e,n,t)}function Vn(e,t){var n;for(n=0;n<16;n++)e[n]=0|t[n]}function Wn(e){var t,n,r=1;for(t=0;t<16;++t)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-65536*r;e[0]+=r-1+37*(r-1)}function zn(e,t,n){for(var r,a=~(n-1),o=0;o<16;++o)r=a&(e[o]^t[o]),e[o]^=r,t[o]^=r}function jn(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;++t)n[t]=e[t];return n}function Hn(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]+n[r]}function Gn(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]-n[r]}function qn(e,t){Kn(e,t,t)}function Kn(e,t,n){var r,a,o=0,i=0,s=0,u=0,c=0,l=0,d=0,p=0,f=0,h=0,m=0,g=0,v=0,y=0,b=0,x=0,k=0,w=0,I=0,C=0,S=0,E=0,T=0,N=0,A=0,_=0,R=0,O=0,F=0,M=0,D=0,B=n[0],P=n[1],L=n[2],U=n[3],V=n[4],W=n[5],z=n[6],j=n[7],H=n[8],G=n[9],q=n[10],K=n[11],X=n[12],Q=n[13],Y=n[14],$=n[15];o+=(r=t[0])*B,i+=r*P,s+=r*L,u+=r*U,c+=r*V,l+=r*W,d+=r*z,p+=r*j,f+=r*H,h+=r*G,m+=r*q,g+=r*K,v+=r*X,y+=r*Q,b+=r*Y,x+=r*$,i+=(r=t[1])*B,s+=r*P,u+=r*L,c+=r*U,l+=r*V,d+=r*W,p+=r*z,f+=r*j,h+=r*H,m+=r*G,g+=r*q,v+=r*K,y+=r*X,b+=r*Q,x+=r*Y,k+=r*$,s+=(r=t[2])*B,u+=r*P,c+=r*L,l+=r*U,d+=r*V,p+=r*W,f+=r*z,h+=r*j,m+=r*H,g+=r*G,v+=r*q,y+=r*K,b+=r*X,x+=r*Q,k+=r*Y,w+=r*$,u+=(r=t[3])*B,c+=r*P,l+=r*L,d+=r*U,p+=r*V,f+=r*W,h+=r*z,m+=r*j,g+=r*H,v+=r*G,y+=r*q,b+=r*K,x+=r*X,k+=r*Q,w+=r*Y,I+=r*$,c+=(r=t[4])*B,l+=r*P,d+=r*L,p+=r*U,f+=r*V,h+=r*W,m+=r*z,g+=r*j,v+=r*H,y+=r*G,b+=r*q,x+=r*K,k+=r*X,w+=r*Q,I+=r*Y,C+=r*$,l+=(r=t[5])*B,d+=r*P,p+=r*L,f+=r*U,h+=r*V,m+=r*W,g+=r*z,v+=r*j,y+=r*H,b+=r*G,x+=r*q,k+=r*K,w+=r*X,I+=r*Q,C+=r*Y,S+=r*$,d+=(r=t[6])*B,p+=r*P,f+=r*L,h+=r*U,m+=r*V,g+=r*W,v+=r*z,y+=r*j,b+=r*H,x+=r*G,k+=r*q,w+=r*K,I+=r*X,C+=r*Q,S+=r*Y,E+=r*$,p+=(r=t[7])*B,f+=r*P,h+=r*L,m+=r*U,g+=r*V,v+=r*W,y+=r*z,b+=r*j,x+=r*H,k+=r*G,w+=r*q,I+=r*K,C+=r*X,S+=r*Q,E+=r*Y,T+=r*$,f+=(r=t[8])*B,h+=r*P,m+=r*L,g+=r*U,v+=r*V,y+=r*W,b+=r*z,x+=r*j,k+=r*H,w+=r*G,I+=r*q,C+=r*K,S+=r*X,E+=r*Q,T+=r*Y,N+=r*$,h+=(r=t[9])*B,m+=r*P,g+=r*L,v+=r*U,y+=r*V,b+=r*W,x+=r*z,k+=r*j,w+=r*H,I+=r*G,C+=r*q,S+=r*K,E+=r*X,T+=r*Q,N+=r*Y,A+=r*$,m+=(r=t[10])*B,g+=r*P,v+=r*L,y+=r*U,b+=r*V,x+=r*W,k+=r*z,w+=r*j,I+=r*H,C+=r*G,S+=r*q,E+=r*K,T+=r*X,N+=r*Q,A+=r*Y,_+=r*$,g+=(r=t[11])*B,v+=r*P,y+=r*L,b+=r*U,x+=r*V,k+=r*W,w+=r*z,I+=r*j,C+=r*H,S+=r*G,E+=r*q,T+=r*K,N+=r*X,A+=r*Q,_+=r*Y,R+=r*$,v+=(r=t[12])*B,y+=r*P,b+=r*L,x+=r*U,k+=r*V,w+=r*W,I+=r*z,C+=r*j,S+=r*H,E+=r*G,T+=r*q,N+=r*K,A+=r*X,_+=r*Q,R+=r*Y,O+=r*$,y+=(r=t[13])*B,b+=r*P,x+=r*L,k+=r*U,w+=r*V,I+=r*W,C+=r*z,S+=r*j,E+=r*H,T+=r*G,N+=r*q,A+=r*K,_+=r*X,R+=r*Q,O+=r*Y,F+=r*$,b+=(r=t[14])*B,x+=r*P,k+=r*L,w+=r*U,I+=r*V,C+=r*W,S+=r*z,E+=r*j,T+=r*H,N+=r*G,A+=r*q,_+=r*K,R+=r*X,O+=r*Q,F+=r*Y,M+=r*$,x+=(r=t[15])*B,i+=38*(w+=r*L),s+=38*(I+=r*U),u+=38*(C+=r*V),c+=38*(S+=r*W),l+=38*(E+=r*z),d+=38*(T+=r*j),p+=38*(N+=r*H),f+=38*(A+=r*G),h+=38*(_+=r*q),m+=38*(R+=r*K),g+=38*(O+=r*X),v+=38*(F+=r*Q),y+=38*(M+=r*Y),b+=38*(D+=r*$),o=(r=(o+=38*(k+=r*P))+(a=1)+65535)-65536*(a=Math.floor(r/65536)),i=(r=i+a+65535)-65536*(a=Math.floor(r/65536)),s=(r=s+a+65535)-65536*(a=Math.floor(r/65536)),u=(r=u+a+65535)-65536*(a=Math.floor(r/65536)),c=(r=c+a+65535)-65536*(a=Math.floor(r/65536)),l=(r=l+a+65535)-65536*(a=Math.floor(r/65536)),d=(r=d+a+65535)-65536*(a=Math.floor(r/65536)),p=(r=p+a+65535)-65536*(a=Math.floor(r/65536)),f=(r=f+a+65535)-65536*(a=Math.floor(r/65536)),h=(r=h+a+65535)-65536*(a=Math.floor(r/65536)),m=(r=m+a+65535)-65536*(a=Math.floor(r/65536)),g=(r=g+a+65535)-65536*(a=Math.floor(r/65536)),v=(r=v+a+65535)-65536*(a=Math.floor(r/65536)),y=(r=y+a+65535)-65536*(a=Math.floor(r/65536)),b=(r=b+a+65535)-65536*(a=Math.floor(r/65536)),x=(r=x+a+65535)-65536*(a=Math.floor(r/65536)),o=(r=(o+=a-1+37*(a-1))+(a=1)+65535)-65536*(a=Math.floor(r/65536)),i=(r=i+a+65535)-65536*(a=Math.floor(r/65536)),s=(r=s+a+65535)-65536*(a=Math.floor(r/65536)),u=(r=u+a+65535)-65536*(a=Math.floor(r/65536)),c=(r=c+a+65535)-65536*(a=Math.floor(r/65536)),l=(r=l+a+65535)-65536*(a=Math.floor(r/65536)),d=(r=d+a+65535)-65536*(a=Math.floor(r/65536)),p=(r=p+a+65535)-65536*(a=Math.floor(r/65536)),f=(r=f+a+65535)-65536*(a=Math.floor(r/65536)),h=(r=h+a+65535)-65536*(a=Math.floor(r/65536)),m=(r=m+a+65535)-65536*(a=Math.floor(r/65536)),g=(r=g+a+65535)-65536*(a=Math.floor(r/65536)),v=(r=v+a+65535)-65536*(a=Math.floor(r/65536)),y=(r=y+a+65535)-65536*(a=Math.floor(r/65536)),b=(r=b+a+65535)-65536*(a=Math.floor(r/65536)),x=(r=x+a+65535)-65536*(a=Math.floor(r/65536)),o+=a-1+37*(a-1),e[0]=o,e[1]=i,e[2]=s,e[3]=u,e[4]=c,e[5]=l,e[6]=d,e[7]=p,e[8]=f,e[9]=h,e[10]=m,e[11]=g,e[12]=v,e[13]=y,e[14]=b,e[15]=x}W.kem=W.kem||{};var Xn=W.jsbn.BigInteger;function Qn(e,t,n,r){e.generate=function(e,a){for(var o=new W.util.ByteBuffer,i=Math.ceil(a/r)+n,s=new W.util.ByteBuffer,u=n;u<i;++u){s.putInt32(u),t.start(),t.update(e+s.getBytes());var c=t.digest();o.putBytes(c.getBytes(r))}return o.truncate(o.length()-a),o.getBytes()}}W.kem.rsa={},W.kem.rsa.create=function(e,t){var n=(t=t||{}).prng||W.random;return{encrypt:function(t,r){var a,o=Math.ceil(t.n.bitLength()/8);do{a=new Xn(W.util.bytesToHex(n.getBytesSync(o)),16).mod(t.n)}while(a.compareTo(Xn.ONE)<=0);var i=o-(a=W.util.hexToBytes(a.toString(16))).length;return i>0&&(a=W.util.fillString(String.fromCharCode(0),i)+a),{encapsulation:t.encrypt(a,"NONE"),key:e.generate(a,r)}},decrypt:function(t,n,r){var a=t.decrypt(n,"NONE");return e.generate(a,r)}}},W.kem.kdf1=function(e,t){Qn(this,e,0,t||e.digestLength)},W.kem.kdf2=function(e,t){Qn(this,e,1,t||e.digestLength)},W.log=W.log||{},W.log.levels=["none","error","warning","info","debug","verbose","max"];var Yn={},$n=[],Zn=null;W.log.LEVEL_LOCKED=2,W.log.NO_LEVEL_CHECK=4,W.log.INTERPOLATE=8;for(var Jn=0;Jn<W.log.levels.length;++Jn){var er=W.log.levels[Jn];Yn[er]={index:Jn,name:er.toUpperCase()}}W.log.logMessage=function(e){for(var t=Yn[e.level].index,n=0;n<$n.length;++n){var r=$n[n];r.flags&W.log.NO_LEVEL_CHECK?r.f(e):t<=Yn[r.level].index&&r.f(r,e)}},W.log.prepareStandard=function(e){"standard"in e||(e.standard=Yn[e.level].name+" ["+e.category+"] "+e.message)},W.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]||e.arguments),e.full=W.util.format.apply(this,t)}},W.log.prepareStandardFull=function(e){"standardFull"in e||(W.log.prepareStandard(e),e.standardFull=e.standard)};var tr=["error","warning","info","debug","verbose"];for(Jn=0;Jn<tr.length;++Jn)!function(e){W.log[e]=function(t,n){var r=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:e,category:t,message:n,arguments:r};W.log.logMessage(a)}}(tr[Jn]);if(W.log.makeLogger=function(e){var t={flags:0,f:e};return W.log.setLevel(t,"none"),t},W.log.setLevel=function(e,t){var n=!1;if(e&&!(e.flags&W.log.LEVEL_LOCKED))for(var r=0;r<W.log.levels.length;++r)if(t==W.log.levels[r]){e.level=t,n=!0;break}return n},W.log.lock=function(e,t){void 0===t||t?e.flags|=W.log.LEVEL_LOCKED:e.flags&=~W.log.LEVEL_LOCKED},W.log.addLogger=function(e){$n.push(e)},"undefined"!=typeof console&&"log"in console){var nr;if(console.error&&console.warn&&console.info&&console.debug){var rr={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},ar=function(e,t){W.log.prepareStandard(t);var n=rr[t.level],r=[t.standard];r=r.concat(t.arguments.slice()),n.apply(console,r)};nr=W.log.makeLogger(ar)}else ar=function(e,t){W.log.prepareStandardFull(t),console.log(t.standardFull)},nr=W.log.makeLogger(ar);W.log.setLevel(nr,"debug"),W.log.addLogger(nr),Zn=nr}else console={log:function(){}};if(null!==Zn){var or=W.util.getQueryVariables();"console.level"in or&&W.log.setLevel(Zn,or["console.level"].slice(-1)[0]),"console.lock"in or&&"true"==or["console.lock"].slice(-1)[0]&&W.log.lock(Zn)}W.log.consoleLogger=Zn,k((function(e){var t=W.asn1,n=e.exports=W.pkcs7=W.pkcs7||{};function r(e){var r={},a=[];if(!t.validate(e,n.asn1.recipientInfoValidator,r,a)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=a,o}return{version:r.version.charCodeAt(0),issuer:W.pki.RDNAttributesAsArray(r.issuer),serialNumber:W.util.createBuffer(r.serial).toHex(),encryptedContent:{algorithm:t.derToOid(r.encAlgorithm),parameter:r.encParameter.value,content:r.encKey}}}function a(e){for(var n,r=[],a=0;a<e.length;++a)r.push((n=e[a],t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(n.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[W.pki.distinguishedNameToAsn1({attributes:n.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,W.util.hexToBytes(n.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.encryptedContent.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.encryptedContent.content)])));return r}function o(e){var n=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[W.pki.distinguishedNameToAsn1({attributes:e.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,W.util.hexToBytes(e.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.digestAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&n.value.push(e.authenticatedAttributesAsn1),n.value.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])),n.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[]),a=0;a<e.unauthenticatedAttributes.length;++a){var o=e.unauthenticatedAttributes[a];r.values.push(i(o))}n.value.push(r)}return n}function i(e){var n;if(e.type===W.pki.oids.contentType)n=t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.value).getBytes());else if(e.type===W.pki.oids.messageDigest)n=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===W.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),a=new Date("2050-01-01T00:00:00Z"),o=e.value;if("string"==typeof o){var i=Date.parse(o);o=isNaN(i)?13===o.length?t.utcTimeToDate(o):t.generalizedTimeToDate(o):new Date(i)}n=o>=r&&o<a?t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(o)):t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(o))}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[n])])}function s(e,n,r){var a={};if(!t.validate(n,r,a,[])){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}if(t.derToOid(a.contentType)!==W.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(a.encryptedContent){var i="";if(W.util.isArray(a.encryptedContent))for(var s=0;s<a.encryptedContent.length;++s){if(a.encryptedContent[s].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");i+=a.encryptedContent[s].value}else i=a.encryptedContent;e.encryptedContent={algorithm:t.derToOid(a.encAlgorithm),parameter:W.util.createBuffer(a.encParameter.value),content:W.util.createBuffer(i)}}if(a.content){if(i="",W.util.isArray(a.content))for(s=0;s<a.content.length;++s){if(a.content[s].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");i+=a.content[s].value}else i=a.content;e.content=W.util.createBuffer(i)}return e.version=a.version.charCodeAt(0),e.rawCapture=a,a}function u(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case W.pki.oids["aes128-CBC"]:case W.pki.oids["aes192-CBC"]:case W.pki.oids["aes256-CBC"]:t=W.aes.createDecryptionCipher(e.encryptedContent.key);break;case W.pki.oids.desCBC:case W.pki.oids["des-EDE3-CBC"]:t=W.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}n.messageFromPem=function(e){var r=W.pem.decode(e)[0];if("PKCS7"!==r.type){var a=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw a.headerType=r.type,a}if(r.procType&&"ENCRYPTED"===r.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=t.fromDer(r.body);return n.messageFromAsn1(o)},n.messageToPem=function(e,n){var r={type:"PKCS7",body:t.toDer(e.toAsn1()).getBytes()};return W.pem.encode(r,{maxline:n})},n.messageFromAsn1=function(e){var r={},a=[];if(!t.validate(e,n.asn1.contentInfoValidator,r,a)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=a,o}var i,s=t.derToOid(r.contentType);switch(s){case W.pki.oids.envelopedData:i=n.createEnvelopedData();break;case W.pki.oids.encryptedData:i=n.createEncryptedData();break;case W.pki.oids.signedData:i=n.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+s+" is not (yet) supported.")}return i.fromAsn1(r.content.value[0]),i},n.createSignedData=function(){var e=null;return e={type:W.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(s(e,t,n.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var r=e.rawCapture.certificates.value,a=0;a<r.length;++a)e.certificates.push(W.pki.certificateFromAsn1(r[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],r=0;r<e.certificates.length;++r)n.push(W.pki.certificateToAsn1(e.certificates[r]));var a=[],o=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&o.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,n)),a.length>0&&o.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,a)),o.value[0].value.push(t.create(t.Class.UNIVERSAL,t.Type.SET,!0,e.signerInfos)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),o])},addSigner:function(t){var n=t.issuer,r=t.serialNumber;if(t.certificate){var a=t.certificate;"string"==typeof a&&(a=W.pki.certificateFromPem(a)),n=a.issuer.attributes,r=a.serialNumber}var o=t.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof o&&(o=W.pki.privateKeyFromPem(o));var i=t.digestAlgorithm||W.pki.oids.sha1;switch(i){case W.pki.oids.sha1:case W.pki.oids.sha256:case W.pki.oids.sha384:case W.pki.oids.sha512:case W.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+i)}var s=t.authenticatedAttributes||[];if(s.length>0){for(var u=!1,c=!1,l=0;l<s.length;++l){var d=s[l];if(u||d.type!==W.pki.oids.contentType){if(c||d.type!==W.pki.oids.messageDigest);else if(c=!0,u)break}else if(u=!0,c)break}if(!u||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:n,serialNumber:r,digestAlgorithm:i,signatureAlgorithm:W.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:s,unauthenticatedAttributes:[]})},sign:function(n){var r;n=n||{},("object"!=typeof e.content||null===e.contentInfo)&&(e.contentInfo=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(W.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof W.util.ByteBuffer?r=e.content.bytes():"string"==typeof e.content&&(r=W.util.encodeUtf8(e.content)),n.detached?e.detachedContent=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r):e.contentInfo.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r)])))),0!==e.signers.length&&function(n){var r;if(!(r=e.detachedContent?e.detachedContent:(r=e.contentInfo.value[1]).value[0]))throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=t.derToOid(e.contentInfo.value[0].value),s=t.toDer(r);for(var u in s.getByte(),t.getBerValueLength(s),s=s.getBytes(),n)n[u].start().update(s);for(var c=new Date,l=0;l<e.signers.length;++l){var d=e.signers[l];if(0===d.authenticatedAttributes.length){if(a!==W.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[]),f=0;f<d.authenticatedAttributes.length;++f){var h=d.authenticatedAttributes[f];h.type===W.pki.oids.messageDigest?h.value=n[d.digestAlgorithm].digest():h.type===W.pki.oids.signingTime&&(h.value||(h.value=c)),p.value.push(i(h)),d.authenticatedAttributesAsn1.value.push(i(h))}s=t.toDer(p).getBytes(),d.md.start().update(s)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],n=0;n<e.length;++n)t.push(o(e[n]));return t}(e.signers)}(function(){for(var n={},r=0;r<e.signers.length;++r){var a=e.signers[r];(o=a.digestAlgorithm)in n||(n[o]=W.md[W.pki.oids[o]].create()),0===a.authenticatedAttributes.length?a.md=n[o]:a.md=W.md[W.pki.oids[o]].create()}for(var o in e.digestAlgorithmIdentifiers=[],n)e.digestAlgorithmIdentifiers.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(o).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]));return n}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=W.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},n.createEncryptedData=function(){var e=null;return e={type:W.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:W.pki.oids["aes256-CBC"]},fromAsn1:function(t){s(e,t,n.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),u(e)}}},n.createEnvelopedData=function(){var e=null;return e={type:W.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:W.pki.oids["aes256-CBC"]},fromAsn1:function(t){var a=s(e,t,n.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],n=0;n<e.length;++n)t.push(r(e[n]));return t}(a.recipientInfos.value)},toAsn1:function(){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,a(e.recipients)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,(n=e.encryptedContent,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(W.pki.oids.data).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.parameter.getBytes())]),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n.content.getBytes())])]))])])]);var n},findRecipient:function(t){for(var n=t.issuer.attributes,r=0;r<e.recipients.length;++r){var a=e.recipients[r],o=a.issuer;if(a.serialNumber===t.serialNumber&&o.length===n.length){for(var i=!0,s=0;s<n.length;++s)if(o[s].type!==n[s].type||o[s].value!==n[s].value){i=!1;break}if(i)return a}}return null},decrypt:function(t,n){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==n)switch(t.encryptedContent.algorithm){case W.pki.oids.rsaEncryption:case W.pki.oids.desCBC:var r=n.decrypt(t.encryptedContent.content);e.encryptedContent.key=W.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}u(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:W.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(void 0===e.encryptedContent.content){var r,a,o;switch(n=n||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,n){case W.pki.oids["aes128-CBC"]:r=16,a=16,o=W.aes.createEncryptionCipher;break;case W.pki.oids["aes192-CBC"]:r=24,a=16,o=W.aes.createEncryptionCipher;break;case W.pki.oids["aes256-CBC"]:r=32,a=16,o=W.aes.createEncryptionCipher;break;case W.pki.oids["des-EDE3-CBC"]:r=24,a=8,o=W.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(void 0===t)t=W.util.createBuffer(W.random.getBytes(r));else if(t.length()!=r)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+r+".");e.encryptedContent.algorithm=n,e.encryptedContent.key=t,e.encryptedContent.parameter=W.util.createBuffer(W.random.getBytes(a));var i=o(t);if(i.start(e.encryptedContent.parameter.copy()),i.update(e.content),!i.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=i.output}for(var s=0;s<e.recipients.length;++s){var u=e.recipients[s];if(void 0===u.encryptedContent.content)switch(u.encryptedContent.algorithm){case W.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}}}})),k((function(e){var t=e.exports=W.ssh=W.ssh||{};function n(e,t){var n=t.toString(16);n[0]>="8"&&(n="00"+n);var r=W.util.hexToBytes(n);e.putInt32(r.length),e.putBytes(r)}function r(e,t){e.putInt32(t.length),e.putString(t)}function a(){for(var e=W.md.sha1.create(),t=arguments.length,n=0;n<t;++n)e.update(arguments[n]);return e.digest()}t.privateKeyToPutty=function(e,t,o){var i=""===(t=t||"")?"none":"aes256-cbc",s="PuTTY-User-Key-File-2: ssh-rsa\r\n";s+="Encryption: "+i+"\r\n",s+="Comment: "+(o=o||"")+"\r\n";var u=W.util.createBuffer();r(u,"ssh-rsa"),n(u,e.e),n(u,e.n);var c=W.util.encode64(u.bytes(),64),l=Math.floor(c.length/66)+1;s+="Public-Lines: "+l+"\r\n",s+=c;var d,p=W.util.createBuffer();if(n(p,e.d),n(p,e.p),n(p,e.q),n(p,e.qInv),t){var f=p.length()+16-1;f-=f%16;var h=a(p.bytes());h.truncate(h.length()-f+p.length()),p.putBuffer(h);var m=W.util.createBuffer();m.putBuffer(a("\0\0\0\0",t)),m.putBuffer(a("\0\0\0",t));var g=W.aes.createEncryptionCipher(m.truncate(8),"CBC");g.start(W.util.createBuffer().fillWithByte(0,16)),g.update(p.copy()),g.finish();var v=g.output;v.truncate(16),d=W.util.encode64(v.bytes(),64)}else d=W.util.encode64(p.bytes(),64);s+="\r\nPrivate-Lines: "+(l=Math.floor(d.length/66)+1)+"\r\n",s+=d;var y=a("putty-private-key-file-mac-key",t),b=W.util.createBuffer();r(b,"ssh-rsa"),r(b,i),r(b,o),b.putInt32(u.length()),b.putBuffer(u),b.putInt32(p.length()),b.putBuffer(p);var x=W.hmac.create();return x.start("sha1",y),x.update(b.bytes()),s+"\r\nPrivate-MAC: "+x.digest().toHex()+"\r\n"},t.publicKeyToOpenSSH=function(e,t){t=t||"";var a=W.util.createBuffer();return r(a,"ssh-rsa"),n(a,e.e),n(a,e.n),"ssh-rsa "+W.util.encode64(a.bytes())+" "+t},t.privateKeyToOpenSSH=function(e,t){return t?W.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):W.pki.privateKeyToPem(e)},t.getPublicKeyFingerprint=function(e,t){var a=(t=t||{}).md||W.md.md5.create(),o=W.util.createBuffer();r(o,"ssh-rsa"),n(o,e.e),n(o,e.n),a.start(),a.update(o.getBytes());var i=a.digest();if("hex"===t.encoding){var s=i.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}if("binary"===t.encoding)return i.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return i}}));var ir="forge.task",sr={},ur=0;W.debug.set(ir,"tasks",sr);var cr={};W.debug.set(ir,"queues",cr);var lr="ready",dr="running",pr="blocked",fr="sleeping",hr="done",mr="error",gr={ready:{}};gr.ready.stop=lr,gr.ready.start=dr,gr.ready.cancel=hr,gr.ready.fail=mr,gr.running={},gr.running.stop=lr,gr.running.start=dr,gr.running.block=pr,gr.running.unblock=dr,gr.running.sleep=fr,gr.running.wakeup=dr,gr.running.cancel=hr,gr.running.fail=mr,gr.blocked={},gr.blocked.stop=pr,gr.blocked.start=pr,gr.blocked.block=pr,gr.blocked.unblock=pr,gr.blocked.sleep=pr,gr.blocked.wakeup=pr,gr.blocked.cancel=hr,gr.blocked.fail=mr,gr.sleeping={},gr.sleeping.stop=fr,gr.sleeping.start=fr,gr.sleeping.block=fr,gr.sleeping.unblock=fr,gr.sleeping.sleep=fr,gr.sleeping.wakeup=fr,gr.sleeping.cancel=hr,gr.sleeping.fail=mr,gr.done={},gr.done.stop=hr,gr.done.start=hr,gr.done.block=hr,gr.done.unblock=hr,gr.done.sleep=hr,gr.done.wakeup=hr,gr.done.cancel=hr,gr.done.fail=mr,gr.error={},gr.error.stop=mr,gr.error.start=mr,gr.error.block=mr,gr.error.unblock=mr,gr.error.sleep=mr,gr.error.wakeup=mr,gr.error.cancel=mr,gr.error.fail=mr;var vr=function(e){this.id=-1,this.name=e.name||"?",this.parent=e.parent||null,this.run=e.run,this.subtasks=[],this.error=!1,this.state=lr,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=ur++,sr[this.id]=this};vr.prototype.debug=function(e){e=e||"",W.log.debug(ir,e,"[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",cr)},vr.prototype.next=function(e,t){"function"==typeof e&&(t=e,e=this.name);var n=new vr({run:t,name:e,parent:this});return n.state=dr,n.type=this.type,n.successCallback=this.successCallback||null,n.failureCallback=this.failureCallback||null,this.subtasks.push(n),this},vr.prototype.parallel=function(e,t){return W.util.isArray(e)&&(t=e,e=this.name),this.next(e,(function(n){var r=n;r.block(t.length);for(var a=function(e,n){W.task.start({type:e,run:function(e){t[n](e)},success:function(e){r.unblock()},failure:function(e){r.unblock()}})},o=0;o<t.length;o++)a(e+"__parallel-"+n.id+"-"+o,o)}))},vr.prototype.stop=function(){this.state=gr[this.state].stop},vr.prototype.start=function(){this.error=!1,this.state=gr[this.state].start,this.state===dr&&(this.start=new Date,this.run(this),yr(this,0))},vr.prototype.block=function(e){e=void 0===e?1:e,this.blocks+=e,this.blocks>0&&(this.state=gr[this.state].block)},vr.prototype.unblock=function(e){return e=void 0===e?1:e,this.blocks-=e,0===this.blocks&&this.state!==hr&&(this.state=dr,yr(this,0)),this.blocks},vr.prototype.sleep=function(e){e=void 0===e?0:e,this.state=gr[this.state].sleep;var t=this;this.timeoutId=setTimeout((function(){t.timeoutId=null,t.state=dr,yr(t,0)}),e)},vr.prototype.wait=function(e){e.wait(this)},vr.prototype.wakeup=function(){this.state===fr&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=dr,yr(this,0))},vr.prototype.cancel=function(){this.state=gr[this.state].cancel,this.permitsNeeded=0,null!==this.timeoutId&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},vr.prototype.fail=function(e){if(this.error=!0,br(this,!0),e)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,yr(e,0);else{if(null!==this.parent){for(var t=this.parent;null!==t.parent;)t.error=this.error,t.swapTime=this.swapTime,t.userData=this.userData,t=t.parent;br(t,!0)}this.failureCallback&&this.failureCallback(this)}};var yr=function(e,t){var n=t>30||+new Date-e.swapTime>20,r=function(t){if(t++,e.state===dr)if(n&&(e.swapTime=+new Date),e.subtasks.length>0){var r=e.subtasks.shift();r.error=e.error,r.swapTime=e.swapTime,r.userData=e.userData,r.run(r),r.error||yr(r,t)}else br(e),e.error||null!==e.parent&&(e.parent.error=e.error,e.parent.swapTime=e.swapTime,e.parent.userData=e.userData,yr(e.parent,t))};n?setTimeout(r,0):r(t)},br=function(e,t){e.state=hr,delete sr[e.id],null===e.parent&&(e.type in cr?0===cr[e.type].length?W.log.error(ir,"[%s][%s] task queue empty [%s]",e.id,e.name,e.type):cr[e.type][0]!==e?W.log.error(ir,"[%s][%s] task not first in queue [%s]",e.id,e.name,e.type):(cr[e.type].shift(),0===cr[e.type].length?delete cr[e.type]:cr[e.type][0].start()):W.log.error(ir,"[%s][%s] task queue missing [%s]",e.id,e.name,e.type),t||(e.error&&e.failureCallback?e.failureCallback(e):!e.error&&e.successCallback&&e.successCallback(e)))};W.task=W.task||{},W.task.start=function(e){var t=new vr({run:e.run,name:e.name||"?"});t.type=e.type,t.successCallback=e.success||null,t.failureCallback=e.failure||null,t.type in cr?cr[e.type].push(t):(cr[t.type]=[t],function(e){e.error=!1,e.state=gr[e.state].start,setTimeout((function(){e.state===dr&&(e.swapTime=+new Date,e.run(e),yr(e,0))}),0)}(t))},W.task.cancel=function(e){e in cr&&(cr[e]=[cr[e][0]])},W.task.createCondition=function(){var e={tasks:{},wait:function(t){t.id in e.tasks||(t.block(),e.tasks[t.id]=t)},notify:function(){var t=e.tasks;for(var n in e.tasks={},t)t[n].unblock()}};return e};var xr=W,kr=function(){function e(e){this.secretKey=e}return e.prototype.encrypt=function(e,t){throw new Error("Method not implemented.")},e.prototype.decrypt=function(e,t){return function(e,t,n){void 0===n&&(n=xr.util.createBuffer(Uint8Array.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]).buffer));var r,a,o=xr.cipher.createDecipher("AES-CBC",t);return o.start({iv:n}),o.update(xr.util.createBuffer(xr.util.hexToBytes(e))),a=(r=o.output.data).charCodeAt(r.length-1),r.slice(0,-a)}(e,(n=this.secretKey,r=t.transactionID,""+n.slice(0,16)+r.slice(0,16)));var n,r},e}(),wr=function(){function e(e,t,r,a){void 0===r&&(r="production"),void 0===a&&(a={supportTransaction:!1,enableEncryption:!1}),this.transactionEnabled=a.supportTransaction||!1,this.encryptionEnabled=a.enableEncryption||!1;var o=B(e,t,r,{headers:a.httpHeaders});this.transactionManager=new V(o),this.encryptionService=new kr(t),this.compareFaceService=new d(o),this.clientSettingsService=new p(o),this.convertPDFService=new y(o),this.ekycPDFService=new b(o),this.readIDCardService=new n(o),this.requestVerifyIDCardService=new h(o),this.requestVerifyPortraitSerivce=new m(o),this.imagesService=new c(o),this.fileService=new l(o),this.verifyFaceLivenessService=new f(o),this.searchFaceService=new v(o),this.detectIDTamperingService=new g(o)}return e.prototype.enableTransaction=function(){this.transactionEnabled=!0},e.prototype.disableTransaction=function(){this.transactionEnabled=!1},e.prototype.enableEncryption=function(){this.encryptionEnabled=!0},e.prototype.disableEncryption=function(){this.encryptionEnabled=!1},e.prototype.compareFaces=function(e,t){return this.compareFaceService.request(e,t)},e.prototype.clientSettings=function(){return this.clientSettingsService.request()},e.prototype.uploadImage=function(e){return this.imagesService.request(e)},e.prototype.uploadFile=function(e){return this.fileService.uploadFile(e)},e.prototype.convertPDF=function(e,t){return this.convertPDFService.request(e,t)},e.prototype.ekycPDF=function(e,t){return this.ekycPDFService.request(e,t)},e.prototype.readIDCard=function(e,t){return this.readIDCardService.request(e,t)},e.prototype.requestVerifyIDCard=function(e,t){return this.requestVerifyIDCardService.request(e,t)},e.prototype.requestVerifyPortrait=function(e,t){return this.requestVerifyPortraitSerivce.request(e,t)},e.prototype.verifyFaceLiveness=function(e,t){return this.verifyFaceLivenessService.request(e,t)},e.prototype.searchFaces=function(e,t){return this.searchFaceService.request(e,t)},e.prototype.deleteFaces=function(e,t){return this.searchFaceService.deleteFaces(e,t)},e.prototype.indexFaces=function(e,t){return this.searchFaceService.indexFaces(e,t)},e.prototype.downloadFaceImage=function(e){return this.searchFaceService.downloadFaceImage(e)},e.prototype.downloadImage=function(e){return this.imagesService.download(e)},e.prototype.updateMetadata=function(e,t){return this.imagesService.updateMetadata(e,t)},e.prototype.detectIDTampering=function(e,t){return this.detectIDTamperingService.request(e,t)},o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"compareFaces",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"convertPDF",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"readIDCard",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"requestVerifyIDCard",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"requestVerifyPortrait",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"verifyFaceLiveness",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"searchFaces",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"deleteFaces",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"indexFaces",null),o([L({headerIndex:1}),U(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],e.prototype,"detectIDTampering",null),e}();e.ReadIDCard=n,e.UploadImage=c,e.UploadFile=l,e.CompareFaces=d,e.ClientSettings=p,e.VerifyFaceLiveness=f,e.RequestVerifyIDCard=h,e.RequestVerifyPortrait=m,e.DetectIDTampering=g,e.SearchFaces=v,e.ConvertPDF=y,e.EkycPDF=b,e.HttpClient=A,e.MockClient=_,e.TVAuthorizer=M,e.createHelpers=function(e,t,n){void 0===n&&(n="production");var r=new M(e,t),a=function(e){switch(e){case"testing":return"https://tv-testing.trustingsocial.com/api";case"staging":return"https://tv-staging.trustingsocial.com/api";case"production":default:return"https://vn-vision.trustingsocial.com/api"}}(n);return new A({authorizer:r,domain:a})},e.createHttpClient=B,e.SimpleTrustVisionAPI=P,e.default=wr,Object.defineProperty(e,"__esModule",{value:!0})}(t,r.default)})),oWe=o(aWe),iWe="https://unpkg.com/@tsocial/tvweb-sdk@latest/assets",sWe=tC.getUAMetadata(),uWe=function(){function e(t){var n=this,r=t.container,a=t.lang,o=void 0===a?"en":a,i=t.assetRoot,s=void 0===i?iWe:i;_y(this,e),Fy(this,"checkCamera",(function(e){var t=e.frontCamera,r=void 0===t||t;return new Promise((function(e){tWe.render(Tx.createElement(Mk.SDKSettingsProvider,{value:{lang:n.lang,assetRoot:n.assetRoot}},Tx.createElement(SY,{checkCameraMode:!0,frontCamera:r,onVideoPlayed:function(){n.destroyView(),e(null)},onClose:n.destroyView,onError:function(t){n.destroyView(),e(t)}})),n.container)}))})),Fy(this,"runWarmUpReadIDCard",function(){var e=Ay(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_Ne(t);case 2:n.resultWarmUpReadIDCard=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Fy(this,"destroyView",(function(){tWe.unmountComponentAtNode(n.container)})),rWe(r,"container is a required parameter"),this.container=r,this.lang=o,this.assetRoot=s,this.resultWarmUpReadIDCard=null}return Oy(e,[{key:"readIDCard",value:function(e){var t=e.accessKey,n=e.secretKey,r=e.apiUrl,a=Wy(e,["accessKey","secretKey","apiUrl"]),o=new oWe(t,n,r,{httpHeaders:sWe});tWe.render(Tx.createElement(Mk.SDKSettingsProvider,{value:{lang:this.lang,assetRoot:this.assetRoot,apiClient:o,debug:!1}},Tx.createElement(t_e,My({onClose:this.destroyView},a,{resultWarmup:this.resultWarmUpReadIDCard}))),this.container)}},{key:"livenessDetection",value:function(e){var t=e.apiCheck,n=e.mode,r=e.accessKey,a=e.secretKey,o=e.apiUrl,i=e.onLivenessDetectionDone,s=e.onError,u=Wy(e,["apiCheck","mode","accessKey","secretKey","apiUrl","onLivenessDetectionDone","onError"]),c=new oWe(r,a,o,{httpHeaders:sWe});tWe.render(Tx.createElement(Mk.SDKSettingsProvider,{value:{lang:this.lang,assetRoot:this.assetRoot,apiClient:c}},Tx.createElement(c_e,My({},u,{apiCheck:t,mode:n,onLivenessDetectionDone:i,onClose:this.destroyView,onError:s}))),this.container)}},{key:"compareFaces",value:function(e){var t=e.accessKey,n=e.secretKey,r=e.apiUrl,a=e.image1,o=e.image2,i=e.onSuccess,s=e.onError;new oWe(t,n,r,{httpHeaders:sWe}).compareFaces({image1:{id:a},image2:{id:o}}).then((function(e){i(e)})).catch((function(e){s(e)}))}}]),e}();e.Animations=pAe,e.AssetUtils=Pk,e.AsyncUtils=Lk,e.BASE_Z_INDEX=cY,e.BlurUtils=kw,e.Camera=SY,e.CameraUtils=Iw,e.CommonUtils=Sw,e.Constants=_k,e.CoordinateUtils=_w,e.CropAreaOverlayWrapper=DY,e.FaceUtils=Lw,e.GlareUtils=JI,e.Icons=n_e,e.ImageUtils=YI,e.LivenessDetection=c_e,e.LivenessDetectionComponents=d_e,e.LoadResourceUtils=nC,e.MobileDetect=XQ,e.ModelUtils=zG,e.OverlayAssetImage=BY,e.PlacementArea=OY,e.PredictionUtils=zw,e.ProgressCircle=$ge,e.ReadIDCard=t_e,e.SDK=uWe,e.SettingsContext=Mk,e.UserAgentUtils=tC,e.useLivenessDetection=l_e,e.warmUp=_Ne,Object.defineProperty(e,"__esModule",{value:!0})}));
